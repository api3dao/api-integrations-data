{
  "nodeSettings": {
    "airnodeWalletMnemonic": "${WALLET_MNEMONIC}",
    "nodeVersion": "1.0.0",
    "stage": "${STAGE}"
  },
  "templates": {
    "0x4779afb6384afad8151d9d9ada6f38cf63fe35f71c65ae9dba6a5bd6434b2222": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "apxETH/pxETH Exchange Rate"
        }
      ]
    },
    "0x896559fa0bb1ecb0be353393bd17b051a26c22a75d858262a6744f0054efa778": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "cbETH/stETH Exchange Rate"
        }
      ]
    },
    "0xe23ea915e8456256cb5b64d3c8b4a13de9c2e8065730822822af8d0fe7930006": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "ETHx/ETH Exchange Rate"
        }
      ]
    },
    "0x88c4c7a6ff3a27e1926ead087a6b88ebfdaffece1d3d8fcaa0dd4ebbeb05a3df": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "ezETH/ETH Exchange Rate"
        }
      ]
    },
    "0xe1d235f70582729b8996576d76fdd02ce44e580a067ae8d2805d68d79af6c6e4": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "MATICx/MATIC Exchange Rate"
        }
      ]
    },
    "0xeec1ed9262325f2335c37118947be2d20ce598e86243a2b8ec4f7eed01b487b8": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "mETH/ETH Exchange Rate"
        }
      ]
    },
    "0x3c416ca1641505cd8b9c94a229b297158540cbc3eb864bcb04e0a53af69cec6a": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "mpETH/ETH Exchange Rate"
        }
      ]
    },
    "0x56b09c072d1e3da1ab627d49a6d0f3fedc309281f114a5156672fed32d9947be": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "osETH/ETH Exchange Rate"
        }
      ]
    },
    "0x08b48e6f16d27f3d8b0cbfecfeb81aa678bf66649546254434936263de2bb77c": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "pufETH/stETH Exchange Rate"
        }
      ]
    },
    "0x99dd11514cbab7d950f9b2ae58fcf9a7dea8be35474c5eb24240c149a075cb33": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "rETH/ETH Exchange Rate"
        }
      ]
    },
    "0xb39d3fef3beebce9777015e7416f0dfbd65260031c52d649fcbf680ce5fd530f": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "rsETH/ETH Exchange Rate"
        }
      ]
    },
    "0xfa0afd56fa8eb21ddb4e6d87b96a466d7545aaaaa3e3ec8e69003293f1fc4b94": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "rswETH/ETH Exchange Rate"
        }
      ]
    },
    "0xf3704a931d8cc6e3ec1d25e2cf50b28f4d2f94a495614c8d7a5fc28005e185cf": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "sAVAX/AVAX Exchange Rate"
        }
      ]
    },
    "0xa5b80b66dc751d66d88d7e9befd9c1147e65de0e116a0e83ba4f89f21a2fc2ef": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "sDAI/DAI Exchange Rate"
        }
      ]
    },
    "0x65060923db8544c0eaecde07b165c93196b31537aaa7d3e9019342db0691bc7c": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "sfrxETH/frxETH Exchange Rate"
        }
      ]
    },
    "0x2409a58369bed5a448e93fed81ddde1cad8e078197fb3df05061d33ced951dc2": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "stMATIC/MATIC Exchange Rate"
        }
      ]
    },
    "0xa5f6651b0da589d99a432900ebaede44f1667a4ebc598294913492b1f5147cc6": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "STONE/ETH Exchange Rate"
        }
      ]
    },
    "0xa4a291749fe75f6ea275a155a80cb407310b04f0d9b8f958e777a1eb7e45e785": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "sUSDe/USDe Exchange Rate"
        }
      ]
    },
    "0x5f1b3e0a6bff540c4081057874a434479396808ebde2a1345ff02ef5f43ac319": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "swETH/stETH Exchange Rate"
        }
      ]
    },
    "0x3f58b7890897996c7e6c9f5d4c481731e3c965a55b6098575a1207e61dc5f044": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "USDY/USD Exchange Rate"
        }
      ]
    },
    "0x0ac5f94718312ddb78fdd4d7c4405befb233030faa87f995451aa091eb524548": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "weETH/ETH Exchange Rate"
        }
      ]
    },
    "0xa435fd318da16cf5cb74285644f44d7528ea4cb493be645fd8bfaf26b7629447": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "wstETH/stETH Exchange Rate"
        }
      ]
    },
    "0x354f076fd79dc2e6c7c774617dc396d708e01a435d1daf092c55347c9d53ad37": {
      "endpointId": "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210",
      "parameters": [
        {
          "type": "string32",
          "name": "name",
          "value": "wUSDM/USDM Exchange Rate"
        }
      ]
    }
  },
  "endpoints": {
    "0xe24d5775e68f7df7b50d377d62ea553d53489fe896983c781bf7ad3088f8c210": {
      "endpointName": "feed",
      "oisTitle": "BlastAPI"
    }
  },
  "triggers": {
    "signedApiUpdates": [
      {
        "templateIds": ["0x4779afb6384afad8151d9d9ada6f38cf63fe35f71c65ae9dba6a5bd6434b2222"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x896559fa0bb1ecb0be353393bd17b051a26c22a75d858262a6744f0054efa778"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xe23ea915e8456256cb5b64d3c8b4a13de9c2e8065730822822af8d0fe7930006"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x88c4c7a6ff3a27e1926ead087a6b88ebfdaffece1d3d8fcaa0dd4ebbeb05a3df"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xe1d235f70582729b8996576d76fdd02ce44e580a067ae8d2805d68d79af6c6e4"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xeec1ed9262325f2335c37118947be2d20ce598e86243a2b8ec4f7eed01b487b8"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x3c416ca1641505cd8b9c94a229b297158540cbc3eb864bcb04e0a53af69cec6a"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x56b09c072d1e3da1ab627d49a6d0f3fedc309281f114a5156672fed32d9947be"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x08b48e6f16d27f3d8b0cbfecfeb81aa678bf66649546254434936263de2bb77c"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x99dd11514cbab7d950f9b2ae58fcf9a7dea8be35474c5eb24240c149a075cb33"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xb39d3fef3beebce9777015e7416f0dfbd65260031c52d649fcbf680ce5fd530f"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xfa0afd56fa8eb21ddb4e6d87b96a466d7545aaaaa3e3ec8e69003293f1fc4b94"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xf3704a931d8cc6e3ec1d25e2cf50b28f4d2f94a495614c8d7a5fc28005e185cf"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xa5b80b66dc751d66d88d7e9befd9c1147e65de0e116a0e83ba4f89f21a2fc2ef"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x65060923db8544c0eaecde07b165c93196b31537aaa7d3e9019342db0691bc7c"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x2409a58369bed5a448e93fed81ddde1cad8e078197fb3df05061d33ced951dc2"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xa5f6651b0da589d99a432900ebaede44f1667a4ebc598294913492b1f5147cc6"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xa4a291749fe75f6ea275a155a80cb407310b04f0d9b8f958e777a1eb7e45e785"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x5f1b3e0a6bff540c4081057874a434479396808ebde2a1345ff02ef5f43ac319"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x3f58b7890897996c7e6c9f5d4c481731e3c965a55b6098575a1207e61dc5f044"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x0ac5f94718312ddb78fdd4d7c4405befb233030faa87f995451aa091eb524548"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0xa435fd318da16cf5cb74285644f44d7528ea4cb493be645fd8bfaf26b7629447"],
        "fetchInterval": 60
      },
      {
        "templateIds": ["0x354f076fd79dc2e6c7c774617dc396d708e01a435d1daf092c55347c9d53ad37"],
        "fetchInterval": 60
      }
    ]
  },
  "signedApis": [
    {
      "name": "Nodary",
      "url": "https://signed-api.nodary.io",
      "authToken": "${AUTH_TOKEN_NODARY}"
    }
  ],
  "ois": [
    {
      "oisFormat": "2.3.0",
      "title": "BlastAPI",
      "version": "1.0.0",
      "apiSpecifications": {
        "components": {
          "securitySchemes": {
            "ETHEREUM_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "OPTIMISM_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "BINANCE_SMART_CHAIN_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "POLYGON_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "POLYGON_ZKEVM_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "MOONBEAM_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "MANTLE_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "BASE_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "ARBITRUM_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "AVALANCHE_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "LINEA_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            },
            "BLAST_RPC_URL": {
              "in": "query",
              "name": "",
              "type": "apiKey"
            }
          }
        },
        "paths": {
          "/{path}": {
            "get": {
              "parameters": [
                {
                  "in": "path",
                  "name": "path"
                },
                {
                  "in": "query",
                  "name": "dAPIName"
                },
                {
                  "in": "query",
                  "name": "multicallData"
                },
                {
                  "in": "query",
                  "name": "returnTypes"
                },
                {
                  "in": "query",
                  "name": "chainId"
                },
                {
                  "in": "query",
                  "name": "returnFormat"
                }
              ]
            }
          }
        },
        "servers": [
          {
            "url": "https://blastapi.io"
          }
        ],
        "security": {
          "ETHEREUM_RPC_URL": [],
          "OPTIMISM_RPC_URL": [],
          "BINANCE_SMART_CHAIN_RPC_URL": [],
          "POLYGON_RPC_URL": [],
          "POLYGON_ZKEVM_RPC_URL": [],
          "MOONBEAM_RPC_URL": [],
          "MANTLE_RPC_URL": [],
          "BASE_RPC_URL": [],
          "ARBITRUM_RPC_URL": [],
          "AVALANCHE_RPC_URL": [],
          "LINEA_RPC_URL": [],
          "BLAST_RPC_URL": []
        }
      },
      "endpoints": [
        {
          "fixedOperationParameters": [],
          "name": "feed",
          "parameters": [
            {
              "name": "name",
              "required": true
            },
            {
              "name": "path",
              "operationParameter": {
                "in": "path",
                "name": "path"
              },
              "required": true
            },
            {
              "name": "dAPIName",
              "operationParameter": {
                "in": "query",
                "name": "dAPIName"
              },
              "required": true
            },
            {
              "name": "multicallData",
              "operationParameter": {
                "in": "query",
                "name": "multicallData"
              },
              "required": true
            },
            {
              "name": "returnTypes",
              "operationParameter": {
                "in": "query",
                "name": "returnTypes"
              },
              "required": true
            },
            {
              "name": "chainId",
              "operationParameter": {
                "in": "query",
                "name": "chainId"
              },
              "required": true
            },
            {
              "name": "returnFormat",
              "operationParameter": {
                "in": "query",
                "name": "returnFormat"
              },
              "required": true
            }
          ],
          "reservedParameters": [
            {
              "name": "_type",
              "fixed": "int256"
            },
            {
              "name": "_times",
              "fixed": "1"
            }
          ],
          "preProcessingSpecificationV2": {
            "environment": "Node",
            "value": "({ endpointParameters }) => {\n  const preProcessingObject = {\n    \"apxETH/pxETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"apxETH/pxETH Exchange Rate\",\n        multicallData:\n          \"0x252dba420000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000009ba021b0a9b958b5e75ce9f6dff97c7ee52cb3e60000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000435d16e1700000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"cbETH/stETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"cbETH/stETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000be9895146f7af43049ca1c1ae358b0541ea49704000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000043ba0b9a900000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"ETHx/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"ETHx/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000f64bae65f6f2a5277571143a24faafdfc0c2a737000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000043ba0b9a900000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\",\"uint256\",\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[2]\",\n      },\n    },\n    \"ezETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"ezETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba4200000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000057f5e098cad7a3d1eed53991d4d66c45c9af78120000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002407a2d13a0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"MATICx/MATIC Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"MATICx/MATIC Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000f03a7eb46d01d9ecaa104558c732cf82f6b6b6450000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002475a85ef50000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[1]\",\n      },\n    },\n    \"mETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"mETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000e3cbd06d7dadb3f4e6557bab7edd924cd1489e8f000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000245890c11c0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"mpETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"mpETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba4200000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000048afbbd342f64ef8a9ab1c143719b63c2ad817100000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002407a2d13a0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"osETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"osETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba420000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000008023518b2192fb5384dadc596765b3dd1cdfe4710000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000450d25bcd00000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"pufETH/stETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"pufETH/stETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000d9a442856c234a39a81a089c06451ebaa4306a720000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002407a2d13a0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"rETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"rETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000ae78736cd615f374d3085123a210448e74fc639300000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000004e6aa216c00000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"rsETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"rsETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000349a73444b1a310bae67ef67973022020d70020d00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000004b4b4643400000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"rswETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"rswETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000fae103dc9cf190ed75350761e95403b7b8afa6c000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000004a7b9544e00000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"sAVAX/AVAX Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"sAVAX/AVAX Exchange Rate\",\n        multicallData:\n          \"0x252dba420000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000002b2c81e08f1af8835a78bb2a90ae924ace0ea4be000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000244a36d6c10000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"43114\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"sDAI/DAI Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"sDAI/DAI Exchange Rate\",\n        multicallData:\n          \"0x252dba4200000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000083f20f44975d03b1b09e64809b757c47f942beea0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002407a2d13a0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"sfrxETH/frxETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"sfrxETH/frxETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000ac3e018457b222d93114458476f3e3416abbe38f0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000499530b0600000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"stMATIC/MATIC Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"stMATIC/MATIC Exchange Rate\",\n        multicallData:\n          \"0x252dba420000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000009ee91f9f426fa633d227f7a9b000e28b9dfd859900000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000024d968447c0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[1]\",\n      },\n    },\n    \"STONE/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"STONE/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba420000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000007122985656e38bdc0302db86685bb972b145bd3c000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000047ff9b59600000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"sUSDe/USDe Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"sUSDe/USDe Exchange Rate\",\n        multicallData:\n          \"0x252dba420000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000009d39a5de30e57443bff2a8307a4256c8797a34970000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002407a2d13a0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"swETH/stETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"swETH/stETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000f951e335afb289353dc249e82926178eac7ded7800000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000004679aefce00000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"USDY/USD Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"USDY/USD Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000a96abbe61afedeb0d14a20440ae7100d9ab4882f0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000498d5fdca00000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"5000\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"weETH/ETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"weETH/ETH Exchange Rate\",\n        multicallData:\n          \"0x252dba42000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000cd5fe23c85820f7b72d0926fc9b05b43e359b7ee00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000024946260440000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"wstETH/stETH Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"wstETH/stETH Exchange Rate\",\n        multicallData:\n          \"0x252dba420000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000007f39c581f595b53c5cb19bd0b3f8da6c935e2ca000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000024bb2952fc0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n    \"wUSDM/USDM Exchange Rate\": {\n      path: \"/\",\n      parameters: {\n        dAPIName: \"wUSDM/USDM Exchange Rate\",\n        multicallData:\n          \"0x252dba4200000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000057f5e098cad7a3d1eed53991d4d66c45c9af78120000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000002407a2d13a0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000000000000\",\n        returnTypes: '[[\"uint256\"]]',\n        chainId: \"1\",\n        returnFormat: \"[0]\",\n      },\n    },\n  }\n  return {\n    endpointParameters: {\n      path: preProcessingObject[endpointParameters.name].path,\n      ...preProcessingObject[endpointParameters.name].parameters,\n    },\n  }\n}\n",
            "timeoutMs": 5000
          },
          "postProcessingSpecificationV2": {
            "environment": "Node",
            "value": "\n                async ({ response, endpointParameters }) => {\n                  const postProcessingObject = {\"apxETH/pxETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"cbETH/stETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"ETHx/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0]\\n        }\\n        \",\"ezETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"MATICx/MATIC Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0]\\n        }\\n        \",\"mETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"mpETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"osETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"pufETH/stETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"rETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"rsETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"rswETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"sAVAX/AVAX Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"sDAI/DAI Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"sfrxETH/frxETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"stMATIC/MATIC Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0]\\n        }\\n        \",\"STONE/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"sUSDe/USDe Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"swETH/stETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"USDY/USD Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"weETH/ETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"wstETH/stETH Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \",\"wUSDM/USDM Exchange Rate\":\"(response) => {\\n          return response['response']['calls'][0][0]\\n        }\\n        \"};\n                  const input = { endpointParameters: response.data, ...{\"1\":\"${ETHEREUM_RPC_URL_VALUE}\",\"10\":\"${OPTIMISM_RPC_URL_VALUE}\",\"56\":\"${BINANCE_SMART_CHAIN_RPC_URL_VALUE}\",\"137\":\"${POLYGON_RPC_URL_VALUE}\",\"1101\":\"${POLYGON_ZKEVM_RPC_URL_VALUE}\",\"1284\":\"${MOONBEAM_RPC_URL_VALUE}\",\"5000\":\"${MANTLE_RPC_URL_VALUE}\",\"8453\":\"${BASE_RPC_URL_VALUE}\",\"42161\":\"${ARBITRUM_RPC_URL_VALUE}\",\"43114\":\"${AVALANCHE_RPC_URL_VALUE}\",\"59144\":\"${LINEA_RPC_URL_VALUE}\",\"81457\":\"${BLAST_RPC_URL_VALUE}\"} };\n                  const worker = new worker_threads.Worker(`console.log('This is shim code - worker has started.');  \\${new buffer.Buffer('KCgpID0-IHsKICAndXNlIHN0cmljdCc7CiAgdmFyIGUgPSB7CiAgICAgIDcxMjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuY3JlYXRlQ3VydmUgPSB0LmdldEhhc2ggPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDU0NjQpLAogICAgICAgICAgcyA9IHIoODA2NCksCiAgICAgICAgICBvID0gcigxNDQpOwogICAgICAgIGZ1bmN0aW9uIGkoZSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGFzaDogZSwKICAgICAgICAgICAgaG1hYzogKHQsIC4uLnIpID0-ICgwLCBuLmhtYWMpKGUsIHQsICgwLCBzLmNvbmNhdEJ5dGVzKSguLi5yKSksCiAgICAgICAgICAgIHJhbmRvbUJ5dGVzOiBzLnJhbmRvbUJ5dGVzCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICAodC5nZXRIYXNoID0gaSksCiAgICAgICAgICAodC5jcmVhdGVDdXJ2ZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSAodCkgPT4gKDAsIG8ud2VpZXJzdHJhc3MpKHsgLi4uZSwgLi4uaSh0KSB9KTsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUoeyAuLi5yKHQpLCBjcmVhdGU6IHIgfSk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgOTQxNjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQudmFsaWRhdGVCYXNpYyA9IHQud05BRiA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzQ4NCksCiAgICAgICAgICBzID0gcig1OTUyKSwKICAgICAgICAgIG8gPSBCaWdJbnQoMCksCiAgICAgICAgICBpID0gQmlnSW50KDEpOwogICAgICAgICh0LndOQUYgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IChlLCB0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgciA9IHQubmVnYXRlKCk7CiAgICAgICAgICAgICAgcmV0dXJuIGUgPyByIDogdDsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbiA9IChlKSA9PiAoeyB3aW5kb3dzOiBNYXRoLmNlaWwodCAvIGUpICsgMSwgd2luZG93U2l6ZTogMiAqKiAoZSAtIDEpIH0pOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY29uc3RUaW1lTmVnYXRlOiByLAogICAgICAgICAgICB1bnNhZmVMYWRkZXIodCwgcikgewogICAgICAgICAgICAgIGxldCBuID0gZS5aRVJPLAogICAgICAgICAgICAgICAgcyA9IHQ7CiAgICAgICAgICAgICAgZm9yICg7IHIgPiBvOyApIHIgJiBpICYmIChuID0gbi5hZGQocykpLCAocyA9IHMuZG91YmxlKCkpLCAociA-Pj0gaSk7CiAgICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByZWNvbXB1dGVXaW5kb3coZSwgdCkgewogICAgICAgICAgICAgIGNvbnN0IHsgd2luZG93czogciwgd2luZG93U2l6ZTogcyB9ID0gbih0KSwKICAgICAgICAgICAgICAgIG8gPSBbXTsKICAgICAgICAgICAgICBsZXQgaSA9IGUsCiAgICAgICAgICAgICAgICBhID0gaTsKICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHI7IGUrKykgewogICAgICAgICAgICAgICAgKGEgPSBpKSwgby5wdXNoKGEpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCBzOyBlKyspIChhID0gYS5hZGQoaSkpLCBvLnB1c2goYSk7CiAgICAgICAgICAgICAgICBpID0gYS5kb3VibGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIG87CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdOQUYodCwgcywgbykgewogICAgICAgICAgICAgIGNvbnN0IHsgd2luZG93czogYSwgd2luZG93U2l6ZTogYyB9ID0gbih0KTsKICAgICAgICAgICAgICBsZXQgdSA9IGUuWkVSTywKICAgICAgICAgICAgICAgIGwgPSBlLkJBU0U7CiAgICAgICAgICAgICAgY29uc3QgZCA9IEJpZ0ludCgyICoqIHQgLSAxKSwKICAgICAgICAgICAgICAgIGYgPSAyICoqIHQsCiAgICAgICAgICAgICAgICBoID0gQmlnSW50KHQpOwogICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgYTsgZSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZSAqIGM7CiAgICAgICAgICAgICAgICBsZXQgbiA9IE51bWJlcihvICYgZCk7CiAgICAgICAgICAgICAgICAobyA-Pj0gaCksIG4gPiBjICYmICgobiAtPSBmKSwgKG8gKz0gaSkpOwogICAgICAgICAgICAgICAgY29uc3QgYSA9IHQsCiAgICAgICAgICAgICAgICAgIGcgPSB0ICsgTWF0aC5hYnMobikgLSAxLAogICAgICAgICAgICAgICAgICBwID0gZSAlIDIgIT0gMCwKICAgICAgICAgICAgICAgICAgbSA9IG4gPCAwOwogICAgICAgICAgICAgICAgMCA9PT0gbiA_IChsID0gbC5hZGQocihwLCBzW2FdKSkpIDogKHUgPSB1LmFkZChyKG0sIHNbZ10pKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiB7IHA6IHUsIGY6IGwgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd05BRkNhY2hlZChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgY29uc3QgcyA9IGUuX1dJTkRPV19TSVpFIHx8IDE7CiAgICAgICAgICAgICAgbGV0IG8gPSB0LmdldChlKTsKICAgICAgICAgICAgICByZXR1cm4gbyB8fCAoKG8gPSB0aGlzLnByZWNvbXB1dGVXaW5kb3coZSwgcykpLCAxICE9PSBzICYmIHQuc2V0KGUsIG4obykpKSwgdGhpcy53TkFGKHMsIG8sIHIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0pLAogICAgICAgICAgKHQudmFsaWRhdGVCYXNpYyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIG4udmFsaWRhdGVGaWVsZCkoZS5GcCksCiAgICAgICAgICAgICAgKDAsIHMudmFsaWRhdGVPYmplY3QpKAogICAgICAgICAgICAgICAgZSwKICAgICAgICAgICAgICAgIHsgbjogJ2JpZ2ludCcsIGg6ICdiaWdpbnQnLCBHeDogJ2ZpZWxkJywgR3k6ICdmaWVsZCcgfSwKICAgICAgICAgICAgICAgIHsgbkJpdExlbmd0aDogJ2lzU2FmZUludGVnZXInLCBuQnl0ZUxlbmd0aDogJ2lzU2FmZUludGVnZXInIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIE9iamVjdC5mcmVlemUoeyAuLi4oMCwgbi5uTGVuZ3RoKShlLm4sIGUubkJpdExlbmd0aCksIC4uLmUsIHA6IGUuRnAuT1JERVIgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICAxMDMyOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuY3JlYXRlSGFzaGVyID0gdC5pc29nZW55TWFwID0gdC5oYXNoX3RvX2ZpZWxkID0gdC5leHBhbmRfbWVzc2FnZV94b2YgPSB0LmV4cGFuZF9tZXNzYWdlX3htZCA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzQ4NCksCiAgICAgICAgICBzID0gcig1OTUyKSwKICAgICAgICAgIG8gPSBzLmJ5dGVzVG9OdW1iZXJCRTsKICAgICAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgICAgIGlmIChlIDwgMCB8fCBlID49IDEgPDwgKDggKiB0KSkgdGhyb3cgbmV3IEVycm9yKGBiYWQgSTJPU1AgY2FsbDogdmFsdWU9JHtlfSBsZW5ndGg9JHt0fWApOwogICAgICAgICAgY29uc3QgciA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHQgfSkuZmlsbCgwKTsKICAgICAgICAgIGZvciAobGV0IG4gPSB0IC0gMTsgbiA-PSAwOyBuLS0pIChyW25dID0gMjU1ICYgZSksIChlID4-Pj0gOCk7CiAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkocik7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKTsKICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgcltuXSA9IGVbbl0gXiB0W25dOwogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKSB0aHJvdyBuZXcgRXJyb3IoJ1VpbnQ4QXJyYXkgZXhwZWN0ZWQnKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdShlKSB7CiAgICAgICAgICBpZiAoIU51bWJlci5pc1NhZmVJbnRlZ2VyKGUpKSB0aHJvdyBuZXcgRXJyb3IoJ251bWJlciBleHBlY3RlZCcpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGUsIHQsIHIsIG4pIHsKICAgICAgICAgIGMoZSksIGModCksIHUociksIHQubGVuZ3RoID4gMjU1ICYmICh0ID0gbigoMCwgcy5jb25jYXRCeXRlcykoKDAsIHMudXRmOFRvQnl0ZXMpKCdIMkMtT1ZFUlNJWkUtRFNULScpLCB0KSkpOwogICAgICAgICAgY29uc3QgeyBvdXRwdXRMZW46IG8sIGJsb2NrTGVuOiBsIH0gPSBuLAogICAgICAgICAgICBkID0gTWF0aC5jZWlsKHIgLyBvKTsKICAgICAgICAgIGlmIChkID4gMjU1KSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgeG1kIGxlbmd0aCcpOwogICAgICAgICAgY29uc3QgZiA9ICgwLCBzLmNvbmNhdEJ5dGVzKSh0LCBpKHQubGVuZ3RoLCAxKSksCiAgICAgICAgICAgIGggPSBpKDAsIGwpLAogICAgICAgICAgICBnID0gaShyLCAyKSwKICAgICAgICAgICAgcCA9IG5ldyBBcnJheShkKSwKICAgICAgICAgICAgbSA9IG4oKDAsIHMuY29uY2F0Qnl0ZXMpKGgsIGUsIGcsIGkoMCwgMSksIGYpKTsKICAgICAgICAgIHBbMF0gPSBuKCgwLCBzLmNvbmNhdEJ5dGVzKShtLCBpKDEsIDEpLCBmKSk7CiAgICAgICAgICBmb3IgKGxldCBlID0gMTsgZSA8PSBkOyBlKyspIHsKICAgICAgICAgICAgY29uc3QgdCA9IFthKG0sIHBbZSAtIDFdKSwgaShlICsgMSwgMSksIGZdOwogICAgICAgICAgICBwW2VdID0gbigoMCwgcy5jb25jYXRCeXRlcykoLi4udCkpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICgwLCBzLmNvbmNhdEJ5dGVzKSguLi5wKS5zbGljZSgwLCByKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZChlLCB0LCByLCBuLCBvKSB7CiAgICAgICAgICBpZiAoKGMoZSksIGModCksIHUociksIHQubGVuZ3RoID4gMjU1KSkgewogICAgICAgICAgICBjb25zdCBlID0gTWF0aC5jZWlsKCgyICogbikgLyA4KTsKICAgICAgICAgICAgdCA9IG8KICAgICAgICAgICAgICAuY3JlYXRlKHsgZGtMZW46IGUgfSkKICAgICAgICAgICAgICAudXBkYXRlKCgwLCBzLnV0ZjhUb0J5dGVzKSgnSDJDLU9WRVJTSVpFLURTVC0nKSkKICAgICAgICAgICAgICAudXBkYXRlKHQpCiAgICAgICAgICAgICAgLmRpZ2VzdCgpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHIgPiA2NTUzNSB8fCB0Lmxlbmd0aCA-IDI1NSkgdGhyb3cgbmV3IEVycm9yKCdleHBhbmRfbWVzc2FnZV94b2Y6IGludmFsaWQgbGVuSW5CeXRlcycpOwogICAgICAgICAgcmV0dXJuIG8uY3JlYXRlKHsgZGtMZW46IHIgfSkudXBkYXRlKGUpLnVwZGF0ZShpKHIsIDIpKS51cGRhdGUodCkudXBkYXRlKGkodC5sZW5ndGgsIDEpKS5kaWdlc3QoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZihlLCB0LCByKSB7CiAgICAgICAgICAoMCwgcy52YWxpZGF0ZU9iamVjdCkociwgewogICAgICAgICAgICBEU1Q6ICdzdHJpbmdPclVpbnQ4QXJyYXknLAogICAgICAgICAgICBwOiAnYmlnaW50JywKICAgICAgICAgICAgbTogJ2lzU2FmZUludGVnZXInLAogICAgICAgICAgICBrOiAnaXNTYWZlSW50ZWdlcicsCiAgICAgICAgICAgIGhhc2g6ICdoYXNoJwogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCB7IHA6IGksIGs6IGEsIG06IGYsIGhhc2g6IGgsIGV4cGFuZDogZywgRFNUOiBwIH0gPSByOwogICAgICAgICAgYyhlKSwgdSh0KTsKICAgICAgICAgIGNvbnN0IG0gPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBlOwogICAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkgcmV0dXJuICgwLCBzLnV0ZjhUb0J5dGVzKShlKTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RTVCBtdXN0IGJlIFVpbnQ4QXJyYXkgb3Igc3RyaW5nJyk7CiAgICAgICAgICAgIH0pKHApLAogICAgICAgICAgICBiID0gaS50b1N0cmluZygyKS5sZW5ndGgsCiAgICAgICAgICAgIHkgPSBNYXRoLmNlaWwoKGIgKyBhKSAvIDgpLAogICAgICAgICAgICBBID0gdCAqIGYgKiB5OwogICAgICAgICAgbGV0IHY7CiAgICAgICAgICBpZiAoJ3htZCcgPT09IGcpIHYgPSBsKGUsIG0sIEEsIGgpOwogICAgICAgICAgZWxzZSBpZiAoJ3hvZicgPT09IGcpIHYgPSBkKGUsIG0sIEEsIGEsIGgpOwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmICgnX2ludGVybmFsX3Bhc3MnICE9PSBnKSB0aHJvdyBuZXcgRXJyb3IoJ2V4cGFuZCBtdXN0IGJlICJ4bWQiIG9yICJ4b2YiJyk7CiAgICAgICAgICAgIHYgPSBlOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgRSA9IG5ldyBBcnJheSh0KTsKICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdDsgZSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgQXJyYXkoZik7CiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgZjsgcisrKSB7CiAgICAgICAgICAgICAgY29uc3QgcyA9IHkgKiAociArIGUgKiBmKSwKICAgICAgICAgICAgICAgIGEgPSB2LnN1YmFycmF5KHMsIHMgKyB5KTsKICAgICAgICAgICAgICB0W3JdID0gKDAsIG4ubW9kKShvKGEpLCBpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBFW2VdID0gdDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBFOwogICAgICAgIH0KICAgICAgICAodC5leHBhbmRfbWVzc2FnZV94bWQgPSBsKSwKICAgICAgICAgICh0LmV4cGFuZF9tZXNzYWdlX3hvZiA9IGQpLAogICAgICAgICAgKHQuaGFzaF90b19maWVsZCA9IGYpLAogICAgICAgICAgKHQuaXNvZ2VueU1hcCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSB0Lm1hcCgoZSkgPT4gQXJyYXkuZnJvbShlKS5yZXZlcnNlKCkpOwogICAgICAgICAgICByZXR1cm4gKHQsIG4pID0-IHsKICAgICAgICAgICAgICBjb25zdCBbcywgbywgaSwgYV0gPSByLm1hcCgocikgPT4gci5yZWR1Y2UoKHIsIG4pID0-IGUuYWRkKGUubXVsKHIsIHQpLCBuKSkpOwogICAgICAgICAgICAgIHJldHVybiAodCA9IGUuZGl2KHMsIG8pKSwgKG4gPSBlLm11bChuLCBlLmRpdihpLCBhKSkpLCB7IHg6IHQsIHk6IG4gfTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuY3JlYXRlSGFzaGVyID0gZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgIT0gdHlwZW9mIHQpIHRocm93IG5ldyBFcnJvcignbWFwVG9DdXJ2ZSgpIG11c3QgYmUgZGVmaW5lZCcpOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGhhc2hUb0N1cnZlKG4sIHMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBmKG4sIDIsIHsgLi4uciwgRFNUOiByLkRTVCwgLi4ucyB9KSwKICAgICAgICAgICAgICAgICAgaSA9IGUuZnJvbUFmZmluZSh0KG9bMF0pKSwKICAgICAgICAgICAgICAgICAgYSA9IGUuZnJvbUFmZmluZSh0KG9bMV0pKSwKICAgICAgICAgICAgICAgICAgYyA9IGkuYWRkKGEpLmNsZWFyQ29mYWN0b3IoKTsKICAgICAgICAgICAgICAgIHJldHVybiBjLmFzc2VydFZhbGlkaXR5KCksIGM7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBlbmNvZGVUb0N1cnZlKG4sIHMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBmKG4sIDEsIHsgLi4uciwgRFNUOiByLmVuY29kZURTVCwgLi4ucyB9KSwKICAgICAgICAgICAgICAgICAgaSA9IGUuZnJvbUFmZmluZSh0KG9bMF0pKS5jbGVhckNvZmFjdG9yKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gaS5hc3NlcnRWYWxpZGl0eSgpLCBpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICAzNDg0OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQubWFwSGFzaFRvRmllbGQgPQogICAgICAgICAgICB0LmdldE1pbkhhc2hMZW5ndGggPQogICAgICAgICAgICB0LmdldEZpZWxkQnl0ZXNMZW5ndGggPQogICAgICAgICAgICB0Lmhhc2hUb1ByaXZhdGVTY2FsYXIgPQogICAgICAgICAgICB0LkZwU3FydEV2ZW4gPQogICAgICAgICAgICB0LkZwU3FydE9kZCA9CiAgICAgICAgICAgIHQuRmllbGQgPQogICAgICAgICAgICB0Lm5MZW5ndGggPQogICAgICAgICAgICB0LkZwSXNTcXVhcmUgPQogICAgICAgICAgICB0LkZwRGl2ID0KICAgICAgICAgICAgdC5GcEludmVydEJhdGNoID0KICAgICAgICAgICAgdC5GcFBvdyA9CiAgICAgICAgICAgIHQudmFsaWRhdGVGaWVsZCA9CiAgICAgICAgICAgIHQuaXNOZWdhdGl2ZUxFID0KICAgICAgICAgICAgdC5GcFNxcnQgPQogICAgICAgICAgICB0LnRvbmVsbGlTaGFua3MgPQogICAgICAgICAgICB0LmludmVydCA9CiAgICAgICAgICAgIHQucG93MiA9CiAgICAgICAgICAgIHQucG93ID0KICAgICAgICAgICAgdC5tb2QgPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTk1MiksCiAgICAgICAgICBzID0gQmlnSW50KDApLAogICAgICAgICAgbyA9IEJpZ0ludCgxKSwKICAgICAgICAgIGkgPSBCaWdJbnQoMiksCiAgICAgICAgICBhID0gQmlnSW50KDMpLAogICAgICAgICAgYyA9IEJpZ0ludCg0KSwKICAgICAgICAgIHUgPSBCaWdJbnQoNSksCiAgICAgICAgICBsID0gQmlnSW50KDgpOwogICAgICAgIGZ1bmN0aW9uIGQoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IGUgJSB0OwogICAgICAgICAgcmV0dXJuIHIgPj0gcyA_IHIgOiB0ICsgcjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZihlLCB0LCByKSB7CiAgICAgICAgICBpZiAociA8PSBzIHx8IHQgPCBzKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHBvd2VyL21vZHVsbyA-IDAnKTsKICAgICAgICAgIGlmIChyID09PSBvKSByZXR1cm4gczsKICAgICAgICAgIGxldCBuID0gbzsKICAgICAgICAgIGZvciAoOyB0ID4gczsgKSB0ICYgbyAmJiAobiA9IChuICogZSkgJSByKSwgKGUgPSAoZSAqIGUpICUgciksICh0ID4-PSBvKTsKICAgICAgICAgIHJldHVybiBuOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBoKGUsIHQpIHsKICAgICAgICAgIGlmIChlID09PSBzIHx8IHQgPD0gcykgdGhyb3cgbmV3IEVycm9yKGBpbnZlcnQ6IGV4cGVjdGVkIHBvc2l0aXZlIGludGVnZXJzLCBnb3Qgbj0ke2V9IG1vZD0ke3R9YCk7CiAgICAgICAgICBsZXQgciA9IGQoZSwgdCksCiAgICAgICAgICAgIG4gPSB0LAogICAgICAgICAgICBpID0gcywKICAgICAgICAgICAgYSA9IG8sCiAgICAgICAgICAgIGMgPSBvLAogICAgICAgICAgICB1ID0gczsKICAgICAgICAgIGZvciAoOyByICE9PSBzOyApIHsKICAgICAgICAgICAgY29uc3QgZSA9IG4gLyByLAogICAgICAgICAgICAgIHQgPSBuICUgciwKICAgICAgICAgICAgICBzID0gaSAtIGMgKiBlLAogICAgICAgICAgICAgIG8gPSBhIC0gdSAqIGU7CiAgICAgICAgICAgIChuID0gciksIChyID0gdCksIChpID0gYyksIChhID0gdSksIChjID0gcyksICh1ID0gbyk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobiAhPT0gbykgdGhyb3cgbmV3IEVycm9yKCdpbnZlcnQ6IGRvZXMgbm90IGV4aXN0Jyk7CiAgICAgICAgICByZXR1cm4gZChpLCB0KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZyhlKSB7CiAgICAgICAgICBjb25zdCB0ID0gKGUgLSBvKSAvIGk7CiAgICAgICAgICBsZXQgciwgbiwgYTsKICAgICAgICAgIGZvciAociA9IGUgLSBvLCBuID0gMDsgciAlIGkgPT09IHM7IHIgLz0gaSwgbisrKTsKICAgICAgICAgIGZvciAoYSA9IGk7IGEgPCBlICYmIGYoYSwgdCwgZSkgIT09IGUgLSBvOyBhKyspOwogICAgICAgICAgaWYgKDEgPT09IG4pIHsKICAgICAgICAgICAgY29uc3QgdCA9IChlICsgbykgLyBjOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgICAgICAgICBjb25zdCBuID0gZS5wb3cociwgdCk7CiAgICAgICAgICAgICAgaWYgKCFlLmVxbChlLnNxcihuKSwgcikpIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgc3F1YXJlIHJvb3QnKTsKICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHUgPSAociArIG8pIC8gaTsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgcykgewogICAgICAgICAgICBpZiAoZS5wb3cocywgdCkgPT09IGUubmVnKGUuT05FKSkgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBzcXVhcmUgcm9vdCcpOwogICAgICAgICAgICBsZXQgaSA9IG4sCiAgICAgICAgICAgICAgYyA9IGUucG93KGUubXVsKGUuT05FLCBhKSwgciksCiAgICAgICAgICAgICAgbCA9IGUucG93KHMsIHUpLAogICAgICAgICAgICAgIGQgPSBlLnBvdyhzLCByKTsKICAgICAgICAgICAgZm9yICg7ICFlLmVxbChkLCBlLk9ORSk7ICkgewogICAgICAgICAgICAgIGlmIChlLmVxbChkLCBlLlpFUk8pKSByZXR1cm4gZS5aRVJPOwogICAgICAgICAgICAgIGxldCB0ID0gMTsKICAgICAgICAgICAgICBmb3IgKGxldCByID0gZS5zcXIoZCk7IHQgPCBpICYmICFlLmVxbChyLCBlLk9ORSk7IHQrKykgciA9IGUuc3FyKHIpOwogICAgICAgICAgICAgIGNvbnN0IHIgPSBlLnBvdyhjLCBvIDw8IEJpZ0ludChpIC0gdCAtIDEpKTsKICAgICAgICAgICAgICAoYyA9IGUuc3FyKHIpKSwgKGwgPSBlLm11bChsLCByKSksIChkID0gZS5tdWwoZCwgYykpLCAoaSA9IHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBsOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcChlKSB7CiAgICAgICAgICBpZiAoZSAlIGMgPT09IGEpIHsKICAgICAgICAgICAgY29uc3QgdCA9IChlICsgbykgLyBjOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHIpIHsKICAgICAgICAgICAgICBjb25zdCBuID0gZS5wb3cociwgdCk7CiAgICAgICAgICAgICAgaWYgKCFlLmVxbChlLnNxcihuKSwgcikpIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgc3F1YXJlIHJvb3QnKTsKICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlICUgbCA9PT0gdSkgewogICAgICAgICAgICBjb25zdCB0ID0gKGUgLSB1KSAvIGw7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgIGNvbnN0IG4gPSBlLm11bChyLCBpKSwKICAgICAgICAgICAgICAgIHMgPSBlLnBvdyhuLCB0KSwKICAgICAgICAgICAgICAgIG8gPSBlLm11bChyLCBzKSwKICAgICAgICAgICAgICAgIGEgPSBlLm11bChlLm11bChvLCBpKSwgcyksCiAgICAgICAgICAgICAgICBjID0gZS5tdWwobywgZS5zdWIoYSwgZS5PTkUpKTsKICAgICAgICAgICAgICBpZiAoIWUuZXFsKGUuc3FyKGMpLCByKSkgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBzcXVhcmUgcm9vdCcpOwogICAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGcoZSk7CiAgICAgICAgfQogICAgICAgIEJpZ0ludCg5KSwKICAgICAgICAgIEJpZ0ludCgxNiksCiAgICAgICAgICAodC5tb2QgPSBkKSwKICAgICAgICAgICh0LnBvdyA9IGYpLAogICAgICAgICAgKHQucG93MiA9IGZ1bmN0aW9uIChlLCB0LCByKSB7CiAgICAgICAgICAgIGxldCBuID0gZTsKICAgICAgICAgICAgZm9yICg7IHQtLSA-IHM7ICkgKG4gKj0gbiksIChuICU9IHIpOwogICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuaW52ZXJ0ID0gaCksCiAgICAgICAgICAodC50b25lbGxpU2hhbmtzID0gZyksCiAgICAgICAgICAodC5GcFNxcnQgPSBwKSwKICAgICAgICAgICh0LmlzTmVnYXRpdmVMRSA9IChlLCB0KSA9PiAoZChlLCB0KSAmIG8pID09PSBvKTsKICAgICAgICBjb25zdCBtID0gWwogICAgICAgICAgJ2NyZWF0ZScsCiAgICAgICAgICAnaXNWYWxpZCcsCiAgICAgICAgICAnaXMwJywKICAgICAgICAgICduZWcnLAogICAgICAgICAgJ2ludicsCiAgICAgICAgICAnc3FydCcsCiAgICAgICAgICAnc3FyJywKICAgICAgICAgICdlcWwnLAogICAgICAgICAgJ2FkZCcsCiAgICAgICAgICAnc3ViJywKICAgICAgICAgICdtdWwnLAogICAgICAgICAgJ3BvdycsCiAgICAgICAgICAnZGl2JywKICAgICAgICAgICdhZGROJywKICAgICAgICAgICdzdWJOJywKICAgICAgICAgICdtdWxOJywKICAgICAgICAgICdzcXJOJwogICAgICAgIF07CiAgICAgICAgZnVuY3Rpb24gYihlLCB0LCByKSB7CiAgICAgICAgICBpZiAociA8IHMpIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgcG93ZXIgPiAwJyk7CiAgICAgICAgICBpZiAociA9PT0gcykgcmV0dXJuIGUuT05FOwogICAgICAgICAgaWYgKHIgPT09IG8pIHJldHVybiB0OwogICAgICAgICAgbGV0IG4gPSBlLk9ORSwKICAgICAgICAgICAgaSA9IHQ7CiAgICAgICAgICBmb3IgKDsgciA-IHM7ICkgciAmIG8gJiYgKG4gPSBlLm11bChuLCBpKSksIChpID0gZS5zcXIoaSkpLCAociA-Pj0gbyk7CiAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24geShlLCB0KSB7CiAgICAgICAgICBjb25zdCByID0gbmV3IEFycmF5KHQubGVuZ3RoKSwKICAgICAgICAgICAgbiA9IHQucmVkdWNlKCh0LCBuLCBzKSA9PiAoZS5pczAobikgPyB0IDogKChyW3NdID0gdCksIGUubXVsKHQsIG4pKSksIGUuT05FKSwKICAgICAgICAgICAgcyA9IGUuaW52KG4pOwogICAgICAgICAgcmV0dXJuIHQucmVkdWNlUmlnaHQoKHQsIG4sIHMpID0-IChlLmlzMChuKSA_IHQgOiAoKHJbc10gPSBlLm11bCh0LCByW3NdKSksIGUubXVsKHQsIG4pKSksIHMpLCByOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBBKGUsIHQpIHsKICAgICAgICAgIGNvbnN0IHIgPSB2b2lkIDAgIT09IHQgPyB0IDogZS50b1N0cmluZygyKS5sZW5ndGg7CiAgICAgICAgICByZXR1cm4geyBuQml0TGVuZ3RoOiByLCBuQnl0ZUxlbmd0aDogTWF0aC5jZWlsKHIgLyA4KSB9OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB2KGUpIHsKICAgICAgICAgIGlmICgnYmlnaW50JyAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IEVycm9yKCdmaWVsZCBvcmRlciBtdXN0IGJlIGJpZ2ludCcpOwogICAgICAgICAgY29uc3QgdCA9IGUudG9TdHJpbmcoMikubGVuZ3RoOwogICAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0IC8gOCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEUoZSkgewogICAgICAgICAgY29uc3QgdCA9IHYoZSk7CiAgICAgICAgICByZXR1cm4gdCArIE1hdGguY2VpbCh0IC8gMik7CiAgICAgICAgfQogICAgICAgICh0LnZhbGlkYXRlRmllbGQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc3QgdCA9IG0ucmVkdWNlKChlLCB0KSA9PiAoKGVbdF0gPSAnZnVuY3Rpb24nKSwgZSksIHsKICAgICAgICAgICAgT1JERVI6ICdiaWdpbnQnLAogICAgICAgICAgICBNQVNLOiAnYmlnaW50JywKICAgICAgICAgICAgQllURVM6ICdpc1NhZmVJbnRlZ2VyJywKICAgICAgICAgICAgQklUUzogJ2lzU2FmZUludGVnZXInCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiAoMCwgbi52YWxpZGF0ZU9iamVjdCkoZSwgdCk7CiAgICAgICAgfSksCiAgICAgICAgICAodC5GcFBvdyA9IGIpLAogICAgICAgICAgKHQuRnBJbnZlcnRCYXRjaCA9IHkpLAogICAgICAgICAgKHQuRnBEaXYgPSBmdW5jdGlvbiAoZSwgdCwgcikgewogICAgICAgICAgICByZXR1cm4gZS5tdWwodCwgJ2JpZ2ludCcgPT0gdHlwZW9mIHIgPyBoKHIsIGUuT1JERVIpIDogZS5pbnYocikpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5GcElzU3F1YXJlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IChlLk9SREVSIC0gbykgLyBpOwogICAgICAgICAgICByZXR1cm4gKHIpID0-IHsKICAgICAgICAgICAgICBjb25zdCBuID0gZS5wb3cociwgdCk7CiAgICAgICAgICAgICAgcmV0dXJuIGUuZXFsKG4sIGUuWkVSTykgfHwgZS5lcWwobiwgZS5PTkUpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSksCiAgICAgICAgICAodC5uTGVuZ3RoID0gQSksCiAgICAgICAgICAodC5GaWVsZCA9IGZ1bmN0aW9uIChlLCB0LCByID0gITEsIGkgPSB7fSkgewogICAgICAgICAgICBpZiAoZSA8PSBzKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIEZpZWxkIE9SREVSID4gMCwgZ290ICR7ZX1gKTsKICAgICAgICAgICAgY29uc3QgeyBuQml0TGVuZ3RoOiBhLCBuQnl0ZUxlbmd0aDogYyB9ID0gQShlLCB0KTsKICAgICAgICAgICAgaWYgKGMgPiAyMDQ4KSB0aHJvdyBuZXcgRXJyb3IoJ0ZpZWxkIGxlbmd0aHMgb3ZlciAyMDQ4IGJ5dGVzIGFyZSBub3Qgc3VwcG9ydGVkJyk7CiAgICAgICAgICAgIGNvbnN0IHUgPSBwKGUpLAogICAgICAgICAgICAgIGwgPSBPYmplY3QuZnJlZXplKHsKICAgICAgICAgICAgICAgIE9SREVSOiBlLAogICAgICAgICAgICAgICAgQklUUzogYSwKICAgICAgICAgICAgICAgIEJZVEVTOiBjLAogICAgICAgICAgICAgICAgTUFTSzogKDAsIG4uYml0TWFzaykoYSksCiAgICAgICAgICAgICAgICBaRVJPOiBzLAogICAgICAgICAgICAgICAgT05FOiBvLAogICAgICAgICAgICAgICAgY3JlYXRlOiAodCkgPT4gZCh0LCBlKSwKICAgICAgICAgICAgICAgIGlzVmFsaWQ6ICh0KSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmICgnYmlnaW50JyAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZpZWxkIGVsZW1lbnQ6IGV4cGVjdGVkIGJpZ2ludCwgZ290ICcgKyB0eXBlb2YgdCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzIDw9IHQgJiYgdCA8IGU7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaXMwOiAoZSkgPT4gZSA9PT0gcywKICAgICAgICAgICAgICAgIGlzT2RkOiAoZSkgPT4gKGUgJiBvKSA9PT0gbywKICAgICAgICAgICAgICAgIG5lZzogKHQpID0-IGQoLXQsIGUpLAogICAgICAgICAgICAgICAgZXFsOiAoZSwgdCkgPT4gZSA9PT0gdCwKICAgICAgICAgICAgICAgIHNxcjogKHQpID0-IGQodCAqIHQsIGUpLAogICAgICAgICAgICAgICAgYWRkOiAodCwgcikgPT4gZCh0ICsgciwgZSksCiAgICAgICAgICAgICAgICBzdWI6ICh0LCByKSA9PiBkKHQgLSByLCBlKSwKICAgICAgICAgICAgICAgIG11bDogKHQsIHIpID0-IGQodCAqIHIsIGUpLAogICAgICAgICAgICAgICAgcG93OiAoZSwgdCkgPT4gYihsLCBlLCB0KSwKICAgICAgICAgICAgICAgIGRpdjogKHQsIHIpID0-IGQodCAqIGgociwgZSksIGUpLAogICAgICAgICAgICAgICAgc3FyTjogKGUpID0-IGUgKiBlLAogICAgICAgICAgICAgICAgYWRkTjogKGUsIHQpID0-IGUgKyB0LAogICAgICAgICAgICAgICAgc3ViTjogKGUsIHQpID0-IGUgLSB0LAogICAgICAgICAgICAgICAgbXVsTjogKGUsIHQpID0-IGUgKiB0LAogICAgICAgICAgICAgICAgaW52OiAodCkgPT4gaCh0LCBlKSwKICAgICAgICAgICAgICAgIHNxcnQ6IGkuc3FydCB8fCAoKGUpID0-IHUobCwgZSkpLAogICAgICAgICAgICAgICAgaW52ZXJ0QmF0Y2g6IChlKSA9PiB5KGwsIGUpLAogICAgICAgICAgICAgICAgY21vdjogKGUsIHQsIHIpID0-IChyID8gdCA6IGUpLAogICAgICAgICAgICAgICAgdG9CeXRlczogKGUpID0-IChyID8gKDAsIG4ubnVtYmVyVG9CeXRlc0xFKShlLCBjKSA6ICgwLCBuLm51bWJlclRvQnl0ZXNCRSkoZSwgYykpLAogICAgICAgICAgICAgICAgZnJvbUJ5dGVzOiAoZSkgPT4gewogICAgICAgICAgICAgICAgICBpZiAoZS5sZW5ndGggIT09IGMpIHRocm93IG5ldyBFcnJvcihgRnAuZnJvbUJ5dGVzOiBleHBlY3RlZCAke2N9LCBnb3QgJHtlLmxlbmd0aH1gKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAoMCwgbi5ieXRlc1RvTnVtYmVyTEUpKGUpIDogKDAsIG4uYnl0ZXNUb051bWJlckJFKShlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUobCk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LkZwU3FydE9kZCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGlmICghZS5pc09kZCkgdGhyb3cgbmV3IEVycm9yKCJGaWVsZCBkb2Vzbid0IGhhdmUgaXNPZGQiKTsKICAgICAgICAgICAgY29uc3QgciA9IGUuc3FydCh0KTsKICAgICAgICAgICAgcmV0dXJuIGUuaXNPZGQocikgPyByIDogZS5uZWcocik7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LkZwU3FydEV2ZW4gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICBpZiAoIWUuaXNPZGQpIHRocm93IG5ldyBFcnJvcigiRmllbGQgZG9lc24ndCBoYXZlIGlzT2RkIik7CiAgICAgICAgICAgIGNvbnN0IHIgPSBlLnNxcnQodCk7CiAgICAgICAgICAgIHJldHVybiBlLmlzT2RkKHIpID8gZS5uZWcocikgOiByOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5oYXNoVG9Qcml2YXRlU2NhbGFyID0gZnVuY3Rpb24gKGUsIHQsIHIgPSAhMSkgewogICAgICAgICAgICBjb25zdCBzID0gKGUgPSAoMCwgbi5lbnN1cmVCeXRlcykoJ3ByaXZhdGVIYXNoJywgZSkpLmxlbmd0aCwKICAgICAgICAgICAgICBpID0gQSh0KS5uQnl0ZUxlbmd0aCArIDg7CiAgICAgICAgICAgIGlmIChpIDwgMjQgfHwgcyA8IGkgfHwgcyA-IDEwMjQpCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBoYXNoVG9Qcml2YXRlU2NhbGFyOiBleHBlY3RlZCAke2l9LTEwMjQgYnl0ZXMgb2YgaW5wdXQsIGdvdCAke3N9YCk7CiAgICAgICAgICAgIHJldHVybiBkKHIgPyAoMCwgbi5ieXRlc1RvTnVtYmVyTEUpKGUpIDogKDAsIG4uYnl0ZXNUb051bWJlckJFKShlKSwgdCAtIG8pICsgbzsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZ2V0RmllbGRCeXRlc0xlbmd0aCA9IHYpLAogICAgICAgICAgKHQuZ2V0TWluSGFzaExlbmd0aCA9IEUpLAogICAgICAgICAgKHQubWFwSGFzaFRvRmllbGQgPSBmdW5jdGlvbiAoZSwgdCwgciA9ICExKSB7CiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmxlbmd0aCwKICAgICAgICAgICAgICBpID0gdih0KSwKICAgICAgICAgICAgICBhID0gRSh0KTsKICAgICAgICAgICAgaWYgKHMgPCAxNiB8fCBzIDwgYSB8fCBzID4gMTAyNCkgdGhyb3cgbmV3IEVycm9yKGBleHBlY3RlZCAke2F9LTEwMjQgYnl0ZXMgb2YgaW5wdXQsIGdvdCAke3N9YCk7CiAgICAgICAgICAgIGNvbnN0IGMgPSBkKHIgPyAoMCwgbi5ieXRlc1RvTnVtYmVyQkUpKGUpIDogKDAsIG4uYnl0ZXNUb051bWJlckxFKShlKSwgdCAtIG8pICsgbzsKICAgICAgICAgICAgcmV0dXJuIHIgPyAoMCwgbi5udW1iZXJUb0J5dGVzTEUpKGMsIGkpIDogKDAsIG4ubnVtYmVyVG9CeXRlc0JFKShjLCBpKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA1OTUyOiAoZSwgdCkgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQudmFsaWRhdGVPYmplY3QgPQogICAgICAgICAgICB0LmNyZWF0ZUhtYWNEcmJnID0KICAgICAgICAgICAgdC5iaXRNYXNrID0KICAgICAgICAgICAgdC5iaXRTZXQgPQogICAgICAgICAgICB0LmJpdEdldCA9CiAgICAgICAgICAgIHQuYml0TGVuID0KICAgICAgICAgICAgdC51dGY4VG9CeXRlcyA9CiAgICAgICAgICAgIHQuZXF1YWxCeXRlcyA9CiAgICAgICAgICAgIHQuY29uY2F0Qnl0ZXMgPQogICAgICAgICAgICB0LmVuc3VyZUJ5dGVzID0KICAgICAgICAgICAgdC5udW1iZXJUb1ZhckJ5dGVzQkUgPQogICAgICAgICAgICB0Lm51bWJlclRvQnl0ZXNMRSA9CiAgICAgICAgICAgIHQubnVtYmVyVG9CeXRlc0JFID0KICAgICAgICAgICAgdC5ieXRlc1RvTnVtYmVyTEUgPQogICAgICAgICAgICB0LmJ5dGVzVG9OdW1iZXJCRSA9CiAgICAgICAgICAgIHQuaGV4VG9CeXRlcyA9CiAgICAgICAgICAgIHQuaGV4VG9OdW1iZXIgPQogICAgICAgICAgICB0Lm51bWJlclRvSGV4VW5wYWRkZWQgPQogICAgICAgICAgICB0LmJ5dGVzVG9IZXggPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgY29uc3QgciA9IEJpZ0ludCgwKSwKICAgICAgICAgIG4gPSBCaWdJbnQoMSksCiAgICAgICAgICBzID0gQmlnSW50KDIpLAogICAgICAgICAgbyA9IChlKSA9PiBlIGluc3RhbmNlb2YgVWludDhBcnJheSwKICAgICAgICAgIGkgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyNTYgfSwgKGUsIHQpID0-IHQudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpOwogICAgICAgIGZ1bmN0aW9uIGEoZSkgewogICAgICAgICAgaWYgKCFvKGUpKSB0aHJvdyBuZXcgRXJyb3IoJ1VpbnQ4QXJyYXkgZXhwZWN0ZWQnKTsKICAgICAgICAgIGxldCB0ID0gJyc7CiAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGUubGVuZ3RoOyByKyspIHQgKz0gaVtlW3JdXTsKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSBlLnRvU3RyaW5nKDE2KTsKICAgICAgICAgIHJldHVybiAxICYgdC5sZW5ndGggPyBgMCR7dH1gIDogdDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdShlKSB7CiAgICAgICAgICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBFcnJvcignaGV4IHN0cmluZyBleHBlY3RlZCwgZ290ICcgKyB0eXBlb2YgZSk7CiAgICAgICAgICByZXR1cm4gQmlnSW50KCcnID09PSBlID8gJzAnIDogYDB4JHtlfWApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGUpIHsKICAgICAgICAgIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IEVycm9yKCdoZXggc3RyaW5nIGV4cGVjdGVkLCBnb3QgJyArIHR5cGVvZiBlKTsKICAgICAgICAgIGNvbnN0IHQgPSBlLmxlbmd0aDsKICAgICAgICAgIGlmICh0ICUgMikgdGhyb3cgbmV3IEVycm9yKCdwYWRkZWQgaGV4IHN0cmluZyBleHBlY3RlZCwgZ290IHVucGFkZGVkIGhleCBvZiBsZW5ndGggJyArIHQpOwogICAgICAgICAgY29uc3QgciA9IG5ldyBVaW50OEFycmF5KHQgLyAyKTsKICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgewogICAgICAgICAgICBjb25zdCBuID0gMiAqIHQsCiAgICAgICAgICAgICAgcyA9IGUuc2xpY2UobiwgbiArIDIpLAogICAgICAgICAgICAgIG8gPSBOdW1iZXIucGFyc2VJbnQocywgMTYpOwogICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKG8pIHx8IG8gPCAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYnl0ZSBzZXF1ZW5jZScpOwogICAgICAgICAgICByW3RdID0gbzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBkKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBsKGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIgKiB0LCAnMCcpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZiguLi5lKSB7CiAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoZS5yZWR1Y2UoKGUsIHQpID0-IGUgKyB0Lmxlbmd0aCwgMCkpOwogICAgICAgICAgbGV0IHIgPSAwOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgZS5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgICAgaWYgKCFvKGUpKSB0aHJvdyBuZXcgRXJyb3IoJ1VpbnQ4QXJyYXkgZXhwZWN0ZWQnKTsKICAgICAgICAgICAgICB0LnNldChlLCByKSwgKHIgKz0gZS5sZW5ndGgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgdAogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgKHQuYnl0ZXNUb0hleCA9IGEpLAogICAgICAgICAgKHQubnVtYmVyVG9IZXhVbnBhZGRlZCA9IGMpLAogICAgICAgICAgKHQuaGV4VG9OdW1iZXIgPSB1KSwKICAgICAgICAgICh0LmhleFRvQnl0ZXMgPSBsKSwKICAgICAgICAgICh0LmJ5dGVzVG9OdW1iZXJCRSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiB1KGEoZSkpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5ieXRlc1RvTnVtYmVyTEUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoIW8oZSkpIHRocm93IG5ldyBFcnJvcignVWludDhBcnJheSBleHBlY3RlZCcpOwogICAgICAgICAgICByZXR1cm4gdShhKFVpbnQ4QXJyYXkuZnJvbShlKS5yZXZlcnNlKCkpKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQubnVtYmVyVG9CeXRlc0JFID0gZCksCiAgICAgICAgICAodC5udW1iZXJUb0J5dGVzTEUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gZChlLCB0KS5yZXZlcnNlKCk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0Lm51bWJlclRvVmFyQnl0ZXNCRSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBsKGMoZSkpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5lbnN1cmVCeXRlcyA9IGZ1bmN0aW9uIChlLCB0LCByKSB7CiAgICAgICAgICAgIGxldCBuOwogICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHQpCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIG4gPSBsKHQpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtlfSBtdXN0IGJlIHZhbGlkIGhleCBzdHJpbmcsIGdvdCAiJHt0fSIuIENhdXNlOiAke3J9YCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBpZiAoIW8odCkpIHRocm93IG5ldyBFcnJvcihgJHtlfSBtdXN0IGJlIGhleCBzdHJpbmcgb3IgVWludDhBcnJheWApOwogICAgICAgICAgICAgIG4gPSBVaW50OEFycmF5LmZyb20odCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgcyA9IG4ubGVuZ3RoOwogICAgICAgICAgICBpZiAoJ251bWJlcicgPT0gdHlwZW9mIHIgJiYgcyAhPT0gcikgdGhyb3cgbmV3IEVycm9yKGAke2V9IGV4cGVjdGVkICR7cn0gYnl0ZXMsIGdvdCAke3N9YCk7CiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5jb25jYXRCeXRlcyA9IGYpLAogICAgICAgICAgKHQuZXF1YWxCeXRlcyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGlmIChlLmxlbmd0aCAhPT0gdC5sZW5ndGgpIHJldHVybiAhMTsKICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKSBpZiAoZVtyXSAhPT0gdFtyXSkgcmV0dXJuICExOwogICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LnV0ZjhUb0J5dGVzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgRXJyb3IoJ3V0ZjhUb0J5dGVzIGV4cGVjdGVkIHN0cmluZywgZ290ICcgKyB0eXBlb2YgZSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoZSkpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5iaXRMZW4gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBsZXQgdDsKICAgICAgICAgICAgZm9yICh0ID0gMDsgZSA-IHI7IGUgPj49IG4sIHQgKz0gMSk7CiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgfSksCiAgICAgICAgICAodC5iaXRHZXQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKGUgPj4gQmlnSW50KHQpKSAmIG47CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmJpdFNldCA9IChlLCB0LCBzKSA9PiBlIHwgKChzID8gbiA6IHIpIDw8IEJpZ0ludCh0KSkpLAogICAgICAgICAgKHQuYml0TWFzayA9IChlKSA9PiAocyA8PCBCaWdJbnQoZSAtIDEpKSAtIG4pOwogICAgICAgIGNvbnN0IGggPSAoZSkgPT4gbmV3IFVpbnQ4QXJyYXkoZSksCiAgICAgICAgICBnID0gKGUpID0-IFVpbnQ4QXJyYXkuZnJvbShlKTsKICAgICAgICB0LmNyZWF0ZUhtYWNEcmJnID0gZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgIGlmICgnbnVtYmVyJyAhPSB0eXBlb2YgZSB8fCBlIDwgMikgdGhyb3cgbmV3IEVycm9yKCdoYXNoTGVuIG11c3QgYmUgYSBudW1iZXInKTsKICAgICAgICAgIGlmICgnbnVtYmVyJyAhPSB0eXBlb2YgdCB8fCB0IDwgMikgdGhyb3cgbmV3IEVycm9yKCdxQnl0ZUxlbiBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyAhPSB0eXBlb2YgcikgdGhyb3cgbmV3IEVycm9yKCdobWFjRm4gbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CiAgICAgICAgICBsZXQgbiA9IGgoZSksCiAgICAgICAgICAgIHMgPSBoKGUpLAogICAgICAgICAgICBvID0gMDsKICAgICAgICAgIGNvbnN0IGkgPSAoKSA9PiB7CiAgICAgICAgICAgICAgbi5maWxsKDEpLCBzLmZpbGwoMCksIChvID0gMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGEgPSAoLi4uZSkgPT4gcihzLCBuLCAuLi5lKSwKICAgICAgICAgICAgYyA9IChlID0gaCgpKSA9PiB7CiAgICAgICAgICAgICAgKHMgPSBhKGcoWzBdKSwgZSkpLCAobiA9IGEoKSksIDAgIT09IGUubGVuZ3RoICYmICgocyA9IGEoZyhbMV0pLCBlKSksIChuID0gYSgpKSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHUgPSAoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKG8rKyA-PSAxZTMpIHRocm93IG5ldyBFcnJvcignZHJiZzogdHJpZWQgMTAwMCB2YWx1ZXMnKTsKICAgICAgICAgICAgICBsZXQgZSA9IDA7CiAgICAgICAgICAgICAgY29uc3QgciA9IFtdOwogICAgICAgICAgICAgIGZvciAoOyBlIDwgdDsgKSB7CiAgICAgICAgICAgICAgICBuID0gYSgpOwogICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uc2xpY2UoKTsKICAgICAgICAgICAgICAgIHIucHVzaCh0KSwgKGUgKz0gbi5sZW5ndGgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gZiguLi5yKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIHJldHVybiAoZSwgdCkgPT4gewogICAgICAgICAgICBsZXQgcjsKICAgICAgICAgICAgZm9yIChpKCksIGMoZSk7ICEociA9IHQodSgpKSk7ICkgYygpOwogICAgICAgICAgICByZXR1cm4gaSgpLCByOwogICAgICAgICAgfTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IHAgPSB7CiAgICAgICAgICBiaWdpbnQ6IChlKSA9PiAnYmlnaW50JyA9PSB0eXBlb2YgZSwKICAgICAgICAgIGZ1bmN0aW9uOiAoZSkgPT4gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZSwKICAgICAgICAgIGJvb2xlYW46IChlKSA9PiAnYm9vbGVhbicgPT0gdHlwZW9mIGUsCiAgICAgICAgICBzdHJpbmc6IChlKSA9PiAnc3RyaW5nJyA9PSB0eXBlb2YgZSwKICAgICAgICAgIHN0cmluZ09yVWludDhBcnJheTogKGUpID0-ICdzdHJpbmcnID09IHR5cGVvZiBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5LAogICAgICAgICAgaXNTYWZlSW50ZWdlcjogKGUpID0-IE51bWJlci5pc1NhZmVJbnRlZ2VyKGUpLAogICAgICAgICAgYXJyYXk6IChlKSA9PiBBcnJheS5pc0FycmF5KGUpLAogICAgICAgICAgZmllbGQ6IChlLCB0KSA9PiB0LkZwLmlzVmFsaWQoZSksCiAgICAgICAgICBoYXNoOiAoZSkgPT4gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZSAmJiBOdW1iZXIuaXNTYWZlSW50ZWdlcihlLm91dHB1dExlbikKICAgICAgICB9OwogICAgICAgIHQudmFsaWRhdGVPYmplY3QgPSBmdW5jdGlvbiAoZSwgdCwgciA9IHt9KSB7CiAgICAgICAgICBjb25zdCBuID0gKHQsIHIsIG4pID0-IHsKICAgICAgICAgICAgY29uc3QgcyA9IHBbcl07CiAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nICE9IHR5cGVvZiBzKSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdmFsaWRhdG9yICIke3J9IiwgZXhwZWN0ZWQgZnVuY3Rpb25gKTsKICAgICAgICAgICAgY29uc3QgbyA9IGVbdF07CiAgICAgICAgICAgIGlmICghKChuICYmIHZvaWQgMCA9PT0gbykgfHwgcyhvLCBlKSkpCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHBhcmFtICR7U3RyaW5nKHQpfT0ke299ICgke3R5cGVvZiBvfSksIGV4cGVjdGVkICR7cn1gKTsKICAgICAgICAgIH07CiAgICAgICAgICBmb3IgKGNvbnN0IFtlLCByXSBvZiBPYmplY3QuZW50cmllcyh0KSkgbihlLCByLCAhMSk7CiAgICAgICAgICBmb3IgKGNvbnN0IFtlLCB0XSBvZiBPYmplY3QuZW50cmllcyhyKSkgbihlLCB0LCAhMCk7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9OwogICAgICB9LAogICAgICAxNDQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5tYXBUb0N1cnZlU2ltcGxlU1dVID0gdC5TV1VGcFNxcnRSYXRpbyA9IHQud2VpZXJzdHJhc3MgPSB0LndlaWVyc3RyYXNzUG9pbnRzID0gdC5ERVIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDM0ODQpLAogICAgICAgICAgcyA9IHIoNTk1MiksCiAgICAgICAgICBvID0gcig1OTUyKSwKICAgICAgICAgIGkgPSByKDk0MTYpLAogICAgICAgICAgeyBieXRlc1RvTnVtYmVyQkU6IGEsIGhleFRvQnl0ZXM6IGMgfSA9IHM7CiAgICAgICAgdC5ERVIgPSB7CiAgICAgICAgICBFcnI6IGNsYXNzIGV4dGVuZHMgRXJyb3IgewogICAgICAgICAgICBjb25zdHJ1Y3RvcihlID0gJycpIHsKICAgICAgICAgICAgICBzdXBlcihlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIF9wYXJzZUludChlKSB7CiAgICAgICAgICAgIGNvbnN0IHsgRXJyOiByIH0gPSB0LkRFUjsKICAgICAgICAgICAgaWYgKGUubGVuZ3RoIDwgMiB8fCAyICE9PSBlWzBdKSB0aHJvdyBuZXcgcignSW52YWxpZCBzaWduYXR1cmUgaW50ZWdlciB0YWcnKTsKICAgICAgICAgICAgY29uc3QgbiA9IGVbMV0sCiAgICAgICAgICAgICAgcyA9IGUuc3ViYXJyYXkoMiwgbiArIDIpOwogICAgICAgICAgICBpZiAoIW4gfHwgcy5sZW5ndGggIT09IG4pIHRocm93IG5ldyByKCdJbnZhbGlkIHNpZ25hdHVyZSBpbnRlZ2VyOiB3cm9uZyBsZW5ndGgnKTsKICAgICAgICAgICAgaWYgKDEyOCAmIHNbMF0pIHRocm93IG5ldyByKCdJbnZhbGlkIHNpZ25hdHVyZSBpbnRlZ2VyOiBuZWdhdGl2ZScpOwogICAgICAgICAgICBpZiAoMCA9PT0gc1swXSAmJiAhKDEyOCAmIHNbMV0pKSB0aHJvdyBuZXcgcignSW52YWxpZCBzaWduYXR1cmUgaW50ZWdlcjogdW5uZWNlc3NhcnkgbGVhZGluZyB6ZXJvJyk7CiAgICAgICAgICAgIHJldHVybiB7IGQ6IGEocyksIGw6IGUuc3ViYXJyYXkobiArIDIpIH07CiAgICAgICAgICB9LAogICAgICAgICAgdG9TaWcoZSkgewogICAgICAgICAgICBjb25zdCB7IEVycjogciB9ID0gdC5ERVIsCiAgICAgICAgICAgICAgbiA9ICdzdHJpbmcnID09IHR5cGVvZiBlID8gYyhlKSA6IGU7CiAgICAgICAgICAgIGlmICghKG4gaW5zdGFuY2VvZiBVaW50OEFycmF5KSkgdGhyb3cgbmV3IEVycm9yKCd1aThhIGV4cGVjdGVkJyk7CiAgICAgICAgICAgIGxldCBzID0gbi5sZW5ndGg7CiAgICAgICAgICAgIGlmIChzIDwgMiB8fCA0OCAhPSBuWzBdKSB0aHJvdyBuZXcgcignSW52YWxpZCBzaWduYXR1cmUgdGFnJyk7CiAgICAgICAgICAgIGlmIChuWzFdICE9PSBzIC0gMikgdGhyb3cgbmV3IHIoJ0ludmFsaWQgc2lnbmF0dXJlOiBpbmNvcnJlY3QgbGVuZ3RoJyk7CiAgICAgICAgICAgIGNvbnN0IHsgZDogbywgbDogaSB9ID0gdC5ERVIuX3BhcnNlSW50KG4uc3ViYXJyYXkoMikpLAogICAgICAgICAgICAgIHsgZDogYSwgbDogdSB9ID0gdC5ERVIuX3BhcnNlSW50KGkpOwogICAgICAgICAgICBpZiAodS5sZW5ndGgpIHRocm93IG5ldyByKCdJbnZhbGlkIHNpZ25hdHVyZTogbGVmdCBieXRlcyBhZnRlciBwYXJzaW5nJyk7CiAgICAgICAgICAgIHJldHVybiB7IHI6IG8sIHM6IGEgfTsKICAgICAgICAgIH0sCiAgICAgICAgICBoZXhGcm9tU2lnKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IChlKSA9PiAoOCAmIE51bWJlci5wYXJzZUludChlWzBdLCAxNikgPyAnMDAnICsgZSA6IGUpLAogICAgICAgICAgICAgIHIgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9TdHJpbmcoMTYpOwogICAgICAgICAgICAgICAgcmV0dXJuIDEgJiB0Lmxlbmd0aCA_IGAwJHt0fWAgOiB0OwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbiA9IHQocihlLnMpKSwKICAgICAgICAgICAgICBzID0gdChyKGUucikpLAogICAgICAgICAgICAgIG8gPSBuLmxlbmd0aCAvIDIsCiAgICAgICAgICAgICAgaSA9IHMubGVuZ3RoIC8gMiwKICAgICAgICAgICAgICBhID0gcihvKSwKICAgICAgICAgICAgICBjID0gcihpKTsKICAgICAgICAgICAgcmV0dXJuIGAzMCR7cihpICsgbyArIDQpfTAyJHtjfSR7c30wMiR7YX0ke259YDsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNvbnN0IHUgPSBCaWdJbnQoMCksCiAgICAgICAgICBsID0gQmlnSW50KDEpLAogICAgICAgICAgZCA9IEJpZ0ludCgyKSwKICAgICAgICAgIGYgPSBCaWdJbnQoMyksCiAgICAgICAgICBoID0gQmlnSW50KDQpOwogICAgICAgIGZ1bmN0aW9uIGcoZSkgewogICAgICAgICAgY29uc3QgdCA9IChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgaS52YWxpZGF0ZUJhc2ljKShlKTsKICAgICAgICAgICAgICBzLnZhbGlkYXRlT2JqZWN0KAogICAgICAgICAgICAgICAgdCwKICAgICAgICAgICAgICAgIHsgYTogJ2ZpZWxkJywgYjogJ2ZpZWxkJyB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBhbGxvd2VkUHJpdmF0ZUtleUxlbmd0aHM6ICdhcnJheScsCiAgICAgICAgICAgICAgICAgIHdyYXBQcml2YXRlS2V5OiAnYm9vbGVhbicsCiAgICAgICAgICAgICAgICAgIGlzVG9yc2lvbkZyZWU6ICdmdW5jdGlvbicsCiAgICAgICAgICAgICAgICAgIGNsZWFyQ29mYWN0b3I6ICdmdW5jdGlvbicsCiAgICAgICAgICAgICAgICAgIGFsbG93SW5maW5pdHlQb2ludDogJ2Jvb2xlYW4nLAogICAgICAgICAgICAgICAgICBmcm9tQnl0ZXM6ICdmdW5jdGlvbicsCiAgICAgICAgICAgICAgICAgIHRvQnl0ZXM6ICdmdW5jdGlvbicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGNvbnN0IHsgZW5kbzogciwgRnA6IG4sIGE6IG8gfSA9IHQ7CiAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgIGlmICghbi5lcWwobywgbi5aRVJPKSkKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbmRvbW9ycGhpc20gY2FuIG9ubHkgYmUgZGVmaW5lZCBmb3IgS29ibGl0eiBjdXJ2ZXMgdGhhdCBoYXZlIGE9MCcpOwogICAgICAgICAgICAgICAgaWYgKCdvYmplY3QnICE9IHR5cGVvZiByIHx8ICdiaWdpbnQnICE9IHR5cGVvZiByLmJldGEgfHwgJ2Z1bmN0aW9uJyAhPSB0eXBlb2Ygci5zcGxpdFNjYWxhcikKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBlbmRvbW9ycGhpc20gd2l0aCBiZXRhOiBiaWdpbnQgYW5kIHNwbGl0U2NhbGFyOiBmdW5jdGlvbicpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh7IC4uLnQgfSk7CiAgICAgICAgICAgIH0pKGUpLAogICAgICAgICAgICB7IEZwOiByIH0gPSB0LAogICAgICAgICAgICBhID0KICAgICAgICAgICAgICB0LnRvQnl0ZXMgfHwKICAgICAgICAgICAgICAoKGUsIHQsIG4pID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IG8gPSB0LnRvQWZmaW5lKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcy5jb25jYXRCeXRlcyhVaW50OEFycmF5LmZyb20oWzRdKSwgci50b0J5dGVzKG8ueCksIHIudG9CeXRlcyhvLnkpKTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgYyA9CiAgICAgICAgICAgICAgdC5mcm9tQnl0ZXMgfHwKICAgICAgICAgICAgICAoKGUpID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnN1YmFycmF5KDEpOwogICAgICAgICAgICAgICAgcmV0dXJuIHsgeDogci5mcm9tQnl0ZXModC5zdWJhcnJheSgwLCByLkJZVEVTKSksIHk6IHIuZnJvbUJ5dGVzKHQuc3ViYXJyYXkoci5CWVRFUywgMiAqIHIuQllURVMpKSB9OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgZnVuY3Rpb24gZChlKSB7CiAgICAgICAgICAgIGNvbnN0IHsgYTogbiwgYjogcyB9ID0gdCwKICAgICAgICAgICAgICBvID0gci5zcXIoZSksCiAgICAgICAgICAgICAgaSA9IHIubXVsKG8sIGUpOwogICAgICAgICAgICByZXR1cm4gci5hZGQoci5hZGQoaSwgci5tdWwoZSwgbikpLCBzKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghci5lcWwoci5zcXIodC5HeSksIGQodC5HeCkpKSB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBnZW5lcmF0b3IgcG9pbnQ6IGVxdWF0aW9uIGxlZnQgIT0gcmlnaHQnKTsKICAgICAgICAgIGZ1bmN0aW9uIGgoZSkgewogICAgICAgICAgICByZXR1cm4gJ2JpZ2ludCcgPT0gdHlwZW9mIGUgJiYgdSA8IGUgJiYgZSA8IHQubjsKICAgICAgICAgIH0KICAgICAgICAgIGZ1bmN0aW9uIGcoZSkgewogICAgICAgICAgICBpZiAoIWgoZSkpIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdmFsaWQgYmlnaW50OiAwIDwgYmlnaW50IDwgY3VydmUubicpOwogICAgICAgICAgfQogICAgICAgICAgZnVuY3Rpb24gcChlKSB7CiAgICAgICAgICAgIGNvbnN0IHsgYWxsb3dlZFByaXZhdGVLZXlMZW5ndGhzOiByLCBuQnl0ZUxlbmd0aDogaSwgd3JhcFByaXZhdGVLZXk6IGEsIG46IGMgfSA9IHQ7CiAgICAgICAgICAgIGlmIChyICYmICdiaWdpbnQnICE9IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgaWYgKChlIGluc3RhbmNlb2YgVWludDhBcnJheSAmJiAoZSA9IHMuYnl0ZXNUb0hleChlKSksICdzdHJpbmcnICE9IHR5cGVvZiBlIHx8ICFyLmluY2x1ZGVzKGUubGVuZ3RoKSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQga2V5Jyk7CiAgICAgICAgICAgICAgZSA9IGUucGFkU3RhcnQoMiAqIGksICcwJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHU7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdSA9ICdiaWdpbnQnID09IHR5cGVvZiBlID8gZSA6IHMuYnl0ZXNUb051bWJlckJFKCgwLCBvLmVuc3VyZUJ5dGVzKSgncHJpdmF0ZSBrZXknLCBlLCBpKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHByaXZhdGUga2V5IG11c3QgYmUgJHtpfSBieXRlcywgaGV4IG9yIGJpZ2ludCwgbm90ICR7dHlwZW9mIGV9YCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGEgJiYgKHUgPSBuLm1vZCh1LCBjKSksIGcodSksIHU7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBtID0gbmV3IE1hcCgpOwogICAgICAgICAgZnVuY3Rpb24gYihlKSB7CiAgICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiB5KSkgdGhyb3cgbmV3IEVycm9yKCdQcm9qZWN0aXZlUG9pbnQgZXhwZWN0ZWQnKTsKICAgICAgICAgIH0KICAgICAgICAgIGNsYXNzIHkgewogICAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7CiAgICAgICAgICAgICAgaWYgKCgodGhpcy5weCA9IGUpLCAodGhpcy5weSA9IHQpLCAodGhpcy5weiA9IG4pLCBudWxsID09IGUgfHwgIXIuaXNWYWxpZChlKSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ggcmVxdWlyZWQnKTsKICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0IHx8ICFyLmlzVmFsaWQodCkpIHRocm93IG5ldyBFcnJvcigneSByZXF1aXJlZCcpOwogICAgICAgICAgICAgIGlmIChudWxsID09IG4gfHwgIXIuaXNWYWxpZChuKSkgdGhyb3cgbmV3IEVycm9yKCd6IHJlcXVpcmVkJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGljIGZyb21BZmZpbmUoZSkgewogICAgICAgICAgICAgIGNvbnN0IHsgeDogdCwgeTogbiB9ID0gZSB8fCB7fTsKICAgICAgICAgICAgICBpZiAoIWUgfHwgIXIuaXNWYWxpZCh0KSB8fCAhci5pc1ZhbGlkKG4pKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYWZmaW5lIHBvaW50Jyk7CiAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiB5KSB0aHJvdyBuZXcgRXJyb3IoJ3Byb2plY3RpdmUgcG9pbnQgbm90IGFsbG93ZWQnKTsKICAgICAgICAgICAgICBjb25zdCBzID0gKGUpID0-IHIuZXFsKGUsIHIuWkVSTyk7CiAgICAgICAgICAgICAgcmV0dXJuIHModCkgJiYgcyhuKSA_IHkuWkVSTyA6IG5ldyB5KHQsIG4sIHIuT05FKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBnZXQgeCgpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b0FmZmluZSgpLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ2V0IHkoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9BZmZpbmUoKS55OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRpYyBub3JtYWxpemVaKGUpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gci5pbnZlcnRCYXRjaChlLm1hcCgoZSkgPT4gZS5weikpOwogICAgICAgICAgICAgIHJldHVybiBlLm1hcCgoZSwgcikgPT4gZS50b0FmZmluZSh0W3JdKSkubWFwKHkuZnJvbUFmZmluZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhdGljIGZyb21IZXgoZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSB5LmZyb21BZmZpbmUoYygoMCwgby5lbnN1cmVCeXRlcykoJ3BvaW50SGV4JywgZSkpKTsKICAgICAgICAgICAgICByZXR1cm4gdC5hc3NlcnRWYWxpZGl0eSgpLCB0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0YXRpYyBmcm9tUHJpdmF0ZUtleShlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHkuQkFTRS5tdWx0aXBseShwKGUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfc2V0V2luZG93U2l6ZShlKSB7CiAgICAgICAgICAgICAgKHRoaXMuX1dJTkRPV19TSVpFID0gZSksIG0uZGVsZXRlKHRoaXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFzc2VydFZhbGlkaXR5KCkgewogICAgICAgICAgICAgIGlmICh0aGlzLmlzMCgpKSB7CiAgICAgICAgICAgICAgICBpZiAodC5hbGxvd0luZmluaXR5UG9pbnQgJiYgIXIuaXMwKHRoaXMucHkpKSByZXR1cm47CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBwb2ludDogWkVSTycpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCB7IHg6IGUsIHk6IG4gfSA9IHRoaXMudG9BZmZpbmUoKTsKICAgICAgICAgICAgICBpZiAoIXIuaXNWYWxpZChlKSB8fCAhci5pc1ZhbGlkKG4pKSB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBwb2ludDogeCBvciB5IG5vdCBGRScpOwogICAgICAgICAgICAgIGNvbnN0IHMgPSByLnNxcihuKSwKICAgICAgICAgICAgICAgIG8gPSBkKGUpOwogICAgICAgICAgICAgIGlmICghci5lcWwocywgbykpIHRocm93IG5ldyBFcnJvcignYmFkIHBvaW50OiBlcXVhdGlvbiBsZWZ0ICE9IHJpZ2h0Jyk7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzVG9yc2lvbkZyZWUoKSkgdGhyb3cgbmV3IEVycm9yKCdiYWQgcG9pbnQ6IG5vdCBpbiBwcmltZS1vcmRlciBzdWJncm91cCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhhc0V2ZW5ZKCkgewogICAgICAgICAgICAgIGNvbnN0IHsgeTogZSB9ID0gdGhpcy50b0FmZmluZSgpOwogICAgICAgICAgICAgIGlmIChyLmlzT2RkKSByZXR1cm4gIXIuaXNPZGQoZSk7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGaWVsZCBkb2Vzbid0IHN1cHBvcnQgaXNPZGQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlcXVhbHMoZSkgewogICAgICAgICAgICAgIGIoZSk7CiAgICAgICAgICAgICAgY29uc3QgeyBweDogdCwgcHk6IG4sIHB6OiBzIH0gPSB0aGlzLAogICAgICAgICAgICAgICAgeyBweDogbywgcHk6IGksIHB6OiBhIH0gPSBlLAogICAgICAgICAgICAgICAgYyA9IHIuZXFsKHIubXVsKHQsIGEpLCByLm11bChvLCBzKSksCiAgICAgICAgICAgICAgICB1ID0gci5lcWwoci5tdWwobiwgYSksIHIubXVsKGksIHMpKTsKICAgICAgICAgICAgICByZXR1cm4gYyAmJiB1OwogICAgICAgICAgICB9CiAgICAgICAgICAgIG5lZ2F0ZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IHkodGhpcy5weCwgci5uZWcodGhpcy5weSksIHRoaXMucHopOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRvdWJsZSgpIHsKICAgICAgICAgICAgICBjb25zdCB7IGE6IGUsIGI6IG4gfSA9IHQsCiAgICAgICAgICAgICAgICBzID0gci5tdWwobiwgZiksCiAgICAgICAgICAgICAgICB7IHB4OiBvLCBweTogaSwgcHo6IGEgfSA9IHRoaXM7CiAgICAgICAgICAgICAgbGV0IGMgPSByLlpFUk8sCiAgICAgICAgICAgICAgICB1ID0gci5aRVJPLAogICAgICAgICAgICAgICAgbCA9IHIuWkVSTywKICAgICAgICAgICAgICAgIGQgPSByLm11bChvLCBvKSwKICAgICAgICAgICAgICAgIGggPSByLm11bChpLCBpKSwKICAgICAgICAgICAgICAgIGcgPSByLm11bChhLCBhKSwKICAgICAgICAgICAgICAgIHAgPSByLm11bChvLCBpKTsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKHAgPSByLmFkZChwLCBwKSksCiAgICAgICAgICAgICAgICAobCA9IHIubXVsKG8sIGEpKSwKICAgICAgICAgICAgICAgIChsID0gci5hZGQobCwgbCkpLAogICAgICAgICAgICAgICAgKGMgPSByLm11bChlLCBsKSksCiAgICAgICAgICAgICAgICAodSA9IHIubXVsKHMsIGcpKSwKICAgICAgICAgICAgICAgICh1ID0gci5hZGQoYywgdSkpLAogICAgICAgICAgICAgICAgKGMgPSByLnN1YihoLCB1KSksCiAgICAgICAgICAgICAgICAodSA9IHIuYWRkKGgsIHUpKSwKICAgICAgICAgICAgICAgICh1ID0gci5tdWwoYywgdSkpLAogICAgICAgICAgICAgICAgKGMgPSByLm11bChwLCBjKSksCiAgICAgICAgICAgICAgICAobCA9IHIubXVsKHMsIGwpKSwKICAgICAgICAgICAgICAgIChnID0gci5tdWwoZSwgZykpLAogICAgICAgICAgICAgICAgKHAgPSByLnN1YihkLCBnKSksCiAgICAgICAgICAgICAgICAocCA9IHIubXVsKGUsIHApKSwKICAgICAgICAgICAgICAgIChwID0gci5hZGQocCwgbCkpLAogICAgICAgICAgICAgICAgKGwgPSByLmFkZChkLCBkKSksCiAgICAgICAgICAgICAgICAoZCA9IHIuYWRkKGwsIGQpKSwKICAgICAgICAgICAgICAgIChkID0gci5hZGQoZCwgZykpLAogICAgICAgICAgICAgICAgKGQgPSByLm11bChkLCBwKSksCiAgICAgICAgICAgICAgICAodSA9IHIuYWRkKHUsIGQpKSwKICAgICAgICAgICAgICAgIChnID0gci5tdWwoaSwgYSkpLAogICAgICAgICAgICAgICAgKGcgPSByLmFkZChnLCBnKSksCiAgICAgICAgICAgICAgICAoZCA9IHIubXVsKGcsIHApKSwKICAgICAgICAgICAgICAgIChjID0gci5zdWIoYywgZCkpLAogICAgICAgICAgICAgICAgKGwgPSByLm11bChnLCBoKSksCiAgICAgICAgICAgICAgICAobCA9IHIuYWRkKGwsIGwpKSwKICAgICAgICAgICAgICAgIChsID0gci5hZGQobCwgbCkpLAogICAgICAgICAgICAgICAgbmV3IHkoYywgdSwgbCkKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFkZChlKSB7CiAgICAgICAgICAgICAgYihlKTsKICAgICAgICAgICAgICBjb25zdCB7IHB4OiBuLCBweTogcywgcHo6IG8gfSA9IHRoaXMsCiAgICAgICAgICAgICAgICB7IHB4OiBpLCBweTogYSwgcHo6IGMgfSA9IGU7CiAgICAgICAgICAgICAgbGV0IHUgPSByLlpFUk8sCiAgICAgICAgICAgICAgICBsID0gci5aRVJPLAogICAgICAgICAgICAgICAgZCA9IHIuWkVSTzsKICAgICAgICAgICAgICBjb25zdCBoID0gdC5hLAogICAgICAgICAgICAgICAgZyA9IHIubXVsKHQuYiwgZik7CiAgICAgICAgICAgICAgbGV0IHAgPSByLm11bChuLCBpKSwKICAgICAgICAgICAgICAgIG0gPSByLm11bChzLCBhKSwKICAgICAgICAgICAgICAgIEEgPSByLm11bChvLCBjKSwKICAgICAgICAgICAgICAgIHYgPSByLmFkZChuLCBzKSwKICAgICAgICAgICAgICAgIEUgPSByLmFkZChpLCBhKTsKICAgICAgICAgICAgICAodiA9IHIubXVsKHYsIEUpKSwgKEUgPSByLmFkZChwLCBtKSksICh2ID0gci5zdWIodiwgRSkpLCAoRSA9IHIuYWRkKG4sIG8pKTsKICAgICAgICAgICAgICBsZXQgdyA9IHIuYWRkKGksIGMpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoRSA9IHIubXVsKEUsIHcpKSwKICAgICAgICAgICAgICAgICh3ID0gci5hZGQocCwgQSkpLAogICAgICAgICAgICAgICAgKEUgPSByLnN1YihFLCB3KSksCiAgICAgICAgICAgICAgICAodyA9IHIuYWRkKHMsIG8pKSwKICAgICAgICAgICAgICAgICh1ID0gci5hZGQoYSwgYykpLAogICAgICAgICAgICAgICAgKHcgPSByLm11bCh3LCB1KSksCiAgICAgICAgICAgICAgICAodSA9IHIuYWRkKG0sIEEpKSwKICAgICAgICAgICAgICAgICh3ID0gci5zdWIodywgdSkpLAogICAgICAgICAgICAgICAgKGQgPSByLm11bChoLCBFKSksCiAgICAgICAgICAgICAgICAodSA9IHIubXVsKGcsIEEpKSwKICAgICAgICAgICAgICAgIChkID0gci5hZGQodSwgZCkpLAogICAgICAgICAgICAgICAgKHUgPSByLnN1YihtLCBkKSksCiAgICAgICAgICAgICAgICAoZCA9IHIuYWRkKG0sIGQpKSwKICAgICAgICAgICAgICAgIChsID0gci5tdWwodSwgZCkpLAogICAgICAgICAgICAgICAgKG0gPSByLmFkZChwLCBwKSksCiAgICAgICAgICAgICAgICAobSA9IHIuYWRkKG0sIHApKSwKICAgICAgICAgICAgICAgIChBID0gci5tdWwoaCwgQSkpLAogICAgICAgICAgICAgICAgKEUgPSByLm11bChnLCBFKSksCiAgICAgICAgICAgICAgICAobSA9IHIuYWRkKG0sIEEpKSwKICAgICAgICAgICAgICAgIChBID0gci5zdWIocCwgQSkpLAogICAgICAgICAgICAgICAgKEEgPSByLm11bChoLCBBKSksCiAgICAgICAgICAgICAgICAoRSA9IHIuYWRkKEUsIEEpKSwKICAgICAgICAgICAgICAgIChwID0gci5tdWwobSwgRSkpLAogICAgICAgICAgICAgICAgKGwgPSByLmFkZChsLCBwKSksCiAgICAgICAgICAgICAgICAocCA9IHIubXVsKHcsIEUpKSwKICAgICAgICAgICAgICAgICh1ID0gci5tdWwodiwgdSkpLAogICAgICAgICAgICAgICAgKHUgPSByLnN1Yih1LCBwKSksCiAgICAgICAgICAgICAgICAocCA9IHIubXVsKHYsIG0pKSwKICAgICAgICAgICAgICAgIChkID0gci5tdWwodywgZCkpLAogICAgICAgICAgICAgICAgKGQgPSByLmFkZChkLCBwKSksCiAgICAgICAgICAgICAgICBuZXcgeSh1LCBsLCBkKQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3VidHJhY3QoZSkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZChlLm5lZ2F0ZSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpczAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXF1YWxzKHkuWkVSTyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd05BRihlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHYud05BRkNhY2hlZCh0aGlzLCBtLCBlLCAoZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdCA9IHIuaW52ZXJ0QmF0Y2goZS5tYXAoKGUpID0-IGUucHopKTsKICAgICAgICAgICAgICAgIHJldHVybiBlLm1hcCgoZSwgcikgPT4gZS50b0FmZmluZSh0W3JdKSkubWFwKHkuZnJvbUFmZmluZSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbXVsdGlwbHlVbnNhZmUoZSkgewogICAgICAgICAgICAgIGNvbnN0IG4gPSB5LlpFUk87CiAgICAgICAgICAgICAgaWYgKGUgPT09IHUpIHJldHVybiBuOwogICAgICAgICAgICAgIGlmICgoZyhlKSwgZSA9PT0gbCkpIHJldHVybiB0aGlzOwogICAgICAgICAgICAgIGNvbnN0IHsgZW5kbzogcyB9ID0gdDsKICAgICAgICAgICAgICBpZiAoIXMpIHJldHVybiB2LnVuc2FmZUxhZGRlcih0aGlzLCBlKTsKICAgICAgICAgICAgICBsZXQgeyBrMW5lZzogbywgazE6IGksIGsybmVnOiBhLCBrMjogYyB9ID0gcy5zcGxpdFNjYWxhcihlKSwKICAgICAgICAgICAgICAgIGQgPSBuLAogICAgICAgICAgICAgICAgZiA9IG4sCiAgICAgICAgICAgICAgICBoID0gdGhpczsKICAgICAgICAgICAgICBmb3IgKDsgaSA-IHUgfHwgYyA-IHU7ICkKICAgICAgICAgICAgICAgIGkgJiBsICYmIChkID0gZC5hZGQoaCkpLCBjICYgbCAmJiAoZiA9IGYuYWRkKGgpKSwgKGggPSBoLmRvdWJsZSgpKSwgKGkgPj49IGwpLCAoYyA-Pj0gbCk7CiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIG8gJiYgKGQgPSBkLm5lZ2F0ZSgpKSwgYSAmJiAoZiA9IGYubmVnYXRlKCkpLCAoZiA9IG5ldyB5KHIubXVsKGYucHgsIHMuYmV0YSksIGYucHksIGYucHopKSwgZC5hZGQoZikKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG11bHRpcGx5KGUpIHsKICAgICAgICAgICAgICBnKGUpOwogICAgICAgICAgICAgIGxldCBuLAogICAgICAgICAgICAgICAgcywKICAgICAgICAgICAgICAgIG8gPSBlOwogICAgICAgICAgICAgIGNvbnN0IHsgZW5kbzogaSB9ID0gdDsKICAgICAgICAgICAgICBpZiAoaSkgewogICAgICAgICAgICAgICAgY29uc3QgeyBrMW5lZzogZSwgazE6IHQsIGsybmVnOiBhLCBrMjogYyB9ID0gaS5zcGxpdFNjYWxhcihvKTsKICAgICAgICAgICAgICAgIGxldCB7IHA6IHUsIGY6IGwgfSA9IHRoaXMud05BRih0KSwKICAgICAgICAgICAgICAgICAgeyBwOiBkLCBmIH0gPSB0aGlzLndOQUYoYyk7CiAgICAgICAgICAgICAgICAodSA9IHYuY29uc3RUaW1lTmVnYXRlKGUsIHUpKSwKICAgICAgICAgICAgICAgICAgKGQgPSB2LmNvbnN0VGltZU5lZ2F0ZShhLCBkKSksCiAgICAgICAgICAgICAgICAgIChkID0gbmV3IHkoci5tdWwoZC5weCwgaS5iZXRhKSwgZC5weSwgZC5weikpLAogICAgICAgICAgICAgICAgICAobiA9IHUuYWRkKGQpKSwKICAgICAgICAgICAgICAgICAgKHMgPSBsLmFkZChmKSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnN0IHsgcDogZSwgZjogdCB9ID0gdGhpcy53TkFGKG8pOwogICAgICAgICAgICAgICAgKG4gPSBlKSwgKHMgPSB0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHkubm9ybWFsaXplWihbbiwgc10pWzBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG11bHRpcGx5QW5kQWRkVW5zYWZlKGUsIHQsIHIpIHsKICAgICAgICAgICAgICBjb25zdCBuID0geS5CQVNFLAogICAgICAgICAgICAgICAgcyA9IChlLCB0KSA9PiAodCAhPT0gdSAmJiB0ICE9PSBsICYmIGUuZXF1YWxzKG4pID8gZS5tdWx0aXBseSh0KSA6IGUubXVsdGlwbHlVbnNhZmUodCkpLAogICAgICAgICAgICAgICAgbyA9IHModGhpcywgdCkuYWRkKHMoZSwgcikpOwogICAgICAgICAgICAgIHJldHVybiBvLmlzMCgpID8gdm9pZCAwIDogbzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0b0FmZmluZShlKSB7CiAgICAgICAgICAgICAgY29uc3QgeyBweDogdCwgcHk6IG4sIHB6OiBzIH0gPSB0aGlzLAogICAgICAgICAgICAgICAgbyA9IHRoaXMuaXMwKCk7CiAgICAgICAgICAgICAgbnVsbCA9PSBlICYmIChlID0gbyA_IHIuT05FIDogci5pbnYocykpOwogICAgICAgICAgICAgIGNvbnN0IGkgPSByLm11bCh0LCBlKSwKICAgICAgICAgICAgICAgIGEgPSByLm11bChuLCBlKSwKICAgICAgICAgICAgICAgIGMgPSByLm11bChzLCBlKTsKICAgICAgICAgICAgICBpZiAobykgcmV0dXJuIHsgeDogci5aRVJPLCB5OiByLlpFUk8gfTsKICAgICAgICAgICAgICBpZiAoIXIuZXFsKGMsIHIuT05FKSkgdGhyb3cgbmV3IEVycm9yKCdpbnZaIHdhcyBpbnZhbGlkJyk7CiAgICAgICAgICAgICAgcmV0dXJuIHsgeDogaSwgeTogYSB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlzVG9yc2lvbkZyZWUoKSB7CiAgICAgICAgICAgICAgY29uc3QgeyBoOiBlLCBpc1RvcnNpb25GcmVlOiByIH0gPSB0OwogICAgICAgICAgICAgIGlmIChlID09PSBsKSByZXR1cm4gITA7CiAgICAgICAgICAgICAgaWYgKHIpIHJldHVybiByKHksIHRoaXMpOwogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaXNUb3JzaW9uRnJlZSgpIGhhcyBub3QgYmVlbiBkZWNsYXJlZCBmb3IgdGhlIGVsbGlwdGljIGN1cnZlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2xlYXJDb2ZhY3RvcigpIHsKICAgICAgICAgICAgICBjb25zdCB7IGg6IGUsIGNsZWFyQ29mYWN0b3I6IHIgfSA9IHQ7CiAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IGwgPyB0aGlzIDogciA_IHIoeSwgdGhpcykgOiB0aGlzLm11bHRpcGx5VW5zYWZlKHQuaCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdG9SYXdCeXRlcyhlID0gITApIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRWYWxpZGl0eSgpLCBhKHksIHRoaXMsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRvSGV4KGUgPSAhMCkgewogICAgICAgICAgICAgIHJldHVybiBzLmJ5dGVzVG9IZXgodGhpcy50b1Jhd0J5dGVzKGUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgKHkuQkFTRSA9IG5ldyB5KHQuR3gsIHQuR3ksIHIuT05FKSksICh5LlpFUk8gPSBuZXcgeShyLlpFUk8sIHIuT05FLCByLlpFUk8pKTsKICAgICAgICAgIGNvbnN0IEEgPSB0Lm5CaXRMZW5ndGgsCiAgICAgICAgICAgIHYgPSAoMCwgaS53TkFGKSh5LCB0LmVuZG8gPyBNYXRoLmNlaWwoQSAvIDIpIDogQSk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBDVVJWRTogdCwKICAgICAgICAgICAgUHJvamVjdGl2ZVBvaW50OiB5LAogICAgICAgICAgICBub3JtUHJpdmF0ZUtleVRvU2NhbGFyOiBwLAogICAgICAgICAgICB3ZWllcnN0cmFzc0VxdWF0aW9uOiBkLAogICAgICAgICAgICBpc1dpdGhpbkN1cnZlT3JkZXI6IGgKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IGUuT1JERVI7CiAgICAgICAgICBsZXQgbiA9IHU7CiAgICAgICAgICBmb3IgKGxldCBlID0gciAtIGw7IGUgJSBkID09PSB1OyBlIC89IGQpIG4gKz0gbDsKICAgICAgICAgIGNvbnN0IHMgPSBuLAogICAgICAgICAgICBvID0gZCA8PCAocyAtIGwgLSBsKSwKICAgICAgICAgICAgaSA9IG8gKiBkLAogICAgICAgICAgICBhID0gKHIgLSBsKSAvIGksCiAgICAgICAgICAgIGMgPSAoYSAtIGwpIC8gZCwKICAgICAgICAgICAgZyA9IGkgLSBsLAogICAgICAgICAgICBwID0gbywKICAgICAgICAgICAgbSA9IGUucG93KHQsIGEpLAogICAgICAgICAgICBiID0gZS5wb3codCwgKGEgKyBsKSAvIGQpOwogICAgICAgICAgbGV0IHkgPSAodCwgcikgPT4gewogICAgICAgICAgICBsZXQgbiA9IG0sCiAgICAgICAgICAgICAgbyA9IGUucG93KHIsIGcpLAogICAgICAgICAgICAgIGkgPSBlLnNxcihvKTsKICAgICAgICAgICAgaSA9IGUubXVsKGksIHIpOwogICAgICAgICAgICBsZXQgYSA9IGUubXVsKHQsIGkpOwogICAgICAgICAgICAoYSA9IGUucG93KGEsIGMpKSwgKGEgPSBlLm11bChhLCBvKSksIChvID0gZS5tdWwoYSwgcikpLCAoaSA9IGUubXVsKGEsIHQpKTsKICAgICAgICAgICAgbGV0IHUgPSBlLm11bChpLCBvKTsKICAgICAgICAgICAgYSA9IGUucG93KHUsIHApOwogICAgICAgICAgICBsZXQgZiA9IGUuZXFsKGEsIGUuT05FKTsKICAgICAgICAgICAgKG8gPSBlLm11bChpLCBiKSksIChhID0gZS5tdWwodSwgbikpLCAoaSA9IGUuY21vdihvLCBpLCBmKSksICh1ID0gZS5jbW92KGEsIHUsIGYpKTsKICAgICAgICAgICAgZm9yIChsZXQgdCA9IHM7IHQgPiBsOyB0LS0pIHsKICAgICAgICAgICAgICBsZXQgciA9IHQgLSBkOwogICAgICAgICAgICAgIHIgPSBkIDw8IChyIC0gbCk7CiAgICAgICAgICAgICAgbGV0IHMgPSBlLnBvdyh1LCByKTsKICAgICAgICAgICAgICBjb25zdCBhID0gZS5lcWwocywgZS5PTkUpOwogICAgICAgICAgICAgIChvID0gZS5tdWwoaSwgbikpLCAobiA9IGUubXVsKG4sIG4pKSwgKHMgPSBlLm11bCh1LCBuKSksIChpID0gZS5jbW92KG8sIGksIGEpKSwgKHUgPSBlLmNtb3YocywgdSwgYSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7IGlzVmFsaWQ6IGYsIHZhbHVlOiBpIH07CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKGUuT1JERVIgJSBoID09PSBmKSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSAoZS5PUkRFUiAtIGYpIC8gaCwKICAgICAgICAgICAgICBuID0gZS5zcXJ0KGUubmVnKHQpKTsKICAgICAgICAgICAgeSA9ICh0LCBzKSA9PiB7CiAgICAgICAgICAgICAgbGV0IG8gPSBlLnNxcihzKTsKICAgICAgICAgICAgICBjb25zdCBpID0gZS5tdWwodCwgcyk7CiAgICAgICAgICAgICAgbyA9IGUubXVsKG8sIGkpOwogICAgICAgICAgICAgIGxldCBhID0gZS5wb3cobywgcik7CiAgICAgICAgICAgICAgYSA9IGUubXVsKGEsIGkpOwogICAgICAgICAgICAgIGNvbnN0IGMgPSBlLm11bChhLCBuKSwKICAgICAgICAgICAgICAgIHUgPSBlLm11bChlLnNxcihhKSwgcyksCiAgICAgICAgICAgICAgICBsID0gZS5lcWwodSwgdCk7CiAgICAgICAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogbCwgdmFsdWU6IGUuY21vdihjLCBhLCBsKSB9OwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHk7CiAgICAgICAgfQogICAgICAgICh0LndlaWVyc3RyYXNzUG9pbnRzID0gZyksCiAgICAgICAgICAodC53ZWllcnN0cmFzcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgaS52YWxpZGF0ZUJhc2ljKShlKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIHMudmFsaWRhdGVPYmplY3QoCiAgICAgICAgICAgICAgICAgICAgdCwKICAgICAgICAgICAgICAgICAgICB7IGhhc2g6ICdoYXNoJywgaG1hYzogJ2Z1bmN0aW9uJywgcmFuZG9tQnl0ZXM6ICdmdW5jdGlvbicgfSwKICAgICAgICAgICAgICAgICAgICB7IGJpdHMyaW50OiAnZnVuY3Rpb24nLCBiaXRzMmludF9tb2ROOiAnZnVuY3Rpb24nLCBsb3dTOiAnYm9vbGVhbicgfQogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHsgbG93UzogITAsIC4uLnQgfSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSkoZSksCiAgICAgICAgICAgICAgeyBGcDogYSwgbjogYyB9ID0gciwKICAgICAgICAgICAgICBkID0gYS5CWVRFUyArIDEsCiAgICAgICAgICAgICAgZiA9IDIgKiBhLkJZVEVTICsgMTsKICAgICAgICAgICAgZnVuY3Rpb24gaChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4ubW9kKGUsIGMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgICAgICAgIHJldHVybiBuLmludmVydChlLCBjKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgICAgICBQcm9qZWN0aXZlUG9pbnQ6IG0sCiAgICAgICAgICAgICAgICBub3JtUHJpdmF0ZUtleVRvU2NhbGFyOiBiLAogICAgICAgICAgICAgICAgd2VpZXJzdHJhc3NFcXVhdGlvbjogeSwKICAgICAgICAgICAgICAgIGlzV2l0aGluQ3VydmVPcmRlcjogQQogICAgICAgICAgICAgIH0gPSBnKHsKICAgICAgICAgICAgICAgIC4uLnIsCiAgICAgICAgICAgICAgICB0b0J5dGVzKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQudG9BZmZpbmUoKSwKICAgICAgICAgICAgICAgICAgICBvID0gYS50b0J5dGVzKG4ueCksCiAgICAgICAgICAgICAgICAgICAgaSA9IHMuY29uY2F0Qnl0ZXM7CiAgICAgICAgICAgICAgICAgIHJldHVybiByID8gaShVaW50OEFycmF5LmZyb20oW3QuaGFzRXZlblkoKSA_IDIgOiAzXSksIG8pIDogaShVaW50OEFycmF5LmZyb20oWzRdKSwgbywgYS50b0J5dGVzKG4ueSkpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGZyb21CeXRlcyhlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICByID0gZVswXSwKICAgICAgICAgICAgICAgICAgICBuID0gZS5zdWJhcnJheSgxKTsKICAgICAgICAgICAgICAgICAgaWYgKHQgIT09IGQgfHwgKDIgIT09IHIgJiYgMyAhPT0gcikpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gZiAmJiA0ID09PSByKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgeDogYS5mcm9tQnl0ZXMobi5zdWJhcnJheSgwLCBhLkJZVEVTKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHk6IGEuZnJvbUJ5dGVzKG4uc3ViYXJyYXkoYS5CWVRFUywgMiAqIGEuQllURVMpKQogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICBgUG9pbnQgb2YgbGVuZ3RoICR7dH0gd2FzIGludmFsaWQuIEV4cGVjdGVkICR7ZH0gY29tcHJlc3NlZCBieXRlcyBvciAke2Z9IHVuY29tcHJlc3NlZCBieXRlc2AKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5ieXRlc1RvTnVtYmVyQkUobik7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEodSA8IChvID0gZSkgJiYgbyA8IGEuT1JERVIpKSB0aHJvdyBuZXcgRXJyb3IoJ1BvaW50IGlzIG5vdCBvbiBjdXJ2ZScpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB5KGUpOwogICAgICAgICAgICAgICAgICAgIGxldCBpID0gYS5zcXJ0KHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoMSA9PSAoMSAmIHIpKSAhPSAoKGkgJiBsKSA9PT0gbCkgJiYgKGkgPSBhLm5lZyhpKSksIHsgeDogZSwgeTogaSB9OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHZhciBvOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHYgPSAoZSkgPT4gcy5ieXRlc1RvSGV4KHMubnVtYmVyVG9CeXRlc0JFKGUsIHIubkJ5dGVMZW5ndGgpKTsKICAgICAgICAgICAgZnVuY3Rpb24gRShlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGUgPiBjID4-IGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgdyA9IChlLCB0LCByKSA9PiBzLmJ5dGVzVG9OdW1iZXJCRShlLnNsaWNlKHQsIHIpKTsKICAgICAgICAgICAgY2xhc3MgVCB7CiAgICAgICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICAgICAgKHRoaXMuciA9IGUpLCAodGhpcy5zID0gdCksICh0aGlzLnJlY292ZXJ5ID0gciksIHRoaXMuYXNzZXJ0VmFsaWRpdHkoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc3RhdGljIGZyb21Db21wYWN0KGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSByLm5CeXRlTGVuZ3RoOwogICAgICAgICAgICAgICAgcmV0dXJuIChlID0gKDAsIG8uZW5zdXJlQnl0ZXMpKCdjb21wYWN0U2lnbmF0dXJlJywgZSwgMiAqIHQpKSwgbmV3IFQodyhlLCAwLCB0KSwgdyhlLCB0LCAyICogdCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzdGF0aWMgZnJvbURFUihlKSB7CiAgICAgICAgICAgICAgICBjb25zdCB7IHIsIHM6IG4gfSA9IHQuREVSLnRvU2lnKCgwLCBvLmVuc3VyZUJ5dGVzKSgnREVSJywgZSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUKHIsIG4pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBhc3NlcnRWYWxpZGl0eSgpIHsKICAgICAgICAgICAgICAgIGlmICghQSh0aGlzLnIpKSB0aHJvdyBuZXcgRXJyb3IoJ3IgbXVzdCBiZSAwIDwgciA8IENVUlZFLm4nKTsKICAgICAgICAgICAgICAgIGlmICghQSh0aGlzLnMpKSB0aHJvdyBuZXcgRXJyb3IoJ3MgbXVzdCBiZSAwIDwgcyA8IENVUlZFLm4nKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYWRkUmVjb3ZlcnlCaXQoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUKHRoaXMuciwgdGhpcy5zLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVjb3ZlclB1YmxpY0tleShlKSB7CiAgICAgICAgICAgICAgICBjb25zdCB7IHI6IHQsIHM6IG4sIHJlY292ZXJ5OiBzIH0gPSB0aGlzLAogICAgICAgICAgICAgICAgICBpID0gUigoMCwgby5lbnN1cmVCeXRlcykoJ21zZ0hhc2gnLCBlKSk7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBzIHx8ICFbMCwgMSwgMiwgM10uaW5jbHVkZXMocykpIHRocm93IG5ldyBFcnJvcigncmVjb3ZlcnkgaWQgaW52YWxpZCcpOwogICAgICAgICAgICAgICAgY29uc3QgYyA9IDIgPT09IHMgfHwgMyA9PT0gcyA_IHQgKyByLm4gOiB0OwogICAgICAgICAgICAgICAgaWYgKGMgPj0gYS5PUkRFUikgdGhyb3cgbmV3IEVycm9yKCdyZWNvdmVyeSBpZCAyIG9yIDMgaW52YWxpZCcpOwogICAgICAgICAgICAgICAgY29uc3QgdSA9IDAgPT0gKDEgJiBzKSA_ICcwMicgOiAnMDMnLAogICAgICAgICAgICAgICAgICBsID0gbS5mcm9tSGV4KHUgKyB2KGMpKSwKICAgICAgICAgICAgICAgICAgZCA9IHAoYyksCiAgICAgICAgICAgICAgICAgIGYgPSBoKC1pICogZCksCiAgICAgICAgICAgICAgICAgIGcgPSBoKG4gKiBkKSwKICAgICAgICAgICAgICAgICAgYiA9IG0uQkFTRS5tdWx0aXBseUFuZEFkZFVuc2FmZShsLCBmLCBnKTsKICAgICAgICAgICAgICAgIGlmICghYikgdGhyb3cgbmV3IEVycm9yKCdwb2ludCBhdCBpbmZpbmlmeScpOwogICAgICAgICAgICAgICAgcmV0dXJuIGIuYXNzZXJ0VmFsaWRpdHkoKSwgYjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaGFzSGlnaFMoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gRSh0aGlzLnMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBub3JtYWxpemVTKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzSGlnaFMoKSA_IG5ldyBUKHRoaXMuciwgaCgtdGhpcy5zKSwgdGhpcy5yZWNvdmVyeSkgOiB0aGlzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0b0RFUlJhd0J5dGVzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHMuaGV4VG9CeXRlcyh0aGlzLnRvREVSSGV4KCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0b0RFUkhleCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LkRFUi5oZXhGcm9tU2lnKHsgcjogdGhpcy5yLCBzOiB0aGlzLnMgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRvQ29tcGFjdFJhd0J5dGVzKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHMuaGV4VG9CeXRlcyh0aGlzLnRvQ29tcGFjdEhleCgpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdG9Db21wYWN0SGV4KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHYodGhpcy5yKSArIHYodGhpcy5zKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgUCA9IHsKICAgICAgICAgICAgICBpc1ZhbGlkUHJpdmF0ZUtleShlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICByZXR1cm4gYihlKSwgITA7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIG5vcm1Qcml2YXRlS2V5VG9TY2FsYXI6IGIsCiAgICAgICAgICAgICAgcmFuZG9tUHJpdmF0ZUtleTogKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZSA9IG4uZ2V0TWluSGFzaExlbmd0aChyLm4pOwogICAgICAgICAgICAgICAgcmV0dXJuIG4ubWFwSGFzaFRvRmllbGQoci5yYW5kb21CeXRlcyhlKSwgci5uKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHByZWNvbXB1dGU6IChlID0gOCwgdCA9IG0uQkFTRSkgPT4gKHQuX3NldFdpbmRvd1NpemUoZSksIHQubXVsdGlwbHkoQmlnSW50KDMpKSwgdCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZnVuY3Rpb24gUyhlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5LAogICAgICAgICAgICAgICAgciA9ICdzdHJpbmcnID09IHR5cGVvZiBlLAogICAgICAgICAgICAgICAgbiA9ICh0IHx8IHIpICYmIGUubGVuZ3RoOwogICAgICAgICAgICAgIHJldHVybiB0ID8gbiA9PT0gZCB8fCBuID09PSBmIDogciA_IG4gPT09IDIgKiBkIHx8IG4gPT09IDIgKiBmIDogZSBpbnN0YW5jZW9mIG07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgTyA9CiAgICAgICAgICAgICAgICByLmJpdHMyaW50IHx8CiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICBjb25zdCB0ID0gcy5ieXRlc1RvTnVtYmVyQkUoZSksCiAgICAgICAgICAgICAgICAgICAgbiA9IDggKiBlLmxlbmd0aCAtIHIubkJpdExlbmd0aDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gPiAwID8gdCA-PiBCaWdJbnQobikgOiB0OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBSID0KICAgICAgICAgICAgICAgIHIuYml0czJpbnRfbW9kTiB8fAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoTyhlKSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIE4gPSBzLmJpdE1hc2soci5uQml0TGVuZ3RoKTsKICAgICAgICAgICAgZnVuY3Rpb24gTChlKSB7CiAgICAgICAgICAgICAgaWYgKCdiaWdpbnQnICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgRXJyb3IoJ2JpZ2ludCBleHBlY3RlZCcpOwogICAgICAgICAgICAgIGlmICghKHUgPD0gZSAmJiBlIDwgTikpIHRocm93IG5ldyBFcnJvcihgYmlnaW50IGV4cGVjdGVkIDwgMl4ke3IubkJpdExlbmd0aH1gKTsKICAgICAgICAgICAgICByZXR1cm4gcy5udW1iZXJUb0J5dGVzQkUoZSwgci5uQnl0ZUxlbmd0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgQiA9IHsgbG93Uzogci5sb3dTLCBwcmVoYXNoOiAhMSB9LAogICAgICAgICAgICAgIEMgPSB7IGxvd1M6IHIubG93UywgcHJlaGFzaDogITEgfTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICBtLkJBU0UuX3NldFdpbmRvd1NpemUoOCksCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgQ1VSVkU6IHIsCiAgICAgICAgICAgICAgICBnZXRQdWJsaWNLZXk6IGZ1bmN0aW9uIChlLCB0ID0gITApIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG0uZnJvbVByaXZhdGVLZXkoZSkudG9SYXdCeXRlcyh0KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBnZXRTaGFyZWRTZWNyZXQ6IGZ1bmN0aW9uIChlLCB0LCByID0gITApIHsKICAgICAgICAgICAgICAgICAgaWYgKFMoZSkpIHRocm93IG5ldyBFcnJvcignZmlyc3QgYXJnIG11c3QgYmUgcHJpdmF0ZSBrZXknKTsKICAgICAgICAgICAgICAgICAgaWYgKCFTKHQpKSB0aHJvdyBuZXcgRXJyb3IoJ3NlY29uZCBhcmcgbXVzdCBiZSBwdWJsaWMga2V5Jyk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBtLmZyb21IZXgodCkubXVsdGlwbHkoYihlKSkudG9SYXdCeXRlcyhyKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzaWduOiBmdW5jdGlvbiAoZSwgdCwgbiA9IEIpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgeyBzZWVkOiBpLCBrMnNpZzogYyB9ID0gKGZ1bmN0aW9uIChlLCB0LCBuID0gQikgewogICAgICAgICAgICAgICAgICAgICAgaWYgKFsncmVjb3ZlcmVkJywgJ2Nhbm9uaWNhbCddLnNvbWUoKGUpID0-IGUgaW4gbikpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc2lnbigpIGxlZ2FjeSBvcHRpb25zIG5vdCBzdXBwb3J0ZWQnKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgaGFzaDogaSwgcmFuZG9tQnl0ZXM6IGMgfSA9IHI7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgeyBsb3dTOiBkLCBwcmVoYXNoOiBmLCBleHRyYUVudHJvcHk6IGcgfSA9IG47CiAgICAgICAgICAgICAgICAgICAgICBudWxsID09IGQgJiYgKGQgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgIChlID0gKDAsIG8uZW5zdXJlQnl0ZXMpKCdtc2dIYXNoJywgZSkpLAogICAgICAgICAgICAgICAgICAgICAgICBmICYmIChlID0gKDAsIG8uZW5zdXJlQnl0ZXMpKCdwcmVoYXNoZWQgbXNnSGFzaCcsIGkoZSkpKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBSKGUpLAogICAgICAgICAgICAgICAgICAgICAgICB2ID0gYih0KSwKICAgICAgICAgICAgICAgICAgICAgICAgdyA9IFtMKHYpLCBMKHkpXTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICEwID09PSBnID8gYyhhLkJZVEVTKSA6IGc7CiAgICAgICAgICAgICAgICAgICAgICAgIHcucHVzaCgoMCwgby5lbnN1cmVCeXRlcykoJ2V4dHJhRW50cm9weScsIGUpKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFAgPSBzLmNvbmNhdEJ5dGVzKC4uLncpLAogICAgICAgICAgICAgICAgICAgICAgICBTID0geTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNlZWQ6IFAsCiAgICAgICAgICAgICAgICAgICAgICAgIGsyc2lnOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBPKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQSh0KSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBwKHQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IG0uQkFTRS5tdWx0aXBseSh0KS50b0FmZmluZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGgobi54KTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA9PT0gdSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBoKHIgKiBoKFMgKyBzICogdikpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09PSB1KSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAobi54ID09PSBzID8gMCA6IDIpIHwgTnVtYmVyKG4ueSAmIGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IG87CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRShvKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGEgPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRShlKSA_IGgoLWUpIDogZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkobykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSBePSAxKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVChzLCBhLCBpKQogICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSkoZSwgdCwgbiksCiAgICAgICAgICAgICAgICAgICAgZCA9IHI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzLmNyZWF0ZUhtYWNEcmJnKGQuaGFzaC5vdXRwdXRMZW4sIGQubkJ5dGVMZW5ndGgsIGQuaG1hYykoaSwgYyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdmVyaWZ5OiBmdW5jdGlvbiAoZSwgbiwgcywgaSA9IEMpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IGU7CiAgICAgICAgICAgICAgICAgIGlmICgoKG4gPSAoMCwgby5lbnN1cmVCeXRlcykoJ21zZ0hhc2gnLCBuKSksIChzID0gKDAsIG8uZW5zdXJlQnl0ZXMpKCdwdWJsaWNLZXknLCBzKSksICdzdHJpY3QnIGluIGkpKQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignb3B0aW9ucy5zdHJpY3Qgd2FzIHJlbmFtZWQgdG8gbG93UycpOwogICAgICAgICAgICAgICAgICBjb25zdCB7IGxvd1M6IGMsIHByZWhhc2g6IHUgfSA9IGk7CiAgICAgICAgICAgICAgICAgIGxldCBsLCBkOwogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgYSB8fCBhIGluc3RhbmNlb2YgVWludDhBcnJheSkKICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBULmZyb21ERVIoYSk7CiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiB0LkRFUi5FcnIpKSB0aHJvdyBlOwogICAgICAgICAgICAgICAgICAgICAgICBsID0gVC5mcm9tQ29tcGFjdChhKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICgnb2JqZWN0JyAhPSB0eXBlb2YgYSB8fCAnYmlnaW50JyAhPSB0eXBlb2YgYS5yIHx8ICdiaWdpbnQnICE9IHR5cGVvZiBhLnMpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUEFSU0UnKTsKICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyByOiBlLCBzOiB0IH0gPSBhOwogICAgICAgICAgICAgICAgICAgICAgICBsID0gbmV3IFQoZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGQgPSBtLmZyb21IZXgocyk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJ1BBUlNFJyA9PT0gZS5tZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzaWduYXR1cmUgbXVzdCBiZSBTaWduYXR1cmUgaW5zdGFuY2UsIFVpbnQ4QXJyYXkgb3IgaGV4IHN0cmluZycpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoYyAmJiBsLmhhc0hpZ2hTKCkpIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgdSAmJiAobiA9IHIuaGFzaChuKSk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcjogZiwgczogZyB9ID0gbCwKICAgICAgICAgICAgICAgICAgICBiID0gUihuKSwKICAgICAgICAgICAgICAgICAgICB5ID0gcChnKSwKICAgICAgICAgICAgICAgICAgICBBID0gaChiICogeSksCiAgICAgICAgICAgICAgICAgICAgdiA9IGgoZiAqIHkpLAogICAgICAgICAgICAgICAgICAgIEUgPSBtLkJBU0UubXVsdGlwbHlBbmRBZGRVbnNhZmUoZCwgQSwgdik_LnRvQWZmaW5lKCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiAhIUUgJiYgaChFLngpID09PSBmOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIFByb2plY3RpdmVQb2ludDogbSwKICAgICAgICAgICAgICAgIFNpZ25hdHVyZTogVCwKICAgICAgICAgICAgICAgIHV0aWxzOiBQCiAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5TV1VGcFNxcnRSYXRpbyA9IHApLAogICAgICAgICAgKHQubWFwVG9DdXJ2ZVNpbXBsZVNXVSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGlmICgobi52YWxpZGF0ZUZpZWxkKGUpLCAhZS5pc1ZhbGlkKHQuQSkgfHwgIWUuaXNWYWxpZCh0LkIpIHx8ICFlLmlzVmFsaWQodC5aKSkpCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXBUb0N1cnZlU2ltcGxlU1dVOiBpbnZhbGlkIG9wdHMnKTsKICAgICAgICAgICAgY29uc3QgciA9IHAoZSwgdC5aKTsKICAgICAgICAgICAgaWYgKCFlLmlzT2RkKSB0aHJvdyBuZXcgRXJyb3IoJ0ZwLmlzT2RkIGlzIG5vdCBpbXBsZW1lbnRlZCEnKTsKICAgICAgICAgICAgcmV0dXJuIChuKSA9PiB7CiAgICAgICAgICAgICAgbGV0IHMsIG8sIGksIGEsIGMsIHUsIGwsIGQ7CiAgICAgICAgICAgICAgKHMgPSBlLnNxcihuKSksCiAgICAgICAgICAgICAgICAocyA9IGUubXVsKHMsIHQuWikpLAogICAgICAgICAgICAgICAgKG8gPSBlLnNxcihzKSksCiAgICAgICAgICAgICAgICAobyA9IGUuYWRkKG8sIHMpKSwKICAgICAgICAgICAgICAgIChpID0gZS5hZGQobywgZS5PTkUpKSwKICAgICAgICAgICAgICAgIChpID0gZS5tdWwoaSwgdC5CKSksCiAgICAgICAgICAgICAgICAoYSA9IGUuY21vdih0LlosIGUubmVnKG8pLCAhZS5lcWwobywgZS5aRVJPKSkpLAogICAgICAgICAgICAgICAgKGEgPSBlLm11bChhLCB0LkEpKSwKICAgICAgICAgICAgICAgIChvID0gZS5zcXIoaSkpLAogICAgICAgICAgICAgICAgKHUgPSBlLnNxcihhKSksCiAgICAgICAgICAgICAgICAoYyA9IGUubXVsKHUsIHQuQSkpLAogICAgICAgICAgICAgICAgKG8gPSBlLmFkZChvLCBjKSksCiAgICAgICAgICAgICAgICAobyA9IGUubXVsKG8sIGkpKSwKICAgICAgICAgICAgICAgICh1ID0gZS5tdWwodSwgYSkpLAogICAgICAgICAgICAgICAgKGMgPSBlLm11bCh1LCB0LkIpKSwKICAgICAgICAgICAgICAgIChvID0gZS5hZGQobywgYykpLAogICAgICAgICAgICAgICAgKGwgPSBlLm11bChzLCBpKSk7CiAgICAgICAgICAgICAgY29uc3QgeyBpc1ZhbGlkOiBmLCB2YWx1ZTogaCB9ID0gcihvLCB1KTsKICAgICAgICAgICAgICAoZCA9IGUubXVsKHMsIG4pKSwgKGQgPSBlLm11bChkLCBoKSksIChsID0gZS5jbW92KGwsIGksIGYpKSwgKGQgPSBlLmNtb3YoZCwgaCwgZikpOwogICAgICAgICAgICAgIGNvbnN0IGcgPSBlLmlzT2RkKG4pID09PSBlLmlzT2RkKGQpOwogICAgICAgICAgICAgIHJldHVybiAoZCA9IGUuY21vdihlLm5lZyhkKSwgZCwgZykpLCAobCA9IGUuZGl2KGwsIGEpKSwgeyB4OiBsLCB5OiBkIH07CiAgICAgICAgICAgIH07CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgMzM4NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LmVuY29kZVRvQ3VydmUgPSB0Lmhhc2hUb0N1cnZlID0gdC5zY2hub3JyID0gdC5zZWNwMjU2azEgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDYyMDgpLAogICAgICAgICAgcyA9IHIoODA2NCksCiAgICAgICAgICBvID0gcigzNDg0KSwKICAgICAgICAgIGkgPSByKDE0NCksCiAgICAgICAgICBhID0gcig1OTUyKSwKICAgICAgICAgIGMgPSByKDEwMzIpLAogICAgICAgICAgdSA9IHIoNzEyKSwKICAgICAgICAgIGwgPSBCaWdJbnQoJzB4ZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZmMyZicpLAogICAgICAgICAgZCA9IEJpZ0ludCgnMHhmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWJhYWVkY2U2YWY0OGEwM2JiZmQyNWU4Y2QwMzY0MTQxJyksCiAgICAgICAgICBmID0gQmlnSW50KDEpLAogICAgICAgICAgaCA9IEJpZ0ludCgyKSwKICAgICAgICAgIGcgPSAoZSwgdCkgPT4gKGUgKyB0IC8gaCkgLyB0OwogICAgICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgICAgY29uc3QgdCA9IGwsCiAgICAgICAgICAgIHIgPSBCaWdJbnQoMyksCiAgICAgICAgICAgIG4gPSBCaWdJbnQoNiksCiAgICAgICAgICAgIHMgPSBCaWdJbnQoMTEpLAogICAgICAgICAgICBpID0gQmlnSW50KDIyKSwKICAgICAgICAgICAgYSA9IEJpZ0ludCgyMyksCiAgICAgICAgICAgIGMgPSBCaWdJbnQoNDQpLAogICAgICAgICAgICB1ID0gQmlnSW50KDg4KSwKICAgICAgICAgICAgZCA9IChlICogZSAqIGUpICUgdCwKICAgICAgICAgICAgZiA9IChkICogZCAqIGUpICUgdCwKICAgICAgICAgICAgZyA9ICgoMCwgby5wb3cyKShmLCByLCB0KSAqIGYpICUgdCwKICAgICAgICAgICAgcCA9ICgoMCwgby5wb3cyKShnLCByLCB0KSAqIGYpICUgdCwKICAgICAgICAgICAgYiA9ICgoMCwgby5wb3cyKShwLCBoLCB0KSAqIGQpICUgdCwKICAgICAgICAgICAgeSA9ICgoMCwgby5wb3cyKShiLCBzLCB0KSAqIGIpICUgdCwKICAgICAgICAgICAgQSA9ICgoMCwgby5wb3cyKSh5LCBpLCB0KSAqIHkpICUgdCwKICAgICAgICAgICAgdiA9ICgoMCwgby5wb3cyKShBLCBjLCB0KSAqIEEpICUgdCwKICAgICAgICAgICAgRSA9ICgoMCwgby5wb3cyKSh2LCB1LCB0KSAqIHYpICUgdCwKICAgICAgICAgICAgdyA9ICgoMCwgby5wb3cyKShFLCBjLCB0KSAqIEEpICUgdCwKICAgICAgICAgICAgVCA9ICgoMCwgby5wb3cyKSh3LCByLCB0KSAqIGYpICUgdCwKICAgICAgICAgICAgUCA9ICgoMCwgby5wb3cyKShULCBhLCB0KSAqIHkpICUgdCwKICAgICAgICAgICAgUyA9ICgoMCwgby5wb3cyKShQLCBuLCB0KSAqIGQpICUgdCwKICAgICAgICAgICAgTyA9ICgwLCBvLnBvdzIpKFMsIGgsIHQpOwogICAgICAgICAgaWYgKCFtLmVxbChtLnNxcihPKSwgZSkpIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgc3F1YXJlIHJvb3QnKTsKICAgICAgICAgIHJldHVybiBPOwogICAgICAgIH0KICAgICAgICBjb25zdCBtID0gKDAsIG8uRmllbGQpKGwsIHZvaWQgMCwgdm9pZCAwLCB7IHNxcnQ6IHAgfSk7CiAgICAgICAgdC5zZWNwMjU2azEgPSAoMCwgdS5jcmVhdGVDdXJ2ZSkoCiAgICAgICAgICB7CiAgICAgICAgICAgIGE6IEJpZ0ludCgwKSwKICAgICAgICAgICAgYjogQmlnSW50KDcpLAogICAgICAgICAgICBGcDogbSwKICAgICAgICAgICAgbjogZCwKICAgICAgICAgICAgR3g6IEJpZ0ludCgnNTUwNjYyNjMwMjIyNzczNDM2Njk1Nzg3MTg4OTUxNjg1MzQzMjYyNTA2MDM0NTM3Nzc1OTQxNzU1MDAxODczNjAzODkxMTY3MjkyNDAnKSwKICAgICAgICAgICAgR3k6IEJpZ0ludCgnMzI2NzA1MTAwMjA3NTg4MTY5NzgwODMwODUxMzA1MDcwNDMxODQ0NzEyNzMzODA2NTkyNDMyNzU5Mzg5MDQzMzU3NTczMzc0ODI0MjQnKSwKICAgICAgICAgICAgaDogQmlnSW50KDEpLAogICAgICAgICAgICBsb3dTOiAhMCwKICAgICAgICAgICAgZW5kbzogewogICAgICAgICAgICAgIGJldGE6IEJpZ0ludCgnMHg3YWU5NmEyYjY1N2MwNzEwNmU2NDQ3OWVhYzM0MzRlOTljZjA0OTc1MTJmNTg5OTVjMTM5NmMyODcxOTUwMWVlJyksCiAgICAgICAgICAgICAgc3BsaXRTY2FsYXI6IChlKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZCwKICAgICAgICAgICAgICAgICAgciA9IEJpZ0ludCgnMHgzMDg2ZDIyMWE3ZDQ2YmNkZTg2YzkwZTQ5Mjg0ZWIxNScpLAogICAgICAgICAgICAgICAgICBuID0gLWYgKiBCaWdJbnQoJzB4ZTQ0MzdlZDYwMTBlODgyODZmNTQ3ZmE5MGFiZmU0YzMnKSwKICAgICAgICAgICAgICAgICAgcyA9IEJpZ0ludCgnMHgxMTRjYTUwZjdhOGUyZjNmNjU3YzExMDhkOWQ0NGNmZDgnKSwKICAgICAgICAgICAgICAgICAgaSA9IHIsCiAgICAgICAgICAgICAgICAgIGEgPSBCaWdJbnQoJzB4MTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJyksCiAgICAgICAgICAgICAgICAgIGMgPSBnKGkgKiBlLCB0KSwKICAgICAgICAgICAgICAgICAgdSA9IGcoLW4gKiBlLCB0KTsKICAgICAgICAgICAgICAgIGxldCBsID0gKDAsIG8ubW9kKShlIC0gYyAqIHIgLSB1ICogcywgdCksCiAgICAgICAgICAgICAgICAgIGggPSAoMCwgby5tb2QpKC1jICogbiAtIHUgKiBpLCB0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBsID4gYSwKICAgICAgICAgICAgICAgICAgbSA9IGggPiBhOwogICAgICAgICAgICAgICAgaWYgKChwICYmIChsID0gdCAtIGwpLCBtICYmIChoID0gdCAtIGgpLCBsID4gYSB8fCBoID4gYSkpCiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3BsaXRTY2FsYXI6IEVuZG9tb3JwaGlzbSBmYWlsZWQsIGs9JyArIGUpOwogICAgICAgICAgICAgICAgcmV0dXJuIHsgazFuZWc6IHAsIGsxOiBsLCBrMm5lZzogbSwgazI6IGggfTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBuLnNoYTI1NgogICAgICAgICk7CiAgICAgICAgY29uc3QgYiA9IEJpZ0ludCgwKSwKICAgICAgICAgIHkgPSAoZSkgPT4gJ2JpZ2ludCcgPT0gdHlwZW9mIGUgJiYgYiA8IGUgJiYgZSA8IGwsCiAgICAgICAgICBBID0gKGUpID0-ICdiaWdpbnQnID09IHR5cGVvZiBlICYmIGIgPCBlICYmIGUgPCBkLAogICAgICAgICAgdiA9IHt9OwogICAgICAgIGZ1bmN0aW9uIEUoZSwgLi4udCkgewogICAgICAgICAgbGV0IHIgPSB2W2VdOwogICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikgewogICAgICAgICAgICBjb25zdCB0ID0gKDAsIG4uc2hhMjU2KShVaW50OEFycmF5LmZyb20oZSwgKGUpID0-IGUuY2hhckNvZGVBdCgwKSkpOwogICAgICAgICAgICAociA9ICgwLCBhLmNvbmNhdEJ5dGVzKSh0LCB0KSksICh2W2VdID0gcik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gKDAsIG4uc2hhMjU2KSgoMCwgYS5jb25jYXRCeXRlcykociwgLi4udCkpOwogICAgICAgIH0KICAgICAgICBjb25zdCB3ID0gKGUpID0-IGUudG9SYXdCeXRlcyghMCkuc2xpY2UoMSksCiAgICAgICAgICBUID0gKGUpID0-ICgwLCBhLm51bWJlclRvQnl0ZXNCRSkoZSwgMzIpLAogICAgICAgICAgUCA9IChlKSA9PiAoMCwgby5tb2QpKGUsIGwpLAogICAgICAgICAgUyA9IChlKSA9PiAoMCwgby5tb2QpKGUsIGQpLAogICAgICAgICAgTyA9IHQuc2VjcDI1NmsxLlByb2plY3RpdmVQb2ludCwKICAgICAgICAgIFIgPSAoZSwgdCwgcikgPT4gTy5CQVNFLm11bHRpcGx5QW5kQWRkVW5zYWZlKGUsIHQsIHIpOwogICAgICAgIGZ1bmN0aW9uIE4oZSkgewogICAgICAgICAgbGV0IHIgPSB0LnNlY3AyNTZrMS51dGlscy5ub3JtUHJpdmF0ZUtleVRvU2NhbGFyKGUpLAogICAgICAgICAgICBuID0gTy5mcm9tUHJpdmF0ZUtleShyKTsKICAgICAgICAgIHJldHVybiB7IHNjYWxhcjogbi5oYXNFdmVuWSgpID8gciA6IFMoLXIpLCBieXRlczogdyhuKSB9OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBMKGUpIHsKICAgICAgICAgIGlmICgheShlKSkgdGhyb3cgbmV3IEVycm9yKCdiYWQgeDogbmVlZCAwIDwgeCA8IHAnKTsKICAgICAgICAgIGNvbnN0IHQgPSBQKGUgKiBlKTsKICAgICAgICAgIGxldCByID0gcChQKHQgKiBlICsgQmlnSW50KDcpKSk7CiAgICAgICAgICByICUgaCAhPT0gYiAmJiAociA9IFAoLXIpKTsKICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTyhlLCByLCBmKTsKICAgICAgICAgIHJldHVybiBuLmFzc2VydFZhbGlkaXR5KCksIG47CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEIoLi4uZSkgewogICAgICAgICAgcmV0dXJuIFMoKDAsIGEuYnl0ZXNUb051bWJlckJFKShFKCdCSVAwMzQwL2NoYWxsZW5nZScsIC4uLmUpKSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEMoZSwgdCwgcikgewogICAgICAgICAgY29uc3QgbiA9ICgwLCBhLmVuc3VyZUJ5dGVzKSgnc2lnbmF0dXJlJywgZSwgNjQpLAogICAgICAgICAgICBzID0gKDAsIGEuZW5zdXJlQnl0ZXMpKCdtZXNzYWdlJywgdCksCiAgICAgICAgICAgIG8gPSAoMCwgYS5lbnN1cmVCeXRlcykoJ3B1YmxpY0tleScsIHIsIDMyKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBMKCgwLCBhLmJ5dGVzVG9OdW1iZXJCRSkobykpLAogICAgICAgICAgICAgIHQgPSAoMCwgYS5ieXRlc1RvTnVtYmVyQkUpKG4uc3ViYXJyYXkoMCwgMzIpKTsKICAgICAgICAgICAgaWYgKCF5KHQpKSByZXR1cm4gITE7CiAgICAgICAgICAgIGNvbnN0IHIgPSAoMCwgYS5ieXRlc1RvTnVtYmVyQkUpKG4uc3ViYXJyYXkoMzIsIDY0KSk7CiAgICAgICAgICAgIGlmICghQShyKSkgcmV0dXJuICExOwogICAgICAgICAgICBjb25zdCBpID0gQihUKHQpLCB3KGUpLCBzKSwKICAgICAgICAgICAgICBjID0gUihlLCByLCBTKC1pKSk7CiAgICAgICAgICAgIHJldHVybiAhKCFjIHx8ICFjLmhhc0V2ZW5ZKCkgfHwgYy50b0FmZmluZSgpLnggIT09IHQpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuc2Nobm9yciA9IHsKICAgICAgICAgIGdldFB1YmxpY0tleTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE4oZSkuYnl0ZXM7CiAgICAgICAgICB9LAogICAgICAgICAgc2lnbjogZnVuY3Rpb24gKGUsIHQsIHIgPSAoMCwgcy5yYW5kb21CeXRlcykoMzIpKSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSAoMCwgYS5lbnN1cmVCeXRlcykoJ21lc3NhZ2UnLCBlKSwKICAgICAgICAgICAgICB7IGJ5dGVzOiBvLCBzY2FsYXI6IGkgfSA9IE4odCksCiAgICAgICAgICAgICAgYyA9ICgwLCBhLmVuc3VyZUJ5dGVzKSgnYXV4UmFuZCcsIHIsIDMyKSwKICAgICAgICAgICAgICB1ID0gVChpIF4gKDAsIGEuYnl0ZXNUb051bWJlckJFKShFKCdCSVAwMzQwL2F1eCcsIGMpKSksCiAgICAgICAgICAgICAgbCA9IEUoJ0JJUDAzNDAvbm9uY2UnLCB1LCBvLCBuKSwKICAgICAgICAgICAgICBkID0gUygoMCwgYS5ieXRlc1RvTnVtYmVyQkUpKGwpKTsKICAgICAgICAgICAgaWYgKGQgPT09IGIpIHRocm93IG5ldyBFcnJvcignc2lnbiBmYWlsZWQ6IGsgaXMgemVybycpOwogICAgICAgICAgICBjb25zdCB7IGJ5dGVzOiBmLCBzY2FsYXI6IGggfSA9IE4oZCksCiAgICAgICAgICAgICAgZyA9IEIoZiwgbywgbiksCiAgICAgICAgICAgICAgcCA9IG5ldyBVaW50OEFycmF5KDY0KTsKICAgICAgICAgICAgaWYgKChwLnNldChmLCAwKSwgcC5zZXQoVChTKGggKyBnICogaSkpLCAzMiksICFDKHAsIG4sIG8pKSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NpZ246IEludmFsaWQgc2lnbmF0dXJlIHByb2R1Y2VkJyk7CiAgICAgICAgICAgIHJldHVybiBwOwogICAgICAgICAgfSwKICAgICAgICAgIHZlcmlmeTogQywKICAgICAgICAgIHV0aWxzOiB7CiAgICAgICAgICAgIHJhbmRvbVByaXZhdGVLZXk6IHQuc2VjcDI1NmsxLnV0aWxzLnJhbmRvbVByaXZhdGVLZXksCiAgICAgICAgICAgIGxpZnRfeDogTCwKICAgICAgICAgICAgcG9pbnRUb0J5dGVzOiB3LAogICAgICAgICAgICBudW1iZXJUb0J5dGVzQkU6IGEubnVtYmVyVG9CeXRlc0JFLAogICAgICAgICAgICBieXRlc1RvTnVtYmVyQkU6IGEuYnl0ZXNUb051bWJlckJFLAogICAgICAgICAgICB0YWdnZWRIYXNoOiBFLAogICAgICAgICAgICBtb2Q6IG8ubW9kCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBjb25zdCBrID0gKCgpID0-CiAgICAgICAgICAgICgwLCBjLmlzb2dlbnlNYXApKAogICAgICAgICAgICAgIG0sCiAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAnMHg4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZTM4ZGFhYWFhOGM3JywKICAgICAgICAgICAgICAgICAgJzB4N2QzZDRjODBiYzMyMWQ1YjlmMzE1Y2VhN2ZkNDRjNWQ1OTVkMmZjMGJmNjNiOTJkZmZmMTA0NGYxN2M2NTgxJywKICAgICAgICAgICAgICAgICAgJzB4NTM0YzMyOGQyM2YyMzRlNmUyYTQxM2RlY2EyNWNhZWNlNDUwNjE0NDAzN2M0MDMxNGVjYmQwYjUzZDlkZDI2MicsCiAgICAgICAgICAgICAgICAgICcweDhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhlMzhkYWFhYWE4OGMnCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAnMHhkMzU3NzExOTNkOTQ5MThhOWNhMzRjY2JiN2I2NDBkZDg2Y2Q0MDk1NDJmODQ4N2Q5ZmU2Yjc0NTc4MWViNDliJywKICAgICAgICAgICAgICAgICAgJzB4ZWRhZGM2ZjY0MzgzZGMxZGY3YzRiMmQ1MWI1NDIyNTQwNmQzNmI2NDFmNWU0MWJiYzUyYTU2NjEyYThjNmQxNCcsCiAgICAgICAgICAgICAgICAgICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEnCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAnMHg0YmRhMTJmNjg0YmRhMTJmNjg0YmRhMTJmNjg0YmRhMTJmNjg0YmRhMTJmNjg0YmRhMTJmNjg0YjhlMzhlMjNjJywKICAgICAgICAgICAgICAgICAgJzB4Yzc1ZTBjMzJkNWNiN2MwZmE5ZDBhNTRiMTJhMGE2ZDU2NDdhYjA0NmQ2ODZkYTZmZGZmYzkwZmMyMDFkNzFhMycsCiAgICAgICAgICAgICAgICAgICcweDI5YTYxOTQ2OTFmOTFhNzM3MTUyMDllZjY1MTJlNTc2NzIyODMwYTIwMWJlMjAxOGE3NjVlODVhOWVjZWU5MzEnLAogICAgICAgICAgICAgICAgICAnMHgyZjY4NGJkYTEyZjY4NGJkYTEyZjY4NGJkYTEyZjY4NGJkYTEyZjY4NGJkYTEyZjY4NGJkYTEyZjM4ZTM4ZDg0JwogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICAgJzB4ZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmVmZmZmZjkzYicsCiAgICAgICAgICAgICAgICAgICcweDdhMDY1MzRiYjhiZGI0OWZkNWU5ZTY2MzI3MjJjMjk4OTQ2N2MxYmZjOGU4ZDk3OGRmYjQyNWQyNjg1YzI1NzMnLAogICAgICAgICAgICAgICAgICAnMHg2NDg0YWE3MTY1NDVjYTJjZjNhNzBjM2ZhOGZlMzM3ZTBhM2QyMTE2MmYwZDYyOTlhN2JmODE5MmJmZDJhNzZmJywKICAgICAgICAgICAgICAgICAgJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMScKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICBdLm1hcCgoZSkgPT4gZS5tYXAoKGUpID0-IEJpZ0ludChlKSkpCiAgICAgICAgICAgICkpKCksCiAgICAgICAgICBJID0gKCgpID0-CiAgICAgICAgICAgICgwLCBpLm1hcFRvQ3VydmVTaW1wbGVTV1UpKG0sIHsKICAgICAgICAgICAgICBBOiBCaWdJbnQoJzB4M2Y4NzMxYWJkZDY2MWFkY2EwOGE1NTU4ZjBmNWQyNzJlOTUzZDM2M2NiNmYwZTVkNDA1NDQ3YzAxYTQ0NDUzMycpLAogICAgICAgICAgICAgIEI6IEJpZ0ludCgnMTc3MScpLAogICAgICAgICAgICAgIFo6IG0uY3JlYXRlKEJpZ0ludCgnLTExJykpCiAgICAgICAgICAgIH0pKSgpLAogICAgICAgICAgRiA9ICgoKSA9PgogICAgICAgICAgICAoMCwgYy5jcmVhdGVIYXNoZXIpKAogICAgICAgICAgICAgIHQuc2VjcDI1NmsxLlByb2plY3RpdmVQb2ludCwKICAgICAgICAgICAgICAoZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgeyB4OiB0LCB5OiByIH0gPSBJKG0uY3JlYXRlKGVbMF0pKTsKICAgICAgICAgICAgICAgIHJldHVybiBrKHQsIHIpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRFNUOiAnc2VjcDI1NmsxX1hNRDpTSEEtMjU2X1NTV1VfUk9fJywKICAgICAgICAgICAgICAgIGVuY29kZURTVDogJ3NlY3AyNTZrMV9YTUQ6U0hBLTI1Nl9TU1dVX05VXycsCiAgICAgICAgICAgICAgICBwOiBtLk9SREVSLAogICAgICAgICAgICAgICAgbTogMSwKICAgICAgICAgICAgICAgIGs6IDEyOCwKICAgICAgICAgICAgICAgIGV4cGFuZDogJ3htZCcsCiAgICAgICAgICAgICAgICBoYXNoOiBuLnNoYTI1NgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSkoKTsKICAgICAgICAodC5oYXNoVG9DdXJ2ZSA9IEYuaGFzaFRvQ3VydmUpLCAodC5lbmNvZGVUb0N1cnZlID0gRi5lbmNvZGVUb0N1cnZlKTsKICAgICAgfSwKICAgICAgNjg5MjogKGUsIHQpID0-IHsKICAgICAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgICAgIGlmICghTnVtYmVyLmlzU2FmZUludGVnZXIoZSkgfHwgZSA8IDApIHRocm93IG5ldyBFcnJvcihgV3JvbmcgcG9zaXRpdmUgaW50ZWdlcjogJHtlfWApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgICAgIGlmICgnYm9vbGVhbicgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYm9vbGVhbiwgbm90ICR7ZX1gKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gcyhlLCAuLi50KSB7CiAgICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgVWludDhBcnJheScpOwogICAgICAgICAgaWYgKHQubGVuZ3RoID4gMCAmJiAhdC5pbmNsdWRlcyhlLmxlbmd0aCkpCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgVWludDhBcnJheSBvZiBsZW5ndGggJHt0fSwgbm90IG9mIGxlbmd0aD0ke2UubGVuZ3RofWApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgICAgIGlmICgnZnVuY3Rpb24nICE9IHR5cGVvZiBlIHx8ICdmdW5jdGlvbicgIT0gdHlwZW9mIGUuY3JlYXRlKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0hhc2ggc2hvdWxkIGJlIHdyYXBwZWQgYnkgdXRpbHMud3JhcENvbnN0cnVjdG9yJyk7CiAgICAgICAgICByKGUub3V0cHV0TGVuKSwgcihlLmJsb2NrTGVuKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaShlLCB0ID0gITApIHsKICAgICAgICAgIGlmIChlLmRlc3Ryb3llZCkgdGhyb3cgbmV3IEVycm9yKCdIYXNoIGluc3RhbmNlIGhhcyBiZWVuIGRlc3Ryb3llZCcpOwogICAgICAgICAgaWYgKHQgJiYgZS5maW5pc2hlZCkgdGhyb3cgbmV3IEVycm9yKCdIYXNoI2RpZ2VzdCgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkJyk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICAgICAgcyhlKTsKICAgICAgICAgIGNvbnN0IHIgPSB0Lm91dHB1dExlbjsKICAgICAgICAgIGlmIChlLmxlbmd0aCA8IHIpIHRocm93IG5ldyBFcnJvcihgZGlnZXN0SW50bygpIGV4cGVjdHMgb3V0cHV0IGJ1ZmZlciBvZiBsZW5ndGggYXQgbGVhc3QgJHtyfWApOwogICAgICAgIH0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0Lm91dHB1dCA9IHQuZXhpc3RzID0gdC5oYXNoID0gdC5ieXRlcyA9IHQuYm9vbCA9IHQubnVtYmVyID0gdm9pZCAwKSwKICAgICAgICAgICh0Lm51bWJlciA9IHIpLAogICAgICAgICAgKHQuYm9vbCA9IG4pLAogICAgICAgICAgKHQuYnl0ZXMgPSBzKSwKICAgICAgICAgICh0Lmhhc2ggPSBvKSwKICAgICAgICAgICh0LmV4aXN0cyA9IGkpLAogICAgICAgICAgKHQub3V0cHV0ID0gYSk7CiAgICAgICAgY29uc3QgYyA9IHsgbnVtYmVyOiByLCBib29sOiBuLCBieXRlczogcywgaGFzaDogbywgZXhpc3RzOiBpLCBvdXRwdXQ6IGEgfTsKICAgICAgICB0LmRlZmF1bHQgPSBjOwogICAgICB9LAogICAgICAzOTM2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5TSEEyID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig2ODkyKSwKICAgICAgICAgIHMgPSByKDgwNjQpOwogICAgICAgIGNsYXNzIG8gZXh0ZW5kcyBzLkhhc2ggewogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgciwgbikgewogICAgICAgICAgICBzdXBlcigpLAogICAgICAgICAgICAgICh0aGlzLmJsb2NrTGVuID0gZSksCiAgICAgICAgICAgICAgKHRoaXMub3V0cHV0TGVuID0gdCksCiAgICAgICAgICAgICAgKHRoaXMucGFkT2Zmc2V0ID0gciksCiAgICAgICAgICAgICAgKHRoaXMuaXNMRSA9IG4pLAogICAgICAgICAgICAgICh0aGlzLmZpbmlzaGVkID0gITEpLAogICAgICAgICAgICAgICh0aGlzLmxlbmd0aCA9IDApLAogICAgICAgICAgICAgICh0aGlzLnBvcyA9IDApLAogICAgICAgICAgICAgICh0aGlzLmRlc3Ryb3llZCA9ICExKSwKICAgICAgICAgICAgICAodGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheShlKSksCiAgICAgICAgICAgICAgKHRoaXMudmlldyA9ICgwLCBzLmNyZWF0ZVZpZXcpKHRoaXMuYnVmZmVyKSk7CiAgICAgICAgICB9CiAgICAgICAgICB1cGRhdGUoZSkgewogICAgICAgICAgICAoMCwgbi5leGlzdHMpKHRoaXMpOwogICAgICAgICAgICBjb25zdCB7IHZpZXc6IHQsIGJ1ZmZlcjogciwgYmxvY2tMZW46IG8gfSA9IHRoaXMsCiAgICAgICAgICAgICAgaSA9IChlID0gKDAsIHMudG9CeXRlcykoZSkpLmxlbmd0aDsKICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBpOyApIHsKICAgICAgICAgICAgICBjb25zdCBhID0gTWF0aC5taW4obyAtIHRoaXMucG9zLCBpIC0gbik7CiAgICAgICAgICAgICAgaWYgKGEgIT09IG8pCiAgICAgICAgICAgICAgICByLnNldChlLnN1YmFycmF5KG4sIG4gKyBhKSwgdGhpcy5wb3MpLAogICAgICAgICAgICAgICAgICAodGhpcy5wb3MgKz0gYSksCiAgICAgICAgICAgICAgICAgIChuICs9IGEpLAogICAgICAgICAgICAgICAgICB0aGlzLnBvcyA9PT0gbyAmJiAodGhpcy5wcm9jZXNzKHQsIDApLCAodGhpcy5wb3MgPSAwKSk7CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gKDAsIHMuY3JlYXRlVmlldykoZSk7CiAgICAgICAgICAgICAgICBmb3IgKDsgbyA8PSBpIC0gbjsgbiArPSBvKSB0aGlzLnByb2Nlc3ModCwgbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAodGhpcy5sZW5ndGggKz0gZS5sZW5ndGgpLCB0aGlzLnJvdW5kQ2xlYW4oKSwgdGhpczsKICAgICAgICAgIH0KICAgICAgICAgIGRpZ2VzdEludG8oZSkgewogICAgICAgICAgICAoMCwgbi5leGlzdHMpKHRoaXMpLCAoMCwgbi5vdXRwdXQpKGUsIHRoaXMpLCAodGhpcy5maW5pc2hlZCA9ICEwKTsKICAgICAgICAgICAgY29uc3QgeyBidWZmZXI6IHQsIHZpZXc6IHIsIGJsb2NrTGVuOiBvLCBpc0xFOiBpIH0gPSB0aGlzOwogICAgICAgICAgICBsZXQgeyBwb3M6IGEgfSA9IHRoaXM7CiAgICAgICAgICAgICh0W2ErK10gPSAxMjgpLCB0aGlzLmJ1ZmZlci5zdWJhcnJheShhKS5maWxsKDApLCB0aGlzLnBhZE9mZnNldCA-IG8gLSBhICYmICh0aGlzLnByb2Nlc3MociwgMCksIChhID0gMCkpOwogICAgICAgICAgICBmb3IgKGxldCBlID0gYTsgZSA8IG87IGUrKykgdFtlXSA9IDA7CiAgICAgICAgICAgICEoZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZS5zZXRCaWdVaW50NjQpIHJldHVybiBlLnNldEJpZ1VpbnQ2NCh0LCByLCBuKTsKICAgICAgICAgICAgICBjb25zdCBzID0gQmlnSW50KDMyKSwKICAgICAgICAgICAgICAgIG8gPSBCaWdJbnQoNDI5NDk2NzI5NSksCiAgICAgICAgICAgICAgICBpID0gTnVtYmVyKChyID4-IHMpICYgbyksCiAgICAgICAgICAgICAgICBhID0gTnVtYmVyKHIgJiBvKSwKICAgICAgICAgICAgICAgIGMgPSBuID8gNCA6IDAsCiAgICAgICAgICAgICAgICB1ID0gbiA_IDAgOiA0OwogICAgICAgICAgICAgIGUuc2V0VWludDMyKHQgKyBjLCBpLCBuKSwgZS5zZXRVaW50MzIodCArIHUsIGEsIG4pOwogICAgICAgICAgICB9KShyLCBvIC0gOCwgQmlnSW50KDggKiB0aGlzLmxlbmd0aCksIGkpLAogICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhyLCAwKTsKICAgICAgICAgICAgY29uc3QgYyA9ICgwLCBzLmNyZWF0ZVZpZXcpKGUpLAogICAgICAgICAgICAgIHUgPSB0aGlzLm91dHB1dExlbjsKICAgICAgICAgICAgaWYgKHUgJSA0KSB0aHJvdyBuZXcgRXJyb3IoJ19zaGEyOiBvdXRwdXRMZW4gc2hvdWxkIGJlIGFsaWduZWQgdG8gMzJiaXQnKTsKICAgICAgICAgICAgY29uc3QgbCA9IHUgLyA0LAogICAgICAgICAgICAgIGQgPSB0aGlzLmdldCgpOwogICAgICAgICAgICBpZiAobCA-IGQubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ19zaGEyOiBvdXRwdXRMZW4gYmlnZ2VyIHRoYW4gc3RhdGUnKTsKICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBsOyBlKyspIGMuc2V0VWludDMyKDQgKiBlLCBkW2VdLCBpKTsKICAgICAgICAgIH0KICAgICAgICAgIGRpZ2VzdCgpIHsKICAgICAgICAgICAgY29uc3QgeyBidWZmZXI6IGUsIG91dHB1dExlbjogdCB9ID0gdGhpczsKICAgICAgICAgICAgdGhpcy5kaWdlc3RJbnRvKGUpOwogICAgICAgICAgICBjb25zdCByID0gZS5zbGljZSgwLCB0KTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveSgpLCByOwogICAgICAgICAgfQogICAgICAgICAgX2Nsb25lSW50byhlKSB7CiAgICAgICAgICAgIGUgfHwgKGUgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpKSwgZS5zZXQoLi4udGhpcy5nZXQoKSk7CiAgICAgICAgICAgIGNvbnN0IHsgYmxvY2tMZW46IHQsIGJ1ZmZlcjogciwgbGVuZ3RoOiBuLCBmaW5pc2hlZDogcywgZGVzdHJveWVkOiBvLCBwb3M6IGkgfSA9IHRoaXM7CiAgICAgICAgICAgIHJldHVybiAoZS5sZW5ndGggPSBuKSwgKGUucG9zID0gaSksIChlLmZpbmlzaGVkID0gcyksIChlLmRlc3Ryb3llZCA9IG8pLCBuICUgdCAmJiBlLmJ1ZmZlci5zZXQociksIGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuU0hBMiA9IG87CiAgICAgIH0sCiAgICAgIDE1MzY6IChlLCB0KSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5hZGQ1TCA9CiAgICAgICAgICAgIHQuYWRkNUggPQogICAgICAgICAgICB0LmFkZDRIID0KICAgICAgICAgICAgdC5hZGQ0TCA9CiAgICAgICAgICAgIHQuYWRkM0ggPQogICAgICAgICAgICB0LmFkZDNMID0KICAgICAgICAgICAgdC5hZGQgPQogICAgICAgICAgICB0LnJvdGxCTCA9CiAgICAgICAgICAgIHQucm90bEJIID0KICAgICAgICAgICAgdC5yb3RsU0wgPQogICAgICAgICAgICB0LnJvdGxTSCA9CiAgICAgICAgICAgIHQucm90cjMyTCA9CiAgICAgICAgICAgIHQucm90cjMySCA9CiAgICAgICAgICAgIHQucm90ckJMID0KICAgICAgICAgICAgdC5yb3RyQkggPQogICAgICAgICAgICB0LnJvdHJTTCA9CiAgICAgICAgICAgIHQucm90clNIID0KICAgICAgICAgICAgdC5zaHJTTCA9CiAgICAgICAgICAgIHQuc2hyU0ggPQogICAgICAgICAgICB0LnRvQmlnID0KICAgICAgICAgICAgdC5zcGxpdCA9CiAgICAgICAgICAgIHQuZnJvbUJpZyA9CiAgICAgICAgICAgICAgdm9pZCAwKTsKICAgICAgICBjb25zdCByID0gQmlnSW50KDIgKiogMzIgLSAxKSwKICAgICAgICAgIG4gPSBCaWdJbnQoMzIpOwogICAgICAgIGZ1bmN0aW9uIHMoZSwgdCA9ICExKSB7CiAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICA_IHsgaDogTnVtYmVyKGUgJiByKSwgbDogTnVtYmVyKChlID4-IG4pICYgcikgfQogICAgICAgICAgICA6IHsgaDogMCB8IE51bWJlcigoZSA-PiBuKSAmIHIpLCBsOiAwIHwgTnVtYmVyKGUgJiByKSB9OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBvKGUsIHQgPSAhMSkgewogICAgICAgICAgbGV0IHIgPSBuZXcgVWludDMyQXJyYXkoZS5sZW5ndGgpLAogICAgICAgICAgICBuID0gbmV3IFVpbnQzMkFycmF5KGUubGVuZ3RoKTsKICAgICAgICAgIGZvciAobGV0IG8gPSAwOyBvIDwgZS5sZW5ndGg7IG8rKykgewogICAgICAgICAgICBjb25zdCB7IGg6IGksIGw6IGEgfSA9IHMoZVtvXSwgdCk7CiAgICAgICAgICAgIFtyW29dLCBuW29dXSA9IFtpLCBhXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBbciwgbl07CiAgICAgICAgfQogICAgICAgICh0LmZyb21CaWcgPSBzKSwgKHQuc3BsaXQgPSBvKTsKICAgICAgICBjb25zdCBpID0gKGUsIHQpID0-IChCaWdJbnQoZSA-Pj4gMCkgPDwgbikgfCBCaWdJbnQodCA-Pj4gMCk7CiAgICAgICAgdC50b0JpZyA9IGk7CiAgICAgICAgY29uc3QgYSA9IChlLCB0LCByKSA9PiBlID4-PiByOwogICAgICAgIHQuc2hyU0ggPSBhOwogICAgICAgIGNvbnN0IGMgPSAoZSwgdCwgcikgPT4gKGUgPDwgKDMyIC0gcikpIHwgKHQgPj4-IHIpOwogICAgICAgIHQuc2hyU0wgPSBjOwogICAgICAgIGNvbnN0IHUgPSAoZSwgdCwgcikgPT4gKGUgPj4-IHIpIHwgKHQgPDwgKDMyIC0gcikpOwogICAgICAgIHQucm90clNIID0gdTsKICAgICAgICBjb25zdCBsID0gKGUsIHQsIHIpID0-IChlIDw8ICgzMiAtIHIpKSB8ICh0ID4-PiByKTsKICAgICAgICB0LnJvdHJTTCA9IGw7CiAgICAgICAgY29uc3QgZCA9IChlLCB0LCByKSA9PiAoZSA8PCAoNjQgLSByKSkgfCAodCA-Pj4gKHIgLSAzMikpOwogICAgICAgIHQucm90ckJIID0gZDsKICAgICAgICBjb25zdCBmID0gKGUsIHQsIHIpID0-IChlID4-PiAociAtIDMyKSkgfCAodCA8PCAoNjQgLSByKSk7CiAgICAgICAgdC5yb3RyQkwgPSBmOwogICAgICAgIGNvbnN0IGggPSAoZSwgdCkgPT4gdDsKICAgICAgICB0LnJvdHIzMkggPSBoOwogICAgICAgIGNvbnN0IGcgPSAoZSwgdCkgPT4gZTsKICAgICAgICB0LnJvdHIzMkwgPSBnOwogICAgICAgIGNvbnN0IHAgPSAoZSwgdCwgcikgPT4gKGUgPDwgcikgfCAodCA-Pj4gKDMyIC0gcikpOwogICAgICAgIHQucm90bFNIID0gcDsKICAgICAgICBjb25zdCBtID0gKGUsIHQsIHIpID0-ICh0IDw8IHIpIHwgKGUgPj4-ICgzMiAtIHIpKTsKICAgICAgICB0LnJvdGxTTCA9IG07CiAgICAgICAgY29uc3QgYiA9IChlLCB0LCByKSA9PiAodCA8PCAociAtIDMyKSkgfCAoZSA-Pj4gKDY0IC0gcikpOwogICAgICAgIHQucm90bEJIID0gYjsKICAgICAgICBjb25zdCB5ID0gKGUsIHQsIHIpID0-IChlIDw8IChyIC0gMzIpKSB8ICh0ID4-PiAoNjQgLSByKSk7CiAgICAgICAgZnVuY3Rpb24gQShlLCB0LCByLCBuKSB7CiAgICAgICAgICBjb25zdCBzID0gKHQgPj4-IDApICsgKG4gPj4-IDApOwogICAgICAgICAgcmV0dXJuIHsgaDogKGUgKyByICsgKChzIC8gMiAqKiAzMikgfCAwKSkgfCAwLCBsOiAwIHwgcyB9OwogICAgICAgIH0KICAgICAgICAodC5yb3RsQkwgPSB5KSwgKHQuYWRkID0gQSk7CiAgICAgICAgY29uc3QgdiA9IChlLCB0LCByKSA9PiAoZSA-Pj4gMCkgKyAodCA-Pj4gMCkgKyAociA-Pj4gMCk7CiAgICAgICAgdC5hZGQzTCA9IHY7CiAgICAgICAgY29uc3QgRSA9IChlLCB0LCByLCBuKSA9PiAodCArIHIgKyBuICsgKChlIC8gMiAqKiAzMikgfCAwKSkgfCAwOwogICAgICAgIHQuYWRkM0ggPSBFOwogICAgICAgIGNvbnN0IHcgPSAoZSwgdCwgciwgbikgPT4gKGUgPj4-IDApICsgKHQgPj4-IDApICsgKHIgPj4-IDApICsgKG4gPj4-IDApOwogICAgICAgIHQuYWRkNEwgPSB3OwogICAgICAgIGNvbnN0IFQgPSAoZSwgdCwgciwgbiwgcykgPT4gKHQgKyByICsgbiArIHMgKyAoKGUgLyAyICoqIDMyKSB8IDApKSB8IDA7CiAgICAgICAgdC5hZGQ0SCA9IFQ7CiAgICAgICAgY29uc3QgUCA9IChlLCB0LCByLCBuLCBzKSA9PiAoZSA-Pj4gMCkgKyAodCA-Pj4gMCkgKyAociA-Pj4gMCkgKyAobiA-Pj4gMCkgKyAocyA-Pj4gMCk7CiAgICAgICAgdC5hZGQ1TCA9IFA7CiAgICAgICAgY29uc3QgUyA9IChlLCB0LCByLCBuLCBzLCBvKSA9PiAodCArIHIgKyBuICsgcyArIG8gKyAoKGUgLyAyICoqIDMyKSB8IDApKSB8IDA7CiAgICAgICAgdC5hZGQ1SCA9IFM7CiAgICAgICAgY29uc3QgTyA9IHsKICAgICAgICAgIGZyb21CaWc6IHMsCiAgICAgICAgICBzcGxpdDogbywKICAgICAgICAgIHRvQmlnOiBpLAogICAgICAgICAgc2hyU0g6IGEsCiAgICAgICAgICBzaHJTTDogYywKICAgICAgICAgIHJvdHJTSDogdSwKICAgICAgICAgIHJvdHJTTDogbCwKICAgICAgICAgIHJvdHJCSDogZCwKICAgICAgICAgIHJvdHJCTDogZiwKICAgICAgICAgIHJvdHIzMkg6IGgsCiAgICAgICAgICByb3RyMzJMOiBnLAogICAgICAgICAgcm90bFNIOiBwLAogICAgICAgICAgcm90bFNMOiBtLAogICAgICAgICAgcm90bEJIOiBiLAogICAgICAgICAgcm90bEJMOiB5LAogICAgICAgICAgYWRkOiBBLAogICAgICAgICAgYWRkM0w6IHYsCiAgICAgICAgICBhZGQzSDogRSwKICAgICAgICAgIGFkZDRMOiB3LAogICAgICAgICAgYWRkNEg6IFQsCiAgICAgICAgICBhZGQ1SDogUywKICAgICAgICAgIGFkZDVMOiBQCiAgICAgICAgfTsKICAgICAgICB0LmRlZmF1bHQgPSBPOwogICAgICB9LAogICAgICAyMTY4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5jcnlwdG8gPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDEwNjApOwogICAgICAgIHQuY3J5cHRvID0gbiAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgbiAmJiAnd2ViY3J5cHRvJyBpbiBuID8gbi53ZWJjcnlwdG8gOiB2b2lkIDA7CiAgICAgIH0sCiAgICAgIDU0NjQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LmhtYWMgPSB0LkhNQUMgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDY4OTIpLAogICAgICAgICAgcyA9IHIoODA2NCk7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIHMuSGFzaCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIHN1cGVyKCksICh0aGlzLmZpbmlzaGVkID0gITEpLCAodGhpcy5kZXN0cm95ZWQgPSAhMSksICgwLCBuLmhhc2gpKGUpOwogICAgICAgICAgICBjb25zdCByID0gKDAsIHMudG9CeXRlcykodCk7CiAgICAgICAgICAgIGlmICgoKHRoaXMuaUhhc2ggPSBlLmNyZWF0ZSgpKSwgJ2Z1bmN0aW9uJyAhPSB0eXBlb2YgdGhpcy5pSGFzaC51cGRhdGUpKQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgaW5zdGFuY2Ugb2YgY2xhc3Mgd2hpY2ggZXh0ZW5kcyB1dGlscy5IYXNoJyk7CiAgICAgICAgICAgICh0aGlzLmJsb2NrTGVuID0gdGhpcy5pSGFzaC5ibG9ja0xlbiksICh0aGlzLm91dHB1dExlbiA9IHRoaXMuaUhhc2gub3V0cHV0TGVuKTsKICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuYmxvY2tMZW4sCiAgICAgICAgICAgICAgaSA9IG5ldyBVaW50OEFycmF5KG8pOwogICAgICAgICAgICBpLnNldChyLmxlbmd0aCA-IG8gPyBlLmNyZWF0ZSgpLnVwZGF0ZShyKS5kaWdlc3QoKSA6IHIpOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGkubGVuZ3RoOyBlKyspIGlbZV0gXj0gNTQ7CiAgICAgICAgICAgIHRoaXMuaUhhc2gudXBkYXRlKGkpLCAodGhpcy5vSGFzaCA9IGUuY3JlYXRlKCkpOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGkubGVuZ3RoOyBlKyspIGlbZV0gXj0gMTA2OwogICAgICAgICAgICB0aGlzLm9IYXNoLnVwZGF0ZShpKSwgaS5maWxsKDApOwogICAgICAgICAgfQogICAgICAgICAgdXBkYXRlKGUpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBuLmV4aXN0cykodGhpcyksIHRoaXMuaUhhc2gudXBkYXRlKGUpLCB0aGlzOwogICAgICAgICAgfQogICAgICAgICAgZGlnZXN0SW50byhlKSB7CiAgICAgICAgICAgICgwLCBuLmV4aXN0cykodGhpcyksCiAgICAgICAgICAgICAgKDAsIG4uYnl0ZXMpKGUsIHRoaXMub3V0cHV0TGVuKSwKICAgICAgICAgICAgICAodGhpcy5maW5pc2hlZCA9ICEwKSwKICAgICAgICAgICAgICB0aGlzLmlIYXNoLmRpZ2VzdEludG8oZSksCiAgICAgICAgICAgICAgdGhpcy5vSGFzaC51cGRhdGUoZSksCiAgICAgICAgICAgICAgdGhpcy5vSGFzaC5kaWdlc3RJbnRvKGUpLAogICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpOwogICAgICAgICAgfQogICAgICAgICAgZGlnZXN0KCkgewogICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5vSGFzaC5vdXRwdXRMZW4pOwogICAgICAgICAgICByZXR1cm4gdGhpcy5kaWdlc3RJbnRvKGUpLCBlOwogICAgICAgICAgfQogICAgICAgICAgX2Nsb25lSW50byhlKSB7CiAgICAgICAgICAgIGUgfHwgKGUgPSBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSwge30pKTsKICAgICAgICAgICAgY29uc3QgeyBvSGFzaDogdCwgaUhhc2g6IHIsIGZpbmlzaGVkOiBuLCBkZXN0cm95ZWQ6IHMsIGJsb2NrTGVuOiBvLCBvdXRwdXRMZW46IGkgfSA9IHRoaXM7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKGUuZmluaXNoZWQgPSBuKSwKICAgICAgICAgICAgICAoZS5kZXN0cm95ZWQgPSBzKSwKICAgICAgICAgICAgICAoZS5ibG9ja0xlbiA9IG8pLAogICAgICAgICAgICAgIChlLm91dHB1dExlbiA9IGkpLAogICAgICAgICAgICAgIChlLm9IYXNoID0gdC5fY2xvbmVJbnRvKGUub0hhc2gpKSwKICAgICAgICAgICAgICAoZS5pSGFzaCA9IHIuX2Nsb25lSW50byhlLmlIYXNoKSksCiAgICAgICAgICAgICAgZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZGVzdHJveSgpIHsKICAgICAgICAgICAgKHRoaXMuZGVzdHJveWVkID0gITApLCB0aGlzLm9IYXNoLmRlc3Ryb3koKSwgdGhpcy5pSGFzaC5kZXN0cm95KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICh0LkhNQUMgPSBvKSwgKHQuaG1hYyA9IChlLCB0LCByKSA9PiBuZXcgbyhlLCB0KS51cGRhdGUocikuZGlnZXN0KCkpLCAodC5obWFjLmNyZWF0ZSA9IChlLCB0KSA9PiBuZXcgbyhlLCB0KSk7CiAgICAgIH0sCiAgICAgIDgzNzY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LnBia2RmMkFzeW5jID0gdC5wYmtkZjIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDY4OTIpLAogICAgICAgICAgcyA9IHIoNTQ2NCksCiAgICAgICAgICBvID0gcig4MDY0KTsKICAgICAgICBmdW5jdGlvbiBpKGUsIHQsIHIsIGkpIHsKICAgICAgICAgICgwLCBuLmhhc2gpKGUpOwogICAgICAgICAgY29uc3QgYSA9ICgwLCBvLmNoZWNrT3B0cykoeyBka0xlbjogMzIsIGFzeW5jVGljazogMTAgfSwgaSksCiAgICAgICAgICAgIHsgYywgZGtMZW46IHUsIGFzeW5jVGljazogbCB9ID0gYTsKICAgICAgICAgIGlmICgoKDAsIG4ubnVtYmVyKShjKSwgKDAsIG4ubnVtYmVyKSh1KSwgKDAsIG4ubnVtYmVyKShsKSwgYyA8IDEpKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BCS0RGMjogaXRlcmF0aW9ucyAoYykgc2hvdWxkIGJlID49IDEnKTsKICAgICAgICAgIGNvbnN0IGQgPSAoMCwgby50b0J5dGVzKSh0KSwKICAgICAgICAgICAgZiA9ICgwLCBvLnRvQnl0ZXMpKHIpLAogICAgICAgICAgICBoID0gbmV3IFVpbnQ4QXJyYXkodSksCiAgICAgICAgICAgIGcgPSBzLmhtYWMuY3JlYXRlKGUsIGQpLAogICAgICAgICAgICBwID0gZy5fY2xvbmVJbnRvKCkudXBkYXRlKGYpOwogICAgICAgICAgcmV0dXJuIHsgYywgZGtMZW46IHUsIGFzeW5jVGljazogbCwgREs6IGgsIFBSRjogZywgUFJGU2FsdDogcCB9OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhKGUsIHQsIHIsIG4sIHMpIHsKICAgICAgICAgIHJldHVybiBlLmRlc3Ryb3koKSwgdC5kZXN0cm95KCksIG4gJiYgbi5kZXN0cm95KCksIHMuZmlsbCgwKSwgcjsKICAgICAgICB9CiAgICAgICAgKHQucGJrZGYyID0gZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgIGNvbnN0IHsgYzogcywgZGtMZW46IGMsIERLOiB1LCBQUkY6IGwsIFBSRlNhbHQ6IGQgfSA9IGkoZSwgdCwgciwgbik7CiAgICAgICAgICBsZXQgZjsKICAgICAgICAgIGNvbnN0IGggPSBuZXcgVWludDhBcnJheSg0KSwKICAgICAgICAgICAgZyA9ICgwLCBvLmNyZWF0ZVZpZXcpKGgpLAogICAgICAgICAgICBwID0gbmV3IFVpbnQ4QXJyYXkobC5vdXRwdXRMZW4pOwogICAgICAgICAgZm9yIChsZXQgZSA9IDEsIHQgPSAwOyB0IDwgYzsgZSsrLCB0ICs9IGwub3V0cHV0TGVuKSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSB1LnN1YmFycmF5KHQsIHQgKyBsLm91dHB1dExlbik7CiAgICAgICAgICAgIGcuc2V0SW50MzIoMCwgZSwgITEpLCAoZiA9IGQuX2Nsb25lSW50byhmKSkudXBkYXRlKGgpLmRpZ2VzdEludG8ocCksIHIuc2V0KHAuc3ViYXJyYXkoMCwgci5sZW5ndGgpKTsKICAgICAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCBzOyBlKyspIHsKICAgICAgICAgICAgICBsLl9jbG9uZUludG8oZikudXBkYXRlKHApLmRpZ2VzdEludG8ocCk7CiAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSsrKSByW2VdIF49IHBbZV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBhKGwsIGQsIHUsIGYsIHApOwogICAgICAgIH0pLAogICAgICAgICAgKHQucGJrZGYyQXN5bmMgPSBhc3luYyBmdW5jdGlvbiAoZSwgdCwgciwgbikgewogICAgICAgICAgICBjb25zdCB7IGM6IHMsIGRrTGVuOiBjLCBhc3luY1RpY2s6IHUsIERLOiBsLCBQUkY6IGQsIFBSRlNhbHQ6IGYgfSA9IGkoZSwgdCwgciwgbik7CiAgICAgICAgICAgIGxldCBoOwogICAgICAgICAgICBjb25zdCBnID0gbmV3IFVpbnQ4QXJyYXkoNCksCiAgICAgICAgICAgICAgcCA9ICgwLCBvLmNyZWF0ZVZpZXcpKGcpLAogICAgICAgICAgICAgIG0gPSBuZXcgVWludDhBcnJheShkLm91dHB1dExlbik7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAxLCB0ID0gMDsgdCA8IGM7IGUrKywgdCArPSBkLm91dHB1dExlbikgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBsLnN1YmFycmF5KHQsIHQgKyBkLm91dHB1dExlbik7CiAgICAgICAgICAgICAgcC5zZXRJbnQzMigwLCBlLCAhMSksCiAgICAgICAgICAgICAgICAoaCA9IGYuX2Nsb25lSW50byhoKSkudXBkYXRlKGcpLmRpZ2VzdEludG8obSksCiAgICAgICAgICAgICAgICByLnNldChtLnN1YmFycmF5KDAsIHIubGVuZ3RoKSksCiAgICAgICAgICAgICAgICBhd2FpdCAoMCwgby5hc3luY0xvb3ApKHMgLSAxLCB1LCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGQuX2Nsb25lSW50byhoKS51cGRhdGUobSkuZGlnZXN0SW50byhtKTsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSsrKSByW2VdIF49IG1bZV07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYShkLCBmLCBsLCBoLCBtKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICAyMDcyOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5yaXBlbWQxNjAgPSB0LlJJUEVNRDE2MCA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzkzNiksCiAgICAgICAgICBzID0gcig4MDY0KSwKICAgICAgICAgIG8gPSBuZXcgVWludDhBcnJheShbNywgNCwgMTMsIDEsIDEwLCA2LCAxNSwgMywgMTIsIDAsIDksIDUsIDIsIDE0LCAxMSwgOF0pLAogICAgICAgICAgaSA9IFVpbnQ4QXJyYXkuZnJvbSh7IGxlbmd0aDogMTYgfSwgKGUsIHQpID0-IHQpOwogICAgICAgIGxldCBhID0gW2ldLAogICAgICAgICAgYyA9IFtpLm1hcCgoZSkgPT4gKDkgKiBlICsgNSkgJSAxNildOwogICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgNDsgZSsrKSBmb3IgKGxldCB0IG9mIFthLCBjXSkgdC5wdXNoKHRbZV0ubWFwKChlKSA9PiBvW2VdKSk7CiAgICAgICAgY29uc3QgdSA9IFsKICAgICAgICAgICAgWzExLCAxNCwgMTUsIDEyLCA1LCA4LCA3LCA5LCAxMSwgMTMsIDE0LCAxNSwgNiwgNywgOSwgOF0sCiAgICAgICAgICAgIFsxMiwgMTMsIDExLCAxNSwgNiwgOSwgOSwgNywgMTIsIDE1LCAxMSwgMTMsIDcsIDgsIDcsIDddLAogICAgICAgICAgICBbMTMsIDE1LCAxNCwgMTEsIDcsIDcsIDYsIDgsIDEzLCAxNCwgMTMsIDEyLCA1LCA1LCA2LCA5XSwKICAgICAgICAgICAgWzE0LCAxMSwgMTIsIDE0LCA4LCA2LCA1LCA1LCAxNSwgMTIsIDE1LCAxNCwgOSwgOSwgOCwgNl0sCiAgICAgICAgICAgIFsxNSwgMTIsIDEzLCAxMywgOSwgNSwgOCwgNiwgMTQsIDExLCAxMiwgMTEsIDgsIDYsIDUsIDVdCiAgICAgICAgICBdLm1hcCgoZSkgPT4gbmV3IFVpbnQ4QXJyYXkoZSkpLAogICAgICAgICAgbCA9IGEubWFwKChlLCB0KSA9PiBlLm1hcCgoZSkgPT4gdVt0XVtlXSkpLAogICAgICAgICAgZCA9IGMubWFwKChlLCB0KSA9PiBlLm1hcCgoZSkgPT4gdVt0XVtlXSkpLAogICAgICAgICAgZiA9IG5ldyBVaW50MzJBcnJheShbMCwgMTUxODUwMDI0OSwgMTg1OTc3NTM5MywgMjQwMDk1OTcwOCwgMjg0MDg1MzgzOF0pLAogICAgICAgICAgaCA9IG5ldyBVaW50MzJBcnJheShbMTM1MjgyOTkyNiwgMTU0ODYwMzY4NCwgMTgzNjA3MjY5MSwgMjA1Mzk5NDIxNywgMF0pLAogICAgICAgICAgZyA9IChlLCB0KSA9PiAoZSA8PCB0KSB8IChlID4-PiAoMzIgLSB0KSk7CiAgICAgICAgZnVuY3Rpb24gcChlLCB0LCByLCBuKSB7CiAgICAgICAgICByZXR1cm4gMCA9PT0gZQogICAgICAgICAgICA_IHQgXiByIF4gbgogICAgICAgICAgICA6IDEgPT09IGUKICAgICAgICAgICAgICA_ICh0ICYgcikgfCAofnQgJiBuKQogICAgICAgICAgICAgIDogMiA9PT0gZQogICAgICAgICAgICAgICAgPyAodCB8IH5yKSBeIG4KICAgICAgICAgICAgICAgIDogMyA9PT0gZQogICAgICAgICAgICAgICAgICA_ICh0ICYgbikgfCAociAmIH5uKQogICAgICAgICAgICAgICAgICA6IHQgXiAociB8IH5uKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgbSA9IG5ldyBVaW50MzJBcnJheSgxNik7CiAgICAgICAgY2xhc3MgYiBleHRlbmRzIG4uU0hBMiB7CiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgc3VwZXIoNjQsIDIwLCA4LCAhMCksCiAgICAgICAgICAgICAgKHRoaXMuaDAgPSAxNzMyNTg0MTkzKSwKICAgICAgICAgICAgICAodGhpcy5oMSA9IC0yNzE3MzM4NzkpLAogICAgICAgICAgICAgICh0aGlzLmgyID0gLTE3MzI1ODQxOTQpLAogICAgICAgICAgICAgICh0aGlzLmgzID0gMjcxNzMzODc4KSwKICAgICAgICAgICAgICAodGhpcy5oNCA9IC0xMDA5NTg5Nzc2KTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCgpIHsKICAgICAgICAgICAgY29uc3QgeyBoMDogZSwgaDE6IHQsIGgyOiByLCBoMzogbiwgaDQ6IHMgfSA9IHRoaXM7CiAgICAgICAgICAgIHJldHVybiBbZSwgdCwgciwgbiwgc107CiAgICAgICAgICB9CiAgICAgICAgICBzZXQoZSwgdCwgciwgbiwgcykgewogICAgICAgICAgICAodGhpcy5oMCA9IDAgfCBlKSwgKHRoaXMuaDEgPSAwIHwgdCksICh0aGlzLmgyID0gMCB8IHIpLCAodGhpcy5oMyA9IDAgfCBuKSwgKHRoaXMuaDQgPSAwIHwgcyk7CiAgICAgICAgICB9CiAgICAgICAgICBwcm9jZXNzKGUsIHQpIHsKICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCAxNjsgcisrLCB0ICs9IDQpIG1bcl0gPSBlLmdldFVpbnQzMih0LCAhMCk7CiAgICAgICAgICAgIGxldCByID0gMCB8IHRoaXMuaDAsCiAgICAgICAgICAgICAgbiA9IHIsCiAgICAgICAgICAgICAgcyA9IDAgfCB0aGlzLmgxLAogICAgICAgICAgICAgIG8gPSBzLAogICAgICAgICAgICAgIGkgPSAwIHwgdGhpcy5oMiwKICAgICAgICAgICAgICB1ID0gaSwKICAgICAgICAgICAgICBiID0gMCB8IHRoaXMuaDMsCiAgICAgICAgICAgICAgeSA9IGIsCiAgICAgICAgICAgICAgQSA9IDAgfCB0aGlzLmg0LAogICAgICAgICAgICAgIHYgPSBBOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IDU7IGUrKykgewogICAgICAgICAgICAgIGNvbnN0IHQgPSA0IC0gZSwKICAgICAgICAgICAgICAgIEUgPSBmW2VdLAogICAgICAgICAgICAgICAgdyA9IGhbZV0sCiAgICAgICAgICAgICAgICBUID0gYVtlXSwKICAgICAgICAgICAgICAgIFAgPSBjW2VdLAogICAgICAgICAgICAgICAgUyA9IGxbZV0sCiAgICAgICAgICAgICAgICBPID0gZFtlXTsKICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDE2OyB0KyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG4gPSAoZyhyICsgcChlLCBzLCBpLCBiKSArIG1bVFt0XV0gKyBFLCBTW3RdKSArIEEpIHwgMDsKICAgICAgICAgICAgICAgIChyID0gQSksIChBID0gYiksIChiID0gMCB8IGcoaSwgMTApKSwgKGkgPSBzKSwgKHMgPSBuKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCAxNjsgZSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCByID0gKGcobiArIHAodCwgbywgdSwgeSkgKyBtW1BbZV1dICsgdywgT1tlXSkgKyB2KSB8IDA7CiAgICAgICAgICAgICAgICAobiA9IHYpLCAodiA9IHkpLCAoeSA9IDAgfCBnKHUsIDEwKSksICh1ID0gbyksIChvID0gcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2V0KAogICAgICAgICAgICAgICh0aGlzLmgxICsgaSArIHkpIHwgMCwKICAgICAgICAgICAgICAodGhpcy5oMiArIGIgKyB2KSB8IDAsCiAgICAgICAgICAgICAgKHRoaXMuaDMgKyBBICsgbikgfCAwLAogICAgICAgICAgICAgICh0aGlzLmg0ICsgciArIG8pIHwgMCwKICAgICAgICAgICAgICAodGhpcy5oMCArIHMgKyB1KSB8IDAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHJvdW5kQ2xlYW4oKSB7CiAgICAgICAgICAgIG0uZmlsbCgwKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlc3Ryb3koKSB7CiAgICAgICAgICAgICh0aGlzLmRlc3Ryb3llZCA9ICEwKSwgdGhpcy5idWZmZXIuZmlsbCgwKSwgdGhpcy5zZXQoMCwgMCwgMCwgMCwgMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICh0LlJJUEVNRDE2MCA9IGIpLCAodC5yaXBlbWQxNjAgPSAoMCwgcy53cmFwQ29uc3RydWN0b3IpKCgpID0-IG5ldyBiKCkpKTsKICAgICAgfSwKICAgICAgNDg1MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuc2NyeXB0QXN5bmMgPSB0LnNjcnlwdCA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNjg5MiksCiAgICAgICAgICBzID0gcig2MjA4KSwKICAgICAgICAgIG8gPSByKDgzNzYpLAogICAgICAgICAgaSA9IHIoODA2NCksCiAgICAgICAgICBhID0gKGUsIHQpID0-IChlIDw8IHQpIHwgKGUgPj4-ICgzMiAtIHQpKTsKICAgICAgICBmdW5jdGlvbiBjKGUsIHQsIHIsIG4sIHMsIG8pIHsKICAgICAgICAgIGxldCBpID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBjID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICB1ID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBsID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBkID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBmID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBoID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBnID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBwID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBtID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBiID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICB5ID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBBID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICB2ID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBFID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICB3ID0gZVt0KytdIF4gcltuKytdLAogICAgICAgICAgICBUID0gaSwKICAgICAgICAgICAgUCA9IGMsCiAgICAgICAgICAgIFMgPSB1LAogICAgICAgICAgICBPID0gbCwKICAgICAgICAgICAgUiA9IGQsCiAgICAgICAgICAgIE4gPSBmLAogICAgICAgICAgICBMID0gaCwKICAgICAgICAgICAgQiA9IGcsCiAgICAgICAgICAgIEMgPSBwLAogICAgICAgICAgICBrID0gbSwKICAgICAgICAgICAgSSA9IGIsCiAgICAgICAgICAgIEYgPSB5LAogICAgICAgICAgICBNID0gQSwKICAgICAgICAgICAgSiA9IHYsCiAgICAgICAgICAgIFUgPSBFLAogICAgICAgICAgICBEID0gdzsKICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgODsgZSArPSAyKQogICAgICAgICAgICAoUiBePSBhKChUICsgTSkgfCAwLCA3KSksCiAgICAgICAgICAgICAgKEMgXj0gYSgoUiArIFQpIHwgMCwgOSkpLAogICAgICAgICAgICAgIChNIF49IGEoKEMgKyBSKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKFQgXj0gYSgoTSArIEMpIHwgMCwgMTgpKSwKICAgICAgICAgICAgICAoayBePSBhKChOICsgUCkgfCAwLCA3KSksCiAgICAgICAgICAgICAgKEogXj0gYSgoayArIE4pIHwgMCwgOSkpLAogICAgICAgICAgICAgIChQIF49IGEoKEogKyBrKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKE4gXj0gYSgoUCArIEopIHwgMCwgMTgpKSwKICAgICAgICAgICAgICAoVSBePSBhKChJICsgTCkgfCAwLCA3KSksCiAgICAgICAgICAgICAgKFMgXj0gYSgoVSArIEkpIHwgMCwgOSkpLAogICAgICAgICAgICAgIChMIF49IGEoKFMgKyBVKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKEkgXj0gYSgoTCArIFMpIHwgMCwgMTgpKSwKICAgICAgICAgICAgICAoTyBePSBhKChEICsgRikgfCAwLCA3KSksCiAgICAgICAgICAgICAgKEIgXj0gYSgoTyArIEQpIHwgMCwgOSkpLAogICAgICAgICAgICAgIChGIF49IGEoKEIgKyBPKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKEQgXj0gYSgoRiArIEIpIHwgMCwgMTgpKSwKICAgICAgICAgICAgICAoUCBePSBhKChUICsgTykgfCAwLCA3KSksCiAgICAgICAgICAgICAgKFMgXj0gYSgoUCArIFQpIHwgMCwgOSkpLAogICAgICAgICAgICAgIChPIF49IGEoKFMgKyBQKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKFQgXj0gYSgoTyArIFMpIHwgMCwgMTgpKSwKICAgICAgICAgICAgICAoTCBePSBhKChOICsgUikgfCAwLCA3KSksCiAgICAgICAgICAgICAgKEIgXj0gYSgoTCArIE4pIHwgMCwgOSkpLAogICAgICAgICAgICAgIChSIF49IGEoKEIgKyBMKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKE4gXj0gYSgoUiArIEIpIHwgMCwgMTgpKSwKICAgICAgICAgICAgICAoRiBePSBhKChJICsgaykgfCAwLCA3KSksCiAgICAgICAgICAgICAgKEMgXj0gYSgoRiArIEkpIHwgMCwgOSkpLAogICAgICAgICAgICAgIChrIF49IGEoKEMgKyBGKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKEkgXj0gYSgoayArIEMpIHwgMCwgMTgpKSwKICAgICAgICAgICAgICAoTSBePSBhKChEICsgVSkgfCAwLCA3KSksCiAgICAgICAgICAgICAgKEogXj0gYSgoTSArIEQpIHwgMCwgOSkpLAogICAgICAgICAgICAgIChVIF49IGEoKEogKyBNKSB8IDAsIDEzKSksCiAgICAgICAgICAgICAgKEQgXj0gYSgoVSArIEopIHwgMCwgMTgpKTsKICAgICAgICAgIChzW28rK10gPSAoaSArIFQpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoYyArIFApIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAodSArIFMpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAobCArIE8pIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoZCArIFIpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoZiArIE4pIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoaCArIEwpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoZyArIEIpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAocCArIEMpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAobSArIGspIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoYiArIEkpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoeSArIEYpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoQSArIE0pIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAodiArIEopIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAoRSArIFUpIHwgMCksCiAgICAgICAgICAgIChzW28rK10gPSAodyArIEQpIHwgMCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHUoZSwgdCwgciwgbiwgcykgewogICAgICAgICAgbGV0IG8gPSBuICsgMCwKICAgICAgICAgICAgaSA9IG4gKyAxNiAqIHM7CiAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IDE2OyBuKyspIHJbaSArIG5dID0gZVt0ICsgMTYgKiAoMiAqIHMgLSAxKSArIG5dOwogICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzOyBuKyssIG8gKz0gMTYsIHQgKz0gMTYpCiAgICAgICAgICAgIGMociwgaSwgZSwgdCwgciwgbyksIG4gPiAwICYmIChpICs9IDE2KSwgYyhyLCBvLCBlLCAodCArPSAxNiksIHIsIGkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGUsIHQsIHIpIHsKICAgICAgICAgIGNvbnN0IGEgPSAoMCwgaS5jaGVja09wdHMpKHsgZGtMZW46IDMyLCBhc3luY1RpY2s6IDEwLCBtYXhtZW06IDEwNzM3NDI4NDggfSwgciksCiAgICAgICAgICAgIHsgTjogYywgcjogdSwgcDogbCwgZGtMZW46IGQsIGFzeW5jVGljazogZiwgbWF4bWVtOiBoLCBvblByb2dyZXNzOiBnIH0gPSBhOwogICAgICAgICAgaWYgKAogICAgICAgICAgICAoKDAsIG4ubnVtYmVyKShjKSwKICAgICAgICAgICAgKDAsIG4ubnVtYmVyKSh1KSwKICAgICAgICAgICAgKDAsIG4ubnVtYmVyKShsKSwKICAgICAgICAgICAgKDAsIG4ubnVtYmVyKShkKSwKICAgICAgICAgICAgKDAsIG4ubnVtYmVyKShmKSwKICAgICAgICAgICAgKDAsIG4ubnVtYmVyKShoKSwKICAgICAgICAgICAgdm9pZCAwICE9PSBnICYmICdmdW5jdGlvbicgIT0gdHlwZW9mIGcpCiAgICAgICAgICApCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncHJvZ3Jlc3NDYiBzaG91bGQgYmUgZnVuY3Rpb24nKTsKICAgICAgICAgIGNvbnN0IHAgPSAxMjggKiB1LAogICAgICAgICAgICBtID0gcCAvIDQ7CiAgICAgICAgICBpZiAoYyA8PSAxIHx8IDAgIT0gKGMgJiAoYyAtIDEpKSB8fCBjID49IDIgKiogKHAgLyA4KSB8fCBjID4gMiAqKiAzMikKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgICAgICdTY3J5cHQ6IE4gbXVzdCBiZSBsYXJnZXIgdGhhbiAxLCBhIHBvd2VyIG9mIDIsIGxlc3MgdGhhbiAyXigxMjggKiByIC8gOCkgYW5kIGxlc3MgdGhhbiAyXjMyJwogICAgICAgICAgICApOwogICAgICAgICAgaWYgKGwgPCAwIHx8IGwgPiAxMzc0Mzg5NTM0NDAgLyBwKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NjcnlwdDogcCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gKCgyXjMyIC0gMSkgKiAzMikgLyAoMTI4ICogciknKTsKICAgICAgICAgIGlmIChkIDwgMCB8fCBkID4gMTM3NDM4OTUzNDQwKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NjcnlwdDogZGtMZW4gc2hvdWxkIGJlIHBvc2l0aXZlIGludGVnZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICgyXjMyIC0gMSkgKiAzMicpOwogICAgICAgICAgY29uc3QgYiA9IHAgKiAoYyArIGwpOwogICAgICAgICAgaWYgKGIgPiBoKSB0aHJvdyBuZXcgRXJyb3IoYFNjcnlwdDogcGFyYW1ldGVycyB0b28gbGFyZ2UsICR7Yn0gKDEyOCAqIHIgKiAoTiArIHApKSA-ICR7aH0gKG1heG1lbSlgKTsKICAgICAgICAgIGNvbnN0IHkgPSAoMCwgby5wYmtkZjIpKHMuc2hhMjU2LCBlLCB0LCB7IGM6IDEsIGRrTGVuOiBwICogbCB9KSwKICAgICAgICAgICAgQSA9ICgwLCBpLnUzMikoeSksCiAgICAgICAgICAgIHYgPSAoMCwgaS51MzIpKG5ldyBVaW50OEFycmF5KHAgKiBjKSksCiAgICAgICAgICAgIEUgPSAoMCwgaS51MzIpKG5ldyBVaW50OEFycmF5KHApKTsKICAgICAgICAgIGxldCB3ID0gKCkgPT4ge307CiAgICAgICAgICBpZiAoZykgewogICAgICAgICAgICBjb25zdCBlID0gMiAqIGMgKiBsLAogICAgICAgICAgICAgIHQgPSBNYXRoLm1heChNYXRoLmZsb29yKGUgLyAxZTQpLCAxKTsKICAgICAgICAgICAgbGV0IHIgPSAwOwogICAgICAgICAgICB3ID0gKCkgPT4gewogICAgICAgICAgICAgIHIrKywgIWcgfHwgKHIgJSB0ICYmIHIgIT09IGUpIHx8IGcociAvIGUpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgTjogYywKICAgICAgICAgICAgcjogdSwKICAgICAgICAgICAgcDogbCwKICAgICAgICAgICAgZGtMZW46IGQsCiAgICAgICAgICAgIGJsb2NrU2l6ZTMyOiBtLAogICAgICAgICAgICBWOiB2LAogICAgICAgICAgICBCMzI6IEEsCiAgICAgICAgICAgIEI6IHksCiAgICAgICAgICAgIHRtcDogRSwKICAgICAgICAgICAgYmxvY2tNaXhDYjogdywKICAgICAgICAgICAgYXN5bmNUaWNrOiBmCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBkKGUsIHQsIHIsIG4sIGkpIHsKICAgICAgICAgIGNvbnN0IGEgPSAoMCwgby5wYmtkZjIpKHMuc2hhMjU2LCBlLCByLCB7IGM6IDEsIGRrTGVuOiB0IH0pOwogICAgICAgICAgcmV0dXJuIHIuZmlsbCgwKSwgbi5maWxsKDApLCBpLmZpbGwoMCksIGE7CiAgICAgICAgfQogICAgICAgICh0LnNjcnlwdCA9IGZ1bmN0aW9uIChlLCB0LCByKSB7CiAgICAgICAgICBjb25zdCB7IE46IG4sIHI6IHMsIHA6IG8sIGRrTGVuOiBpLCBibG9ja1NpemUzMjogYSwgVjogYywgQjMyOiBmLCBCOiBoLCB0bXA6IGcsIGJsb2NrTWl4Q2I6IHAgfSA9IGwoZSwgdCwgcik7CiAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IG87IGUrKykgewogICAgICAgICAgICBjb25zdCB0ID0gYSAqIGU7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgYTsgZSsrKSBjW2VdID0gZlt0ICsgZV07CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwLCB0ID0gMDsgZSA8IG4gLSAxOyBlKyspIHUoYywgdCwgYywgKHQgKz0gYSksIHMpLCBwKCk7CiAgICAgICAgICAgIHUoYywgKG4gLSAxKSAqIGEsIGYsIHQsIHMpLCBwKCk7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbjsgZSsrKSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IGZbdCArIGEgLSAxNl0gJSBuOwogICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgYTsgcisrKSBnW3JdID0gZlt0ICsgcl0gXiBjW2UgKiBhICsgcl07CiAgICAgICAgICAgICAgdShnLCAwLCBmLCB0LCBzKSwgcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZChlLCBpLCBoLCBjLCBnKTsKICAgICAgICB9KSwKICAgICAgICAgICh0LnNjcnlwdEFzeW5jID0gYXN5bmMgZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgewogICAgICAgICAgICAgIE46IG4sCiAgICAgICAgICAgICAgcjogcywKICAgICAgICAgICAgICBwOiBvLAogICAgICAgICAgICAgIGRrTGVuOiBhLAogICAgICAgICAgICAgIGJsb2NrU2l6ZTMyOiBjLAogICAgICAgICAgICAgIFY6IGYsCiAgICAgICAgICAgICAgQjMyOiBoLAogICAgICAgICAgICAgIEI6IGcsCiAgICAgICAgICAgICAgdG1wOiBwLAogICAgICAgICAgICAgIGJsb2NrTWl4Q2I6IG0sCiAgICAgICAgICAgICAgYXN5bmNUaWNrOiBiCiAgICAgICAgICAgIH0gPSBsKGUsIHQsIHIpOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IG87IGUrKykgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBjICogZTsKICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGM7IGUrKykgZltlXSA9IGhbdCArIGVdOwogICAgICAgICAgICAgIGxldCByID0gMDsKICAgICAgICAgICAgICBhd2FpdCAoMCwgaS5hc3luY0xvb3ApKG4gLSAxLCBiLCAoKSA9PiB7CiAgICAgICAgICAgICAgICB1KGYsIHIsIGYsIChyICs9IGMpLCBzKSwgbSgpOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdShmLCAobiAtIDEpICogYywgaCwgdCwgcyksCiAgICAgICAgICAgICAgICBtKCksCiAgICAgICAgICAgICAgICBhd2FpdCAoMCwgaS5hc3luY0xvb3ApKG4sIGIsICgpID0-IHsKICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGhbdCArIGMgLSAxNl0gJSBuOwogICAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGM7IHIrKykgcFtyXSA9IGhbdCArIHJdIF4gZltlICogYyArIHJdOwogICAgICAgICAgICAgICAgICB1KHAsIDAsIGgsIHQsIHMpLCBtKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZChlLCBhLCBnLCBmLCBwKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA2MjA4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5zaGEyMjQgPSB0LnNoYTI1NiA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzkzNiksCiAgICAgICAgICBzID0gcig4MDY0KSwKICAgICAgICAgIG8gPSAoZSwgdCwgcikgPT4gKGUgJiB0KSBeIChlICYgcikgXiAodCAmIHIpLAogICAgICAgICAgaSA9IG5ldyBVaW50MzJBcnJheShbCiAgICAgICAgICAgIDExMTYzNTI0MDgsIDE4OTk0NDc0NDEsIDMwNDkzMjM0NzEsIDM5MjEwMDk1NzMsIDk2MTk4NzE2MywgMTUwODk3MDk5MywgMjQ1MzYzNTc0OCwgMjg3MDc2MzIyMSwgMzYyNDM4MTA4MCwKICAgICAgICAgICAgMzEwNTk4NDAxLCA2MDcyMjUyNzgsIDE0MjY4ODE5ODcsIDE5MjUwNzgzODgsIDIxNjIwNzgyMDYsIDI2MTQ4ODgxMDMsIDMyNDgyMjI1ODAsIDM4MzUzOTA0MDEsIDQwMjIyMjQ3NzQsCiAgICAgICAgICAgIDI2NDM0NzA3OCwgNjA0ODA3NjI4LCA3NzAyNTU5ODMsIDEyNDkxNTAxMjIsIDE1NTUwODE2OTIsIDE5OTYwNjQ5ODYsIDI1NTQyMjA4ODIsIDI4MjE4MzQzNDksIDI5NTI5OTY4MDgsCiAgICAgICAgICAgIDMyMTAzMTM2NzEsIDMzMzY1NzE4OTEsIDM1ODQ1Mjg3MTEsIDExMzkyNjk5MywgMzM4MjQxODk1LCA2NjYzMDcyMDUsIDc3MzUyOTkxMiwgMTI5NDc1NzM3MiwgMTM5NjE4MjI5MSwKICAgICAgICAgICAgMTY5NTE4MzcwMCwgMTk4NjY2MTA1MSwgMjE3NzAyNjM1MCwgMjQ1Njk1NjAzNywgMjczMDQ4NTkyMSwgMjgyMDMwMjQxMSwgMzI1OTczMDgwMCwgMzM0NTc2NDc3MSwgMzUxNjA2NTgxNywKICAgICAgICAgICAgMzYwMDM1MjgwNCwgNDA5NDU3MTkwOSwgMjc1NDIzMzQ0LCA0MzAyMjc3MzQsIDUwNjk0ODYxNiwgNjU5MDYwNTU2LCA4ODM5OTc4NzcsIDk1ODEzOTU3MSwgMTMyMjgyMjIxOCwKICAgICAgICAgICAgMTUzNzAwMjA2MywgMTc0Nzg3Mzc3OSwgMTk1NTU2MjIyMiwgMjAyNDEwNDgxNSwgMjIyNzczMDQ1MiwgMjM2MTg1MjQyNCwgMjQyODQzNjQ3NCwgMjc1NjczNDE4NywgMzIwNDAzMTQ3OSwKICAgICAgICAgICAgMzMyOTMyNTI5OAogICAgICAgICAgXSksCiAgICAgICAgICBhID0gbmV3IFVpbnQzMkFycmF5KFsKICAgICAgICAgICAgMTc3OTAzMzcwMywgMzE0NDEzNDI3NywgMTAxMzkwNDI0MiwgMjc3MzQ4MDc2MiwgMTM1OTg5MzExOSwgMjYwMDgyMjkyNCwgNTI4NzM0NjM1LCAxNTQxNDU5MjI1CiAgICAgICAgICBdKSwKICAgICAgICAgIGMgPSBuZXcgVWludDMyQXJyYXkoNjQpOwogICAgICAgIGNsYXNzIHUgZXh0ZW5kcyBuLlNIQTIgewogICAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKDY0LCAzMiwgOCwgITEpLAogICAgICAgICAgICAgICh0aGlzLkEgPSAwIHwgYVswXSksCiAgICAgICAgICAgICAgKHRoaXMuQiA9IDAgfCBhWzFdKSwKICAgICAgICAgICAgICAodGhpcy5DID0gMCB8IGFbMl0pLAogICAgICAgICAgICAgICh0aGlzLkQgPSAwIHwgYVszXSksCiAgICAgICAgICAgICAgKHRoaXMuRSA9IDAgfCBhWzRdKSwKICAgICAgICAgICAgICAodGhpcy5GID0gMCB8IGFbNV0pLAogICAgICAgICAgICAgICh0aGlzLkcgPSAwIHwgYVs2XSksCiAgICAgICAgICAgICAgKHRoaXMuSCA9IDAgfCBhWzddKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCgpIHsKICAgICAgICAgICAgY29uc3QgeyBBOiBlLCBCOiB0LCBDOiByLCBEOiBuLCBFOiBzLCBGOiBvLCBHOiBpLCBIOiBhIH0gPSB0aGlzOwogICAgICAgICAgICByZXR1cm4gW2UsIHQsIHIsIG4sIHMsIG8sIGksIGFdOwogICAgICAgICAgfQogICAgICAgICAgc2V0KGUsIHQsIHIsIG4sIHMsIG8sIGksIGEpIHsKICAgICAgICAgICAgKHRoaXMuQSA9IDAgfCBlKSwKICAgICAgICAgICAgICAodGhpcy5CID0gMCB8IHQpLAogICAgICAgICAgICAgICh0aGlzLkMgPSAwIHwgciksCiAgICAgICAgICAgICAgKHRoaXMuRCA9IDAgfCBuKSwKICAgICAgICAgICAgICAodGhpcy5FID0gMCB8IHMpLAogICAgICAgICAgICAgICh0aGlzLkYgPSAwIHwgbyksCiAgICAgICAgICAgICAgKHRoaXMuRyA9IDAgfCBpKSwKICAgICAgICAgICAgICAodGhpcy5IID0gMCB8IGEpOwogICAgICAgICAgfQogICAgICAgICAgcHJvY2VzcyhlLCB0KSB7CiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgMTY7IHIrKywgdCArPSA0KSBjW3JdID0gZS5nZXRVaW50MzIodCwgITEpOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMTY7IGUgPCA2NDsgZSsrKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGNbZSAtIDE1XSwKICAgICAgICAgICAgICAgIHIgPSBjW2UgLSAyXSwKICAgICAgICAgICAgICAgIG4gPSAoMCwgcy5yb3RyKSh0LCA3KSBeICgwLCBzLnJvdHIpKHQsIDE4KSBeICh0ID4-PiAzKSwKICAgICAgICAgICAgICAgIG8gPSAoMCwgcy5yb3RyKShyLCAxNykgXiAoMCwgcy5yb3RyKShyLCAxOSkgXiAociA-Pj4gMTApOwogICAgICAgICAgICAgIGNbZV0gPSAobyArIGNbZSAtIDddICsgbiArIGNbZSAtIDE2XSkgfCAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB7IEE6IHIsIEI6IG4sIEM6IGEsIEQ6IHUsIEU6IGwsIEY6IGQsIEc6IGYsIEg6IGggfSA9IHRoaXM7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgNjQ7IGUrKykgewogICAgICAgICAgICAgIGNvbnN0IHQgPQogICAgICAgICAgICAgICAgICAoaCArCiAgICAgICAgICAgICAgICAgICAgKCgwLCBzLnJvdHIpKGwsIDYpIF4gKDAsIHMucm90cikobCwgMTEpIF4gKDAsIHMucm90cikobCwgMjUpKSArCiAgICAgICAgICAgICAgICAgICAgKCgoZyA9IGwpICYgZCkgXiAofmcgJiBmKSkgKwogICAgICAgICAgICAgICAgICAgIGlbZV0gKwogICAgICAgICAgICAgICAgICAgIGNbZV0pIHwKICAgICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgIHAgPSAoKCgwLCBzLnJvdHIpKHIsIDIpIF4gKDAsIHMucm90cikociwgMTMpIF4gKDAsIHMucm90cikociwgMjIpKSArIG8ociwgbiwgYSkpIHwgMDsKICAgICAgICAgICAgICAoaCA9IGYpLCAoZiA9IGQpLCAoZCA9IGwpLCAobCA9ICh1ICsgdCkgfCAwKSwgKHUgPSBhKSwgKGEgPSBuKSwgKG4gPSByKSwgKHIgPSAodCArIHApIHwgMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGc7CiAgICAgICAgICAgIChyID0gKHIgKyB0aGlzLkEpIHwgMCksCiAgICAgICAgICAgICAgKG4gPSAobiArIHRoaXMuQikgfCAwKSwKICAgICAgICAgICAgICAoYSA9IChhICsgdGhpcy5DKSB8IDApLAogICAgICAgICAgICAgICh1ID0gKHUgKyB0aGlzLkQpIHwgMCksCiAgICAgICAgICAgICAgKGwgPSAobCArIHRoaXMuRSkgfCAwKSwKICAgICAgICAgICAgICAoZCA9IChkICsgdGhpcy5GKSB8IDApLAogICAgICAgICAgICAgIChmID0gKGYgKyB0aGlzLkcpIHwgMCksCiAgICAgICAgICAgICAgKGggPSAoaCArIHRoaXMuSCkgfCAwKSwKICAgICAgICAgICAgICB0aGlzLnNldChyLCBuLCBhLCB1LCBsLCBkLCBmLCBoKTsKICAgICAgICAgIH0KICAgICAgICAgIHJvdW5kQ2xlYW4oKSB7CiAgICAgICAgICAgIGMuZmlsbCgwKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlc3Ryb3koKSB7CiAgICAgICAgICAgIHRoaXMuc2V0KDAsIDAsIDAsIDAsIDAsIDAsIDAsIDApLCB0aGlzLmJ1ZmZlci5maWxsKDApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjbGFzcyBsIGV4dGVuZHMgdSB7CiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgc3VwZXIoKSwKICAgICAgICAgICAgICAodGhpcy5BID0gLTEwNTY1OTYyNjQpLAogICAgICAgICAgICAgICh0aGlzLkIgPSA5MTQxNTA2NjMpLAogICAgICAgICAgICAgICh0aGlzLkMgPSA4MTI3MDI5OTkpLAogICAgICAgICAgICAgICh0aGlzLkQgPSAtMTUwMDU0NTk5KSwKICAgICAgICAgICAgICAodGhpcy5FID0gLTQxOTE0MzkpLAogICAgICAgICAgICAgICh0aGlzLkYgPSAxNzUwNjAzMDI1KSwKICAgICAgICAgICAgICAodGhpcy5HID0gMTY5NDA3NjgzOSksCiAgICAgICAgICAgICAgKHRoaXMuSCA9IC0xMDkwODkxODY4KSwKICAgICAgICAgICAgICAodGhpcy5vdXRwdXRMZW4gPSAyOCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICh0LnNoYTI1NiA9ICgwLCBzLndyYXBDb25zdHJ1Y3RvcikoKCkgPT4gbmV3IHUoKSkpLCAodC5zaGEyMjQgPSAoMCwgcy53cmFwQ29uc3RydWN0b3IpKCgpID0-IG5ldyBsKCkpKTsKICAgICAgfSwKICAgICAgOTk4NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LnNoYWtlMjU2ID0KICAgICAgICAgICAgdC5zaGFrZTEyOCA9CiAgICAgICAgICAgIHQua2VjY2FrXzUxMiA9CiAgICAgICAgICAgIHQua2VjY2FrXzM4NCA9CiAgICAgICAgICAgIHQua2VjY2FrXzI1NiA9CiAgICAgICAgICAgIHQua2VjY2FrXzIyNCA9CiAgICAgICAgICAgIHQuc2hhM181MTIgPQogICAgICAgICAgICB0LnNoYTNfMzg0ID0KICAgICAgICAgICAgdC5zaGEzXzI1NiA9CiAgICAgICAgICAgIHQuc2hhM18yMjQgPQogICAgICAgICAgICB0LktlY2NhayA9CiAgICAgICAgICAgIHQua2VjY2FrUCA9CiAgICAgICAgICAgICAgdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig2ODkyKSwKICAgICAgICAgIHMgPSByKDE1MzYpLAogICAgICAgICAgbyA9IHIoODA2NCksCiAgICAgICAgICBbaSwgYSwgY10gPSBbW10sIFtdLCBbXV0sCiAgICAgICAgICB1ID0gQmlnSW50KDApLAogICAgICAgICAgbCA9IEJpZ0ludCgxKSwKICAgICAgICAgIGQgPSBCaWdJbnQoMiksCiAgICAgICAgICBmID0gQmlnSW50KDcpLAogICAgICAgICAgaCA9IEJpZ0ludCgyNTYpLAogICAgICAgICAgZyA9IEJpZ0ludCgxMTMpOwogICAgICAgIGZvciAobGV0IGUgPSAwLCB0ID0gbCwgciA9IDEsIG4gPSAwOyBlIDwgMjQ7IGUrKykgewogICAgICAgICAgKFtyLCBuXSA9IFtuLCAoMiAqIHIgKyAzICogbikgJSA1XSksIGkucHVzaCgyICogKDUgKiBuICsgcikpLCBhLnB1c2goKCgoZSArIDEpICogKGUgKyAyKSkgLyAyKSAlIDY0KTsKICAgICAgICAgIGxldCBzID0gdTsKICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgNzsgZSsrKQogICAgICAgICAgICAodCA9ICgodCA8PCBsKSBeICgodCA-PiBmKSAqIGcpKSAlIGgpLCB0ICYgZCAmJiAocyBePSBsIDw8ICgobCA8PCBCaWdJbnQoZSkpIC0gbCkpOwogICAgICAgICAgYy5wdXNoKHMpOwogICAgICAgIH0KICAgICAgICBjb25zdCBbcCwgbV0gPSAoMCwgcy5zcGxpdCkoYywgITApLAogICAgICAgICAgYiA9IChlLCB0LCByKSA9PiAociA-IDMyID8gKDAsIHMucm90bEJIKShlLCB0LCByKSA6ICgwLCBzLnJvdGxTSCkoZSwgdCwgcikpLAogICAgICAgICAgeSA9IChlLCB0LCByKSA9PiAociA-IDMyID8gKDAsIHMucm90bEJMKShlLCB0LCByKSA6ICgwLCBzLnJvdGxTTCkoZSwgdCwgcikpOwogICAgICAgIGZ1bmN0aW9uIEEoZSwgdCA9IDI0KSB7CiAgICAgICAgICBjb25zdCByID0gbmV3IFVpbnQzMkFycmF5KDEwKTsKICAgICAgICAgIGZvciAobGV0IG4gPSAyNCAtIHQ7IG4gPCAyNDsgbisrKSB7CiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMTA7IHQrKykgclt0XSA9IGVbdF0gXiBlW3QgKyAxMF0gXiBlW3QgKyAyMF0gXiBlW3QgKyAzMF0gXiBlW3QgKyA0MF07CiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgMTA7IHQgKz0gMikgewogICAgICAgICAgICAgIGNvbnN0IG4gPSAodCArIDgpICUgMTAsCiAgICAgICAgICAgICAgICBzID0gKHQgKyAyKSAlIDEwLAogICAgICAgICAgICAgICAgbyA9IHJbc10sCiAgICAgICAgICAgICAgICBpID0gcltzICsgMV0sCiAgICAgICAgICAgICAgICBhID0gYihvLCBpLCAxKSBeIHJbbl0sCiAgICAgICAgICAgICAgICBjID0geShvLCBpLCAxKSBeIHJbbiArIDFdOwogICAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgNTA7IHIgKz0gMTApIChlW3QgKyByXSBePSBhKSwgKGVbdCArIHIgKyAxXSBePSBjKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdCA9IGVbMl0sCiAgICAgICAgICAgICAgcyA9IGVbM107CiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgMjQ7IHIrKykgewogICAgICAgICAgICAgIGNvbnN0IG4gPSBhW3JdLAogICAgICAgICAgICAgICAgbyA9IGIodCwgcywgbiksCiAgICAgICAgICAgICAgICBjID0geSh0LCBzLCBuKSwKICAgICAgICAgICAgICAgIHUgPSBpW3JdOwogICAgICAgICAgICAgICh0ID0gZVt1XSksIChzID0gZVt1ICsgMV0pLCAoZVt1XSA9IG8pLCAoZVt1ICsgMV0gPSBjKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IDUwOyB0ICs9IDEwKSB7CiAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAxMDsgbisrKSByW25dID0gZVt0ICsgbl07CiAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAxMDsgbisrKSBlW3QgKyBuXSBePSB-clsobiArIDIpICUgMTBdICYgclsobiArIDQpICUgMTBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIChlWzBdIF49IHBbbl0pLCAoZVsxXSBePSBtW25dKTsKICAgICAgICAgIH0KICAgICAgICAgIHIuZmlsbCgwKTsKICAgICAgICB9CiAgICAgICAgdC5rZWNjYWtQID0gQTsKICAgICAgICBjbGFzcyB2IGV4dGVuZHMgby5IYXNoIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIHMgPSAhMSwgaSA9IDI0KSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoc3VwZXIoKSwKICAgICAgICAgICAgICAodGhpcy5ibG9ja0xlbiA9IGUpLAogICAgICAgICAgICAgICh0aGlzLnN1ZmZpeCA9IHQpLAogICAgICAgICAgICAgICh0aGlzLm91dHB1dExlbiA9IHIpLAogICAgICAgICAgICAgICh0aGlzLmVuYWJsZVhPRiA9IHMpLAogICAgICAgICAgICAgICh0aGlzLnJvdW5kcyA9IGkpLAogICAgICAgICAgICAgICh0aGlzLnBvcyA9IDApLAogICAgICAgICAgICAgICh0aGlzLnBvc091dCA9IDApLAogICAgICAgICAgICAgICh0aGlzLmZpbmlzaGVkID0gITEpLAogICAgICAgICAgICAgICh0aGlzLmRlc3Ryb3llZCA9ICExKSwKICAgICAgICAgICAgICAoMCwgbi5udW1iZXIpKHIpLAogICAgICAgICAgICAgIDAgPj0gdGhpcy5ibG9ja0xlbiB8fCB0aGlzLmJsb2NrTGVuID49IDIwMCkKICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2hhMyBzdXBwb3J0cyBvbmx5IGtlY2Nhay1mMTYwMCBmdW5jdGlvbicpOwogICAgICAgICAgICAodGhpcy5zdGF0ZSA9IG5ldyBVaW50OEFycmF5KDIwMCkpLCAodGhpcy5zdGF0ZTMyID0gKDAsIG8udTMyKSh0aGlzLnN0YXRlKSk7CiAgICAgICAgICB9CiAgICAgICAgICBrZWNjYWsoKSB7CiAgICAgICAgICAgIEEodGhpcy5zdGF0ZTMyLCB0aGlzLnJvdW5kcyksICh0aGlzLnBvc091dCA9IDApLCAodGhpcy5wb3MgPSAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZGF0ZShlKSB7CiAgICAgICAgICAgICgwLCBuLmV4aXN0cykodGhpcyk7CiAgICAgICAgICAgIGNvbnN0IHsgYmxvY2tMZW46IHQsIHN0YXRlOiByIH0gPSB0aGlzLAogICAgICAgICAgICAgIHMgPSAoZSA9ICgwLCBvLnRvQnl0ZXMpKGUpKS5sZW5ndGg7CiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgczsgKSB7CiAgICAgICAgICAgICAgY29uc3QgbyA9IE1hdGgubWluKHQgLSB0aGlzLnBvcywgcyAtIG4pOwogICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbzsgdCsrKSByW3RoaXMucG9zKytdIF49IGVbbisrXTsKICAgICAgICAgICAgICB0aGlzLnBvcyA9PT0gdCAmJiB0aGlzLmtlY2NhaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgfQogICAgICAgICAgZmluaXNoKCkgewogICAgICAgICAgICBpZiAodGhpcy5maW5pc2hlZCkgcmV0dXJuOwogICAgICAgICAgICB0aGlzLmZpbmlzaGVkID0gITA7CiAgICAgICAgICAgIGNvbnN0IHsgc3RhdGU6IGUsIHN1ZmZpeDogdCwgcG9zOiByLCBibG9ja0xlbjogbiB9ID0gdGhpczsKICAgICAgICAgICAgKGVbcl0gXj0gdCksIDAgIT0gKDEyOCAmIHQpICYmIHIgPT09IG4gLSAxICYmIHRoaXMua2VjY2FrKCksIChlW24gLSAxXSBePSAxMjgpLCB0aGlzLmtlY2NhaygpOwogICAgICAgICAgfQogICAgICAgICAgd3JpdGVJbnRvKGUpIHsKICAgICAgICAgICAgKDAsIG4uZXhpc3RzKSh0aGlzLCAhMSksICgwLCBuLmJ5dGVzKShlKSwgdGhpcy5maW5pc2goKTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RhdGUsCiAgICAgICAgICAgICAgeyBibG9ja0xlbjogciB9ID0gdGhpczsKICAgICAgICAgICAgZm9yIChsZXQgbiA9IDAsIHMgPSBlLmxlbmd0aDsgbiA8IHM7ICkgewogICAgICAgICAgICAgIHRoaXMucG9zT3V0ID49IHIgJiYgdGhpcy5rZWNjYWsoKTsKICAgICAgICAgICAgICBjb25zdCBvID0gTWF0aC5taW4ociAtIHRoaXMucG9zT3V0LCBzIC0gbik7CiAgICAgICAgICAgICAgZS5zZXQodC5zdWJhcnJheSh0aGlzLnBvc091dCwgdGhpcy5wb3NPdXQgKyBvKSwgbiksICh0aGlzLnBvc091dCArPSBvKSwgKG4gKz0gbyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICB9CiAgICAgICAgICB4b2ZJbnRvKGUpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVhPRikgdGhyb3cgbmV3IEVycm9yKCdYT0YgaXMgbm90IHBvc3NpYmxlIGZvciB0aGlzIGluc3RhbmNlJyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLndyaXRlSW50byhlKTsKICAgICAgICAgIH0KICAgICAgICAgIHhvZihlKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgbi5udW1iZXIpKGUpLCB0aGlzLnhvZkludG8obmV3IFVpbnQ4QXJyYXkoZSkpOwogICAgICAgICAgfQogICAgICAgICAgZGlnZXN0SW50byhlKSB7CiAgICAgICAgICAgIGlmICgoKDAsIG4ub3V0cHV0KShlLCB0aGlzKSwgdGhpcy5maW5pc2hlZCkpIHRocm93IG5ldyBFcnJvcignZGlnZXN0KCkgd2FzIGFscmVhZHkgY2FsbGVkJyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLndyaXRlSW50byhlKSwgdGhpcy5kZXN0cm95KCksIGU7CiAgICAgICAgICB9CiAgICAgICAgICBkaWdlc3QoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpZ2VzdEludG8obmV3IFVpbnQ4QXJyYXkodGhpcy5vdXRwdXRMZW4pKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlc3Ryb3koKSB7CiAgICAgICAgICAgICh0aGlzLmRlc3Ryb3llZCA9ICEwKSwgdGhpcy5zdGF0ZS5maWxsKDApOwogICAgICAgICAgfQogICAgICAgICAgX2Nsb25lSW50byhlKSB7CiAgICAgICAgICAgIGNvbnN0IHsgYmxvY2tMZW46IHQsIHN1ZmZpeDogciwgb3V0cHV0TGVuOiBuLCByb3VuZHM6IHMsIGVuYWJsZVhPRjogbyB9ID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICBlIHx8IChlID0gbmV3IHYodCwgciwgbiwgbywgcykpLAogICAgICAgICAgICAgIGUuc3RhdGUzMi5zZXQodGhpcy5zdGF0ZTMyKSwKICAgICAgICAgICAgICAoZS5wb3MgPSB0aGlzLnBvcyksCiAgICAgICAgICAgICAgKGUucG9zT3V0ID0gdGhpcy5wb3NPdXQpLAogICAgICAgICAgICAgIChlLmZpbmlzaGVkID0gdGhpcy5maW5pc2hlZCksCiAgICAgICAgICAgICAgKGUucm91bmRzID0gcyksCiAgICAgICAgICAgICAgKGUuc3VmZml4ID0gciksCiAgICAgICAgICAgICAgKGUub3V0cHV0TGVuID0gbiksCiAgICAgICAgICAgICAgKGUuZW5hYmxlWE9GID0gbyksCiAgICAgICAgICAgICAgKGUuZGVzdHJveWVkID0gdGhpcy5kZXN0cm95ZWQpLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5LZWNjYWsgPSB2OwogICAgICAgIGNvbnN0IEUgPSAoZSwgdCwgcikgPT4gKDAsIG8ud3JhcENvbnN0cnVjdG9yKSgoKSA9PiBuZXcgdih0LCBlLCByKSk7CiAgICAgICAgKHQuc2hhM18yMjQgPSBFKDYsIDE0NCwgMjgpKSwKICAgICAgICAgICh0LnNoYTNfMjU2ID0gRSg2LCAxMzYsIDMyKSksCiAgICAgICAgICAodC5zaGEzXzM4NCA9IEUoNiwgMTA0LCA0OCkpLAogICAgICAgICAgKHQuc2hhM181MTIgPSBFKDYsIDcyLCA2NCkpLAogICAgICAgICAgKHQua2VjY2FrXzIyNCA9IEUoMSwgMTQ0LCAyOCkpLAogICAgICAgICAgKHQua2VjY2FrXzI1NiA9IEUoMSwgMTM2LCAzMikpLAogICAgICAgICAgKHQua2VjY2FrXzM4NCA9IEUoMSwgMTA0LCA0OCkpLAogICAgICAgICAgKHQua2VjY2FrXzUxMiA9IEUoMSwgNzIsIDY0KSk7CiAgICAgICAgY29uc3QgdyA9IChlLCB0LCByKSA9PgogICAgICAgICAgKDAsIG8ud3JhcFhPRkNvbnN0cnVjdG9yV2l0aE9wdHMpKChuID0ge30pID0-IG5ldyB2KHQsIGUsIHZvaWQgMCA9PT0gbi5ka0xlbiA_IHIgOiBuLmRrTGVuLCAhMCkpOwogICAgICAgICh0LnNoYWtlMTI4ID0gdygzMSwgMTY4LCAxNikpLCAodC5zaGFrZTI1NiA9IHcoMzEsIDEzNiwgMzIpKTsKICAgICAgfSwKICAgICAgODA2NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LnJhbmRvbUJ5dGVzID0KICAgICAgICAgICAgdC53cmFwWE9GQ29uc3RydWN0b3JXaXRoT3B0cyA9CiAgICAgICAgICAgIHQud3JhcENvbnN0cnVjdG9yV2l0aE9wdHMgPQogICAgICAgICAgICB0LndyYXBDb25zdHJ1Y3RvciA9CiAgICAgICAgICAgIHQuY2hlY2tPcHRzID0KICAgICAgICAgICAgdC5IYXNoID0KICAgICAgICAgICAgdC5jb25jYXRCeXRlcyA9CiAgICAgICAgICAgIHQudG9CeXRlcyA9CiAgICAgICAgICAgIHQudXRmOFRvQnl0ZXMgPQogICAgICAgICAgICB0LmFzeW5jTG9vcCA9CiAgICAgICAgICAgIHQubmV4dFRpY2sgPQogICAgICAgICAgICB0LmhleFRvQnl0ZXMgPQogICAgICAgICAgICB0LmJ5dGVzVG9IZXggPQogICAgICAgICAgICB0LmlzTEUgPQogICAgICAgICAgICB0LnJvdHIgPQogICAgICAgICAgICB0LmNyZWF0ZVZpZXcgPQogICAgICAgICAgICB0LnUzMiA9CiAgICAgICAgICAgIHQudTggPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMjE2OCksCiAgICAgICAgICBzID0gKGUpID0-IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5OwogICAgICAgIGlmICgKICAgICAgICAgICgodC51OCA9IChlKSA9PiBuZXcgVWludDhBcnJheShlLmJ1ZmZlciwgZS5ieXRlT2Zmc2V0LCBlLmJ5dGVMZW5ndGgpKSwKICAgICAgICAgICh0LnUzMiA9IChlKSA9PiBuZXcgVWludDMyQXJyYXkoZS5idWZmZXIsIGUuYnl0ZU9mZnNldCwgTWF0aC5mbG9vcihlLmJ5dGVMZW5ndGggLyA0KSkpLAogICAgICAgICAgKHQuY3JlYXRlVmlldyA9IChlKSA9PiBuZXcgRGF0YVZpZXcoZS5idWZmZXIsIGUuYnl0ZU9mZnNldCwgZS5ieXRlTGVuZ3RoKSksCiAgICAgICAgICAodC5yb3RyID0gKGUsIHQpID0-IChlIDw8ICgzMiAtIHQpKSB8IChlID4-PiB0KSksCiAgICAgICAgICAodC5pc0xFID0gNjggPT09IG5ldyBVaW50OEFycmF5KG5ldyBVaW50MzJBcnJheShbMjg3NDU0MDIwXSkuYnVmZmVyKVswXSksCiAgICAgICAgICAhdC5pc0xFKQogICAgICAgICkKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm9uIGxpdHRsZS1lbmRpYW4gaGFyZHdhcmUgaXMgbm90IHN1cHBvcnRlZCcpOwogICAgICAgIGNvbnN0IG8gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyNTYgfSwgKGUsIHQpID0-IHQudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpOwogICAgICAgICh0LmJ5dGVzVG9IZXggPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgaWYgKCFzKGUpKSB0aHJvdyBuZXcgRXJyb3IoJ1VpbnQ4QXJyYXkgZXhwZWN0ZWQnKTsKICAgICAgICAgIGxldCB0ID0gJyc7CiAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGUubGVuZ3RoOyByKyspIHQgKz0gb1tlW3JdXTsKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0pLAogICAgICAgICAgKHQuaGV4VG9CeXRlcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IEVycm9yKCdoZXggc3RyaW5nIGV4cGVjdGVkLCBnb3QgJyArIHR5cGVvZiBlKTsKICAgICAgICAgICAgY29uc3QgdCA9IGUubGVuZ3RoOwogICAgICAgICAgICBpZiAodCAlIDIpIHRocm93IG5ldyBFcnJvcigncGFkZGVkIGhleCBzdHJpbmcgZXhwZWN0ZWQsIGdvdCB1bnBhZGRlZCBoZXggb2YgbGVuZ3RoICcgKyB0KTsKICAgICAgICAgICAgY29uc3QgciA9IG5ldyBVaW50OEFycmF5KHQgLyAyKTsKICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgY29uc3QgbiA9IDIgKiB0LAogICAgICAgICAgICAgICAgcyA9IGUuc2xpY2UobiwgbiArIDIpLAogICAgICAgICAgICAgICAgbyA9IE51bWJlci5wYXJzZUludChzLCAxNik7CiAgICAgICAgICAgICAgaWYgKE51bWJlci5pc05hTihvKSB8fCBvIDwgMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGJ5dGUgc2VxdWVuY2UnKTsKICAgICAgICAgICAgICByW3RdID0gbzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQubmV4dFRpY2sgPSBhc3luYyAoKSA9PiB7fSksCiAgICAgICAgICAodC5hc3luY0xvb3AgPSBhc3luYyBmdW5jdGlvbiAoZSwgciwgbikgewogICAgICAgICAgICBsZXQgcyA9IERhdGUubm93KCk7CiAgICAgICAgICAgIGZvciAobGV0IG8gPSAwOyBvIDwgZTsgbysrKSB7CiAgICAgICAgICAgICAgbihvKTsKICAgICAgICAgICAgICBjb25zdCBlID0gRGF0ZS5ub3coKSAtIHM7CiAgICAgICAgICAgICAgKGUgPj0gMCAmJiBlIDwgcikgfHwgKGF3YWl0ICgwLCB0Lm5leHRUaWNrKSgpLCAocyArPSBlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgKHQudXRmOFRvQnl0ZXMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBFcnJvcigndXRmOFRvQnl0ZXMgZXhwZWN0ZWQgc3RyaW5nLCBnb3QgJyArIHR5cGVvZiBlKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShlKSk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LnRvQnl0ZXMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuY29uY2F0Qnl0ZXMgPSBmdW5jdGlvbiAoLi4uZSkgewogICAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoZS5yZWR1Y2UoKGUsIHQpID0-IGUgKyB0Lmxlbmd0aCwgMCkpOwogICAgICAgICAgICBsZXQgciA9IDA7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgZS5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIXMoZSkpIHRocm93IG5ldyBFcnJvcignVWludDhBcnJheSBleHBlY3RlZCcpOwogICAgICAgICAgICAgICAgdC5zZXQoZSwgciksIChyICs9IGUubGVuZ3RoKTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB0CiAgICAgICAgICAgICk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0Lkhhc2ggPSBjbGFzcyB7CiAgICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jbG9uZUludG8oKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgY29uc3QgaSA9IHt9LnRvU3RyaW5nOwogICAgICAgICh0LmNoZWNrT3B0cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICBpZiAodm9pZCAwICE9PSB0ICYmICdbb2JqZWN0IE9iamVjdF0nICE9PSBpLmNhbGwodCkpIHRocm93IG5ldyBFcnJvcignT3B0aW9ucyBzaG91bGQgYmUgb2JqZWN0IG9yIHVuZGVmaW5lZCcpOwogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZSwgdCk7CiAgICAgICAgfSksCiAgICAgICAgICAodC53cmFwQ29uc3RydWN0b3IgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gKHQpID0-IGUoKS51cGRhdGUodCkuZGlnZXN0KCksCiAgICAgICAgICAgICAgciA9IGUoKTsKICAgICAgICAgICAgcmV0dXJuICh0Lm91dHB1dExlbiA9IHIub3V0cHV0TGVuKSwgKHQuYmxvY2tMZW4gPSByLmJsb2NrTGVuKSwgKHQuY3JlYXRlID0gKCkgPT4gZSgpKSwgdDsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQud3JhcENvbnN0cnVjdG9yV2l0aE9wdHMgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gKHQsIHIpID0-IGUocikudXBkYXRlKHQpLmRpZ2VzdCgpLAogICAgICAgICAgICAgIHIgPSBlKHt9KTsKICAgICAgICAgICAgcmV0dXJuICh0Lm91dHB1dExlbiA9IHIub3V0cHV0TGVuKSwgKHQuYmxvY2tMZW4gPSByLmJsb2NrTGVuKSwgKHQuY3JlYXRlID0gKHQpID0-IGUodCkpLCB0OwogICAgICAgICAgfSksCiAgICAgICAgICAodC53cmFwWE9GQ29uc3RydWN0b3JXaXRoT3B0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAodCwgcikgPT4gZShyKS51cGRhdGUodCkuZGlnZXN0KCksCiAgICAgICAgICAgICAgciA9IGUoe30pOwogICAgICAgICAgICByZXR1cm4gKHQub3V0cHV0TGVuID0gci5vdXRwdXRMZW4pLCAodC5ibG9ja0xlbiA9IHIuYmxvY2tMZW4pLCAodC5jcmVhdGUgPSAodCkgPT4gZSh0KSksIHQ7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LnJhbmRvbUJ5dGVzID0gZnVuY3Rpb24gKGUgPSAzMikgewogICAgICAgICAgICBpZiAobi5jcnlwdG8gJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygbi5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKQogICAgICAgICAgICAgIHJldHVybiBuLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoZSkpOwogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMgbXVzdCBiZSBkZWZpbmVkJyk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgMTU5MjogKGUsIHQsIHIpID0-IHsKICAgICAgICByLnIodCksCiAgICAgICAgICByLmQodCwgewogICAgICAgICAgICBfX2Fzc2lnbjogKCkgPT4gbywKICAgICAgICAgICAgX19hc3luY0RlbGVnYXRvcjogKCkgPT4gRSwKICAgICAgICAgICAgX19hc3luY0dlbmVyYXRvcjogKCkgPT4gdiwKICAgICAgICAgICAgX19hc3luY1ZhbHVlczogKCkgPT4gdywKICAgICAgICAgICAgX19hd2FpdDogKCkgPT4gQSwKICAgICAgICAgICAgX19hd2FpdGVyOiAoKSA9PiBsLAogICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0OiAoKSA9PiBSLAogICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW46ICgpID0-IEwsCiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ6ICgpID0-IE4sCiAgICAgICAgICAgIF9fY3JlYXRlQmluZGluZzogKCkgPT4gZiwKICAgICAgICAgICAgX19kZWNvcmF0ZTogKCkgPT4gYSwKICAgICAgICAgICAgX19leHBvcnRTdGFyOiAoKSA9PiBoLAogICAgICAgICAgICBfX2V4dGVuZHM6ICgpID0-IHMsCiAgICAgICAgICAgIF9fZ2VuZXJhdG9yOiAoKSA9PiBkLAogICAgICAgICAgICBfX2ltcG9ydERlZmF1bHQ6ICgpID0-IE8sCiAgICAgICAgICAgIF9faW1wb3J0U3RhcjogKCkgPT4gUywKICAgICAgICAgICAgX19tYWtlVGVtcGxhdGVPYmplY3Q6ICgpID0-IFQsCiAgICAgICAgICAgIF9fbWV0YWRhdGE6ICgpID0-IHUsCiAgICAgICAgICAgIF9fcGFyYW06ICgpID0-IGMsCiAgICAgICAgICAgIF9fcmVhZDogKCkgPT4gcCwKICAgICAgICAgICAgX19yZXN0OiAoKSA9PiBpLAogICAgICAgICAgICBfX3NwcmVhZDogKCkgPT4gbSwKICAgICAgICAgICAgX19zcHJlYWRBcnJheTogKCkgPT4geSwKICAgICAgICAgICAgX19zcHJlYWRBcnJheXM6ICgpID0-IGIsCiAgICAgICAgICAgIF9fdmFsdWVzOiAoKSA9PiBnCiAgICAgICAgICB9KTsKICAgICAgICB2YXIgbiA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAobiA9CiAgICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CiAgICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgIGUuX19wcm90b19fID0gdDsKICAgICAgICAgICAgICAgIH0pIHx8CiAgICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIHIpICYmIChlW3JdID0gdFtyXSk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgIG4oZSwgdCkKICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBzKGUsIHQpIHsKICAgICAgICAgIGlmICgnZnVuY3Rpb24nICE9IHR5cGVvZiB0ICYmIG51bGwgIT09IHQpCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NsYXNzIGV4dGVuZHMgdmFsdWUgJyArIFN0cmluZyh0KSArICcgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCcpOwogICAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGU7CiAgICAgICAgICB9CiAgICAgICAgICBuKGUsIHQpLCAoZS5wcm90b3R5cGUgPSBudWxsID09PSB0ID8gT2JqZWN0LmNyZWF0ZSh0KSA6ICgoci5wcm90b3R5cGUgPSB0LnByb3RvdHlwZSksIG5ldyByKCkpKTsKICAgICAgICB9CiAgICAgICAgdmFyIG8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAobyA9CiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbiB8fAogICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCByID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IHIgPCBuOyByKyspCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgaW4gKHQgPSBhcmd1bWVudHNbcl0pKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgcykgJiYgKGVbc10gPSB0W3NdKTsKICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgICAgIHZhciByID0ge307CiAgICAgICAgICBmb3IgKHZhciBuIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBuKSAmJiB0LmluZGV4T2YobikgPCAwICYmIChyW25dID0gZVtuXSk7CiAgICAgICAgICBpZiAobnVsbCAhPSBlICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgICAgICAgdmFyIHMgPSAwOwogICAgICAgICAgICBmb3IgKG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyBzIDwgbi5sZW5ndGg7IHMrKykKICAgICAgICAgICAgICB0LmluZGV4T2YobltzXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLCBuW3NdKSAmJiAocltuW3NdXSA9IGVbbltzXV0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGEoZSwgdCwgciwgbikgewogICAgICAgICAgdmFyIHMsCiAgICAgICAgICAgIG8gPSBhcmd1bWVudHMubGVuZ3RoLAogICAgICAgICAgICBpID0gbyA8IDMgPyB0IDogbnVsbCA9PT0gbiA_IChuID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSkgOiBuOwogICAgICAgICAgaWYgKCdvYmplY3QnID09IHR5cGVvZiBSZWZsZWN0ICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpIGkgPSBSZWZsZWN0LmRlY29yYXRlKGUsIHQsIHIsIG4pOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBmb3IgKHZhciBhID0gZS5sZW5ndGggLSAxOyBhID49IDA7IGEtLSkKICAgICAgICAgICAgICAocyA9IGVbYV0pICYmIChpID0gKG8gPCAzID8gcyhpKSA6IG8gPiAzID8gcyh0LCByLCBpKSA6IHModCwgcikpIHx8IGkpOwogICAgICAgICAgcmV0dXJuIG8gPiAzICYmIGkgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIHIsIGkpLCBpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAociwgbikgewogICAgICAgICAgICB0KHIsIG4sIGUpOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICAgICAgICBpZiAoJ29iamVjdCcgPT0gdHlwZW9mIFJlZmxlY3QgJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSkgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEoZSwgdCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGwoZSwgdCwgciwgbikgewogICAgICAgICAgcmV0dXJuIG5ldyAociB8fCAociA9IFByb21pc2UpKShmdW5jdGlvbiAocywgbykgewogICAgICAgICAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYyhuLm5leHQoZSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIG8oZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGEoZSkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjKG4udGhyb3coZSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIG8oZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgIGUuZG9uZQogICAgICAgICAgICAgICAgPyBzKGUudmFsdWUpCiAgICAgICAgICAgICAgICA6ICgodCA9IGUudmFsdWUpLAogICAgICAgICAgICAgICAgICB0IGluc3RhbmNlb2YgcgogICAgICAgICAgICAgICAgICAgID8gdAogICAgICAgICAgICAgICAgICAgIDogbmV3IHIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZSh0KTsKICAgICAgICAgICAgICAgICAgICAgIH0pKS50aGVuKGksIGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGMoKG4gPSBuLmFwcGx5KGUsIHQgfHwgW10pKS5uZXh0KCkpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGQoZSwgdCkgewogICAgICAgICAgdmFyIHIsCiAgICAgICAgICAgIG4sCiAgICAgICAgICAgIHMsCiAgICAgICAgICAgIG8sCiAgICAgICAgICAgIGkgPSB7CiAgICAgICAgICAgICAgbGFiZWw6IDAsCiAgICAgICAgICAgICAgc2VudDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgaWYgKDEgJiBzWzBdKSB0aHJvdyBzWzFdOwogICAgICAgICAgICAgICAgcmV0dXJuIHNbMV07CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB0cnlzOiBbXSwKICAgICAgICAgICAgICBvcHM6IFtdCiAgICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAobyA9IHsgbmV4dDogYSgwKSwgdGhyb3c6IGEoMSksIHJldHVybjogYSgyKSB9KSwKICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgU3ltYm9sICYmCiAgICAgICAgICAgICAgKG9bU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBvCiAgICAgICAgICApOwogICAgICAgICAgZnVuY3Rpb24gYShvKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gKG8pIHsKICAgICAgICAgICAgICAgIGlmIChyKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuJyk7CiAgICAgICAgICAgICAgICBmb3IgKDsgaTsgKQogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICgociA9IDEpLAogICAgICAgICAgICAgICAgICAgICAgbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAocyA9IDIgJiBvWzBdID8gbi5yZXR1cm4gOiBvWzBdID8gbi50aHJvdyB8fCAoKHMgPSBuLnJldHVybikgJiYgcy5jYWxsKG4pLCAwKSA6IG4ubmV4dCkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgIShzID0gcy5jYWxsKG4sIG9bMV0pKS5kb25lKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzOwogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoKChuID0gMCksIHMgJiYgKG8gPSBbMiAmIG9bMF0sIHMudmFsdWVdKSwgb1swXSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG87CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5sYWJlbCsrLCB7IHZhbHVlOiBvWzFdLCBkb25lOiAhMSB9OwogICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICBpLmxhYmVsKyssIChuID0gb1sxXSksIChvID0gWzBdKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgIChvID0gaS5vcHMucG9wKCkpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoKHMgPSAocyA9IGkudHJ5cykubGVuZ3RoID4gMCAmJiBzW3MubGVuZ3RoIC0gMV0pIHx8ICg2ICE9PSBvWzBdICYmIDIgIT09IG9bMF0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzID09PSBvWzBdICYmICghcyB8fCAob1sxXSA-IHNbMF0gJiYgb1sxXSA8IHNbM10pKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBvWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICg2ID09PSBvWzBdICYmIGkubGFiZWwgPCBzWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgKGkubGFiZWwgPSBzWzFdKSwgKHMgPSBvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAocyAmJiBpLmxhYmVsIDwgc1syXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIChpLmxhYmVsID0gc1syXSksIGkub3BzLnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc1syXSAmJiBpLm9wcy5wb3AoKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbyA9IHQuY2FsbChlLCBpKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIChvID0gWzYsIGVdKSwgKG4gPSAwKTsKICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICByID0gcyA9IDA7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICg1ICYgb1swXSkgdGhyb3cgb1sxXTsKICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvWzBdID8gb1sxXSA6IHZvaWQgMCwgZG9uZTogITAgfTsKICAgICAgICAgICAgICB9KShbbywgYV0pOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgZiA9IE9iamVjdC5jcmVhdGUKICAgICAgICAgID8gZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSByKTsKICAgICAgICAgICAgICB2YXIgcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcik7CiAgICAgICAgICAgICAgKHMgJiYgISgnZ2V0JyBpbiBzID8gIXQuX19lc01vZHVsZSA6IHMud3JpdGFibGUgfHwgcy5jb25maWd1cmFibGUpKSB8fAogICAgICAgICAgICAgICAgKHMgPSB7CiAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFtyXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbiwgcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIDogZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICB2b2lkIDAgPT09IG4gJiYgKG4gPSByKSwgKGVbbl0gPSB0W3JdKTsKICAgICAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBoKGUsIHQpIHsKICAgICAgICAgIGZvciAodmFyIHIgaW4gZSkgJ2RlZmF1bHQnID09PSByIHx8IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCByKSB8fCBmKHQsIGUsIHIpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnKGUpIHsKICAgICAgICAgIHZhciB0ID0gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5pdGVyYXRvciwKICAgICAgICAgICAgciA9IHQgJiYgZVt0XSwKICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICBpZiAocikgcmV0dXJuIHIuY2FsbChlKTsKICAgICAgICAgIGlmIChlICYmICdudW1iZXInID09IHR5cGVvZiBlLmxlbmd0aCkKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiBuID49IGUubGVuZ3RoICYmIChlID0gdm9pZCAwKSwgeyB2YWx1ZTogZSAmJiBlW24rK10sIGRvbmU6ICFlIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcih0ID8gJ09iamVjdCBpcyBub3QgaXRlcmFibGUuJyA6ICdTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuJyk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICAgICAgdmFyIHIgPSAnZnVuY3Rpb24nID09IHR5cGVvZiBTeW1ib2wgJiYgZVtTeW1ib2wuaXRlcmF0b3JdOwogICAgICAgICAgaWYgKCFyKSByZXR1cm4gZTsKICAgICAgICAgIHZhciBuLAogICAgICAgICAgICBzLAogICAgICAgICAgICBvID0gci5jYWxsKGUpLAogICAgICAgICAgICBpID0gW107CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKDsgKHZvaWQgMCA9PT0gdCB8fCB0LS0gPiAwKSAmJiAhKG4gPSBvLm5leHQoKSkuZG9uZTsgKSBpLnB1c2gobi52YWx1ZSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHMgPSB7IGVycm9yOiBlIH07CiAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIG4gJiYgIW4uZG9uZSAmJiAociA9IG8ucmV0dXJuKSAmJiByLmNhbGwobyk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgaWYgKHMpIHRocm93IHMuZXJyb3I7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKCkgewogICAgICAgICAgZm9yICh2YXIgZSA9IFtdLCB0ID0gMDsgdCA8IGFyZ3VtZW50cy5sZW5ndGg7IHQrKykgZSA9IGUuY29uY2F0KHAoYXJndW1lbnRzW3RdKSk7CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYigpIHsKICAgICAgICAgIGZvciAodmFyIGUgPSAwLCB0ID0gMCwgciA9IGFyZ3VtZW50cy5sZW5ndGg7IHQgPCByOyB0KyspIGUgKz0gYXJndW1lbnRzW3RdLmxlbmd0aDsKICAgICAgICAgIHZhciBuID0gQXJyYXkoZSksCiAgICAgICAgICAgIHMgPSAwOwogICAgICAgICAgZm9yICh0ID0gMDsgdCA8IHI7IHQrKykgZm9yICh2YXIgbyA9IGFyZ3VtZW50c1t0XSwgaSA9IDAsIGEgPSBvLmxlbmd0aDsgaSA8IGE7IGkrKywgcysrKSBuW3NdID0gb1tpXTsKICAgICAgICAgIHJldHVybiBuOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB5KGUsIHQsIHIpIHsKICAgICAgICAgIGlmIChyIHx8IDIgPT09IGFyZ3VtZW50cy5sZW5ndGgpCiAgICAgICAgICAgIGZvciAodmFyIG4sIHMgPSAwLCBvID0gdC5sZW5ndGg7IHMgPCBvOyBzKyspCiAgICAgICAgICAgICAgKCFuICYmIHMgaW4gdCkgfHwgKG4gfHwgKG4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LCAwLCBzKSksIChuW3NdID0gdFtzXSkpOwogICAgICAgICAgcmV0dXJuIGUuY29uY2F0KG4gfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBBKGUpIHsKICAgICAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgQSA_ICgodGhpcy52ID0gZSksIHRoaXMpIDogbmV3IEEoZSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHYoZSwgdCwgcikgewogICAgICAgICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcignU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuJyk7CiAgICAgICAgICB2YXIgbiwKICAgICAgICAgICAgcyA9IHIuYXBwbHkoZSwgdCB8fCBbXSksCiAgICAgICAgICAgIG8gPSBbXTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIChuID0ge30pLAogICAgICAgICAgICBpKCduZXh0JyksCiAgICAgICAgICAgIGkoJ3Rocm93JyksCiAgICAgICAgICAgIGkoJ3JldHVybicpLAogICAgICAgICAgICAobltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBuCiAgICAgICAgICApOwogICAgICAgICAgZnVuY3Rpb24gaShlKSB7CiAgICAgICAgICAgIHNbZV0gJiYKICAgICAgICAgICAgICAobltlXSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHIsIG4pIHsKICAgICAgICAgICAgICAgICAgby5wdXNoKFtlLCB0LCByLCBuXSkgPiAxIHx8IGEoZSwgdCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIChyID0gc1tlXSh0KSkudmFsdWUgaW5zdGFuY2VvZiBBID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihjLCB1KSA6IGwob1swXVsyXSwgcik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBsKG9bMF1bM10sIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciByOwogICAgICAgICAgfQogICAgICAgICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgICAgICAgIGEoJ25leHQnLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGZ1bmN0aW9uIHUoZSkgewogICAgICAgICAgICBhKCd0aHJvdycsIGUpOwogICAgICAgICAgfQogICAgICAgICAgZnVuY3Rpb24gbChlLCB0KSB7CiAgICAgICAgICAgIGUodCksIG8uc2hpZnQoKSwgby5sZW5ndGggJiYgYShvWzBdWzBdLCBvWzBdWzFdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gRShlKSB7CiAgICAgICAgICB2YXIgdCwgcjsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICh0ID0ge30pLAogICAgICAgICAgICBuKCduZXh0JyksCiAgICAgICAgICAgIG4oJ3Rocm93JywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgbigncmV0dXJuJyksCiAgICAgICAgICAgICh0W1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICB0CiAgICAgICAgICApOwogICAgICAgICAgZnVuY3Rpb24gbihuLCBzKSB7CiAgICAgICAgICAgIHRbbl0gPSBlW25dCiAgICAgICAgICAgICAgPyBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gKHIgPSAhcikgPyB7IHZhbHVlOiBBKGVbbl0odCkpLCBkb25lOiAncmV0dXJuJyA9PT0gbiB9IDogcyA_IHModCkgOiB0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIDogczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdyhlKSB7CiAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC4nKTsKICAgICAgICAgIHZhciB0LAogICAgICAgICAgICByID0gZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl07CiAgICAgICAgICByZXR1cm4gcgogICAgICAgICAgICA_IHIuY2FsbChlKQogICAgICAgICAgICA6ICgoZSA9IGcoZSkpLAogICAgICAgICAgICAgICh0ID0ge30pLAogICAgICAgICAgICAgIG4oJ25leHQnKSwKICAgICAgICAgICAgICBuKCd0aHJvdycpLAogICAgICAgICAgICAgIG4oJ3JldHVybicpLAogICAgICAgICAgICAgICh0W1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHQpOwogICAgICAgICAgZnVuY3Rpb24gbihyKSB7CiAgICAgICAgICAgIHRbcl0gPQogICAgICAgICAgICAgIGVbcl0gJiYKICAgICAgICAgICAgICBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChuLCBzKSB7CiAgICAgICAgICAgICAgICAgICEoZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobikudGhlbihmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgICAgZSh7IHZhbHVlOiB0LCBkb25lOiByIH0pOwogICAgICAgICAgICAgICAgICAgIH0sIHQpOwogICAgICAgICAgICAgICAgICB9KShuLCBzLCAodCA9IGVbcl0odCkpLmRvbmUsIHQudmFsdWUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gVChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5ID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICdyYXcnLCB7IHZhbHVlOiB0IH0pIDogKGUucmF3ID0gdCksIGU7CiAgICAgICAgfQogICAgICAgIHZhciBQID0gT2JqZWN0LmNyZWF0ZQogICAgICAgICAgPyBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogITAsIHZhbHVlOiB0IH0pOwogICAgICAgICAgICB9CiAgICAgICAgICA6IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgZS5kZWZhdWx0ID0gdDsKICAgICAgICAgICAgfTsKICAgICAgICBmdW5jdGlvbiBTKGUpIHsKICAgICAgICAgIGlmIChlICYmIGUuX19lc01vZHVsZSkgcmV0dXJuIGU7CiAgICAgICAgICB2YXIgdCA9IHt9OwogICAgICAgICAgaWYgKG51bGwgIT0gZSkgZm9yICh2YXIgciBpbiBlKSAnZGVmYXVsdCcgIT09IHIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHIpICYmIGYodCwgZSwgcik7CiAgICAgICAgICByZXR1cm4gUCh0LCBlKSwgdDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gTyhlKSB7CiAgICAgICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIFIoZSwgdCwgciwgbikgewogICAgICAgICAgaWYgKCdhJyA9PT0gciAmJiAhbikgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyJyk7CiAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA_IGUgIT09IHQgfHwgIW4gOiAhdC5oYXMoZSkpCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdCcpOwogICAgICAgICAgcmV0dXJuICdtJyA9PT0gciA_IG4gOiAnYScgPT09IHIgPyBuLmNhbGwoZSkgOiBuID8gbi52YWx1ZSA6IHQuZ2V0KGUpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBOKGUsIHQsIHIsIG4sIHMpIHsKICAgICAgICAgIGlmICgnbScgPT09IG4pIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZScpOwogICAgICAgICAgaWYgKCdhJyA9PT0gbiAmJiAhcykgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyJyk7CiAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA_IGUgIT09IHQgfHwgIXMgOiAhdC5oYXMoZSkpCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0Jyk7CiAgICAgICAgICByZXR1cm4gJ2EnID09PSBuID8gcy5jYWxsKGUsIHIpIDogcyA_IChzLnZhbHVlID0gcikgOiB0LnNldChlLCByKSwgcjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gTChlLCB0KSB7CiAgICAgICAgICBpZiAobnVsbCA9PT0gdCB8fCAoJ29iamVjdCcgIT0gdHlwZW9mIHQgJiYgJ2Z1bmN0aW9uJyAhPSB0eXBlb2YgdCkpCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0Iik7CiAgICAgICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZSA_IHQgPT09IGUgOiBlLmhhcyh0KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIDE3Mjg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgY29uc3QgbiA9IHIoNzg0KTsKICAgICAgICAobi5jcmVhdGVXZWJTb2NrZXRTdHJlYW0gPSByKDI3OTIpKSwKICAgICAgICAgIChuLlNlcnZlciA9IHIoNzg4MCkpLAogICAgICAgICAgKG4uUmVjZWl2ZXIgPSByKDI0NzYpKSwKICAgICAgICAgIChuLlNlbmRlciA9IHIoNDQxNikpLAogICAgICAgICAgKG4uV2ViU29ja2V0ID0gbiksCiAgICAgICAgICAobi5XZWJTb2NrZXRTZXJ2ZXIgPSBuLlNlcnZlciksCiAgICAgICAgICAoZS5leHBvcnRzID0gbik7CiAgICAgIH0sCiAgICAgIDkwMTY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgY29uc3QgeyBFTVBUWV9CVUZGRVI6IG4gfSA9IHIoMjkyOCk7CiAgICAgICAgZnVuY3Rpb24gcyhlLCB0KSB7CiAgICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHJldHVybiBuOwogICAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gZVswXTsKICAgICAgICAgIGNvbnN0IHIgPSBCdWZmZXIuYWxsb2NVbnNhZmUodCk7CiAgICAgICAgICBsZXQgcyA9IDA7CiAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgY29uc3QgbiA9IGVbdF07CiAgICAgICAgICAgIHIuc2V0KG4sIHMpLCAocyArPSBuLmxlbmd0aCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcyA8IHQgPyByLnNsaWNlKDAsIHMpIDogcjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbyhlLCB0LCByLCBuLCBzKSB7CiAgICAgICAgICBmb3IgKGxldCBvID0gMDsgbyA8IHM7IG8rKykgcltuICsgb10gPSBlW29dIF4gdFszICYgb107CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGkoZSwgdCkgewogICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKSBlW3JdIF49IHRbMyAmIHJdOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICAgIHJldHVybiBlLmJ5dGVMZW5ndGggPT09IGUuYnVmZmVyLmJ5dGVMZW5ndGgKICAgICAgICAgICAgPyBlLmJ1ZmZlcgogICAgICAgICAgICA6IGUuYnVmZmVyLnNsaWNlKGUuYnl0ZU9mZnNldCwgZS5ieXRlT2Zmc2V0ICsgZS5ieXRlTGVuZ3RoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgICAgICBpZiAoKChjLnJlYWRPbmx5ID0gITApLCBCdWZmZXIuaXNCdWZmZXIoZSkpKSByZXR1cm4gZTsKICAgICAgICAgIGxldCB0OwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyCiAgICAgICAgICAgICAgPyAodCA9IEJ1ZmZlci5mcm9tKGUpKQogICAgICAgICAgICAgIDogQXJyYXlCdWZmZXIuaXNWaWV3KGUpCiAgICAgICAgICAgICAgICA_ICh0ID0gQnVmZmVyLmZyb20oZS5idWZmZXIsIGUuYnl0ZU9mZnNldCwgZS5ieXRlTGVuZ3RoKSkKICAgICAgICAgICAgICAgIDogKCh0ID0gQnVmZmVyLmZyb20oZSkpLCAoYy5yZWFkT25seSA9ICExKSksCiAgICAgICAgICAgIHQKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCB0ID0gcig1NDI0KTsKICAgICAgICAgIGUuZXhwb3J0cyA9IHsKICAgICAgICAgICAgY29uY2F0OiBzLAogICAgICAgICAgICBtYXNrKGUsIHIsIG4sIHMsIGkpIHsKICAgICAgICAgICAgICBpIDwgNDggPyBvKGUsIHIsIG4sIHMsIGkpIDogdC5tYXNrKGUsIHIsIG4sIHMsIGkpOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b0FycmF5QnVmZmVyOiBhLAogICAgICAgICAgICB0b0J1ZmZlcjogYywKICAgICAgICAgICAgdW5tYXNrKGUsIHIpIHsKICAgICAgICAgICAgICBlLmxlbmd0aCA8IDMyID8gaShlLCByKSA6IHQudW5tYXNrKGUsIHIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgIGUuZXhwb3J0cyA9IHsgY29uY2F0OiBzLCBtYXNrOiBvLCB0b0FycmF5QnVmZmVyOiBhLCB0b0J1ZmZlcjogYywgdW5tYXNrOiBpIH07CiAgICAgICAgfQogICAgICB9LAogICAgICAyOTI4OiAoZSkgPT4gewogICAgICAgIGUuZXhwb3J0cyA9IHsKICAgICAgICAgIEJJTkFSWV9UWVBFUzogWydub2RlYnVmZmVyJywgJ2FycmF5YnVmZmVyJywgJ2ZyYWdtZW50cyddLAogICAgICAgICAgRU1QVFlfQlVGRkVSOiBCdWZmZXIuYWxsb2MoMCksCiAgICAgICAgICBHVUlEOiAnMjU4RUFGQTUtRTkxNC00N0RBLTk1Q0EtQzVBQjBEQzg1QjExJywKICAgICAgICAgIGtGb3JPbkV2ZW50QXR0cmlidXRlOiBTeW1ib2woJ2tJc0Zvck9uRXZlbnRBdHRyaWJ1dGUnKSwKICAgICAgICAgIGtMaXN0ZW5lcjogU3ltYm9sKCdrTGlzdGVuZXInKSwKICAgICAgICAgIGtTdGF0dXNDb2RlOiBTeW1ib2woJ3N0YXR1cy1jb2RlJyksCiAgICAgICAgICBrV2ViU29ja2V0OiBTeW1ib2woJ3dlYnNvY2tldCcpLAogICAgICAgICAgTk9PUDogKCkgPT4ge30KICAgICAgICB9OwogICAgICB9LAogICAgICAyODAwOiAoZSwgdCwgcikgPT4gewogICAgICAgIGNvbnN0IHsga0Zvck9uRXZlbnRBdHRyaWJ1dGU6IG4sIGtMaXN0ZW5lcjogcyB9ID0gcigyOTI4KSwKICAgICAgICAgIG8gPSBTeW1ib2woJ2tDb2RlJyksCiAgICAgICAgICBpID0gU3ltYm9sKCdrRGF0YScpLAogICAgICAgICAgYSA9IFN5bWJvbCgna0Vycm9yJyksCiAgICAgICAgICBjID0gU3ltYm9sKCdrTWVzc2FnZScpLAogICAgICAgICAgdSA9IFN5bWJvbCgna1JlYXNvbicpLAogICAgICAgICAgbCA9IFN5bWJvbCgna1RhcmdldCcpLAogICAgICAgICAgZCA9IFN5bWJvbCgna1R5cGUnKSwKICAgICAgICAgIGYgPSBTeW1ib2woJ2tXYXNDbGVhbicpOwogICAgICAgIGNsYXNzIGggewogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAodGhpc1tsXSA9IG51bGwpLCAodGhpc1tkXSA9IGUpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHRhcmdldCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXNbbF07CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgdHlwZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXNbZF07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoLnByb3RvdHlwZSwgJ3RhcmdldCcsIHsgZW51bWVyYWJsZTogITAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaC5wcm90b3R5cGUsICd0eXBlJywgeyBlbnVtZXJhYmxlOiAhMCB9KTsKICAgICAgICBjbGFzcyBnIGV4dGVuZHMgaCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0ID0ge30pIHsKICAgICAgICAgICAgc3VwZXIoZSksCiAgICAgICAgICAgICAgKHRoaXNbb10gPSB2b2lkIDAgPT09IHQuY29kZSA_IDAgOiB0LmNvZGUpLAogICAgICAgICAgICAgICh0aGlzW3VdID0gdm9pZCAwID09PSB0LnJlYXNvbiA_ICcnIDogdC5yZWFzb24pLAogICAgICAgICAgICAgICh0aGlzW2ZdID0gdm9pZCAwICE9PSB0Lndhc0NsZWFuICYmIHQud2FzQ2xlYW4pOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGNvZGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzW29dOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHJlYXNvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXNbdV07CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgd2FzQ2xlYW4oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzW2ZdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZy5wcm90b3R5cGUsICdjb2RlJywgeyBlbnVtZXJhYmxlOiAhMCB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnLnByb3RvdHlwZSwgJ3JlYXNvbicsIHsgZW51bWVyYWJsZTogITAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZy5wcm90b3R5cGUsICd3YXNDbGVhbicsIHsgZW51bWVyYWJsZTogITAgfSk7CiAgICAgICAgY2xhc3MgcCBleHRlbmRzIGggewogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCA9IHt9KSB7CiAgICAgICAgICAgIHN1cGVyKGUpLAogICAgICAgICAgICAgICh0aGlzW2FdID0gdm9pZCAwID09PSB0LmVycm9yID8gbnVsbCA6IHQuZXJyb3IpLAogICAgICAgICAgICAgICh0aGlzW2NdID0gdm9pZCAwID09PSB0Lm1lc3NhZ2UgPyAnJyA6IHQubWVzc2FnZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgZXJyb3IoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzW2FdOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IG1lc3NhZ2UoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzW2NdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocC5wcm90b3R5cGUsICdlcnJvcicsIHsgZW51bWVyYWJsZTogITAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocC5wcm90b3R5cGUsICdtZXNzYWdlJywgeyBlbnVtZXJhYmxlOiAhMCB9KTsKICAgICAgICBjbGFzcyBtIGV4dGVuZHMgaCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0ID0ge30pIHsKICAgICAgICAgICAgc3VwZXIoZSksICh0aGlzW2ldID0gdm9pZCAwID09PSB0LmRhdGEgPyBudWxsIDogdC5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBkYXRhKCkgewogICAgICAgICAgICByZXR1cm4gdGhpc1tpXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG0ucHJvdG90eXBlLCAnZGF0YScsIHsgZW51bWVyYWJsZTogITAgfSk7CiAgICAgICAgY29uc3QgYiA9IHsKICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZSwgdCwgciA9IHt9KSB7CiAgICAgICAgICAgIGxldCBvOwogICAgICAgICAgICBpZiAoJ21lc3NhZ2UnID09PSBlKQogICAgICAgICAgICAgIG8gPSBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBtKCdtZXNzYWdlJywgeyBkYXRhOiByID8gZSA6IGUudG9TdHJpbmcoKSB9KTsKICAgICAgICAgICAgICAgIChuW2xdID0gdGhpcyksIHQuY2FsbCh0aGlzLCBuKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICBlbHNlIGlmICgnY2xvc2UnID09PSBlKQogICAgICAgICAgICAgIG8gPSBmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBnKCdjbG9zZScsIHsKICAgICAgICAgICAgICAgICAgY29kZTogZSwKICAgICAgICAgICAgICAgICAgcmVhc29uOiByLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgIHdhc0NsZWFuOiB0aGlzLl9jbG9zZUZyYW1lUmVjZWl2ZWQgJiYgdGhpcy5fY2xvc2VGcmFtZVNlbnQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgKG5bbF0gPSB0aGlzKSwgdC5jYWxsKHRoaXMsIG4pOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIGVsc2UgaWYgKCdlcnJvcicgPT09IGUpCiAgICAgICAgICAgICAgbyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IHAoJ2Vycm9yJywgeyBlcnJvcjogZSwgbWVzc2FnZTogZS5tZXNzYWdlIH0pOwogICAgICAgICAgICAgICAgKHJbbF0gPSB0aGlzKSwgdC5jYWxsKHRoaXMsIHIpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGlmICgnb3BlbicgIT09IGUpIHJldHVybjsKICAgICAgICAgICAgICBvID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBoKCdvcGVuJyk7CiAgICAgICAgICAgICAgICAoZVtsXSA9IHRoaXMpLCB0LmNhbGwodGhpcywgZSk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICAob1tuXSA9ICEhcltuXSksIChvW3NdID0gdCksIHIub25jZSA_IHRoaXMub25jZShlLCBvKSA6IHRoaXMub24oZSwgbyk7CiAgICAgICAgICB9LAogICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihlLCB0KSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLmxpc3RlbmVycyhlKSkKICAgICAgICAgICAgICBpZiAocltzXSA9PT0gdCAmJiAhcltuXSkgewogICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihlLCByKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGUuZXhwb3J0cyA9IHsgQ2xvc2VFdmVudDogZywgRXJyb3JFdmVudDogcCwgRXZlbnQ6IGgsIEV2ZW50VGFyZ2V0OiBiLCBNZXNzYWdlRXZlbnQ6IG0gfTsKICAgICAgfSwKICAgICAgMTI3MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBjb25zdCB7IHRva2VuQ2hhcnM6IG4gfSA9IHIoMjU3Nik7CiAgICAgICAgZnVuY3Rpb24gcyhlLCB0LCByKSB7CiAgICAgICAgICB2b2lkIDAgPT09IGVbdF0gPyAoZVt0XSA9IFtyXSkgOiBlW3RdLnB1c2gocik7CiAgICAgICAgfQogICAgICAgIGUuZXhwb3J0cyA9IHsKICAgICAgICAgIGZvcm1hdDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGUpCiAgICAgICAgICAgICAgLm1hcCgodCkgPT4gewogICAgICAgICAgICAgICAgbGV0IHIgPSBlW3RdOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheShyKSB8fCAociA9IFtyXSksCiAgICAgICAgICAgICAgICAgIHIKICAgICAgICAgICAgICAgICAgICAubWFwKChlKSA9PgogICAgICAgICAgICAgICAgICAgICAgW3RdCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZSkubWFwKCh0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9IGVbdF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyKSB8fCAociA9IFtyXSksIHIubWFwKChlKSA9PiAoITAgPT09IGUgPyB0IDogYCR7dH09JHtlfWApKS5qb2luKCc7ICcpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJzsgJykKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJywgJykKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAuam9pbignLCAnKTsKICAgICAgICAgIH0sCiAgICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgICAgIGxldCByLAogICAgICAgICAgICAgIG8sCiAgICAgICAgICAgICAgaSA9IE9iamVjdC5jcmVhdGUobnVsbCksCiAgICAgICAgICAgICAgYSA9ICExLAogICAgICAgICAgICAgIGMgPSAhMSwKICAgICAgICAgICAgICB1ID0gITEsCiAgICAgICAgICAgICAgbCA9IC0xLAogICAgICAgICAgICAgIGQgPSAtMSwKICAgICAgICAgICAgICBmID0gLTEsCiAgICAgICAgICAgICAgaCA9IDA7CiAgICAgICAgICAgIGZvciAoOyBoIDwgZS5sZW5ndGg7IGgrKykKICAgICAgICAgICAgICBpZiAoKChkID0gZS5jaGFyQ29kZUF0KGgpKSwgdm9pZCAwID09PSByKSkKICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gZiAmJiAxID09PSBuW2RdKSAtMSA9PT0gbCAmJiAobCA9IGgpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoMCA9PT0gaCB8fCAoMzIgIT09IGQgJiYgOSAhPT0gZCkpIHsKICAgICAgICAgICAgICAgICAgaWYgKDU5ICE9PSBkICYmIDQ0ICE9PSBkKSB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aH1gKTsKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gbCkgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2h9YCk7CiAgICAgICAgICAgICAgICAgICAgLTEgPT09IGYgJiYgKGYgPSBoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5zbGljZShsLCBmKTsKICAgICAgICAgICAgICAgICAgICA0NCA9PT0gZCA_IChzKHQsIG4sIGkpLCAoaSA9IE9iamVjdC5jcmVhdGUobnVsbCkpKSA6IChyID0gbiksIChsID0gZiA9IC0xKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIC0xID09PSBmICYmIC0xICE9PSBsICYmIChmID0gaCk7CiAgICAgICAgICAgICAgZWxzZSBpZiAodm9pZCAwID09PSBvKQogICAgICAgICAgICAgICAgaWYgKC0xID09PSBmICYmIDEgPT09IG5bZF0pIC0xID09PSBsICYmIChsID0gaCk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgzMiA9PT0gZCB8fCA5ID09PSBkKSAtMSA9PT0gZiAmJiAtMSAhPT0gbCAmJiAoZiA9IGgpOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoNTkgPT09IGQgfHwgNDQgPT09IGQpIHsKICAgICAgICAgICAgICAgICAgaWYgKC0xID09PSBsKSB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aH1gKTsKICAgICAgICAgICAgICAgICAgLTEgPT09IGYgJiYgKGYgPSBoKSwKICAgICAgICAgICAgICAgICAgICBzKGksIGUuc2xpY2UobCwgZiksICEwKSwKICAgICAgICAgICAgICAgICAgICA0NCA9PT0gZCAmJiAocyh0LCByLCBpKSwgKGkgPSBPYmplY3QuY3JlYXRlKG51bGwpKSwgKHIgPSB2b2lkIDApKSwKICAgICAgICAgICAgICAgICAgICAobCA9IGYgPSAtMSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoNjEgIT09IGQgfHwgLTEgPT09IGwgfHwgLTEgIT09IGYpIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtofWApOwogICAgICAgICAgICAgICAgICAobyA9IGUuc2xpY2UobCwgaCkpLCAobCA9IGYgPSAtMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoYykgewogICAgICAgICAgICAgICAgaWYgKDEgIT09IG5bZF0pIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtofWApOwogICAgICAgICAgICAgICAgLTEgPT09IGwgPyAobCA9IGgpIDogYSB8fCAoYSA9ICEwKSwgKGMgPSAhMSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh1KQogICAgICAgICAgICAgICAgaWYgKDEgPT09IG5bZF0pIC0xID09PSBsICYmIChsID0gaCk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICgzNCA9PT0gZCAmJiAtMSAhPT0gbCkgKHUgPSAhMSksIChmID0gaCk7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgaWYgKDkyICE9PSBkKSB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aH1gKTsKICAgICAgICAgICAgICAgICAgYyA9ICEwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgaWYgKDM0ID09PSBkICYmIDYxID09PSBlLmNoYXJDb2RlQXQoaCAtIDEpKSB1ID0gITA7CiAgICAgICAgICAgICAgZWxzZSBpZiAoLTEgPT09IGYgJiYgMSA9PT0gbltkXSkgLTEgPT09IGwgJiYgKGwgPSBoKTsKICAgICAgICAgICAgICBlbHNlIGlmICgtMSA9PT0gbCB8fCAoMzIgIT09IGQgJiYgOSAhPT0gZCkpIHsKICAgICAgICAgICAgICAgIGlmICg1OSAhPT0gZCAmJiA0NCAhPT0gZCkgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2h9YCk7CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gbCkgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2h9YCk7CiAgICAgICAgICAgICAgICAgIC0xID09PSBmICYmIChmID0gaCk7CiAgICAgICAgICAgICAgICAgIGxldCBuID0gZS5zbGljZShsLCBmKTsKICAgICAgICAgICAgICAgICAgYSAmJiAoKG4gPSBuLnJlcGxhY2UoL1xcL2csICcnKSksIChhID0gITEpKSwKICAgICAgICAgICAgICAgICAgICBzKGksIG8sIG4pLAogICAgICAgICAgICAgICAgICAgIDQ0ID09PSBkICYmIChzKHQsIHIsIGkpLCAoaSA9IE9iamVjdC5jcmVhdGUobnVsbCkpLCAociA9IHZvaWQgMCkpLAogICAgICAgICAgICAgICAgICAgIChvID0gdm9pZCAwKSwKICAgICAgICAgICAgICAgICAgICAobCA9IGYgPSAtMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIC0xID09PSBmICYmIChmID0gaCk7CiAgICAgICAgICAgIGlmICgtMSA9PT0gbCB8fCB1IHx8IDMyID09PSBkIHx8IDkgPT09IGQpIHRocm93IG5ldyBTeW50YXhFcnJvcignVW5leHBlY3RlZCBlbmQgb2YgaW5wdXQnKTsKICAgICAgICAgICAgLTEgPT09IGYgJiYgKGYgPSBoKTsKICAgICAgICAgICAgY29uc3QgZyA9IGUuc2xpY2UobCwgZik7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgdm9pZCAwID09PSByCiAgICAgICAgICAgICAgICA_IHModCwgZywgaSkKICAgICAgICAgICAgICAgIDogKHZvaWQgMCA9PT0gbyA_IHMoaSwgZywgITApIDogcyhpLCBvLCBhID8gZy5yZXBsYWNlKC9cXC9nLCAnJykgOiBnKSwgcyh0LCByLCBpKSksCiAgICAgICAgICAgICAgdAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIDQyMDA6IChlKSA9PiB7CiAgICAgICAgY29uc3QgdCA9IFN5bWJvbCgna0RvbmUnKSwKICAgICAgICAgIHIgPSBTeW1ib2woJ2tSdW4nKTsKICAgICAgICBlLmV4cG9ydHMgPSBjbGFzcyB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgICh0aGlzW3RdID0gKCkgPT4gewogICAgICAgICAgICAgIHRoaXMucGVuZGluZy0tLCB0aGlzW3JdKCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICh0aGlzLmNvbmN1cnJlbmN5ID0gZSB8fCAxIC8gMCksCiAgICAgICAgICAgICAgKHRoaXMuam9icyA9IFtdKSwKICAgICAgICAgICAgICAodGhpcy5wZW5kaW5nID0gMCk7CiAgICAgICAgICB9CiAgICAgICAgICBhZGQoZSkgewogICAgICAgICAgICB0aGlzLmpvYnMucHVzaChlKSwgdGhpc1tyXSgpOwogICAgICAgICAgfQogICAgICAgICAgW3JdKCkgewogICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nICE9PSB0aGlzLmNvbmN1cnJlbmN5ICYmIHRoaXMuam9icy5sZW5ndGgpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5qb2JzLnNoaWZ0KCk7CiAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nKyssIGUodGhpc1t0XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICA4ZTM6IChlLCB0LCByKSA9PiB7CiAgICAgICAgY29uc3QgbiA9IHIoNTkyKSwKICAgICAgICAgIHMgPSByKDkwMTYpLAogICAgICAgICAgbyA9IHIoNDIwMCksCiAgICAgICAgICB7IGtTdGF0dXNDb2RlOiBpIH0gPSByKDI5MjgpLAogICAgICAgICAgYSA9IEJ1ZmZlci5mcm9tKFswLCAwLCAyNTUsIDI1NV0pLAogICAgICAgICAgYyA9IFN5bWJvbCgncGVybWVzc2FnZS1kZWZsYXRlJyksCiAgICAgICAgICB1ID0gU3ltYm9sKCd0b3RhbC1sZW5ndGgnKSwKICAgICAgICAgIGwgPSBTeW1ib2woJ2NhbGxiYWNrJyksCiAgICAgICAgICBkID0gU3ltYm9sKCdidWZmZXJzJyksCiAgICAgICAgICBmID0gU3ltYm9sKCdlcnJvcicpOwogICAgICAgIGxldCBoOwogICAgICAgIGZ1bmN0aW9uIGcoZSkgewogICAgICAgICAgdGhpc1tkXS5wdXNoKGUpLCAodGhpc1t1XSArPSBlLmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgICAgKHRoaXNbdV0gKz0gZS5sZW5ndGgpLAogICAgICAgICAgICB0aGlzW2NdLl9tYXhQYXlsb2FkIDwgMSB8fCB0aGlzW3VdIDw9IHRoaXNbY10uX21heFBheWxvYWQKICAgICAgICAgICAgICA_IHRoaXNbZF0ucHVzaChlKQogICAgICAgICAgICAgIDogKCh0aGlzW2ZdID0gbmV3IFJhbmdlRXJyb3IoJ01heCBwYXlsb2FkIHNpemUgZXhjZWVkZWQnKSksCiAgICAgICAgICAgICAgICAodGhpc1tmXS5jb2RlID0gJ1dTX0VSUl9VTlNVUFBPUlRFRF9NRVNTQUdFX0xFTkdUSCcpLAogICAgICAgICAgICAgICAgKHRoaXNbZl1baV0gPSAxMDA5KSwKICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBwKSwKICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG0oZSkgewogICAgICAgICAgKHRoaXNbY10uX2luZmxhdGUgPSBudWxsKSwgKGVbaV0gPSAxMDA3KSwgdGhpc1tsXShlKTsKICAgICAgICB9CiAgICAgICAgZS5leHBvcnRzID0gY2xhc3MgewogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgKCh0aGlzLl9tYXhQYXlsb2FkID0gMCB8IHIpLAogICAgICAgICAgICAgICh0aGlzLl9vcHRpb25zID0gZSB8fCB7fSksCiAgICAgICAgICAgICAgKHRoaXMuX3RocmVzaG9sZCA9IHZvaWQgMCAhPT0gdGhpcy5fb3B0aW9ucy50aHJlc2hvbGQgPyB0aGlzLl9vcHRpb25zLnRocmVzaG9sZCA6IDEwMjQpLAogICAgICAgICAgICAgICh0aGlzLl9pc1NlcnZlciA9ICEhdCksCiAgICAgICAgICAgICAgKHRoaXMuX2RlZmxhdGUgPSBudWxsKSwKICAgICAgICAgICAgICAodGhpcy5faW5mbGF0ZSA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLnBhcmFtcyA9IG51bGwpLAogICAgICAgICAgICAgICFoKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdm9pZCAwICE9PSB0aGlzLl9vcHRpb25zLmNvbmN1cnJlbmN5TGltaXQgPyB0aGlzLl9vcHRpb25zLmNvbmN1cnJlbmN5TGltaXQgOiAxMDsKICAgICAgICAgICAgICBoID0gbmV3IG8oZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBnZXQgZXh0ZW5zaW9uTmFtZSgpIHsKICAgICAgICAgICAgcmV0dXJuICdwZXJtZXNzYWdlLWRlZmxhdGUnOwogICAgICAgICAgfQogICAgICAgICAgb2ZmZXIoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB7fTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0aGlzLl9vcHRpb25zLnNlcnZlck5vQ29udGV4dFRha2VvdmVyICYmIChlLnNlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyID0gITApLAogICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIgJiYgKGUuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIgPSAhMCksCiAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5zZXJ2ZXJNYXhXaW5kb3dCaXRzICYmIChlLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHMpLAogICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cwogICAgICAgICAgICAgICAgPyAoZS5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzKQogICAgICAgICAgICAgICAgOiBudWxsID09IHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyAmJiAoZS5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gITApLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGFjY2VwdChlKSB7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKGUgPSB0aGlzLm5vcm1hbGl6ZVBhcmFtcyhlKSksCiAgICAgICAgICAgICAgKHRoaXMucGFyYW1zID0gdGhpcy5faXNTZXJ2ZXIgPyB0aGlzLmFjY2VwdEFzU2VydmVyKGUpIDogdGhpcy5hY2NlcHRBc0NsaWVudChlKSksCiAgICAgICAgICAgICAgdGhpcy5wYXJhbXMKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGNsZWFudXAoKSB7CiAgICAgICAgICAgIGlmICgodGhpcy5faW5mbGF0ZSAmJiAodGhpcy5faW5mbGF0ZS5jbG9zZSgpLCAodGhpcy5faW5mbGF0ZSA9IG51bGwpKSwgdGhpcy5fZGVmbGF0ZSkpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5fZGVmbGF0ZVtsXTsKICAgICAgICAgICAgICB0aGlzLl9kZWZsYXRlLmNsb3NlKCksCiAgICAgICAgICAgICAgICAodGhpcy5fZGVmbGF0ZSA9IG51bGwpLAogICAgICAgICAgICAgICAgZSAmJiBlKG5ldyBFcnJvcignVGhlIGRlZmxhdGUgc3RyZWFtIHdhcyBjbG9zZWQgd2hpbGUgZGF0YSB3YXMgYmVpbmcgcHJvY2Vzc2VkJykpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBhY2NlcHRBc1NlcnZlcihlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl9vcHRpb25zLAogICAgICAgICAgICAgIHIgPSBlLmZpbmQoCiAgICAgICAgICAgICAgICAoZSkgPT4KICAgICAgICAgICAgICAgICAgISgKICAgICAgICAgICAgICAgICAgICAoITEgPT09IHQuc2VydmVyTm9Db250ZXh0VGFrZW92ZXIgJiYgZS5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlcikgfHwKICAgICAgICAgICAgICAgICAgICAoZS5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzICYmCiAgICAgICAgICAgICAgICAgICAgICAoITEgPT09IHQuc2VydmVyTWF4V2luZG93Qml0cyB8fAogICAgICAgICAgICAgICAgICAgICAgICAoJ251bWJlcicgPT0gdHlwZW9mIHQuc2VydmVyTWF4V2luZG93Qml0cyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2VydmVyTWF4V2luZG93Qml0cyA-IGUuc2VydmVyX21heF93aW5kb3dfYml0cykpKSB8fAogICAgICAgICAgICAgICAgICAgICgnbnVtYmVyJyA9PSB0eXBlb2YgdC5jbGllbnRNYXhXaW5kb3dCaXRzICYmICFlLmNsaWVudF9tYXhfd2luZG93X2JpdHMpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICApOwogICAgICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBFcnJvcignTm9uZSBvZiB0aGUgZXh0ZW5zaW9uIG9mZmVycyBjYW4gYmUgYWNjZXB0ZWQnKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0LnNlcnZlck5vQ29udGV4dFRha2VvdmVyICYmIChyLnNlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyID0gITApLAogICAgICAgICAgICAgIHQuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIgJiYgKHIuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIgPSAhMCksCiAgICAgICAgICAgICAgJ251bWJlcicgPT0gdHlwZW9mIHQuc2VydmVyTWF4V2luZG93Qml0cyAmJiAoci5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzID0gdC5zZXJ2ZXJNYXhXaW5kb3dCaXRzKSwKICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgdC5jbGllbnRNYXhXaW5kb3dCaXRzCiAgICAgICAgICAgICAgICA_IChyLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPSB0LmNsaWVudE1heFdpbmRvd0JpdHMpCiAgICAgICAgICAgICAgICA6ICghMCAhPT0gci5jbGllbnRfbWF4X3dpbmRvd19iaXRzICYmICExICE9PSB0LmNsaWVudE1heFdpbmRvd0JpdHMpIHx8IGRlbGV0ZSByLmNsaWVudF9tYXhfd2luZG93X2JpdHMsCiAgICAgICAgICAgICAgcgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYWNjZXB0QXNDbGllbnQoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gZVswXTsKICAgICAgICAgICAgaWYgKCExID09PSB0aGlzLl9vcHRpb25zLmNsaWVudE5vQ29udGV4dFRha2VvdmVyICYmIHQuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIpCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIHBhcmFtZXRlciAiY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIiJyk7CiAgICAgICAgICAgIGlmICh0LmNsaWVudF9tYXhfd2luZG93X2JpdHMpIHsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAhMSA9PT0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzIHx8CiAgICAgICAgICAgICAgICAoJ251bWJlcicgPT0gdHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyAmJgogICAgICAgICAgICAgICAgICB0LmNsaWVudF9tYXhfd2luZG93X2JpdHMgPiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpCiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIG9yIGludmFsaWQgcGFyYW1ldGVyICJjbGllbnRfbWF4X3dpbmRvd19iaXRzIicpOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzICYmCiAgICAgICAgICAgICAgICAodC5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9CiAgICAgICAgICBub3JtYWxpemVQYXJhbXMoZSkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIGUuZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgodCkgPT4gewogICAgICAgICAgICAgICAgICBsZXQgciA9IGVbdF07CiAgICAgICAgICAgICAgICAgIGlmIChyLmxlbmd0aCA-IDEpIHRocm93IG5ldyBFcnJvcihgUGFyYW1ldGVyICIke3R9IiBtdXN0IGhhdmUgb25seSBhIHNpbmdsZSB2YWx1ZWApOwogICAgICAgICAgICAgICAgICBpZiAoKChyID0gclswXSksICdjbGllbnRfbWF4X3dpbmRvd19iaXRzJyA9PT0gdCkpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoITAgIT09IHIpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSArcjsKICAgICAgICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihlKSB8fCBlIDwgOCB8fCBlID4gMTUpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAiJHt0fSI6ICR7cn1gKTsKICAgICAgICAgICAgICAgICAgICAgIHIgPSBlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2lzU2VydmVyKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgIiR7dH0iOiAke3J9YCk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ3NlcnZlcl9tYXhfd2luZG93X2JpdHMnID09PSB0KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICtyOwogICAgICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihlKSB8fCBlIDwgOCB8fCBlID4gMTUpCiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgIiR7dH0iOiAke3J9YCk7CiAgICAgICAgICAgICAgICAgICAgciA9IGU7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCdjbGllbnRfbm9fY29udGV4dF90YWtlb3ZlcicgIT09IHQgJiYgJ3NlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyJyAhPT0gdCkKICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJhbWV0ZXIgIiR7dH0iYCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCEwICE9PSByKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgIiR7dH0iOiAke3J9YCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZVt0XSA9IHI7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBlCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvbXByZXNzKGUsIHQsIHIpIHsKICAgICAgICAgICAgaC5hZGQoKG4pID0-IHsKICAgICAgICAgICAgICB0aGlzLl9kZWNvbXByZXNzKGUsIHQsIChlLCB0KSA9PiB7CiAgICAgICAgICAgICAgICBuKCksIHIoZSwgdCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgY29tcHJlc3MoZSwgdCwgcikgewogICAgICAgICAgICBoLmFkZCgobikgPT4gewogICAgICAgICAgICAgIHRoaXMuX2NvbXByZXNzKGUsIHQsIChlLCB0KSA9PiB7CiAgICAgICAgICAgICAgICBuKCksIHIoZSwgdCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgX2RlY29tcHJlc3MoZSwgdCwgcikgewogICAgICAgICAgICBjb25zdCBvID0gdGhpcy5faXNTZXJ2ZXIgPyAnY2xpZW50JyA6ICdzZXJ2ZXInOwogICAgICAgICAgICBpZiAoIXRoaXMuX2luZmxhdGUpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gYCR7b31fbWF4X3dpbmRvd19iaXRzYCwKICAgICAgICAgICAgICAgIHQgPSAnbnVtYmVyJyAhPSB0eXBlb2YgdGhpcy5wYXJhbXNbZV0gPyBuLlpfREVGQVVMVF9XSU5ET1dCSVRTIDogdGhpcy5wYXJhbXNbZV07CiAgICAgICAgICAgICAgKHRoaXMuX2luZmxhdGUgPSBuLmNyZWF0ZUluZmxhdGVSYXcoeyAuLi50aGlzLl9vcHRpb25zLnpsaWJJbmZsYXRlT3B0aW9ucywgd2luZG93Qml0czogdCB9KSksCiAgICAgICAgICAgICAgICAodGhpcy5faW5mbGF0ZVtjXSA9IHRoaXMpLAogICAgICAgICAgICAgICAgKHRoaXMuX2luZmxhdGVbdV0gPSAwKSwKICAgICAgICAgICAgICAgICh0aGlzLl9pbmZsYXRlW2RdID0gW10pLAogICAgICAgICAgICAgICAgdGhpcy5faW5mbGF0ZS5vbignZXJyb3InLCBtKSwKICAgICAgICAgICAgICAgIHRoaXMuX2luZmxhdGUub24oJ2RhdGEnLCBwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAodGhpcy5faW5mbGF0ZVtsXSA9IHIpLAogICAgICAgICAgICAgIHRoaXMuX2luZmxhdGUud3JpdGUoZSksCiAgICAgICAgICAgICAgdCAmJiB0aGlzLl9pbmZsYXRlLndyaXRlKGEpLAogICAgICAgICAgICAgIHRoaXMuX2luZmxhdGUuZmx1c2goKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2luZmxhdGVbZl07CiAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMuX2luZmxhdGUuY2xvc2UoKSwgKHRoaXMuX2luZmxhdGUgPSBudWxsKSwgdm9pZCByKGUpOwogICAgICAgICAgICAgICAgY29uc3QgbiA9IHMuY29uY2F0KHRoaXMuX2luZmxhdGVbZF0sIHRoaXMuX2luZmxhdGVbdV0pOwogICAgICAgICAgICAgICAgdGhpcy5faW5mbGF0ZS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkCiAgICAgICAgICAgICAgICAgID8gKHRoaXMuX2luZmxhdGUuY2xvc2UoKSwgKHRoaXMuX2luZmxhdGUgPSBudWxsKSkKICAgICAgICAgICAgICAgICAgOiAoKHRoaXMuX2luZmxhdGVbdV0gPSAwKSwKICAgICAgICAgICAgICAgICAgICAodGhpcy5faW5mbGF0ZVtkXSA9IFtdKSwKICAgICAgICAgICAgICAgICAgICB0ICYmIHRoaXMucGFyYW1zW2Ake299X25vX2NvbnRleHRfdGFrZW92ZXJgXSAmJiB0aGlzLl9pbmZsYXRlLnJlc2V0KCkpLAogICAgICAgICAgICAgICAgICByKG51bGwsIG4pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgX2NvbXByZXNzKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuX2lzU2VydmVyID8gJ3NlcnZlcicgOiAnY2xpZW50JzsKICAgICAgICAgICAgaWYgKCF0aGlzLl9kZWZsYXRlKSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IGAke299X21heF93aW5kb3dfYml0c2AsCiAgICAgICAgICAgICAgICB0ID0gJ251bWJlcicgIT0gdHlwZW9mIHRoaXMucGFyYW1zW2VdID8gbi5aX0RFRkFVTFRfV0lORE9XQklUUyA6IHRoaXMucGFyYW1zW2VdOwogICAgICAgICAgICAgICh0aGlzLl9kZWZsYXRlID0gbi5jcmVhdGVEZWZsYXRlUmF3KHsgLi4udGhpcy5fb3B0aW9ucy56bGliRGVmbGF0ZU9wdGlvbnMsIHdpbmRvd0JpdHM6IHQgfSkpLAogICAgICAgICAgICAgICAgKHRoaXMuX2RlZmxhdGVbdV0gPSAwKSwKICAgICAgICAgICAgICAgICh0aGlzLl9kZWZsYXRlW2RdID0gW10pLAogICAgICAgICAgICAgICAgdGhpcy5fZGVmbGF0ZS5vbignZGF0YScsIGcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICh0aGlzLl9kZWZsYXRlW2xdID0gciksCiAgICAgICAgICAgICAgdGhpcy5fZGVmbGF0ZS53cml0ZShlKSwKICAgICAgICAgICAgICB0aGlzLl9kZWZsYXRlLmZsdXNoKG4uWl9TWU5DX0ZMVVNILCAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RlZmxhdGUpIHJldHVybjsKICAgICAgICAgICAgICAgIGxldCBlID0gcy5jb25jYXQodGhpcy5fZGVmbGF0ZVtkXSwgdGhpcy5fZGVmbGF0ZVt1XSk7CiAgICAgICAgICAgICAgICB0ICYmIChlID0gZS5zbGljZSgwLCBlLmxlbmd0aCAtIDQpKSwKICAgICAgICAgICAgICAgICAgKHRoaXMuX2RlZmxhdGVbbF0gPSBudWxsKSwKICAgICAgICAgICAgICAgICAgKHRoaXMuX2RlZmxhdGVbdV0gPSAwKSwKICAgICAgICAgICAgICAgICAgKHRoaXMuX2RlZmxhdGVbZF0gPSBbXSksCiAgICAgICAgICAgICAgICAgIHQgJiYgdGhpcy5wYXJhbXNbYCR7b31fbm9fY29udGV4dF90YWtlb3ZlcmBdICYmIHRoaXMuX2RlZmxhdGUucmVzZXQoKSwKICAgICAgICAgICAgICAgICAgcihudWxsLCBlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICAyNDc2OiAoZSwgdCwgcikgPT4gewogICAgICAgIGNvbnN0IHsgV3JpdGFibGU6IG4gfSA9IHIoODM3OCksCiAgICAgICAgICBzID0gcig4ZTMpLAogICAgICAgICAgeyBCSU5BUllfVFlQRVM6IG8sIEVNUFRZX0JVRkZFUjogaSwga1N0YXR1c0NvZGU6IGEsIGtXZWJTb2NrZXQ6IGMgfSA9IHIoMjkyOCksCiAgICAgICAgICB7IGNvbmNhdDogdSwgdG9BcnJheUJ1ZmZlcjogbCwgdW5tYXNrOiBkIH0gPSByKDkwMTYpLAogICAgICAgICAgeyBpc1ZhbGlkU3RhdHVzQ29kZTogZiwgaXNWYWxpZFVURjg6IGggfSA9IHIoMjU3Nik7CiAgICAgICAgZnVuY3Rpb24gZyhlLCB0LCByLCBuLCBzKSB7CiAgICAgICAgICBjb25zdCBvID0gbmV3IGUociA_IGBJbnZhbGlkIFdlYlNvY2tldCBmcmFtZTogJHt0fWAgOiB0KTsKICAgICAgICAgIHJldHVybiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShvLCBnKSwgKG8uY29kZSA9IHMpLCAob1thXSA9IG4pLCBvOwogICAgICAgIH0KICAgICAgICBlLmV4cG9ydHMgPSBjbGFzcyBleHRlbmRzIG4gewogICAgICAgICAgY29uc3RydWN0b3IoZSA9IHt9KSB7CiAgICAgICAgICAgIHN1cGVyKCksCiAgICAgICAgICAgICAgKHRoaXMuX2JpbmFyeVR5cGUgPSBlLmJpbmFyeVR5cGUgfHwgb1swXSksCiAgICAgICAgICAgICAgKHRoaXMuX2V4dGVuc2lvbnMgPSBlLmV4dGVuc2lvbnMgfHwge30pLAogICAgICAgICAgICAgICh0aGlzLl9pc1NlcnZlciA9ICEhZS5pc1NlcnZlciksCiAgICAgICAgICAgICAgKHRoaXMuX21heFBheWxvYWQgPSAwIHwgZS5tYXhQYXlsb2FkKSwKICAgICAgICAgICAgICAodGhpcy5fc2tpcFVURjhWYWxpZGF0aW9uID0gISFlLnNraXBVVEY4VmFsaWRhdGlvbiksCiAgICAgICAgICAgICAgKHRoaXNbY10gPSB2b2lkIDApLAogICAgICAgICAgICAgICh0aGlzLl9idWZmZXJlZEJ5dGVzID0gMCksCiAgICAgICAgICAgICAgKHRoaXMuX2J1ZmZlcnMgPSBbXSksCiAgICAgICAgICAgICAgKHRoaXMuX2NvbXByZXNzZWQgPSAhMSksCiAgICAgICAgICAgICAgKHRoaXMuX3BheWxvYWRMZW5ndGggPSAwKSwKICAgICAgICAgICAgICAodGhpcy5fbWFzayA9IHZvaWQgMCksCiAgICAgICAgICAgICAgKHRoaXMuX2ZyYWdtZW50ZWQgPSAwKSwKICAgICAgICAgICAgICAodGhpcy5fbWFza2VkID0gITEpLAogICAgICAgICAgICAgICh0aGlzLl9maW4gPSAhMSksCiAgICAgICAgICAgICAgKHRoaXMuX29wY29kZSA9IDApLAogICAgICAgICAgICAgICh0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPSAwKSwKICAgICAgICAgICAgICAodGhpcy5fbWVzc2FnZUxlbmd0aCA9IDApLAogICAgICAgICAgICAgICh0aGlzLl9mcmFnbWVudHMgPSBbXSksCiAgICAgICAgICAgICAgKHRoaXMuX3N0YXRlID0gMCksCiAgICAgICAgICAgICAgKHRoaXMuX2xvb3AgPSAhMSk7CiAgICAgICAgICB9CiAgICAgICAgICBfd3JpdGUoZSwgdCwgcikgewogICAgICAgICAgICBpZiAoOCA9PT0gdGhpcy5fb3Bjb2RlICYmIDAgPT0gdGhpcy5fc3RhdGUpIHJldHVybiByKCk7CiAgICAgICAgICAgICh0aGlzLl9idWZmZXJlZEJ5dGVzICs9IGUubGVuZ3RoKSwgdGhpcy5fYnVmZmVycy5wdXNoKGUpLCB0aGlzLnN0YXJ0TG9vcChyKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN1bWUoZSkgewogICAgICAgICAgICBpZiAoKCh0aGlzLl9idWZmZXJlZEJ5dGVzIC09IGUpLCBlID09PSB0aGlzLl9idWZmZXJzWzBdLmxlbmd0aCkpIHJldHVybiB0aGlzLl9idWZmZXJzLnNoaWZ0KCk7CiAgICAgICAgICAgIGlmIChlIDwgdGhpcy5fYnVmZmVyc1swXS5sZW5ndGgpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5fYnVmZmVyc1swXTsKICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuX2J1ZmZlcnNbMF0gPSB0LnNsaWNlKGUpKSwgdC5zbGljZSgwLCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB0ID0gQnVmZmVyLmFsbG9jVW5zYWZlKGUpOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuX2J1ZmZlcnNbMF0sCiAgICAgICAgICAgICAgICBuID0gdC5sZW5ndGggLSBlOwogICAgICAgICAgICAgIGUgPj0gci5sZW5ndGgKICAgICAgICAgICAgICAgID8gdC5zZXQodGhpcy5fYnVmZmVycy5zaGlmdCgpLCBuKQogICAgICAgICAgICAgICAgOiAodC5zZXQobmV3IFVpbnQ4QXJyYXkoci5idWZmZXIsIHIuYnl0ZU9mZnNldCwgZSksIG4pLCAodGhpcy5fYnVmZmVyc1swXSA9IHIuc2xpY2UoZSkpKSwKICAgICAgICAgICAgICAgIChlIC09IHIubGVuZ3RoKTsKICAgICAgICAgICAgfSB3aGlsZSAoZSA-IDApOwogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXJ0TG9vcChlKSB7CiAgICAgICAgICAgIGxldCB0OwogICAgICAgICAgICB0aGlzLl9sb29wID0gITA7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX3N0YXRlKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLmdldEluZm8oKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLmdldFBheWxvYWRMZW5ndGgxNigpOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuZ2V0UGF5bG9hZExlbmd0aDY0KCk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICB0aGlzLmdldE1hc2soKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLmdldERhdGEoZSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgKHRoaXMuX2xvb3AgPSAhMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IHdoaWxlICh0aGlzLl9sb29wKTsKICAgICAgICAgICAgZSh0KTsKICAgICAgICAgIH0KICAgICAgICAgIGdldEluZm8oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9idWZmZXJlZEJ5dGVzIDwgMikgcmV0dXJuIHZvaWQgKHRoaXMuX2xvb3AgPSAhMSk7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnN1bWUoMik7CiAgICAgICAgICAgIGlmICgwICE9ICg0OCAmIGVbMF0pKQogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAodGhpcy5fbG9vcCA9ICExKSwgZyhSYW5nZUVycm9yLCAnUlNWMiBhbmQgUlNWMyBtdXN0IGJlIGNsZWFyJywgITAsIDEwMDIsICdXU19FUlJfVU5FWFBFQ1RFRF9SU1ZfMl8zJykKICAgICAgICAgICAgICApOwogICAgICAgICAgICBjb25zdCB0ID0gNjQgPT0gKDY0ICYgZVswXSk7CiAgICAgICAgICAgIGlmICh0ICYmICF0aGlzLl9leHRlbnNpb25zW3MuZXh0ZW5zaW9uTmFtZV0pCiAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLl9sb29wID0gITEpLCBnKFJhbmdlRXJyb3IsICdSU1YxIG11c3QgYmUgY2xlYXInLCAhMCwgMTAwMiwgJ1dTX0VSUl9VTkVYUEVDVEVEX1JTVl8xJyk7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoKHRoaXMuX2ZpbiA9IDEyOCA9PSAoMTI4ICYgZVswXSkpLAogICAgICAgICAgICAgICh0aGlzLl9vcGNvZGUgPSAxNSAmIGVbMF0pLAogICAgICAgICAgICAgICh0aGlzLl9wYXlsb2FkTGVuZ3RoID0gMTI3ICYgZVsxXSksCiAgICAgICAgICAgICAgMCA9PT0gdGhpcy5fb3Bjb2RlKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuICh0aGlzLl9sb29wID0gITEpLCBnKFJhbmdlRXJyb3IsICdSU1YxIG11c3QgYmUgY2xlYXInLCAhMCwgMTAwMiwgJ1dTX0VSUl9VTkVYUEVDVEVEX1JTVl8xJyk7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLl9mcmFnbWVudGVkKQogICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLl9sb29wID0gITEpLCBnKFJhbmdlRXJyb3IsICdpbnZhbGlkIG9wY29kZSAwJywgITAsIDEwMDIsICdXU19FUlJfSU5WQUxJRF9PUENPREUnKTsKICAgICAgICAgICAgICB0aGlzLl9vcGNvZGUgPSB0aGlzLl9mcmFnbWVudGVkOwogICAgICAgICAgICB9IGVsc2UgaWYgKDEgPT09IHRoaXMuX29wY29kZSB8fCAyID09PSB0aGlzLl9vcGNvZGUpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5fZnJhZ21lbnRlZCkKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICh0aGlzLl9sb29wID0gITEpLCBnKFJhbmdlRXJyb3IsIGBpbnZhbGlkIG9wY29kZSAke3RoaXMuX29wY29kZX1gLCAhMCwgMTAwMiwgJ1dTX0VSUl9JTlZBTElEX09QQ09ERScpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHRoaXMuX2NvbXByZXNzZWQgPSB0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICghKHRoaXMuX29wY29kZSA-IDcgJiYgdGhpcy5fb3Bjb2RlIDwgMTEpKQogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgKHRoaXMuX2xvb3AgPSAhMSksIGcoUmFuZ2VFcnJvciwgYGludmFsaWQgb3Bjb2RlICR7dGhpcy5fb3Bjb2RlfWAsICEwLCAxMDAyLCAnV1NfRVJSX0lOVkFMSURfT1BDT0RFJykKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLl9maW4pCiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuX2xvb3AgPSAhMSksIGcoUmFuZ2VFcnJvciwgJ0ZJTiBtdXN0IGJlIHNldCcsICEwLCAxMDAyLCAnV1NfRVJSX0VYUEVDVEVEX0ZJTicpOwogICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gKHRoaXMuX2xvb3AgPSAhMSksIGcoUmFuZ2VFcnJvciwgJ1JTVjEgbXVzdCBiZSBjbGVhcicsICEwLCAxMDAyLCAnV1NfRVJSX1VORVhQRUNURURfUlNWXzEnKTsKICAgICAgICAgICAgICBpZiAodGhpcy5fcGF5bG9hZExlbmd0aCA-IDEyNSkKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICh0aGlzLl9sb29wID0gITEpLAogICAgICAgICAgICAgICAgICBnKAogICAgICAgICAgICAgICAgICAgIFJhbmdlRXJyb3IsCiAgICAgICAgICAgICAgICAgICAgYGludmFsaWQgcGF5bG9hZCBsZW5ndGggJHt0aGlzLl9wYXlsb2FkTGVuZ3RofWAsCiAgICAgICAgICAgICAgICAgICAgITAsCiAgICAgICAgICAgICAgICAgICAgMTAwMiwKICAgICAgICAgICAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfQ09OVFJPTF9QQVlMT0FEX0xFTkdUSCcKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgKHRoaXMuX2ZpbiB8fCB0aGlzLl9mcmFnbWVudGVkIHx8ICh0aGlzLl9mcmFnbWVudGVkID0gdGhpcy5fb3Bjb2RlKSwKICAgICAgICAgICAgICAodGhpcy5fbWFza2VkID0gMTI4ID09ICgxMjggJiBlWzFdKSksCiAgICAgICAgICAgICAgdGhpcy5faXNTZXJ2ZXIpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlmICghdGhpcy5fbWFza2VkKQogICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLl9sb29wID0gITEpLCBnKFJhbmdlRXJyb3IsICdNQVNLIG11c3QgYmUgc2V0JywgITAsIDEwMDIsICdXU19FUlJfRVhQRUNURURfTUFTSycpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX21hc2tlZCkKICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuX2xvb3AgPSAhMSksIGcoUmFuZ2VFcnJvciwgJ01BU0sgbXVzdCBiZSBjbGVhcicsICEwLCAxMDAyLCAnV1NfRVJSX1VORVhQRUNURURfTUFTSycpOwogICAgICAgICAgICBpZiAoMTI2ID09PSB0aGlzLl9wYXlsb2FkTGVuZ3RoKSB0aGlzLl9zdGF0ZSA9IDE7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGlmICgxMjcgIT09IHRoaXMuX3BheWxvYWRMZW5ndGgpIHJldHVybiB0aGlzLmhhdmVMZW5ndGgoKTsKICAgICAgICAgICAgICB0aGlzLl9zdGF0ZSA9IDI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGdldFBheWxvYWRMZW5ndGgxNigpIHsKICAgICAgICAgICAgaWYgKCEodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDIpKQogICAgICAgICAgICAgIHJldHVybiAodGhpcy5fcGF5bG9hZExlbmd0aCA9IHRoaXMuY29uc3VtZSgyKS5yZWFkVUludDE2QkUoMCkpLCB0aGlzLmhhdmVMZW5ndGgoKTsKICAgICAgICAgICAgdGhpcy5fbG9vcCA9ICExOwogICAgICAgICAgfQogICAgICAgICAgZ2V0UGF5bG9hZExlbmd0aDY0KCkgewogICAgICAgICAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDgpIHJldHVybiB2b2lkICh0aGlzLl9sb29wID0gITEpOwogICAgICAgICAgICBjb25zdCBlID0gdGhpcy5jb25zdW1lKDgpLAogICAgICAgICAgICAgIHQgPSBlLnJlYWRVSW50MzJCRSgwKTsKICAgICAgICAgICAgcmV0dXJuIHQgPiBNYXRoLnBvdygyLCAyMSkgLSAxCiAgICAgICAgICAgICAgPyAoKHRoaXMuX2xvb3AgPSAhMSksCiAgICAgICAgICAgICAgICBnKAogICAgICAgICAgICAgICAgICBSYW5nZUVycm9yLAogICAgICAgICAgICAgICAgICAnVW5zdXBwb3J0ZWQgV2ViU29ja2V0IGZyYW1lOiBwYXlsb2FkIGxlbmd0aCA-IDJeNTMgLSAxJywKICAgICAgICAgICAgICAgICAgITEsCiAgICAgICAgICAgICAgICAgIDEwMDksCiAgICAgICAgICAgICAgICAgICdXU19FUlJfVU5TVVBQT1JURURfREFUQV9QQVlMT0FEX0xFTkdUSCcKICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgOiAoKHRoaXMuX3BheWxvYWRMZW5ndGggPSB0ICogTWF0aC5wb3coMiwgMzIpICsgZS5yZWFkVUludDMyQkUoNCkpLCB0aGlzLmhhdmVMZW5ndGgoKSk7CiAgICAgICAgICB9CiAgICAgICAgICBoYXZlTGVuZ3RoKCkgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgdGhpcy5fcGF5bG9hZExlbmd0aCAmJgogICAgICAgICAgICAgIHRoaXMuX29wY29kZSA8IDggJiYKICAgICAgICAgICAgICAoKHRoaXMuX3RvdGFsUGF5bG9hZExlbmd0aCArPSB0aGlzLl9wYXlsb2FkTGVuZ3RoKSwKICAgICAgICAgICAgICB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPiB0aGlzLl9tYXhQYXlsb2FkICYmIHRoaXMuX21heFBheWxvYWQgPiAwKQogICAgICAgICAgICApCiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICh0aGlzLl9sb29wID0gITEpLAogICAgICAgICAgICAgICAgZyhSYW5nZUVycm9yLCAnTWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcsICExLCAxMDA5LCAnV1NfRVJSX1VOU1VQUE9SVEVEX01FU1NBR0VfTEVOR1RIJykKICAgICAgICAgICAgICApOwogICAgICAgICAgICB0aGlzLl9tYXNrZWQgPyAodGhpcy5fc3RhdGUgPSAzKSA6ICh0aGlzLl9zdGF0ZSA9IDQpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0TWFzaygpIHsKICAgICAgICAgICAgdGhpcy5fYnVmZmVyZWRCeXRlcyA8IDQgPyAodGhpcy5fbG9vcCA9ICExKSA6ICgodGhpcy5fbWFzayA9IHRoaXMuY29uc3VtZSg0KSksICh0aGlzLl9zdGF0ZSA9IDQpKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldERhdGEoZSkgewogICAgICAgICAgICBsZXQgdCA9IGk7CiAgICAgICAgICAgIGlmICh0aGlzLl9wYXlsb2FkTGVuZ3RoKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPCB0aGlzLl9wYXlsb2FkTGVuZ3RoKSByZXR1cm4gdm9pZCAodGhpcy5fbG9vcCA9ICExKTsKICAgICAgICAgICAgICAodCA9IHRoaXMuY29uc3VtZSh0aGlzLl9wYXlsb2FkTGVuZ3RoKSksCiAgICAgICAgICAgICAgICB0aGlzLl9tYXNrZWQgJiYKICAgICAgICAgICAgICAgICAgMCAhPSAodGhpcy5fbWFza1swXSB8IHRoaXMuX21hc2tbMV0gfCB0aGlzLl9tYXNrWzJdIHwgdGhpcy5fbWFza1szXSkgJiYKICAgICAgICAgICAgICAgICAgZCh0LCB0aGlzLl9tYXNrKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcy5fb3Bjb2RlID4gNwogICAgICAgICAgICAgID8gdGhpcy5jb250cm9sTWVzc2FnZSh0KQogICAgICAgICAgICAgIDogdGhpcy5fY29tcHJlc3NlZAogICAgICAgICAgICAgICAgPyAoKHRoaXMuX3N0YXRlID0gNSksIHZvaWQgdGhpcy5kZWNvbXByZXNzKHQsIGUpKQogICAgICAgICAgICAgICAgOiAodC5sZW5ndGggJiYgKCh0aGlzLl9tZXNzYWdlTGVuZ3RoID0gdGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoKSwgdGhpcy5fZnJhZ21lbnRzLnB1c2godCkpLAogICAgICAgICAgICAgICAgICB0aGlzLmRhdGFNZXNzYWdlKCkpOwogICAgICAgICAgfQogICAgICAgICAgZGVjb21wcmVzcyhlLCB0KSB7CiAgICAgICAgICAgIHRoaXMuX2V4dGVuc2lvbnNbcy5leHRlbnNpb25OYW1lXS5kZWNvbXByZXNzKGUsIHRoaXMuX2ZpbiwgKGUsIHIpID0-IHsKICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHQoZSk7CiAgICAgICAgICAgICAgaWYgKHIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBpZiAoKCh0aGlzLl9tZXNzYWdlTGVuZ3RoICs9IHIubGVuZ3RoKSwgdGhpcy5fbWVzc2FnZUxlbmd0aCA-IHRoaXMuX21heFBheWxvYWQgJiYgdGhpcy5fbWF4UGF5bG9hZCA-IDApKQogICAgICAgICAgICAgICAgICByZXR1cm4gdChnKFJhbmdlRXJyb3IsICdNYXggcGF5bG9hZCBzaXplIGV4Y2VlZGVkJywgITEsIDEwMDksICdXU19FUlJfVU5TVVBQT1JURURfTUVTU0FHRV9MRU5HVEgnKSk7CiAgICAgICAgICAgICAgICB0aGlzLl9mcmFnbWVudHMucHVzaChyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZGF0YU1lc3NhZ2UoKTsKICAgICAgICAgICAgICBpZiAobikgcmV0dXJuIHQobik7CiAgICAgICAgICAgICAgdGhpcy5zdGFydExvb3AodCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgZGF0YU1lc3NhZ2UoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9maW4pIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5fbWVzc2FnZUxlbmd0aCwKICAgICAgICAgICAgICAgIHQgPSB0aGlzLl9mcmFnbWVudHM7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgKCh0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPSAwKSwKICAgICAgICAgICAgICAgICh0aGlzLl9tZXNzYWdlTGVuZ3RoID0gMCksCiAgICAgICAgICAgICAgICAodGhpcy5fZnJhZ21lbnRlZCA9IDApLAogICAgICAgICAgICAgICAgKHRoaXMuX2ZyYWdtZW50cyA9IFtdKSwKICAgICAgICAgICAgICAgIDIgPT09IHRoaXMuX29wY29kZSkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGxldCByOwogICAgICAgICAgICAgICAgKHIgPSAnbm9kZWJ1ZmZlcicgPT09IHRoaXMuX2JpbmFyeVR5cGUgPyB1KHQsIGUpIDogJ2FycmF5YnVmZmVyJyA9PT0gdGhpcy5fYmluYXJ5VHlwZSA_IGwodSh0LCBlKSkgOiB0KSwKICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgciwgITApOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zdCByID0gdSh0LCBlKTsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5fc2tpcFVURjhWYWxpZGF0aW9uICYmICFoKHIpKQogICAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuX2xvb3AgPSAhMSksIGcoRXJyb3IsICdpbnZhbGlkIFVURi04IHNlcXVlbmNlJywgITAsIDEwMDcsICdXU19FUlJfSU5WQUxJRF9VVEY4Jyk7CiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCByLCAhMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX3N0YXRlID0gMDsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnRyb2xNZXNzYWdlKGUpIHsKICAgICAgICAgICAgaWYgKDggPT09IHRoaXMuX29wY29kZSkKICAgICAgICAgICAgICBpZiAoKCh0aGlzLl9sb29wID0gITEpLCAwID09PSBlLmxlbmd0aCkpIHRoaXMuZW1pdCgnY29uY2x1ZGUnLCAxMDA1LCBpKSwgdGhpcy5lbmQoKTsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICgxID09PSBlLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGcoUmFuZ2VFcnJvciwgJ2ludmFsaWQgcGF5bG9hZCBsZW5ndGggMScsICEwLCAxMDAyLCAnV1NfRVJSX0lOVkFMSURfQ09OVFJPTF9QQVlMT0FEX0xFTkdUSCcpOwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5yZWFkVUludDE2QkUoMCk7CiAgICAgICAgICAgICAgICAgIGlmICghZih0KSkgcmV0dXJuIGcoUmFuZ2VFcnJvciwgYGludmFsaWQgc3RhdHVzIGNvZGUgJHt0fWAsICEwLCAxMDAyLCAnV1NfRVJSX0lOVkFMSURfQ0xPU0VfQ09ERScpOwogICAgICAgICAgICAgICAgICBjb25zdCByID0gZS5zbGljZSgyKTsKICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9za2lwVVRGOFZhbGlkYXRpb24gJiYgIWgocikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGcoRXJyb3IsICdpbnZhbGlkIFVURi04IHNlcXVlbmNlJywgITAsIDEwMDcsICdXU19FUlJfSU5WQUxJRF9VVEY4Jyk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29uY2x1ZGUnLCB0LCByKSwgdGhpcy5lbmQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgOSA9PT0gdGhpcy5fb3Bjb2RlID8gdGhpcy5lbWl0KCdwaW5nJywgZSkgOiB0aGlzLmVtaXQoJ3BvbmcnLCBlKTsKICAgICAgICAgICAgdGhpcy5fc3RhdGUgPSAwOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIDQ0MTY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgcig1MjU2KSwgcigxOTIpOwogICAgICAgIGNvbnN0IHsgcmFuZG9tRmlsbFN5bmM6IG4gfSA9IHIoNzk2OCksCiAgICAgICAgICBzID0gcig4ZTMpLAogICAgICAgICAgeyBFTVBUWV9CVUZGRVI6IG8gfSA9IHIoMjkyOCksCiAgICAgICAgICB7IGlzVmFsaWRTdGF0dXNDb2RlOiBpIH0gPSByKDI1NzYpLAogICAgICAgICAgeyBtYXNrOiBhLCB0b0J1ZmZlcjogYyB9ID0gcig5MDE2KSwKICAgICAgICAgIHUgPSBTeW1ib2woJ2tCeXRlTGVuZ3RoJyksCiAgICAgICAgICBsID0gQnVmZmVyLmFsbG9jKDQpOwogICAgICAgIGNsYXNzIGQgewogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICAodGhpcy5fZXh0ZW5zaW9ucyA9IHQgfHwge30pLAogICAgICAgICAgICAgIHIgJiYgKCh0aGlzLl9nZW5lcmF0ZU1hc2sgPSByKSwgKHRoaXMuX21hc2tCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCkpKSwKICAgICAgICAgICAgICAodGhpcy5fc29ja2V0ID0gZSksCiAgICAgICAgICAgICAgKHRoaXMuX2ZpcnN0RnJhZ21lbnQgPSAhMCksCiAgICAgICAgICAgICAgKHRoaXMuX2NvbXByZXNzID0gITEpLAogICAgICAgICAgICAgICh0aGlzLl9idWZmZXJlZEJ5dGVzID0gMCksCiAgICAgICAgICAgICAgKHRoaXMuX2RlZmxhdGluZyA9ICExKSwKICAgICAgICAgICAgICAodGhpcy5fcXVldWUgPSBbXSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZnJhbWUoZSwgdCkgewogICAgICAgICAgICBsZXQgciwKICAgICAgICAgICAgICBzLAogICAgICAgICAgICAgIG8gPSAhMSwKICAgICAgICAgICAgICBpID0gMiwKICAgICAgICAgICAgICBjID0gITE7CiAgICAgICAgICAgIHQubWFzayAmJgogICAgICAgICAgICAgICgociA9IHQubWFza0J1ZmZlciB8fCBsKSwKICAgICAgICAgICAgICB0LmdlbmVyYXRlTWFzayA_IHQuZ2VuZXJhdGVNYXNrKHIpIDogbihyLCAwLCA0KSwKICAgICAgICAgICAgICAoYyA9IDAgPT0gKHJbMF0gfCByWzFdIHwgclsyXSB8IHJbM10pKSwKICAgICAgICAgICAgICAoaSA9IDYpKSwKICAgICAgICAgICAgICAnc3RyaW5nJyA9PSB0eXBlb2YgZQogICAgICAgICAgICAgICAgPyAocyA9ICh0Lm1hc2sgJiYgIWMpIHx8IHZvaWQgMCA9PT0gdFt1XSA_IChlID0gQnVmZmVyLmZyb20oZSkpLmxlbmd0aCA6IHRbdV0pCiAgICAgICAgICAgICAgICA6ICgocyA9IGUubGVuZ3RoKSwgKG8gPSB0Lm1hc2sgJiYgdC5yZWFkT25seSAmJiAhYykpOwogICAgICAgICAgICBsZXQgZCA9IHM7CiAgICAgICAgICAgIHMgPj0gNjU1MzYgPyAoKGkgKz0gOCksIChkID0gMTI3KSkgOiBzID4gMTI1ICYmICgoaSArPSAyKSwgKGQgPSAxMjYpKTsKICAgICAgICAgICAgY29uc3QgZiA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShvID8gcyArIGkgOiBpKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoZlswXSA9IHQuZmluID8gMTI4IHwgdC5vcGNvZGUgOiB0Lm9wY29kZSksCiAgICAgICAgICAgICAgdC5yc3YxICYmIChmWzBdIHw9IDY0KSwKICAgICAgICAgICAgICAoZlsxXSA9IGQpLAogICAgICAgICAgICAgIDEyNiA9PT0gZCA_IGYud3JpdGVVSW50MTZCRShzLCAyKSA6IDEyNyA9PT0gZCAmJiAoKGZbMl0gPSBmWzNdID0gMCksIGYud3JpdGVVSW50QkUocywgNCwgNikpLAogICAgICAgICAgICAgIHQubWFzawogICAgICAgICAgICAgICAgPyAoKGZbMV0gfD0gMTI4KSwKICAgICAgICAgICAgICAgICAgKGZbaSAtIDRdID0gclswXSksCiAgICAgICAgICAgICAgICAgIChmW2kgLSAzXSA9IHJbMV0pLAogICAgICAgICAgICAgICAgICAoZltpIC0gMl0gPSByWzJdKSwKICAgICAgICAgICAgICAgICAgKGZbaSAtIDFdID0gclszXSksCiAgICAgICAgICAgICAgICAgIGMgPyBbZiwgZV0gOiBvID8gKGEoZSwgciwgZiwgaSwgcyksIFtmXSkgOiAoYShlLCByLCBlLCAwLCBzKSwgW2YsIGVdKSkKICAgICAgICAgICAgICAgIDogW2YsIGVdCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBjbG9zZShlLCB0LCByLCBuKSB7CiAgICAgICAgICAgIGxldCBzOwogICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSBzID0gbzsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCdudW1iZXInICE9IHR5cGVvZiBlIHx8ICFpKGUpKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHZhbGlkIGVycm9yIGNvZGUgbnVtYmVyJyk7CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCAmJiB0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgY29uc3QgciA9IEJ1ZmZlci5ieXRlTGVuZ3RoKHQpOwogICAgICAgICAgICAgICAgaWYgKHIgPiAxMjMpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgbWVzc2FnZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMTIzIGJ5dGVzJyk7CiAgICAgICAgICAgICAgICAocyA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSgyICsgcikpLAogICAgICAgICAgICAgICAgICBzLndyaXRlVUludDE2QkUoZSwgMCksCiAgICAgICAgICAgICAgICAgICdzdHJpbmcnID09IHR5cGVvZiB0ID8gcy53cml0ZSh0LCAyKSA6IHMuc2V0KHQsIDIpOwogICAgICAgICAgICAgIH0gZWxzZSAocyA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSgyKSksIHMud3JpdGVVSW50MTZCRShlLCAwKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBhID0gewogICAgICAgICAgICAgIFt1XTogcy5sZW5ndGgsCiAgICAgICAgICAgICAgZmluOiAhMCwKICAgICAgICAgICAgICBnZW5lcmF0ZU1hc2s6IHRoaXMuX2dlbmVyYXRlTWFzaywKICAgICAgICAgICAgICBtYXNrOiByLAogICAgICAgICAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsCiAgICAgICAgICAgICAgb3Bjb2RlOiA4LAogICAgICAgICAgICAgIHJlYWRPbmx5OiAhMSwKICAgICAgICAgICAgICByc3YxOiAhMQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLl9kZWZsYXRpbmcgPyB0aGlzLmVucXVldWUoW3RoaXMuZGlzcGF0Y2gsIHMsICExLCBhLCBuXSkgOiB0aGlzLnNlbmRGcmFtZShkLmZyYW1lKHMsIGEpLCBuKTsKICAgICAgICAgIH0KICAgICAgICAgIHBpbmcoZSwgdCwgcikgewogICAgICAgICAgICBsZXQgbiwgczsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgnc3RyaW5nJyA9PSB0eXBlb2YgZQogICAgICAgICAgICAgICAgPyAoKG4gPSBCdWZmZXIuYnl0ZUxlbmd0aChlKSksIChzID0gITEpKQogICAgICAgICAgICAgICAgOiAoKG4gPSAoZSA9IGMoZSkpLmxlbmd0aCksIChzID0gYy5yZWFkT25seSkpLAogICAgICAgICAgICAgIG4gPiAxMjUpCiAgICAgICAgICAgICkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIGRhdGEgc2l6ZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMTI1IGJ5dGVzJyk7CiAgICAgICAgICAgIGNvbnN0IG8gPSB7CiAgICAgICAgICAgICAgW3VdOiBuLAogICAgICAgICAgICAgIGZpbjogITAsCiAgICAgICAgICAgICAgZ2VuZXJhdGVNYXNrOiB0aGlzLl9nZW5lcmF0ZU1hc2ssCiAgICAgICAgICAgICAgbWFzazogdCwKICAgICAgICAgICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLAogICAgICAgICAgICAgIG9wY29kZTogOSwKICAgICAgICAgICAgICByZWFkT25seTogcywKICAgICAgICAgICAgICByc3YxOiAhMQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLl9kZWZsYXRpbmcgPyB0aGlzLmVucXVldWUoW3RoaXMuZGlzcGF0Y2gsIGUsICExLCBvLCByXSkgOiB0aGlzLnNlbmRGcmFtZShkLmZyYW1lKGUsIG8pLCByKTsKICAgICAgICAgIH0KICAgICAgICAgIHBvbmcoZSwgdCwgcikgewogICAgICAgICAgICBsZXQgbiwgczsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgnc3RyaW5nJyA9PSB0eXBlb2YgZQogICAgICAgICAgICAgICAgPyAoKG4gPSBCdWZmZXIuYnl0ZUxlbmd0aChlKSksIChzID0gITEpKQogICAgICAgICAgICAgICAgOiAoKG4gPSAoZSA9IGMoZSkpLmxlbmd0aCksIChzID0gYy5yZWFkT25seSkpLAogICAgICAgICAgICAgIG4gPiAxMjUpCiAgICAgICAgICAgICkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIGRhdGEgc2l6ZSBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMTI1IGJ5dGVzJyk7CiAgICAgICAgICAgIGNvbnN0IG8gPSB7CiAgICAgICAgICAgICAgW3VdOiBuLAogICAgICAgICAgICAgIGZpbjogITAsCiAgICAgICAgICAgICAgZ2VuZXJhdGVNYXNrOiB0aGlzLl9nZW5lcmF0ZU1hc2ssCiAgICAgICAgICAgICAgbWFzazogdCwKICAgICAgICAgICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLAogICAgICAgICAgICAgIG9wY29kZTogMTAsCiAgICAgICAgICAgICAgcmVhZE9ubHk6IHMsCiAgICAgICAgICAgICAgcnN2MTogITEKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5fZGVmbGF0aW5nID8gdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBlLCAhMSwgbywgcl0pIDogdGhpcy5zZW5kRnJhbWUoZC5mcmFtZShlLCBvKSwgcik7CiAgICAgICAgICB9CiAgICAgICAgICBzZW5kKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2V4dGVuc2lvbnNbcy5leHRlbnNpb25OYW1lXTsKICAgICAgICAgICAgbGV0IG8sCiAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICBhID0gdC5iaW5hcnkgPyAyIDogMSwKICAgICAgICAgICAgICBsID0gdC5jb21wcmVzczsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgnc3RyaW5nJyA9PSB0eXBlb2YgZQogICAgICAgICAgICAgICAgPyAoKG8gPSBCdWZmZXIuYnl0ZUxlbmd0aChlKSksIChpID0gITEpKQogICAgICAgICAgICAgICAgOiAoKG8gPSAoZSA9IGMoZSkpLmxlbmd0aCksIChpID0gYy5yZWFkT25seSkpLAogICAgICAgICAgICAgIHRoaXMuX2ZpcnN0RnJhZ21lbnQKICAgICAgICAgICAgICAgID8gKCh0aGlzLl9maXJzdEZyYWdtZW50ID0gITEpLAogICAgICAgICAgICAgICAgICBsICYmCiAgICAgICAgICAgICAgICAgICAgbiAmJgogICAgICAgICAgICAgICAgICAgIG4ucGFyYW1zW24uX2lzU2VydmVyID8gJ3NlcnZlcl9ub19jb250ZXh0X3Rha2VvdmVyJyA6ICdjbGllbnRfbm9fY29udGV4dF90YWtlb3ZlciddICYmCiAgICAgICAgICAgICAgICAgICAgKGwgPSBvID49IG4uX3RocmVzaG9sZCksCiAgICAgICAgICAgICAgICAgICh0aGlzLl9jb21wcmVzcyA9IGwpKQogICAgICAgICAgICAgICAgOiAoKGwgPSAhMSksIChhID0gMCkpLAogICAgICAgICAgICAgIHQuZmluICYmICh0aGlzLl9maXJzdEZyYWdtZW50ID0gITApLAogICAgICAgICAgICAgIG4pCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGNvbnN0IG4gPSB7CiAgICAgICAgICAgICAgICBbdV06IG8sCiAgICAgICAgICAgICAgICBmaW46IHQuZmluLAogICAgICAgICAgICAgICAgZ2VuZXJhdGVNYXNrOiB0aGlzLl9nZW5lcmF0ZU1hc2ssCiAgICAgICAgICAgICAgICBtYXNrOiB0Lm1hc2ssCiAgICAgICAgICAgICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLAogICAgICAgICAgICAgICAgb3Bjb2RlOiBhLAogICAgICAgICAgICAgICAgcmVhZE9ubHk6IGksCiAgICAgICAgICAgICAgICByc3YxOiBsCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB0aGlzLl9kZWZsYXRpbmcKICAgICAgICAgICAgICAgID8gdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBlLCB0aGlzLl9jb21wcmVzcywgbiwgcl0pCiAgICAgICAgICAgICAgICA6IHRoaXMuZGlzcGF0Y2goZSwgdGhpcy5fY29tcHJlc3MsIG4sIHIpOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICB0aGlzLnNlbmRGcmFtZSgKICAgICAgICAgICAgICAgIGQuZnJhbWUoZSwgewogICAgICAgICAgICAgICAgICBbdV06IG8sCiAgICAgICAgICAgICAgICAgIGZpbjogdC5maW4sCiAgICAgICAgICAgICAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLAogICAgICAgICAgICAgICAgICBtYXNrOiB0Lm1hc2ssCiAgICAgICAgICAgICAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsCiAgICAgICAgICAgICAgICAgIG9wY29kZTogYSwKICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IGksCiAgICAgICAgICAgICAgICAgIHJzdjE6ICExCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHIKICAgICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZGlzcGF0Y2goZSwgdCwgciwgbikgewogICAgICAgICAgICBpZiAoIXQpIHJldHVybiB2b2lkIHRoaXMuc2VuZEZyYW1lKGQuZnJhbWUoZSwgciksIG4pOwogICAgICAgICAgICBjb25zdCBvID0gdGhpcy5fZXh0ZW5zaW9uc1tzLmV4dGVuc2lvbk5hbWVdOwogICAgICAgICAgICAodGhpcy5fYnVmZmVyZWRCeXRlcyArPSByW3VdKSwKICAgICAgICAgICAgICAodGhpcy5fZGVmbGF0aW5nID0gITApLAogICAgICAgICAgICAgIG8uY29tcHJlc3MoZSwgci5maW4sIChlLCB0KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc29ja2V0LmRlc3Ryb3llZCkgewogICAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEVycm9yKCdUaGUgc29ja2V0IHdhcyBjbG9zZWQgd2hpbGUgZGF0YSB3YXMgYmVpbmcgY29tcHJlc3NlZCcpOwogICAgICAgICAgICAgICAgICAnZnVuY3Rpb24nID09IHR5cGVvZiBuICYmIG4oZSk7CiAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5fcXVldWUubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5fcXVldWVbdF0sCiAgICAgICAgICAgICAgICAgICAgICBuID0gcltyLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIG4gJiYgbihlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICh0aGlzLl9idWZmZXJlZEJ5dGVzIC09IHJbdV0pLAogICAgICAgICAgICAgICAgICAgICh0aGlzLl9kZWZsYXRpbmcgPSAhMSksCiAgICAgICAgICAgICAgICAgICAgKHIucmVhZE9ubHkgPSAhMSksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kRnJhbWUoZC5mcmFtZSh0LCByKSwgbiksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXF1ZXVlKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZXF1ZXVlKCkgewogICAgICAgICAgICBmb3IgKDsgIXRoaXMuX2RlZmxhdGluZyAmJiB0aGlzLl9xdWV1ZS5sZW5ndGg7ICkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9xdWV1ZS5zaGlmdCgpOwogICAgICAgICAgICAgICh0aGlzLl9idWZmZXJlZEJ5dGVzIC09IGVbM11bdV0pLCBSZWZsZWN0LmFwcGx5KGVbMF0sIHRoaXMsIGUuc2xpY2UoMSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbnF1ZXVlKGUpIHsKICAgICAgICAgICAgKHRoaXMuX2J1ZmZlcmVkQnl0ZXMgKz0gZVszXVt1XSksIHRoaXMuX3F1ZXVlLnB1c2goZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzZW5kRnJhbWUoZSwgdCkgewogICAgICAgICAgICAyID09PSBlLmxlbmd0aAogICAgICAgICAgICAgID8gKHRoaXMuX3NvY2tldC5jb3JrKCksIHRoaXMuX3NvY2tldC53cml0ZShlWzBdKSwgdGhpcy5fc29ja2V0LndyaXRlKGVbMV0sIHQpLCB0aGlzLl9zb2NrZXQudW5jb3JrKCkpCiAgICAgICAgICAgICAgOiB0aGlzLl9zb2NrZXQud3JpdGUoZVswXSwgdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGUuZXhwb3J0cyA9IGQ7CiAgICAgIH0sCiAgICAgIDI3OTI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgY29uc3QgeyBEdXBsZXg6IG4gfSA9IHIoODM3OCk7CiAgICAgICAgZnVuY3Rpb24gcyhlKSB7CiAgICAgICAgICBlLmVtaXQoJ2Nsb3NlJyk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG8oKSB7CiAgICAgICAgICAhdGhpcy5kZXN0cm95ZWQgJiYgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCAmJiB0aGlzLmRlc3Ryb3koKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaShlKSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGkpLCB0aGlzLmRlc3Ryb3koKSwgMCA9PT0gdGhpcy5saXN0ZW5lckNvdW50KCdlcnJvcicpICYmIHRoaXMuZW1pdCgnZXJyb3InLCBlKTsKICAgICAgICB9CiAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIGxldCByID0gITA7CiAgICAgICAgICBjb25zdCBhID0gbmV3IG4oeyAuLi50LCBhdXRvRGVzdHJveTogITEsIGVtaXRDbG9zZTogITEsIG9iamVjdE1vZGU6ICExLCB3cml0YWJsZU9iamVjdE1vZGU6ICExIH0pOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgZS5vbignbWVzc2FnZScsIGZ1bmN0aW9uICh0LCByKSB7CiAgICAgICAgICAgICAgY29uc3QgbiA9ICFyICYmIGEuX3JlYWRhYmxlU3RhdGUub2JqZWN0TW9kZSA_IHQudG9TdHJpbmcoKSA6IHQ7CiAgICAgICAgICAgICAgYS5wdXNoKG4pIHx8IGUucGF1c2UoKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUub25jZSgnZXJyb3InLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGEuZGVzdHJveWVkIHx8ICgociA9ICExKSwgYS5kZXN0cm95KGUpKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUub25jZSgnY2xvc2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgYS5kZXN0cm95ZWQgfHwgYS5wdXNoKG51bGwpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKGEuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAodCwgbikgewogICAgICAgICAgICAgIGlmIChlLnJlYWR5U3RhdGUgPT09IGUuQ0xPU0VEKSByZXR1cm4gbih0KSwgdm9pZCBwcm9jZXNzLm5leHRUaWNrKHMsIGEpOwogICAgICAgICAgICAgIGxldCBvID0gITE7CiAgICAgICAgICAgICAgZS5vbmNlKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAobyA9ICEwKSwgbihlKTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGUub25jZSgnY2xvc2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIG8gfHwgbih0KSwgcHJvY2Vzcy5uZXh0VGljayhzLCBhKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgciAmJiBlLnRlcm1pbmF0ZSgpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKGEuX2ZpbmFsID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICBlLnJlYWR5U3RhdGUgIT09IGUuQ09OTkVDVElORwogICAgICAgICAgICAgICAgPyBudWxsICE9PSBlLl9zb2NrZXQgJiYKICAgICAgICAgICAgICAgICAgKGUuX3NvY2tldC5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZAogICAgICAgICAgICAgICAgICAgID8gKHQoKSwgYS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkICYmIGEuZGVzdHJveSgpKQogICAgICAgICAgICAgICAgICAgIDogKGUuX3NvY2tldC5vbmNlKCdmaW5pc2gnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQoKTsKICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgZS5jbG9zZSgpKSkKICAgICAgICAgICAgICAgIDogZS5vbmNlKCdvcGVuJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIGEuX2ZpbmFsKHQpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChhLl9yZWFkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGUuaXNQYXVzZWQgJiYgZS5yZXN1bWUoKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIChhLl93cml0ZSA9IGZ1bmN0aW9uICh0LCByLCBuKSB7CiAgICAgICAgICAgICAgZS5yZWFkeVN0YXRlICE9PSBlLkNPTk5FQ1RJTkcKICAgICAgICAgICAgICAgID8gZS5zZW5kKHQsIG4pCiAgICAgICAgICAgICAgICA6IGUub25jZSgnb3BlbicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBhLl93cml0ZSh0LCByLCBuKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBhLm9uKCdlbmQnLCBvKSwKICAgICAgICAgICAgYS5vbignZXJyb3InLCBpKSwKICAgICAgICAgICAgYQogICAgICAgICAgKTsKICAgICAgICB9OwogICAgICB9LAogICAgICA0Mjg0OiAoZSwgdCwgcikgPT4gewogICAgICAgIGNvbnN0IHsgdG9rZW5DaGFyczogbiB9ID0gcigyNTc2KTsKICAgICAgICBlLmV4cG9ydHMgPSB7CiAgICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBTZXQoKTsKICAgICAgICAgICAgbGV0IHIgPSAtMSwKICAgICAgICAgICAgICBzID0gLTEsCiAgICAgICAgICAgICAgbyA9IDA7CiAgICAgICAgICAgIGZvciAoOyBvIDwgZS5sZW5ndGg7IG8rKykgewogICAgICAgICAgICAgIGNvbnN0IGkgPSBlLmNoYXJDb2RlQXQobyk7CiAgICAgICAgICAgICAgaWYgKC0xID09PSBzICYmIDEgPT09IG5baV0pIC0xID09PSByICYmIChyID0gbyk7CiAgICAgICAgICAgICAgZWxzZSBpZiAoMCA9PT0gbyB8fCAoMzIgIT09IGkgJiYgOSAhPT0gaSkpIHsKICAgICAgICAgICAgICAgIGlmICg0NCAhPT0gaSkgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke299YCk7CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gcikgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke299YCk7CiAgICAgICAgICAgICAgICAgIC0xID09PSBzICYmIChzID0gbyk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnNsaWNlKHIsIHMpOwogICAgICAgICAgICAgICAgICBpZiAodC5oYXMobikpIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlICIke259IiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7CiAgICAgICAgICAgICAgICAgIHQuYWRkKG4pLCAociA9IHMgPSAtMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIC0xID09PSBzICYmIC0xICE9PSByICYmIChzID0gbyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKC0xID09PSByIHx8IC0xICE9PSBzKSB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0Jyk7CiAgICAgICAgICAgIGNvbnN0IGkgPSBlLnNsaWNlKHIsIG8pOwogICAgICAgICAgICBpZiAodC5oYXMoaSkpIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlICIke2l9IiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7CiAgICAgICAgICAgIHJldHVybiB0LmFkZChpKSwgdDsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICAyNTc2OiAoZSwgdCwgcikgPT4gewogICAgICAgIGNvbnN0IG4gPSBbCiAgICAgICAgICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAxLCAwLCAxLCAxLAogICAgICAgICAgMSwgMSwgMSwgMCwgMCwgMSwgMSwgMCwgMSwgMSwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwKICAgICAgICAgIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsCiAgICAgICAgICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAwLCAxLCAwLCAxLCAwCiAgICAgICAgXTsKICAgICAgICBmdW5jdGlvbiBzKGUpIHsKICAgICAgICAgIHJldHVybiAoZSA-PSAxZTMgJiYgZSA8PSAxMDE0ICYmIDEwMDQgIT09IGUgJiYgMTAwNSAhPT0gZSAmJiAxMDA2ICE9PSBlKSB8fCAoZSA-PSAzZTMgJiYgZSA8PSA0OTk5KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgICAgICBjb25zdCB0ID0gZS5sZW5ndGg7CiAgICAgICAgICBsZXQgciA9IDA7CiAgICAgICAgICBmb3IgKDsgciA8IHQ7ICkKICAgICAgICAgICAgaWYgKDAgPT0gKDEyOCAmIGVbcl0pKSByKys7CiAgICAgICAgICAgIGVsc2UgaWYgKDE5MiA9PSAoMjI0ICYgZVtyXSkpIHsKICAgICAgICAgICAgICBpZiAociArIDEgPT09IHQgfHwgMTI4ICE9ICgxOTIgJiBlW3IgKyAxXSkgfHwgMTkyID09ICgyNTQgJiBlW3JdKSkgcmV0dXJuICExOwogICAgICAgICAgICAgIHIgKz0gMjsKICAgICAgICAgICAgfSBlbHNlIGlmICgyMjQgPT0gKDI0MCAmIGVbcl0pKSB7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgciArIDIgPj0gdCB8fAogICAgICAgICAgICAgICAgMTI4ICE9ICgxOTIgJiBlW3IgKyAxXSkgfHwKICAgICAgICAgICAgICAgIDEyOCAhPSAoMTkyICYgZVtyICsgMl0pIHx8CiAgICAgICAgICAgICAgICAoMjI0ID09PSBlW3JdICYmIDEyOCA9PSAoMjI0ICYgZVtyICsgMV0pKSB8fAogICAgICAgICAgICAgICAgKDIzNyA9PT0gZVtyXSAmJiAxNjAgPT0gKDIyNCAmIGVbciArIDFdKSkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgICAgciArPSAzOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICgyNDAgIT0gKDI0OCAmIGVbcl0pKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgciArIDMgPj0gdCB8fAogICAgICAgICAgICAgICAgMTI4ICE9ICgxOTIgJiBlW3IgKyAxXSkgfHwKICAgICAgICAgICAgICAgIDEyOCAhPSAoMTkyICYgZVtyICsgMl0pIHx8CiAgICAgICAgICAgICAgICAxMjggIT0gKDE5MiAmIGVbciArIDNdKSB8fAogICAgICAgICAgICAgICAgKDI0MCA9PT0gZVtyXSAmJiAxMjggPT0gKDI0MCAmIGVbciArIDFdKSkgfHwKICAgICAgICAgICAgICAgICgyNDQgPT09IGVbcl0gJiYgZVtyICsgMV0gPiAxNDMpIHx8CiAgICAgICAgICAgICAgICBlW3JdID4gMjQ0CiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICAgIHIgKz0gNDsKICAgICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICEwOwogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgdCA9IHIoODI3NCk7CiAgICAgICAgICBlLmV4cG9ydHMgPSB7IGlzVmFsaWRTdGF0dXNDb2RlOiBzLCBpc1ZhbGlkVVRGODogKGUpID0-IChlLmxlbmd0aCA8IDE1MCA_IG8oZSkgOiB0KGUpKSwgdG9rZW5DaGFyczogbiB9OwogICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgIGUuZXhwb3J0cyA9IHsgaXNWYWxpZFN0YXR1c0NvZGU6IHMsIGlzVmFsaWRVVEY4OiBvLCB0b2tlbkNoYXJzOiBuIH07CiAgICAgICAgfQogICAgICB9LAogICAgICA3ODgwOiAoZSwgdCwgcikgPT4gewogICAgICAgIGNvbnN0IG4gPSByKDQ2NyksCiAgICAgICAgICBzID0gcig2MTM2KSwKICAgICAgICAgIHsgY3JlYXRlSGFzaDogbyB9ID0gKHIoMTI1NiksIHIoNTI1NiksIHIoMTkyKSwgcig3OTY4KSksCiAgICAgICAgICBpID0gcigxMjcyKSwKICAgICAgICAgIGEgPSByKDhlMyksCiAgICAgICAgICBjID0gcig0Mjg0KSwKICAgICAgICAgIHUgPSByKDc4NCksCiAgICAgICAgICB7IEdVSUQ6IGwsIGtXZWJTb2NrZXQ6IGQgfSA9IHIoMjkyOCksCiAgICAgICAgICBmID0gL15bKy8wLTlBLVphLXpdezIyfT09JC87CiAgICAgICAgZnVuY3Rpb24gaChlKSB7CiAgICAgICAgICAoZS5fc3RhdGUgPSAyKSwgZS5lbWl0KCdjbG9zZScpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnKCkgewogICAgICAgICAgdGhpcy5kZXN0cm95KCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSwgdCwgciwgbikgewogICAgICAgICAgZS53cml0YWJsZSAmJgogICAgICAgICAgICAoKHIgPSByIHx8IHMuU1RBVFVTX0NPREVTW3RdKSwKICAgICAgICAgICAgKG4gPSB7IENvbm5lY3Rpb246ICdjbG9zZScsICdDb250ZW50LVR5cGUnOiAndGV4dC9odG1sJywgJ0NvbnRlbnQtTGVuZ3RoJzogQnVmZmVyLmJ5dGVMZW5ndGgociksIC4uLm4gfSksCiAgICAgICAgICAgIGUud3JpdGUoCiAgICAgICAgICAgICAgYEhUVFAvMS4xICR7dH0gJHtzLlNUQVRVU19DT0RFU1t0XX1cclxuYCArCiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhuKQogICAgICAgICAgICAgICAgICAubWFwKChlKSA9PiBgJHtlfTogJHtuW2VdfWApCiAgICAgICAgICAgICAgICAgIC5qb2luKCdcclxuJykgKwogICAgICAgICAgICAgICAgJ1xyXG5cclxuJyArCiAgICAgICAgICAgICAgICByCiAgICAgICAgICAgICkpLAogICAgICAgICAgICBlLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGcpLAogICAgICAgICAgICBlLmRlc3Ryb3koKTsKICAgICAgICB9CiAgICAgICAgZS5leHBvcnRzID0gY2xhc3MgZXh0ZW5kcyBuIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIChzdXBlcigpLAogICAgICAgICAgICAgIChudWxsID09CiAgICAgICAgICAgICAgICAoZSA9IHsKICAgICAgICAgICAgICAgICAgbWF4UGF5bG9hZDogMTA0ODU3NjAwLAogICAgICAgICAgICAgICAgICBza2lwVVRGOFZhbGlkYXRpb246ICExLAogICAgICAgICAgICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZTogITEsCiAgICAgICAgICAgICAgICAgIGhhbmRsZVByb3RvY29sczogbnVsbCwKICAgICAgICAgICAgICAgICAgY2xpZW50VHJhY2tpbmc6ICEwLAogICAgICAgICAgICAgICAgICB2ZXJpZnlDbGllbnQ6IG51bGwsCiAgICAgICAgICAgICAgICAgIG5vU2VydmVyOiAhMSwKICAgICAgICAgICAgICAgICAgYmFja2xvZzogbnVsbCwKICAgICAgICAgICAgICAgICAgc2VydmVyOiBudWxsLAogICAgICAgICAgICAgICAgICBob3N0OiBudWxsLAogICAgICAgICAgICAgICAgICBwYXRoOiBudWxsLAogICAgICAgICAgICAgICAgICBwb3J0OiBudWxsLAogICAgICAgICAgICAgICAgICBXZWJTb2NrZXQ6IHUsCiAgICAgICAgICAgICAgICAgIC4uLmUKICAgICAgICAgICAgICAgIH0pLnBvcnQgJiYKICAgICAgICAgICAgICAgICFlLnNlcnZlciAmJgogICAgICAgICAgICAgICAgIWUubm9TZXJ2ZXIpIHx8CiAgICAgICAgICAgICAgICAobnVsbCAhPSBlLnBvcnQgJiYgKGUuc2VydmVyIHx8IGUubm9TZXJ2ZXIpKSB8fAogICAgICAgICAgICAgICAgKGUuc2VydmVyICYmIGUubm9TZXJ2ZXIpKQogICAgICAgICAgICApCiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT25lIGFuZCBvbmx5IG9uZSBvZiB0aGUgInBvcnQiLCAic2VydmVyIiwgb3IgIm5vU2VydmVyIiBvcHRpb25zIG11c3QgYmUgc3BlY2lmaWVkJyk7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAobnVsbCAhPSBlLnBvcnQKICAgICAgICAgICAgICAgID8gKCh0aGlzLl9zZXJ2ZXIgPSBzLmNyZWF0ZVNlcnZlcigoZSwgdCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBzLlNUQVRVU19DT0RFU1s0MjZdOwogICAgICAgICAgICAgICAgICAgIHQud3JpdGVIZWFkKDQyNiwgeyAnQ29udGVudC1MZW5ndGgnOiByLmxlbmd0aCwgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJyB9KSwgdC5lbmQocik7CiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgdGhpcy5fc2VydmVyLmxpc3RlbihlLnBvcnQsIGUuaG9zdCwgZS5iYWNrbG9nLCB0KSkKICAgICAgICAgICAgICAgIDogZS5zZXJ2ZXIgJiYgKHRoaXMuX3NlcnZlciA9IGUuc2VydmVyKSwKICAgICAgICAgICAgICB0aGlzLl9zZXJ2ZXIpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmVtaXQuYmluZCh0aGlzLCAnY29ubmVjdGlvbicpOwogICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycyA9IChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIE9iamVjdC5rZXlzKHQpKSBlLm9uKHIsIHRbcl0pOwogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIE9iamVjdC5rZXlzKHQpKSBlLnJlbW92ZUxpc3RlbmVyKHIsIHRbcl0pOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9KSh0aGlzLl9zZXJ2ZXIsIHsKICAgICAgICAgICAgICAgIGxpc3RlbmluZzogdGhpcy5lbWl0LmJpbmQodGhpcywgJ2xpc3RlbmluZycpLAogICAgICAgICAgICAgICAgZXJyb3I6IHRoaXMuZW1pdC5iaW5kKHRoaXMsICdlcnJvcicpLAogICAgICAgICAgICAgICAgdXBncmFkZTogKHQsIHIsIG4pID0-IHsKICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVVcGdyYWRlKHQsIHIsIG4sIGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgICEwID09PSBlLnBlck1lc3NhZ2VEZWZsYXRlICYmIChlLnBlck1lc3NhZ2VEZWZsYXRlID0ge30pLAogICAgICAgICAgICAgIGUuY2xpZW50VHJhY2tpbmcgJiYgKCh0aGlzLmNsaWVudHMgPSBuZXcgU2V0KCkpLCAodGhpcy5fc2hvdWxkRW1pdENsb3NlID0gITEpKSwKICAgICAgICAgICAgICAodGhpcy5vcHRpb25zID0gZSksCiAgICAgICAgICAgICAgKHRoaXMuX3N0YXRlID0gMCk7CiAgICAgICAgICB9CiAgICAgICAgICBhZGRyZXNzKCkgewogICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm5vU2VydmVyKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzZXJ2ZXIgaXMgb3BlcmF0aW5nIGluICJub1NlcnZlciIgbW9kZScpOwogICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VydmVyID8gdGhpcy5fc2VydmVyLmFkZHJlc3MoKSA6IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBjbG9zZShlKSB7CiAgICAgICAgICAgIGlmICgyID09PSB0aGlzLl9zdGF0ZSkKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgICAgICB0aGlzLm9uY2UoJ2Nsb3NlJywgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGUobmV3IEVycm9yKCdUaGUgc2VydmVyIGlzIG5vdCBydW5uaW5nJykpOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHZvaWQgcHJvY2Vzcy5uZXh0VGljayhoLCB0aGlzKQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmICgoZSAmJiB0aGlzLm9uY2UoJ2Nsb3NlJywgZSksIDEgIT09IHRoaXMuX3N0YXRlKSkKICAgICAgICAgICAgICBpZiAoKCh0aGlzLl9zdGF0ZSA9IDEpLCB0aGlzLm9wdGlvbnMubm9TZXJ2ZXIgfHwgdGhpcy5vcHRpb25zLnNlcnZlcikpCiAgICAgICAgICAgICAgICB0aGlzLl9zZXJ2ZXIgJiYgKHRoaXMuX3JlbW92ZUxpc3RlbmVycygpLCAodGhpcy5fcmVtb3ZlTGlzdGVuZXJzID0gdGhpcy5fc2VydmVyID0gbnVsbCkpLAogICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudHMgJiYgdGhpcy5jbGllbnRzLnNpemUgPyAodGhpcy5fc2hvdWxkRW1pdENsb3NlID0gITApIDogcHJvY2Vzcy5uZXh0VGljayhoLCB0aGlzKTsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9zZXJ2ZXI7CiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMoKSwKICAgICAgICAgICAgICAgICAgKHRoaXMuX3JlbW92ZUxpc3RlbmVycyA9IHRoaXMuX3NlcnZlciA9IG51bGwpLAogICAgICAgICAgICAgICAgICBlLmNsb3NlKCgpID0-IHsKICAgICAgICAgICAgICAgICAgICBoKHRoaXMpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBzaG91bGRIYW5kbGUoZSkgewogICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBhdGgpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gZS51cmwuaW5kZXhPZignPycpOwogICAgICAgICAgICAgIGlmICgoLTEgIT09IHQgPyBlLnVybC5zbGljZSgwLCB0KSA6IGUudXJsKSAhPT0gdGhpcy5vcHRpb25zLnBhdGgpIHJldHVybiAhMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICB9CiAgICAgICAgICBoYW5kbGVVcGdyYWRlKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgdC5vbignZXJyb3InLCBnKTsKICAgICAgICAgICAgY29uc3QgcyA9IHZvaWQgMCAhPT0gZS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWtleSddICYmIGUuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1rZXknXSwKICAgICAgICAgICAgICBvID0gK2UuaGVhZGVyc1snc2VjLXdlYnNvY2tldC12ZXJzaW9uJ107CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAnR0VUJyAhPT0gZS5tZXRob2QgfHwKICAgICAgICAgICAgICAnd2Vic29ja2V0JyAhPT0gZS5oZWFkZXJzLnVwZ3JhZGUudG9Mb3dlckNhc2UoKSB8fAogICAgICAgICAgICAgICFzIHx8CiAgICAgICAgICAgICAgIWYudGVzdChzKSB8fAogICAgICAgICAgICAgICg4ICE9PSBvICYmIDEzICE9PSBvKSB8fAogICAgICAgICAgICAgICF0aGlzLnNob3VsZEhhbmRsZShlKQogICAgICAgICAgICApCiAgICAgICAgICAgICAgcmV0dXJuIHAodCwgNDAwKTsKICAgICAgICAgICAgY29uc3QgdSA9IGUuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddOwogICAgICAgICAgICBsZXQgbCA9IG5ldyBTZXQoKTsKICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdSkKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbCA9IGMucGFyc2UodSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHAodCwgNDAwKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGQgPSBlLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtZXh0ZW5zaW9ucyddLAogICAgICAgICAgICAgIGggPSB7fTsKICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSAmJiB2b2lkIDAgIT09IGQpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IGEodGhpcy5vcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlLCAhMCwgdGhpcy5vcHRpb25zLm1heFBheWxvYWQpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gaS5wYXJzZShkKTsKICAgICAgICAgICAgICAgIHRbYS5leHRlbnNpb25OYW1lXSAmJiAoZS5hY2NlcHQodFthLmV4dGVuc2lvbk5hbWVdKSwgKGhbYS5leHRlbnNpb25OYW1lXSA9IGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcCh0LCA0MDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudCkgewogICAgICAgICAgICAgIGNvbnN0IGkgPSB7CiAgICAgICAgICAgICAgICBvcmlnaW46IGUuaGVhZGVyc1s4ID09PSBvID8gJ3NlYy13ZWJzb2NrZXQtb3JpZ2luJyA6ICdvcmlnaW4nXSwKICAgICAgICAgICAgICAgIHNlY3VyZTogISghZS5zb2NrZXQuYXV0aG9yaXplZCAmJiAhZS5zb2NrZXQuZW5jcnlwdGVkKSwKICAgICAgICAgICAgICAgIHJlcTogZQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgaWYgKDIgPT09IHRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQubGVuZ3RoKQogICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudChpLCAobywgaSwgYSwgYykgPT4gewogICAgICAgICAgICAgICAgICBpZiAoIW8pIHJldHVybiBwKHQsIGkgfHwgNDAxLCBhLCBjKTsKICAgICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVVwZ3JhZGUoaCwgcywgbCwgZSwgdCwgciwgbik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQoaSkpIHJldHVybiBwKHQsIDQwMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5jb21wbGV0ZVVwZ3JhZGUoaCwgcywgbCwgZSwgdCwgciwgbik7CiAgICAgICAgICB9CiAgICAgICAgICBjb21wbGV0ZVVwZ3JhZGUoZSwgdCwgciwgbiwgcywgYywgdSkgewogICAgICAgICAgICBpZiAoIXMucmVhZGFibGUgfHwgIXMud3JpdGFibGUpIHJldHVybiBzLmRlc3Ryb3koKTsKICAgICAgICAgICAgaWYgKHNbZF0pCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKAogICAgICAgICAgICAgICAgJ3NlcnZlci5oYW5kbGVVcGdyYWRlKCkgd2FzIGNhbGxlZCBtb3JlIHRoYW4gb25jZSB3aXRoIHRoZSBzYW1lIHNvY2tldCwgcG9zc2libHkgZHVlIHRvIGEgbWlzY29uZmlndXJhdGlvbicKICAgICAgICAgICAgICApOwogICAgICAgICAgICBpZiAodGhpcy5fc3RhdGUgPiAwKSByZXR1cm4gcChzLCA1MDMpOwogICAgICAgICAgICBjb25zdCBmID0gWwogICAgICAgICAgICAgICAgJ0hUVFAvMS4xIDEwMSBTd2l0Y2hpbmcgUHJvdG9jb2xzJywKICAgICAgICAgICAgICAgICdVcGdyYWRlOiB3ZWJzb2NrZXQnLAogICAgICAgICAgICAgICAgJ0Nvbm5lY3Rpb246IFVwZ3JhZGUnLAogICAgICAgICAgICAgICAgYFNlYy1XZWJTb2NrZXQtQWNjZXB0OiAke28oJ3NoYTEnKQogICAgICAgICAgICAgICAgICAudXBkYXRlKHQgKyBsKQogICAgICAgICAgICAgICAgICAuZGlnZXN0KCdiYXNlNjQnKX1gCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICBtID0gbmV3IHRoaXMub3B0aW9ucy5XZWJTb2NrZXQobnVsbCk7CiAgICAgICAgICAgIGlmIChyLnNpemUpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5vcHRpb25zLmhhbmRsZVByb3RvY29scyA_IHRoaXMub3B0aW9ucy5oYW5kbGVQcm90b2NvbHMociwgbikgOiByLnZhbHVlcygpLm5leHQoKS52YWx1ZTsKICAgICAgICAgICAgICBlICYmIChmLnB1c2goYFNlYy1XZWJTb2NrZXQtUHJvdG9jb2w6ICR7ZX1gKSwgKG0uX3Byb3RvY29sID0gZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlW2EuZXh0ZW5zaW9uTmFtZV0pIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gZVthLmV4dGVuc2lvbk5hbWVdLnBhcmFtcywKICAgICAgICAgICAgICAgIHIgPSBpLmZvcm1hdCh7IFthLmV4dGVuc2lvbk5hbWVdOiBbdF0gfSk7CiAgICAgICAgICAgICAgZi5wdXNoKGBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnM6ICR7cn1gKSwgKG0uX2V4dGVuc2lvbnMgPSBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmVtaXQoJ2hlYWRlcnMnLCBmLCBuKSwKICAgICAgICAgICAgICBzLndyaXRlKGYuY29uY2F0KCdcclxuJykuam9pbignXHJcbicpKSwKICAgICAgICAgICAgICBzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGcpLAogICAgICAgICAgICAgIG0uc2V0U29ja2V0KHMsIGMsIHsKICAgICAgICAgICAgICAgIG1heFBheWxvYWQ6IHRoaXMub3B0aW9ucy5tYXhQYXlsb2FkLAogICAgICAgICAgICAgICAgc2tpcFVURjhWYWxpZGF0aW9uOiB0aGlzLm9wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdGhpcy5jbGllbnRzICYmCiAgICAgICAgICAgICAgICAodGhpcy5jbGllbnRzLmFkZChtKSwKICAgICAgICAgICAgICAgIG0ub24oJ2Nsb3NlJywgKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmNsaWVudHMuZGVsZXRlKG0pLCB0aGlzLl9zaG91bGRFbWl0Q2xvc2UgJiYgIXRoaXMuY2xpZW50cy5zaXplICYmIHByb2Nlc3MubmV4dFRpY2soaCwgdGhpcyk7CiAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgdShtLCBuKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9LAogICAgICA3ODQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgY29uc3QgbiA9IHIoNDY3KSwKICAgICAgICAgIHMgPSByKDEyNTYpLAogICAgICAgICAgbyA9IHIoNjEzNiksCiAgICAgICAgICBpID0gcig1MjU2KSwKICAgICAgICAgIGEgPSByKDE5MiksCiAgICAgICAgICB7IHJhbmRvbUJ5dGVzOiBjLCBjcmVhdGVIYXNoOiB1IH0gPSByKDc5NjgpLAogICAgICAgICAgeyBSZWFkYWJsZTogbCB9ID0gcig4Mzc4KSwKICAgICAgICAgIHsgVVJMOiBkIH0gPSByKDg3MTYpLAogICAgICAgICAgZiA9IHIoOGUzKSwKICAgICAgICAgIGggPSByKDI0NzYpLAogICAgICAgICAgZyA9IHIoNDQxNiksCiAgICAgICAgICB7CiAgICAgICAgICAgIEJJTkFSWV9UWVBFUzogcCwKICAgICAgICAgICAgRU1QVFlfQlVGRkVSOiBtLAogICAgICAgICAgICBHVUlEOiBiLAogICAgICAgICAgICBrRm9yT25FdmVudEF0dHJpYnV0ZTogeSwKICAgICAgICAgICAga0xpc3RlbmVyOiBBLAogICAgICAgICAgICBrU3RhdHVzQ29kZTogdiwKICAgICAgICAgICAga1dlYlNvY2tldDogRSwKICAgICAgICAgICAgTk9PUDogdwogICAgICAgICAgfSA9IHIoMjkyOCksCiAgICAgICAgICB7CiAgICAgICAgICAgIEV2ZW50VGFyZ2V0OiB7IGFkZEV2ZW50TGlzdGVuZXI6IFQsIHJlbW92ZUV2ZW50TGlzdGVuZXI6IFAgfQogICAgICAgICAgfSA9IHIoMjgwMCksCiAgICAgICAgICB7IGZvcm1hdDogUywgcGFyc2U6IE8gfSA9IHIoMTI3MiksCiAgICAgICAgICB7IHRvQnVmZmVyOiBSIH0gPSByKDkwMTYpLAogICAgICAgICAgTiA9IFsnQ09OTkVDVElORycsICdPUEVOJywgJ0NMT1NJTkcnLCAnQ0xPU0VEJ10sCiAgICAgICAgICBMID0gL15bISMkJSYnKitcLS4wLTlBLVpeX2B8YS16fl0rJC8sCiAgICAgICAgICBCID0gWzgsIDEzXTsKICAgICAgICBjbGFzcyBDIGV4dGVuZHMgbiB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIHN1cGVyKCksCiAgICAgICAgICAgICAgKHRoaXMuX2JpbmFyeVR5cGUgPSBwWzBdKSwKICAgICAgICAgICAgICAodGhpcy5fY2xvc2VDb2RlID0gMTAwNiksCiAgICAgICAgICAgICAgKHRoaXMuX2Nsb3NlRnJhbWVSZWNlaXZlZCA9ICExKSwKICAgICAgICAgICAgICAodGhpcy5fY2xvc2VGcmFtZVNlbnQgPSAhMSksCiAgICAgICAgICAgICAgKHRoaXMuX2Nsb3NlTWVzc2FnZSA9IG0pLAogICAgICAgICAgICAgICh0aGlzLl9jbG9zZVRpbWVyID0gbnVsbCksCiAgICAgICAgICAgICAgKHRoaXMuX2V4dGVuc2lvbnMgPSB7fSksCiAgICAgICAgICAgICAgKHRoaXMuX3BhdXNlZCA9ICExKSwKICAgICAgICAgICAgICAodGhpcy5fcHJvdG9jb2wgPSAnJyksCiAgICAgICAgICAgICAgKHRoaXMuX3JlYWR5U3RhdGUgPSBDLkNPTk5FQ1RJTkcpLAogICAgICAgICAgICAgICh0aGlzLl9yZWNlaXZlciA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLl9zZW5kZXIgPSBudWxsKSwKICAgICAgICAgICAgICAodGhpcy5fc29ja2V0ID0gbnVsbCksCiAgICAgICAgICAgICAgbnVsbCAhPT0gZQogICAgICAgICAgICAgICAgPyAoKHRoaXMuX2J1ZmZlcmVkQW1vdW50ID0gMCksCiAgICAgICAgICAgICAgICAgICh0aGlzLl9pc1NlcnZlciA9ICExKSwKICAgICAgICAgICAgICAgICAgKHRoaXMuX3JlZGlyZWN0cyA9IDApLAogICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHQKICAgICAgICAgICAgICAgICAgICA_ICh0ID0gW10pCiAgICAgICAgICAgICAgICAgICAgOiBBcnJheS5pc0FycmF5KHQpIHx8ICgnb2JqZWN0JyA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ID8gKChyID0gdCksICh0ID0gW10pKSA6ICh0ID0gW3RdKSksCiAgICAgICAgICAgICAgICAgIGsodGhpcywgZSwgdCwgcikpCiAgICAgICAgICAgICAgICA6ICh0aGlzLl9pc1NlcnZlciA9ICEwKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBiaW5hcnlUeXBlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fYmluYXJ5VHlwZTsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBiaW5hcnlUeXBlKGUpIHsKICAgICAgICAgICAgcC5pbmNsdWRlcyhlKSAmJiAoKHRoaXMuX2JpbmFyeVR5cGUgPSBlKSwgdGhpcy5fcmVjZWl2ZXIgJiYgKHRoaXMuX3JlY2VpdmVyLl9iaW5hcnlUeXBlID0gZSkpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGJ1ZmZlcmVkQW1vdW50KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fc29ja2V0CiAgICAgICAgICAgICAgPyB0aGlzLl9zb2NrZXQuX3dyaXRhYmxlU3RhdGUubGVuZ3RoICsgdGhpcy5fc2VuZGVyLl9idWZmZXJlZEJ5dGVzCiAgICAgICAgICAgICAgOiB0aGlzLl9idWZmZXJlZEFtb3VudDsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBleHRlbnNpb25zKCkgewogICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fZXh0ZW5zaW9ucykuam9pbigpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGlzUGF1c2VkKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fcGF1c2VkOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IG9uY2xvc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IG9uZXJyb3IoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IG9ub3BlbigpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgb25tZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwcm90b2NvbCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3RvY29sOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHJlYWR5U3RhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZWFkeVN0YXRlOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHVybCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VybDsKICAgICAgICAgIH0KICAgICAgICAgIHNldFNvY2tldChlLCB0LCByKSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgaCh7CiAgICAgICAgICAgICAgYmluYXJ5VHlwZTogdGhpcy5iaW5hcnlUeXBlLAogICAgICAgICAgICAgIGV4dGVuc2lvbnM6IHRoaXMuX2V4dGVuc2lvbnMsCiAgICAgICAgICAgICAgaXNTZXJ2ZXI6IHRoaXMuX2lzU2VydmVyLAogICAgICAgICAgICAgIG1heFBheWxvYWQ6IHIubWF4UGF5bG9hZCwKICAgICAgICAgICAgICBza2lwVVRGOFZhbGlkYXRpb246IHIuc2tpcFVURjhWYWxpZGF0aW9uCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAodGhpcy5fc2VuZGVyID0gbmV3IGcoZSwgdGhpcy5fZXh0ZW5zaW9ucywgci5nZW5lcmF0ZU1hc2spKSwKICAgICAgICAgICAgICAodGhpcy5fcmVjZWl2ZXIgPSBuKSwKICAgICAgICAgICAgICAodGhpcy5fc29ja2V0ID0gZSksCiAgICAgICAgICAgICAgKG5bRV0gPSB0aGlzKSwKICAgICAgICAgICAgICAoZVtFXSA9IHRoaXMpLAogICAgICAgICAgICAgIG4ub24oJ2NvbmNsdWRlJywgRCksCiAgICAgICAgICAgICAgbi5vbignZHJhaW4nLCB4KSwKICAgICAgICAgICAgICBuLm9uKCdlcnJvcicsIF8pLAogICAgICAgICAgICAgIG4ub24oJ21lc3NhZ2UnLCBqKSwKICAgICAgICAgICAgICBuLm9uKCdwaW5nJywgSCksCiAgICAgICAgICAgICAgbi5vbigncG9uZycsIFgpLAogICAgICAgICAgICAgIGUuc2V0VGltZW91dCgwKSwKICAgICAgICAgICAgICBlLnNldE5vRGVsYXkoKSwKICAgICAgICAgICAgICB0Lmxlbmd0aCA-IDAgJiYgZS51bnNoaWZ0KHQpLAogICAgICAgICAgICAgIGUub24oJ2Nsb3NlJywgUSksCiAgICAgICAgICAgICAgZS5vbignZGF0YScsIFopLAogICAgICAgICAgICAgIGUub24oJ2VuZCcsIHopLAogICAgICAgICAgICAgIGUub24oJ2Vycm9yJywgSyksCiAgICAgICAgICAgICAgKHRoaXMuX3JlYWR5U3RhdGUgPSBDLk9QRU4pLAogICAgICAgICAgICAgIHRoaXMuZW1pdCgnb3BlbicpOwogICAgICAgICAgfQogICAgICAgICAgZW1pdENsb3NlKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuX3NvY2tldCkKICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuX3JlYWR5U3RhdGUgPSBDLkNMT1NFRCksIHZvaWQgdGhpcy5lbWl0KCdjbG9zZScsIHRoaXMuX2Nsb3NlQ29kZSwgdGhpcy5fY2xvc2VNZXNzYWdlKTsKICAgICAgICAgICAgdGhpcy5fZXh0ZW5zaW9uc1tmLmV4dGVuc2lvbk5hbWVdICYmIHRoaXMuX2V4dGVuc2lvbnNbZi5leHRlbnNpb25OYW1lXS5jbGVhbnVwKCksCiAgICAgICAgICAgICAgdGhpcy5fcmVjZWl2ZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCksCiAgICAgICAgICAgICAgKHRoaXMuX3JlYWR5U3RhdGUgPSBDLkNMT1NFRCksCiAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjbG9zZScsIHRoaXMuX2Nsb3NlQ29kZSwgdGhpcy5fY2xvc2VNZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb3NlKGUsIHQpIHsKICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPT0gQy5DTE9TRUQpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBDLkNPTk5FQ1RJTkcpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAnV2ViU29ja2V0IHdhcyBjbG9zZWQgYmVmb3JlIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCc7CiAgICAgICAgICAgICAgICByZXR1cm4gSih0aGlzLCB0aGlzLl9yZXEsIGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgIT09IEMuQ0xPU0lORwogICAgICAgICAgICAgICAgPyAoKHRoaXMuX3JlYWR5U3RhdGUgPSBDLkNMT1NJTkcpLAogICAgICAgICAgICAgICAgICB0aGlzLl9zZW5kZXIuY2xvc2UoZSwgdCwgIXRoaXMuX2lzU2VydmVyLCAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGUgfHwKICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5fY2xvc2VGcmFtZVNlbnQgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAodGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkIHx8IHRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkgJiYgdGhpcy5fc29ja2V0LmVuZCgpKTsKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICh0aGlzLl9jbG9zZVRpbWVyID0gc2V0VGltZW91dCh0aGlzLl9zb2NrZXQuZGVzdHJveS5iaW5kKHRoaXMuX3NvY2tldCksIDNlNCkpKQogICAgICAgICAgICAgICAgOiB0aGlzLl9jbG9zZUZyYW1lU2VudCAmJgogICAgICAgICAgICAgICAgICAodGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkIHx8IHRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkgJiYKICAgICAgICAgICAgICAgICAgdGhpcy5fc29ja2V0LmVuZCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBwYXVzZSgpIHsKICAgICAgICAgICAgdGhpcy5yZWFkeVN0YXRlICE9PSBDLkNPTk5FQ1RJTkcgJiYKICAgICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgIT09IEMuQ0xPU0VEICYmCiAgICAgICAgICAgICAgKCh0aGlzLl9wYXVzZWQgPSAhMCksIHRoaXMuX3NvY2tldC5wYXVzZSgpKTsKICAgICAgICAgIH0KICAgICAgICAgIHBpbmcoZSwgdCwgcikgewogICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBDLkNPTk5FQ1RJTkcpIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlIDAgKENPTk5FQ1RJTkcpJyk7CiAgICAgICAgICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGUgPyAoKHIgPSBlKSwgKGUgPSB0ID0gdm9pZCAwKSkgOiAnZnVuY3Rpb24nID09IHR5cGVvZiB0ICYmICgociA9IHQpLCAodCA9IHZvaWQgMCkpLAogICAgICAgICAgICAgICdudW1iZXInID09IHR5cGVvZiBlICYmIChlID0gZS50b1N0cmluZygpKSwKICAgICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IEMuT1BFTgogICAgICAgICAgICAgICAgPyAodm9pZCAwID09PSB0ICYmICh0ID0gIXRoaXMuX2lzU2VydmVyKSwgdGhpcy5fc2VuZGVyLnBpbmcoZSB8fCBtLCB0LCByKSkKICAgICAgICAgICAgICAgIDogVSh0aGlzLCBlLCByKTsKICAgICAgICAgIH0KICAgICAgICAgIHBvbmcoZSwgdCwgcikgewogICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBDLkNPTk5FQ1RJTkcpIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlIDAgKENPTk5FQ1RJTkcpJyk7CiAgICAgICAgICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIGUgPyAoKHIgPSBlKSwgKGUgPSB0ID0gdm9pZCAwKSkgOiAnZnVuY3Rpb24nID09IHR5cGVvZiB0ICYmICgociA9IHQpLCAodCA9IHZvaWQgMCkpLAogICAgICAgICAgICAgICdudW1iZXInID09IHR5cGVvZiBlICYmIChlID0gZS50b1N0cmluZygpKSwKICAgICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgPT09IEMuT1BFTgogICAgICAgICAgICAgICAgPyAodm9pZCAwID09PSB0ICYmICh0ID0gIXRoaXMuX2lzU2VydmVyKSwgdGhpcy5fc2VuZGVyLnBvbmcoZSB8fCBtLCB0LCByKSkKICAgICAgICAgICAgICAgIDogVSh0aGlzLCBlLCByKTsKICAgICAgICAgIH0KICAgICAgICAgIHJlc3VtZSgpIHsKICAgICAgICAgICAgdGhpcy5yZWFkeVN0YXRlICE9PSBDLkNPTk5FQ1RJTkcgJiYKICAgICAgICAgICAgICB0aGlzLnJlYWR5U3RhdGUgIT09IEMuQ0xPU0VEICYmCiAgICAgICAgICAgICAgKCh0aGlzLl9wYXVzZWQgPSAhMSksIHRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLm5lZWREcmFpbiB8fCB0aGlzLl9zb2NrZXQucmVzdW1lKCkpOwogICAgICAgICAgfQogICAgICAgICAgc2VuZChlLCB0LCByKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IEMuQ09OTkVDVElORykgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgaXMgbm90IG9wZW46IHJlYWR5U3RhdGUgMCAoQ09OTkVDVElORyknKTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgnZnVuY3Rpb24nID09IHR5cGVvZiB0ICYmICgociA9IHQpLCAodCA9IHt9KSksCiAgICAgICAgICAgICAgJ251bWJlcicgPT0gdHlwZW9mIGUgJiYgKGUgPSBlLnRvU3RyaW5nKCkpLAogICAgICAgICAgICAgIHRoaXMucmVhZHlTdGF0ZSAhPT0gQy5PUEVOKQogICAgICAgICAgICApCiAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgVSh0aGlzLCBlLCByKTsKICAgICAgICAgICAgY29uc3QgbiA9IHsgYmluYXJ5OiAnc3RyaW5nJyAhPSB0eXBlb2YgZSwgbWFzazogIXRoaXMuX2lzU2VydmVyLCBjb21wcmVzczogITAsIGZpbjogITAsIC4uLnQgfTsKICAgICAgICAgICAgdGhpcy5fZXh0ZW5zaW9uc1tmLmV4dGVuc2lvbk5hbWVdIHx8IChuLmNvbXByZXNzID0gITEpLCB0aGlzLl9zZW5kZXIuc2VuZChlIHx8IG0sIG4sIHIpOwogICAgICAgICAgfQogICAgICAgICAgdGVybWluYXRlKCkgewogICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBDLkNMT1NFRCkgewogICAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IEMuQ09OTkVDVElORykgewogICAgICAgICAgICAgICAgY29uc3QgZSA9ICdXZWJTb2NrZXQgd2FzIGNsb3NlZCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkJzsKICAgICAgICAgICAgICAgIHJldHVybiBKKHRoaXMsIHRoaXMuX3JlcSwgZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMuX3NvY2tldCAmJiAoKHRoaXMuX3JlYWR5U3RhdGUgPSBDLkNMT1NJTkcpLCB0aGlzLl9zb2NrZXQuZGVzdHJveSgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBrKGUsIHQsIHIsIG4pIHsKICAgICAgICAgIGNvbnN0IGkgPSB7CiAgICAgICAgICAgIHByb3RvY29sVmVyc2lvbjogQlsxXSwKICAgICAgICAgICAgbWF4UGF5bG9hZDogMTA0ODU3NjAwLAogICAgICAgICAgICBza2lwVVRGOFZhbGlkYXRpb246ICExLAogICAgICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZTogITAsCiAgICAgICAgICAgIGZvbGxvd1JlZGlyZWN0czogITEsCiAgICAgICAgICAgIG1heFJlZGlyZWN0czogMTAsCiAgICAgICAgICAgIC4uLm4sCiAgICAgICAgICAgIGNyZWF0ZUNvbm5lY3Rpb246IHZvaWQgMCwKICAgICAgICAgICAgc29ja2V0UGF0aDogdm9pZCAwLAogICAgICAgICAgICBob3N0bmFtZTogdm9pZCAwLAogICAgICAgICAgICBwcm90b2NvbDogdm9pZCAwLAogICAgICAgICAgICB0aW1lb3V0OiB2b2lkIDAsCiAgICAgICAgICAgIG1ldGhvZDogdm9pZCAwLAogICAgICAgICAgICBob3N0OiB2b2lkIDAsCiAgICAgICAgICAgIHBhdGg6IHZvaWQgMCwKICAgICAgICAgICAgcG9ydDogdm9pZCAwCiAgICAgICAgICB9OwogICAgICAgICAgaWYgKCFCLmluY2x1ZGVzKGkucHJvdG9jb2xWZXJzaW9uKSkKICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoCiAgICAgICAgICAgICAgYFVuc3VwcG9ydGVkIHByb3RvY29sIHZlcnNpb246ICR7aS5wcm90b2NvbFZlcnNpb259IChzdXBwb3J0ZWQgdmVyc2lvbnM6ICR7Qi5qb2luKCcsICcpfSlgCiAgICAgICAgICAgICk7CiAgICAgICAgICBsZXQgYTsKICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgZCkgKGEgPSB0KSwgKGUuX3VybCA9IHQuaHJlZik7CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBhID0gbmV3IGQodCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYEludmFsaWQgVVJMOiAke3R9YCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZS5fdXJsID0gdDsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGwgPSAnd3NzOicgPT09IGEucHJvdG9jb2wsCiAgICAgICAgICAgIGggPSAnd3MrdW5peDonID09PSBhLnByb3RvY29sOwogICAgICAgICAgbGV0IGc7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICgnd3M6JyA9PT0gYS5wcm90b2NvbCB8fCBsIHx8IGgKICAgICAgICAgICAgICA_IGggJiYgIWEucGF0aG5hbWUKICAgICAgICAgICAgICAgID8gKGcgPSAiVGhlIFVSTCdzIHBhdGhuYW1lIGlzIGVtcHR5IikKICAgICAgICAgICAgICAgIDogYS5oYXNoICYmIChnID0gJ1RoZSBVUkwgY29udGFpbnMgYSBmcmFnbWVudCBpZGVudGlmaWVyJykKICAgICAgICAgICAgICA6IChnID0gJ1RoZSBVUkxcJ3MgcHJvdG9jb2wgbXVzdCBiZSBvbmUgb2YgIndzOiIsICJ3c3M6Iiwgb3IgIndzK3VuaXg6IicpLAogICAgICAgICAgICBnKQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgU3ludGF4RXJyb3IoZyk7CiAgICAgICAgICAgIGlmICgwID09PSBlLl9yZWRpcmVjdHMpIHRocm93IHQ7CiAgICAgICAgICAgIHJldHVybiB2b2lkIEkoZSwgdCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBwID0gbCA_IDQ0MyA6IDgwLAogICAgICAgICAgICBtID0gYygxNikudG9TdHJpbmcoJ2Jhc2U2NCcpLAogICAgICAgICAgICB5ID0gbCA_IHMuZ2V0IDogby5nZXQsCiAgICAgICAgICAgIEEgPSBuZXcgU2V0KCk7CiAgICAgICAgICBsZXQgdjsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgKChpLmNyZWF0ZUNvbm5lY3Rpb24gPSBsID8gTSA6IEYpLAogICAgICAgICAgICAoaS5kZWZhdWx0UG9ydCA9IGkuZGVmYXVsdFBvcnQgfHwgcCksCiAgICAgICAgICAgIChpLnBvcnQgPSBhLnBvcnQgfHwgcCksCiAgICAgICAgICAgIChpLmhvc3QgPSBhLmhvc3RuYW1lLnN0YXJ0c1dpdGgoJ1snKSA_IGEuaG9zdG5hbWUuc2xpY2UoMSwgLTEpIDogYS5ob3N0bmFtZSksCiAgICAgICAgICAgIChpLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgJ1NlYy1XZWJTb2NrZXQtVmVyc2lvbic6IGkucHJvdG9jb2xWZXJzaW9uLAogICAgICAgICAgICAgICdTZWMtV2ViU29ja2V0LUtleSc6IG0sCiAgICAgICAgICAgICAgQ29ubmVjdGlvbjogJ1VwZ3JhZGUnLAogICAgICAgICAgICAgIFVwZ3JhZGU6ICd3ZWJzb2NrZXQnLAogICAgICAgICAgICAgIC4uLmkuaGVhZGVycwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgKGkucGF0aCA9IGEucGF0aG5hbWUgKyBhLnNlYXJjaCksCiAgICAgICAgICAgIChpLnRpbWVvdXQgPSBpLmhhbmRzaGFrZVRpbWVvdXQpLAogICAgICAgICAgICBpLnBlck1lc3NhZ2VEZWZsYXRlICYmCiAgICAgICAgICAgICAgKCh2ID0gbmV3IGYoITAgIT09IGkucGVyTWVzc2FnZURlZmxhdGUgPyBpLnBlck1lc3NhZ2VEZWZsYXRlIDoge30sICExLCBpLm1heFBheWxvYWQpKSwKICAgICAgICAgICAgICAoaS5oZWFkZXJzWydTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMnXSA9IFMoeyBbZi5leHRlbnNpb25OYW1lXTogdi5vZmZlcigpIH0pKSksCiAgICAgICAgICAgIHIubGVuZ3RoKQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiByKSB7CiAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBlIHx8ICFMLnRlc3QoZSkgfHwgQS5oYXMoZSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0FuIGludmFsaWQgb3IgZHVwbGljYXRlZCBzdWJwcm90b2NvbCB3YXMgc3BlY2lmaWVkJyk7CiAgICAgICAgICAgICAgQS5hZGQoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaS5oZWFkZXJzWydTZWMtV2ViU29ja2V0LVByb3RvY29sJ10gPSByLmpvaW4oJywnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgKICAgICAgICAgICAgKGkub3JpZ2luICYmCiAgICAgICAgICAgICAgKGkucHJvdG9jb2xWZXJzaW9uIDwgMTMgPyAoaS5oZWFkZXJzWydTZWMtV2ViU29ja2V0LU9yaWdpbiddID0gaS5vcmlnaW4pIDogKGkuaGVhZGVycy5PcmlnaW4gPSBpLm9yaWdpbikpLAogICAgICAgICAgICAoYS51c2VybmFtZSB8fCBhLnBhc3N3b3JkKSAmJiAoaS5hdXRoID0gYCR7YS51c2VybmFtZX06JHthLnBhc3N3b3JkfWApLAogICAgICAgICAgICBoKQogICAgICAgICAgKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBpLnBhdGguc3BsaXQoJzonKTsKICAgICAgICAgICAgKGkuc29ja2V0UGF0aCA9IGVbMF0pLCAoaS5wYXRoID0gZVsxXSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaS5mb2xsb3dSZWRpcmVjdHMpIHsKICAgICAgICAgICAgaWYgKDAgPT09IGUuX3JlZGlyZWN0cykgewogICAgICAgICAgICAgIGUuX29yaWdpbmFsSG9zdCA9IGEuaG9zdDsKICAgICAgICAgICAgICBjb25zdCB0ID0gbiAmJiBuLmhlYWRlcnM7CiAgICAgICAgICAgICAgaWYgKCgobiA9IHsgLi4ubiwgaGVhZGVyczoge30gfSksIHQpKQogICAgICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgcl0gb2YgT2JqZWN0LmVudHJpZXModCkpIG4uaGVhZGVyc1tlLnRvTG93ZXJDYXNlKCldID0gcjsKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgYS5ob3N0ICE9PSBlLl9vcmlnaW5hbEhvc3QgJiYKICAgICAgICAgICAgICAgIChkZWxldGUgaS5oZWFkZXJzLmF1dGhvcml6YXRpb24sIGRlbGV0ZSBpLmhlYWRlcnMuY29va2llLCBkZWxldGUgaS5oZWFkZXJzLmhvc3QsIChpLmF1dGggPSB2b2lkIDApKTsKICAgICAgICAgICAgaS5hdXRoICYmCiAgICAgICAgICAgICAgIW4uaGVhZGVycy5hdXRob3JpemF0aW9uICYmCiAgICAgICAgICAgICAgKG4uaGVhZGVycy5hdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBCdWZmZXIuZnJvbShpLmF1dGgpLnRvU3RyaW5nKCdiYXNlNjQnKSk7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgRSA9IChlLl9yZXEgPSB5KGkpKTsKICAgICAgICAgIGkudGltZW91dCAmJgogICAgICAgICAgICBFLm9uKCd0aW1lb3V0JywgKCkgPT4gewogICAgICAgICAgICAgIEooZSwgRSwgJ09wZW5pbmcgaGFuZHNoYWtlIGhhcyB0aW1lZCBvdXQnKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIEUub24oJ2Vycm9yJywgKHQpID0-IHsKICAgICAgICAgICAgICBudWxsID09PSBFIHx8IEUuYWJvcnRlZCB8fCAoKEUgPSBlLl9yZXEgPSBudWxsKSwgSShlLCB0KSk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBFLm9uKCdyZXNwb25zZScsIChzKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgbyA9IHMuaGVhZGVycy5sb2NhdGlvbiwKICAgICAgICAgICAgICAgIGEgPSBzLnN0YXR1c0NvZGU7CiAgICAgICAgICAgICAgaWYgKG8gJiYgaS5mb2xsb3dSZWRpcmVjdHMgJiYgYSA-PSAzMDAgJiYgYSA8IDQwMCkgewogICAgICAgICAgICAgICAgaWYgKCsrZS5fcmVkaXJlY3RzID4gaS5tYXhSZWRpcmVjdHMpIHJldHVybiB2b2lkIEooZSwgRSwgJ01heGltdW0gcmVkaXJlY3RzIGV4Y2VlZGVkJyk7CiAgICAgICAgICAgICAgICBsZXQgczsKICAgICAgICAgICAgICAgIEUuYWJvcnQoKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIHMgPSBuZXcgZChvLCB0KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBTeW50YXhFcnJvcihgSW52YWxpZCBVUkw6ICR7b31gKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgSShlLCByKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGsoZSwgcywgciwgbik7CiAgICAgICAgICAgICAgfSBlbHNlIGUuZW1pdCgndW5leHBlY3RlZC1yZXNwb25zZScsIEUsIHMpIHx8IEooZSwgRSwgYFVuZXhwZWN0ZWQgc2VydmVyIHJlc3BvbnNlOiAke3Muc3RhdHVzQ29kZX1gKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIEUub24oJ3VwZ3JhZGUnLCAodCwgciwgbikgPT4gewogICAgICAgICAgICAgIGlmICgoZS5lbWl0KCd1cGdyYWRlJywgdCksIGUucmVhZHlTdGF0ZSAhPT0gQy5DT05ORUNUSU5HKSkgcmV0dXJuOwogICAgICAgICAgICAgIEUgPSBlLl9yZXEgPSBudWxsOwogICAgICAgICAgICAgIGNvbnN0IHMgPSB1KCdzaGExJykKICAgICAgICAgICAgICAgIC51cGRhdGUobSArIGIpCiAgICAgICAgICAgICAgICAuZGlnZXN0KCdiYXNlNjQnKTsKICAgICAgICAgICAgICBpZiAodC5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWFjY2VwdCddICE9PSBzKSByZXR1cm4gdm9pZCBKKGUsIHIsICdJbnZhbGlkIFNlYy1XZWJTb2NrZXQtQWNjZXB0IGhlYWRlcicpOwogICAgICAgICAgICAgIGNvbnN0IG8gPSB0LmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtcHJvdG9jb2wnXTsKICAgICAgICAgICAgICBsZXQgYTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAodm9pZCAwICE9PSBvCiAgICAgICAgICAgICAgICAgID8gQS5zaXplCiAgICAgICAgICAgICAgICAgICAgPyBBLmhhcyhvKSB8fCAoYSA9ICdTZXJ2ZXIgc2VudCBhbiBpbnZhbGlkIHN1YnByb3RvY29sJykKICAgICAgICAgICAgICAgICAgICA6IChhID0gJ1NlcnZlciBzZW50IGEgc3VicHJvdG9jb2wgYnV0IG5vbmUgd2FzIHJlcXVlc3RlZCcpCiAgICAgICAgICAgICAgICAgIDogQS5zaXplICYmIChhID0gJ1NlcnZlciBzZW50IG5vIHN1YnByb3RvY29sJyksCiAgICAgICAgICAgICAgICBhKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIEooZSwgciwgYSk7CiAgICAgICAgICAgICAgbyAmJiAoZS5fcHJvdG9jb2wgPSBvKTsKICAgICAgICAgICAgICBjb25zdCBjID0gdC5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWV4dGVuc2lvbnMnXTsKICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBjKSB7CiAgICAgICAgICAgICAgICBpZiAoIXYpCiAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIEooZSwgciwgJ1NlcnZlciBzZW50IGEgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zIGhlYWRlciBidXQgbm8gZXh0ZW5zaW9uIHdhcyByZXF1ZXN0ZWQnKTsKICAgICAgICAgICAgICAgIGxldCB0OwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgdCA9IE8oYyk7CiAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIEooZSwgciwgJ0ludmFsaWQgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zIGhlYWRlcicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgbiA9IE9iamVjdC5rZXlzKHQpOwogICAgICAgICAgICAgICAgaWYgKDEgIT09IG4ubGVuZ3RoIHx8IG5bMF0gIT09IGYuZXh0ZW5zaW9uTmFtZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgSihlLCByLCAnU2VydmVyIGluZGljYXRlZCBhbiBleHRlbnNpb24gdGhhdCB3YXMgbm90IHJlcXVlc3RlZCcpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgdi5hY2NlcHQodFtmLmV4dGVuc2lvbk5hbWVdKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgSihlLCByLCAnSW52YWxpZCBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMgaGVhZGVyJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlLl9leHRlbnNpb25zW2YuZXh0ZW5zaW9uTmFtZV0gPSB2OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlLnNldFNvY2tldChyLCBuLCB7CiAgICAgICAgICAgICAgICBnZW5lcmF0ZU1hc2s6IGkuZ2VuZXJhdGVNYXNrLAogICAgICAgICAgICAgICAgbWF4UGF5bG9hZDogaS5tYXhQYXlsb2FkLAogICAgICAgICAgICAgICAgc2tpcFVURjhWYWxpZGF0aW9uOiBpLnNraXBVVEY4VmFsaWRhdGlvbgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gSShlLCB0KSB7CiAgICAgICAgICAoZS5fcmVhZHlTdGF0ZSA9IEMuQ0xPU0lORyksIGUuZW1pdCgnZXJyb3InLCB0KSwgZS5lbWl0Q2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gRihlKSB7CiAgICAgICAgICByZXR1cm4gKGUucGF0aCA9IGUuc29ja2V0UGF0aCksIGkuY29ubmVjdChlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gTShlKSB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoZS5wYXRoID0gdm9pZCAwKSwKICAgICAgICAgICAgZS5zZXJ2ZXJuYW1lIHx8ICcnID09PSBlLnNlcnZlcm5hbWUgfHwgKGUuc2VydmVybmFtZSA9IGkuaXNJUChlLmhvc3QpID8gJycgOiBlLmhvc3QpLAogICAgICAgICAgICBhLmNvbm5lY3QoZSkKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEooZSwgdCwgcikgewogICAgICAgICAgZS5fcmVhZHlTdGF0ZSA9IEMuQ0xPU0lORzsKICAgICAgICAgIGNvbnN0IG4gPSBuZXcgRXJyb3Iocik7CiAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShuLCBKKSwKICAgICAgICAgICAgdC5zZXRIZWFkZXIKICAgICAgICAgICAgICA_ICh0LmFib3J0KCksCiAgICAgICAgICAgICAgICB0LnNvY2tldCAmJiAhdC5zb2NrZXQuZGVzdHJveWVkICYmIHQuc29ja2V0LmRlc3Ryb3koKSwKICAgICAgICAgICAgICAgIHQub25jZSgnYWJvcnQnLCBlLmVtaXRDbG9zZS5iaW5kKGUpKSwKICAgICAgICAgICAgICAgIGUuZW1pdCgnZXJyb3InLCBuKSkKICAgICAgICAgICAgICA6ICh0LmRlc3Ryb3kobiksIHQub25jZSgnZXJyb3InLCBlLmVtaXQuYmluZChlLCAnZXJyb3InKSksIHQub25jZSgnY2xvc2UnLCBlLmVtaXRDbG9zZS5iaW5kKGUpKSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIFUoZSwgdCwgcikgewogICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IFIodCkubGVuZ3RoOwogICAgICAgICAgICBlLl9zb2NrZXQgPyAoZS5fc2VuZGVyLl9idWZmZXJlZEJ5dGVzICs9IHIpIDogKGUuX2J1ZmZlcmVkQW1vdW50ICs9IHIpOwogICAgICAgICAgfQogICAgICAgICAgciAmJiByKG5ldyBFcnJvcihgV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlICR7ZS5yZWFkeVN0YXRlfSAoJHtOW2UucmVhZHlTdGF0ZV19KWApKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gRChlLCB0KSB7CiAgICAgICAgICBjb25zdCByID0gdGhpc1tFXTsKICAgICAgICAgIChyLl9jbG9zZUZyYW1lUmVjZWl2ZWQgPSAhMCksCiAgICAgICAgICAgIChyLl9jbG9zZU1lc3NhZ2UgPSB0KSwKICAgICAgICAgICAgKHIuX2Nsb3NlQ29kZSA9IGUpLAogICAgICAgICAgICB2b2lkIDAgIT09IHIuX3NvY2tldFtFXSAmJgogICAgICAgICAgICAgIChyLl9zb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBaKSwKICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKFYsIHIuX3NvY2tldCksCiAgICAgICAgICAgICAgMTAwNSA9PT0gZSA_IHIuY2xvc2UoKSA6IHIuY2xvc2UoZSwgdCkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB4KCkgewogICAgICAgICAgY29uc3QgZSA9IHRoaXNbRV07CiAgICAgICAgICBlLmlzUGF1c2VkIHx8IGUuX3NvY2tldC5yZXN1bWUoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gXyhlKSB7CiAgICAgICAgICBjb25zdCB0ID0gdGhpc1tFXTsKICAgICAgICAgIHZvaWQgMCAhPT0gdC5fc29ja2V0W0VdICYmCiAgICAgICAgICAgICh0Ll9zb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBaKSwgcHJvY2Vzcy5uZXh0VGljayhWLCB0Ll9zb2NrZXQpLCB0LmNsb3NlKGVbdl0pKSwKICAgICAgICAgICAgdC5lbWl0KCdlcnJvcicsIGUpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBHKCkgewogICAgICAgICAgdGhpc1tFXS5lbWl0Q2xvc2UoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaihlLCB0KSB7CiAgICAgICAgICB0aGlzW0VdLmVtaXQoJ21lc3NhZ2UnLCBlLCB0KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gSChlKSB7CiAgICAgICAgICBjb25zdCB0ID0gdGhpc1tFXTsKICAgICAgICAgIHQucG9uZyhlLCAhdC5faXNTZXJ2ZXIsIHcpLCB0LmVtaXQoJ3BpbmcnLCBlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gWChlKSB7CiAgICAgICAgICB0aGlzW0VdLmVtaXQoJ3BvbmcnLCBlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gVihlKSB7CiAgICAgICAgICBlLnJlc3VtZSgpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBRKCkgewogICAgICAgICAgY29uc3QgZSA9IHRoaXNbRV07CiAgICAgICAgICBsZXQgdDsKICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgUSksCiAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBaKSwKICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZW5kJywgeiksCiAgICAgICAgICAgIChlLl9yZWFkeVN0YXRlID0gQy5DTE9TSU5HKSwKICAgICAgICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkIHx8CiAgICAgICAgICAgICAgZS5fY2xvc2VGcmFtZVJlY2VpdmVkIHx8CiAgICAgICAgICAgICAgZS5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkIHx8CiAgICAgICAgICAgICAgbnVsbCA9PT0gKHQgPSBlLl9zb2NrZXQucmVhZCgpKSB8fAogICAgICAgICAgICAgIGUuX3JlY2VpdmVyLndyaXRlKHQpLAogICAgICAgICAgICBlLl9yZWNlaXZlci5lbmQoKSwKICAgICAgICAgICAgKHRoaXNbRV0gPSB2b2lkIDApLAogICAgICAgICAgICBjbGVhclRpbWVvdXQoZS5fY2xvc2VUaW1lciksCiAgICAgICAgICAgIGUuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkIHx8IGUuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZAogICAgICAgICAgICAgID8gZS5lbWl0Q2xvc2UoKQogICAgICAgICAgICAgIDogKGUuX3JlY2VpdmVyLm9uKCdlcnJvcicsIEcpLCBlLl9yZWNlaXZlci5vbignZmluaXNoJywgRykpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBaKGUpIHsKICAgICAgICAgIHRoaXNbRV0uX3JlY2VpdmVyLndyaXRlKGUpIHx8IHRoaXMucGF1c2UoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24geigpIHsKICAgICAgICAgIGNvbnN0IGUgPSB0aGlzW0VdOwogICAgICAgICAgKGUuX3JlYWR5U3RhdGUgPSBDLkNMT1NJTkcpLCBlLl9yZWNlaXZlci5lbmQoKSwgdGhpcy5lbmQoKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gSygpIHsKICAgICAgICAgIGNvbnN0IGUgPSB0aGlzW0VdOwogICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBLKSwgdGhpcy5vbignZXJyb3InLCB3KSwgZSAmJiAoKGUuX3JlYWR5U3RhdGUgPSBDLkNMT1NJTkcpLCB0aGlzLmRlc3Ryb3koKSk7CiAgICAgICAgfQogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLCAnQ09OTkVDVElORycsIHsgZW51bWVyYWJsZTogITAsIHZhbHVlOiBOLmluZGV4T2YoJ0NPTk5FQ1RJTkcnKSB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLnByb3RvdHlwZSwgJ0NPTk5FQ1RJTkcnLCB7IGVudW1lcmFibGU6ICEwLCB2YWx1ZTogTi5pbmRleE9mKCdDT05ORUNUSU5HJykgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQywgJ09QRU4nLCB7IGVudW1lcmFibGU6ICEwLCB2YWx1ZTogTi5pbmRleE9mKCdPUEVOJykgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQy5wcm90b3R5cGUsICdPUEVOJywgeyBlbnVtZXJhYmxlOiAhMCwgdmFsdWU6IE4uaW5kZXhPZignT1BFTicpIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEMsICdDTE9TSU5HJywgeyBlbnVtZXJhYmxlOiAhMCwgdmFsdWU6IE4uaW5kZXhPZignQ0xPU0lORycpIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEMucHJvdG90eXBlLCAnQ0xPU0lORycsIHsgZW51bWVyYWJsZTogITAsIHZhbHVlOiBOLmluZGV4T2YoJ0NMT1NJTkcnKSB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLCAnQ0xPU0VEJywgeyBlbnVtZXJhYmxlOiAhMCwgdmFsdWU6IE4uaW5kZXhPZignQ0xPU0VEJykgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQy5wcm90b3R5cGUsICdDTE9TRUQnLCB7IGVudW1lcmFibGU6ICEwLCB2YWx1ZTogTi5pbmRleE9mKCdDTE9TRUQnKSB9KSwKICAgICAgICAgIFsnYmluYXJ5VHlwZScsICdidWZmZXJlZEFtb3VudCcsICdleHRlbnNpb25zJywgJ2lzUGF1c2VkJywgJ3Byb3RvY29sJywgJ3JlYWR5U3RhdGUnLCAndXJsJ10uZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQy5wcm90b3R5cGUsIGUsIHsgZW51bWVyYWJsZTogITAgfSk7CiAgICAgICAgICB9KSwKICAgICAgICAgIFsnb3BlbicsICdlcnJvcicsICdjbG9zZScsICdtZXNzYWdlJ10uZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQy5wcm90b3R5cGUsIGBvbiR7ZX1gLCB7CiAgICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgICAgZ2V0KCkgewogICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMubGlzdGVuZXJzKGUpKSBpZiAodFt5XSkgcmV0dXJuIHRbQV07CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHNldCh0KSB7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5saXN0ZW5lcnMoZSkpCiAgICAgICAgICAgICAgICAgIGlmICh0W3ldKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihlLCB0KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCAmJiB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZSwgdCwgeyBbeV06ICEwIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KSwKICAgICAgICAgIChDLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gVCksCiAgICAgICAgICAoQy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IFApLAogICAgICAgICAgKGUuZXhwb3J0cyA9IEMpOwogICAgICB9LAogICAgICAyNzQwOiAoZSwgdCkgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQubXVsdGljYWxsM0RlcGxveW1lbnRzID0gdm9pZCAwKSwKICAgICAgICAgICh0Lm11bHRpY2FsbDNEZXBsb3ltZW50cyA9IHsKICAgICAgICAgICAgMTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDEwOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxNjogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDE4OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyNTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDMwOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMzE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MDogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDQyOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNTA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1MTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDU2OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNTc6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA2MTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDY2OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNjk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA4MjogJzB4Y2ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiZTJhMTczOTc2Y2ExMScsCiAgICAgICAgICAgIDgzOiAnMHhjYTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJlMmExNzM5NzZjYTExJywKICAgICAgICAgICAgOTc6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMDA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMDY6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMDg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMDk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMTQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMjI6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMjg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMzc6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxNDg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxNjk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxOTU6ICcweGNhMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYmUyYTE3Mzk3NmNhMTEnLAogICAgICAgICAgICAxOTk6ICcweGNhMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYmUyYTE3Mzk3NmNhMTEnLAogICAgICAgICAgICAyMDQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyNTA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyNTI6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyODA6ICcweEY5Y2RhNjI0RkJDN2UwNTkzNTVjZTk4YTMxNjkzZDI5OUZBQ2Q5NjMnLAogICAgICAgICAgICAyODg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzMDA6ICcweEY5Y2RhNjI0RkJDN2UwNTkzNTVjZTk4YTMxNjkzZDI5OUZBQ2Q5NjMnLAogICAgICAgICAgICAzMTE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzMTQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzMjE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzMjQ6ICcweEY5Y2RhNjI0RkJDN2UwNTkzNTVjZTk4YTMxNjkzZDI5OUZBQ2Q5NjMnLAogICAgICAgICAgICAzMzU6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzMzg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzNjk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MjA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MjQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1NzA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1OTI6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1OTk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA3MTA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA4MTM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA4MjA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA5NDM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA5OTk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMDg4OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTEwMTogJzB4Y2ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiZTJhMTczOTc2Y2ExMScsCiAgICAgICAgICAgIDExMTU6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMTE2OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTEzMDogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDExMzE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMjM0OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTI4NDogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDEyODU6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMjg3OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTQ0MjogJzB4Y2ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiZTJhMTczOTc2Y2ExMScsCiAgICAgICAgICAgIDE5OTI6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyZTM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyMDAxOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMjAyMTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDIyMjI6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyMzU4OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMjUyMjogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDM1MDE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzNTAyOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMzczNzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDM3NzY6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzOTM5OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNDAwMjogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDQyMDE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0Njg5OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNDc1OTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDVlMzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDUwMDE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1MTAxOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNTU1NTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDU2MTE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1NzAwOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgN2UzOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNzAwMTogJzB4Y2ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiZTJhMTczOTc2Y2ExMScsCiAgICAgICAgICAgIDc1MTg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA3NzAwOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNzcwMTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDc5Nzk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA4MDgyOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgODQ1MzogJzB4Y2ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiZTJhMTczOTc2Y2ExMScsCiAgICAgICAgICAgIDllMzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDkwMDE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA5MzkzOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTAyMDA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMDI0MzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDExMTE5OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTMzNzE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMzQ3MzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDE1NTU3OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTdlMzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDE3Nzc3OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMjMyOTQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzMjUyMDogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDMyNjU5OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMzQ0NDM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAzNTQ0MTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDM1NDQyOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMzU0NDM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MjE2MTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDQyMTcwOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNDIyMjA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MjI2MjogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDQyNzY2OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNDMxMTM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MzExNDogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDQ0Nzg3OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNDY2ODg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1MzkzNTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDU3ZTM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1ODAwODogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDU5MTQwOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNTkxNDQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA2NDI0MDogJzB4Y2ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiZTJhMTczOTc2Y2ExMScsCiAgICAgICAgICAgIDcxNDAxOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgODAwMDE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA4MDA4NTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDgxNDU3OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgODQ1MzE6ICcweGNhMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYmUyYTE3Mzk3NmNhMTEnLAogICAgICAgICAgICA4NDUzMjogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDg4ODg4OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgOTQxNjg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMjgxMjM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxNjcwMDc6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxNjcwMDg6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MjE2MTE6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MjE2MTM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA0MjE2MTQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1MzQzNTE6ICcweGNhMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYmUyYTE3Mzk3NmNhMTEnLAogICAgICAgICAgICA1MzQzNTI6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA1MzQzNTM6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA2NjAyNzk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMjYxMTIwOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNzc3Nzc3NzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDExMTU1MTExOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTExNTU0MjA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMjIyNzMzMDogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDIzMDExOTEzOiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMzcwODQ2MjQ6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICA2ODg0MDE0MjogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDE2ODU4Nzc3MzogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDI0NTAyMjkyNjogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDI0NTAyMjkzNDogJzB4Y2ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiZTJhMTczOTc2Y2ExMScsCiAgICAgICAgICAgIDk3NDM5OTEzMTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDk5OTk5OTk5OTogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDEwMjAzNTIyMjA6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxMzEzMTYxNTU0OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTM1MDIxNjIzNDogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDE0NDQ2NzM0MTk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAxNDgyNjAxNjQ5OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgMTU2NDgzMDgxODogJzB4Y0ExMWJkZTA1OTc3YjM2MzExNjcwMjg4NjJiRTJhMTczOTc2Q0ExMScsCiAgICAgICAgICAgIDE2NjY2ZTU6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnLAogICAgICAgICAgICAyMDQ2Mzk5MTI2OiAnMHhjQTExYmRlMDU5NzdiMzYzMTE2NzAyODg2MmJFMmExNzM5NzZDQTExJywKICAgICAgICAgICAgNDcyNzkzMjQ0Nzk6ICcweGNBMTFiZGUwNTk3N2IzNjMxMTY3MDI4ODYyYkUyYTE3Mzk3NkNBMTEnCiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgMjgwODogZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgIHMgPQogICAgICAgICAgICAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IChyIHx8IChyID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChzLCBvKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjKG4ubmV4dChlKSk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBvKGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjKG4udGhyb3coZSkpOwogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgbyhlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICBlLmRvbmUKICAgICAgICAgICAgICAgICAgICA_IHMoZS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICA6ICgodCA9IGUudmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgdCBpbnN0YW5jZW9mIHIKICAgICAgICAgICAgICAgICAgICAgICAgPyB0CiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IHIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLnRoZW4oaSwgYSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjKChuID0gbi5hcHBseShlLCB0IHx8IFtdKSkubmV4dCgpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgIG8gPQogICAgICAgICAgICAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgIHZhciByLAogICAgICAgICAgICAgICAgbiwKICAgICAgICAgICAgICAgIHMsCiAgICAgICAgICAgICAgICBvLAogICAgICAgICAgICAgICAgaSA9IHsKICAgICAgICAgICAgICAgICAgbGFiZWw6IDAsCiAgICAgICAgICAgICAgICAgIHNlbnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoMSAmIHNbMF0pIHRocm93IHNbMV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNbMV07CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHRyeXM6IFtdLAogICAgICAgICAgICAgICAgICBvcHM6IFtdCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAobyA9IHsgbmV4dDogYSgwKSwgdGhyb3c6IGEoMSksIHJldHVybjogYSgyKSB9KSwKICAgICAgICAgICAgICAgICdmdW5jdGlvbicgPT0gdHlwZW9mIFN5bWJvbCAmJgogICAgICAgICAgICAgICAgICAob1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG8KICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGZ1bmN0aW9uIGEoYSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocikgdGhyb3cgbmV3IFR5cGVFcnJvcignR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLicpOwogICAgICAgICAgICAgICAgICAgIGZvciAoOyBvICYmICgobyA9IDApLCBhWzBdICYmIChpID0gMCkpLCBpOyApCiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgKChyID0gMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSAyICYgYVswXSA_IG4ucmV0dXJuIDogYVswXSA_IG4udGhyb3cgfHwgKChzID0gbi5yZXR1cm4pICYmIHMuY2FsbChuKSwgMCkgOiBuLm5leHQpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKHMgPSBzLmNhbGwobiwgYVsxXSkpLmRvbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gczsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgoKG4gPSAwKSwgcyAmJiAoYSA9IFsyICYgYVswXSwgcy52YWx1ZV0pLCBhWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmxhYmVsKyssIHsgdmFsdWU6IGFbMV0sIGRvbmU6ICExIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sYWJlbCsrLCAobiA9IGFbMV0pLCAoYSA9IFswXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9IGkub3BzLnBvcCgpKSwgaS50cnlzLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKChzID0gKHMgPSBpLnRyeXMpLmxlbmd0aCA-IDAgJiYgc1tzLmxlbmd0aCAtIDFdKSB8fCAoNiAhPT0gYVswXSAmJiAyICE9PSBhWzBdKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgPT09IGFbMF0gJiYgKCFzIHx8IChhWzFdID4gc1swXSAmJiBhWzFdIDwgc1szXSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGFiZWwgPSBhWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg2ID09PSBhWzBdICYmIGkubGFiZWwgPCBzWzFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLmxhYmVsID0gc1sxXSksIChzID0gYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgJiYgaS5sYWJlbCA8IHNbMl0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkubGFiZWwgPSBzWzJdKSwgaS5vcHMucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzWzJdICYmIGkub3BzLnBvcCgpLCBpLnRyeXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBhID0gdC5jYWxsKGUsIGkpOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAoYSA9IFs2LCBlXSksIChuID0gMCk7CiAgICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICByID0gcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKDUgJiBhWzBdKSB0aHJvdyBhWzFdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBhWzBdID8gYVsxXSA6IHZvaWQgMCwgZG9uZTogITAgfTsKICAgICAgICAgICAgICAgICAgfSkoW2EsIGNdKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgaSA9CiAgICAgICAgICAgICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgICBpZiAociB8fCAyID09PSBhcmd1bWVudHMubGVuZ3RoKQogICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgcyA9IDAsIG8gPSB0Lmxlbmd0aDsgcyA8IG87IHMrKykKICAgICAgICAgICAgICAgICAgKCFuICYmIHMgaW4gdCkgfHwgKG4gfHwgKG4gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LCAwLCBzKSksIChuW3NdID0gdFtzXSkpOwogICAgICAgICAgICAgIHJldHVybiBlLmNvbmNhdChuIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKTsKICAgICAgICAgICAgfSwKICAgICAgICAgIGEgPQogICAgICAgICAgICAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogeyBkZWZhdWx0OiBlIH07CiAgICAgICAgICAgIH07CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSk7CiAgICAgICAgdmFyIGMgPSByKDM3MiksCiAgICAgICAgICB1ID0gYShyKDEwNzYpKSwKICAgICAgICAgIGwgPSByKDI3NDApOwogICAgICAgIG51bGwgPT09IChuID0gdS5kZWZhdWx0LnBhcmVudFBvcnQpIHx8CiAgICAgICAgICB2b2lkIDAgPT09IG4gfHwKICAgICAgICAgIG4ub24oJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHZhciB0ID0gZS5lbmRwb2ludFBhcmFtZXRlcnM7CiAgICAgICAgICAgICAgIShmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgcyh2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciByLCBuLCBzLCBhLCBkLCBmLCBoLCBnLCBwLCBtLCBiLCB5LCBBLCB2LCBFLCB3LCBULCBQOwogICAgICAgICAgICAgICAgICByZXR1cm4gbyh0aGlzLCBmdW5jdGlvbiAobykgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoby5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gbmV3IGMuQWJpQ29kZXIoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBKU09OLnBhcnNlKGUucmV0dXJuVHlwZXMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAocyA9IEpTT04ucGFyc2UoZS5yZXR1cm5Gb3JtYXQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9IGUuY2hhaW5JZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGQgPSBsLm11bHRpY2FsbDNEZXBsb3ltZW50c1thXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGYgPSBuZXcgYy5JbnRlcmZhY2UoWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Z1bmN0aW9uIGFnZ3JlZ2F0ZSh0dXBsZShhZGRyZXNzIHRhcmdldCwgYnl0ZXMgY2FsbERhdGEpW10gY2FsbHMpIHBheWFibGUgcmV0dXJucyAodWludDI1NiBibG9ja051bWJlciwgYnl0ZXNbXSByZXR1cm5EYXRhKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24gZ2V0Q2hhaW5JZCgpIHZpZXcgcmV0dXJucyAodWludDI1NiBjaGFpbmlkKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnVuY3Rpb24gZ2V0Q3VycmVudEJsb2NrVGltZXN0YW1wKCkgdmlldyByZXR1cm5zICh1aW50MjU2IHRpbWVzdGFtcCknCiAgICAgICAgICAgICAgICAgICAgICAgICAgXSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICgoaCA9IG5ldyBjLkZldGNoUmVxdWVzdCh0KSkudGltZW91dCA9IDFlNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGcgPSBuZXcgYy5Kc29uUnBjUHJvdmlkZXIoaCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChwID0gbmV3IGMuQ29udHJhY3QobC5tdWx0aWNhbGwzRGVwbG95bWVudHNbYV0sIGYsIGcpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAobSA9IHAuaW50ZXJmYWNlLmRlY29kZUZ1bmN0aW9uRGF0YSgnYWdncmVnYXRlJywgZS5tdWx0aWNhbGxEYXRhKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKGIgPSBpKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1bMF0ubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtlWzBdLCBlWzFdXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZCwgcC5pbnRlcmZhY2UuZW5jb2RlRnVuY3Rpb25EYXRhKCdnZXRDdXJyZW50QmxvY2tUaW1lc3RhbXAoKScsIFtdKV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkLCBwLmludGVyZmFjZS5lbmNvZGVGdW5jdGlvbkRhdGEoJ2dldENoYWluSWQnLCBbXSldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgITEKICAgICAgICAgICAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBbNCwgcC5hZ2dyZWdhdGUuc3RhdGljQ2FsbChiKV0KICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICgoeSA9IG8uc2VudCgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAoQSA9IHlbMV0ubWFwKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA9PT0geVsxXS5sZW5ndGggLSAyIHx8IHQgPT09IHlbMV0ubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA_IHIuZGVjb2RlKFsndWludDI1NiddLCBlKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogci5kZWNvZGUoblt0XSwgZSkubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAodiA9IHBhcnNlSW50KEFbQS5sZW5ndGggLSAyXSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgIChFID0gcGFyc2VJbnQoQVtBLmxlbmd0aCAtIDFdKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKHcgPSBBLnNsaWNlKDAsIEEubGVuZ3RoIC0gMikpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGEpICE9PSBFKQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGFpbiBJRCBtaXNtYXRjaCcpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKSAtIHYgPiAzMDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaW1lc3RhbXAgaXMgdG9vIGZhciBmcm9tIHRoZSBjdXJyZW50IHRpbWUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAoVCA9IHcubWFwKGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHNbdF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGUpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmV0dXJuIGZvcm1hdCBmb3IgaW5kZXggJy5jb25jYXQodCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgIT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmV0dXJuIGZvcm1hdCBmb3IgaW5kZXggJy5jb25jYXQodCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZVsxXSAqIE1hdGgucG93KDEwLCAxOCkpIC8gZVsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmV0dXJuIGZvcm1hdCBmb3IgaW5kZXggJy5jb25jYXQodCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSAoUCA9IHUuZGVmYXVsdC5wYXJlbnRQb3J0KSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBQIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLnBvc3RNZXNzYWdlKHsgcmVzcG9uc2U6IHsgY2FsbHM6IFQsIHRpbWVzdGFtcDogdiB9IH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgIFsyXQogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSh0LCBlW3QuY2hhaW5JZF0pOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgIShmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICBudWxsID09PSAodCA9IHUuZGVmYXVsdC5wYXJlbnRQb3J0KSB8fCB2b2lkIDAgPT09IHQgfHwgdC5wb3N0TWVzc2FnZSh7IGVycm9yOiBlIH0pLCBwcm9jZXNzLmV4aXQoMSk7CiAgICAgICAgICAgICAgfSkoZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3IuJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA3OTY4OiAoZSkgPT4gewogICAgICAgIGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2NyeXB0bycpOwogICAgICB9LAogICAgICA0Njc6IChlKSA9PiB7CiAgICAgICAgZS5leHBvcnRzID0gcmVxdWlyZSgnZXZlbnRzJyk7CiAgICAgIH0sCiAgICAgIDYxMzY6IChlKSA9PiB7CiAgICAgICAgZS5leHBvcnRzID0gcmVxdWlyZSgnaHR0cCcpOwogICAgICB9LAogICAgICAxMjU2OiAoZSkgPT4gewogICAgICAgIGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2h0dHBzJyk7CiAgICAgIH0sCiAgICAgIDUyNTY6IChlKSA9PiB7CiAgICAgICAgZS5leHBvcnRzID0gcmVxdWlyZSgnbmV0Jyk7CiAgICAgIH0sCiAgICAgIDEwNjA6IChlKSA9PiB7CiAgICAgICAgZS5leHBvcnRzID0gcmVxdWlyZSgnbm9kZTpjcnlwdG8nKTsKICAgICAgfSwKICAgICAgMTA3NjogKGUpID0-IHsKICAgICAgICBlLmV4cG9ydHMgPSByZXF1aXJlKCdub2RlOndvcmtlcl90aHJlYWRzJyk7CiAgICAgIH0sCiAgICAgIDgzNzg6IChlKSA9PiB7CiAgICAgICAgZS5leHBvcnRzID0gcmVxdWlyZSgnc3RyZWFtJyk7CiAgICAgIH0sCiAgICAgIDE5MjogKGUpID0-IHsKICAgICAgICBlLmV4cG9ydHMgPSByZXF1aXJlKCd0bHMnKTsKICAgICAgfSwKICAgICAgODcxNjogKGUpID0-IHsKICAgICAgICBlLmV4cG9ydHMgPSByZXF1aXJlKCd1cmwnKTsKICAgICAgfSwKICAgICAgNTkyOiAoZSkgPT4gewogICAgICAgIGUuZXhwb3J0cyA9IHJlcXVpcmUoJ3psaWInKTsKICAgICAgfSwKICAgICAgNTQyNDogKGUpID0-IHsKICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgPT0gdHlwZW9mIGJ1ZmZlcnV0aWwpIHsKICAgICAgICAgIHZhciB0ID0gbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJ2J1ZmZlcnV0aWwnIik7CiAgICAgICAgICB0aHJvdyAoKHQuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJyksIHQpOwogICAgICAgIH0KICAgICAgICBlLmV4cG9ydHMgPSBidWZmZXJ1dGlsOwogICAgICB9LAogICAgICA4Mjc0OiAoZSkgPT4gewogICAgICAgIGlmICh0eXBlb2YgdXRmIC0gOCAtIHZhbGlkYXRlID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgdmFyIHQgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAndXRmLTgtdmFsaWRhdGUnIik7CiAgICAgICAgICB0aHJvdyAoKHQuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJyksIHQpOwogICAgICAgIH0KICAgICAgICBlLmV4cG9ydHMgPSB1dGYgLSA4IC0gdmFsaWRhdGU7CiAgICAgIH0sCiAgICAgIDQ3NTY6IChlLCB0KSA9PiB7CiAgICAgICAgdmFyIHIgPQogICAgICAgICAgJ0FFRVVkd21nRFM4QnhRS0tBUDRCT2dEakFUQUFuZ0RVQUlNQW9BQm9BT0FBYWdDT0FFUUFoQUJNQUhJQU93QTlBQ3NBTmdBbUFHSUFIZ0F1QUNnQUp3QVhBQzBBR2dBakFCOEFMd0FVQUNrQUVnQWVBQWtBR3dBUkFCa0FGZ0E1QUNnQUxRQXJBRGNBRlFBcEFCQUFIZ0FpQUJBQUdnQWVBQk1BR0FVaEJlOEJGeFJFTjhzRjJ3QzVBSzVIQVc4QXJRa0R6UUN1aHpjM056Y0JQNjhORWZNQUJRZEhCdXc1QlY4RllBQTlNemtJOXI0WkJnN1F5UUFXQTlDZU93TE5DamNDanFrQ2h1QS9sbStSQXNYVEFvUDZBU2ZuRVFEeXRRRkpBaldWQ2tlWEFPc0E2Z29kQUIvY3dkQVVFMFdsQkNOL0FRVUNRUmpGRC9NUkJqSHhEUVNKYncwakJ6VUFzd0J4bWUrdG5JY0FZd2FiQXlzRzhRQWpBRU1NbXhjRHFnUEtReURYQ01NeEE3a1VRd0QzTlhPckFLbUZJQUFmQkMwRDN4NEJKUURCR2RVRkFoRWdWRDhKbndtUUppTldZVXpyZzBvQUd3QVVBQjBBRm5OY0FDa0FGZ0JQOWgzZ1Bmc0RPV0RLbmVZMkNoZ2xYMVVEWUQzMEFCc0FGQUFkQUJaeklHUkFud0REOHdBakFFRU16UmJEcWdNQjJzQUZZd1hxQXRDbkFzUzRBd3BVSktSdEZIc2FkVXo5QU1NVmJ3THBBQk0xTkpFWDBaa0NnWU1CRXlNQXhSVnZBdWtBRXpVQlVGQXRtVXdTQXk0REJURVIzM0VmdFFIZlN3QjVNeEovQWprV0tRTHpMOEUvY3dCQjZRSDlMUURQRHRPOUFTTnJpUUM1RFFBTkF3Q0syMUVGSTkxekh3Q29MOWtCcVFjSEJ3Y0hLelVEb3dCdkFRb2hQdlUzZkFRZ0h3Q3lBYzhDS1FNQTV6TVNlenI3VUxnRm1EcC9MelZRQmdFR0FpOEZZUVZndDhBRmNUdGxRaHBDV0VtZmU1dG1aNklBRXhzRHpROHQrWDhyQkt0VEFsdGJBbjBqc3k4Qmw2dXRQV01EVFI4RWkya1JBTmtEQnJOSE55c0RCekVDUVdVQWN3RnBKM2tBaXlVaEFKMEJVYjhBTDNFZkFiZk5BejgxS1VzRld3RjNZUVp0QW0wQStWRWZBekVKRFFCUlNRQ3pBUUJsQUhzQU03MEdEL3YzSVpXSEJ3QVJLUUF4QUxzalR3SFpBZU1QRXptWGdJSHdBQklBR1FBOEFFVUFRRHQzZ2R2SUVHY1FaQWtHVFJGTWRFSVZFd0swRDY0TDdSRWRETmtxMDlQZ0FEU3hCL01EV3dmekExc0RXd2Z6Qi9NRFd3ZnpBMXNEV3dOYkExc2NFdkFpMjhnUVp3OVFCSFVGbGdXVEJONElpeVpSRVlrSE1BamFWQlYwSmh4UEEwMEJCQ010U1NRN216TVRKVXBNRkUwTENBUTJTbXl2ZlVBRFR6R3pWUDJRcWdQVE1sYzVkQWtHSG5rU3FBQXlEM3NrTmIxT2hucFBjYWdLVTArMnRZZEphazV2QXNZNnNFQUFDaWtKbTIvRGQxWUdSUkFmSjZrUSt3dzNBYmtCUHczeFM5d0U5UVkvQk0wZmdSa2REOUdWb0FpcExlRU04U2JuTHFXQVhpUDVLb2NGOFV2NFBPRUxVVkZzRDEwTGFRbm5PbWVCVWdNbEFSRWlqd3JoRFQwSWNSRDNDczF2RGVrUlNRYzlBOWxKbmdDcEJ3VUxGUjA1RmJrbUZHS3dDdzA1ZXdiL0d2b0xreWF6RXkxN0FBWFhHaVVHVVFFdEd3TUEweTdyaGJSYU5Wd2dUMk1HQndzcEk4c1VyRkFrRFNsQXUzaE1HaDhIR1NXdEFwVkRkRXFMVVRvZWx5SDZQRUVOYWk0WFVZQUgrVHdKR1ZNTGhUeWlScTlGRWhIV1BwRTlUQ0pOVERBRU9ZTXNNeWVQQ2RNUGlReTlmSFlCWFFrbENiVU1kUk0xRVJzM3lRZzlCeDB4bHlnbkdRZ2xScGxnbmdUN293UDNFOVVERHdWRENVVUhGd081SERFVE1oVXRCUkdCS05zQzl6YlpMcmNDazFhRUFSc0Z6dzhwSCtNUVZFZmtEdTBJbndKcEE0Y2w3d0F4RlNVQUd5S2ZDRWRuQUdPUDNGTUpMczhJeTJwd0kzZ0RheFRyWlJGM0I1VU9Xd2VySERjVnd4emxjTXhlRDRZTUtLZXpDVjhCZVFtZEFXTUU1d2dOTlYrTXBDQkZaMWVMWEJpZklHVkJRMTRBQWpVTWFSV2pSTUdIZkFLUEQyOFNId0U1QVhjSFBRMEZBbnNSOFJGdkVKa0k3NFlJTmJrei9Eb3BCRk1oaHlBVkNpc0RVMnpTQ3lzbS9RejhiUUduRW1ZREVEUkJkL0pucjJDNktCZ0JCeDB5eVVGa0lmVUxsay9SREtBYXhSaEdWRElaNkFmREEvY2E5eWZ1UVZzR0F3T25CeGM2VVRQeUJNRUxiUWlQQ1VNQVRRNm5Hd2ZiR0c0S2RZelVBVFdQQWJ1ZEExdVZod0p6a3dZN0J3OEFhdytMQlgzcEFDRUNxd2luQUFrQTB3TmJBRDBDc1FlaEFCMEFpVVVCUVFNck13RWw2UUtUQTVjSU5jOEJtVE1COXkwRUg4Y01HUUQ3TzI1T0FzTzFBb0J1WnFZRjRWd0NrZ0pOT1FGUktRUUpVa3RWQTdOMTVRRGZBRThHRitOTEFSbXZUczhlNTBjQjQzTXZBTXNBL3dBSk9RY0pSUUhSQWZkeEFMc0JZd3MxQ2FhM3VRRlI3UzBBaHdBWmJ3SGJBbzBBNFFBNUFJUDFBVmNBVVFWZC9RWFhBbE5OQVJVMUhDOWJaUUcvQXlNQk53RVJBSDBHejVHcHpRc2pCSEVIMXdJUUh4WGxBdTh5QjdrRkF5TGpFOUZDeVFLOTRsa0FNaG9LUEFxckNxcGdYMlEzQ2pWMlBWUUFFaCtzUHNzL1VnVlZPMWM3WER0WE8xdzdWenRjTzFjN1hEdFhPMXdEbThQbXcrWUtjRjlKWWU4TXFnM1lSTXc2VFJQZllGVmdOaFBNTGJzVXhSWFNKVm9aUVJyQUp3a2w2RlVORHdndDEyWTBDREEwZVJmQUFFTXBiSU5GWTRvZU5BcFBIT3RUbFZUOExSOEF0VXVtTTdNTnNCc1pSRVFGUzNYeFlpNFdFZ29tQW1TRkFtSkdYMUd6QVY4M0pBS2grd0pvbkFKbURRS2ZpRGdmRHdKbVB3Sm1LZ1J5QklNRGZ4Y0RmcFk1Q2psN0d6bUdPaWNuQW13aEFqSTZPQTRDYmNzQ2JiTHpqZ00zYTBrdkFXc0E0Z0RsQUU0SkI1d01rUUVDRDhZQUVia0Nkek1DZHFaREFubFBSd0o0dmlGZzMwV3lSdmNDZkVNQ2Vzd0NmUTBDZlBSSUJFaUJaeWdBTHhsSlhFcGZHUnRLMEFMUkJRTFEwRXNyQTRoVEE0ZnFSTW1STmdMeXBWMEhBd095UzlKTU1Ta0gwMDFRVGJNQ2kwTUNpdHpGSHdzaFIyc0p1d0tPT3dLT1lFU2JoUUtPM1FLT1lIeFJ1Rk01QVE1UzJGU0pBcFAvQXBNUUFPMEFJRlVpVmJOVjFBb3NIeW1aaWpMbGVHcEZQejBDbDZNQzc3WllKYXdBWFNrQ2xwTUNsb0NnQUsxWnNGb05oVkVBUHdLV3VRS1dVbHhJWE5VQ21jOENtV2hjemwwTEhRS2Nuem5HT3FFQ25Cb0NuNThDbnJ5T0FDRVROUzRUQXAzMUFwNldBTGxCWVRoaDh3S2Uxd0tnY2dHdEFwNmpJd0tlVXFsanpHUXJLUzhDSjdNQ0pvSUNvUDhDb0ZEYkFxWXpBcVhTQXFnREFJRUNwL1pvZ0dpMUFBZE5haUJxMVFLczV3S3NzZ0t0YXdLdEJnSlhJUUpWNEFLeDVkc0RIMUpzbXdLeXdSRUNzdXdiYk9SdFoyMU1Zd01sMFFLMllEOURicFFES1VrQ3VHSUN1VXNaQXJrdWUzQTZjT1VDdlIwRExiWURNaFVDdm94eUJnTXpkUUsrSG5NbWMxTUN3ODhDd3doemhuUlBPVWwwNUFNOHF3RURQSjREUGNNQ3hZQUN4a3NDeGhTTkFzaHRWUUxJU0FMSlV3TEpNZ0prb1FMZDFuaDlaWGl5ZVNsTDFBTVlwMmNHQW1INEdmZVZLSHNQWHBaZXZ4VUN6MjhDejNBelQxZlc5eGVqQU1xeEFzOTNBUzN1QTA0V2ZrOEpBdHdyQXR1T0F0SlRBMUpnQTFOakFRVURWWkNBalVNRXp4cnhaRWw1QTRMU2c1RUMyc3NDMmVLRUZJUk5wMEFEaHFrQU13TmtFb1oxWGYwQVdRTGZhUUxldkhkN0F1SXo3UmdCOHpRckFmU2ZBZkxXaXdMcjl3THBkSDBEQXVyOUF1cm9BUDFMQWIwQzdvMEM2NkNXcnBjSEF1NURBNFhrbUgxdzVIR2xBdk1IQUcwRGpocVpsd0wzRndPUmNnT1Npd0wzbkFMNTNRTDRhcG9nbXErL081c2lBNTJIQXY3K0FSOEFQWjhnQVorM0F3V1JBNlp1QTZiZEFOWEpBd1p1b1l5aUNRMERERTBCRXdFakIzRUdaYjFyQ1FDL0JHL0RGWThldHhFQUczazlBQ2NETnhKUkE0MkRBV2NySlFDTTh3QWxBT2FuQzZPVkNMc0dJNmZKQmdDdkJSbkRCdkVsUlVZRkZvQUZjRDlHU0ROQ0tVSzhYM2taWDhRQWxzMEZPZ0NRVkNHYndUc3VZRG9adXRjT054ak9HSkhKL2dWZkJXQUZYd1ZnQldzRllBVmZCV0FGWHdWZ0JWOEZZQVZmQldCT0hRamZqVzhLQ2dvS2JGN3hNd1RSQTdrR044UERBTU1FcjhNQTcwZ3hGcm9GVGo1eFBuaENSMEsrWDMwL1gvQUFXQmt6c3dDTkJzeHp6QVNtNzBhQ1JTNHJERE1lTHo0OWZuWGZjc0g1R2Nvc2NRRnoxM1k0SHdWbkJYTEp5Y25BQ05kUll3Z0lDQXFFWG9XVHhnQTdQNGtBQ3hiWkJ1MjFLdzBBak1zVEF3a1ZBT1Z0SlVVc0oxSkN1VUxFU1VBclh5OWdQaTlBS3duSlJRWUtURDlMUG9BK2lUNTRQbmtDa1VMRVVVcERYOU5XVjNKVkVqUUFjMXczQTNJQkUzWW5YK2c3UWlNSmI2TUthaXN6UkNVdVFyTkN4RFBNQ2N3RVg5RVdKellSRUJFRUJ3SUhLbjZsMzNKQ05WSWZ5YlBKdEFsdHlkUFVDbWhCWncvdEVLc1pBSk9WSlUxQ0xSdXhiVUhPUUFvN1AwcytlRUpISEE4U0pWUlBkR00wTlZycHZCb0toZlVsTTBKSEhHVVFVaEVXTzF4TFNqOE1PMHVjTkFxSkl6VkNSeHY5RUZzcUt5QTRPUWdOajJud1pncDVaTkZnRTJBMUszWUhTMkFoUVFvakptQzdEZ3B6R0cxV1lGVVpDUVlIWk85Z0hXQ2RZSVZndTJCVFlKbHdGaDhHdlJiY1hiRzhZZ3RESHJNQnd6UFZ5UW9uSFFna0N5WUJnUUowQWpjNG5WcUlBd0dTQ3NCUElnRHNLM1NXRXRJVkJhNU44Z0dqQW8ra1Z3Vklad0QvQUVVU0NEd2VYNElUclJRc0o4SzNUd0JYRkR3RUFCMFR2elZjQXRvVFMyMFJJd0RnVmdaOUJCSW1ZZ0E1QUw0Q29pOExGbmV6T2tDbklRRmpBWTRLQkFQaDlSY0dzZ1pTQnNFQUpjdGRzV0lSdTJrVGtRc3RSdzdEQWNNQktncFBCR0lHTURBd0tDWW5LVFFhTGc0QUtSU1ZBRndDZGwrWVVaMEpkaWNGRDNsUEFkdDFGOVpaS0NHeHVFM3lCeGtGVkdjQS93QkZFZ2lDQndBT0xIUVNqeE90UURnMXo3ZGVGUk1BWjhRVEFHdEtiMUFwSWlQSEFEa0F2Z0tpTHkxREZ0WUNtQmlEQWxERFdOQjBlbzdmcGFNTy9hRVZSUnYwQVRFUVpCSU9EeU1FQWM4SlFoQ2JEUmd6RkQ0VEFFTUF1OVlCQ2dDc0FPa0FtNUkzQUJ3QVl4dk9OblIrTWhYSkF4Z0tReXhMMitra0poTWJoUUtEQk1rU3N2RjBBRDlCTlE2dVFDN1dxU1FId3hFQUVFSXUxaGtoQUgyejRpUVB3eUpQSE5XcGR5WUJSU3BuSkFMem9CQUVWUFBzSDIwTXhBMENDRVFLUmdBRnlBdEZBbE1Od3dqRURVUUpSQXJFTHRhcE1nN0REWmdKSXcrVEd1a0VJd3ZERmtNQXFBdERFTU1NQmhpb2UrUUFPM01NUkFBQ3JnbkVCU1BZOVEwRkRuYlNCb01BQjhNU1l4a1N4QUVKQVBJSkFBQjhGV01PRnRNYy9IY1h3eGhEQUM3REF2T293d0Fld3dKZEtES0hBQUhEQUFMckZVUVZ3d0Fid3l2enBXTVd2OHdBL0FCcEF5KytiY1lEVUtQRDBLaERDd0ttSjFNQUFtTUE1K1Vad3hBYWd3aXBCUkwvZUFEZnc2ZkRHT01DR3NPamszbDZCd09wbzRzQUVzTU9HeE1BQTVzQWJjTU9BQXZEcDBNSkdrTUR3Z2lwbk5JUEF3ZklxVU1HQU9HREFBUHpBQlhEQUFjREFBbkRBR21UQUJyREFBN0RDaGpEam5FV0F3QUJZd0FPY3dBdVV5WUFCc01BRjhNSUtRQU5VZ0M2d3k0QUE4TUFEcU1xOHdDeVlnQWNJd0FCOHdxcEFBWE9DeDBWNHdBSG93QkN3d0VLQUduREFBdURBQjNEQUFqRENha0FCZElBYnFjWjNRQ1pDQ2tBQmRJQUFBRkRBQWZqQUIyakNDa0FCcUlBQ1lNQUd6TUFiU01BNXNPSUFBaGpBQWhEQUJUREJBa3BBQWJTQU9PVEFBbERDNmtPelB0bkFBZERBRzZrUUZBQVR3QUt3d3dBQTBNQUNiVURQd0FISXdBWmd3QUNFNmNEQUFvakFBcERBQW9EcC9NR3d3QUpJd0FERXdBUVF3Z0FGRU1BRVhNQUQ1TUFEZk1BRGNNQUdSTU9GaU1BRlVNQWJxTVd1d0hEQU1JQUUwTUxBR2t6RWdEaFV3QUNRd0FFV2dBWGd3VWpBQWJZQUJqREJTWUJnekJhQUVGTkFMY1FCeFVNZWdBd01uZ0JyQTBJWmdKMEt4UUhCUkVQZDFOMFp6S1JKd2FJSEFacU5UNERxUXE4QnduZ0FCNERBd3QyQVg1NlQxb2NLUU5YQWgxR0FUUUdDM3RPeFlOYWdrZ0FNUUE1Q1FBREFRRUFXeExqQUlPWU5BRXpBSDd0RlJrNlRnbFNBRjhOQUFsWUFRK1MxQUNBUXdRb3JRQmlBTjRkQUoxd1B5ZVRBTlZ6dVFEWDNBSWVFTXA5ZXlNZ1hpVUFFZGtCa0ppektsdGJWVkFhUk1xUkFBRUFoeVEvU0RFejZCbWZWd0I2QVRFc09DbEtJUmNET0YwRS84MzJBRk50NUFCeUFua0NSeEdDT3M5NE5qWGRBd0lOR0JvbkRCd1BBTFcyQXdJQ0FnQUFBQUFBQUFZREJRTURBUnJVQXdBdEFBQUFBZ0VHQmdZR0JnWUZCUVVGQlFVRUJRWUhDQWtFQlFVRkJRUUFBQUlDQUFBQUlnQ05BSkFBbFQwQTZnQzdBTndBcEVRQXdnQ3lBSzBBcUFEdUFLWUEyZ0NqQU9jQkNBRURBTWNBZ1FCaUFOSUExQUVEQU40QThnQ1FBS2tCTVFEcUFOOEEzQXNCQ1E4eU85cmEydHE4eHVMVDF0UkpPQjBCVWdGY05VMEJXZ0ZwQVdnQld3Rk1VVWxMYmhNQlV4c05FQXM2UGhNT0FDY1VLeTB2TWo1QVFFTkRRMFJGRkVZR0pGZFhWMWRaV1ZoWkwxcGJYVnhjSTJObloyWm9aeXBzYm5aMWVIaDRlSGg0ZW5wNmVucDZlbnA2ZW5wOGZIMThlMklBUlBJQVNRQ2FBSGdBTWdCbStBQ09BRmNBVndBM0FuYnZBSXNBQmZqNEFHUUFrL0lBbndCUEFHSUFaUC8vc0FDRkFJVUFhUUJXQUxFQUpBQzJBSU1DUUFKREFQd0E1d0QrQVA0QTZBRC9BT2tBNlFEb0FPWUFMd0o3QVZFQlFBRStBVlFCUGdFK0FUNEJPUUU0QVRnQk9BRWNBVmdYQURFUUNBRUFVeDhTSGdzZEhoWUFqZ0NXQUtZQVVRQnFJQUl4QUhZQWJ3Q1hBeFVESnpJRElVbEdUekVBa1FKUEFNY0NWd0trQU1BQ2xnS1dBcFlDbGdLV0FwWUNpd0tXQXBZQ2xnS1dBcFlDbGdLVkFwVUNtQUtnQXBjQ2xnS1dBcFFDbEFLVUFwUUNrZ0tWQW5VQjFBS1hBcDhDbGdLV0FwVWVBSUVUQlFEK0RRT2ZBbUVDT2g4QlZCZzlBdUlaRWpNYkFVNC9HMVdaQVh1c1JBRnBZUUVGQTBGUEFRWUFtVEVlSUpkeUFERm9BSEVBTmdDUkE1ek1rL0MyakdJTndqTVd5Z0laQ2FYZGZESUxCQ3M1ZEFFN1luUUJ1Z0RsaG9pSGhvaUdpWXFLaG91T2pJYU5rSTZJajRxUWlwR0drb2FUaHBTU2xZYVdocGVLbUlhWmhwcUdtNGFjaTUyUW5vcWZodUlDNFhUcEF0OTBBSXAwTEhTb0FJc0FkSFFFUXdSQUJFSUVSUVJEQkVrRVJnUkJCRWNFU1FSSUJFUUVSZ1JKQUo1dWRBQ3JBNDkwQUx4dUFRMTBBTkZaZEhRQTEzUUNGSFFBL21KMEFQNEJJUUQrQVB3QS9BRDlBUHdEaEdaMDNBU01LMjNIQVA0QS9BRDhBUDBBL0NSMGRBQ1JZblFBL2dDUkFTRUEvZ0NSQXZRQS9nQ1JBNFJtZE53RWpDdHR4eVIwQVA5aWRBRWhBUDRBL2dEOEFQd0EvUUQ4QVA4QS9BRDhBUDBBL0FPRVpuVGNCSXdyYmNja2RIUUFrV0owQVNFQS9nQ1JBUDRBa1FMMEFQNEFrUU9FWm5UY0JJd3JiY2NrZEFKTEFUNTBBbElCUVhRQ1U4bDBkQUpmZEhRRHBnTDBBNllEcGdPbkE2Y0Rwd09uQTRSbWROd0VqQ3R0eHlSMGRBQ1JZblFCSVFPbUFKRURwZ0NSQXZRRHBnQ1JBNFJtZE53RWpDdHR4eVIwQkRoMEFKRUVPUUNSRHBVNWRTZ0NBRFIwM2dWMkN3QXJkQUVGQU01aUNuUjBBRjFpQUFZY09ncDBkQUNSQ25RQVhBRUl3V1owQ25SbWRIUUFrV1owQ25SbWRFWGdBRkYwM2dwMGRFWTB0bFQydTNTT0FRVHdzY3doalpaS3JoWWNCU2ZGcDlYTmJLaVZET0QyYitjcGU0L1oxN21RbmJ0enpoYWVRdEUyR0dqMElETlRqUlVTeVR4eHcvUlBIVy8rdlM3ZDFOZlJ0OXo5UVBaZzRYN1FGZmhDbmt2Z05QSUl0T3NDMmVWNmhQYW5uWk5IbFo5eHJ3WlhJTU9sdTNqU29RU3E3OFdFandMancxRUxTbEYxYUJ2Znp3azVaWDdBVXZRempQUUtiRHVRK3NtNHdOT3A0QTZBZFZ1UlMwdDF5L0RacGc0UjZtN0ZOak05SGd2VzdCaTg4emFNak9vNmxNOHd0QkJkajhMUDR5bHYzekNYUGhlYk1LSmMwNjZvOXNGNzFvRlcvOEpYdTg2SEpid0RJRDVsenc1R1dMUi9MaFQwUXFucDJKUXhOWk5mY2JMSXpQeStZeXBxUm0vbEJtR21leCs4MitQaXN4VXVtU2VKa0FMSVQ2ckplenhNSCtDVEptUXR0NXV3VFZiTDNwdG1qRFVRemxTSXZXaThUbDduZzFOcHVSbjFOZzRuMTRRYyszSWlsN093a3ZOV29nTFNQa24zcGloSUZ5dHlJR21NaE9lM24xdFdzdU15OUJkS3lxRjRaM3YyU2dnZ1RMOUtWdk1YUG5DYlJlK29PdUZGUDNIZWpCRy93OWd2bWZOWXZnNkp1V2lhMmxjU1NOMXVJakJrdHpvSWF6T0hQSlo3a0tIUHo4bVJXVmRXM2xBOFdHRjlkUUY2Qm02NzNib292M0JVV0RVMkpOY2FoUjIzR3RmSEtMT3ovdmlaK3JZblpGYUl6blhPNjdDWUVKMWZYdVRScFpoWVprS2U1NHhlb2Fna05HTHMrTlRaSEUwclg0NS9YdlEyUkdBRFg2dmNBdmR4SVVCVjI3d3hHbTJ6alpvNFgzSUxnQWxyT0ZoZXVaNnd0c3ZhSWo0eUxZN3FxYXdsbGlhSWNyejJHK2MzdnNjQW5Da0N1TXpNbVp2TWZ1OWxMd1R2ZlgrM2NWU3lQZE45WndnRFpoZmpSZ05KY0xpSjY3Yjl4eDhKSHN3cHJiaUUzdjlVcGhvdEFQSWduWFZJTjVLbU1jMHBpWGhjNmNDaFBuTitNUmhHOWFkdGR0dFFUVHdTSXBsOEk0L2ovL2Qzc3oxMzI2cVRCVHBQUk0vSGdoM2t6cUVYczhaQWs0RXJRaE5POGh6clEwRExrV01BL04rOTF0bjJNZE9KbldDMkZDWmVoa1Fyd3p3YktPamh2WnNiTTk1UW9lTDlza1l5TWY0c3JWUFZKU2dnN3BPTFV0ci9uOWVUOTlvZTluTHRGUnBqQTlva1YyS2o4aDlrNUhhQzBvaXZSRDhWeVhrSjgxdGNkNGZITlhQQ2Zsb0lRYXN4c3VPMTgvNDZkUjJqZ3VsL1VJZXQyRzBrUnZueU9OTUtoSHM2SjI2RkVvcVNxZCtyZllqZUVHd0hXVkRwWDFmaDFqQkJjS0dNcVJlcGp1OVkwMG1EVkhDK1hkaWovajQ0cktmdmZqR2luTnMxak8vMEYzakI4M1hDRElOTi9IQjg0YXhsUCszRS9rbGt0Um8rdmwzVS9haXlNSmJJb2RFMVhTc0RuNlVBeklvTXRVT2JZMitrLzRnWS9sK0FrWko1U2oydlFya3lMbTNGb3hqaERYKzMxVVhCRmY5WHJBSDMxZkZxb0JtREVadmh2dnBuWjg3TitvWkV1N1U5Ty9ubmsrUVdqM3g4dXlvUmJFbmYrTzVVTXI5aTBuSFAzOElGNUF2enJCVzhZV0JVUjBtSUF6SXZuZFFxOU4zdi9KdG8zYVBqUFhVUGw4QVNkUFB5QXA3akVOZjhiazdWTU05b2w5WEdtbEJtZURNdUdxdCtXenVMNkNYQXhYakloQ1BNNXZBQ2NoZ01KLzhYQkdMTy9EMWlzVnZHaHd3SEhyMURMYUk1bW4ySnIvYjFwVUQ5MHVjaURhUzhjWE5EekNXdk5tVC9QaFFlNWU4blRubm5rdDhEcy9TSWppYmN1bS9mcURoS29weEFZOEFrU3JQbitJR0RFS09PK1UzWE9QNmRqRnMySDVOOStvcmhPYWhpUWs1S25FVVdhK0N6a1Z6aHA4Yk1IUmJnODFxaGpqWHVJS2JIalNMU0lCS1dxb2NrR3RLaW5ZK3o0L1JkQlVGNnBjYzNKbW5seFZjTmdySTRTRXpLVVpTd2NEMlFDeXh6S3ZlK2dBbWc2WnVTUmtwUEZhNm1mVGh1N0xKTnUzSDVLNDJ1Q3BOdlBBc29lZG9sS1YvTEhlL2VKK0JiYUc1TUcwTmFTR1ZQUlVtTkZNRkZTU3BYRWNYd2JWaDdVRVRPWlp0b1ZOUkdPSWJia2lnM01jRXRSNjhjRzBSWkFvSmV2V1lvN0RnL2xaMUNRemJsV2VVdlZIbXI4Zlk0TnFkOUpKaUgvekVYMjRtSnZpSDYwZkF5RnIwQTNjNGJDMWozeVpVNjBWZ0p4WG44SmdKWExVSXNpQm5tS21NWXorN3lCUUZCdnFiMmVZbnVXNTlqb1pCZjU2L3dYdldJUjRSOHdUbVY4MGkxbVp5K1M0K0JVRVMraHpqazB1WHBDLy8vei9JbHFIWjFtb256bFhwOGFDZmhHS010aTczRkkxS2JMMXE2SUtPNGZ1QnVaNTlnYWdqbjV4VTc5bXVNcEhYZzZTK2UrZ0RNL1U5QktMSGJsOWw2bzhjelFLbDRSVWtKSmlxZnRRRzJpM0JNZy9UUWxVWUZrSkRZQk9PdkF1Z1l1ellTRG5aYkREZC9hU2Q5eDBPZTZGK2JKY0hmbDkrZ3A2TDUvVGdBK0JkRkZvdmJmQ3JRNDBzNXZNUHc4ODY2cE5YOHp5RkdlRldkeElwUFZwOVJnMVVQT1ZGYkZacnZhRnEvWUF6SFFncU1XcGFoTVlmcUhwbXdYZkhMMS9rcFltR3VIRndUNTVtUXUwZHlsZk51cTJPcTBoVE1DUHdxZnhudUJJUExYZmNpNFkxQU55KzFDVWlwUXhsZC9pelZoMTZXeUcyUTBDUVE5TnF0QW54MUhDSHdEajdzWXhPU0Iwd29wWlNuT3p4UU9jRXhteHJWVEYyQmtPdGhWcEdmdWhhR0VDZkNKcEpLcGpuaWhZK3hPVDJRSnhONjErOUs2UVNxdHYyU2hyODJJM2pnSnJxQmcwd0VMRlpQanZIcHZ6VHRhSm5MSzZWYjk3WW45MzNrb08vc2FON2ZzandOS3pwNGwybEpWeDJvcmpDR3pDLzRaTDR6Q3ZlcjZhUVl0QzVzZG95Y2h1RkU2dWZPaW9nK1ZXaTVVRGtibXZtdGFoLzNhQXJFQklpMzlzNUlMVW5sRkxnaWxjR3V6OUNRc2hFWTdmdzJvdW9JTEFZUFZUL2d5QUlxM1RGQUl3VnNsK2t0a1J6L3FHZm5DREdybTVnc2wvbDlRZHZDV0dzalB6M2RVN1h1cUtmZFVyci82WElnanA0cmV5NkFKQm1DbVVKTWpJVEhWZEZiNW0xcCtkTE1DTDh0NTV6RDQyY21mdG1MRUpDMERhMDRZaVJDVlVCTExhOEQwNzEvTjVVQk5CWERoMExGc21oVi81QjVFeE9CNGozV1ZHL1MzbGZLNW8rVjZFTEh2eTZSUjluNGFjK1ZzSzRWRTR5cGhQdlYra0c5RmVnVEJINFpSWEwySHl0VUhDZHVKYXpCL0t5a2pmZXRZeE9YVEx3czI2N2FHT2QrSStKaEtQLy8rVm5YbVM5ME9EL2p2TGNWdTBhc3lxY3VZTjFtU2I2WFRsQ2txdjF2aWdaUElZd05GL3pwV2NUMUdSLzZhRUlSamtoMHloZzRMWEpmYUdvYllKVFk0Skk1OEtpQUtnbW1nQUtXZGw1bllDZUxxYXZSSkdRTnVZdVp0WkZHeCtJa0k0dzROUzJ4d2JldE5NdW5PakJ1L2htS0NJL3c3dGZpaXlVZC8vNHJiVGVXdDRpekJZOFl2R0lONnZ5S1ltUC84WDh3SEtDZU4rV1JjS003MCt0WEtOR3lldlU5SDJEZzVCc2xqblRmOFlic0oxVG1Nczc0Q2UyWGxIaXNsZWd1aHllZzQ0clFPSFp1dy82SFRraG5udXJLMmQ2MnE2eVM3MjEwU3NBSWFSK2pYTVFBK3N2a3JMcHNVWStGMzBVdzg5dU9kR0FSNnZvNEZJTUUwRWZWVmVIVHU2ZUtpY2ZoU3FPZVhKaGJmdGNkMDhzV0VuTlVMMUM5Zm5wclRnZDgzSU11dDhvblZVRjBodnF6WmZIZHVQamJqd0VYSWNvWW15K1A2dGNKWkhtZU92NlZydkVka0hESmVjakh1SGVXQU5lNzlWRzY2MnFUakEvSEN2dW1WdjNxTCtMck9jcHFHcHMyWkd3UWRGSjdQVTRpdXlSbEJyd2ZPK3huUHlyNDdzMmNYVmJXekF5em5EaUJHakNNM2tzeGpqcU02MkdFOUM4ZjVVMzhrQjNWanRhYktwL25SZHZNRVNQR0RHOTBiV1JMQXQxUWs1RHlMdWF6UlIxWXpkQzFjK2haWHZBV1Y4eEE3MlM0QThCNjd2alZoYmJhM01Nb3AyOTNGZUVYcGU3ekl0TVdySkcvTE9IOUJ5T1htWW5OSmZqbWZ1WDlLYnJwZ0xPYmE0blorZmw4R2Jkdi9paHYrNndGR0tIQ1lyVndtaEZDMEozVjJibjJ0SUIxd0NjMUNTVDNkM1gyT3l4aGd1WGNzNHNtNjc5VW5nem9mdVNlQmV3TUZKYm9JUUhiVWgvbTJKaFcyaEc5REl2RzJ0N3laSXpLQlR6OXdCdG5OQysycENSWWhTSXVRMWo4eHN6NVZ2cW55VUl0aHZ1b3l5dTdmTklyZy9LUVVWbUdRYXFrcVprL1Z4NWIzMy9nc0VzOHlYN1NDMUorTlY0aWN6NmJ2SUU3QzVHNk1jQmFJOHJWZzU2cTVRQkpXeG4vODdRMXNQSzQrc1FhOGZMVTVnWG80cGFhcTRjT2NRNHdSMFZCSFBHaktoK1VsUENiQTFuTFh5RVVYNDVxWjhKNy9MbjRGUEpFMlRkekQwWjhNTFNOUWl5a01NbVN5T0NpRmZ5ODRScTYwZW1ZQjJ2RDA5S2pZd3NvSXBlRGNCRFRFbEJiWHhORDcyeWhkOXBDLzFDTWlkLzVIVU12QUwyN090Y0lKRHpOS3BSUE5xUE9weXQyYVBHejlRV0lzOWhROUxpWDVzOG05aGpUVXUvZjdNeUlhdGpqZCt0U2ZRM3VmWnhQcG1KaFRhQnRadEtMVWNmT0NVcUFEdU8rUW9IOEI5djZVK1AwSFYxR0xRbXRvTkZUYjNzNzRpdlpnakVTMHFmSys4UmRHZ0JiY0NNU3k4ZUJ2aDk4K2V0MUtJRnFTZTFLUVB5WFVMQk1Uc0lZbnlzSXdpWkJKWWRJMjB2c2VWK3d1SmtjcUdlbWVoS2phQWI5TDU3eFptM2cyelgwYloyeGsvZlUrYkNvN1RsbmJXN0p1RjFZZFVSby8yR3c3VmNsREcxVzdMT3RhczJMWDR1cGlmWi8yM3J6cHNuWS9BTGZSZ3JjV1A1aFltVjlWeFZPUUExZlp2cDlGMlVOVSs3ZDd4UnlWbTV3aUxwMy8wZGxWN3ZkdzFQTWlacmJEQVl6SVZxRWpSWTJZVTAzc0poUG5sd0lQY1pVRzVsdEw2UzhYQ3hVMWVZUzVjanIzNHZlQm1YQXZ5N3lONFpqQXJJRzBkZkQvNVVwQk5sWDFaUG94Sk93eXFSaTN3UVd0T3pkNG9OS2gwTGtvVG04Y3dxZ0lmS2hxcUdPaHdvNzFJK3pYbk1lbVR2MkIyQVV6QUJXeUZ6dEdnR1VMakREeldZd0pVVkJUaktDbjVLMlFHTUsxQ1FUN1N6emlPam8rQmhBbXFCanp1YzN4WXltMmVlZEdlT0lSSlZ5VHdEdzM3aUNNZTRnNVZibnNiNVpCZHhPQW5NVDdIVTRESHB4V0d1UTdHZWlZMzBDcGJ2enNzNTUrNUttMVlzYkQ1ZWEzTkk5UU5ZSVhvbDVhcGdTdTlkWjhmOHhTNWR0SHBpZG81QmNsRHVMV1k0bGhpazB0YkphMDd5SmhIMEJPeUV1dC9HUmJZVFM2UmZpVFlXR01Da05wZlNIaTdIdmRpVGdsRVZIS1pYYVZoZXpINGtrWGlJdktvcFlBbFB1c2Z0cEU0YTVJWnd2dzF4L2VMdm9ESWgvenBvOUZpUUluc1RiMlNBa0tIVjQyWFlCanBKRGc0Mzc0WGlWYjN3czRxTTBzOWVTUTVIenNNVTRPWkpLdW9wRmpCTStkQVpFbDhSVU14NXVVMk40ODZLcjE0MXRWc0dRZkdqT1JZTUNKQU1zeEVMZU5UNFJtV2pSY3BkVEdCd2N4NlhOOWRyV3FQbUp6Y3JHckg0K0RSYzcrbjF3M2tQWnd1MEJrTnI2aFFycWdvN0pUQjlBNWtkSi9IN1A0Y1dCTXdzbXVpeEF6SkIzeXJRcG5HSXE5MGx4QVhMekRDZG4xTFBpYnNSdDdySE5qZ1FCa2xSZ1BaOHZUYmpYZGdYclRXUXNLNU1kclhYUVZQcDBSaW5xM2ZyelpLSjBxRDZRaGM0MFZ6QXJhVVhsb2IxZ3ZraEszdnBtSGdJNkZSbFFaTng2ZVJxa3Awenk0QVFsWDgxM2ZBUHRMM2pNUmFpdEdGRmpvMHptRXJsb0MraCtZWWRWUTZrNEYvZXB4QW9GMEJtcUVvS05UdDZqNHZRWk5RMkJvcUY5Vmo1M1RPSW9ObURpdTlYcDE1UmtJZ1FJR2NvTHBmb0liZW56cEdVQXRxRkpwNVcrTExueDM4akhlRUNUSi9uYXZLWTFOV2ZOMHNZMVQ4L3BCOGtJSDNEVTNEWCt1NlczWXdweXBCTVlPaGJTeEdqcTg0Ulo4NGZXSm93OHB5SHFuNFMvOUoxNUVjQ01zWHFyZnd5ZDltaGl1MytyRW85cFBwb0prZFpxSGpyYTROdnpGd3VUaE5LeTZoYW8vU2xMdzNaQURVY1VwM3czU1JWZlcycmhsODB6T2dUWW5LRTBIczJxcDFKNkgzeHFQcUlrdlVEUk1GRFl5UmJzRkkzTTlNRXlvdlBrOHJsdzcvMGE4MWNEVkxtQnNSMnplMnBCdUtiMjNmYmVaQzB1WG9JdkRwcGZUd0lEeGsxT3EyZEdlc0djK29KWFdKTEdrT2hhM0NYK0RVbnpnQXA5SEdIOVJzUFpONjNIbjRSTUE1ZVNWaFBITys5UmNSYi9JT2d0VzMxVjFRNUlQR3RveFBqQytNRUpiVmxJTVlBRGQ5YUhZV1VJUUtvcHVQT0htb3FTa3VibkFLbnpnS0hxZ0lPZlc1UmRBZ290TjZCTitPMlpZSGt1ZW1MbnZROFU5VEhWclMxUnRMbUtiY0M3UGVlRHNZem52cXplZzZWQ053bXIwWXl4MXduTGp5VDg0Qlp6M0VKeUNwdEQzeWV1ZUF5RFdJczBMMnFzL1ZRM0hVeXFmcmphMFYxTGREenFBaWtlV3VWNHNjN1JMSUI2OWpFSUJqQ2t5WmVkb1VIcUNyT3ZTaFZ6eWQ3M09kckpXMGhQT3VRdjJxT29IRGM5eFZiNll1NnVxM1hxcDJaYUg0NkE3bHpldmJ4UUVtZnJ6dkFZU0p1WjRXRGsxSHozUVgxTFZkaVVLMEV2bEFHQVlsRzNNZDMwcjdkY1BONjN5cUJDSWoyNXBycHZaUDBuSTQrRWdXb0ZHOTVWNTk2Q3VyWHBLUkJHUmpRbEhDdnk1SWIvaVc4blpKV3dyRVQzbWdkNm1FaGZQNEtDdWFMam9wV3M3aCtNZFhGZEl2OGRIUUpnZzF4aTFlWXFCMHVEWWp4d1ZtcmkwU3Y1WEt1dC9vbnFhcEMrRlFpQzJDMWx2WUo5TVZjbzZ5RFlzUzNBQU5VZk10dnRiWUkyaGZ3WmF0aVNzbm9VZU1aZDM0R1Zqa01NS0ErWG5qSnBYZ1JXMlNIVFpwbFZvd1BtSnN2WHk2dzNjZk8xQUsyZHZ0WkVLVGtDL1RZOUxGaUtIQ0cwRG5yTVFkR20ybHpsQkhNOWlFWXluSDJVY1ZNaFVFanNjMG9EQlRnbzJaU1ExZ3prQUhlV2VCWFlGallMdXVmOHl6VEN5Ny9SRlI4MVdEalhNYnEyQk9INWRVUm54bzZvaXZteEwzY0t6S0lubFprRDMxbnZwSEI5S2s3R2ZjZkUxdCsxVjY0YjlMdGdlSkdscFJGeFFDQXFXSjVEb1k3N3NraThnc09FT3IydXl3WmFvTy9OR2EwWDB5MXBOUUhCaTNiMlNVR05wY1p4RFQ3ckxiQmYxRlNuUThndXhHVzNXKzM2QlcwZ0JqZTRET3o2QmE2U1ZrMHhpS2d0K3EySk9GeXI0U1lmbnUrSWMxUVpZSXV3SEJyZ3pyNlV2T2NTQ3pQVE9vN0Q2SUM0SVNlUzd6a2w0aCsyVm9lSHBuRy91V1IzK3lzTmdQY09JWFFidjBuNG1yM0J3UWNkS0p4Z1BTZXl1UC96MUpqZzRlOW5Vdm9YZWdxUVZJRTMwRUh4NUdIditGQVZVTlRvd1lESmd5RmhmNUl2bFltRXFSaWY2K1dOMU1rRUptRGNRSVR4OUZYMjNhNG14eTFBUVJzT0hPLytlSW1YOWw4RU1KSTNvUFd6Vlh4U09lSFUxZFVXWXIydUFBN0FNYit2QUVaU2JVM3FvYjlpYkN5WGV5cEVNcFo2ODYzbzZRUHFscUdIWmt1V0FCU1RWTmQ0Y09oOWh2M3FFcFN4Mlp5L0RKTVA2Y0l0RW1pQko1UEZxUW5ERUl0M05yQTNDT2xPU2d6NDNEN2dwTkZOSjVNQmg0b0Z6aERQaWdsQzJ5cHNOVTRJU3l3WTJlcmt5YjFOQzNRaC9JZldqMGVEZ1pJNC9sbjhXUGZCc1QzbWVUanExVXF0MUU3WmwvcWZ0cWt4NmFNOUt1ZU1DZWtTbk1yY0hqMUNxVFdXekV6UHNaR2NEZTNVZTRXcytYRllWeE5iT0ZGOGV6a3ZRR1I2Wk90T0xVMmxRRW5NQlN0eDQ3dkU2UGI3QVlNQlJqMk9PZlpYZmlzakpucFRmU05qbzZzWjZxU3ZOeFpObURlUzdHazN5WXlDazFIdEtOMlVuaE1Jak9YVXpBcUR2OTBseDlPL3EvQVQxWk1uaXQ1WFFlOXdtUXhuRS9XU0gwQ3FaOS8ySHkrU2ZtcGVnOFJ3c0hJNVo4a0M4SDI5M20vTEhWVk0vQkE3SGFUSllnNUVuazdNL3hXcHEwMTkyQUNmQmFpMkxBL3FyQ2pDcjZEaDFCSU16TVhJTkJtWDk2TUo1SG4ybnhsbi9SWFBGaHdIeFVtU1YwRVYyVjBqbTg2L2R4eHVZU1UxVzdzVmtFYk45RXprRzBRRndQaHlIS3liM3QrRmo1V29VVVRFcmNhekUvTjZFVzZMdnAwZC8vU0RQajdFVjlVZEpOK0FtbmYzV3drM0EwU2xKOVowMHl2WFo3bjN6NzBHNDdIZnNvdzhXcTFKWGNmd25BK1l4YTVtRnNnVjQ2NEtLUDRUMzF3cUlnekZQZDNlQ2UzajVvcnk1ZkJGMmhnQ0Z5VkZyTHpJOWVldE5Ydk03b1FxeUZnRG80Q1RwL2hEVjlOTVg5SkRIUS9ueUhUTHZaTE5MRjZmdG4yT3hqR204K1BxT3doeG5QSFdpcGtFLzh3YnR5cmk4MFNyN3BNTmtRR01mbzRaWUs5T2NDQzRFU1ZGRmJMTUl2bHhTb1JxV2llMHd4cW5MZmNMU1hNU3BNTVFFSllEVk9iWXNYSVFOdjRUR053anExa3ZUMVVPa2ljVHJHM0lhQlozWGRTY1MzdThzZ2VaUFZwT0xrYmlGOTQwRmpiQ2VOUklOTnZEYmQwMUVQQnJUQ1BwbTEybTQzemUxYkJCNTlJYTZPdmhudXIvTnZ4M0l4d1NXb2wrM0gycWZDSlI4ZGY2YVFmNHY2V2lPTnhrSytJcVQ0cEtRclpLL0xwbGdESS9QSlpiT2VwOGR0YlY3b0NyNkNnZnBXYThOY3pPa1B4ODFpU0hic05oVlNKQk90ckxJTXJMMzFMSzlUcUhxQWJBSGUwUkxtbVY4MDZrUkxETE5FaFVFSmZtOXUwc3hwa0w5M1pnZDZydyt0cUJmVE1pNTl4cVhITFhTSHdTYlNCbDBFSzArbG9FQ09QdHJsKy9uc2FGZTE5N2RpNHlVZ29lNGpLb0FKRFhjNkRHRGpyUU9vRkRXWko5SFh3dDh4RHJRUCs3YVJ3V0tXSTFHRjhzOE80S3p4V0JCY3dubDN2bmwxT2V6M29oNkVhMXZqUjcvejdERFRyRnRxVTJXL0tBRXpBdVhETlo3TVk3M01GMjE2ZHpkU2JXbVVwNGxjbTdrZUpmV2FNSGd1dDl4NUM5bWo2NlowbEoreWhzalZ2eWlXcmZrMWx6UE9UZGhHMTVZN2dRbFh0YWN2STdxdi9YTlNzY0R3cWtnd0hUL2dVc0Q1eUI3TGRSUnZKeFFHWUlObjloVHBvZEtGVlNUUHJ0R3Z5UXcrSGxSRlhJa29kRXJBR3U5SXkxWXBmU1BjM2prRmg1Q1gzbFB4djdhcWpFL0pBZlRJcEVqR2IvSDdNTzBlMnZzVmlTVzFxYS9MbWk0L240REVJM2c3bFlyY2Fuc3BEZkVwS2tkVjFPalNMT3kwQkNVcVZvRUNhQjU1dnMwNnJYbDRqcW1Mc1BzRk0vN3ZZSjB2ckJoRENtLzAwQS9IODFsMXVla0ovNkxtbDNIYjkrTktpTHFBVEptRHB5emZZWkZIdW1FakM2NjJMMEJ3a3hpN0U5VTRjUUEwWE1WRHVNWUFJZUxNUGdRYU1WT2Q4Zm10NVNmbEZJZnVCb3N6ZUF3N293NWdYUEUyWS95QmMvN2pFeEFSVWYvQnhJSFFCRjVTbjNpNjF3NHo1eEpkQ3lPMUYxWDMrM2F4K0pTdk1lWjdTNlFTS3AxRnAvc2pZejZaK1ZnQ1p6aWJHZUVvdWpyeWZNdWxIN1JhaTVrQWZ0OWViY1c1MER5SnIydW8yejk3bVRXSXU0NVlzU25OU01yck5VdUcxWHNZQnREOVREWXpRZmZLQjg3dldia000RWJQQUZnb0JWNEdRUyt2dEZEVXFPRkFvaTFuVHRtSU92ZzM4TjRoVDJTbjhyOGNsbUJDWHNwQmxNQllUbnJxRkpHQlQzd1pPekF5SkRyZTlkSEg3K3g3cWFhS0RPQjRVUUFMRDVlY1MwREU0b2J1YlFFaXVKWjBFcEJWcEx1WWNjZThBYTRQWWQvVjRETERBSkJZS1FQQ1dUY3JFYVo1SFliSmkxMUdkNmhqR29tMWlpMThWSFluRzI4Tktwa3oyVUtWUHhsaFlTcDh1WnIzNjdpT21veTd6c3hlaFc5d3pjeTJ6RzBhODBQQk1DUlFNYjMyaG5hSGVPUjhmbk5EelpoYU5ZaGtPZERzQlVaM2xvRE1hMVlQMHVTMGNqVVAzYi82REJscW1aT2VOQUJEc0xsNUJJNVFKdXBzOHV4QXVXSmRrVUIvcE82WmF4NnRzZzdmTjVtampEZ01HbmdPK0RQY0txaUhJRGJGSUd1ZHh0UFRJeURpOVNGTUtCRGNmZEdRUnY0MXExQXFteGdrVmZKTW5QOHcvQmM3TjkvVFI2QzdtR09iRnFGa0lFb204c0tpMnhZcUpMVENISzdjeHphWnZxT0RvMjJjM3dpc0JDUDRIZUFnY1JiTlBBc0JrTlJoU21ENDhkSHVwZEJSdzRtSXZ0UzVvZUY2emVUMUtNQ3loTW5taHBrRkFHV25Hc2NvTmt3dlE4Wk01bEUvdmdUSEZZTDk5T3VOeGRGQnhURURkNXYycUxSOHk5V2tYc1dnRzZrWk5uZEZHK3BPL1VBa09DaXBxSWhMM2hxN2NSU2RyQ3E3WWhVc1RvY0VjbmFGYTZuVmtoblNlUllVQTFZTzB6NWl0RjlTbHkzVmx4WUR3MjM5VEpKSDZmM0VVZllPNWxiN2JjRmN6OEJwN09vOFFtbnNVSE96L2ZhZ1ZVQnRLRXcxaVQ4OGorYUtrdjhjc2NLTmtNeGpZcjgzNDREMWtGb1o3L3RkMVc2TENOWU41OTQzMDF0VUdSbUZqQXplUmc1dnlvTTFGNitiSlovUTU0ak4vazhTRmQzRHhQVFlhQVVzaXZzQmZnVG43TXg4SDJTcFB0NEdPZFlSbkVKT0g2akhNMnA2U2dCMGd6SVJxNmZIeEdNbVNtcWFQQ21sZnd4aXVsb2FWSWl0TEdOOHdpZTJDRFdoa3pMb0NKY09EaDdLSU9BcWJIRXZYZFV4YVM0VFRUczA3Q2x6ai82R21WczlraVpEZXJNeEVuaFVCNlFRUGxjZnFrRzk4ODJScUhvTGlIR0JvSGZRdVhJc0FHOEdUQXRhbzJLVndSbnZ2YW04am8xZTMxMkdRQUtXRWE0c1VWRUFNRzRHNmNrY09ORHdSY2cxZTJEMytvaFhnWTRVQVdGOHdIS1FNclNuekNnZkZwc3hoK2FIWE1HdFBRcm9RYXNSWTRVNlVkRzByejFWamJrYTBNZWtPR1JaUUV2cVFGbHhzZUZvcjh6V0ZnSGVrM3YyOStXcU42Z2FLNWdaT1RPTVp6cFFJQzEyMDFMa01DWGlsZDN2V1hTYzVVWDl4Y0ZZZmJSUHpHRmExRkRjUGZQQi9qVUVxL0ZlR3Q0MTlDSTNZbUJsVm9Ic2E0S2Rjd1FQNVpTd0hIaEZKNy9QaC9SYXAvNHZtRzkxZUR3UFAwbERmQ0RSQ0xzelRxZnpNNzF4cG1pS2kySHdTNFdscXZHTnd0dndGNURxcG42S1RxOGF4MDBVTVBreERjWnJFRUVzSXZIaVVYWEVwaGRiNEdCNEZ5bWxQd0J6NEdwZXJxcTVwVzdUUTYveU5SaFc4VlQ1Tmh1UDB1ZGx4bzRnSUxxNVp4QVprOFpHaDNnNENxeEpsUEtZN0FReHVwZlVjVnBXVDVWSXRwMSszMFVxb3lQNHdXc1JvM29sUlJna1daWjJaTjZWQzNPWkZlWEI4TmJuVXJTZGlrTnB0RDFRaUd1S2tyOEVtU1IvQUs5UncrRkYzczV1d3VQYnZIR2lQZUZPVmlsdE1LN0FVYU9zcTkreDljbmRrM2lKRUU1TEtaUmxXSmJLT1p3ZVJPem1QTlZQa2pFM0svVHlBNTdSczY4VGtaM01SOGFrS3BtN2NGam5qUGQvRGRrV2pnWW9LSFNyNVd1NXNzb0JZVTRhY1JzNWcyREh4VW1kcThWWE9YUmJ1bkQ4UU4wTGhna3NzZ2FoY2RvWXNOdnVYR1VLL0tYRC83b0ZiK1ZHZGhxSW4wMnZldU01Ykx1ZEpPYzJLeTBHTWFHNFcveFdCeElKY0w3eWxpSk9YT3B4MEFrQnFVZ3psRGN6bUxUNGlJTFhEeHh0UlIxb1phMkpXRmdpQWI0M29ickpuRy9UWkMyS1NLMndxT3pSWlRYYXZaWkZNYjFmM2JYdlZhTmFLODI4dzlUTzYxMGdrOEpOZjNnTWZFVHpYWHNiY3ZSR0NHOUpXUVo2K2NEUHFjNDQ2NllvMlJjS0grUElMZUtPcXRubGJJblIzTW1CZUdHM0ZIMTB5emt5YnVxRUMySFNRd3BBMEFuN2Q5KzczQmtEVVRtMzBiWm1vUC9SR2JnRk4rR3JDT2ZBRGdxcjBXYkkxYTFva3BGbXM4aUhZdzlobTB6VXZsRU1pdkJSeE1vZHJiSkorOS9wM2pVZFFROUJDdFFkeG5PR3JUNWR6UlVtdzA1OTMvbWJSU2RCZzBuUnZSWk01L0UxNm03WkhtREV0V2h3dmZkWkNaOEo4TTEyVzB5Uk1zelhhbVdmUVR3SVo0YXlZa3RybnNjUXVXcjhpZHAzUGpUMmVGL2ptdGRoSWZjcE1uYitJZlpZMkZlYlc2VVkvQUszalA0dTNUdTR6RTRxbG5RZ0xGYk0xOUVCSXNOZjdLaGpkYnFRL0Q2eWlEYitObEVpMlNLRCtpdlhWVUs4aWIwb0JvMzY2Z1hrUjhaeEdqcEpJRGNFZ1pQYTlUY1llMFRJYmlQbC9yUFVRRHUzWEJKOVgvR05xM0ZBVXNLc2xsNTdEemFHTXJqY1QrZ2N0cCs5TUxZWENxK3NxUDgxZVZRMHI5bHQrZ2NRZlpiQUNSYkVqdmxNc2t6dFpHOGdiQzhRbjl0dDI2UTd5N25EcmJacS9MRXo3a1I2SmM2cGczTjlyVlg4WTVNSnJHbE1MOXA5bFU0amJUa0txQ3ZlZVpVSmpIQjAzbTJLUktSMlR5dG9Ga1RYT0xnN2tlVTFzMWxyUE1RSnBvT0tMdUFBQyt5MUhsSnVjVTZ5c0I1aHNYaHZTUFBMcTVKN0p0bnFIS1o0dllqQzRWeTgxNTNRWSs2NzgweER1R0FSc0diT3MxV3F6SDBRUzc2NXJuU0tFYmJLbGtPOG9JL1ZEd1VkMGlzMTN0S3BxSUx1MW1ESkZOeS9pSkFXY3ZEZ2p4dnVzSVQrUEd6M1NUL0o5cjlNdGZkMGpwYUdlaUxZSXFYYzdEaUhTUzhUY2pGVmtzaTY2UEVreFcxejZ1amJMTFVHTk5ZbnpPV3BIOEJaR0s0YkNLN2lSK01iSXY4bmNEQXoxdTRTdE4zdlRUemV3cjlJUWprOXd4RnhuKzZOMWRkS3MwdmZmSmlTMDhOM2E0RzFTVnJsWjk3US9NKzhHOWZlNUFQNmQ5L1FxNFdSbk9SVmhvZlBJS0VkQ3IzbGxzcFVmRTBvS0lJWW9CeUJSUGgrYlgxSExTM0pXR0pSaEl2RTFhVzROVGQ4ZVBpNFora1hiK1o4c25ZZlNOY3FpamhBZ1ZzeDRSQ001NGNYVWlZa2plQm1tQzRhak9IckNob0VMc2NKSkM3Kzlqak1qdzVCYWdaS2xnUk1pU05ZejdoN3Z2WklvUXFidFFtc3BjMGNVazFHLzczaVh0U3BST2w1d3RMZ1FpMG1XMkV4OGkzV1VMaGNnZ3g2RTFMTVZIVXNkYzlHSEkxUEgzVTJLbzBQeUdkbjlLZFZPTG03RlBCdWkwaTlhMEhwQTYwTXNld1ZFNHo4Q0F0NWQ0MDFHdjZ6WGxJVDVZYml0MVZJQTBGQ3M3d3R2WXJlcnUxZlV5VzNvTEFaLythVG5ack9jWVJOVkE4c3BvUnRsUm9XZmxzUkNsRmNnemtxaUhPcmYwL1NWdytFcFZhRmxKMGc0S3hxMU1NT21pUWRwTU5wdGU4bE1NUXFtNmNJRlhsbkdiZkpsbHlzS0RpKzBKSk1vdGtxZ0l4T1NRZ1U5ZG4vbFdrZVZmOG5VbTNpd1gyTmwzV0R3OWk2QVVLM3ZCQWJaWnJjSnBEUS9ONjRBVndqVDA3SmVmMzBHU1NtdE51MldsVzdZb3lXMkZsV2ZaRlFVd2s4NjdFZExZS2s5Vkc2SmdFbkJpQnhrWTdMTW80WUxRSkpsQW85bC9vVHZKa1NBUkRGL1h0eUF6TThPMnQzZVQvaVhhNndETjNXZXdObVFIZFBmc3hDaFUvS3RMRzJNbjhpNFpxS2RTbElhQlphZHhKbVJ6VlMvbzR5QTY1UlRTVmlxNjBvYTM5NUxxdzBwelk0U2lwd0UwU1hYc0tWK0dacmFHU2tyL1JXMDh3UFJ2cXZTVWtZQk1BOWxQeDRtMjRheitJSG1DYlhBKzBmYXhUUkU5d3VHZU8wNkRJWGE2UWxLSjNwdUl5aXVBVmZQcjczNnZ6bzJwQmlyUytWeGVsM1RNbTNKS2h6OW8yWm9SdmFGVnBJa3lrYjBIY200b0hGQk1jTlNOajcvNEdKdDQzb2dvblkyVmc0bnNEUUlXeEFjb3JwWEFDemdCcVFQallzRS9WVXBYcHdOTWFuRXJ1NE53TUNGUGtYdk1vcXZvZUxOM3F5dS9OMWVXRUh0dE1ENjV2MTlsLzBrSDJtUjM1aXYvRkkreWpvSEo5Z1BNejY3YWYzTXEvQm9XWHF1M3JwaGlXTVhWa21uUFNFa3BHcFVJMmgxTVRoaWRlR0ZFT0s2WVpIUHdZek1CdnBOQzcrWkh4UGI3ZXBmZWZHeUlCNEp6TzlEVE5FWW5ETFZWSGRReXZPRVZlZnJrNlV2NWtUUVlWWVdXZHFyZGNJbDd5bGp3d0lXZGZRL3krMlFCM2VSL3F4WU9idVl5QjRnVGJvMmluNFB6YXJVMXNPOW5FVGttajkvQW94REErSk0zR01xUXRKUjRqdGR1SHRub0NMeGQxZ1FVc2NIUkIvTW9SWUlFc1AycERaOUt2SGd0bGsxaVRiV1diSGhvaHdGRVlYN3k1MWZVVjJudVVtbm9VY3FuV0lRQUFnbDlMVFZYK0JjMFFHTkVoQ2h4SFI0WWpmRTUxUFVkR2ZzU0ZFNmNrN0JMMy9oVGY5akxxNEcxSWFmSU54T0xLZUF0TzdxdXVsWXZINVlPQmMrelg3Q3JNZ1duVzQ3L2pmUnNXbkpqWVlvRTd4TWZXVjJITjJpeUlxTEknOwogICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwKFsKICAgICAgICAgIFs4MjE3LCAnYXBvc3Ryb3BoZSddLAogICAgICAgICAgWzgyNjAsICdmcmFjdGlvbiBzbGFzaCddLAogICAgICAgICAgWzEyNTM5LCAnbWlkZGxlIGRvdCddCiAgICAgICAgXSk7CiAgICAgICAgZnVuY3Rpb24gcyhlKSB7CiAgICAgICAgICByZXR1cm4gKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGxldCB0ID0gMDsKICAgICAgICAgICAgcmV0dXJuICgpID0-IGVbdCsrXTsKICAgICAgICAgIH0pKAogICAgICAgICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBsZXQgdCA9IDA7CiAgICAgICAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoZVt0KytdIDw8IDgpIHwgZVt0KytdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgbiA9IHIoKSwKICAgICAgICAgICAgICAgIHMgPSAxLAogICAgICAgICAgICAgICAgbyA9IFswLCAxXTsKICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMTsgZSA8IG47IGUrKykgby5wdXNoKChzICs9IHIoKSkpOwogICAgICAgICAgICAgIGxldCBpID0gcigpLAogICAgICAgICAgICAgICAgYSA9IHQ7CiAgICAgICAgICAgICAgdCArPSBpOwogICAgICAgICAgICAgIGxldCBjID0gMCwKICAgICAgICAgICAgICAgIHUgPSAwOwogICAgICAgICAgICAgIGZ1bmN0aW9uIGwoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gMCA9PSBjICYmICgodSA9ICh1IDw8IDgpIHwgZVt0KytdKSwgKGMgPSA4KSksICh1ID4-IC0tYykgJiAxOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCBkID0gMiAqKiAzMSwKICAgICAgICAgICAgICAgIGYgPSBkID4-PiAxLAogICAgICAgICAgICAgICAgaCA9IGQgLSAxOwogICAgICAgICAgICAgIGxldCBnID0gMDsKICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IDMxOyBlKyspIGcgPSAoZyA8PCAxKSB8IGwoKTsKICAgICAgICAgICAgICBsZXQgcCA9IFtdLAogICAgICAgICAgICAgICAgbSA9IDAsCiAgICAgICAgICAgICAgICBiID0gZDsKICAgICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICBsZXQgZSA9IE1hdGguZmxvb3IoKChnIC0gbSArIDEpICogcyAtIDEpIC8gYiksCiAgICAgICAgICAgICAgICAgIHQgPSAwLAogICAgICAgICAgICAgICAgICByID0gbjsKICAgICAgICAgICAgICAgIGZvciAoOyByIC0gdCA-IDE7ICkgewogICAgICAgICAgICAgICAgICBsZXQgbiA9ICh0ICsgcikgPj4-IDE7CiAgICAgICAgICAgICAgICAgIGUgPCBvW25dID8gKHIgPSBuKSA6ICh0ID0gbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoMCA9PSB0KSBicmVhazsKICAgICAgICAgICAgICAgIHAucHVzaCh0KTsKICAgICAgICAgICAgICAgIGxldCBpID0gbSArIE1hdGguZmxvb3IoKGIgKiBvW3RdKSAvIHMpLAogICAgICAgICAgICAgICAgICBhID0gbSArIE1hdGguZmxvb3IoKGIgKiBvW3QgKyAxXSkgLyBzKSAtIDE7CiAgICAgICAgICAgICAgICBmb3IgKDsgMCA9PSAoKGkgXiBhKSAmIGYpOyApIChnID0gKChnIDw8IDEpICYgaCkgfCBsKCkpLCAoaSA9IChpIDw8IDEpICYgaCksIChhID0gKChhIDw8IDEpICYgaCkgfCAxKTsKICAgICAgICAgICAgICAgIGZvciAoOyBpICYgfmEgJiA1MzY4NzA5MTI7ICkKICAgICAgICAgICAgICAgICAgKGcgPSAoZyAmIGYpIHwgKChnIDw8IDEpICYgKGggPj4-IDEpKSB8IGwoKSksIChpID0gKGkgPDwgMSkgXiBmKSwgKGEgPSAoKGEgXiBmKSA8PCAxKSB8IGYgfCAxKTsKICAgICAgICAgICAgICAgIChtID0gaSksIChiID0gMSArIGEgLSBpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbGV0IHkgPSBuIC0gNDsKICAgICAgICAgICAgICByZXR1cm4gcC5tYXAoKHQpID0-IHsKICAgICAgICAgICAgICAgIHN3aXRjaCAodCAtIHkpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB5ICsgNjU3OTIgKyAoKGVbYSsrXSA8PCAxNikgfCAoZVthKytdIDw8IDgpIHwgZVthKytdKTsKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB5ICsgMjU2ICsgKChlW2ErK10gPDwgOCkgfCBlW2ErK10pOwogICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkgKyBlW2ErK107CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgLSAxOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSgKICAgICAgICAgICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGxldCB0ID0gW107CiAgICAgICAgICAgICAgICBbLi4uJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nXS5mb3JFYWNoKAogICAgICAgICAgICAgICAgICAoZSwgcikgPT4gKHRbZS5jaGFyQ29kZUF0KDApXSA9IHIpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgbGV0IHIgPSBlLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgbiA9IG5ldyBVaW50OEFycmF5KCg2ICogcikgPj4gMyk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMCwgbyA9IDAsIGkgPSAwLCBhID0gMDsgcyA8IHI7IHMrKykKICAgICAgICAgICAgICAgICAgKGEgPSAoYSA8PCA2KSB8IHRbZS5jaGFyQ29kZUF0KHMpXSksIChpICs9IDYpLCBpID49IDggJiYgKG5bbysrXSA9IGEgPj4gKGkgLT0gOCkpOwogICAgICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgICAgICAgfSkoZSkKICAgICAgICAgICAgKQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgICAgICByZXR1cm4gMSAmIGUgPyB-ZSA-PiAxIDogZSA-PiAxOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgICAgIGxldCByID0gQXJyYXkoZSk7CiAgICAgICAgICBmb3IgKGxldCBuID0gMCwgcyA9IDA7IG4gPCBlOyBuKyspIHJbbl0gPSBzICs9IG8odCgpKTsKICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhKGUsIHQgPSAwKSB7CiAgICAgICAgICBsZXQgciA9IFtdOwogICAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICBsZXQgbiA9IGUoKSwKICAgICAgICAgICAgICBzID0gZSgpOwogICAgICAgICAgICBpZiAoIXMpIGJyZWFrOwogICAgICAgICAgICB0ICs9IG47CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgczsgZSsrKSByLnB1c2godCArIGUpOwogICAgICAgICAgICB0ICs9IHMgKyAxOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICAgICAgcmV0dXJuIGwoKCkgPT4gewogICAgICAgICAgICBsZXQgdCA9IGEoZSk7CiAgICAgICAgICAgIGlmICh0Lmxlbmd0aCkgcmV0dXJuIHQ7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdShlKSB7CiAgICAgICAgICBsZXQgdCA9IFtdOwogICAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICBsZXQgciA9IGUoKTsKICAgICAgICAgICAgaWYgKDAgPT0gcikgYnJlYWs7CiAgICAgICAgICAgIHQucHVzaChmKHIsIGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgbGV0IHIgPSBlKCkgLSAxOwogICAgICAgICAgICBpZiAociA8IDApIGJyZWFrOwogICAgICAgICAgICB0LnB1c2goaChyLCBlKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdC5mbGF0KCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgICAgbGV0IHQgPSBbXTsKICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgbGV0IHIgPSBlKHQubGVuZ3RoKTsKICAgICAgICAgICAgaWYgKCFyKSBicmVhazsKICAgICAgICAgICAgdC5wdXNoKHIpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGQoZSwgdCwgcikgewogICAgICAgICAgbGV0IG4gPSBBcnJheShlKQogICAgICAgICAgICAuZmlsbCgpCiAgICAgICAgICAgIC5tYXAoKCkgPT4gW10pOwogICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCB0OyBzKyspIGkoZSwgcikuZm9yRWFjaCgoZSwgdCkgPT4gblt0XS5wdXNoKGUpKTsKICAgICAgICAgIHJldHVybiBuOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmKGUsIHQpIHsKICAgICAgICAgIGxldCByID0gMSArIHQoKSwKICAgICAgICAgICAgbiA9IHQoKSwKICAgICAgICAgICAgcyA9IGwodCk7CiAgICAgICAgICByZXR1cm4gZChzLmxlbmd0aCwgMSArIGUsIHQpLmZsYXRNYXAoKGUsIHQpID0-IHsKICAgICAgICAgICAgbGV0IFtvLCAuLi5pXSA9IGU7CiAgICAgICAgICAgIHJldHVybiBBcnJheShzW3RdKQogICAgICAgICAgICAgIC5maWxsKCkKICAgICAgICAgICAgICAubWFwKChlLCB0KSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcyA9IHQgKiBuOwogICAgICAgICAgICAgICAgcmV0dXJuIFtvICsgdCAqIHIsIGkubWFwKChlKSA9PiBlICsgcyldOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGgoZSwgdCkgewogICAgICAgICAgcmV0dXJuIGQoMSArIHQoKSwgMSArIGUsIHQpLm1hcCgoZSkgPT4gW2VbMF0sIGUuc2xpY2UoMSldKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZyhlKSB7CiAgICAgICAgICByZXR1cm4gYHskeyhmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgfSkoZSl9fWA7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgICAgbGV0IHQgPSBbXTsKICAgICAgICAgIGZvciAobGV0IHIgPSAwLCBuID0gZS5sZW5ndGg7IHIgPCBuOyApIHsKICAgICAgICAgICAgbGV0IG4gPSBlLmNvZGVQb2ludEF0KHIpOwogICAgICAgICAgICAociArPSBuIDwgNjU1MzYgPyAxIDogMiksIHQucHVzaChuKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKGUpIHsKICAgICAgICAgIGxldCB0ID0gZS5sZW5ndGg7CiAgICAgICAgICBpZiAodCA8IDQwOTYpIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5lKTsKICAgICAgICAgIGxldCByID0gW107CiAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQ7ICkgci5wdXNoKFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmUuc2xpY2UobiwgKG4gKz0gNDA5NikpKSk7CiAgICAgICAgICByZXR1cm4gci5qb2luKCcnKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYihlLCB0KSB7CiAgICAgICAgICBsZXQgciA9IGUubGVuZ3RoLAogICAgICAgICAgICBuID0gciAtIHQubGVuZ3RoOwogICAgICAgICAgZm9yIChsZXQgcyA9IDA7IDAgPT0gbiAmJiBzIDwgcjsgcysrKSBuID0gZVtzXSAtIHRbc107CiAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9CiAgICAgICAgdmFyIHkgPQogICAgICAgICAgJ0FFVURUQUhCQ0ZRQVRRRFJBREFBY2dBZ0FEUUFGQUFzQUJRQUh3QU9BQ1FBRFFBUkFBb0FGd0FIQUJJQUNBQVBBQVVBQ3dBRkFBd0FCQUFRQUFNQUJ3QUVBQW9BQlFBSUFBSUFDZ0FCQUFRQUZBQUxBQUlBQ3dBQkFBSUFBUUFIQUFNQUF3QUVBQXNBREFBTUFBd0FDZ0FOQUEwQUF3QUtBQWtBQkFBZEFBWUFad0RTQWRzREpnQzBDa01COHhoWkFxZm9DMTkwVUdjVGhnQnVyd2Y3UFQwOVBiMDlBamdKdW04T2pEbGx4SFlVS1hBUHh6cTZ0QUJBeGdLOHlzVXZXQWdNUFQwOVBUMDlQU3M2TFQySGNnV1hXd0ZMb1NNRUVFbDVSRlZNS3ZPMFhROEV4RGRKTW5JZ3NqMjZQVFF5eThGZkVROEFZOElQQUdjRWJ3UndCSEVFY2dSekJIUUVkUVIyQkhjRWVBUjZCSHNFZkFSK0JJQUVnZm5kQlFvQllnVUxBV0lGREFGaUJOY0UyQVRaQlJBRkVRVXZCZEFMRkFzVkRQY05CdzEzRFljT01BNHhEak1CNEJsbEhJMEIyZ3JiQU1EcEhMa1E3UUhWQVBSTlFRRm5HUlVFZzB5RUIydWFKRjhBSnBJQnBvYjVBRVJTTUFLTm9BWHFhUUxVQk1DekVpQUNud1JaRWtrVnNTN3RBTkFzQkcwUnVBUUxFUEFCdjlISUNUVUJYaWdQWndSQkFwTURPd0FhbWh0YUFCcUVBWThLdkt4M0xRNEFyQUI4VWh3RUJBVlNhZ0Q4QUVGWkFEa0JJYWRWajJVTVVneDVJbDRBTlFDOUF4SUIxQmxiRVBNQXMzMENHeGxYQWh3WktRSUVDQmM2RWJzQ294bmd6djdVelJRQThNMEJhd0w2WndrTjd3QUJBRDMzT1FSY3NnTEpDak1DanFVQ2h0dy9rbStOQXNYUEFvUDJCVDg0UHdVUkFLMFJBdnB0YjZjQXBRUy9PTU1leTVISlM4NFVkeHB4VFBrQ29nVkZJVGFUT3dFUkFLNXBBdmtOQk9WeUE3cTNCS2xPSlNBTEFnVUlCUmNFZEFTcEJYcXpBQlhGU1daT2F3TENPcXcvL0FvbENaZHZ2M2RTQmtFUUd5ZWxFUGNNTXdHMUFUc043VXZZQlBFR093VEpIMzBaR1EvTmxad0lwUzNkRE8wbTR5NmhnRm9qOVNxREJlMUw5RHpkQzAxUmFBOVpDMlVKNHpwamdVNERJUUVOSW9zSzNRMDVDRzBROHdySmF3M2xFVVVIT1FQVlNab0FwUWNCQ3hFZE5SVzFKaEJpckFzSk9YY0creHIyQzQ4bXJ4TXBldndGMHhvaEJrMEJLUnIvQU04dTU0V3dXakZjSEU5ZkJnTUxKU1BIRktoUUlBMGxRTGQ0U0JvYkJ4VWxxUUtSUTNCS2gxRTJIcE1oOWp3OURXWXVFMUY4Qi9VOEJSbFBDNEU4bmthclJRNFIwajZOUFVnaVNVd3NCRFYvTEM4bml3blBENFVNdVh4eUFWa0pJUW14REhFVE1SRVhOOFVJT1FjWkxaY2tKeFVJSVVhVllKb0U5NThEOHhQUkF3c0ZQd2xCQnhNRHRSd3RFeTRWS1FVTmdTVFhBdk0yMVM2ekFvOVdnQUVYQmNzUEpSL2ZFRkJINEE3cENKc0NaUU9ESmVzQUxSVWhBQmNpbXdoRFl3QmZqOWhUQlM3TENNZHFiQ04wQTJjVTUyRVJjd2VSRGxjSHB4d3pGYjhjNFhESVhndUdDQ2lqcndsYkFYVUptUUZmQk9NSUNUVmJqS0FnUVdkVGkxZ1lteUJoUVQ5ZC9BSXhER1VWbjBTOWgzZ0NpdzlyRWhzQk5RRnpCemtOQVFKM0VlMFJheENWQ091R0JEVzFNL2c2SlFSUElZTWdFUW9uQTA5c3pnc25KdmtNK0drQm94SmlBd3cwUFhmdVo2dGd0aVFYL1FjWk1zVkJZQ0h4QzVKUHpReWNHc0VZUWxRdUdlUUh2d1B6R3ZNbjZrRlhCZjhEb3dNVE9rMHo3Z1M5QzJrSWl3ay9BRWtPb3hjSDF4aHFDbkdNMEFFeGl3RzNtUU5Ya1lNQ2I0OEdOd2NMQUdjTGh3VjU1UUFkQXFjSW93QUZBTThEVndBNUFxMEhuUUFaQUlWQkFUMERKeThCSWVVQ2p3T1RDREhMQVpVdkFmTXBCQnZEREJVQTl6ZHVTZ0xEc1FLQWFtYWlCZDFZQW80Q1NUVUJUU1VFQlU1SFVRT3ZjZUVBMndCTEJoUGZSd0VWcTByTEd1TkRBZDl2S3dESEFQc0FCVFVIQlVFQnpRSHpiUUMzQVY4TE1RbWlzN1VCVGVrcEFJTUFGV3NCMXdLSkFOMEFOUUIvOFFGVEFFMEZXZmtGMHdKUFNRRVJNUmdyVjJFQnV3TWZBVE1CRFFCNUJzdU5wY2tISHdSdEI5TUNFQnNWNFFMdkxnZTFBUU1pM3hQTlFzVUN2ZDVWb1dBQ1pJRUNZa0piVGE5Yk55QUNvZmNDYUpnQ1pna0NuNFE0R3dzQ1pqc0NaaVlFYmdSL0EzOFRBMzZTT1FZNWR4YzVnam9qSXdKc0hRSXlOamdLQW0zSEFtMnU3NG96WjBVckFXY0EzZ0RoQUVvRkI1Z01qUUQrQzhJQURiVUNkeThDZHFJL0FubExRd0o0dWgxYzIwV3VSdGNDZkQ4Q2VzZ0NmUWtDZlBBRldRVWdTQUJJZldNa0FvRnRBb0FBQW9BRkFuK3VTVmhLV3hVWFNzd0MwUUVDME14TEp3T0lUd09INWtURmtUSUM4cUZkQXdNRHJrdk9UQzBsQTg5TlRFMnZBb3MvQW9yWXdSc0hIVU5uQmJjQ2pqY0NqbHhBbDRFQ2p0a0NqbHg0VWJSVE5RcFMxRlNGQXBQN0FwTU1BT2tBSEZVZVZhOVYwQVlzR3ltVmhqTGhlR1pGT3prQ2w1OEM3N0pZSWFnQVdTVUNsbzhDbG55Y0FLbFpyRm9KZ1UwQU93S1d0UUtXVGx4RVhORUNtY3NDbVdSY3lsMEhHUUtjbXpuQ09wMENuQllDbjVzQ25yaUtBQjBQTVNvUEFwM3hBcDZTQUxVOVlUUmg3d0tlMHdLZ2JnR3BBcDZmSHdLZVRxVmp5R1FuSlNzQ0o2OENKbjRDb1BzQ29Fd0NvdDBDb2NRQ3BpOENwYzRDcC84QWZRS244bWg4YUxFQUEwbHFIR3JSQXF6akFxeXVBcTFuQXEwQ0FsY2RBbFhjQXJIaDF3TWZUbXlYQXJLOURRS3k2QmRzNEcxamJVaGZBeVhOQXJaY096OXVrQU1wUlFLNFhnSzVSeFVDdVNwM2NEWnc0UUs5R1FLNzJuQ1dBeklSQXI2SWNnSURNM0VDdmhwekluTlBBc1BMQXNNRWM0SjBTelZGZE9BRFBLY0RQSm9EUGI4Q3hYd0N4a2NDeGhDSkFzaHBVUUxJUkFMSlR3TEpMZ0prblFMZDBuaDVZWGl1ZVNWTDBBTVlvMmNDQW1IMEdmT1ZKSHNMWHBKZXV4RUN6MnNDejJ3dlMxUFM4eE9mQU1hdEFzOXpBU25xQTA0U2Zrc0ZBdHduQXR1S0F0SlBBMUpjQTFOZkFRRURWWXlBaVQ4QXl4YnRZRVdDSElMVGdzNkRqUUxheHdMWjNvUVFoRW1uUEFPR3BRQXZBMlFPaG5GWitRQlZBdDlsQXQ2NGMzY0M0aS90RkFIek1DY0I5SnNCOHRLSEF1dnpBdWx3ZVFMcStRTHE1QUQ1UndHNUF1NkpBdXVjbHFxWEF3THVQd09GNEpoNWNPQnhvUUx6QXdCcEE0NFdtWk1DOXhNRGtXNERrb2NDOTVnQytka0MrR2FhSEpxcnV6ZWJIZ09kZ3dMKytnRWJBRG1mSEorekF3V05BNlpxQTZiWkFOSEZBd1pxb1lpaUJRa0RERWtDd0FBL0F3RGhRUmRUQVJIekEyc0hsMmNGQUpNdEs3ZXZ2ZHNCaVprVWZ4RUVPUUg3S1FVaERwMEpud0NTL1NsWHhRTDNBWjBBdHdXNUFHOExiVUV1RkNhTkxnRkRBWUQ4QWJVbUFIVUREZ1J0QUN3Q0ZneWhBQUFLQWowQ2FnUGRBMzRFa1FFZ1JRVWhmQW9BQlFCRUFCTUFOaElDZHdFQUJkVURhKzhLeFFJQTl3cWZKNyt4dCtVQmtTRkJRZ0hwRkg4Uk5NQ0pBQVFBR3dCYUFrVUNoSXNBQmpwVE9wU05iUUM0T284NjBBQ05PTUU2M0FDbEFPZ0F5d0U2Z1RvN09mdzUrVHQyaVRwYk81NkpPbTg1R0FGV0FUTUJiQVV2TlYwMW5qV3ROV1kxZFRXMk5jVTFnaldSTmRJMTRUV2VOYTAxN2pYOU5iSTF3VFlDTmhFMXhqWFZOaFkySnpYZU5lMDJMalk5Tmk0MUxTRTJPalk5Tmp3MnlUY0lCSkE4VnpZNE50MDNJRGNQTnNvZ040azNNQW9Fc0R4bk5pUTNHVGRzT28wM0lVTFVRd2RDNEVNTEhBOFBDWnNvYlNoUlZRWUE2WDhBNmJBQkZDblhBdWtCb3dDOUJiY0Fid056Qkw4TURBTU1BUWdEQUFrS0N3c0xDUW9HQkFWVkJJL0R2d0R6OWIyOWthVUNiMFF0c1JUTkx0NGVHQmNTSEFNWkZoWVpFaFlFQVJBRUJVRWNRUnhCSEVFY1FSeEJIRUVhUVJ4QkhFRkNTVHhCUEVsSVNVaEJOa00yUVRZYk5rbElTVm1CVklnQkZMV1pBdTBCaFFDakJjRUFieWtCdndHSkFhUWNFWjBlUENrbE1BQWhNdkFJTUFMNTRnQzdCbThFZXNjanpRTXBBUlFwS2dEVUFCYXZBajYyNnhRQUpQMEEzZXR6dWY0Tk5SQTdlZnkyWjlOUXJDbkMwT1N5QU56NUJCSWJKNUlGRFI2bWlJYXZZUzZ0cHJqam11S2VieG01Qzc0UTIyNVgxcGthWVlQYjZmMURLNGszeE1FQmI5UzJXTWpFaWJUTldoc1JKSUErdndOVkVpWFRFNWlYcy93ZXpWNjZvRkxmcDlOWkdZVytHazE5SjIrYkNUNlllMnc2TERZZGd6S01VYWJrNTk1ZUxCQ1hBTno5SFVwV2JBVHE5dnFYVng5WERnK1BjOVhwNCtic1MwMDVTVk0vQkpCTTQ2ODdXVXVmK1VqOWRFaThhRE5hUHh0cGJEeGNHMVRIVEltVU1acTRVQ2FhTllwc1ZxcmFOeUtMSlhEWXNGWi81amw3YkxSdE84OHQ3UDN4WmFBeGhiNU9kUE1YcXNTa3AxV0NpZUc4alhtMVU5OStibHZMbFh6UENTK005M1ZuSkNpSyswOUxmYVNhQkFWQm9teURnSnVhOGRmVXpSN2dhMzRJdlIyTnZqK0E5aGVKNmxzbDFLRzROa0kxMDMyQ25mZjFtMXdvZjJCOW9ISks0Ymk2SmtFZFNxZU5laXVvNlFvWlppbmNvYzczL1RIOVNYRjhzQ0U3WHl1WXlXOFdTZ2JHRkNqUFYwaWhMS2hkUHMwOFR4ODJmWUFrTExjNEkyd2RsNGFwWTdHVTVsSFJGelJXSmVwN1d3M3diZUEzcW1kNTkvODZQNHh1TmFxRHB5Z1h0Nk04NWdsU0JIT0NHZ0pEbnQrcE45Yks3SEFwTWd1WDYrMDZSWk5qelZtY1pKK3djVXJKOS8vYnBSTnhOdUtwTmw5dUZkcytTOXRkeDdMYU01WmtJclBqNm5JVTltbmJGdFZiczlzL3VMZ2w4TVZjekF3ZXQraU9FenpCbFlXN1JDTWdFNmd5TkxlcTYrMXRJeDRkcGdabmQwRGtzSlM1ZitKTkRwd3djUE5YYWFWc3BxMWZiUWFqT3JKZ0swb2ZLdEoxTmU5MEw2Vk80TU9sNVM4ODZwN3U2eG83T0xqRzhUR0wrSFUxSlhHSmdwcGc0bk5iTko1bmx6U3B1UFl5MjFKVUVjVUE5NFBvRmlaZmpadWUrUW55UTgwZWtPdVpWa3h4NGcrY3ZoSmZIZ05sNGh5MS9hNitSS2NLbGFyL0oyOXkvL0V6dGxiVlBIVlVlUTF6WDg2ZVFWQWpSL00zZEE5dzRXOExmYVhwNEVnTTg1d09XYXNsaTgzN1B6Vk1PbnNMelIrazNvNzUvbFJQQUpTRTF4QUtRekVpNXYxMGtlK1ZCdlJ0MWN3UVJNZCtVNW1MQ1RHVmQ2WGladGdCRzVjRGkwdzIyR0tjVk52SGl1NUxRYlpFRFZ0ejBvbm43azUraGV1S1hWc1p0U3ppbGtMUkFVbWpNWEVNQjNKOVlDNTBYQnhQaXo1M1NDK0VoblBsOVdzS0N2OTJTTS9PRkZJTUpaWWZsMFdXOHRJTzNVeFljd2RNQWo3RlNtZ3JzWjJhQVpPMDNCT2hQMWJOTlpJdHlYWVFGVHBDM1NHMVZ1UERxSDlHa2lDRG1FK0p3eHlJVlNPNXNpREVyQU9wRVhGZ2p5NlBRdE9WRGorczZlMXI4aGVXVnZtWm5UY2l1ZjRFaU5aekNBZDdTT01oWEVSSU9sc0hJTUczOTlpOWFMVHkzbTJoUkxaakpWRE5MUzUzaUdJSzExZFBxUXQwekJEeWc2cWM3WXFrRG0yTTVWZTZkQ1dDYUNiVFhYMnJUb2FJZ3o2K3poNGxZVWkvKzZucWNGTUFrUUpLSFlMSzB3WWs1TjlzelY2eGloRGJEREZyNDVsTjFLNGFDWEJxL0ZpdFBTdWQ5Z0x0NVpWbitacUdYN2N3bTJ6NUVHTWdmRnBJRnloR0d1RFBtc282VEl0VE13bnkrN3VQbkxDZjRXNmdvRlFGVjBvUVNzYzlWZk1tVkxjTHI2WmV0RFpiYVNGVExxblNPL2JJUGpBMy96QVVvcWdHRkFFUVM0SWh1TXpFcDJJM2pKemJ6a2svSUVteWF4K3JoWlR3ZDZmK0NHdHdQaXh1OEl2ekFDcXVQV1BSRXU5WnZHa1V6cFJ3dlJSdWFOTjZjcjBXMXdXaXRzOUlDZFlKN2x0YmdNaVNMM3NUUGV1ZmdOY1ZxTVZXRmtDUERINGpHMmpBMFhjVmdRajYyQ2IyOXY5Zi96LysyS2JZdkl2L3p6anBRQVBrbGlhVkR6TnJXNTdUWi9aT3laRDBubGZNbUFJQklBR0FJMEQzay9tZE40eHI5djg1WmJaYmJxZkgyakdkNWhVcU5aV3dsNVNQZm9HbWZFbG1helVJZU5MMWovbWtGN1ZOQXpUcTRqTnQ4Sm9RMTFOUU9jbWhwclhveFN4ZlJHSjlMREVPQVErZG14QVFIOTBpdGk5ZTJ1L01vZXVhR2NEVEhvQyt4c21FZVdteEVLZWZRdUl6SGJwdzVUYzVjRW9jYm9BRDA5b2lwV1FodFRPMXdpdmYvTytEUmUycnBsL0U5d2xyekJvcmpKc09lRzFCL1hQVzRFYUpFRmRObEVDRVpnYTVab0dSSFhnWW91R1J1VmttOHRERVNpRXlGTm8rM3M1TTVwdVNkVHlVTDJsbG5JTlZIRXQ5MVhVTlc0ZXdkTWdKNGJvSmZFeXQvaVk1V1hxYkErQTJGa3Q1WjBsdXRpV2hlOW5aSXlJVWp5WERDM1VzYUcxdCtlTng2ejRXL09Zb1RCN0E2eCtkTlNUT2k5QUluY3RiRVNxbTVndk9Md3c3T1dYUHJtSHdWWmFzcmw0ZUQxMTNwbStKdFQ3SlZPdm5DWHFkenpkVFJIZ0owUGlHVEZZVzVHdnQ5UjlMRDZMemZzMHYvVFpaSFNteVZOcTd2aUlIRTZEQks3UXAwN0l6NTVFTThTWXRRdlpmL29iQm5pVFdpNUMyL292SGZ3NFZuZGtFNVhZZGpPaENNUmpEZU9FZlhlTi9Dd2ZHZHVpVUlmc29GZVV4WGVRWGJhN2M3OTcyWE52OHcrZFRqalVNMFFlTkFSZVcrSjAxNGRLQUQvTWNRWVhUN2MwR1FQSWtuM0xsNlI3Z0dqdWlRb1pEMFRFZUVxUXBLb1oxNWcvME9QUUkxN1FpU3Y5QVVST2EvVi9UUU4zZHZMQXJlYzNScnNZbHZCbTFiOExXemx0ZHVnc0M1MGxOS1lMRXAyYStaWllxUGVqVUxSbE9KaDV6ai9MVk15VER2d0toTXh4d3VEa3hKMVFwb05JME9UV0xvbTRaNzFTTnpJOVRWMWlYSnJJdTlXY25kK01DYUF3OG8xalNYZDk0WVUvMWdua3JDOUJVRU90UXZFSVE3ZzBpNmgrS0wySktrOFlkbDdIcnV2Z1dNU0FtTmUrTHNoR2hWNHFuV0hoTzkvUklQUXpZMXRIUmoyVnFPeU5zRHBLMGN3dys1NkFkREM0Z3NXd1kwWHhvdWNJV0lxcy9HY3duV3FsYVQwS1ByOG1iSzVVOTQvMzAxaTFXTHQ0WUlOVFZ2Q0ZCckZaYkliWThleWNPZGVKMnRlRDVJZlBMQ1JnN2pqY0ZUd2xNRk5sOXpkaC9vM0UvaEhQd2o3QldnME1VMDlwUHJCTGJyQ2dtNTRBNkgrSTZ2Mjcrakw1Z2tqV2cvaVlka3M5amJmVlA1eS9uMGRsZ1dFTWxLYXNsN0p2RlpkNTZMZnliVzFlZWFWTzBneFRmWFp3RDhHNFNJMTE2eXg3VUtWUmd1aTZZYTFZcGl4cVhlTkxjOEl4dEF3Q1U1SWh3UWduK05xSG5SYUR2NjFDeEtoT3E0cE9YN002cGtBK1BtcGQ0ajF2bjZBQ1VBTG9MTGM0dnBYY2k4VmlkTHh6bTdxRkJlN3MrcXV1SnM2RVRZbW5wZ1MzTHdTWnhQSWx0Z0JEWHo4TTFrL1cyeVNOdjJmOS9OUGh4TEdLMkQyMWRrSGVTR21lblJUM1lxY2RsMG0vaDNPWXI4VitsWE5ZR2Y4YUNDcGQ0YldqRTRRSVBqN3ZVS040TnJmczdNTDZZMk95UzgzMEpDbm9mZy9rN2xwRnB0NFNxWmM1SEdnMUhDT3JIdk9kQzhiUDZGR0RiRS9WVjBtWDRJYWt6YmRTL29wK0t0M0cyNC84UWJCVjd5ODZzR1NRL3ZaelU4RlhzN3U2akl2d2Noc0VQMkJwSWhXM0c4dVdOd2EzSG1qZkgvWmpoaENXdmx1QWNGK25NZjE0Q2xLZzVoR2d0UExKOTh1ZU5Ba2M1SHMyV1psazJRSHZmcmVDSzFDQ0dPNm5NWlZTYjk5Vk0vYWpyOFdIVHRlOUpTbWtYcS9pL1U5NDNIRWJkelc2UmUvUzg4ZEtnZzhwR09MbEFlTmlxcmNMa1VSMy9hQ2xGcE1YY09VUDNybUVUY1dTZk1YWkUzVFVPaThpK2ZxUm5UWUxmbFZ4L1ZiLzZHSjdlSVJaVUE2azNSWVIzaUZTSzljNGlEZE53SnVaTDJGS3ovSUs1VmltY05XRXFkWGpTb3hTZ21GMFVQbERvVWxOclBjTTdmdG1BOFk5Z0tpcUtFSHVXTitBWlJJd3RWU3h5ZTJLZjhyTTNsaEo1WGNCWFU5bjR2ME95MVJVMk0rNHFNOEFRUFZ3c2U4RXJOU29iNW9GUFd4dXFablZ6bzFxQi9JQnhrTTNFVlVLRlVVbE8zZTUxMjU5R2dOY0piQ21sdnJkanRvVFc3ckNobTF3eUNLenBDVHdvelVVRU9JY1dMbmVSTGdNWGgrU2pHU0ZrQWxsemJHUzVISzdMbGZDTVJOUkRTdmJRUGpjWGFlbk5ZeEN2dTJReXpuejZTdHV4Vmo2NlNnSTBUOEI2L3NmSEFKWVphWjc4dGhqT1NJRnVtTldMUWJlWml4RENDQyt2MFlCdGt4aUJCM2plZkhxWi9kRkhVK2NyYmo2T3ZTMXgvSkREN3ZsbTd6T1ZQd3BVQzAxbmh4WnVZLzYzRTdnJzsKICAgICAgICBjb25zdCBBID0gNDQwMzIsCiAgICAgICAgICB2ID0gNDM1MiwKICAgICAgICAgIEUgPSA0NDQ5LAogICAgICAgICAgdyA9IDQ1MTksCiAgICAgICAgICBUID0gMjgsCiAgICAgICAgICBQID0gMjEgKiBULAogICAgICAgICAgUyA9IEEgKyAxOSAqIFAsCiAgICAgICAgICBPID0gdiArIDE5LAogICAgICAgICAgUiA9IEUgKyAyMSwKICAgICAgICAgIE4gPSB3ICsgVDsKICAgICAgICBmdW5jdGlvbiBMKGUpIHsKICAgICAgICAgIHJldHVybiAoZSA-PiAyNCkgJiAyNTU7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEIoZSkgewogICAgICAgICAgcmV0dXJuIDE2Nzc3MjE1ICYgZTsKICAgICAgICB9CiAgICAgICAgbGV0IEMsIGssIEksIEY7CiAgICAgICAgZnVuY3Rpb24gTShlKSB7CiAgICAgICAgICByZXR1cm4gZSA-PSBBICYmIGUgPCBTOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBKKGUsIHQpIHsKICAgICAgICAgIGlmIChlID49IHYgJiYgZSA8IE8gJiYgdCA-PSBFICYmIHQgPCBSKSByZXR1cm4gQSArIChlIC0gdikgKiBQICsgKHQgLSBFKSAqIFQ7CiAgICAgICAgICBpZiAoTShlKSAmJiB0ID4gdyAmJiB0IDwgTiAmJiAoZSAtIEEpICUgVCA9PSAwKSByZXR1cm4gZSArICh0IC0gdyk7CiAgICAgICAgICB7CiAgICAgICAgICAgIGxldCByID0gRi5nZXQoZSk7CiAgICAgICAgICAgIHJldHVybiByICYmICgociA9IHIuZ2V0KHQpKSwgcikgPyByIDogLTE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIFUoZSkgewogICAgICAgICAgQyB8fAogICAgICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGxldCBlID0gcyh5KTsKICAgICAgICAgICAgICAoQyA9IG5ldyBNYXAoYyhlKS5mbGF0TWFwKChlLCB0KSA9PiBlLm1hcCgoZSkgPT4gW2UsICh0ICsgMSkgPDwgMjRdKSkpKSwKICAgICAgICAgICAgICAgIChrID0gbmV3IFNldChhKGUpKSksCiAgICAgICAgICAgICAgICAoSSA9IG5ldyBNYXAoKSksCiAgICAgICAgICAgICAgICAoRiA9IG5ldyBNYXAoKSk7CiAgICAgICAgICAgICAgZm9yIChsZXQgW3QsIHJdIG9mIHUoZSkpIHsKICAgICAgICAgICAgICAgIGlmICghay5oYXModCkgJiYgMiA9PSByLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBsZXQgW2UsIG5dID0gciwKICAgICAgICAgICAgICAgICAgICBzID0gRi5nZXQoZSk7CiAgICAgICAgICAgICAgICAgIHMgfHwgKChzID0gbmV3IE1hcCgpKSwgRi5zZXQoZSwgcykpLCBzLnNldChuLCB0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEkuc2V0KHQsIHIucmV2ZXJzZSgpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICBsZXQgdCA9IFtdLAogICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgIG4gPSAhMTsKICAgICAgICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgICAgICBsZXQgciA9IEMuZ2V0KGUpOwogICAgICAgICAgICByICYmICgobiA9ICEwKSwgKGUgfD0gcikpLCB0LnB1c2goZSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKGxldCBuIG9mIGUpCiAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICBpZiAobiA8IDEyOCkgdC5wdXNoKG4pOwogICAgICAgICAgICAgIGVsc2UgaWYgKE0obikpIHsKICAgICAgICAgICAgICAgIGxldCBlID0gbiAtIEEsCiAgICAgICAgICAgICAgICAgIHQgPSAoKGUgJSBQKSAvIFQpIHwgMCwKICAgICAgICAgICAgICAgICAgciA9IGUgJSBUOwogICAgICAgICAgICAgICAgbyh2ICsgKChlIC8gUCkgfCAwKSksIG8oRSArIHQpLCByID4gMCAmJiBvKHcgKyByKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGV0IGUgPSBJLmdldChuKTsKICAgICAgICAgICAgICAgIGUgPyByLnB1c2goLi4uZSkgOiBvKG4pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIXIubGVuZ3RoKSBicmVhazsKICAgICAgICAgICAgICBuID0gci5wb3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgaWYgKG4gJiYgdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgIGxldCBlID0gTCh0WzBdKTsKICAgICAgICAgICAgZm9yIChsZXQgciA9IDE7IHIgPCB0Lmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgbGV0IG4gPSBMKHRbcl0pOwogICAgICAgICAgICAgIGlmICgwID09IG4gfHwgZSA8PSBuKSB7CiAgICAgICAgICAgICAgICBlID0gbjsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgcyA9IHIgLSAxOwogICAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICAgIGxldCByID0gdFtzICsgMV07CiAgICAgICAgICAgICAgICBpZiAoKCh0W3MgKyAxXSA9IHRbc10pLCAodFtzXSA9IHIpLCAhcykpIGJyZWFrOwogICAgICAgICAgICAgICAgaWYgKCgoZSA9IEwodFstLXNdKSksIGUgPD0gbikpIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlID0gTCh0W3JdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEQoZSkgewogICAgICAgICAgcmV0dXJuIFUoZSkubWFwKEIpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB4KGUpIHsKICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgbGV0IHQgPSBbXSwKICAgICAgICAgICAgICByID0gW10sCiAgICAgICAgICAgICAgbiA9IC0xLAogICAgICAgICAgICAgIHMgPSAwOwogICAgICAgICAgICBmb3IgKGxldCBvIG9mIGUpIHsKICAgICAgICAgICAgICBsZXQgZSA9IEwobyksCiAgICAgICAgICAgICAgICBpID0gQihvKTsKICAgICAgICAgICAgICBpZiAoLTEgPT0gbikgMCA9PSBlID8gKG4gPSBpKSA6IHQucHVzaChpKTsKICAgICAgICAgICAgICBlbHNlIGlmIChzID4gMCAmJiBzID49IGUpIDAgPT0gZSA_ICh0LnB1c2gobiwgLi4uciksIChyLmxlbmd0aCA9IDApLCAobiA9IGkpKSA6IHIucHVzaChpKSwgKHMgPSBlKTsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGxldCBvID0gSihuLCBpKTsKICAgICAgICAgICAgICAgIG8gPj0gMCA_IChuID0gbykgOiAwID09IHMgJiYgMCA9PSBlID8gKHQucHVzaChuKSwgKG4gPSBpKSkgOiAoci5wdXNoKGkpLCAocyA9IGUpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG4gPj0gMCAmJiB0LnB1c2gobiwgLi4uciksIHQ7CiAgICAgICAgICB9KShVKGUpKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgXyA9ICcuJywKICAgICAgICAgIEcgPSA2NTAzOSwKICAgICAgICAgIGogPSAxLAogICAgICAgICAgSCA9IChlKSA9PiBBcnJheS5mcm9tKGUpOwogICAgICAgIGZ1bmN0aW9uIFgoZSwgdCkgewogICAgICAgICAgcmV0dXJuIGUuUC5oYXModCkgfHwgZS5RLmhhcyh0KTsKICAgICAgICB9CiAgICAgICAgY2xhc3MgViBleHRlbmRzIEFycmF5IHsKICAgICAgICAgIGdldCBpc19lbW9qaSgpIHsKICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBsZXQgUSwgWiwgeiwgSywgJCwgVywgWSwgcSwgZWUsIHRlLCByZSwgbmU7CiAgICAgICAgZnVuY3Rpb24gc2UoKSB7CiAgICAgICAgICBpZiAoUSkgcmV0dXJuOwogICAgICAgICAgbGV0IGUgPSBzKHIpOwogICAgICAgICAgY29uc3QgdCA9ICgpID0-IGEoZSksCiAgICAgICAgICAgIG4gPSAoKSA9PiBuZXcgU2V0KHQoKSk7CiAgICAgICAgICAoUSA9IG5ldyBNYXAodShlKSkpLAogICAgICAgICAgICAoWiA9IG4oKSksCiAgICAgICAgICAgICh6ID0gdCgpKSwKICAgICAgICAgICAgKEsgPSBuZXcgU2V0KHQoKS5tYXAoKGUpID0-IHpbZV0pKSksCiAgICAgICAgICAgICh6ID0gbmV3IFNldCh6KSksCiAgICAgICAgICAgICgkID0gbigpKSwKICAgICAgICAgICAgKFcgPSBuKCkpOwogICAgICAgICAgbGV0IG8gPSBjKGUpLAogICAgICAgICAgICBpID0gZSgpOwogICAgICAgICAgY29uc3QgZCA9ICgpID0-CiAgICAgICAgICAgIG5ldyBTZXQoCiAgICAgICAgICAgICAgdCgpCiAgICAgICAgICAgICAgICAuZmxhdE1hcCgoZSkgPT4gb1tlXSkKICAgICAgICAgICAgICAgIC5jb25jYXQodCgpKQogICAgICAgICAgICApOwogICAgICAgICAgKFkgPSBsKCh0KSA9PiB7CiAgICAgICAgICAgIGxldCByID0gbChlKS5tYXAoKGUpID0-IGUgKyA5Nik7CiAgICAgICAgICAgIGlmIChyLmxlbmd0aCkgewogICAgICAgICAgICAgIGxldCBuID0gdCA-PSBpOwogICAgICAgICAgICAgIHJldHVybiAoclswXSAtPSAzMiksIChyID0gbShyKSksIG4gJiYgKHIgPSBgUmVzdHJpY3RlZFske3J9XWApLCB7IE46IHIsIFA6IGQoKSwgUTogZCgpLCBNOiAhZSgpLCBSOiBuIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKSwKICAgICAgICAgICAgKHEgPSBuKCkpLAogICAgICAgICAgICAoZWUgPSBuZXcgTWFwKCkpOwogICAgICAgICAgbGV0IGYgPSB0KCkKICAgICAgICAgICAgLmNvbmNhdChIKHEpKQogICAgICAgICAgICAuc29ydCgoZSwgdCkgPT4gZSAtIHQpOwogICAgICAgICAgZi5mb3JFYWNoKCh0LCByKSA9PiB7CiAgICAgICAgICAgIGxldCBuID0gZSgpLAogICAgICAgICAgICAgIHMgPSAoZltyXSA9IG4gPyBmW3IgLSBuXSA6IHsgVjogW10sIE06IG5ldyBNYXAoKSB9KTsKICAgICAgICAgICAgcy5WLnB1c2godCksIHEuaGFzKHQpIHx8IGVlLnNldCh0LCBzKTsKICAgICAgICAgIH0pOwogICAgICAgICAgZm9yIChsZXQgeyBWOiBlLCBNOiB0IH0gb2YgbmV3IFNldChlZS52YWx1ZXMoKSkpIHsKICAgICAgICAgICAgbGV0IHIgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgdCBvZiBlKSB7CiAgICAgICAgICAgICAgbGV0IGUgPSBZLmZpbHRlcigoZSkgPT4gWChlLCB0KSksCiAgICAgICAgICAgICAgICBuID0gci5maW5kKCh7IEc6IHQgfSkgPT4gZS5zb21lKChlKSA9PiB0LmhhcyhlKSkpOwogICAgICAgICAgICAgIG4gfHwgKChuID0geyBHOiBuZXcgU2V0KCksIFY6IFtdIH0pLCByLnB1c2gobikpLCBuLlYucHVzaCh0KSwgZS5mb3JFYWNoKChlKSA9PiBuLkcuYWRkKGUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgbiA9IHIuZmxhdE1hcCgoZSkgPT4gSChlLkcpKTsKICAgICAgICAgICAgZm9yIChsZXQgeyBHOiBlLCBWOiBzIH0gb2YgcikgewogICAgICAgICAgICAgIGxldCByID0gbmV3IFNldChuLmZpbHRlcigodCkgPT4gIWUuaGFzKHQpKSk7CiAgICAgICAgICAgICAgZm9yIChsZXQgZSBvZiBzKSB0LnNldChlLCByKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbGV0IGggPSBuZXcgU2V0KCksCiAgICAgICAgICAgIGcgPSBuZXcgU2V0KCk7CiAgICAgICAgICBjb25zdCBwID0gKGUpID0-IChoLmhhcyhlKSA_IGcuYWRkKGUpIDogaC5hZGQoZSkpOwogICAgICAgICAgZm9yIChsZXQgZSBvZiBZKSB7CiAgICAgICAgICAgIGZvciAobGV0IHQgb2YgZS5QKSBwKHQpOwogICAgICAgICAgICBmb3IgKGxldCB0IG9mIGUuUSkgcCh0KTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGUgb2YgaCkgZWUuaGFzKGUpIHx8IGcuaGFzKGUpIHx8IGVlLnNldChlLCBqKTsKICAgICAgICAgICh0ZSA9IG5ldyBTZXQoSChoKS5jb25jYXQoSChEKGgpKSkpKSwKICAgICAgICAgICAgKHJlID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgbGV0IHQgPSBbXSwKICAgICAgICAgICAgICAgIHIgPSBhKGUpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoZnVuY3Rpb24gZSh7IFM6IHIsIEI6IG4gfSwgcywgbykgewogICAgICAgICAgICAgICAgICBpZiAoISg0ICYgciAmJiBvID09PSBzW3MubGVuZ3RoIC0gMV0pKSB7CiAgICAgICAgICAgICAgICAgICAgMiAmIHIgJiYgKG8gPSBzW3MubGVuZ3RoIC0gMV0pLCAxICYgciAmJiB0LnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCBvZiBuKSBmb3IgKGxldCByIG9mIHQuUSkgZSh0LCBbLi4ucywgcl0sIG8pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSgKICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIHQobikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICBTOiBlKCksCiAgICAgICAgICAgICAgICAgICAgICBCOiBsKCgpID0-IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBhKGUpLm1hcCgoZSkgPT4gcltlXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmxlbmd0aCkgcmV0dXJuIHQobik7CiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIFE6IG4KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICB9KShbXSksCiAgICAgICAgICAgICAgICAgIFtdCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pKGUpCiAgICAgICAgICAgICAgLm1hcCgoZSkgPT4gVi5mcm9tKGUpKQogICAgICAgICAgICAgIC5zb3J0KGIpKSwKICAgICAgICAgICAgKG5lID0gbmV3IE1hcCgpKTsKICAgICAgICAgIGZvciAobGV0IGUgb2YgcmUpIHsKICAgICAgICAgICAgbGV0IHQgPSBbbmVdOwogICAgICAgICAgICBmb3IgKGxldCByIG9mIGUpIHsKICAgICAgICAgICAgICBsZXQgZSA9IHQubWFwKChlKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgdCA9IGUuZ2V0KHIpOwogICAgICAgICAgICAgICAgcmV0dXJuIHQgfHwgKCh0ID0gbmV3IE1hcCgpKSwgZS5zZXQociwgdCkpLCB0OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHIgPT09IEcgPyB0LnB1c2goLi4uZSkgOiAodCA9IGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IHIgb2YgdCkgci5WID0gZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gb2UoZSkgewogICAgICAgICAgcmV0dXJuICh1ZShlKSA_ICcnIDogYCR7aWUoYWUoW2VdKSl9IGApICsgZyhlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaWUoZSkgewogICAgICAgICAgcmV0dXJuIGAiJHtlfSLigI5gOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhZShlLCB0ID0gZykgewogICAgICAgICAgbGV0IHIgPSBbXTsKICAgICAgICAgIGNlKGVbMF0pICYmIHIucHVzaCgn4peMJyk7CiAgICAgICAgICBsZXQgbiA9IDAsCiAgICAgICAgICAgIHMgPSBlLmxlbmd0aDsKICAgICAgICAgIGZvciAobGV0IG8gPSAwOyBvIDwgczsgbysrKSB7CiAgICAgICAgICAgIGxldCBzID0gZVtvXTsKICAgICAgICAgICAgdWUocykgJiYgKHIucHVzaChtKGUuc2xpY2UobiwgbykpKSwgci5wdXNoKHQocykpLCAobiA9IG8gKyAxKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gci5wdXNoKG0oZS5zbGljZShuLCBzKSkpLCByLmpvaW4oJycpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjZShlKSB7CiAgICAgICAgICByZXR1cm4gc2UoKSwgei5oYXMoZSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHVlKGUpIHsKICAgICAgICAgIHJldHVybiBzZSgpLCAkLmhhcyhlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbGUoZSwgdCwgcikgewogICAgICAgICAgaWYgKCFlKSByZXR1cm4gW107CiAgICAgICAgICBzZSgpOwogICAgICAgICAgbGV0IHMgPSAwOwogICAgICAgICAgcmV0dXJuIGUuc3BsaXQoXykubWFwKChlKSA9PiB7CiAgICAgICAgICAgIGxldCBvID0gcChlKSwKICAgICAgICAgICAgICBpID0geyBpbnB1dDogbywgb2Zmc2V0OiBzIH07CiAgICAgICAgICAgIHMgKz0gby5sZW5ndGggKyAxOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGxldCBlLAogICAgICAgICAgICAgICAgcyA9IChpLnRva2VucyA9IHBlKG8sIHQsIHIpKSwKICAgICAgICAgICAgICAgIGEgPSBzLmxlbmd0aDsKICAgICAgICAgICAgICBpZiAoIWEpIHRocm93IG5ldyBFcnJvcignZW1wdHkgbGFiZWwnKTsKICAgICAgICAgICAgICBsZXQgYyA9IChpLm91dHB1dCA9IHMuZmxhdCgpKTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGZvciAobGV0IHQgPSBlLmxhc3RJbmRleE9mKDk1KTsgdCA-IDA7ICkKICAgICAgICAgICAgICAgICAgICBpZiAoOTUgIT09IGVbLS10XSkgdGhyb3cgbmV3IEVycm9yKCd1bmRlcnNjb3JlIGFsbG93ZWQgb25seSBhdCBzdGFydCcpOwogICAgICAgICAgICAgICAgfSkoYyksCiAgICAgICAgICAgICAgICAhKGkuZW1vamkgPSBhID4gMSB8fCBzWzBdLmlzX2Vtb2ppKSAmJiBjLmV2ZXJ5KChlKSA9PiBlIDwgMTI4KSkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAhKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlLmxlbmd0aCA-PSA0ICYmIDQ1ID09IGVbMl0gJiYgNDUgPT0gZVszXSkKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgbGFiZWwgZXh0ZW5zaW9uOiAiJHttKGUuc2xpY2UoMCwgNCkpfSJgKTsKICAgICAgICAgICAgICAgIH0pKGMpLAogICAgICAgICAgICAgICAgICAoZSA9ICdBU0NJSScpOwogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbGV0IHQgPSBzLmZsYXRNYXAoKGUpID0-IChlLmlzX2Vtb2ppID8gW10gOiBlKSk7CiAgICAgICAgICAgICAgICBpZiAodC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgaWYgKHouaGFzKGNbMF0pKSB0aHJvdyBnZSgnbGVhZGluZyBjb21iaW5pbmcgbWFyaycpOwogICAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMTsgZSA8IGE7IGUrKykgewogICAgICAgICAgICAgICAgICAgIGxldCB0ID0gc1tlXTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXQuaXNfZW1vamkgJiYgei5oYXModFswXSkpCiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBnZShgZW1vamkgKyBjb21iaW5pbmcgbWFyazogIiR7bShzW2UgLSAxXSl9ICsgJHthZShbdFswXV0pfSJgKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAhKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBlWzBdLAogICAgICAgICAgICAgICAgICAgICAgciA9IG4uZ2V0KHQpOwogICAgICAgICAgICAgICAgICAgIGlmIChyKSB0aHJvdyBnZShgbGVhZGluZyAke3J9YCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBlLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgIG8gPSAtMTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHM7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgdCA9IGVbaV07CiAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IG4uZ2V0KHQpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT0gaSkgdGhyb3cgZ2UoYCR7cn0gKyAke3N9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgIChvID0gaSArIDEpLCAociA9IHMpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobyA9PSBzKSB0aHJvdyBnZShgdHJhaWxpbmcgJHtyfWApOwogICAgICAgICAgICAgICAgICB9KShjKTsKICAgICAgICAgICAgICAgICAgbGV0IHIgPSBIKG5ldyBTZXQodCkpLAogICAgICAgICAgICAgICAgICAgIFtvXSA9IChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBZOwogICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgciBvZiBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gdC5maWx0ZXIoKGUpID0-IFgoZSwgcikpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUubGVuZ3RoKSB0aHJvdyBZLnNvbWUoKGUpID0-IFgoZSwgcikpID8gaGUodFswXSwgcikgOiBmZShyKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgodCA9IGUpLCAxID09IGUubGVuZ3RoKSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgICAgICAgICB9KShyKTsKICAgICAgICAgICAgICAgICAgIShmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHIgb2YgdCkgaWYgKCFYKGUsIHIpKSB0aHJvdyBoZShlLCByKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5NKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IEQodCk7CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gMSwgciA9IGUubGVuZ3RoOyB0IDwgcjsgdCsrKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoSy5oYXMoZVt0XSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbiA9IHQgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHM7IG4gPCByICYmIEsuaGFzKChzID0gZVtuXSkpOyBuKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gdDsgciA8IG47IHIrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVbcl0gPT0gcykgdGhyb3cgbmV3IEVycm9yKGBkdXBsaWNhdGUgbm9uLXNwYWNpbmcgbWFya3M6ICR7b2Uocyl9YCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gLSB0ID4gNCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZXhjZXNzaXZlIG5vbi1zcGFjaW5nIG1hcmtzOiAke2llKGFlKGUuc2xpY2UodCAtIDEsIG4pKSl9ICgke24gLSB0fS80KWApOwogICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KShvLCB0KSwKICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGxldCByLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gW107CiAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlIG9mIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBlZS5nZXQoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID09PSBqKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSB0Lk0uZ2V0KGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHIgPSByID8gci5maWx0ZXIoKGUpID0-IG4uaGFzKGUpKSA6IEgobikpLCAhci5sZW5ndGgpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBuLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBpZiAocikKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdCBvZiByKQogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmV2ZXJ5KChlKSA9PiBYKHQsIGUpKSkgdGhyb3cgbmV3IEVycm9yKGB3aG9sZS1zY3JpcHQgY29uZnVzYWJsZTogJHtlLk59LyR7dC5OfWApOwogICAgICAgICAgICAgICAgICAgIH0pKG8sIHIpLAogICAgICAgICAgICAgICAgICAgIChlID0gby5OKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBlID0gJ0Vtb2ppJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaS50eXBlID0gZTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGkuZXJyb3IgPSBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGRlKGUpIHsKICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgIC5tYXAoKHsgaW5wdXQ6IHQsIGVycm9yOiByLCBvdXRwdXQ6IG4gfSkgPT4gewogICAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgICBsZXQgbiA9IHIubWVzc2FnZTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigxID09IGUubGVuZ3RoID8gbiA6IGBJbnZhbGlkIGxhYmVsICR7aWUoYWUodCkpfTogJHtufWApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gbShuKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmpvaW4oXyk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGZlKGUpIHsKICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoYGRpc2FsbG93ZWQgY2hhcmFjdGVyOiAke29lKGUpfWApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBoZShlLCB0KSB7CiAgICAgICAgICBsZXQgciA9IG9lKHQpLAogICAgICAgICAgICBuID0gWS5maW5kKChlKSA9PiBlLlAuaGFzKHQpKTsKICAgICAgICAgIHJldHVybiBuICYmIChyID0gYCR7bi5OfSAke3J9YCksIG5ldyBFcnJvcihgaWxsZWdhbCBtaXh0dXJlOiAke2UuTn0gKyAke3J9YCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGdlKGUpIHsKICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoYGlsbGVnYWwgcGxhY2VtZW50OiAke2V9YCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHBlKGUsIHQsIHIpIHsKICAgICAgICAgIGxldCBuID0gW10sCiAgICAgICAgICAgIHMgPSBbXTsKICAgICAgICAgIGZvciAoZSA9IGUuc2xpY2UoKS5yZXZlcnNlKCk7IGUubGVuZ3RoOyApIHsKICAgICAgICAgICAgbGV0IG8gPSBiZShlKTsKICAgICAgICAgICAgaWYgKG8pIHMubGVuZ3RoICYmIChuLnB1c2godChzKSksIChzID0gW10pKSwgbi5wdXNoKHIobykpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBsZXQgdCA9IGUucG9wKCk7CiAgICAgICAgICAgICAgaWYgKHRlLmhhcyh0KSkgcy5wdXNoKHQpOwogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgbGV0IGUgPSBRLmdldCh0KTsKICAgICAgICAgICAgICAgIGlmIChlKSBzLnB1c2goLi4uZSk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICghWi5oYXModCkpIHRocm93IGZlKHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHMubGVuZ3RoICYmIG4ucHVzaCh0KHMpKSwgbjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbWUoZSkgewogICAgICAgICAgcmV0dXJuIGUuZmlsdGVyKChlKSA9PiBlICE9IEcpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBiZShlLCB0KSB7CiAgICAgICAgICBsZXQgciwKICAgICAgICAgICAgbiA9IG5lLAogICAgICAgICAgICBzID0gZS5sZW5ndGg7CiAgICAgICAgICBmb3IgKDsgcyAmJiAoKG4gPSBuLmdldChlWy0tc10pKSwgbik7ICkgewogICAgICAgICAgICBsZXQgeyBWOiBvIH0gPSBuOwogICAgICAgICAgICBvICYmICgociA9IG8pLCB0ICYmIHQucHVzaCguLi5lLnNsaWNlKHMpLnJldmVyc2UoKSksIChlLmxlbmd0aCA9IHMpKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByOwogICAgICAgIH0KICAgICAgICBjb25zdCB5ZSA9ICd2YWxpZCcsCiAgICAgICAgICBBZSA9ICdtYXBwZWQnLAogICAgICAgICAgdmUgPSAnaWdub3JlZCc7CiAgICAgICAgZnVuY3Rpb24gRWUoZSkgewogICAgICAgICAgcmV0dXJuIGUgPT0geWUgfHwgZSA9PSBBZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gd2UoZSkgewogICAgICAgICAgcmV0dXJuIGUuc29tZSgoZSkgPT4gVy5oYXMoZSkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBUZShlKSB7CiAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspCiAgICAgICAgICAgIGlmIChlW3RdLnR5cGUgPT0geWUpIHsKICAgICAgICAgICAgICBsZXQgciA9IHQgKyAxOwogICAgICAgICAgICAgIGZvciAoOyByIDwgZS5sZW5ndGggJiYgZVtyXS50eXBlID09IHllOyApIHIrKzsKICAgICAgICAgICAgICBlLnNwbGljZSh0LCByIC0gdCwgeyB0eXBlOiB5ZSwgY3BzOiBlLnNsaWNlKHQsIHIpLmZsYXRNYXAoKGUpID0-IGUuY3BzKSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfQogICAgICAgICh0LmVuc19iZWF1dGlmeSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBsZXQgdCA9IGxlKGUsIHgsIChlKSA9PiBlKTsKICAgICAgICAgIGZvciAobGV0IHsgdHlwZTogZSwgb3V0cHV0OiByLCBlcnJvcjogbiB9IG9mIHQpIHsKICAgICAgICAgICAgaWYgKG4pIGJyZWFrOwogICAgICAgICAgICBpZiAoJ0dyZWVrJyAhPT0gZSkgewogICAgICAgICAgICAgIGxldCBlID0gMDsKICAgICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICBsZXQgdCA9IHIuaW5kZXhPZig5NTgsIGUpOwogICAgICAgICAgICAgICAgaWYgKHQgPCAwKSBicmVhazsKICAgICAgICAgICAgICAgIChyW3RdID0gOTI2KSwgKGUgPSB0ICsgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZGUodCk7CiAgICAgICAgfSksCiAgICAgICAgICAodC5lbnNfZW1vamkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBzZSgpLCByZS5tYXAoKGUpID0-IGUuc2xpY2UoKSk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmVuc19ub3JtYWxpemUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZGUobGUoZSwgeCwgbWUpKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZW5zX25vcm1hbGl6ZV9mcmFnbWVudCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIHNlKCk7CiAgICAgICAgICAgIGxldCByID0gdCA_IEQgOiB4OwogICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgIC5zcGxpdChfKQogICAgICAgICAgICAgIC5tYXAoKGUpID0-IG0ocGUocChlKSwgciwgbWUpLmZsYXQoKSkpCiAgICAgICAgICAgICAgLmpvaW4oXyk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmVuc19zcGxpdCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBsZShlLCB4LCB0ID8gKGUpID0-IGUuc2xpY2UoKSA6IG1lKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZW5zX3Rva2VuaXplID0gZnVuY3Rpb24gZSh0LCB7IG5mOiByID0gITAgfSA9IHt9KSB7CiAgICAgICAgICAgIHNlKCk7CiAgICAgICAgICAgIGxldCBuID0gcCh0KS5yZXZlcnNlKCksCiAgICAgICAgICAgICAgcyA9IFtdLAogICAgICAgICAgICAgIG8gPSBbXTsKICAgICAgICAgICAgZm9yICg7IG4ubGVuZ3RoOyApIHsKICAgICAgICAgICAgICBsZXQgZSA9IGJlKG4sIHMpOwogICAgICAgICAgICAgIGlmIChlKSBvLnB1c2goeyB0eXBlOiAnZW1vamknLCBlbW9qaTogZS5zbGljZSgpLCBpbnB1dDogcywgY3BzOiBtZShlKSB9KSwgKHMgPSBbXSk7CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBsZXQgZSA9IG4ucG9wKCk7CiAgICAgICAgICAgICAgICBpZiAoNDYgPT0gZSkgby5wdXNoKHsgdHlwZTogJ3N0b3AnLCBjcDogZSB9KTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRlLmhhcyhlKSkgby5wdXNoKHsgdHlwZTogeWUsIGNwczogW2VdIH0pOwogICAgICAgICAgICAgICAgZWxzZSBpZiAoWi5oYXMoZSkpIG8ucHVzaCh7IHR5cGU6IHZlLCBjcDogZSB9KTsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBsZXQgdCA9IFEuZ2V0KGUpOwogICAgICAgICAgICAgICAgICB0ID8gby5wdXNoKHsgdHlwZTogQWUsIGNwOiBlLCBjcHM6IHQuc2xpY2UoKSB9KSA6IG8ucHVzaCh7IHR5cGU6ICdkaXNhbGxvd2VkJywgY3A6IGUgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyKQogICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwLCByID0gLTE7IHQgPCBvLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICBsZXQgbiA9IG9bdF07CiAgICAgICAgICAgICAgICBpZiAoRWUobi50eXBlKSkKICAgICAgICAgICAgICAgICAgaWYgKHdlKG4uY3BzKSkgewogICAgICAgICAgICAgICAgICAgIGxldCBuID0gdCArIDE7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IG47IGUgPCBvLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgeyB0eXBlOiB0LCBjcHM6IHIgfSA9IG9bZV07CiAgICAgICAgICAgICAgICAgICAgICBpZiAoRWUodCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF3ZShyKSkgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlICsgMTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodCAhPT0gdmUpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByIDwgMCAmJiAociA9IHQpOwogICAgICAgICAgICAgICAgICAgIGxldCBzID0gby5zbGljZShyLCBuKSwKICAgICAgICAgICAgICAgICAgICAgIGkgPSBzLmZsYXRNYXAoKGUpID0-IChFZShlLnR5cGUpID8gZS5jcHMgOiBbXSkpLAogICAgICAgICAgICAgICAgICAgICAgYSA9IHgoaSk7CiAgICAgICAgICAgICAgICAgICAgYihhLCBpKQogICAgICAgICAgICAgICAgICAgICAgPyAoby5zcGxpY2UociwgbiAtIHIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmZjJywKICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogaSwKICAgICAgICAgICAgICAgICAgICAgICAgICBjcHM6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zMDogVGUocyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiBlKG0oYSksIHsgbmY6ICExIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAodCA9IHIpKQogICAgICAgICAgICAgICAgICAgICAgOiAodCA9IG4gLSAxKSwKICAgICAgICAgICAgICAgICAgICAgIChyID0gLTEpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgciA9IHQ7CiAgICAgICAgICAgICAgICBlbHNlIG4udHlwZSAhPT0gdmUgJiYgKHIgPSAtMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gVGUobyk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmlzX2NvbWJpbmluZ19tYXJrID0gY2UpLAogICAgICAgICAgKHQubmZjID0geCksCiAgICAgICAgICAodC5uZmQgPSBEKSwKICAgICAgICAgICh0LnNhZmVfc3RyX2Zyb21fY3BzID0gYWUpLAogICAgICAgICAgKHQuc2hvdWxkX2VzY2FwZSA9IHVlKTsKICAgICAgfSwKICAgICAgMjQ5MjogZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgciwKICAgICAgICAgIG4sCiAgICAgICAgICBzLAogICAgICAgICAgbyA9CiAgICAgICAgICAgICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldCkgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICBpZiAoJ2EnID09PSByICYmICFuKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXInKTsKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA_IGUgIT09IHQgfHwgIW4gOiAhdC5oYXMoZSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXQnKTsKICAgICAgICAgICAgICByZXR1cm4gJ20nID09PSByID8gbiA6ICdhJyA9PT0gciA_IG4uY2FsbChlKSA6IG4gPyBuLnZhbHVlIDogdC5nZXQoZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICBpID0KICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZSwgdCwgciwgbiwgcykgewogICAgICAgICAgICAgIGlmICgnbScgPT09IG4pIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZScpOwogICAgICAgICAgICAgIGlmICgnYScgPT09IG4gJiYgIXMpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlcicpOwogICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiB0ID8gZSAhPT0gdCB8fCAhcyA6ICF0LmhhcyhlKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0Jyk7CiAgICAgICAgICAgICAgcmV0dXJuICdhJyA9PT0gbiA_IHMuY2FsbChlLCByKSA6IHMgPyAocy52YWx1ZSA9IHIpIDogdC5zZXQoZSwgciksIHI7CiAgICAgICAgICAgIH07CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkFFUyA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgYSA9IHsgMTY6IDEwLCAyNDogMTIsIDMyOiAxNCB9LAogICAgICAgICAgYyA9IFsKICAgICAgICAgICAgMSwgMiwgNCwgOCwgMTYsIDMyLCA2NCwgMTI4LCAyNywgNTQsIDEwOCwgMjE2LCAxNzEsIDc3LCAxNTQsIDQ3LCA5NCwgMTg4LCA5OSwgMTk4LCAxNTEsIDUzLCAxMDYsIDIxMiwgMTc5LAogICAgICAgICAgICAxMjUsIDI1MCwgMjM5LCAxOTcsIDE0NQogICAgICAgICAgXSwKICAgICAgICAgIHUgPSBbCiAgICAgICAgICAgIDk5LCAxMjQsIDExOSwgMTIzLCAyNDIsIDEwNywgMTExLCAxOTcsIDQ4LCAxLCAxMDMsIDQzLCAyNTQsIDIxNSwgMTcxLCAxMTgsIDIwMiwgMTMwLCAyMDEsIDEyNSwgMjUwLCA4OSwgNzEsCiAgICAgICAgICAgIDI0MCwgMTczLCAyMTIsIDE2MiwgMTc1LCAxNTYsIDE2NCwgMTE0LCAxOTIsIDE4MywgMjUzLCAxNDcsIDM4LCA1NCwgNjMsIDI0NywgMjA0LCA1MiwgMTY1LCAyMjksIDI0MSwgMTEzLAogICAgICAgICAgICAyMTYsIDQ5LCAyMSwgNCwgMTk5LCAzNSwgMTk1LCAyNCwgMTUwLCA1LCAxNTQsIDcsIDE4LCAxMjgsIDIyNiwgMjM1LCAzOSwgMTc4LCAxMTcsIDksIDEzMSwgNDQsIDI2LCAyNywgMTEwLAogICAgICAgICAgICA5MCwgMTYwLCA4MiwgNTksIDIxNCwgMTc5LCA0MSwgMjI3LCA0NywgMTMyLCA4MywgMjA5LCAwLCAyMzcsIDMyLCAyNTIsIDE3NywgOTEsIDEwNiwgMjAzLCAxOTAsIDU3LCA3NCwgNzYsCiAgICAgICAgICAgIDg4LCAyMDcsIDIwOCwgMjM5LCAxNzAsIDI1MSwgNjcsIDc3LCA1MSwgMTMzLCA2OSwgMjQ5LCAyLCAxMjcsIDgwLCA2MCwgMTU5LCAxNjgsIDgxLCAxNjMsIDY0LCAxNDMsIDE0NiwgMTU3LAogICAgICAgICAgICA1NiwgMjQ1LCAxODgsIDE4MiwgMjE4LCAzMywgMTYsIDI1NSwgMjQzLCAyMTAsIDIwNSwgMTIsIDE5LCAyMzYsIDk1LCAxNTEsIDY4LCAyMywgMTk2LCAxNjcsIDEyNiwgNjEsIDEwMCwKICAgICAgICAgICAgOTMsIDI1LCAxMTUsIDk2LCAxMjksIDc5LCAyMjAsIDM0LCA0MiwgMTQ0LCAxMzYsIDcwLCAyMzgsIDE4NCwgMjAsIDIyMiwgOTQsIDExLCAyMTksIDIyNCwgNTAsIDU4LCAxMCwgNzMsIDYsCiAgICAgICAgICAgIDM2LCA5MiwgMTk0LCAyMTEsIDE3MiwgOTgsIDE0NSwgMTQ5LCAyMjgsIDEyMSwgMjMxLCAyMDAsIDU1LCAxMDksIDE0MSwgMjEzLCA3OCwgMTY5LCAxMDgsIDg2LCAyNDQsIDIzNCwgMTAxLAogICAgICAgICAgICAxMjIsIDE3NCwgOCwgMTg2LCAxMjAsIDM3LCA0NiwgMjgsIDE2NiwgMTgwLCAxOTgsIDIzMiwgMjIxLCAxMTYsIDMxLCA3NSwgMTg5LCAxMzksIDEzOCwgMTEyLCA2MiwgMTgxLCAxMDIsCiAgICAgICAgICAgIDcyLCAzLCAyNDYsIDE0LCA5NywgNTMsIDg3LCAxODUsIDEzNCwgMTkzLCAyOSwgMTU4LCAyMjUsIDI0OCwgMTUyLCAxNywgMTA1LCAyMTcsIDE0MiwgMTQ4LCAxNTUsIDMwLCAxMzUsCiAgICAgICAgICAgIDIzMywgMjA2LCA4NSwgNDAsIDIyMywgMTQwLCAxNjEsIDEzNywgMTMsIDE5MSwgMjMwLCA2NiwgMTA0LCA2NSwgMTUzLCA0NSwgMTUsIDE3NiwgODQsIDE4NywgMjIKICAgICAgICAgIF0sCiAgICAgICAgICBsID0gWwogICAgICAgICAgICA4MiwgOSwgMTA2LCAyMTMsIDQ4LCA1NCwgMTY1LCA1NiwgMTkxLCA2NCwgMTYzLCAxNTgsIDEyOSwgMjQzLCAyMTUsIDI1MSwgMTI0LCAyMjcsIDU3LCAxMzAsIDE1NSwgNDcsIDI1NSwKICAgICAgICAgICAgMTM1LCA1MiwgMTQyLCA2NywgNjgsIDE5NiwgMjIyLCAyMzMsIDIwMywgODQsIDEyMywgMTQ4LCA1MCwgMTY2LCAxOTQsIDM1LCA2MSwgMjM4LCA3NiwgMTQ5LCAxMSwgNjYsIDI1MCwKICAgICAgICAgICAgMTk1LCA3OCwgOCwgNDYsIDE2MSwgMTAyLCA0MCwgMjE3LCAzNiwgMTc4LCAxMTgsIDkxLCAxNjIsIDczLCAxMDksIDEzOSwgMjA5LCAzNywgMTE0LCAyNDgsIDI0NiwgMTAwLCAxMzQsCiAgICAgICAgICAgIDEwNCwgMTUyLCAyMiwgMjEyLCAxNjQsIDkyLCAyMDQsIDkzLCAxMDEsIDE4MiwgMTQ2LCAxMDgsIDExMiwgNzIsIDgwLCAyNTMsIDIzNywgMTg1LCAyMTgsIDk0LCAyMSwgNzAsIDg3LAogICAgICAgICAgICAxNjcsIDE0MSwgMTU3LCAxMzIsIDE0NCwgMjE2LCAxNzEsIDAsIDE0MCwgMTg4LCAyMTEsIDEwLCAyNDcsIDIyOCwgODgsIDUsIDE4NCwgMTc5LCA2OSwgNiwgMjA4LCA0NCwgMzAsIDE0MywKICAgICAgICAgICAgMjAyLCA2MywgMTUsIDIsIDE5MywgMTc1LCAxODksIDMsIDEsIDE5LCAxMzgsIDEwNywgNTgsIDE0NSwgMTcsIDY1LCA3OSwgMTAzLCAyMjAsIDIzNCwgMTUxLCAyNDIsIDIwNywgMjA2LAogICAgICAgICAgICAyNDAsIDE4MCwgMjMwLCAxMTUsIDE1MCwgMTcyLCAxMTYsIDM0LCAyMzEsIDE3MywgNTMsIDEzMywgMjI2LCAyNDksIDU1LCAyMzIsIDI4LCAxMTcsIDIyMywgMTEwLCA3MSwgMjQxLCAyNiwKICAgICAgICAgICAgMTEzLCAyOSwgNDEsIDE5NywgMTM3LCAxMTEsIDE4MywgOTgsIDE0LCAxNzAsIDI0LCAxOTAsIDI3LCAyNTIsIDg2LCA2MiwgNzUsIDE5OCwgMjEwLCAxMjEsIDMyLCAxNTQsIDIxOSwKICAgICAgICAgICAgMTkyLCAyNTQsIDEyMCwgMjA1LCA5MCwgMjQ0LCAzMSwgMjIxLCAxNjgsIDUxLCAxMzYsIDcsIDE5OSwgNDksIDE3NywgMTgsIDE2LCA4OSwgMzksIDEyOCwgMjM2LCA5NSwgOTYsIDgxLAogICAgICAgICAgICAxMjcsIDE2OSwgMjUsIDE4MSwgNzQsIDEzLCA0NSwgMjI5LCAxMjIsIDE1OSwgMTQ3LCAyMDEsIDE1NiwgMjM5LCAxNjAsIDIyNCwgNTksIDc3LCAxNzQsIDQyLCAyNDUsIDE3NiwgMjAwLAogICAgICAgICAgICAyMzUsIDE4NywgNjAsIDEzMSwgODMsIDE1MywgOTcsIDIzLCA0MywgNCwgMTI2LCAxODYsIDExOSwgMjE0LCAzOCwgMjI1LCAxMDUsIDIwLCA5OSwgODUsIDMzLCAxMiwgMTI1CiAgICAgICAgICBdLAogICAgICAgICAgZCA9IFsKICAgICAgICAgICAgMzMyODQwMjM0MSwgNDE2ODkwNzkwOCwgNDAwMDgwNjgwOSwgNDEzNTI4NzY5MywgNDI5NDExMTc1NywgMzU5NzM2NDE1NywgMzczMTg0NTA0MSwgMjQ0NTY1NzQyOCwgMTYxMzc3MDgzMiwKICAgICAgICAgICAgMzM2MjAyMjcsIDM0NjI4ODMyNDEsIDE0NDU2Njk3NTcsIDM4OTIyNDgwODksIDMwNTA4MjE0NzQsIDEzMDMwOTYyOTQsIDM5NjcxODY1ODYsIDI0MTI0MzE5NDEsIDUyODY0NjgxMywKICAgICAgICAgICAgMjMxMTcwMjg0OCwgNDIwMjUyODEzNSwgNDAyNjIwMjY0NSwgMjk5MjIwMDE3MSwgMjM4NzAzNjEwNSwgNDIyNjg3MTMwNywgMTEwMTkwMTI5MiwgMzAxNzA2OTY3MSwgMTYwNDQ5NDA3NywKICAgICAgICAgICAgMTE2OTE0MTczOCwgNTk3NDY2MzAzLCAxNDAzMjk5MDYzLCAzODMyNzA1Njg2LCAyNjEzMTAwNjM1LCAxOTc0OTc0NDAyLCAzNzkxNTE5MDA0LCAxMDMzMDgxNzc0LCAxMjc3NTY4NjE4LAogICAgICAgICAgICAxODE1NDkyMTg2LCAyMTE4MDc0MTc3LCA0MTI2NjY4NTQ2LCAyMjExMjM2OTQzLCAxNzQ4MjUxNzQwLCAxMzY5ODEwNDIwLCAzNTIxNTA0NTY0LCA0MTkzMzgyNjY0LCAzNzk5MDg1NDU5LAogICAgICAgICAgICAyODgzMTE1MTIzLCAxNjQ3MzkxMDU5LCA3MDYwMjQ3NjcsIDEzNDQ4MDkwOCwgMjUxMjg5Nzg3NCwgMTE3NjcwNzk0MSwgMjY0Njg1MjQ0NiwgODA2ODg1NDE2LCA5MzI2MTU4NDEsCiAgICAgICAgICAgIDE2ODEwMTEzNSwgNzk4NjYxMzAxLCAyMzUzNDE1NzcsIDYwNTE2NDA4NiwgNDYxNDA2MzYzLCAzNzU2MTg4MjIxLCAzNDU0NzkwNDM4LCAxMzExMTg4ODQxLCAyMTQyNDE3NjEzLAogICAgICAgICAgICAzOTMzNTY2MzY3LCAzMDI1ODIwNDMsIDQ5NTE1ODE3NCwgMTQ3OTI4OTk3MiwgODc0MTI1ODcwLCA5MDc3NDYwOTMsIDM2OTgyMjQ4MTgsIDMwMjU4MjAzOTgsIDE1MzcyNTM2MjcsCiAgICAgICAgICAgIDI3NTY4NTg2MTQsIDE5ODM1OTMyOTMsIDMwODQzMTAxMTMsIDIxMDg5Mjg5NzQsIDEzNzg0MjkzMDcsIDM3MjI2OTk1ODIsIDE1ODAxNTA2NDEsIDMyNzQ1MTc5OSwgMjc5MDQ3ODgzNywKICAgICAgICAgICAgMzExNzUzNTU5MiwgMCwgMzI1MzU5NTQzNiwgMTA3NTg0NzI2NCwgMzgyNTAwNzY0NywgMjA0MTY4ODUyMCwgMzA1OTQ0MDYyMSwgMzU2Mzc0MzkzNCwgMjM3ODk0MzMwMiwKICAgICAgICAgICAgMTc0MDU1Mzk0NSwgMTkxNjM1Mjg0MywgMjQ4Nzg5Njc5OCwgMjU1NTEzNzIzNiwgMjk1ODU3OTk0NCwgMjI0NDk4ODc0NiwgMzE1MTAyNDIzNSwgMzMyMDgzNTg4MiwgMTMzNjU4NDkzMywKICAgICAgICAgICAgMzk5MjcxNDAwNiwgMjI1MjU1NTIwNSwgMjU4ODc1NzQ2MywgMTcxNDYzMTUwOSwgMjkzOTYzMTU2LCAyMzE5Nzk1NjYzLCAzOTI1NDczNTUyLCA2NzI0MDQ1NCwgNDI2OTc2ODU3NywKICAgICAgICAgICAgMjY4OTYxODE2MCwgMjAxNzIxMzUwOCwgNjMxMjE4MTA2LCAxMjY5MzQ0NDgzLCAyNzIzMjM4Mzg3LCAxNTcxMDA1NDM4LCAyMTUxNjk0NTI4LCA5MzI5NDQ3NCwgMTA2NjU3MDQxMywKICAgICAgICAgICAgNTYzOTc3NjYwLCAxODgyNzMyNjE2LCA0MDU5NDI4MTAwLCAxNjczMzEzNTAzLCAyMDA4NDYzMDQxLCAyOTUwMzU1NTczLCAxMTA5NDY3NDkxLCA1Mzc5MjM2MzIsIDM4NTg3NTk0NTAsCiAgICAgICAgICAgIDQyNjA2MjMxMTgsIDMyMTgyNjQ2ODUsIDIxNzc3NDgzMDAsIDQwMzQ0MjcwOCwgNjM4Nzg0MzA5LCAzMjg3MDg0MDc5LCAzMTkzOTIxNTA1LCA4OTkxMjcyMDIsIDIyODYxNzU0MzYsCiAgICAgICAgICAgIDc3MzI2NTIwOSwgMjQ3OTE0NjA3MSwgMTQzNzA1MDg2NiwgNDIzNjE0ODM1NCwgMjA1MDgzMzczNSwgMzM2MjAyMjU3MiwgMzEyNjY4MTA2MywgODQwNTA1NjQzLCAzODY2MzI1OTA5LAogICAgICAgICAgICAzMjI3NTQxNjY0LCA0Mjc5MTc3MjAsIDI2NTU5OTc5MDUsIDI3NDkxNjA1NzUsIDExNDMwODc3MTgsIDE0MTIwNDk1MzQsIDk5OTMyOTk2MywgMTkzNDk3MjE5LCAyMzUzNDE1ODgyLAogICAgICAgICAgICAzMzU0MzI0NTIxLCAxODA3MjY4MDUxLCA2NzI0MDQ1NDAsIDI4MTY0MDEwMTcsIDMxNjAzMDEyODIsIDM2OTgyMjQ5MywgMjkxNjg2NjkzNCwgMzY4ODk0Nzc3MSwgMTY4MTAxMTI4NiwKICAgICAgICAgICAgMTk0OTk3MzA3MCwgMzM2MjAyMjcwLCAyNDU0Mjc2NTcxLCAyMDE3MjEzNTQsIDEyMTAzMjgxNzIsIDMwOTMwNjA4MzYsIDI2ODAzNDEwODUsIDMxODQ3NzYwNDYsIDExMzUzODk5MzUsCiAgICAgICAgICAgIDMyOTQ3ODIxMTgsIDk2NTg0MTMyMCwgODMxODg2NzU2LCAzNTU0OTkzMjA3LCA0MDY4MDQ3MjQzLCAzNTg4NzQ1MDEwLCAyMzQ1MTkxNDkxLCAxODQ5MTEyNDA5LCAzNjY0NjA0NTk5LAogICAgICAgICAgICAyNjA1NDAyOCwgMjk4MzU4MTAyOCwgMjYyMjM3NzY4MiwgMTIzNTg1NTg0MCwgMzYzMDk4NDM3MiwgMjg5MTMzOTUxNCwgNDA5MjkxNjc0MywgMzQ4ODI3OTA3NywgMzM5NTY0Mjc5OSwKICAgICAgICAgICAgNDEwMTY2NzQ3MCwgMTIwMjYzMDM3NywgMjY4OTYxODE2LCAxODc0NTA4NTAxLCA0MDM0NDI3MDE2LCAxMjQzOTQ4Mzk5LCAxNTQ2NTMwNDE4LCA5NDEzNjYzMDgsIDE0NzA1Mzk1MDUsCiAgICAgICAgICAgIDE5NDEyMjI1OTksIDI1NDYzODY1MTMsIDM0MjEwMzg2MjcsIDI3MTU2NzE5MzIsIDM4OTk5NDYxNDAsIDEwNDIyMjY5NzcsIDI1MjE1MTcwMjEsIDE2Mzk4MjQ4NjAsIDIyNzI0OTAzMCwKICAgICAgICAgICAgMjYwNzM3NjY5LCAzNzY1NDY1MjMyLCAyMDg0NDUzOTU0LCAxOTA3NzMzOTU2LCAzNDI5MjYzMDE4LCAyNDIwNjU2MzQ0LCAxMDA4NjA2NzcsIDQxNjAxNTcxODUsIDQ3MDY4MzE1NCwKICAgICAgICAgICAgMzI2MTE2MTg5MSwgMTc4MTg3MTk2NywgMjkyNDk1OTczNywgMTc3Mzc3OTQwOCwgMzk0NjkyMjQxLCAyNTc5NjExOTkyLCA5NzQ5ODY1MzUsIDY2NDcwNjc0NSwgMzY1NTQ1OTEyOCwKICAgICAgICAgICAgMzk1ODk2MjE5NSwgNzMxNDIwODUxLCA1NzE1NDM4NTksIDM1MzAxMjM3MDcsIDI4NDk2MjY0ODAsIDEyNjc4MzExMywgODY1Mzc1Mzk5LCA3NjUxNzI2NjIsIDEwMDg2MDY3NTQsCiAgICAgICAgICAgIDM2MTIwMzYwMiwgMzM4NzU0OTk4NCwgMjI3ODQ3NzM4NSwgMjg1NzcxOTI5NSwgMTM0NDgwOTA4MCwgMjc4MjkxMjM3OCwgNTk1NDI2NzEsIDE1MDM3NjQ5ODQsIDE2MDAwODU3NiwKICAgICAgICAgICAgNDM3MDYyOTM1LCAxNzA3MDY1MzA2LCAzNjIyMjMzNjQ5LCAyMjE4OTM0OTgyLCAzNDk2NTAzNDgwLCAyMTg1MzE0NzU1LCA2OTc5MzIyMDgsIDE1MTI5MTAxOTksIDUwNDMwMzM3NywKICAgICAgICAgICAgMjA3NTE3NzE2MywgMjgyNDA5OTA2OCwgMTg0MTAxOTg2MiwgNzM5NjQ0OTg2CiAgICAgICAgICBdLAogICAgICAgICAgZiA9IFsKICAgICAgICAgICAgMjc4MTI0MjIxMSwgMjIzMDg3NzMwOCwgMjU4MjU0MjE5OSwgMjM4MTc0MDkyMywgMjM0ODc3NjgyLCAzMTg0OTQ2MDI3LCAyOTg0MTQ0NzUxLCAxNDE4ODM5NDkzLCAxMzQ4NDgxMDcyLAogICAgICAgICAgICA1MDQ2Mjk3NywgMjg0ODg3NjM5MSwgMjEwMjc5OTE0NywgNDM0NjM0NDk0LCAxNjU2MDg0NDM5LCAzODYzODQ5ODk5LCAyNTk5MTg4MDg2LCAxMTY3MDUxNDY2LCAyNjM2MDg3OTM4LAogICAgICAgICAgICAxMDgyNzcxOTEzLCAyMjgxMzQwMjg1LCAzNjgwNDg4OTAsIDM5NTQzMzQwNDEsIDMzODE1NDQ3NzUsIDIwMTA2MDU5MiwgMzk2MzcyNzI3NywgMTczOTgzODY3NiwgNDI1MDkwMzIwMiwKICAgICAgICAgICAgMzkzMDQzNTUwMywgMzIwNjc4MjEwOCwgNDE0OTQ1Mzk4OCwgMjUzMTU1MzkwNiwgMTUzNjkzNDA4MCwgMzI2MjQ5NDY0NywgNDg0NTcyNjY5LCAyOTIzMjcxMDU5LCAxNzgzMzc1Mzk4LAogICAgICAgICAgICAxNTE3MDQxMjA2LCAxMDk4NzkyNzY3LCA0OTY3NDIzMSwgMTMzNDAzNzcwOCwgMTU1MDMzMjk4MCwgNDA5ODk5MTUyNSwgODg2MTcxMTA5LCAxNTA1OTgxMjksIDI0ODEwOTA5MjksCiAgICAgICAgICAgIDE5NDA2NDIwMDgsIDEzOTg5NDQwNDksIDEwNTk3MjI1MTcsIDIwMTg1MTkwOCwgMTM4NTU0NzcxOSwgMTY5OTA5NTMzMSwgMTU4NzM5NzU3MSwgNjc0MjQwNTM2LCAyNzA0Nzc0ODA2LAogICAgICAgICAgICAyNTIzMTQ4ODUsIDMwMzk3OTU4NjYsIDE1MTkxNDI0NywgOTA4MzMzNTg2LCAyNjAyMjcwODQ4LCAxMDM4MDgyNzg2LCA2NTEwMjk0ODMsIDE3NjY3Mjk1MTEsIDM0NDc2OTgwOTgsCiAgICAgICAgICAgIDI2ODI5NDI4MzcsIDQ1NDE2Njc5MywgMjY1MjczNDMzOSwgMTk1MTkzNTUzMiwgNzc1MTY2NDkwLCA3NTg1MjA2MDMsIDMwMDA3OTA2MzgsIDQwMDQ3OTcwMTgsIDQyMTcwODYxMTIsCiAgICAgICAgICAgIDQxMzc5NjQxMTQsIDEyOTk1OTQwNDMsIDE2Mzk0MzgwMzgsIDM0NjQzNDQ0OTksIDIwNjg5ODIwNTcsIDEwNTQ3MjkxODcsIDE5MDE5OTc4NzEsIDI1MzQ2Mzg3MjQsIDQxMjEzMTgyMjcsCiAgICAgICAgICAgIDE3NTcwMDgzMzcsIDAsIDc1MDkwNjg2MSwgMTYxNDgxNTI2NCwgNTM1MDM1MTMyLCAzMzYzNDE4NTQ1LCAzOTg4MTUxMTMxLCAzMjAxNTkxOTE0LCAxMTgzNjk3ODY3LCAzNjQ3NDU0OTEwLAogICAgICAgICAgICAxMjY1Nzc2OTUzLCAzNzM0MjYwMjk4LCAzNTY2NzUwNzk2LCAzOTAzODcxMDY0LCAxMjUwMjgzNDcxLCAxODA3NDcwODAwLCA3MTc2MTUwODcsIDM4NDcyMDM0OTgsIDM4NDY5NTI5MSwKICAgICAgICAgICAgMzMxMzkxMDU5NSwgMzYxNzIxMzc3MywgMTQzMjc2MTEzOSwgMjQ4NDE3NjI2MSwgMzQ4MTk0NTQxMywgMjgzNzY5MzM3LCAxMDA5MjU5NTQsIDIxODA5Mzk2NDcsIDQwMzcwMzgxNjAsCiAgICAgICAgICAgIDExNDg3MzA0MjgsIDMxMjMwMjc4NzEsIDM4MTMzODY0MDgsIDQwODc1MDExMzcsIDQyNjc1NDk2MDMsIDMyMjk2MzA1MjgsIDIzMTU2MjAyMzksIDI5MDY2MjQ2NTgsIDMxNTYzMTk2NDUsCiAgICAgICAgICAgIDEyMTUzMTM5NzYsIDgyOTY2MDA1LCAzNzQ3ODU1NTQ4LCAzMjQ1ODQ4MjQ2LCAxOTc0NDU5MDk4LCAxNjY1Mjc4MjQxLCA4MDc0MDc2MzIsIDQ1MTI4MDg5NSwgMjUxNTI0MDgzLAogICAgICAgICAgICAxODQxMjg3ODkwLCAxMjgzNTc1MjQ1LCAzMzcxMjAyNjgsIDg5MTY4NzY5OSwgODAxMzY5MzI0LCAzNzg3MzQ5ODU1LCAyNzIxNDIxMjA3LCAzNDMxNDgyNDM2LCA5NTkzMjE4NzksCiAgICAgICAgICAgIDE0NjkzMDE5NTYsIDQwNjU2OTk3NTEsIDIxOTc1ODU1MzQsIDExOTkxOTM0MDUsIDI4OTg4MTQwNTIsIDM4ODc3NTA0OTMsIDcyNDcwMzUxMywgMjUxNDkwODAxOSwgMjY5Njk2MjE0NCwKICAgICAgICAgICAgMjU1MTgwODM4NSwgMzUxNjgxMzEzNSwgMjE0MTQ0NTM0MCwgMTcxNTc0MTIxOCwgMjExOTQ0NTAzNCwgMjg3MjgwNzU2OCwgMjE5ODU3MTE0NCwgMzM5ODE5MDY2MiwgNzAwOTY4Njg2LAogICAgICAgICAgICAzNTQ3MDUyMjE2LCAxMDA5MjU5NTQwLCAyMDQxMDQ0NzAyLCAzODAzOTk1NzQyLCA0ODc5ODM4ODMsIDE5OTExMDU0OTksIDEwMDQyNjU2OTYsIDE0NDk0MDcwMjYsIDEzMTYyMzk5MzAsCiAgICAgICAgICAgIDUwNDYyOTc3MCwgMzY4Mzc5NzMyMSwgMTY4NTYwMTM0LCAxODE2NjY3MTcyLCAzODM3Mjg3NTE2LCAxNTcwNzUxMTcwLCAxODU3OTM0MjkxLCA0MDE0MTg5NzQwLCAyNzk3ODg4MDk4LAogICAgICAgICAgICAyODIyMzQ1MTA1LCAyNzU0NzEyOTgxLCA5MzY2MzM1NzIsIDIzNDc5MjM4MzMsIDg1Mjg3OTMzNSwgMTEzMzIzNDM3NiwgMTUwMDM5NTMxOSwgMzA4NDU0NTM4OSwgMjM0ODkxMjAxMywKICAgICAgICAgICAgMTY4OTM3NjIxMywgMzUzMzQ1OTAyMiwgMzc2MjkyMzk0NSwgMzAzNDA4MjQxMiwgNDIwNTU5ODI5NCwgMTMzNDI4NDY4LCA2MzQzODMwODIsIDI5NDkyNzcwMjksIDIzOTgzODY4MTAsCiAgICAgICAgICAgIDM5MTM3ODkxMDIsIDQwMzcwMzgxNiwgMzU4MDg2OTMwNiwgMjI5NzQ2MDg1NiwgMTg2NzEzMDE0OSwgMTkxODY0Mzc1OCwgNjA3NjU2OTg4LCA0MDQ5MDUzMzUwLCAzMzQ2MjQ4ODg0LAogICAgICAgICAgICAxMzY4OTAxMzE4LCA2MDA1NjU5OTIsIDIwOTA5ODI4NzcsIDI2MzI0Nzk4NjAsIDU1NzcxOTMyNywgMzcxNzYxNDQxMSwgMzY5NzM5MzA4NSwgMjI0OTAzNDYzNSwgMjIzMjM4ODIzNCwKICAgICAgICAgICAgMjQzMDYyNzk1MiwgMTExNTQzODY1NCwgMzI5NTc4NjQyMSwgMjg2NTUyMjI3OCwgMzYzMzMzNDM0NCwgODQyODAwNjcsIDMzMDI3ODMwLCAzMDM4Mjg0OTQsIDI3NDc0MjUxMjEsCiAgICAgICAgICAgIDE2MDA3OTU5NTcsIDQxODg5NTI0MDcsIDM0OTY1ODk3NTMsIDI0MzQyMzgwODYsIDE0ODY0NzE2MTcsIDY1ODExOTk2NSwgMzEwNjM4MTQ3MCwgOTUzODAzMjMzLCAzMzQyMzE4MDAsCiAgICAgICAgICAgIDMwMDU5Nzg3NzYsIDg1Nzg3MDYwOSwgMzE1MTEyODkzNywgMTg5MDE3OTU0NSwgMjI5ODk3MzgzOCwgMjgwNTE3NTQ0NCwgMzA1NjQ0MjI2NywgNTc0MzY1MjE0LCAyNDUwODg0NDg3LAogICAgICAgICAgICA1NTAxMDM1MjksIDEyMzM2MzcwNzAsIDQyODkzNTMwNDUsIDIwMTg1MTkwODAsIDIwNTc2OTExMDMsIDIzOTkzNzQ0NzYsIDQxNjY2MjM2NDksIDIxNDgxMDg2ODEsIDM4NzU4MzI0NSwKICAgICAgICAgICAgMzY2NDEwMTMxMSwgODM2MjMyOTM0LCAzMzMwNTU2NDgyLCAzMTAwNjY1OTYwLCAzMjgwMDkzNTA1LCAyOTU1NTE2MzEzLCAyMDAyMzk4NTA5LCAyODcxODI2MDcsIDM0MTM4ODEwMDgsCiAgICAgICAgICAgIDQyMzg4OTAwNjgsIDM1OTc1MTU3MDcsIDk3NTk2Nzc2NgogICAgICAgICAgXSwKICAgICAgICAgIGggPSBbCiAgICAgICAgICAgIDE2NzE4MDg2MTEsIDIwODkwODkxNDgsIDIwMDY1NzY3NTksIDIwNzI5MDEyNDMsIDQwNjEwMDM3NjIsIDE4MDc2MDMzMDcsIDE4NzM5Mjc3OTEsIDMzMTA2NTM4OTMsIDgxMDU3Mzg3MiwKICAgICAgICAgICAgMTY5NzQzMzcsIDE3MzkxODE2NzEsIDcyOTYzNDM0NywgNDI2MzExMDY1NCwgMzYxMzU3MDUxOSwgMjg4Mzk5NzA5OSwgMTk4OTg2NDU2NiwgMzM5MzU1NjQyNiwgMjE5MTMzNTI5OCwKICAgICAgICAgICAgMzM3NjQ0OTk5MywgMjEwNjA2MzQ4NSwgNDE5NTc0MTY5MCwgMTUwODYxODg0MSwgMTIwNDM5MTQ5NSwgNDAyNzMxNzIzMiwgMjkxNzk0MTY3NywgMzU2MzU2NjAzNiwgMjczNDUxNDA4MiwKICAgICAgICAgICAgMjk1MTM2NjA2MywgMjYyOTc3MjE4OCwgMjc2NzY3MjIyOCwgMTkyMjQ5MTUwNiwgMzIyNzIyOTEyMCwgMzA4Mjk3NDY0NywgNDI0NjUyODUwOSwgMjQ3NzY2OTc3OSwgNjQ0NTAwNTE4LAogICAgICAgICAgICA5MTE4OTU2MDYsIDEwNjEyNTY3NjcsIDQxNDQxNjYzOTEsIDM0Mjc3NjMxNDgsIDg3ODQ3MTIyMCwgMjc4NDI1MjMyNSwgMzg0NTQ0NDA2OSwgNDA0Mzg5NzMyOSwgMTkwNTUxNzE2OSwKICAgICAgICAgICAgMzYzMTQ1OTI4OCwgODI3NTQ4MjA5LCAzNTY0NjEwNzcsIDY3ODk3MzQ4LCAzMzQ0MDc4Mjc5LCA1OTM4Mzk2NTEsIDMyNzc3NTc4OTEsIDQwNTI4NjkzNiwgMjUyNzE0NzkyNiwKICAgICAgICAgICAgODQ4NzE2ODUsIDI1OTU1NjU0NjYsIDExODAzMzkyNywgMzA1NTM4MDY2LCAyMTU3NjQ4NzY4LCAzNzk1NzA1ODI2LCAzOTQ1MTg4ODQzLCA2NjEyMTI3MTEsIDI5OTk4MTIwMTgsCiAgICAgICAgICAgIDE5NzM0MTQ1MTcsIDE1Mjc2OTAzMywgMjIwODE3NzUzOSwgNzQ1ODIyMjUyLCA0MzkyMzU2MTAsIDQ1NTk0NzgwMywgMTg1NzIxNTU5OCwgMTUyNTU5MzE3OCwgMjcwMDgyNzU1MiwKICAgICAgICAgICAgMTM5MTg5NTYzNCwgOTk0OTMyMjgzLCAzNTk2NzI4Mjc4LCAzMDE2NjU0MjU5LCA2OTU5NDc4MTcsIDM4MTI1NDgwNjcsIDc5NTk1ODgzMSwgMjIyNDQ5MzQ0NCwgMTQwODYwNzgyNywKICAgICAgICAgICAgMzUxMzMwMTQ1NywgMCwgMzk3OTEzMzQyMSwgNTQzMTc4Nzg0LCA0MjI5OTQ4NDEyLCAyOTgyNzA1NTg1LCAxNTQyMzA1MzcxLCAxNzkwODkxMTE0LCAzNDEwMzk4NjY3LAogICAgICAgICAgICAzMjAxOTE4OTEwLCA5NjEyNDU3NTMsIDEyNTYxMDA5MzgsIDEyODkwMDEwMzYsIDE0OTE2NDQ1MDQsIDM0Nzc3Njc2MzEsIDM0OTY3MjEzNjAsIDQwMTI1NTc4MDcsIDI4NjcxNTQ4NTgsCiAgICAgICAgICAgIDQyMTI1ODM5MzEsIDExMzcwMTg0MzUsIDEzMDU5NzUzNzMsIDg2MTIzNDczOSwgMjI0MTA3MzU0MSwgMTE3MTIyOTI1MywgNDE3ODYzNTI1NywgMzM5NDg2NzQsIDIxMzkyMjU3MjcsCiAgICAgICAgICAgIDEzNTc5NDY5NjAsIDEwMTExMjAxODgsIDI2Nzk3NzY2NzEsIDI4MzM0NjgzMjgsIDEzNzQ5MjEyOTcsIDI3NTEzNTYzMjMsIDEwODYzNTc1NjgsIDI0MDgxODcyNzksIDI0NjA4Mjc1MzgsCiAgICAgICAgICAgIDI2NDYzNTIyODUsIDk0NDI3MTQxNiwgNDExMDc0MjAwNSwgMzE2ODc1NjY2OCwgMzA2NjEzMjQwNiwgMzY2NTE0NTgxOCwgNTYwMTUzMTIxLCAyNzE1ODkzOTIsIDQyNzk5NTI4OTUsCiAgICAgICAgICAgIDQwNzc4NDYwMDMsIDM1MzA0MDc4OTAsIDM0NDQzNDMyNDUsIDIwMjY0MzQ2OCwgMzIyMjUwMjU5LCAzOTYyNTUzMzI0LCAxNjA4NjI5ODU1LCAyNTQzOTkwMTY3LCAxMTU0MjU0OTE2LAogICAgICAgICAgICAzODk2MjMzMTksIDMyOTQwNzM3OTYsIDI4MTc2NzY3MTEsIDIxMjI1MTM1MzQsIDEwMjgwOTQ1MjUsIDE2ODkwNDUwOTIsIDE1NzU0Njc2MTMsIDQyMjI2MTI3MywgMTkzOTIwMzY5OSwKICAgICAgICAgICAgMTYyMTE0Nzc0NCwgMjE3NDIyODg2NSwgMTMzOTEzNzYxNSwgMzY5OTM1MjU0MCwgNTc3MTI3NDU4LCA3MTI5MjIxNTQsIDI0MjcxNDEwMDgsIDIyOTAyODk1NDQsIDExODc2NzkzMDIsCiAgICAgICAgICAgIDM5OTU3MTU1NjYsIDMxMDA4NjM0MTYsIDMzOTQ4Njc0MCwgMzczMjUxNDc4MiwgMTU5MTkxNzY2MiwgMTg2NDU1NTYzLCAzNjgxOTg4MDU5LCAzNzYyMDE5Mjk2LCA4NDQ1MjI1NDYsCiAgICAgICAgICAgIDk3ODIyMDA5MCwgMTY5NzQzMzcwLCAxMjM5MTI2NjAxLCAxMDEzMjE3MzQsIDYxMTA3NjEzMiwgMTU1ODQ5MzI3NiwgMzI2MDkxNTY1MCwgMzU0NzI1MDEzMSwgMjkwMTM2MTU4MCwKICAgICAgICAgICAgMTY1NTA5NjQxOCwgMjQ0MzcyMTEwNSwgMjUxMDU2NTc4MSwgMzgyODg2Mzk3MiwgMjAzOTIxNDcxMywgMzg3ODg2ODQ1NSwgMzM1OTg2OTg5NiwgOTI4NjA3Nzk5LCAxODQwNzY1NTQ5LAogICAgICAgICAgICAyMzc0NzYyODkzLCAzNTgwMTQ2MTMzLCAxMzIyNDI1NDIyLCAyODUwMDQ4NDI1LCAxODIzNzkxMjEyLCAxNDU5MjY4Njk0LCA0MDk0MTYxOTA4LCAzOTI4MzQ2NjAyLCAxNzA2MDE5NDI5LAogICAgICAgICAgICAyMDU2MTg5MDUwLCAyOTM0NTIzODIyLCAxMzU3OTQ2OTYsIDMxMzQ1NDk5NDYsIDIwMjIyNDAzNzYsIDYyODA1MDQ2OSwgNzc5MjQ2NjM4LCA0NzIxMzU3MDgsIDI4MDA4MzQ0NzAsCiAgICAgICAgICAgIDMwMzI5NzAxNjQsIDMzMjcyMzYwMzgsIDM4OTQ2NjAwNzIsIDM3MTU5MzI2MzcsIDE5NTY0NDAxODAsIDUyMjI3MjI4NywgMTI3MjgxMzEzMSwgMzE4NTMzNjc2NSwgMjM0MDgxODMxNSwKICAgICAgICAgICAgMjMyMzk3NjA3NCwgMTg4ODU0MjgzMiwgMTA0NDU0NDU3NCwgMzA0OTU1MDI2MSwgMTcyMjQ2OTQ3OCwgMTIyMjE1MjI2NCwgNTA2NjA4NjcsIDQxMjczMjQxNTAsIDIzNjA2Nzg1NCwKICAgICAgICAgICAgMTYzODEyMjA4MSwgODk1NDQ1NTU3LCAxNDc1OTgwODg3LCAzMTE3NDQzNTEzLCAyMjU3NjU1Njg2LCAzMjQzODA5MjE3LCA0ODkxMTAwNDUsIDI2NjI5MzQ0MzAsIDM3Nzg1OTkzOTMsCiAgICAgICAgICAgIDQxNjIwNTUxNjAsIDI1NjE4Nzg5MzYsIDI4ODU2MzcyOSwgMTc3MzkxNjc3NywgMzY0ODAzOTM4NSwgMjM5MTM0NTAzOCwgMjQ5Mzk4NTY4NCwgMjYxMjQwNzcwNywgNTA1NTYwMDk0LAogICAgICAgICAgICAyMjc0NDk3OTI3LCAzOTExMjQwMTY5LCAzNDYwOTI1MzkwLCAxNDQyODE4NjQ1LCA2Nzg5NzM0ODAsIDM3NDkzNTcwMjMsIDIzNTgxODI3OTYsIDI3MTc0MDc2NDksIDIzMDY4Njk2NDEsCiAgICAgICAgICAgIDIxOTYxNzgwNSwgMzIxODc2MTE1MSwgMzg2MjAyNjIxNCwgMTEyMDMwNjI0MiwgMTc1Njk0MjQ0MCwgMTEwMzMzMTkwNSwgMjU3ODQ1OTAzMywgNzYyNzk2NTg5LCAyNTI3ODAwNDcsCiAgICAgICAgICAgIDI5NjYxMjU0ODgsIDE0MjU4NDQzMDgsIDMxNTEzOTIxODcsIDM3MjkxMTEyNgogICAgICAgICAgXSwKICAgICAgICAgIGcgPSBbCiAgICAgICAgICAgIDE2Njc0NzQ4ODYsIDIwODg1MzUyODgsIDIwMDQzMjY4OTQsIDIwNzE2OTQ4MzgsIDQwNzU5NDk1NjcsIDE4MDIyMjMwNjIsIDE4Njk1OTEwMDYsIDMzMTgwNDM3OTMsIDgwODQ3MjY3MiwKICAgICAgICAgICAgMTY4NDM1MjIsIDE3MzQ4NDY5MjYsIDcyNDI3MDQyMiwgNDI3ODA2NTYzOSwgMzYyMTIxNjk0OSwgMjg4MDE2OTU0OSwgMTk4NzQ4NDM5NiwgMzQwMjI1MzcxMSwgMjE4OTU5Nzk4MywKICAgICAgICAgICAgMzM4NTQwOTY3MywgMjEwNTM3ODgxMCwgNDIxMDY5MzYxNSwgMTQ5OTA2NTI2NiwgMTE5NTg4Njk5MCwgNDA0MjI2MzU0NywgMjkxMzg1NjU3NywgMzU3MDY4OTk3MSwgMjcyODU5MDY4NywKICAgICAgICAgICAgMjk0NzU0MTU3MywgMjYyNzUxODI0MywgMjc2MjI3NDY0MywgMTkyMDExMjM1NiwgMzIzMzgzMTgzNSwgMzA4MjI3MzM5NywgNDI2MTIyMzY0OSwgMjQ3NTkyOTE0OSwgNjQwMDUxNzg4LAogICAgICAgICAgICA5MDk1MzE3NTYsIDEwNjExMTAxNDIsIDQxNjAxNjA1MDEsIDM0MzU5NDE3NjMsIDg3NTg0Njc2MCwgMjc3OTExNjYyNSwgMzg1NzAwMzcyOSwgNDA1OTEwNTUyOSwgMTkwMzI2ODgzNCwKICAgICAgICAgICAgMzYzODA2NDA0MywgODI1MzE2MTk0LCAzNTM3MTM5NjIsIDY3Mzc0MDg4LCAzMzUxNzI4Nzg5LCA1ODk1MjIyNDYsIDMyODQzNjA4NjEsIDQwNDIzNjMzNiwgMjUyNjQ1NDA3MSwKICAgICAgICAgICAgODQyMTc2MTAsIDI1OTM4MzAxOTEsIDExNzkwMTU4MiwgMzAzMTgzMzk2LCAyMTU1OTExOTYzLCAzODA2NDc3NzkxLCAzOTU4MDU2NjUzLCA2NTY4OTQyODYsIDI5OTgwNjI0NjMsCiAgICAgICAgICAgIDE5NzA2NDI5MjIsIDE1MTU5MTY5OCwgMjIwNjQ0MDk4OSwgNzQxMTEwODcyLCA0Mzc5MjMzODAsIDQ1NDc2NTg3OCwgMTg1Mjc0ODUwOCwgMTUxNTkwODc4OCwgMjY5NDkwNDY2NywKICAgICAgICAgICAgMTM4MTE2ODgwNCwgOTkzNzQyMTk4LCAzNjA0MzczOTQzLCAzMDE0OTA1NDY5LCA2OTA1ODQ0MDIsIDM4MjMzMjA3OTcsIDc5MTYzODM2NiwgMjIyMzI4MTkzOSwgMTM5ODAxMTMwMiwKICAgICAgICAgICAgMzUyMDE2MTk3NywgMCwgMzk5MTc0MzY4MSwgNTM4OTkyNzA0LCA0MjQ0MzgxNjY3LCAyOTgxMjE4NDI1LCAxNTMyNzUxMjg2LCAxNzg1MzgwNTY0LCAzNDE5MDk2NzE3LAogICAgICAgICAgICAzMjAwMTc4NTM1LCA5NjAwNTYxNzgsIDEyNDY0MjA2MjgsIDEyODAxMDM1NzYsIDE0ODIyMjE3NDQsIDM0ODY0Njg3NDEsIDM1MDMzMTk5OTUsIDQwMjU0Mjg2NzcsIDI4NjMzMjY1NDMsCiAgICAgICAgICAgIDQyMjc1MzY2MjEsIDExMjg1MTQ5NTAsIDEyOTY5NDcwOTgsIDg1OTAwMjIxNCwgMjI0MDEyMzkyMSwgMTE2MjIwMzAxOCwgNDE5Mzg0OTU3NywgMzM2ODcwNDQsIDIxMzkwNjI3ODIsCiAgICAgICAgICAgIDEzNDc0ODE3NjAsIDEwMTA1ODI2NDgsIDI2NzgwNDUyMjEsIDI4Mjk2NDA1MjMsIDEzNjQzMjUyODIsIDI3NDU0MzM2OTMsIDEwNzc5ODU0MDgsIDI0MDg1NDg4NjksIDI0NTkwODYxNDMsCiAgICAgICAgICAgIDI2NDQzNjAyMjUsIDk0MzIxMjY1NiwgNDEyNjQ3NTUwNSwgMzE2NjQ5NDU2MywgMzA2NTQzMDM5MSwgMzY3MTc1MDA2MywgNTU1ODM2MjI2LCAyNjk0OTYzNTIsIDQyOTQ5MDg2NDUsCiAgICAgICAgICAgIDQwOTI3OTI1NzMsIDM1MzcwMDYwMTUsIDM0NTI3ODM3NDUsIDIwMjExODE2OCwgMzIwMDI1ODk0LCAzOTc0OTAxNjk5LCAxNjAwMTE5MjMwLCAyNTQzMjk3MDc3LCAxMTQ1MzU5NDk2LAogICAgICAgICAgICAzODczOTc5MzQsIDMzMDEyMDE4MTEsIDI4MTI4MDE2MjEsIDIxMjIyMjAyODQsIDEwMjc0MjYxNzAsIDE2ODQzMTk0MzIsIDE1NjY0MzUyNTgsIDQyMTA3OTg1OCwgMTkzNjk1NDg1NCwKICAgICAgICAgICAgMTYxNjk0NTM0NCwgMjE3Mjc1Mzk0NSwgMTMzMDYzMTA3MCwgMzcwNTQzODExNSwgNTcyNjc5NzQ4LCA3MDc0Mjc5MjQsIDI0MjU0MDAxMjMsIDIyOTA2NDc4MTksIDExNzkwNDQ0OTIsCiAgICAgICAgICAgIDQwMDg1ODU2NzEsIDMwOTkxMjA0OTEsIDMzNjg3MDQ0MCwgMzczOTEyMjA4NywgMTU4MzI3NjczMiwgMTg1Mjc3NzE4LCAzNjg4NTkzMDY5LCAzNzcyNzkxNzcxLCA4NDIxNTk3MTYsCiAgICAgICAgICAgIDk3Njg5OTcwMCwgMTY4NDM1MjIwLCAxMjI5NTc3MTA2LCAxMDEwNTkwODQsIDYwNjM2Njc5MiwgMTU0OTU5MTczNiwgMzI2NzUxNzg1NSwgMzU1Mzg0OTAyMSwgMjg5NzAxNDU5NSwKICAgICAgICAgICAgMTY1MDYzMjM4OCwgMjQ0MjI0MjEwNSwgMjUwOTYxMjA4MSwgMzg0MDE2MTc0NywgMjAzODAwODgxOCwgMzg5MDY4ODcyNSwgMzM2ODU2NzY5MSwgOTI2Mzc0MjU0LCAxODM1OTA3MDM0LAogICAgICAgICAgICAyMzc0ODYzODczLCAzNTg3NTMxOTUzLCAxMzEzNzg4NTcyLCAyODQ2NDgyNTA1LCAxODE5MDYzNTEyLCAxNDQ4NTQwODQ0LCA0MTA5NjMzNTIzLCAzOTQxMjEzNjQ3LCAxNzAxMTYyOTU0LAogICAgICAgICAgICAyMDU0ODUyMzQwLCAyOTMwNjk4NTY3LCAxMzQ3NDgxNzYsIDMxMzI4MDY1MTEsIDIwMjExNjUyOTYsIDYyMzIxMDMxNCwgNzc0Nzk1ODY4LCA0NzE2MDYzMjgsIDI3OTU5NTg2MTUsCiAgICAgICAgICAgIDMwMzE3NDY0MTksIDMzMzQ4ODU3ODMsIDM5MDc1Mjc2MjcsIDM3MjIyODAwOTcsIDE5NTM3OTk0MDAsIDUyMjEzMzgyMiwgMTI2MzI2MzEyNiwgMzE4MzMzNjU0NSwgMjM0MTE3Njg0NSwKICAgICAgICAgICAgMjMyNDMzMzgzOSwgMTg4NjQyNTMxMiwgMTA0NDI2NzY0NCwgMzA0ODU4ODQwMSwgMTcxODAwNDQyOCwgMTIxMjczMzU4NCwgNTA1Mjk1NDIsIDQxNDMzMTc0OTUsIDIzNTgwMzE2NCwKICAgICAgICAgICAgMTYzMzc4ODg2NiwgODkyNjkwMjgyLCAxNDY1MzgzMzQyLCAzMTE1OTYyNDczLCAyMjU2OTY1OTExLCAzMjUwNjczODE3LCA0ODg0NDk4NTAsIDI2NjEyMDIyMTUsIDM3ODk2MzM3NTMsCiAgICAgICAgICAgIDQxNzcwMDc1OTUsIDI1NjAxNDQxNzEsIDI4NjMzOTg3NCwgMTc2ODUzNzA0MiwgMzY1NDkwNjAyNSwgMjM5MTcwNTg2MywgMjQ5Mjc3MDA5OSwgMjYxMDY3MzE5NywgNTA1MjkxMzI0LAogICAgICAgICAgICAyMjczODA4OTE3LCAzOTI0MzY5NjA5LCAzNDY5NjI1NzM1LCAxNDMxNjk5MzcwLCA2NzM3NDA4ODAsIDM3NTU5NjUwOTMsIDIzNTgwMjE4OTEsIDI3MTE3NDY2NDksIDIzMDc0ODk4MDEsCiAgICAgICAgICAgIDIxODk2MTY5MCwgMzIxNzAyMTU0MSwgMzg3Mzg0NTcxOSwgMTExMTY3MjQ1MiwgMTc1MTY5MzUyMCwgMTA5NDgyODkzMCwgMjU3Njk4NjE1MywgNzU3OTU0Mzk0LCAyNTI2NDU2NjIsCiAgICAgICAgICAgIDI5NjQzNzY0NDMsIDE0MTQ4NTU4NDgsIDMxNDk2NDk1MTcsIDM3MDU1NTQzNgogICAgICAgICAgXSwKICAgICAgICAgIHAgPSBbCiAgICAgICAgICAgIDEzNzQ5ODgxMTIsIDIxMTgyMTQ5OTUsIDQzNzc1NzEyMywgOTc1NjU4NjQ2LCAxMDAxMDg5OTk1LCA1MzA0MDA3NTMsIDI5MDIwODc4NTEsIDEyNzMxNjg3ODcsIDU0MDA4MDcyNSwKICAgICAgICAgICAgMjkxMDIxOTc2NiwgMjI5NTEwMTA3MywgNDExMDU2ODQ4NSwgMTM0MDQ2MzEwMCwgMzMwNzkxNjI0NywgNjQxMDI1MTUyLCAzMDQzMTQwNDk1LCAzNzM2MTY0OTM3LCA2MzI5NTM3MDMsCiAgICAgICAgICAgIDExNzI5NjcwNjQsIDE1NzY5NzY2MDksIDMyNzQ2NjcyNjYsIDIxNjkzMDMwNTgsIDIzNzAyMTM3OTUsIDE4MDkwNTQxNTAsIDU5NzI3ODQ3LCAzNjE5Mjk4NzcsIDMyMTE2MjMxNDcsCiAgICAgICAgICAgIDI1MDUyMDIxMzgsIDM1NjkyNTUyMTMsIDE0ODQwMDU4NDMsIDEyMzk0NDM3NTMsIDIzOTU1ODg2NzYsIDE5NzU2ODM0MzQsIDQxMDI5Nzc5MTIsIDI1NzI2OTcxOTUsIDY2NjQ2NDczMywKICAgICAgICAgICAgMzIwMjQzNzA0NiwgNDAzNTQ4OTA0NywgMzM3NDM2MTcwMiwgMjExMDY2NzQ0NCwgMTY3NTU3Nzg4MCwgMzg0MzY5OTA3NCwgMjUzODY4MTE4NCwgMTY0OTYzOTIzNywgMjk3NjE1MTUyMCwKICAgICAgICAgICAgMzE0NDM5NjQyMCwgNDI2OTkwNzk5NiwgNDE3ODA2MjIyOCwgMTg4Mzc5MzQ5NiwgMjQwMzcyODY2NSwgMjQ5NzYwNDc0MywgMTM4Mzg1NjMxMSwgMjg3NjQ5NDYyNywgMTkxNzUxODU2MiwKICAgICAgICAgICAgMzgxMDQ5NjM0MywgMTcxNjg5MDQxMCwgMzAwMTc1NTY1NSwgODAwNDQwODM1LCAyMjYxMDg5MTc4LCAzNTQzNTk5MjY5LCA4MDc5NjI2MTAsIDU5OTc2MjM1NCwgMzM3NzgzNjIsCiAgICAgICAgICAgIDM5Nzc2NzUzNTYsIDIzMjg4Mjg5NzEsIDI4MDk3NzExNTQsIDQwNzczODQ0MzIsIDEzMTU1NjIxNDUsIDE3MDg4NDgzMzMsIDEwMTAzOTgyOSwgMzUwOTg3MTEzNSwgMzI5OTI3ODQ3NCwKICAgICAgICAgICAgODc1NDUxMjkzLCAyNzMzODU2MTYwLCA5Mjk4NzY5OCwgMjc2NzY0NTU1NywgMTkzMTk1MDY1LCAxMDgwMDk0NjM0LCAxNTg0NTA0NTgyLCAzMTc4MTA2OTYxLCAxMDQyMzg1NjU3LAogICAgICAgICAgICAyNTMxMDY3NDUzLCAzNzExODI5NDIyLCAxMzA2OTY3MzY2LCAyNDM4MjM3NjIxLCAxOTA4Njk0Mjc3LCA2NzU1NjQ2MywgMTYxNTg2MTI0NywgNDI5NDU2MTY0LCAzNjAyNzcwMzI3LAogICAgICAgICAgICAyMzAyNjkwMjUyLCAxNzQyMzE1MTI3LCAyOTY4MDExNDUzLCAxMjY0NTQ2NjQsIDM4NzcxOTg2NDgsIDIwNDMyMTE0ODMsIDI3MDkyNjA4NzEsIDIwODQ3MDQyMzMsIDQxNjk0MDgyMDEsCiAgICAgICAgICAgIDAsIDE1OTQxNzk4NywgODQxNzM5NTkyLCA1MDQ0NTk0MzYsIDE4MTc4NjY4MzAsIDQyNDU2MTg2ODMsIDI2MDM4ODk1MCwgMTAzNDg2Nzk5OCwgOTA4OTMzNDE1LCAxNjg4MTA4NTIsCiAgICAgICAgICAgIDE3NTA5MDIzMDUsIDI2MDY0NTM5NjksIDYwNzUzMDU1NCwgMjAyMDA4NDk3LCAyNDcyMDExNTM1LCAzMDM1NTM1MDU4LCA0NjMxODAxOTAsIDIxNjAxMTcwNzEsIDE2NDE4MTYyMjYsCiAgICAgICAgICAgIDE1MTc3Njc1MjksIDQ3MDk0ODM3NCwgMzgwMTMzMjIzNCwgMzIzMTcyMjIxMywgMTAwODkxODU5NSwgMzAzNzY1Mjc3LCAyMzU0NzQxODcsIDQwNjkyNDY4OTMsIDc2Njk0NTQ2NSwKICAgICAgICAgICAgMzM3NTUzODY0LCAxNDc1NDE4NTAxLCAyOTQzNjgyMzgwLCA0MDAzMDYxMTc5LCAyNzQzMDM0MTA5LCA0MTQ0MDQ3Nzc1LCAxNTUxMDM3ODg0LCAxMTQ3NTUwNjYxLCAxNTQzMjA4NTAwLAogICAgICAgICAgICAyMzM2NDM0NTUwLCAzNDA4MTE5NTE2LCAzMDY5MDQ5OTYwLCAzMTAyMDExNzQ3LCAzNjEwMzY5MjI2LCAxMTEzODE4Mzg0LCAzMjg2NzE4MDgsIDIyMjc1NzMwMjQsIDIyMzYyMjg3MzMsCiAgICAgICAgICAgIDM1MzU0ODY0NTYsIDI5MzU1NjY4NjUsIDMzNDEzOTQyODUsIDQ5NjkwNjA1OSwgMzcwMjY2NTQ1OSwgMjI2OTA2ODYwLCAyMDA5MTk1NDcyLCA3MzMxNTY5NzIsIDI4NDI3MzcwNDksCiAgICAgICAgICAgIDI5NDkzMDY4MiwgMTIwNjQ3Nzg1OCwgMjgzNTEyMzM5NiwgMjcwMDA5OTM1NCwgMTQ1MTA0NDA1NiwgNTczODA0NzgzLCAyMjY5NzI4NDU1LCAzNjQ0Mzc5NTg1LCAyMzYyMDkwMjM4LAogICAgICAgICAgICAyNTY0MDMzMzM0LCAyODAxMTA3NDA3LCAyNzc2MjkyOTA0LCAzNjY5NDYyNTY2LCAxMDY4MzUxMzk2LCA3NDIwMzkwMTIsIDEzNTAwNzg5ODksIDE3ODQ2NjMxOTUsIDE0MTc1NjE2OTgsCiAgICAgICAgICAgIDQxMzY0NDA3NzAsIDI0MzAxMjIyMTYsIDc3NTU1MDgxNCwgMjE5Mzg2MjY0NSwgMjY3MzcwNTE1MCwgMTc3NTI3NjkyNCwgMTg3NjI0MTgzMywgMzQ3NTMxMzMzMSwgMzM2Njc1NDYxOSwKICAgICAgICAgICAgMjcwMDQwNDg3LCAzOTAyNTYzMTgyLCAzNjc4MTI0OTIzLCAzNDQxODUwMzc3LCAxODUxMzMyODUyLCAzOTY5NTYyMzY5LCAyMjAzMDMyMjMyLCAzODY4NTUyODA1LCAyODY4ODk3NDA2LAogICAgICAgICAgICA1NjYwMjE4OTYsIDQwMTExOTA1MDIsIDMxMzU3NDA4ODksIDEyNDg4MDI1MTAsIDM5MzYyOTEyODQsIDY5OTQzMjE1MCwgODMyODc3MjMxLCA3MDg3ODA4NDksIDMzMzI3NDAxNDQsCiAgICAgICAgICAgIDg5OTgzNTU4NCwgMTk1MTMxNzA0NywgNDIzNjQyOTk5MCwgMzc2NzU4Njk5MiwgODY2NjM3ODQ1LCA0MDQzNjEwMTg2LCAxMTA2MDQxNTkxLCAyMTQ0MTYxODA2LCAzOTU0NDE3MTEsCiAgICAgICAgICAgIDE5ODQ4MTI2ODUsIDExMzk3ODE3MDksIDM0MzM3MTI5ODAsIDM4MzUwMzY4OTUsIDI2NjQ1NDM3MTUsIDEyODIwNTAwNzUsIDMyNDA4OTQzOTIsIDExODEwNDUxMTksIDI2NDAyNDMyMDQsCiAgICAgICAgICAgIDI1OTY1OTE3LCA0MjAzMTgxMTcxLCA0MjExODE4Nzk4LCAzMDA5ODc5Mzg2LCAyNDYzODc5NzYyLCAzOTEwMTYxOTcxLCAxODQyNzU5NDQzLCAyNTk3ODA2NDc2LCA5MzMzMDEzNzAsCiAgICAgICAgICAgIDE1MDk0MzA0MTQsIDM5NDM5MDY0NDEsIDM0NjcxOTIzMDIsIDMwNzY2MzkwMjksIDM3NzY3Njc0NjksIDIwNTE1MTg3ODAsIDI2MzEwNjU0MzMsIDE0NDE5NTI1NzUsIDQwNDAxNjc2MSwKICAgICAgICAgICAgMTk0MjQzNTc3NSwgMTQwODc0OTAzNCwgMTYxMDQ1OTczOSwgMzc0NTM0NTMwMCwgMjAxNzc3ODU2NiwgMzQwMDUyODc2OSwgMzExMDY1MDk0MiwgOTQxODk2NzQ4LCAzMjY1NDc4NzUxLAogICAgICAgICAgICAzNzEwNDkzMzAsIDMxNjg5MzcyMjgsIDY3NTAzOTYyNywgNDI3OTA4MDI1NywgOTY3MzExNzI5LCAxMzUwNTAyMDYsIDM2MzU3MzM2NjAsIDE2ODM0MDcyNDgsIDIwNzY5MzUyNjUsCiAgICAgICAgICAgIDM1NzY4NzA1MTIsIDEyMTUwNjExMDgsIDM1MDE3NDE4OTAKICAgICAgICAgIF0sCiAgICAgICAgICBtID0gWwogICAgICAgICAgICAxMzQ3NTQ4MzI3LCAxNDAwNzgzMjA1LCAzMjczMjY3MTA4LCAyNTIwMzkzNTY2LCAzNDA5Njg1MzU1LCA0MDQ1MzgwOTMzLCAyODgwMjQwMjE2LCAyNDcxMjI0MDY3LCAxNDI4MTczMDUwLAogICAgICAgICAgICA0MTM4NTYzMTgxLCAyNDQxNjYxNTU4LCA2MzY4MTM5MDAsIDQyMzMwOTQ2MTUsIDM2MjAwMjI5ODcsIDIxNDk5ODc2NTIsIDI0MTEwMjkxNTUsIDEyMzkzMzExNjIsIDE3MzA1MjU3MjMsCiAgICAgICAgICAgIDI1NTQ3MTg3MzQsIDM3ODEwMzM2NjQsIDQ2MzQ2MTAxLCAzMTA0NjM3MjgsIDI3NDM5NDQ4NTUsIDMzMjg5NTUzODUsIDM4NzU3NzAyMDcsIDI1MDEyMTg5NzIsIDM5NTUxOTExNjIsCiAgICAgICAgICAgIDM2NjcyMTkwMzMsIDc2ODkxNzEyMywgMzU0NTc4OTQ3MywgNjkyNzA3NDMzLCAxMTUwMjA4NDU2LCAxNzg2MTAyNDA5LCAyMDI5MjkzMTc3LCAxODA1MjExNzEwLCAzNzEwMzY4MTEzLAogICAgICAgICAgICAzMDY1OTYyODMxLCA0MDE2Mzk1OTcsIDE3MjQ0NTcxMzIsIDMwMjgxNDM2NzQsIDQwOTE5ODQxMCwgMjE5NjA1MjUyOSwgMTYyMDUyOTQ1OSwgMTE2NDA3MTgwNywgMzc2OTcyMTk3NSwKICAgICAgICAgICAgMjIyNjg3NTMxMCwgNDg2NDQxMzc2LCAyNDk5MzQ4NTIzLCAxNDgzNzUzNTc2LCA0Mjg4MTk5NjUsIDIyNzQ2ODA0MjgsIDMwNzU2MzYyMTYsIDU5ODQzODg2NywgMzc5OTE0MTEyMiwKICAgICAgICAgICAgMTQ3NDUwMjU0MywgNzExMzQ5Njc1LCAxMjkxNjYxMjAsIDUzNDU4MzcwLCAyNTkyNTIzNjQzLCAyNzgyMDgyODI0LCA0MDYzMjQyMzc1LCAyOTg4Njg3MjY5LCAzMTIwNjk0MTIyLAogICAgICAgICAgICAxNTU5MDQxNjY2LCA3MzA1MTcyNzYsIDI0NjA0NDkyMDQsIDQwNDI0NTkxMjIsIDI3MDYyNzA2OTAsIDM0NDYwMDQ0NjgsIDM1NzM5NDE2OTQsIDUzMzgwNDEzMCwgMjMyODE0MzYxNCwKICAgICAgICAgICAgMjYzNzQ0MjY0MywgMjY5NTAzMzY4NSwgODM5MjI0MDMzLCAxOTczNzQ1Mzg3LCA5NTcwNTU5ODAsIDI4NTYzNDU4MzksIDEwNjg1Mjc2NywgMTM3MTM2ODk3NiwgNDE4MTU5ODYwMiwKICAgICAgICAgICAgMTAzMzI5NzE1OCwgMjkzMzczNDkxNywgMTE3OTUxMDQ2MSwgMzA0NjIwMDQ2MSwgOTEzNDE5MTcsIDE4NjI1MzQ4NjgsIDQyODQ1MDIwMzcsIDYwNTY1NzMzOSwgMjU0NzQzMjkzNywKICAgICAgICAgICAgMzQzMTU0Njk0NywgMjAwMzI5NDYyMiwgMzE4MjQ4NzYxOCwgMjI4MjE5NTMzOSwgOTU0NjY5NDAzLCAzNjgyMTkxNTk4LCAxMjAxNzY1Mzg2LCAzOTE3MjM0NzAzLCAzMzg4NTA3MTY2LAogICAgICAgICAgICAwLCAyMTk4NDM4MDIyLCAxMjExMjQ3NTk3LCAyODg3NjUxNjk2LCAxMzE1NzIzODkwLCA0MjI3NjY1NjYzLCAxNDQzODU3NzIwLCA1MDczNTg5MzMsIDY1Nzg2MTk0NSwgMTY3ODM4MTAxNywKICAgICAgICAgICAgNTYwNDg3NTkwLCAzNTE2NjE5NjA0LCA5NzU0NTE2OTQsIDI5NzAzNTYzMjcsIDI2MTMxNDUzNSwgMzUzNTA3MjkxOCwgMjY1MjYwOTQyNSwgMTMzMzgzODAyMSwgMjcyNDMyMjMzNiwKICAgICAgICAgICAgMTc2NzUzNjQ1OSwgMzcwOTM4Mzk0LCAxODI2MjExMTQsIDM4NTQ2MDYzNzgsIDExMjgwMTQ1NjAsIDQ4NzcyNTg0NywgMTg1NDY5MTk3LCAyOTE4MzUzODYzLCAzMTA2NzgwODQwLAogICAgICAgICAgICAzMzU2NzYxNzY5LCAyMjM3MTMzMDgxLCAxMjg2NTY3MTc1LCAzMTUyOTc2MzQ5LCA0MjU1MzUwNjI0LCAyNjgzNzY1MDMwLCAzMTYwMTc1MzQ5LCAzMzA5NTk0MTcxLCA4Nzg0NDMzOTAsCiAgICAgICAgICAgIDE5ODg4MzgxODUsIDM3MDQzMDA0ODYsIDE3NTY4MTg5NDAsIDE2NzMwNjE2MTcsIDM0MDMxMDA2MzYsIDI3Mjc4NjMwOSwgMTA3NTAyNTY5OCwgNTQ1NTcyMzY5LCAyMTA1ODg3MjY4LAogICAgICAgICAgICA0MTc0NTYwMDYxLCAyOTY2Nzk3MzAsIDE4NDE3Njg4NjUsIDEyNjAyMzIyMzksIDQwOTEzMjcwMjQsIDM5NjAzMDkzMzAsIDM0OTc1MDkzNDcsIDE4MTQ4MDMyMjIsIDI1NzgwMTg0ODksCiAgICAgICAgICAgIDQxOTU0NTYwNzIsIDU3NTEzODE0OCwgMzI5OTQwOTAzNiwgNDQ2NzU0ODc5LCAzNjI5NTQ2Nzk2LCA0MDExOTk2MDQ4LCAzMzQ3NTMyMTEwLCAzMjUyMjM4NTQ1LCA0MjcwNjM5Nzc4LAogICAgICAgICAgICA5MTU5ODU0MTksIDM0ODM4MjU1MzcsIDY4MTkzMzUzNCwgNjUxODY4MDQ2LCAyNzU1NjM2NjcxLCAzODI4MTAzODM3LCAyMjMzNzc1NTQsIDI2MDc0Mzk4MjAsIDE2NDk3MDQ1MTgsCiAgICAgICAgICAgIDMyNzA5Mzc4NzUsIDM5MDE4MDY3NzYsIDE1ODAwODc3OTksIDQxMTg5ODc2OTUsIDMxOTgxMTUyMDAsIDIwODczMDk0NTksIDI4NDI2Nzg1NzMsIDMwMTY2OTcxMDYsIDEwMDMwMDcxMjksCiAgICAgICAgICAgIDI4MDI4NDk5MTcsIDE4NjA3MzgxNDcsIDIwNzc5NjUyNDMsIDE2NDQzOTY3MiwgNDEwMDg3MjQ3MiwgMzIyODMzMTksIDI4MjcxNzc4ODIsIDE3MDk2MTAzNTAsIDIxMjUxMzU4NDYsCiAgICAgICAgICAgIDEzNjQyODc1MSwgMzg3NDQyODM5MiwgMzY1MjkwNDg1OSwgMzQ2MDk4NDYzMCwgMzU3MjE0NTkyOSwgMzU5MzA1NjM4MCwgMjkzOTI2NjIyNiwgODI0ODUyMjU5LCA4MTgzMjQ4ODQsCiAgICAgICAgICAgIDMyMjQ3NDA0NTQsIDkzMDM2OTIxMiwgMjgwMTU2NjQxMCwgMjk2NzUwNzE1MiwgMzU1NzA2ODQwLCAxMjU3MzA5MzM2LCA0MTQ4MjkyODI2LCAyNDMyNTY2NTYsIDc5MDA3Mzg0NiwKICAgICAgICAgICAgMjM3MzM0MDYzMCwgMTI5NjI5NzkwNCwgMTQyMjY5OTA4NSwgMzc1NjI5OTc4MCwgMzgxODgzNjQwNSwgNDU3OTkyODQwLCAzMDk5NjY3NDg3LCAyMTM1MzE5ODg5LCA3NzQyMjMxNCwKICAgICAgICAgICAgMTU2MDM4MjUxNywgMTk0NTc5ODUxNiwgNzg4MjA0MzUzLCAxNTIxNzA2NzgxLCAxMzg1MzU2MjQyLCA4NzA5MTIwODYsIDMyNTk2NTM4MywgMjM1ODk1NzkyMSwgMjA1MDQ2NjA2MCwKICAgICAgICAgICAgMjM4ODI2MDg4NCwgMjMxMzg4NDQ3NiwgNDAwNjUyMTEyNywgOTAxMjEwNTY5LCAzOTkwOTUzMTg5LCAxMDE0NjQ2NzA1LCAxNTAzNDQ5ODIzLCAxMDYyNTk3MjM1LCAyMDMxNjIxMzI2LAogICAgICAgICAgICAzMjEyMDM1ODk1LCAzOTMxMzcxNDY5LCAxNTMzMDE3NTE0LCAzNTAxNzQ1NzUsIDIyNTYwMjg4OTEsIDIxNzc1NDQxNzksIDEwNTIzMzgzNzIsIDc0MTg3Njc4OCwgMTYwNjU5MTI5NiwKICAgICAgICAgICAgMTkxNDA1MjAzNSwgMjEzNzA1MjUzLCAyMzM0NjY5ODk3LCAxMTA3MjM0MTk3LCAxODk5NjAzOTY5LCAzNzI1MDY5NDkxLCAyNjMxNDQ3NzgwLCAyNDIyNDk0OTEzLCAxNjM1NTAyOTgwLAogICAgICAgICAgICAxODkzMDIwMzQyLCAxOTUwOTAzMzg4LCAxMTIwOTc0OTM1CiAgICAgICAgICBdLAogICAgICAgICAgYiA9IFsKICAgICAgICAgICAgMjgwNzA1ODkzMiwgMTY5OTk3MDYyNSwgMjc2NDI0OTYyMywgMTU4NjkwMzU5MSwgMTgwODQ4MTE5NSwgMTE3MzQzMDE3MywgMTQ4NzY0NTk0NiwgNTk5ODQ4NjcsIDQxOTk4ODI4MDAsCiAgICAgICAgICAgIDE4NDQ4ODI4MDYsIDE5ODkyNDkyMjgsIDEyNzc1NTU5NzAsIDM2MjM2MzY5NjUsIDM0MTk5MTU1NjIsIDExNDkyNDkwNzcsIDI3NDQxMDQyOTAsIDE1MTQ3OTA1NzcsIDQ1OTc0NDY5OCwKICAgICAgICAgICAgMjQ0ODYwMzk0LCAzMjM1OTk1MTM0LCAxOTYzMTE1MzExLCA0MDI3NzQ0NTg4LCAyNTQ0MDc4MTUwLCA0MTkwNTMwNTE1LCAxNjA4OTc1MjQ3LCAyNjI3MDE2MDgyLCAyMDYyMjcwMzE3LAogICAgICAgICAgICAxNTA3NDk3Mjk4LCAyMjAwODE4ODc4LCA1Njc0OTg4NjgsIDE3NjQzMTM1NjgsIDMzNTk5MzYyMDEsIDIzMDU0NTU1NTQsIDIwMzc5NzAwNjIsIDEwNDcyMzllMywgMTkxMDMxOTAzMywKICAgICAgICAgICAgMTMzNzM3NjQ4MSwgMjkwNDAyNzI3MiwgMjg5MjQxNzMxMiwgOTg0OTA3MjE0LCAxMjQzMTEyNDE1LCA4MzA2NjE5MTQsIDg2MTk2ODIwOSwgMjEzNTI1MzU4NywgMjAxMTIxNDE4MCwKICAgICAgICAgICAgMjkyNzkzNDMxNSwgMjY4NjI1NDcyMSwgNzMxMTgzMzY4LCAxNzUwNjI2Mzc2LCA0MjQ2MzEwNzI1LCAxODIwODI0Nzk4LCA0MTcyNzYzNzcxLCAzNTQyMzMwMjI3LCA0ODM5NDgyNywKICAgICAgICAgICAgMjQwNDkwMTY2MywgMjg3MTY4MjY0NSwgNjcxNTkzMTk1LCAzMjU0OTg4NzI1LCAyMDczNzI0NjEzLCAxNDUwODUyMzksIDIyODA3OTYyMDAsIDI3Nzk5MTUxOTksIDE3OTA1NzUxMDcsCiAgICAgICAgICAgIDIxODcxMjgwODYsIDQ3MjYxNTYzMSwgMzAyOTUxMDAwOSwgNDA3NTg3NzEyNywgMzgwMjIyMjE4NSwgNDEwNzEwMTY1OCwgMzIwMTYzMTc0OSwgMTY0NjI1MjM0MCwgNDI3MDUwNzE3NCwKICAgICAgICAgICAgMTQwMjgxMTQzOCwgMTQzNjU5MDgzNSwgMzc3ODE1MTgxOCwgMzk1MDM1NTcwMiwgMzk2MzE2MTQ3NSwgNDAyMDkxMjIyNCwgMjY2Nzk5NDczNywgMjczNzkyMzY2LCAyMzMxNTkwMTc3LAogICAgICAgICAgICAxMDQ2OTk2MTMsIDk1MzQ1OTgyLCAzMTc1NTAxMjg2LCAyMzc3NDg2Njc2LCAxNTYwNjM3ODkyLCAzNTY0MDQ1MzE4LCAzNjkwNTc4NzIsIDQyMTM0NDcwNjQsIDM5MTkwNDIyMzcsCiAgICAgICAgICAgIDExMzc0Nzc5NTIsIDI2NTg2MjU0OTcsIDExMTk3Mjc4NDgsIDIzNDA5NDc4NDksIDE1MzA0NTU4MzMsIDQwMDczNjA5NjgsIDE3MjQ2NjU1NiwgMjY2OTU5OTM4LCA1MTY1NTI4MzYsIDAsCiAgICAgICAgICAgIDIyNTY3MzQ1OTIsIDM5ODA5MzE2MjcsIDE4OTAzMjgwODEsIDE5MTc3NDIxNzAsIDQyOTQ3MDQzOTgsIDk0NTE2NDE2NSwgMzU3NTUyODg3OCwgOTU4ODcxMDg1LCAzNjQ3MjEyMDQ3LAogICAgICAgICAgICAyNzg3MjA3MjYwLCAxNDIzMDIyOTM5LCA3NzU1NjIyOTQsIDE3Mzk2NTYyMDIsIDM4NzY1NTc2NTUsIDI1MzAzOTEyNzgsIDI0NDMwNTgwNzUsIDMzMTAzMjE4NTYsIDU0NzUxMjc5NiwKICAgICAgICAgICAgMTI2NTE5NTYzOSwgNDM3NjU2NTk0LCAzMTIxMjc1NTM5LCA3MTk3MDAxMjgsIDM3NjI1MDI2OTAsIDM4Nzc4MTE0NywgMjE4ODI4Mjk3LCAzMzUwMDY1ODAzLCAyODMwNzA4MTUwLAogICAgICAgICAgICAyODQ4NDYxODU0LCA0MjgxNjkyMDEsIDEyMjQ2NjE2NSwgMzcyMDA4MTA0OSwgMTYyNzIzNTE5OSwgNjQ4MDE3NjY1LCA0MTIyNzYyMzU0LCAxMDAyNzgzODQ2LCAyMTE3MzYwNjM1LAogICAgICAgICAgICA2OTU2MzQ3NTUsIDMzMzYzNTg2OTEsIDQyMzQ3MjEwMDUsIDQwNDk4NDQ0NTIsIDM3MDQyODA4ODEsIDIyMzI0MzUyOTksIDU3NDYyNDY2MywgMjg3MzQzODE0LCA2MTIyMDU4OTgsCiAgICAgICAgICAgIDEwMzk3MTcwNTEsIDg0MDAxOTcwNSwgMjcwODMyNjE4NSwgNzkzNDUxOTM0LCA4MjEyODgxMTQsIDEzOTEyMDE2NzAsIDM4MjIwOTAxNzcsIDM3NjE4NzgyNywgMzExMzg1NTM0NCwKICAgICAgICAgICAgMTIyNDM0ODA1MiwgMTY3OTk2ODIzMywgMjM2MTY5ODU1NiwgMTA1ODcwOTc0NCwgNzUyMzc1NDIxLCAyNDMxNTkwOTYzLCAxMzIxNjk5MTQ1LCAzNTE5MTQyMjAwLCAyNzM0NTkxMTc4LAogICAgICAgICAgICAxODgxMjc0NDQsIDIxNzc4Njk1NTcsIDM3MjcyMDU3NTQsIDIzODQ5MTEwMzEsIDMyMTUyMTI0NjEsIDI2NDg5NzY0NDIsIDI0NTAzNDYxMDQsIDM0MzI3MzczNzUsIDExODA4NDkyNzgsCiAgICAgICAgICAgIDMzMTU0NDIwNSwgMzEwMjI0OTE3NiwgNDE1MDE0NDU2OSwgMjk1MjEwMjU5NSwgMjE1OTk3NjI4NSwgMjQ3NDQwNDMwNCwgNzY2MDc4OTMzLCAzMTM3NzM4NjEsIDI1NzA4MzIwNDQsCiAgICAgICAgICAgIDIxMDgxMDA2MzIsIDE2NjgyMTI4OTIsIDMxNDU0NTY0NDMsIDIwMTM5MDgyNjIsIDQxODY3MjIxNywgMzA3MDM1NjYzNCwgMjU5NDczNDkyNywgMTg1MjE3MTkyNSwgMzg2NzA2MDk5MSwKICAgICAgICAgICAgMzQ3MzQxNjYzNiwgMzkwNzQ0ODU5NywgMjYxNDczNzYzOSwgOTE5NDg5MTM1LCAxNjQ5NDg2MzksIDIwOTQ0MTAxNjAsIDI5OTc4MjU5NTYsIDU5MDQyNDYzOSwgMjQ4NjIyNDU0OSwKICAgICAgICAgICAgMTcyMzg3MjY3NCwgMzE1Nzc1MDg2MiwgMzM5OTk0MTI1MCwgMzUwMTI1Mjc1MiwgMzYyNTI2ODEzNSwgMjU1NTA0ODE5NiwgMzY3MzYzNzM1NiwgMTM0MzEyNzUwMSwgNDEzMDI4MTM2MSwKICAgICAgICAgICAgMzU5OTU5NTA4NSwgMjk1Nzg1MzY3OSwgMTI5NzQwMzA1MCwgODE3ODE5MTAsIDMwNTE1OTM0MjUsIDIyODM0OTA0MTAsIDUzMjIwMTc3MiwgMTM2NzI5NTU4OSwgMzkyNjE3MDk3NCwKICAgICAgICAgICAgODk1Mjg3NjkyLCAxOTUzNzU3ODMxLCAxMDkzNTk3OTYzLCA0OTI0ODM0MzEsIDM1Mjg2MjY5MDcsIDE0NDYyNDI1NzYsIDExOTI0NTU2MzgsIDE2MzY2MDQ2MzEsIDIwOTMzNjIyNSwKICAgICAgICAgICAgMzQ0ODczNDY0LCAxMDE1NjcxNTcxLCA2Njk5NjE4OTcsIDMzNzU3NDA3NjksIDM4NTc1NzIxMjQsIDI5NzM1MzA2OTUsIDM3NDcxOTIwMTgsIDE5MzM1MzA2MTAsIDM0NjQwNDI1MTYsCiAgICAgICAgICAgIDkzNTI5Mzg5NSwgMzQ1NDY4NjE5OSwgMjg1ODExNTA2OSwgMTg2MzYzODg0NSwgMzY4MzAyMjkxNiwgNDA4NTM2OTUxOSwgMzI5MjQ0NTAzMiwgODc1MzEzMTg4LCAxMDgwMDE3NTcxLAogICAgICAgICAgICAzMjc5MDMzODg1LCA2MjE1OTE3NzgsIDEyMzM4NTY1NzIsIDI1MDQxMzAzMTcsIDI0MTk3NTQ0LCAzMDE3NjcyNzE2LCAzODM1NDg0MzQwLCAzMjQ3NDY1NTU4LCAyMjIwOTgxMTk1LAogICAgICAgICAgICAzMDYwODQ3OTIyLCAxNTUxMTI0NTg4LCAxNDYzOTk2NjAwCiAgICAgICAgICBdLAogICAgICAgICAgeSA9IFsKICAgICAgICAgICAgNDEwNDYwNTc3NywgMTA5NzE1OTU1MCwgMzk2NjczODE4LCA2NjA1MTAyNjYsIDI4NzU5NjgzMTUsIDI2Mzg2MDY2MjMsIDQyMDAxMTUxMTYsIDM4MDg2NjIzNDcsIDgyMTcxMjE2MCwKICAgICAgICAgICAgMTk4NjkxODA2MSwgMzQzMDMyMjU2OCwgMzg1NDQ4ODUsIDM4NTYxMzcyOTUsIDcxODAwMjExNywgODkzNjgxNzAyLCAxNjU0ODg2MzI1LCAyOTc1NDg0MzgyLCAzMTIyMzU4MDUzLAogICAgICAgICAgICAzOTI2ODI1MDI5LCA0Mjc0MDUzNDY5LCA3OTYxOTc1NzEsIDEyOTA4MDE3OTMsIDExODQzNDI5MjUsIDM1NTYzNjE4MzUsIDI0MDU0MjY5NDcsIDI0NTk3MzUzMTcsIDE4MzY3NzIyODcsCiAgICAgICAgICAgIDEzODE2MjAzNzMsIDMxOTYyNjc5ODgsIDE5NDgzNzM4NDgsIDM3NjQ5ODgyMzMsIDMzODUzNDUxNjYsIDMyNjM3ODU1ODksIDIzOTAzMjU0OTIsIDE0ODA0ODU3ODUsIDMxMTEyNDcxNDMsCiAgICAgICAgICAgIDM3ODAwOTc3MjYsIDIyOTMwNDUyMzIsIDU0ODE2OTQxNywgMzQ1OTk1Mzc4OSwgMzc0NjE3NTA3NSwgNDM5NDUyMzg5LCAxMzYyMzIxNTU5LCAxNDAwODQ5NzYyLCAxNjg1NTc3OTA1LAogICAgICAgICAgICAxODA2NTk5MzU1LCAyMTc0NzU0MDQ2LCAxMzcwNzM5MTMsIDEyMTQ3OTc5MzYsIDExNzQyMTUwNTUsIDM3MzE2NTQ1NDgsIDIwNzk4OTc0MjYsIDE5NDMyMTcwNjcsIDEyNTg0ODAyNDIsCiAgICAgICAgICAgIDUyOTQ4Nzg0MywgMTQzNzI4MDg3MCwgMzk0NTI2OTE3MCwgMzA0OTM5MDg5NSwgMzMxMzIxMjAzOCwgOTIzMzEzNjE5LCA2Nzk5OThlMywgMzIxNTMwNzI5OSwgNTczMjYwODIsCiAgICAgICAgICAgIDM3NzY0MjIyMSwgMzQ3NDcyOTg2NiwgMjA0MTg3NzE1OSwgMTMzMzYxOTA3LCAxNzc2NDYwMTEwLCAzNjczNDc2NDUzLCA5NjM5MjQ1NCwgODc4ODQ1OTA1LCAyODAxNjk5NTI0LAogICAgICAgICAgICA3NzcyMzE2NjgsIDQwODI0NzUxNzAsIDIzMzAwMTQyMTMsIDQxNDI2MjYyMTIsIDIyMTMyOTYzOTUsIDE2MjYzMTk0MjQsIDE5MDYyNDcyNjIsIDE4NDY1NjMyNjEsIDU2Mjc1NTkwMiwKICAgICAgICAgICAgMzcwODE3MzcxOCwgMTA0MDU1OTgzNywgMzg3MTE2Mzk4MSwgMTQxODU3MzIwMSwgMzI5NDQzMDU3NywgMTE0NTg1MzQ4LCAxMzQzNjE4OTEyLCAyNTY2NTk1NjA5LCAzMTg2MjAyNTgyLAogICAgICAgICAgICAxMDc4MTg1MDk3LCAzNjUxMDQxMTI3LCAzODk2Njg4MDQ4LCAyMzA3NjIyOTE5LCA0MjU0MDg3NDMsIDMzNzEwOTY5NTMsIDIwODEwNDg0ODEsIDExMDgzMzkwNjgsIDIyMTY2MTAyOTYsCiAgICAgICAgICAgIDAsIDIxNTYyOTkwMTcsIDczNjk3MDgwMiwgMjkyNTk2NzY2LCAxNTE3NDQwNjIwLCAyNTE2NTcyMTMsIDIyMzUwNjE3NzUsIDI5MzMyMDI0OTMsIDc1ODcyMDMxMCwgMjY1OTA1MTYyLAogICAgICAgICAgICAxNTU0MzkxNDAwLCAxNTMyMjg1MzM5LCA5MDg5OTkyMDQsIDE3NDU2NzY5MiwgMTQ3NDc2MDU5NSwgNDAwMjg2MTc0OCwgMjYxMDAxMTY3NSwgMzIzNDE1NjQxNiwgMzY5MzEyNjI0MSwKICAgICAgICAgICAgMjAwMTQzMDg3NCwgMzAzNjk5NDg0LCAyNDc4NDQzMjM0LCAyNjg3MTY1ODg4LCA1ODUxMjI2MjAsIDQ1NDQ5OTYwMiwgMTUxODQ5NzQyLCAyMzQ1MTE5MjE4LCAzMDY0NTEwNzY1LAogICAgICAgICAgICA1MTQ0NDMyODQsIDQwNDQ5ODE1OTEsIDE5NjM0MTI2NTUsIDI1ODE0NDU2MTQsIDIxMzcwNjI4MTksIDE5MzA4NTM1LCAxOTI4NzA3MTY0LCAxNzE1MTkzMTU2LCA0MjE5MzUyMTU1LAogICAgICAgICAgICAxMTI2NzkwNzk1LCA2MDAyMzUyMTEsIDM5OTI3NDIwNzAsIDM4NDEwMjQ5NTIsIDgzNjU1MzQzMSwgMTY2OTY2NDgzNCwgMjUzNTYwNDI0MywgMzMyMzAxMTIwNCwgMTI0MzkwNTQxMywKICAgICAgICAgICAgMzE0MTQwMDc4NiwgNDE4MDgwODExMCwgNjk4NDQ1MjU1LCAyNjUzODk5NTQ5LCAyOTg5NTUyNjA0LCAyMjUzNTgxMzI1LCAzMjUyOTMyNzI3LCAzMDA0NTkxMTQ3LCAxODkxMjExNjg5LAogICAgICAgICAgICAyNDg3ODEwNTc3LCAzOTE1NjUzNzAzLCA0MjM3MDgzODE2LCA0MDMwNjY3NDI0LCAyMTAwMDkwOTY2LCA4NjUxMzY0MTgsIDEyMjk4OTk2NTUsIDk1MzI3MDc0NSwgMzM5OTY3OTYyOCwKICAgICAgICAgICAgMzU1NzUwNDY2NCwgNDExODkyNTIyMiwgMjA2MTM3OTc0OSwgMzA3OTU0NjU4NiwgMjkxNTAxNzc5MSwgOTgzNDI2MDkyLCAyMDIyODM3NTg0LCAxNjA3MjQ0NjUwLCAyMTE4NTQxOTA4LAogICAgICAgICAgICAyMzY2ODgyNTUwLCAzNjM1OTk2ODE2LCA5NzI1MTI4MTQsIDMyODMwODg3NzAsIDE1Njg3MTg0OTUsIDM0OTkzMjY1NjksIDM1NzY1Mzk1MDMsIDYyMTk4MjY3MSwgMjg5NTcyMzQ2NCwKICAgICAgICAgICAgNDEwODg3OTUyLCAyNjIzNzYyMTUyLCAxMDAyMTQyNjgzLCA2NDU0MDEwMzcsIDE0OTQ4MDc2NjIsIDI1OTU2ODQ4NDQsIDEzMzU1MzU3NDcsIDI1MDcwNDAyMzAsIDQyOTMyOTU3ODYsCiAgICAgICAgICAgIDMxNjc2ODQ2NDEsIDM2NzU4NTAwNywgMzg4NTc1MDcxNCwgMTg2NTg2MjczMCwgMjY2ODIyMTY3NCwgMjk2MDk3MTMwNSwgMjc2MzE3MzY4MSwgMTA1OTI3MDk1NCwgMjc3Nzk1MjQ1NCwKICAgICAgICAgICAgMjcyNDY0Mjg2OSwgMTMyMDk1NzgxMiwgMjE5NDMxOTEwMCwgMjQyOTU5NTg3MiwgMjgxNTk1NjI3NSwgNzcwODk1MjEsIDM5NzM3NzMxMjEsIDM0NDQ1NzU4NzEsIDI0NDg4MzAyMzEsCiAgICAgICAgICAgIDEzMDU5MDY1NTAsIDQwMjEzMDg3MzksIDI4NTcxOTQ3MDAsIDI1MTY5MDE4NjAsIDM1MTgzNTg0MzAsIDE3ODczMDQ3ODAsIDc0MDI3NjQxNywgMTY5OTgzOTgxNCwgMTU5MjM5NDkwOSwKICAgICAgICAgICAgMjM1MjMwNzQ1NywgMjI3MjU1NjAyNiwgMTg4ODIxMjQzLCAxNzI5OTc3MDExLCAzNjg3OTk0MDAyLCAyNzQwODQ4NDEsIDM1OTQ5ODIyNTMsIDM2MTM0OTQ0MjYsIDI3MDE5NDk0OTUsCiAgICAgICAgICAgIDQxNjIwOTY3MjksIDMyMjczNDU3MSwgMjgzNzk2NjU0MiwgMTY0MDU3NjQzOSwgNDg0ODMwNjg5LCAxMjAyNzk3NjkwLCAzNTM3ODUyODI4LCA0MDY3NjM5MTI1LCAzNDkwNzU3MzYsCiAgICAgICAgICAgIDMzNDIzMTk0NzUsIDQxNTc0NjcyMTksIDQyNTU4MDAxNTksIDEwMzA2OTAwMTUsIDExNTUyMzc0OTYsIDI5NTE5NzEyNzQsIDE3NTc2OTE1NzcsIDYwNzM5ODk2OCwgMjczODkwNTAyNiwKICAgICAgICAgICAgNDk5MzQ3OTkwLCAzNzk0MDc4OTA4LCAxMDExNDUyNzEyLCAyMjc4ODU1NjcsIDI4MTg2NjY4MDksIDIxMzExNDM3NiwgMzAzNDg4MTI0MCwgMTQ1NTUyNTk4OCwgMzQxNDQ1MDU1NSwKICAgICAgICAgICAgODUwODE3MjM3LCAxODE3OTk4NDA4LCAzMDkyNzI2NDgwCiAgICAgICAgICBdLAogICAgICAgICAgQSA9IFsKICAgICAgICAgICAgMCwgMjM1NDc0MTg3LCA0NzA5NDgzNzQsIDMwMzc2NTI3NywgOTQxODk2NzQ4LCA5MDg5MzM0MTUsIDYwNzUzMDU1NCwgNzA4NzgwODQ5LCAxODgzNzkzNDk2LCAyMTE4MjE0OTk1LAogICAgICAgICAgICAxODE3ODY2ODMwLCAxNjQ5NjM5MjM3LCAxMjE1MDYxMTA4LCAxMTgxMDQ1MTE5LCAxNDE3NTYxNjk4LCAxNTE3NzY3NTI5LCAzNzY3NTg2OTkyLCA0MDAzMDYxMTc5LCA0MjM2NDI5OTkwLAogICAgICAgICAgICA0MDY5MjQ2ODkzLCAzNjM1NzMzNjYwLCAzNjAyNzcwMzI3LCAzMjk5Mjc4NDc0LCAzNDAwNTI4NzY5LCAyNDMwMTIyMjE2LCAyNjY0NTQzNzE1LCAyMzYyMDkwMjM4LCAyMTkzODYyNjQ1LAogICAgICAgICAgICAyODM1MTIzMzk2LCAyODAxMTA3NDA3LCAzMDM1NTM1MDU4LCAzMTM1NzQwODg5LCAzNjc4MTI0OTIzLCAzNTc2ODcwNTEyLCAzMzQxMzk0Mjg1LCAzMzc0MzYxNzAyLCAzODEwNDk2MzQzLAogICAgICAgICAgICAzOTc3Njc1MzU2LCA0Mjc5MDgwMjU3LCA0MDQzNjEwMTg2LCAyODc2NDk0NjI3LCAyNzc2MjkyOTA0LCAzMDc2NjM5MDI5LCAzMTEwNjUwOTQyLCAyNDcyMDExNTM1LCAyNjQwMjQzMjA0LAogICAgICAgICAgICAyNDAzNzI4NjY1LCAyMTY5MzAzMDU4LCAxMDAxMDg5OTk1LCA4OTk4MzU1ODQsIDY2NjQ2NDczMywgNjk5NDMyMTUwLCA1OTcyNzg0NywgMjI2OTA2ODYwLCA1MzA0MDA3NTMsCiAgICAgICAgICAgIDI5NDkzMDY4MiwgMTI3MzE2ODc4NywgMTE3Mjk2NzA2NCwgMTQ3NTQxODUwMSwgMTUwOTQzMDQxNCwgMTk0MjQzNTc3NSwgMjExMDY2NzQ0NCwgMTg3NjI0MTgzMywgMTY0MTgxNjIyNiwKICAgICAgICAgICAgMjkxMDIxOTc2NiwgMjc0MzAzNDEwOSwgMjk3NjE1MTUyMCwgMzIxMTYyMzE0NywgMjUwNTIwMjEzOCwgMjYwNjQ1Mzk2OSwgMjMwMjY5MDI1MiwgMjI2OTcyODQ1NSwgMzcxMTgyOTQyMiwKICAgICAgICAgICAgMzU0MzU5OTI2OSwgMzI0MDg5NDM5MiwgMzQ3NTMxMzMzMSwgMzg0MzY5OTA3NCwgMzk0MzkwNjQ0MSwgNDE3ODA2MjIyOCwgNDE0NDA0Nzc3NSwgMTMwNjk2NzM2NiwgMTEzOTc4MTcwOSwKICAgICAgICAgICAgMTM3NDk4ODExMiwgMTYxMDQ1OTczOSwgMTk3NTY4MzQzNCwgMjA3NjkzNTI2NSwgMTc3NTI3NjkyNCwgMTc0MjMxNTEyNywgMTAzNDg2Nzk5OCwgODY2NjM3ODQ1LCA1NjYwMjE4OTYsCiAgICAgICAgICAgIDgwMDQ0MDgzNSwgOTI5ODc2OTgsIDE5MzE5NTA2NSwgNDI5NDU2MTY0LCAzOTU0NDE3MTEsIDE5ODQ4MTI2ODUsIDIwMTc3Nzg1NjYsIDE3ODQ2NjMxOTUsIDE2ODM0MDcyNDgsCiAgICAgICAgICAgIDEzMTU1NjIxNDUsIDEwODAwOTQ2MzQsIDEzODM4NTYzMTEsIDE1NTEwMzc4ODQsIDEwMTAzOTgyOSwgMTM1MDUwMjA2LCA0Mzc3NTcxMjMsIDMzNzU1Mzg2NCwgMTA0MjM4NTY1NywKICAgICAgICAgICAgODA3OTYyNjEwLCA1NzM4MDQ3ODMsIDc0MjAzOTAxMiwgMjUzMTA2NzQ1MywgMjU2NDAzMzMzNCwgMjMyODgyODk3MSwgMjIyNzU3MzAyNCwgMjkzNTU2Njg2NSwgMjcwMDA5OTM1NCwKICAgICAgICAgICAgMzAwMTc1NTY1NSwgMzE2ODkzNzIyOCwgMzg2ODU1MjgwNSwgMzkwMjU2MzE4MiwgNDIwMzE4MTE3MSwgNDEwMjk3NzkxMiwgMzczNjE2NDkzNywgMzUwMTc0MTg5MCwgMzI2NTQ3ODc1MSwKICAgICAgICAgICAgMzQzMzcxMjk4MCwgMTEwNjA0MTU5MSwgMTM0MDQ2MzEwMCwgMTU3Njk3NjYwOSwgMTQwODc0OTAzNCwgMjA0MzIxMTQ4MywgMjAwOTE5NTQ3MiwgMTcwODg0ODMzMywgMTgwOTA1NDE1MCwKICAgICAgICAgICAgODMyODc3MjMxLCAxMDY4MzUxMzk2LCA3NjY5NDU0NjUsIDU5OTc2MjM1NCwgMTU5NDE3OTg3LCAxMjY0NTQ2NjQsIDM2MTkyOTg3NywgNDYzMTgwMTkwLCAyNzA5MjYwODcxLAogICAgICAgICAgICAyOTQzNjgyMzgwLCAzMTc4MTA2OTYxLCAzMDA5ODc5Mzg2LCAyNTcyNjk3MTk1LCAyNTM4NjgxMTg0LCAyMjM2MjI4NzMzLCAyMzM2NDM0NTUwLCAzNTA5ODcxMTM1LCAzNzQ1MzQ1MzAwLAogICAgICAgICAgICAzNDQxODUwMzc3LCAzMjc0NjY3MjY2LCAzOTEwMTYxOTcxLCAzODc3MTk4NjQ4LCA0MTEwNTY4NDg1LCA0MjExODE4Nzk4LCAyNTk3ODA2NDc2LCAyNDk3NjA0NzQzLCAyMjYxMDg5MTc4LAogICAgICAgICAgICAyMjk1MTAxMDczLCAyNzMzODU2MTYwLCAyOTAyMDg3ODUxLCAzMjAyNDM3MDQ2LCAyOTY4MDExNDUzLCAzOTM2MjkxMjg0LCAzODM1MDM2ODk1LCA0MTM2NDQwNzcwLCA0MTY5NDA4MjAxLAogICAgICAgICAgICAzNTM1NDg2NDU2LCAzNzAyNjY1NDU5LCAzNDY3MTkyMzAyLCAzMjMxNzIyMjEzLCAyMDUxNTE4NzgwLCAxOTUxMzE3MDQ3LCAxNzE2ODkwNDEwLCAxNzUwOTAyMzA1LCAxMTEzODE4Mzg0LAogICAgICAgICAgICAxMjgyMDUwMDc1LCAxNTg0NTA0NTgyLCAxMzUwMDc4OTg5LCAxNjg4MTA4NTIsIDY3NTU2NDYzLCAzNzEwNDkzMzAsIDQwNDAxNjc2MSwgODQxNzM5NTkyLCAxMDA4OTE4NTk1LAogICAgICAgICAgICA3NzU1NTA4MTQsIDU0MDA4MDcyNSwgMzk2OTU2MjM2OSwgMzgwMTMzMjIzNCwgNDAzNTQ4OTA0NywgNDI2OTkwNzk5NiwgMzU2OTI1NTIxMywgMzY2OTQ2MjU2NiwgMzM2Njc1NDYxOSwKICAgICAgICAgICAgMzMzMjc0MDE0NCwgMjYzMTA2NTQzMywgMjQ2Mzg3OTc2MiwgMjE2MDExNzA3MSwgMjM5NTU4ODY3NiwgMjc2NzY0NTU1NywgMjg2ODg5NzQwNiwgMzEwMjAxMTc0NywgMzA2OTA0OTk2MCwKICAgICAgICAgICAgMjAyMDA4NDk3LCAzMzc3ODM2MiwgMjcwMDQwNDg3LCA1MDQ0NTk0MzYsIDg3NTQ1MTI5MywgOTc1NjU4NjQ2LCA2NzUwMzk2MjcsIDY0MTAyNTE1MiwgMjA4NDcwNDIzMywKICAgICAgICAgICAgMTkxNzUxODU2MiwgMTYxNTg2MTI0NywgMTg1MTMzMjg1MiwgMTE0NzU1MDY2MSwgMTI0ODgwMjUxMCwgMTQ4NDAwNTg0MywgMTQ1MTA0NDA1NiwgOTMzMzAxMzcwLCA5NjczMTE3MjksCiAgICAgICAgICAgIDczMzE1Njk3MiwgNjMyOTUzNzAzLCAyNjAzODg5NTAsIDI1OTY1OTE3LCAzMjg2NzE4MDgsIDQ5NjkwNjA1OSwgMTIwNjQ3Nzg1OCwgMTIzOTQ0Mzc1MywgMTU0MzIwODUwMCwKICAgICAgICAgICAgMTQ0MTk1MjU3NSwgMjE0NDE2MTgwNiwgMTkwODY5NDI3NywgMTY3NTU3Nzg4MCwgMTg0Mjc1OTQ0MywgMzYxMDM2OTIyNiwgMzY0NDM3OTU4NSwgMzQwODExOTUxNiwgMzMwNzkxNjI0NywKICAgICAgICAgICAgNDAxMTE5MDUwMiwgMzc3Njc2NzQ2OSwgNDA3NzM4NDQzMiwgNDI0NTYxODY4MywgMjgwOTc3MTE1NCwgMjg0MjczNzA0OSwgMzE0NDM5NjQyMCwgMzA0MzE0MDQ5NSwgMjY3MzcwNTE1MCwKICAgICAgICAgICAgMjQzODIzNzYyMSwgMjIwMzAzMjIzMiwgMjM3MDIxMzc5NQogICAgICAgICAgXSwKICAgICAgICAgIHYgPSBbCiAgICAgICAgICAgIDAsIDE4NTQ2OTE5NywgMzcwOTM4Mzk0LCA0ODc3MjU4NDcsIDc0MTg3Njc4OCwgNjU3ODYxOTQ1LCA5NzU0NTE2OTQsIDgyNDg1MjI1OSwgMTQ4Mzc1MzU3NiwgMTQwMDc4MzIwNSwKICAgICAgICAgICAgMTMxNTcyMzg5MCwgMTE2NDA3MTgwNywgMTk1MDkwMzM4OCwgMjEzNTMxOTg4OSwgMTY0OTcwNDUxOCwgMTc2NzUzNjQ1OSwgMjk2NzUwNzE1MiwgMzE1Mjk3NjM0OSwgMjgwMTU2NjQxMCwKICAgICAgICAgICAgMjkxODM1Mzg2MywgMjYzMTQ0Nzc4MCwgMjU0NzQzMjkzNywgMjMyODE0MzYxNCwgMjE3NzU0NDE3OSwgMzkwMTgwNjc3NiwgMzgxODgzNjQwNSwgNDI3MDYzOTc3OCwgNDExODk4NzY5NSwKICAgICAgICAgICAgMzI5OTQwOTAzNiwgMzQ4MzgyNTUzNywgMzUzNTA3MjkxOCwgMzY1MjkwNDg1OSwgMjA3Nzk2NTI0MywgMTg5MzAyMDM0MiwgMTg0MTc2ODg2NSwgMTcyNDQ1NzEzMiwgMTQ3NDUwMjU0MywKICAgICAgICAgICAgMTU1OTA0MTY2NiwgMTEwNzIzNDE5NywgMTI1NzMwOTMzNiwgNTk4NDM4ODY3LCA2ODE5MzM1MzQsIDkwMTIxMDU2OSwgMTA1MjMzODM3MiwgMjYxMzE0NTM1LCA3NzQyMjMxNCwKICAgICAgICAgICAgNDI4ODE5OTY1LCAzMTA0NjM3MjgsIDM0MDk2ODUzNTUsIDMyMjQ3NDA0NTQsIDM3MTAzNjgxMTMsIDM1OTMwNTYzODAsIDM4NzU3NzAyMDcsIDM5NjAzMDkzMzAsIDQwNDUzODA5MzMsCiAgICAgICAgICAgIDQxOTU0NTYwNzIsIDI0NzEyMjQwNjcsIDI1NTQ3MTg3MzQsIDIyMzcxMzMwODEsIDIzODgyNjA4ODQsIDMyMTIwMzU4OTUsIDMwMjgxNDM2NzQsIDI4NDI2Nzg1NzMsIDI3MjQzMjIzMzYsCiAgICAgICAgICAgIDQxMzg1NjMxODEsIDQyNTUzNTA2MjQsIDM3Njk3MjE5NzUsIDM5NTUxOTExNjIsIDM2NjcyMTkwMzMsIDM1MTY2MTk2MDQsIDM0MzE1NDY5NDcsIDMzNDc1MzIxMTAsIDI5MzM3MzQ5MTcsCiAgICAgICAgICAgIDI3ODIwODI4MjQsIDMwOTk2Njc0ODcsIDMwMTY2OTcxMDYsIDIxOTYwNTI1MjksIDIzMTM4ODQ0NzYsIDI0OTkzNDg1MjMsIDI2ODM3NjUwMzAsIDExNzk1MTA0NjEsIDEyOTYyOTc5MDQsCiAgICAgICAgICAgIDEzNDc1NDgzMjcsIDE1MzMwMTc1MTQsIDE3ODYxMDI0MDksIDE2MzU1MDI5ODAsIDIwODczMDk0NTksIDIwMDMyOTQ2MjIsIDUwNzM1ODkzMywgMzU1NzA2ODQwLCAxMzY0Mjg3NTEsCiAgICAgICAgICAgIDUzNDU4MzcwLCA4MzkyMjQwMzMsIDk1NzA1NTk4MCwgNjA1NjU3MzM5LCA3OTAwNzM4NDYsIDIzNzMzNDA2MzAsIDIyNTYwMjg4OTEsIDI2MDc0Mzk4MjAsIDI0MjI0OTQ5MTMsCiAgICAgICAgICAgIDI3MDYyNzA2OTAsIDI4NTYzNDU4MzksIDMwNzU2MzYyMTYsIDMxNjAxNzUzNDksIDM1NzM5NDE2OTQsIDM3MjUwNjk0OTEsIDMyNzMyNjcxMDgsIDMzNTY3NjE3NjksIDQxODE1OTg2MDIsCiAgICAgICAgICAgIDQwNjMyNDIzNzUsIDQwMTE5OTYwNDgsIDM4MjgxMDM4MzcsIDEwMzMyOTcxNTgsIDkxNTk4NTQxOSwgNzMwNTE3Mjc2LCA1NDU1NzIzNjksIDI5NjY3OTczMCwgNDQ2NzU0ODc5LAogICAgICAgICAgICAxMjkxNjYxMjAsIDIxMzcwNTI1MywgMTcwOTYxMDM1MCwgMTg2MDczODE0NywgMTk0NTc5ODUxNiwgMjAyOTI5MzE3NywgMTIzOTMzMTE2MiwgMTEyMDk3NDkzNSwgMTYwNjU5MTI5NiwKICAgICAgICAgICAgMTQyMjY5OTA4NSwgNDE0ODI5MjgyNiwgNDIzMzA5NDYxNSwgMzc4MTAzMzY2NCwgMzkzMTM3MTQ2OSwgMzY4MjE5MTU5OCwgMzQ5NzUwOTM0NywgMzQ0NjAwNDQ2OCwgMzMyODk1NTM4NSwKICAgICAgICAgICAgMjkzOTI2NjIyNiwgMjc1NTYzNjY3MSwgMzEwNjc4MDg0MCwgMjk4ODY4NzI2OSwgMjE5ODQzODAyMiwgMjI4MjE5NTMzOSwgMjUwMTIxODk3MiwgMjY1MjYwOTQyNSwgMTIwMTc2NTM4NiwKICAgICAgICAgICAgMTI4NjU2NzE3NSwgMTM3MTM2ODk3NiwgMTUyMTcwNjc4MSwgMTgwNTIxMTcxMCwgMTYyMDUyOTQ1OSwgMjEwNTg4NzI2OCwgMTk4ODgzODE4NSwgNTMzODA0MTMwLCAzNTAxNzQ1NzUsCiAgICAgICAgICAgIDE2NDQzOTY3MiwgNDYzNDYxMDEsIDg3MDkxMjA4NiwgOTU0NjY5NDAzLCA2MzY4MTM5MDAsIDc4ODIwNDM1MywgMjM1ODk1NzkyMSwgMjI3NDY4MDQyOCwgMjU5MjUyMzY0MywKICAgICAgICAgICAgMjQ0MTY2MTU1OCwgMjY5NTAzMzY4NSwgMjg4MDI0MDIxNiwgMzA2NTk2MjgzMSwgMzE4MjQ4NzYxOCwgMzU3MjE0NTkyOSwgMzc1NjI5OTc4MCwgMzI3MDkzNzg3NSwgMzM4ODUwNzE2NiwKICAgICAgICAgICAgNDE3NDU2MDA2MSwgNDA5MTMyNzAyNCwgNDAwNjUyMTEyNywgMzg1NDYwNjM3OCwgMTAxNDY0NjcwNSwgOTMwMzY5MjEyLCA3MTEzNDk2NzUsIDU2MDQ4NzU5MCwgMjcyNzg2MzA5LAogICAgICAgICAgICA0NTc5OTI4NDAsIDEwNjg1Mjc2NywgMjIzMzc3NTU0LCAxNjc4MzgxMDE3LCAxODYyNTM0ODY4LCAxOTE0MDUyMDM1LCAyMDMxNjIxMzI2LCAxMjExMjQ3NTk3LCAxMTI4MDE0NTYwLAogICAgICAgICAgICAxNTgwMDg3Nzk5LCAxNDI4MTczMDUwLCAzMjI4MzMxOSwgMTgyNjIxMTE0LCA0MDE2Mzk1OTcsIDQ4NjQ0MTM3NiwgNzY4OTE3MTIzLCA2NTE4NjgwNDYsIDEwMDMwMDcxMjksCiAgICAgICAgICAgIDgxODMyNDg4NCwgMTUwMzQ0OTgyMywgMTM4NTM1NjI0MiwgMTMzMzgzODAyMSwgMTE1MDIwODQ1NiwgMTk3Mzc0NTM4NywgMjEyNTEzNTg0NiwgMTY3MzA2MTYxNywgMTc1NjgxODk0MCwKICAgICAgICAgICAgMjk3MDM1NjMyNywgMzEyMDY5NDEyMiwgMjgwMjg0OTkxNywgMjg4NzY1MTY5NiwgMjYzNzQ0MjY0MywgMjUyMDM5MzU2NiwgMjMzNDY2OTg5NywgMjE0OTk4NzY1MiwgMzkxNzIzNDcwMywKICAgICAgICAgICAgMzc5OTE0MTEyMiwgNDI4NDUwMjAzNywgNDEwMDg3MjQ3MiwgMzMwOTU5NDE3MSwgMzQ2MDk4NDYzMCwgMzU0NTc4OTQ3MywgMzYyOTU0Njc5NiwgMjA1MDQ2NjA2MCwgMTg5OTYwMzk2OSwKICAgICAgICAgICAgMTgxNDgwMzIyMiwgMTczMDUyNTcyMywgMTQ0Mzg1NzcyMCwgMTU2MDM4MjUxNywgMTA3NTAyNTY5OCwgMTI2MDIzMjIzOSwgNTc1MTM4MTQ4LCA2OTI3MDc0MzMsIDg3ODQ0MzM5MCwKICAgICAgICAgICAgMTA2MjU5NzIzNSwgMjQzMjU2NjU2LCA5MTM0MTkxNywgNDA5MTk4NDEwLCAzMjU5NjUzODMsIDM0MDMxMDA2MzYsIDMyNTIyMzg1NDUsIDM3MDQzMDA0ODYsIDM2MjAwMjI5ODcsCiAgICAgICAgICAgIDM4NzQ0MjgzOTIsIDM5OTA5NTMxODksIDQwNDI0NTkxMjIsIDQyMjc2NjU2NjMsIDI0NjA0NDkyMDQsIDI1NzgwMTg0ODksIDIyMjY4NzUzMTAsIDI0MTEwMjkxNTUsIDMxOTgxMTUyMDAsCiAgICAgICAgICAgIDMwNDYyMDA0NjEsIDI4MjcxNzc4ODIsIDI3NDM5NDQ4NTUKICAgICAgICAgIF0sCiAgICAgICAgICBFID0gWwogICAgICAgICAgICAwLCAyMTg4MjgyOTcsIDQzNzY1NjU5NCwgMzg3NzgxMTQ3LCA4NzUzMTMxODgsIDk1ODg3MTA4NSwgNzc1NTYyMjk0LCA1OTA0MjQ2MzksIDE3NTA2MjYzNzYsIDE2OTk5NzA2MjUsCiAgICAgICAgICAgIDE5MTc3NDIxNzAsIDIxMzUyNTM1ODcsIDE1NTExMjQ1ODgsIDEzNjcyOTU1ODksIDExODA4NDkyNzgsIDEyNjUxOTU2MzksIDM1MDEyNTI3NTIsIDM3MjAwODEwNDksIDMzOTk5NDEyNTAsCiAgICAgICAgICAgIDMzNTAwNjU4MDMsIDM4MzU0ODQzNDAsIDM5MTkwNDIyMzcsIDQyNzA1MDcxNzQsIDQwODUzNjk1MTksIDMxMDIyNDkxNzYsIDMwNTE1OTM0MjUsIDI3MzQ1OTExNzgsIDI5NTIxMDI1OTUsCiAgICAgICAgICAgIDIzNjE2OTg1NTYsIDIxNzc4Njk1NTcsIDI1MzAzOTEyNzgsIDI2MTQ3Mzc2MzksIDMxNDU0NTY0NDMsIDMwNjA4NDc5MjIsIDI3MDgzMjYxODUsIDI4OTI0MTczMTIsIDI0MDQ5MDE2NjMsCiAgICAgICAgICAgIDIxODcxMjgwODYsIDI1MDQxMzAzMTcsIDI1NTUwNDgxOTYsIDM1NDIzMzAyMjcsIDM3MjcyMDU3NTQsIDMzNzU3NDA3NjksIDMyOTI0NDUwMzIsIDM4NzY1NTc2NTUsIDM5MjYxNzA5NzQsCiAgICAgICAgICAgIDQyNDYzMTA3MjUsIDQwMjc3NDQ1ODgsIDE4MDg0ODExOTUsIDE3MjM4NzI2NzQsIDE5MTAzMTkwMzMsIDIwOTQ0MTAxNjAsIDE2MDg5NzUyNDcsIDEzOTEyMDE2NzAsIDExNzM0MzAxNzMsCiAgICAgICAgICAgIDEyMjQzNDgwNTIsIDU5OTg0ODY3LCAyNDQ4NjAzOTQsIDQyODE2OTIwMSwgMzQ0ODczNDY0LCA5MzUyOTM4OTUsIDk4NDkwNzIxNCwgNzY2MDc4OTMzLCA1NDc1MTI3OTYsCiAgICAgICAgICAgIDE4NDQ4ODI4MDYsIDE2MjcyMzUxOTksIDIwMTEyMTQxODAsIDIwNjIyNzAzMTcsIDE1MDc0OTcyOTgsIDE0MjMwMjI5MzksIDExMzc0Nzc5NTIsIDEzMjE2OTkxNDUsIDk1MzQ1OTgyLAogICAgICAgICAgICAxNDUwODUyMzksIDUzMjIwMTc3MiwgMzEzNzczODYxLCA4MzA2NjE5MTQsIDEwMTU2NzE1NzEsIDczMTE4MzM2OCwgNjQ4MDE3NjY1LCAzMTc1NTAxMjg2LCAyOTU3ODUzNjc5LAogICAgICAgICAgICAyODA3MDU4OTMyLCAyODU4MTE1MDY5LCAyMzA1NDU1NTU0LCAyMjIwOTgxMTk1LCAyNDc0NDA0MzA0LCAyNjU4NjI1NDk3LCAzNTc1NTI4ODc4LCAzNjI1MjY4MTM1LCAzNDczNDE2NjM2LAogICAgICAgICAgICAzMjU0OTg4NzI1LCAzNzc4MTUxODE4LCAzOTYzMTYxNDc1LCA0MjEzNDQ3MDY0LCA0MTMwMjgxMzYxLCAzNTk5NTk1MDg1LCAzNjgzMDIyOTE2LCAzNDMyNzM3Mzc1LCAzMjQ3NDY1NTU4LAogICAgICAgICAgICAzODAyMjIyMTg1LCA0MDIwOTEyMjI0LCA0MTcyNzYzNzcxLCA0MTIyNzYyMzU0LCAzMjAxNjMxNzQ5LCAzMDE3NjcyNzE2LCAyNzY0MjQ5NjIzLCAyODQ4NDYxODU0LCAyMzMxNTkwMTc3LAogICAgICAgICAgICAyMjgwNzk2MjAwLCAyNDMxNTkwOTYzLCAyNjQ4OTc2NDQyLCAxMDQ2OTk2MTMsIDE4ODEyNzQ0NCwgNDcyNjE1NjMxLCAyODczNDM4MTQsIDg0MDAxOTcwNSwgMTA1ODcwOTc0NCwKICAgICAgICAgICAgNjcxNTkzMTk1LCA2MjE1OTE3NzgsIDE4NTIxNzE5MjUsIDE2NjgyMTI4OTIsIDE5NTM3NTc4MzEsIDIwMzc5NzAwNjIsIDE1MTQ3OTA1NzcsIDE0NjM5OTY2MDAsIDEwODAwMTc1NzEsCiAgICAgICAgICAgIDEyOTc0MDMwNTAsIDM2NzM2MzczNTYsIDM2MjM2MzY5NjUsIDMyMzU5OTUxMzQsIDM0NTQ2ODYxOTksIDQwMDczNjA5NjgsIDM4MjIwOTAxNzcsIDQxMDcxMDE2NTgsIDQxOTA1MzA1MTUsCiAgICAgICAgICAgIDI5OTc4MjU5NTYsIDMyMTUyMTI0NjEsIDI4MzA3MDgxNTAsIDI3Nzk5MTUxOTksIDIyNTY3MzQ1OTIsIDIzNDA5NDc4NDksIDI2MjcwMTYwODIsIDI0NDMwNTgwNzUsIDE3MjQ2NjU1NiwKICAgICAgICAgICAgMTIyNDY2MTY1LCAyNzM3OTIzNjYsIDQ5MjQ4MzQzMSwgMTA0NzIzOWUzLCA4NjE5NjgyMDksIDYxMjIwNTg5OCwgNjk1NjM0NzU1LCAxNjQ2MjUyMzQwLCAxODYzNjM4ODQ1LAogICAgICAgICAgICAyMDEzOTA4MjYyLCAxOTYzMTE1MzExLCAxNDQ2MjQyNTc2LCAxNTMwNDU1ODMzLCAxMjc3NTU1OTcwLCAxMDkzNTk3OTYzLCAxNjM2NjA0NjMxLCAxODIwODI0Nzk4LCAyMDczNzI0NjEzLAogICAgICAgICAgICAxOTg5MjQ5MjI4LCAxNDM2NTkwODM1LCAxNDg3NjQ1OTQ2LCAxMzM3Mzc2NDgxLCAxMTE5NzI3ODQ4LCAxNjQ5NDg2MzksIDgxNzgxOTEwLCAzMzE1NDQyMDUsIDUxNjU1MjgzNiwKICAgICAgICAgICAgMTAzOTcxNzA1MSwgODIxMjg4MTE0LCA2Njk5NjE4OTcsIDcxOTcwMDEyOCwgMjk3MzUzMDY5NSwgMzE1Nzc1MDg2MiwgMjg3MTY4MjY0NSwgMjc4NzIwNzI2MCwgMjIzMjQzNTI5OSwKICAgICAgICAgICAgMjI4MzQ5MDQxMCwgMjY2Nzk5NDczNywgMjQ1MDM0NjEwNCwgMzY0NzIxMjA0NywgMzU2NDA0NTMxOCwgMzI3OTAzMzg4NSwgMzQ2NDA0MjUxNiwgMzk4MDkzMTYyNywgMzc2MjUwMjY5MCwKICAgICAgICAgICAgNDE1MDE0NDU2OSwgNDE5OTg4MjgwMCwgMzA3MDM1NjYzNCwgMzEyMTI3NTUzOSwgMjkwNDAyNzI3MiwgMjY4NjI1NDcyMSwgMjIwMDgxODg3OCwgMjM4NDkxMTAzMSwgMjU3MDgzMjA0NCwKICAgICAgICAgICAgMjQ4NjIyNDU0OSwgMzc0NzE5MjAxOCwgMzUyODYyNjkwNywgMzMxMDMyMTg1NiwgMzM1OTkzNjIwMSwgMzk1MDM1NTcwMiwgMzg2NzA2MDk5MSwgNDA0OTg0NDQ1MiwgNDIzNDcyMTAwNSwKICAgICAgICAgICAgMTczOTY1NjIwMiwgMTc5MDU3NTEwNywgMjEwODEwMDYzMiwgMTg5MDMyODA4MSwgMTQwMjgxMTQzOCwgMTU4NjkwMzU5MSwgMTIzMzg1NjU3MiwgMTE0OTI0OTA3NywgMjY2OTU5OTM4LAogICAgICAgICAgICA0ODM5NDgyNywgMzY5MDU3ODcyLCA0MTg2NzIyMTcsIDEwMDI3ODM4NDYsIDkxOTQ4OTEzNSwgNTY3NDk4ODY4LCA3NTIzNzU0MjEsIDIwOTMzNjIyNSwgMjQxOTc1NDQsIDM3NjE4NzgyNywKICAgICAgICAgICAgNDU5NzQ0Njk4LCA5NDUxNjQxNjUsIDg5NTI4NzY5MiwgNTc0NjI0NjYzLCA3OTM0NTE5MzQsIDE2Nzk5NjgyMzMsIDE3NjQzMTM1NjgsIDIxMTczNjA2MzUsIDE5MzM1MzA2MTAsCiAgICAgICAgICAgIDEzNDMxMjc1MDEsIDE1NjA2Mzc4OTIsIDEyNDMxMTI0MTUsIDExOTI0NTU2MzgsIDM3MDQyODA4ODEsIDM1MTkxNDIyMDAsIDMzMzYzNTg2OTEsIDM0MTk5MTU1NjIsIDM5MDc0NDg1OTcsCiAgICAgICAgICAgIDM4NTc1NzIxMjQsIDQwNzU4NzcxMjcsIDQyOTQ3MDQzOTgsIDMwMjk1MTAwMDksIDMxMTM4NTUzNDQsIDI5Mjc5MzQzMTUsIDI3NDQxMDQyOTAsIDIxNTk5NzYyODUsIDIzNzc0ODY2NzYsCiAgICAgICAgICAgIDI1OTQ3MzQ5MjcsIDI1NDQwNzgxNTAKICAgICAgICAgIF0sCiAgICAgICAgICB3ID0gWwogICAgICAgICAgICAwLCAxNTE4NDk3NDIsIDMwMzY5OTQ4NCwgNDU0NDk5NjAyLCA2MDczOTg5NjgsIDc1ODcyMDMxMCwgOTA4OTk5MjA0LCAxMDU5MjcwOTU0LCAxMjE0Nzk3OTM2LCAxMDk3MTU5NTUwLAogICAgICAgICAgICAxNTE3NDQwNjIwLCAxNDAwODQ5NzYyLCAxODE3OTk4NDA4LCAxNjk5ODM5ODE0LCAyMTE4NTQxOTA4LCAyMDAxNDMwODc0LCAyNDI5NTk1ODcyLCAyNTgxNDQ1NjE0LCAyMTk0MzE5MTAwLAogICAgICAgICAgICAyMzQ1MTE5MjE4LCAzMDM0ODgxMjQwLCAzMTg2MjAyNTgyLCAyODAxNjk5NTI0LCAyOTUxOTcxMjc0LCAzNjM1OTk2ODE2LCAzNTE4MzU4NDMwLCAzMzk5Njc5NjI4LCAzMjgzMDg4NzcwLAogICAgICAgICAgICA0MjM3MDgzODE2LCA0MTE4OTI1MjIyLCA0MDAyODYxNzQ4LCAzODg1NzUwNzE0LCAxMDAyMTQyNjgzLCA4NTA4MTcyMzcsIDY5ODQ0NTI1NSwgNTQ4MTY5NDE3LCA1Mjk0ODc4NDMsCiAgICAgICAgICAgIDM3NzY0MjIyMSwgMjI3ODg1NTY3LCA3NzA4OTUyMSwgMTk0MzIxNzA2NywgMjA2MTM3OTc0OSwgMTY0MDU3NjQzOSwgMTc1NzY5MTU3NywgMTQ3NDc2MDU5NSwgMTU5MjM5NDkwOSwKICAgICAgICAgICAgMTE3NDIxNTA1NSwgMTI5MDgwMTc5MywgMjg3NTk2ODMxNSwgMjcyNDY0Mjg2OSwgMzExMTI0NzE0MywgMjk2MDk3MTMwNSwgMjQwNTQyNjk0NywgMjI1MzU4MTMyNSwgMjYzODYwNjYyMywKICAgICAgICAgICAgMjQ4NzgxMDU3NywgMzgwODY2MjM0NywgMzkyNjgyNTAyOSwgNDA0NDk4MTU5MSwgNDE2MjA5NjcyOSwgMzM0MjMxOTQ3NSwgMzQ1OTk1Mzc4OSwgMzU3NjUzOTUwMywgMzY5MzEyNjI0MSwKICAgICAgICAgICAgMTk4NjkxODA2MSwgMjEzNzA2MjgxOSwgMTY4NTU3NzkwNSwgMTgzNjc3MjI4NywgMTM4MTYyMDM3MywgMTUzMjI4NTMzOSwgMTA3ODE4NTA5NywgMTIyOTg5OTY1NSwgMTA0MDU1OTgzNywKICAgICAgICAgICAgOTIzMzEzNjE5LCA3NDAyNzY0MTcsIDYyMTk4MjY3MSwgNDM5NDUyMzg5LCAzMjI3MzQ1NzEsIDEzNzA3MzkxMywgMTkzMDg1MzUsIDM4NzExNjM5ODEsIDQwMjEzMDg3MzksCiAgICAgICAgICAgIDQxMDQ2MDU3NzcsIDQyNTU4MDAxNTksIDMyNjM3ODU1ODksIDM0MTQ0NTA1NTUsIDM0OTkzMjY1NjksIDM2NTEwNDExMjcsIDI5MzMyMDI0OTMsIDI4MTU5NTYyNzUsIDMxNjc2ODQ2NDEsCiAgICAgICAgICAgIDMwNDkzOTA4OTUsIDIzMzAwMTQyMTMsIDIyMTMyOTYzOTUsIDI1NjY1OTU2MDksIDI0NDg4MzAyMzEsIDEzMDU5MDY1NTAsIDExNTUyMzc0OTYsIDE2MDcyNDQ2NTAsIDE0NTU1MjU5ODgsCiAgICAgICAgICAgIDE3NzY0NjAxMTAsIDE2MjYzMTk0MjQsIDIwNzk4OTc0MjYsIDE5Mjg3MDcxNjQsIDk2MzkyNDU0LCAyMTMxMTQzNzYsIDM5NjY3MzgxOCwgNTE0NDQzMjg0LCA1NjI3NTU5MDIsCiAgICAgICAgICAgIDY3OTk5OGUzLCA4NjUxMzY0MTgsIDk4MzQyNjA5MiwgMzcwODE3MzcxOCwgMzU1NzUwNDY2NCwgMzQ3NDcyOTg2NiwgMzMyMzAxMTIwNCwgNDE4MDgwODExMCwgNDAzMDY2NzQyNCwKICAgICAgICAgICAgMzk0NTI2OTE3MCwgMzc5NDA3ODkwOCwgMjUwNzA0MDIzMCwgMjYyMzc2MjE1MiwgMjI3MjU1NjAyNiwgMjM5MDMyNTQ5MiwgMjk3NTQ4NDM4MiwgMzA5MjcyNjQ4MCwgMjczODkwNTAyNiwKICAgICAgICAgICAgMjg1NzE5NDcwMCwgMzk3Mzc3MzEyMSwgMzg1NjEzNzI5NSwgNDI3NDA1MzQ2OSwgNDE1NzQ2NzIxOSwgMzM3MTA5Njk1MywgMzI1MjkzMjcyNywgMzY3MzQ3NjQ1MywgMzU1NjM2MTgzNSwKICAgICAgICAgICAgMjc2MzE3MzY4MSwgMjkxNTAxNzc5MSwgMzA2NDUxMDc2NSwgMzIxNTMwNzI5OSwgMjE1NjI5OTAxNywgMjMwNzYyMjkxOSwgMjQ1OTczNTMxNywgMjYxMDAxMTY3NSwgMjA4MTA0ODQ4MSwKICAgICAgICAgICAgMTk2MzQxMjY1NSwgMTg0NjU2MzI2MSwgMTcyOTk3NzAxMSwgMTQ4MDQ4NTc4NSwgMTM2MjMyMTU1OSwgMTI0MzkwNTQxMywgMTEyNjc5MDc5NSwgODc4ODQ1OTA1LCAxMDMwNjkwMDE1LAogICAgICAgICAgICA2NDU0MDEwMzcsIDc5NjE5NzU3MSwgMjc0MDg0ODQxLCA0MjU0MDg3NDMsIDM4NTQ0ODg1LCAxODg4MjEyNDMsIDM2MTM0OTQ0MjYsIDM3MzE2NTQ1NDgsIDMzMTMyMTIwMzgsCiAgICAgICAgICAgIDM0MzAzMjI1NjgsIDQwODI0NzUxNzAsIDQyMDAxMTUxMTYsIDM3ODAwOTc3MjYsIDM4OTY2ODgwNDgsIDI2NjgyMjE2NzQsIDI1MTY5MDE4NjAsIDIzNjY4ODI1NTAsIDIyMTY2MTAyOTYsCiAgICAgICAgICAgIDMxNDE0MDA3ODYsIDI5ODk1NTI2MDQsIDI4Mzc5NjY1NDIsIDI2ODcxNjU4ODgsIDEyMDI3OTc2OTAsIDEzMjA5NTc4MTIsIDE0MzcyODA4NzAsIDE1NTQzOTE0MDAsIDE2Njk2NjQ4MzQsCiAgICAgICAgICAgIDE3ODczMDQ3ODAsIDE5MDYyNDcyNjIsIDIwMjI4Mzc1ODQsIDI2NTkwNTE2MiwgMTE0NTg1MzQ4LCA0OTkzNDc5OTAsIDM0OTA3NTczNiwgNzM2OTcwODAyLCA1ODUxMjI2MjAsCiAgICAgICAgICAgIDk3MjUxMjgxNCwgODIxNzEyMTYwLCAyNTk1Njg0ODQ0LCAyNDc4NDQzMjM0LCAyMjkzMDQ1MjMyLCAyMTc0NzU0MDQ2LCAzMTk2MjY3OTg4LCAzMDc5NTQ2NTg2LCAyODk1NzIzNDY0LAogICAgICAgICAgICAyNzc3OTUyNDU0LCAzNTM3ODUyODI4LCAzNjg3OTk0MDAyLCAzMjM0MTU2NDE2LCAzMzg1MzQ1MTY2LCA0MTQyNjI2MjEyLCA0MjkzMjk1Nzg2LCAzODQxMDI0OTUyLCAzOTkyNzQyMDcwLAogICAgICAgICAgICAxNzQ1Njc2OTIsIDU3MzI2MDgyLCA0MTA4ODc5NTIsIDI5MjU5Njc2NiwgNzc3MjMxNjY4LCA2NjA1MTAyNjYsIDEwMTE0NTI3MTIsIDg5MzY4MTcwMiwgMTEwODMzOTA2OCwKICAgICAgICAgICAgMTI1ODQ4MDI0MiwgMTM0MzYxODkxMiwgMTQ5NDgwNzY2MiwgMTcxNTE5MzE1NiwgMTg2NTg2MjczMCwgMTk0ODM3Mzg0OCwgMjEwMDA5MDk2NiwgMjcwMTk0OTQ5NSwgMjgxODY2NjgwOSwKICAgICAgICAgICAgMzAwNDU5MTE0NywgMzEyMjM1ODA1MywgMjIzNTA2MTc3NSwgMjM1MjMwNzQ1NywgMjUzNTYwNDI0MywgMjY1Mzg5OTU0OSwgMzkxNTY1MzcwMywgMzc2NDk4ODIzMywgNDIxOTM1MjE1NSwKICAgICAgICAgICAgNDA2NzYzOTEyNSwgMzQ0NDU3NTg3MSwgMzI5NDQzMDU3NywgMzc0NjE3NTA3NSwgMzU5NDk4MjI1MywgODM2NTUzNDMxLCA5NTMyNzA3NDUsIDYwMDIzNTIxMSwgNzE4MDAyMTE3LAogICAgICAgICAgICAzNjc1ODUwMDcsIDQ4NDgzMDY4OSwgMTMzMzYxOTA3LCAyNTE2NTcyMTMsIDIwNDE4NzcxNTksIDE4OTEyMTE2ODksIDE4MDY1OTkzNTUsIDE2NTQ4ODYzMjUsIDE1Njg3MTg0OTUsCiAgICAgICAgICAgIDE0MTg1NzMyMDEsIDEzMzU1MzU3NDcsIDExODQzNDI5MjUKICAgICAgICAgIF07CiAgICAgICAgZnVuY3Rpb24gVChlKSB7CiAgICAgICAgICBjb25zdCB0ID0gW107CiAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGUubGVuZ3RoOyByICs9IDQpIHQucHVzaCgoZVtyXSA8PCAyNCkgfCAoZVtyICsgMV0gPDwgMTYpIHwgKGVbciArIDJdIDw8IDgpIHwgZVtyICsgM10pOwogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfQogICAgICAgIGNsYXNzIFAgewogICAgICAgICAgZ2V0IGtleSgpIHsKICAgICAgICAgICAgcmV0dXJuIG8odGhpcywgciwgJ2YnKS5zbGljZSgpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICBpZiAoKHIuc2V0KHRoaXMsIHZvaWQgMCksIG4uc2V0KHRoaXMsIHZvaWQgMCksIHMuc2V0KHRoaXMsIHZvaWQgMCksICEodGhpcyBpbnN0YW5jZW9mIFApKSkKICAgICAgICAgICAgICB0aHJvdyBFcnJvcignQUVTIG11c3QgYmUgaW5zdGFuaXRhdGVkIHdpdGggYG5ld2AnKTsKICAgICAgICAgICAgaSh0aGlzLCByLCBuZXcgVWludDhBcnJheShlKSwgJ2YnKTsKICAgICAgICAgICAgY29uc3QgdCA9IGFbdGhpcy5rZXkubGVuZ3RoXTsKICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBrZXkgc2l6ZSAobXVzdCBiZSAxNiwgMjQgb3IgMzIgYnl0ZXMpJyk7CiAgICAgICAgICAgIGkodGhpcywgcywgW10sICdmJyksIGkodGhpcywgbiwgW10sICdmJyk7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDw9IHQ7IGUrKykgbyh0aGlzLCBzLCAnZicpLnB1c2goWzAsIDAsIDAsIDBdKSwgbyh0aGlzLCBuLCAnZicpLnB1c2goWzAsIDAsIDAsIDBdKTsKICAgICAgICAgICAgY29uc3QgbCA9IDQgKiAodCArIDEpLAogICAgICAgICAgICAgIGQgPSB0aGlzLmtleS5sZW5ndGggLyA0LAogICAgICAgICAgICAgIGYgPSBUKHRoaXMua2V5KTsKICAgICAgICAgICAgbGV0IGg7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgZDsgZSsrKQogICAgICAgICAgICAgIChoID0gZSA-PiAyKSwgKG8odGhpcywgcywgJ2YnKVtoXVtlICUgNF0gPSBmW2VdKSwgKG8odGhpcywgbiwgJ2YnKVt0IC0gaF1bZSAlIDRdID0gZltlXSk7CiAgICAgICAgICAgIGxldCBnLAogICAgICAgICAgICAgIHAgPSAwLAogICAgICAgICAgICAgIG0gPSBkOwogICAgICAgICAgICBmb3IgKDsgbSA8IGw7ICkgewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICgoZyA9IGZbZCAtIDFdKSwKICAgICAgICAgICAgICAgIChmWzBdIF49CiAgICAgICAgICAgICAgICAgICh1WyhnID4-IDE2KSAmIDI1NV0gPDwgMjQpIF4KICAgICAgICAgICAgICAgICAgKHVbKGcgPj4gOCkgJiAyNTVdIDw8IDE2KSBeCiAgICAgICAgICAgICAgICAgICh1WzI1NSAmIGddIDw8IDgpIF4KICAgICAgICAgICAgICAgICAgdVsoZyA-PiAyNCkgJiAyNTVdIF4KICAgICAgICAgICAgICAgICAgKGNbcF0gPDwgMjQpKSwKICAgICAgICAgICAgICAgIChwICs9IDEpLAogICAgICAgICAgICAgICAgOCAhPSBkKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAxOyBlIDwgZDsgZSsrKSBmW2VdIF49IGZbZSAtIDFdOwogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCBkIC8gMjsgZSsrKSBmW2VdIF49IGZbZSAtIDFdOwogICAgICAgICAgICAgICAgKGcgPSBmW2QgLyAyIC0gMV0pLAogICAgICAgICAgICAgICAgICAoZltkIC8gMl0gXj0KICAgICAgICAgICAgICAgICAgICB1WzI1NSAmIGddIF4gKHVbKGcgPj4gOCkgJiAyNTVdIDw8IDgpIF4gKHVbKGcgPj4gMTYpICYgMjU1XSA8PCAxNikgXiAodVsoZyA-PiAyNCkgJiAyNTVdIDw8IDI0KSk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gZCAvIDIgKyAxOyBlIDwgZDsgZSsrKSBmW2VdIF49IGZbZSAtIDFdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgZSwKICAgICAgICAgICAgICAgIHIsCiAgICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgICBmb3IgKDsgaSA8IGQgJiYgbSA8IGw7ICkKICAgICAgICAgICAgICAgIChlID0gbSA-PiAyKSwgKHIgPSBtICUgNCksIChvKHRoaXMsIHMsICdmJylbZV1bcl0gPSBmW2ldKSwgKG8odGhpcywgbiwgJ2YnKVt0IC0gZV1bcl0gPSBmW2krK10pLCBtKys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCB0OyBlKyspCiAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCA0OyB0KyspCiAgICAgICAgICAgICAgICAoZyA9IG8odGhpcywgbiwgJ2YnKVtlXVt0XSksCiAgICAgICAgICAgICAgICAgIChvKHRoaXMsIG4sICdmJylbZV1bdF0gPSBBWyhnID4-IDI0KSAmIDI1NV0gXiB2WyhnID4-IDE2KSAmIDI1NV0gXiBFWyhnID4-IDgpICYgMjU1XSBeIHdbMjU1ICYgZ10pOwogICAgICAgICAgfQogICAgICAgICAgZW5jcnlwdChlKSB7CiAgICAgICAgICAgIGlmICgxNiAhPSBlLmxlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBwbGFpbnRleHQgc2l6ZSAobXVzdCBiZSAxNiBieXRlcyknKTsKICAgICAgICAgICAgY29uc3QgdCA9IG8odGhpcywgcywgJ2YnKS5sZW5ndGggLSAxLAogICAgICAgICAgICAgIHIgPSBbMCwgMCwgMCwgMF07CiAgICAgICAgICAgIGxldCBuID0gVChlKTsKICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCA0OyBlKyspIG5bZV0gXj0gbyh0aGlzLCBzLCAnZicpWzBdW2VdOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMTsgZSA8IHQ7IGUrKykgewogICAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgNDsgdCsrKQogICAgICAgICAgICAgICAgclt0XSA9CiAgICAgICAgICAgICAgICAgIGRbKG5bdF0gPj4gMjQpICYgMjU1XSBeCiAgICAgICAgICAgICAgICAgIGZbKG5bKHQgKyAxKSAlIDRdID4-IDE2KSAmIDI1NV0gXgogICAgICAgICAgICAgICAgICBoWyhuWyh0ICsgMikgJSA0XSA-PiA4KSAmIDI1NV0gXgogICAgICAgICAgICAgICAgICBnWzI1NSAmIG5bKHQgKyAzKSAlIDRdXSBeCiAgICAgICAgICAgICAgICAgIG8odGhpcywgcywgJ2YnKVtlXVt0XTsKICAgICAgICAgICAgICBuID0gci5zbGljZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgVWludDhBcnJheSgxNik7CiAgICAgICAgICAgIGxldCBhID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCA0OyBlKyspCiAgICAgICAgICAgICAgKGEgPSBvKHRoaXMsIHMsICdmJylbdF1bZV0pLAogICAgICAgICAgICAgICAgKGlbNCAqIGVdID0gMjU1ICYgKHVbKG5bZV0gPj4gMjQpICYgMjU1XSBeIChhID4-IDI0KSkpLAogICAgICAgICAgICAgICAgKGlbNCAqIGUgKyAxXSA9IDI1NSAmICh1WyhuWyhlICsgMSkgJSA0XSA-PiAxNikgJiAyNTVdIF4gKGEgPj4gMTYpKSksCiAgICAgICAgICAgICAgICAoaVs0ICogZSArIDJdID0gMjU1ICYgKHVbKG5bKGUgKyAyKSAlIDRdID4-IDgpICYgMjU1XSBeIChhID4-IDgpKSksCiAgICAgICAgICAgICAgICAoaVs0ICogZSArIDNdID0gMjU1ICYgKHVbMjU1ICYgblsoZSArIDMpICUgNF1dIF4gYSkpOwogICAgICAgICAgICByZXR1cm4gaTsKICAgICAgICAgIH0KICAgICAgICAgIGRlY3J5cHQoZSkgewogICAgICAgICAgICBpZiAoMTYgIT0gZS5sZW5ndGgpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgY2lwaGVydGV4dCBzaXplIChtdXN0IGJlIDE2IGJ5dGVzKScpOwogICAgICAgICAgICBjb25zdCB0ID0gbyh0aGlzLCBuLCAnZicpLmxlbmd0aCAtIDEsCiAgICAgICAgICAgICAgciA9IFswLCAwLCAwLCAwXTsKICAgICAgICAgICAgbGV0IHMgPSBUKGUpOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IDQ7IGUrKykgc1tlXSBePSBvKHRoaXMsIG4sICdmJylbMF1bZV07CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAxOyBlIDwgdDsgZSsrKSB7CiAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCA0OyB0KyspCiAgICAgICAgICAgICAgICByW3RdID0KICAgICAgICAgICAgICAgICAgcFsoc1t0XSA-PiAyNCkgJiAyNTVdIF4KICAgICAgICAgICAgICAgICAgbVsoc1sodCArIDMpICUgNF0gPj4gMTYpICYgMjU1XSBeCiAgICAgICAgICAgICAgICAgIGJbKHNbKHQgKyAyKSAlIDRdID4-IDgpICYgMjU1XSBeCiAgICAgICAgICAgICAgICAgIHlbMjU1ICYgc1sodCArIDEpICUgNF1dIF4KICAgICAgICAgICAgICAgICAgbyh0aGlzLCBuLCAnZicpW2VdW3RdOwogICAgICAgICAgICAgIHMgPSByLnNsaWNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBVaW50OEFycmF5KDE2KTsKICAgICAgICAgICAgbGV0IGEgPSAwOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IDQ7IGUrKykKICAgICAgICAgICAgICAoYSA9IG8odGhpcywgbiwgJ2YnKVt0XVtlXSksCiAgICAgICAgICAgICAgICAoaVs0ICogZV0gPSAyNTUgJiAobFsoc1tlXSA-PiAyNCkgJiAyNTVdIF4gKGEgPj4gMjQpKSksCiAgICAgICAgICAgICAgICAoaVs0ICogZSArIDFdID0gMjU1ICYgKGxbKHNbKGUgKyAzKSAlIDRdID4-IDE2KSAmIDI1NV0gXiAoYSA-PiAxNikpKSwKICAgICAgICAgICAgICAgIChpWzQgKiBlICsgMl0gPSAyNTUgJiAobFsoc1soZSArIDIpICUgNF0gPj4gOCkgJiAyNTVdIF4gKGEgPj4gOCkpKSwKICAgICAgICAgICAgICAgIChpWzQgKiBlICsgM10gPSAyNTUgJiAobFsyNTUgJiBzWyhlICsgMSkgJSA0XV0gXiBhKSk7CiAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAodC5BRVMgPSBQKSwgKHIgPSBuZXcgV2Vha01hcCgpKSwgKG4gPSBuZXcgV2Vha01hcCgpKSwgKHMgPSBuZXcgV2Vha01hcCgpKTsKICAgICAgfSwKICAgICAgNTU2ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LnBrY3M3U3RyaXAgPSB0LnBrY3M3UGFkID0gdC5PRkIgPSB0LkVDQiA9IHQuQ1RSID0gdC5DRkIgPSB0LkNCQyA9IHQuTW9kZU9mT3BlcmF0aW9uID0gdC5BRVMgPSB2b2lkIDApOwogICAgICAgIHZhciBuID0gcigyNDkyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0FFUycsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBuLkFFUzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgcyA9IHIoNjg4KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ01vZGVPZk9wZXJhdGlvbicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBzLk1vZGVPZk9wZXJhdGlvbjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgbyA9IHIoMTM5Mik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdDQkMnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gby5DQkM7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGkgPSByKDY0MDQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnQ0ZCJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuQ0ZCOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBhID0gcigzNDgwKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NUUicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBhLkNUUjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgYyA9IHIoMTMxMik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFQ0InLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYy5FQ0I7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHUgPSByKDc3MjApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnT0ZCJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHUuT0ZCOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBsID0gcig5MTQwKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3BrY3M3UGFkJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGwucGtjczdQYWQ7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3BrY3M3U3RyaXAnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5wa2NzN1N0cmlwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgMTM5MjogZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgIHMsCiAgICAgICAgICBvID0KICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZSwgdCwgciwgbiwgcykgewogICAgICAgICAgICAgIGlmICgnbScgPT09IG4pIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZScpOwogICAgICAgICAgICAgIGlmICgnYScgPT09IG4gJiYgIXMpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlcicpOwogICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiB0ID8gZSAhPT0gdCB8fCAhcyA6ICF0LmhhcyhlKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0Jyk7CiAgICAgICAgICAgICAgcmV0dXJuICdhJyA9PT0gbiA_IHMuY2FsbChlLCByKSA6IHMgPyAocy52YWx1ZSA9IHIpIDogdC5zZXQoZSwgciksIHI7CiAgICAgICAgICAgIH0sCiAgICAgICAgICBpID0KICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KSB8fAogICAgICAgICAgICBmdW5jdGlvbiAoZSwgdCwgciwgbikgewogICAgICAgICAgICAgIGlmICgnYScgPT09IHIgJiYgIW4pIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlcicpOwogICAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiB0ID8gZSAhPT0gdCB8fCAhbiA6ICF0LmhhcyhlKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdCcpOwogICAgICAgICAgICAgIHJldHVybiAnbScgPT09IHIgPyBuIDogJ2EnID09PSByID8gbi5jYWxsKGUpIDogbiA_IG4udmFsdWUgOiB0LmdldChlKTsKICAgICAgICAgICAgfTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuQ0JDID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBhID0gcig2ODgpOwogICAgICAgIGNsYXNzIGMgZXh0ZW5kcyBhLk1vZGVPZk9wZXJhdGlvbiB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIGlmICgoc3VwZXIoJ0VDQycsIGUsIGMpLCBuLnNldCh0aGlzLCB2b2lkIDApLCBzLnNldCh0aGlzLCB2b2lkIDApLCB0KSkgewogICAgICAgICAgICAgIGlmICh0Lmxlbmd0aCAlIDE2KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGl2IHNpemUgKG11c3QgYmUgMTYgYnl0ZXMpJyk7CiAgICAgICAgICAgICAgbyh0aGlzLCBuLCBuZXcgVWludDhBcnJheSh0KSwgJ2YnKTsKICAgICAgICAgICAgfSBlbHNlIG8odGhpcywgbiwgbmV3IFVpbnQ4QXJyYXkoMTYpLCAnZicpOwogICAgICAgICAgICBvKHRoaXMsIHMsIHRoaXMuaXYsICdmJyk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgaXYoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShpKHRoaXMsIG4sICdmJykpOwogICAgICAgICAgfQogICAgICAgICAgZW5jcnlwdChlKSB7CiAgICAgICAgICAgIGlmIChlLmxlbmd0aCAlIDE2KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHBsYWludGV4dCBzaXplIChtdXN0IGJlIG11bHRpcGxlIG9mIDE2IGJ5dGVzKScpOwogICAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpOwogICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGUubGVuZ3RoOyByICs9IDE2KSB7CiAgICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCAxNjsgdCsrKSBpKHRoaXMsIHMsICdmJylbdF0gXj0gZVtyICsgdF07CiAgICAgICAgICAgICAgbyh0aGlzLCBzLCB0aGlzLmFlcy5lbmNyeXB0KGkodGhpcywgcywgJ2YnKSksICdmJyksIHQuc2V0KGkodGhpcywgcywgJ2YnKSwgcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNyeXB0KGUpIHsKICAgICAgICAgICAgaWYgKGUubGVuZ3RoICUgMTYpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgY2lwaGVydGV4dCBzaXplIChtdXN0IGJlIG11bHRpcGxlIG9mIDE2IGJ5dGVzKScpOwogICAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpOwogICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGUubGVuZ3RoOyByICs9IDE2KSB7CiAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuYWVzLmRlY3J5cHQoZS5zdWJhcnJheShyLCByICsgMTYpKTsKICAgICAgICAgICAgICBmb3IgKGxldCBvID0gMDsgbyA8IDE2OyBvKyspICh0W3IgKyBvXSA9IG5bb10gXiBpKHRoaXMsIHMsICdmJylbb10pLCAoaSh0aGlzLCBzLCAnZicpW29dID0gZVtyICsgb10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAodC5DQkMgPSBjKSwgKG4gPSBuZXcgV2Vha01hcCgpKSwgKHMgPSBuZXcgV2Vha01hcCgpKTsKICAgICAgfSwKICAgICAgNjQwNDogZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgIHMsCiAgICAgICAgICBvLAogICAgICAgICAgaSwKICAgICAgICAgIGEgPQogICAgICAgICAgICAodGhpcyAmJiB0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRTZXQpIHx8CiAgICAgICAgICAgIGZ1bmN0aW9uIChlLCB0LCByLCBuLCBzKSB7CiAgICAgICAgICAgICAgaWYgKCdtJyA9PT0gbikgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlJyk7CiAgICAgICAgICAgICAgaWYgKCdhJyA9PT0gbiAmJiAhcykgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyJyk7CiAgICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHQgPyBlICE9PSB0IHx8ICFzIDogIXQuaGFzKGUpKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXQnKTsKICAgICAgICAgICAgICByZXR1cm4gJ2EnID09PSBuID8gcy5jYWxsKGUsIHIpIDogcyA_IChzLnZhbHVlID0gcikgOiB0LnNldChlLCByKSwgcjsKICAgICAgICAgICAgfSwKICAgICAgICAgIGMgPQogICAgICAgICAgICAodGhpcyAmJiB0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXQpIHx8CiAgICAgICAgICAgIGZ1bmN0aW9uIChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgaWYgKCdhJyA9PT0gciAmJiAhbikgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyJyk7CiAgICAgICAgICAgICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIHQgPyBlICE9PSB0IHx8ICFuIDogIXQuaGFzKGUpKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0Jyk7CiAgICAgICAgICAgICAgcmV0dXJuICdtJyA9PT0gciA_IG4gOiAnYScgPT09IHIgPyBuLmNhbGwoZSkgOiBuID8gbi52YWx1ZSA6IHQuZ2V0KGUpOwogICAgICAgICAgICB9OwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5DRkIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IHUgPSByKDY4OCk7CiAgICAgICAgY2xhc3MgbCBleHRlbmRzIHUuTW9kZU9mT3BlcmF0aW9uIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIgPSA4KSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoc3VwZXIoJ0NGQicsIGUsIGwpLCBuLmFkZCh0aGlzKSwgcy5zZXQodGhpcywgdm9pZCAwKSwgby5zZXQodGhpcywgdm9pZCAwKSwgIU51bWJlci5pc0ludGVnZXIocikgfHwgciAlIDgpCiAgICAgICAgICAgICkKICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIHNlZ21lbnRTaXplJyk7CiAgICAgICAgICAgIGlmICgoT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgeyBzZWdtZW50U2l6ZTogeyBlbnVtZXJhYmxlOiAhMCwgdmFsdWU6IHIgfSB9KSwgdCkpIHsKICAgICAgICAgICAgICBpZiAodC5sZW5ndGggJSAxNikgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBpdiBzaXplIChtdXN0IGJlIDE2IGJ5dGVzKScpOwogICAgICAgICAgICAgIGEodGhpcywgcywgbmV3IFVpbnQ4QXJyYXkodCksICdmJyk7CiAgICAgICAgICAgIH0gZWxzZSBhKHRoaXMsIHMsIG5ldyBVaW50OEFycmF5KDE2KSwgJ2YnKTsKICAgICAgICAgICAgYSh0aGlzLCBvLCB0aGlzLml2LCAnZicpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGl2KCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYyh0aGlzLCBzLCAnZicpKTsKICAgICAgICAgIH0KICAgICAgICAgIGVuY3J5cHQoZSkgewogICAgICAgICAgICBpZiAoKDggKiBlLmxlbmd0aCkgJSB0aGlzLnNlZ21lbnRTaXplKQogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgcGxhaW50ZXh0IHNpemUgKG11c3QgYmUgbXVsdGlwbGUgb2Ygc2VnbWVudFNpemUgYnl0ZXMpJyk7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlZ21lbnRTaXplIC8gOCwKICAgICAgICAgICAgICByID0gbmV3IFVpbnQ4QXJyYXkoZSk7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgci5sZW5ndGg7IGUgKz0gdCkgewogICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmFlcy5lbmNyeXB0KGModGhpcywgbywgJ2YnKSk7CiAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0OyBuKyspIHJbZSArIG5dIF49IHNbbl07CiAgICAgICAgICAgICAgYyh0aGlzLCBuLCAnbScsIGkpLmNhbGwodGhpcywgci5zdWJhcnJheShlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNyeXB0KGUpIHsKICAgICAgICAgICAgaWYgKCg4ICogZS5sZW5ndGgpICUgdGhpcy5zZWdtZW50U2l6ZSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGNpcGhlcnRleHQgc2l6ZSAobXVzdCBiZSBtdWx0aXBsZSBvZiBzZWdtZW50U2l6ZSBieXRlcyknKTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuc2VnbWVudFNpemUgLyA4LAogICAgICAgICAgICAgIHIgPSBuZXcgVWludDhBcnJheShlKTsKICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCByLmxlbmd0aDsgcyArPSB0KSB7CiAgICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuYWVzLmVuY3J5cHQoYyh0aGlzLCBvLCAnZicpKTsKICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgcltzICsgZV0gXj0gYVtlXTsKICAgICAgICAgICAgICBjKHRoaXMsIG4sICdtJywgaSkuY2FsbCh0aGlzLCBlLnN1YmFycmF5KHMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuQ0ZCID0gbCksCiAgICAgICAgICAocyA9IG5ldyBXZWFrTWFwKCkpLAogICAgICAgICAgKG8gPSBuZXcgV2Vha01hcCgpKSwKICAgICAgICAgIChuID0gbmV3IFdlYWtTZXQoKSksCiAgICAgICAgICAoaSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlZ21lbnRTaXplIC8gODsKICAgICAgICAgICAgYyh0aGlzLCBvLCAnZicpLnNldChjKHRoaXMsIG8sICdmJykuc3ViYXJyYXkodCkpLCBjKHRoaXMsIG8sICdmJykuc2V0KGUuc3ViYXJyYXkoMCwgdCksIDE2IC0gdCk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgMzQ4MDogZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgIHMsCiAgICAgICAgICBvLAogICAgICAgICAgaSA9CiAgICAgICAgICAgICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldCkgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQsIHIsIG4sIHMpIHsKICAgICAgICAgICAgICBpZiAoJ20nID09PSBuKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGUnKTsKICAgICAgICAgICAgICBpZiAoJ2EnID09PSBuICYmICFzKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXInKTsKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA_IGUgIT09IHQgfHwgIXMgOiAhdC5oYXMoZSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdCcpOwogICAgICAgICAgICAgIHJldHVybiAnYScgPT09IG4gPyBzLmNhbGwoZSwgcikgOiBzID8gKHMudmFsdWUgPSByKSA6IHQuc2V0KGUsIHIpLCByOwogICAgICAgICAgICB9LAogICAgICAgICAgYSA9CiAgICAgICAgICAgICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldCkgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICBpZiAoJ2EnID09PSByICYmICFuKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXInKTsKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA_IGUgIT09IHQgfHwgIW4gOiAhdC5oYXMoZSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXQnKTsKICAgICAgICAgICAgICByZXR1cm4gJ20nID09PSByID8gbiA6ICdhJyA9PT0gciA_IG4uY2FsbChlKSA6IG4gPyBuLnZhbHVlIDogdC5nZXQoZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkNUUiA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgYyA9IHIoNjg4KTsKICAgICAgICBjbGFzcyB1IGV4dGVuZHMgYy5Nb2RlT2ZPcGVyYXRpb24gewogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICBzdXBlcignQ1RSJywgZSwgdSksCiAgICAgICAgICAgICAgbi5zZXQodGhpcywgdm9pZCAwKSwKICAgICAgICAgICAgICBzLnNldCh0aGlzLCB2b2lkIDApLAogICAgICAgICAgICAgIG8uc2V0KHRoaXMsIHZvaWQgMCksCiAgICAgICAgICAgICAgaSh0aGlzLCBvLCBuZXcgVWludDhBcnJheSgxNiksICdmJyksCiAgICAgICAgICAgICAgYSh0aGlzLCBvLCAnZicpLmZpbGwoMCksCiAgICAgICAgICAgICAgaSh0aGlzLCBuLCBhKHRoaXMsIG8sICdmJyksICdmJyksCiAgICAgICAgICAgICAgaSh0aGlzLCBzLCAxNiwgJ2YnKSwKICAgICAgICAgICAgICBudWxsID09IHQgJiYgKHQgPSAxKSwKICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgdCA_IHRoaXMuc2V0Q291bnRlclZhbHVlKHQpIDogdGhpcy5zZXRDb3VudGVyQnl0ZXModCk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgY291bnRlcigpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGEodGhpcywgbywgJ2YnKSk7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRDb3VudGVyVmFsdWUoZSkgewogICAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoZSkgfHwgZSA8IDAgfHwgZSA-IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKQogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgY291bnRlciBpbml0aWFsIGludGVnZXIgdmFsdWUnKTsKICAgICAgICAgICAgZm9yIChsZXQgdCA9IDE1OyB0ID49IDA7IC0tdCkgKGEodGhpcywgbywgJ2YnKVt0XSA9IGUgJSAyNTYpLCAoZSA9IE1hdGguZmxvb3IoZSAvIDI1NikpOwogICAgICAgICAgfQogICAgICAgICAgc2V0Q291bnRlckJ5dGVzKGUpIHsKICAgICAgICAgICAgaWYgKDE2ICE9PSBlLmxlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBjb3VudGVyIGluaXRpYWwgVWludDhBcnJheSB2YWx1ZSBsZW5ndGgnKTsKICAgICAgICAgICAgYSh0aGlzLCBvLCAnZicpLnNldChlKTsKICAgICAgICAgIH0KICAgICAgICAgIGluY3JlbWVudCgpIHsKICAgICAgICAgICAgZm9yIChsZXQgZSA9IDE1OyBlID49IDA7IGUtLSkgewogICAgICAgICAgICAgIGlmICgyNTUgIT09IGEodGhpcywgbywgJ2YnKVtlXSkgewogICAgICAgICAgICAgICAgYSh0aGlzLCBvLCAnZicpW2VdKys7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYSh0aGlzLCBvLCAnZicpW2VdID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZW5jcnlwdChlKSB7CiAgICAgICAgICAgIHZhciB0LCByOwogICAgICAgICAgICBjb25zdCBjID0gbmV3IFVpbnQ4QXJyYXkoZSk7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgYy5sZW5ndGg7IGUrKykKICAgICAgICAgICAgICAxNiA9PT0gYSh0aGlzLCBzLCAnZicpICYmCiAgICAgICAgICAgICAgICAoaSh0aGlzLCBuLCB0aGlzLmFlcy5lbmNyeXB0KGEodGhpcywgbywgJ2YnKSksICdmJyksIGkodGhpcywgcywgMCwgJ2YnKSwgdGhpcy5pbmNyZW1lbnQoKSksCiAgICAgICAgICAgICAgICAoY1tlXSBePSBhKHRoaXMsIG4sICdmJylbKGkodGhpcywgcywgKChyID0gYSh0aGlzLCBzLCAnZicpKSwgKHQgPSByKyspLCByKSwgJ2YnKSwgdCldKTsKICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNyeXB0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jcnlwdChlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuQ1RSID0gdSksIChuID0gbmV3IFdlYWtNYXAoKSksIChzID0gbmV3IFdlYWtNYXAoKSksIChvID0gbmV3IFdlYWtNYXAoKSk7CiAgICAgIH0sCiAgICAgIDEzMTI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkVDQiA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNjg4KTsKICAgICAgICBjbGFzcyBzIGV4dGVuZHMgbi5Nb2RlT2ZPcGVyYXRpb24gewogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICBzdXBlcignRUNCJywgZSwgcyk7CiAgICAgICAgICB9CiAgICAgICAgICBlbmNyeXB0KGUpIHsKICAgICAgICAgICAgaWYgKGUubGVuZ3RoICUgMTYpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgcGxhaW50ZXh0IHNpemUgKG11c3QgYmUgbXVsdGlwbGUgb2YgMTYgYnl0ZXMpJyk7CiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgVWludDhBcnJheShlLmxlbmd0aCk7CiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgZS5sZW5ndGg7IHIgKz0gMTYpIHQuc2V0KHRoaXMuYWVzLmVuY3J5cHQoZS5zdWJhcnJheShyLCByICsgMTYpKSwgcik7CiAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgfQogICAgICAgICAgZGVjcnlwdChlKSB7CiAgICAgICAgICAgIGlmIChlLmxlbmd0aCAlIDE2KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGNpcGhlcnRleHQgc2l6ZSAobXVzdCBiZSBtdWx0aXBsZSBvZiAxNiBieXRlcyknKTsKICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KGUubGVuZ3RoKTsKICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBlLmxlbmd0aDsgciArPSAxNikgdC5zZXQodGhpcy5hZXMuZGVjcnlwdChlLnN1YmFycmF5KHIsIHIgKyAxNikpLCByKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuRUNCID0gczsKICAgICAgfSwKICAgICAgNzcyMDogZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgIHMsCiAgICAgICAgICBvLAogICAgICAgICAgaSA9CiAgICAgICAgICAgICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldCkgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQsIHIsIG4sIHMpIHsKICAgICAgICAgICAgICBpZiAoJ20nID09PSBuKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGUnKTsKICAgICAgICAgICAgICBpZiAoJ2EnID09PSBuICYmICFzKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXInKTsKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA_IGUgIT09IHQgfHwgIXMgOiAhdC5oYXMoZSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdCcpOwogICAgICAgICAgICAgIHJldHVybiAnYScgPT09IG4gPyBzLmNhbGwoZSwgcikgOiBzID8gKHMudmFsdWUgPSByKSA6IHQuc2V0KGUsIHIpLCByOwogICAgICAgICAgICB9LAogICAgICAgICAgYSA9CiAgICAgICAgICAgICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZEdldCkgfHwKICAgICAgICAgICAgZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICBpZiAoJ2EnID09PSByICYmICFuKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXInKTsKICAgICAgICAgICAgICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdCA_IGUgIT09IHQgfHwgIW4gOiAhdC5oYXMoZSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXQnKTsKICAgICAgICAgICAgICByZXR1cm4gJ20nID09PSByID8gbiA6ICdhJyA9PT0gciA_IG4uY2FsbChlKSA6IG4gPyBuLnZhbHVlIDogdC5nZXQoZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0Lk9GQiA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgYyA9IHIoNjg4KTsKICAgICAgICBjbGFzcyB1IGV4dGVuZHMgYy5Nb2RlT2ZPcGVyYXRpb24gewogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICBpZiAoKHN1cGVyKCdPRkInLCBlLCB1KSwgbi5zZXQodGhpcywgdm9pZCAwKSwgcy5zZXQodGhpcywgdm9pZCAwKSwgby5zZXQodGhpcywgdm9pZCAwKSwgdCkpIHsKICAgICAgICAgICAgICBpZiAodC5sZW5ndGggJSAxNikgdGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBpdiBzaXplIChtdXN0IGJlIDE2IGJ5dGVzKScpOwogICAgICAgICAgICAgIGkodGhpcywgbiwgbmV3IFVpbnQ4QXJyYXkodCksICdmJyk7CiAgICAgICAgICAgIH0gZWxzZSBpKHRoaXMsIG4sIG5ldyBVaW50OEFycmF5KDE2KSwgJ2YnKTsKICAgICAgICAgICAgaSh0aGlzLCBzLCB0aGlzLml2LCAnZicpLCBpKHRoaXMsIG8sIDE2LCAnZicpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGl2KCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSh0aGlzLCBuLCAnZicpKTsKICAgICAgICAgIH0KICAgICAgICAgIGVuY3J5cHQoZSkgewogICAgICAgICAgICB2YXIgdCwgcjsKICAgICAgICAgICAgaWYgKGUubGVuZ3RoICUgMTYpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ludmFsaWQgcGxhaW50ZXh0IHNpemUgKG11c3QgYmUgbXVsdGlwbGUgb2YgMTYgYnl0ZXMpJyk7CiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgVWludDhBcnJheShlKTsKICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBuLmxlbmd0aDsgZSsrKQogICAgICAgICAgICAgIDE2ID09PSBhKHRoaXMsIG8sICdmJykgJiYgKGkodGhpcywgcywgdGhpcy5hZXMuZW5jcnlwdChhKHRoaXMsIHMsICdmJykpLCAnZicpLCBpKHRoaXMsIG8sIDAsICdmJykpLAogICAgICAgICAgICAgICAgKG5bZV0gXj0gYSh0aGlzLCBzLCAnZicpWyhpKHRoaXMsIG8sICgociA9IGEodGhpcywgbywgJ2YnKSksICh0ID0gcisrKSwgciksICdmJyksIHQpXSk7CiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgfQogICAgICAgICAgZGVjcnlwdChlKSB7CiAgICAgICAgICAgIGlmIChlLmxlbmd0aCAlIDE2KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbnZhbGlkIGNpcGhlcnRleHQgc2l6ZSAobXVzdCBiZSBtdWx0aXBsZSBvZiAxNiBieXRlcyknKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jcnlwdChlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuT0ZCID0gdSksIChuID0gbmV3IFdlYWtNYXAoKSksIChzID0gbmV3IFdlYWtNYXAoKSksIChvID0gbmV3IFdlYWtNYXAoKSk7CiAgICAgIH0sCiAgICAgIDY4ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuTW9kZU9mT3BlcmF0aW9uID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcigyNDkyKTsKICAgICAgICB0Lk1vZGVPZk9wZXJhdGlvbiA9IGNsYXNzIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKHIgJiYgISh0aGlzIGluc3RhbmNlb2YgcikpIHRocm93IG5ldyBFcnJvcihgJHtlfSBtdXN0IGJlIGluc3RhbnRpYXRlZCB3aXRoICJuZXciYCk7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsKICAgICAgICAgICAgICBhZXM6IHsgZW51bWVyYWJsZTogITAsIHZhbHVlOiBuZXcgbi5BRVModCkgfSwKICAgICAgICAgICAgICBuYW1lOiB7IGVudW1lcmFibGU6ICEwLCB2YWx1ZTogZSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIDkxNDA6IChlLCB0KSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5wa2NzN1N0cmlwID0gdC5wa2NzN1BhZCA9IHZvaWQgMCksCiAgICAgICAgICAodC5wa2NzN1BhZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAxNiAtIChlLmxlbmd0aCAlIDE2KSwKICAgICAgICAgICAgICByID0gbmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGggKyB0KTsKICAgICAgICAgICAgci5zZXQoZSk7CiAgICAgICAgICAgIGZvciAobGV0IG4gPSBlLmxlbmd0aDsgbiA8IHIubGVuZ3RoOyBuKyspIHJbbl0gPSB0OwogICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQucGtjczdTdHJpcCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmxlbmd0aCA8IDE2KSB0aHJvdyBuZXcgVHlwZUVycm9yKCdQS0NTIzcgaW52YWxpZCBsZW5ndGgnKTsKICAgICAgICAgICAgY29uc3QgdCA9IGVbZS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgaWYgKHQgPiAxNikgdGhyb3cgbmV3IFR5cGVFcnJvcignUEtDUyM3IHBhZGRpbmcgYnl0ZSBvdXQgb2YgcmFuZ2UnKTsKICAgICAgICAgICAgY29uc3QgciA9IGUubGVuZ3RoIC0gdDsKICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0OyBuKyspIGlmIChlW3IgKyBuXSAhPT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcignUEtDUyM3IGludmFsaWQgcGFkZGluZyBieXRlJyk7CiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShlLnN1YmFycmF5KDAsIHIpKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA3OTM2OiAoZSwgdCkgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC52ZXJzaW9uID0gdm9pZCAwKSwgKHQudmVyc2lvbiA9ICc2LjEwLjAnKTsKICAgICAgfSwKICAgICAgMjAyODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuQWJpQ29kZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoNzM3NiksCiAgICAgICAgICBvID0gcigzMTg0KSwKICAgICAgICAgIGkgPSByKDk2NjgpLAogICAgICAgICAgYSA9IHIoMjAzMiksCiAgICAgICAgICBjID0gcigzNDI3KSwKICAgICAgICAgIHUgPSByKDYyNjQpLAogICAgICAgICAgbCA9IHIoNjYwOCksCiAgICAgICAgICBkID0gcig1NzM2KSwKICAgICAgICAgIGYgPSByKDc0NzIpLAogICAgICAgICAgaCA9IHIoNjU2NCksCiAgICAgICAgICBnID0gcig0OTgwKSwKICAgICAgICAgIHAgPSByKDM2ODApLAogICAgICAgICAgbSA9IHIoNTMxNiksCiAgICAgICAgICBiID0gbmV3IE1hcCgpOwogICAgICAgIGIuc2V0KDAsICdHRU5FUklDX1BBTklDJyksCiAgICAgICAgICBiLnNldCgxLCAnQVNTRVJUX0ZBTFNFJyksCiAgICAgICAgICBiLnNldCgxNywgJ09WRVJGTE9XJyksCiAgICAgICAgICBiLnNldCgxOCwgJ0RJVklERV9CWV9aRVJPJyksCiAgICAgICAgICBiLnNldCgzMywgJ0VOVU1fUkFOR0VfRVJST1InKSwKICAgICAgICAgIGIuc2V0KDM0LCAnQkFEX1NUT1JBR0VfREFUQScpLAogICAgICAgICAgYi5zZXQoNDksICdTVEFDS19VTkRFUkZMT1cnKSwKICAgICAgICAgIGIuc2V0KDUwLCAnQVJSQVlfUkFOR0VfRVJST1InKSwKICAgICAgICAgIGIuc2V0KDY1LCAnT1VUX09GX01FTU9SWScpLAogICAgICAgICAgYi5zZXQoODEsICdVTklOSVRJQUxJWkVEX0ZVTkNUSU9OX0NBTEwnKTsKICAgICAgICBjb25zdCB5ID0gbmV3IFJlZ0V4cCgvXmJ5dGVzKFswLTldKikkLyksCiAgICAgICAgICBBID0gbmV3IFJlZ0V4cCgvXih1P2ludCkoWzAtOV0qKSQvKTsKICAgICAgICBsZXQgdiA9IG51bGwsCiAgICAgICAgICBFID0gMTAyNDsKICAgICAgICBjbGFzcyB3IHsKICAgICAgICAgICNlKGUpIHsKICAgICAgICAgICAgaWYgKGUuaXNBcnJheSgpKSByZXR1cm4gbmV3IGkuQXJyYXlDb2Rlcih0aGlzLiNlKGUuYXJyYXlDaGlsZHJlbiksIGUuYXJyYXlMZW5ndGgsIGUubmFtZSk7CiAgICAgICAgICAgIGlmIChlLmlzVHVwbGUoKSkKICAgICAgICAgICAgICByZXR1cm4gbmV3IGguVHVwbGVDb2RlcigKICAgICAgICAgICAgICAgIGUuY29tcG9uZW50cy5tYXAoKGUpID0-IHRoaXMuI2UoZSkpLAogICAgICAgICAgICAgICAgZS5uYW1lCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgc3dpdGNoIChlLmJhc2VUeXBlKSB7CiAgICAgICAgICAgICAgY2FzZSAnYWRkcmVzcyc6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IG8uQWRkcmVzc0NvZGVyKGUubmFtZSk7CiAgICAgICAgICAgICAgY2FzZSAnYm9vbCc6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGEuQm9vbGVhbkNvZGVyKGUubmFtZSk7CiAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZi5TdHJpbmdDb2RlcihlLm5hbWUpOwogICAgICAgICAgICAgIGNhc2UgJ2J5dGVzJzoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYy5CeXRlc0NvZGVyKGUubmFtZSk7CiAgICAgICAgICAgICAgY2FzZSAnJzoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbC5OdWxsQ29kZXIoZS5uYW1lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdCA9IGUudHlwZS5tYXRjaChBKTsKICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICBsZXQgciA9IHBhcnNlSW50KHRbMl0gfHwgJzI1NicpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoMCAhPT0gciAmJiByIDw9IDI1NiAmJiByICUgOCA9PSAwLCAnaW52YWxpZCAnICsgdFsxXSArICcgYml0IGxlbmd0aCcsICdwYXJhbScsIGUpLAogICAgICAgICAgICAgICAgbmV3IGQuTnVtYmVyQ29kZXIociAvIDgsICdpbnQnID09PSB0WzFdLCBlLm5hbWUpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKCh0ID0gZS50eXBlLm1hdGNoKHkpKSwgdCkpIHsKICAgICAgICAgICAgICBsZXQgciA9IHBhcnNlSW50KHRbMV0pOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoMCAhPT0gciAmJiByIDw9IDMyLCAnaW52YWxpZCBieXRlcyBsZW5ndGgnLCAncGFyYW0nLCBlKSwKICAgICAgICAgICAgICAgIG5ldyB1LkZpeGVkQnl0ZXNDb2RlcihyLCBlLm5hbWUpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIHR5cGUnLCAndHlwZScsIGUudHlwZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXREZWZhdWx0VmFsdWUoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gZS5tYXAoKGUpID0-IHRoaXMuI2UoZy5QYXJhbVR5cGUuZnJvbShlKSkpOwogICAgICAgICAgICByZXR1cm4gbmV3IGguVHVwbGVDb2Rlcih0LCAnXycpLmRlZmF1bHRWYWx1ZSgpOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUsIHQpIHsKICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnRDb3VudCkodC5sZW5ndGgsIGUubGVuZ3RoLCAndHlwZXMvdmFsdWVzIGxlbmd0aCBtaXNtYXRjaCcpOwogICAgICAgICAgICBjb25zdCByID0gZS5tYXAoKGUpID0-IHRoaXMuI2UoZy5QYXJhbVR5cGUuZnJvbShlKSkpLAogICAgICAgICAgICAgIG8gPSBuZXcgaC5UdXBsZUNvZGVyKHIsICdfJyksCiAgICAgICAgICAgICAgaSA9IG5ldyBzLldyaXRlcigpOwogICAgICAgICAgICByZXR1cm4gby5lbmNvZGUoaSwgdCksIGkuZGF0YTsKICAgICAgICAgIH0KICAgICAgICAgIGRlY29kZShlLCB0LCByKSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSBlLm1hcCgoZSkgPT4gdGhpcy4jZShnLlBhcmFtVHlwZS5mcm9tKGUpKSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgaC5UdXBsZUNvZGVyKG4sICdfJykuZGVjb2RlKG5ldyBzLlJlYWRlcih0LCByLCBFKSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgX3NldERlZmF1bHRNYXhJbmZsYXRpb24oZSkgewogICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgJ251bWJlcicgPT0gdHlwZW9mIGUgJiYgTnVtYmVyLmlzSW50ZWdlcihlKSwKICAgICAgICAgICAgICAnaW52YWxpZCBkZWZhdWx0TWF4SW5mbGF0aW9uIGZhY3RvcicsCiAgICAgICAgICAgICAgJ3ZhbHVlJywKICAgICAgICAgICAgICBlCiAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKEUgPSBlKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBkZWZhdWx0QWJpQ29kZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHYgJiYgKHYgPSBuZXcgdygpKSwgdjsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBnZXRCdWlsdGluQ2FsbEV4Y2VwdGlvbihlLCB0LCByKSB7CiAgICAgICAgICAgIHJldHVybiAoZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICBsZXQgcyA9ICdtaXNzaW5nIHJldmVydCBkYXRhJywKICAgICAgICAgICAgICAgIG8gPSBudWxsLAogICAgICAgICAgICAgICAgaSA9IG51bGw7CiAgICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICAgIHMgPSAnZXhlY3V0aW9uIHJldmVydGVkJzsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAoMCwgbS5nZXRCeXRlcykocik7CiAgICAgICAgICAgICAgICBpZiAoKChyID0gKDAsIG0uaGV4bGlmeSkocikpLCAwID09PSBlLmxlbmd0aCkpCiAgICAgICAgICAgICAgICAgIChzICs9ICcgKG5vIGRhdGEgcHJlc2VudDsgbGlrZWx5IHJlcXVpcmUoZmFsc2UpIG9jY3VycmVkJyksIChvID0gJ3JlcXVpcmUoZmFsc2UpJyk7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmxlbmd0aCAlIDMyICE9IDQpIHMgKz0gJyAoY291bGQgbm90IGRlY29kZSByZWFzb247IGludmFsaWQgZGF0YSBsZW5ndGgpJzsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKCcweDA4YzM3OWEwJyA9PT0gKDAsIG0uaGV4bGlmeSkoZS5zbGljZSgwLCA0KSkpCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgKG8gPSBuLmRlY29kZShbJ3N0cmluZyddLCBlLnNsaWNlKDQpKVswXSksCiAgICAgICAgICAgICAgICAgICAgICAoaSA9IHsgc2lnbmF0dXJlOiAnRXJyb3Ioc3RyaW5nKScsIG5hbWU6ICdFcnJvcicsIGFyZ3M6IFtvXSB9KSwKICAgICAgICAgICAgICAgICAgICAgIChzICs9IGA6ICR7SlNPTi5zdHJpbmdpZnkobyl9YCk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBzICs9ICcgKGNvdWxkIG5vdCBkZWNvZGUgcmVhc29uOyBpbnZhbGlkIHN0cmluZyBkYXRhKSc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKCcweDRlNDg3YjcxJyA9PT0gKDAsIG0uaGV4bGlmeSkoZS5zbGljZSgwLCA0KSkpCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IE51bWJlcihuLmRlY29kZShbJ3VpbnQyNTYnXSwgZS5zbGljZSg0KSlbMF0pOwogICAgICAgICAgICAgICAgICAgIChpID0geyBzaWduYXR1cmU6ICdQYW5pYyh1aW50MjU2KScsIG5hbWU6ICdQYW5pYycsIGFyZ3M6IFt0XSB9KSwKICAgICAgICAgICAgICAgICAgICAgIChvID0gYFBhbmljIGR1ZSB0byAke2IuZ2V0KHQpIHx8ICdVTktOT1dOJ30oJHt0fSlgKSwKICAgICAgICAgICAgICAgICAgICAgIChzICs9IGA6ICR7b31gKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHMgKz0gJyAoY291bGQgbm90IGRlY29kZSBwYW5pYyBjb2RlKSc7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgcyArPSAnICh1bmtub3duIGN1c3RvbSBlcnJvciknOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCBhID0geyB0bzogdC50byA_ICgwLCBwLmdldEFkZHJlc3MpKHQudG8pIDogbnVsbCwgZGF0YTogdC5kYXRhIHx8ICcweCcgfTsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgdC5mcm9tICYmIChhLmZyb20gPSAoMCwgcC5nZXRBZGRyZXNzKSh0LmZyb20pKSwKICAgICAgICAgICAgICAgICgwLCBtLm1ha2VFcnJvcikocywgJ0NBTExfRVhDRVBUSU9OJywgewogICAgICAgICAgICAgICAgICBhY3Rpb246IGUsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHIsCiAgICAgICAgICAgICAgICAgIHJlYXNvbjogbywKICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IGEsCiAgICAgICAgICAgICAgICAgIGludm9jYXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgIHJldmVydDogaQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KShlLCB0LCByLCB3LmRlZmF1bHRBYmlDb2RlcigpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5BYmlDb2RlciA9IHc7CiAgICAgIH0sCiAgICAgIDg0ODQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LmRlY29kZUJ5dGVzMzJTdHJpbmcgPSB0LmVuY29kZUJ5dGVzMzJTdHJpbmcgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpOwogICAgICAgICh0LmVuY29kZUJ5dGVzMzJTdHJpbmcgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc3QgdCA9ICgwLCBuLnRvVXRmOEJ5dGVzKShlKTsKICAgICAgICAgIGlmICh0Lmxlbmd0aCA-IDMxKSB0aHJvdyBuZXcgRXJyb3IoJ2J5dGVzMzIgc3RyaW5nIG11c3QgYmUgbGVzcyB0aGFuIDMyIGJ5dGVzJyk7CiAgICAgICAgICByZXR1cm4gKDAsIG4uemVyb1BhZEJ5dGVzKSh0LCAzMik7CiAgICAgICAgfSksCiAgICAgICAgICAodC5kZWNvZGVCeXRlczMyU3RyaW5nID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBuLmdldEJ5dGVzKShlLCAnYnl0ZXMnKTsKICAgICAgICAgICAgaWYgKDMyICE9PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGJ5dGVzMzIgLSBub3QgMzIgYnl0ZXMgbG9uZycpOwogICAgICAgICAgICBpZiAoMCAhPT0gdFszMV0pIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBieXRlczMyIHN0cmluZyAtIG5vIG51bGwgdGVybWluYXRvcicpOwogICAgICAgICAgICBsZXQgciA9IDMxOwogICAgICAgICAgICBmb3IgKDsgMCA9PT0gdFtyIC0gMV07ICkgci0tOwogICAgICAgICAgICByZXR1cm4gKDAsIG4udG9VdGY4U3RyaW5nKSh0LnNsaWNlKDAsIHIpKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA3Mzc2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuUmVhZGVyID0gdC5Xcml0ZXIgPSB0LkNvZGVyID0gdC5jaGVja1Jlc3VsdEVycm9ycyA9IHQuUmVzdWx0ID0gdC5Xb3JkU2l6ZSA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTMxNik7CiAgICAgICAgdC5Xb3JkU2l6ZSA9IDMyOwogICAgICAgIGNvbnN0IHMgPSBuZXcgVWludDhBcnJheSh0LldvcmRTaXplKSwKICAgICAgICAgIG8gPSBbJ3RoZW4nXSwKICAgICAgICAgIGkgPSB7fTsKICAgICAgICBmdW5jdGlvbiBhKGUsIHQpIHsKICAgICAgICAgIGNvbnN0IHIgPSBuZXcgRXJyb3IoYGRlZmVycmVkIGVycm9yIGR1cmluZyBBQkkgZGVjb2RpbmcgdHJpZ2dlcmVkIGFjY2Vzc2luZyAke2V9YCk7CiAgICAgICAgICB0aHJvdyAoKHIuZXJyb3IgPSB0KSwgcik7CiAgICAgICAgfQogICAgICAgIGNsYXNzIGMgZXh0ZW5kcyBBcnJheSB7CiAgICAgICAgICAjdDsKICAgICAgICAgIGNvbnN0cnVjdG9yKC4uLmUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IGVbMF07CiAgICAgICAgICAgIGxldCByID0gZVsxXSwKICAgICAgICAgICAgICBzID0gKGVbMl0gfHwgW10pLnNsaWNlKCksCiAgICAgICAgICAgICAgYyA9ICEwOwogICAgICAgICAgICB0ICE9PSBpICYmICgociA9IGUpLCAocyA9IFtdKSwgKGMgPSAhMSkpLAogICAgICAgICAgICAgIHN1cGVyKHIubGVuZ3RoKSwKICAgICAgICAgICAgICByLmZvckVhY2goKGUsIHQpID0-IHsKICAgICAgICAgICAgICAgIHRoaXNbdF0gPSBlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCB1ID0gcy5yZWR1Y2UoKGUsIHQpID0-ICgnc3RyaW5nJyA9PSB0eXBlb2YgdCAmJiBlLnNldCh0LCAoZS5nZXQodCkgfHwgMCkgKyAxKSwgZSksIG5ldyBNYXAoKSk7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoKHRoaXMuI3QgPSBPYmplY3QuZnJlZXplKAogICAgICAgICAgICAgICAgci5tYXAoKGUsIHQpID0-IHsKICAgICAgICAgICAgICAgICAgY29uc3QgciA9IHNbdF07CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsICE9IHIgJiYgMSA9PT0gdS5nZXQocikgPyByIDogbnVsbDsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgYykKICAgICAgICAgICAgKQogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKHRoaXMpLAogICAgICAgICAgICAgICAgbmV3IFByb3h5KHRoaXMsIHsKICAgICAgICAgICAgICAgICAgZ2V0OiAoZSwgdCwgcikgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHQubWF0Y2goL15bMC05XSskLykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9ICgwLCBuLmdldE51bWJlcikodCwgJyVpbmRleCcpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAociA8IDAgfHwgciA-PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByZXN1bHQgcmFuZ2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IGVbcl07CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzIGluc3RhbmNlb2YgRXJyb3IgJiYgYShgaW5kZXggJHtyfWAsIHMpLCBzOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaWYgKG8uaW5kZXhPZih0KSA-PSAwKSByZXR1cm4gUmVmbGVjdC5nZXQoZSwgdCwgcik7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gZVt0XTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChzIGluc3RhbmNlb2YgRnVuY3Rpb24pCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4udCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLmFwcGx5KHRoaXMgPT09IHIgPyBlIDogdGhpcywgdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0IGluIGUpKSByZXR1cm4gZS5nZXRWYWx1ZS5hcHBseSh0aGlzID09PSByID8gZSA6IHRoaXMsIFt0XSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldChlLCB0LCByKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgdG9BcnJheSgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IFtdOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIHRoaXMuZm9yRWFjaCgodCwgcikgPT4gewogICAgICAgICAgICAgICAgdCBpbnN0YW5jZW9mIEVycm9yICYmIGEoYGluZGV4ICR7cn1gLCB0KSwgZS5wdXNoKHQpOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHRvT2JqZWN0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jdC5yZWR1Y2UoCiAgICAgICAgICAgICAgKGUsIHQsIHIpID0-ICgKICAgICAgICAgICAgICAgICgwLCBuLmFzc2VydCkobnVsbCAhPSB0LCAndmFsdWUgYXQgaW5kZXggJHsgaW5kZXggfSB1bm5hbWVkJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAndG9PYmplY3QoKScKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdCBpbiBlIHx8IChlW3RdID0gdGhpcy5nZXRWYWx1ZSh0KSksCiAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB7fQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgc2xpY2UoZSwgdCkgewogICAgICAgICAgICBudWxsID09IGUgJiYgKGUgPSAwKSwKICAgICAgICAgICAgICBlIDwgMCAmJiAoZSArPSB0aGlzLmxlbmd0aCkgPCAwICYmIChlID0gMCksCiAgICAgICAgICAgICAgbnVsbCA9PSB0ICYmICh0ID0gdGhpcy5sZW5ndGgpLAogICAgICAgICAgICAgIHQgPCAwICYmICh0ICs9IHRoaXMubGVuZ3RoKSA8IDAgJiYgKHQgPSAwKSwKICAgICAgICAgICAgICB0ID4gdGhpcy5sZW5ndGggJiYgKHQgPSB0aGlzLmxlbmd0aCk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBbXSwKICAgICAgICAgICAgICBuID0gW107CiAgICAgICAgICAgIGZvciAobGV0IHMgPSBlOyBzIDwgdDsgcysrKSByLnB1c2godGhpc1tzXSksIG4ucHVzaCh0aGlzLiN0W3NdKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBjKGksIHIsIG4pOwogICAgICAgICAgfQogICAgICAgICAgZmlsdGVyKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IFtdLAogICAgICAgICAgICAgIG4gPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCB0aGlzLmxlbmd0aDsgcysrKSB7CiAgICAgICAgICAgICAgY29uc3QgbyA9IHRoaXNbc107CiAgICAgICAgICAgICAgbyBpbnN0YW5jZW9mIEVycm9yICYmIGEoYGluZGV4ICR7c31gLCBvKSwgZS5jYWxsKHQsIG8sIHMsIHRoaXMpICYmIChyLnB1c2gobyksIG4ucHVzaCh0aGlzLiN0W3NdKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5ldyBjKGksIHIsIG4pOwogICAgICAgICAgfQogICAgICAgICAgbWFwKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMubGVuZ3RoOyBuKyspIHsKICAgICAgICAgICAgICBjb25zdCBzID0gdGhpc1tuXTsKICAgICAgICAgICAgICBzIGluc3RhbmNlb2YgRXJyb3IgJiYgYShgaW5kZXggJHtufWAsIHMpLCByLnB1c2goZS5jYWxsKHQsIHMsIG4sIHRoaXMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgIH0KICAgICAgICAgIGdldFZhbHVlKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuI3QuaW5kZXhPZihlKTsKICAgICAgICAgICAgaWYgKC0xID09PSB0KSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzW3RdOwogICAgICAgICAgICByZXR1cm4gciBpbnN0YW5jZW9mIEVycm9yICYmIGEoYHByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCwgci5lcnJvciksIHI7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZnJvbUl0ZW1zKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBjKGksIGUsIHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgICAgIGxldCByID0gKDAsIG4udG9CZUFycmF5KShlKTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICgwLCBuLmFzc2VydCkoci5sZW5ndGggPD0gdC5Xb3JkU2l6ZSwgJ3ZhbHVlIG91dC1vZi1ib3VuZHMnLCAnQlVGRkVSX09WRVJSVU4nLCB7CiAgICAgICAgICAgICAgYnVmZmVyOiByLAogICAgICAgICAgICAgIGxlbmd0aDogdC5Xb3JkU2l6ZSwKICAgICAgICAgICAgICBvZmZzZXQ6IHIubGVuZ3RoCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICByLmxlbmd0aCAhPT0gdC5Xb3JkU2l6ZSAmJiAociA9ICgwLCBuLmdldEJ5dGVzQ29weSkoKDAsIG4uY29uY2F0KShbcy5zbGljZShyLmxlbmd0aCAlIHQuV29yZFNpemUpLCByXSkpKSwKICAgICAgICAgICAgcgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgKHQuUmVzdWx0ID0gYyksCiAgICAgICAgICAodC5jaGVja1Jlc3VsdEVycm9ycyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBbXSwKICAgICAgICAgICAgICByID0gZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG4pKQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBzIGluIG4pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZS5zbGljZSgpOwogICAgICAgICAgICAgICAgICAgIG8ucHVzaChzKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgcihvLCBuW3NdKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICB0LnB1c2goeyBwYXRoOiBvLCBlcnJvcjogZSB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gcihbXSwgZSksIHQ7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LkNvZGVyID0gY2xhc3MgewogICAgICAgICAgICBuYW1lOwogICAgICAgICAgICB0eXBlOwogICAgICAgICAgICBsb2NhbE5hbWU7CiAgICAgICAgICAgIGR5bmFtaWM7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIHMpIHsKICAgICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSgKICAgICAgICAgICAgICAgIHRoaXMsCiAgICAgICAgICAgICAgICB7IG5hbWU6IGUsIHR5cGU6IHQsIGxvY2FsTmFtZTogciwgZHluYW1pYzogcyB9LAogICAgICAgICAgICAgICAgeyBuYW1lOiAnc3RyaW5nJywgdHlwZTogJ3N0cmluZycsIGxvY2FsTmFtZTogJ3N0cmluZycsIGR5bmFtaWM6ICdib29sZWFuJyB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhyb3dFcnJvcihlLCB0KSB7CiAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCBlLCB0aGlzLmxvY2FsTmFtZSwgdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgKHQuV3JpdGVyID0gY2xhc3MgewogICAgICAgICAgICAjcjsKICAgICAgICAgICAgI247CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICAgICh0aGlzLiNyID0gW10pLCAodGhpcy4jbiA9IDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdldCBkYXRhKCkgewogICAgICAgICAgICAgIHJldHVybiAoMCwgbi5jb25jYXQpKHRoaXMuI3IpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdldCBsZW5ndGgoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgI3MoZSkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLiNyLnB1c2goZSksICh0aGlzLiNuICs9IGUubGVuZ3RoKSwgZS5sZW5ndGg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXBwZW5kV3JpdGVyKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcygoMCwgbi5nZXRCeXRlc0NvcHkpKGUuZGF0YSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdyaXRlQnl0ZXMoZSkgewogICAgICAgICAgICAgIGxldCByID0gKDAsIG4uZ2V0Qnl0ZXNDb3B5KShlKTsKICAgICAgICAgICAgICBjb25zdCBvID0gci5sZW5ndGggJSB0LldvcmRTaXplOwogICAgICAgICAgICAgIHJldHVybiBvICYmIChyID0gKDAsIG4uZ2V0Qnl0ZXNDb3B5KSgoMCwgbi5jb25jYXQpKFtyLCBzLnNsaWNlKG8pXSkpKSwgdGhpcy4jcyhyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB3cml0ZVZhbHVlKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcyh1KGUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB3cml0ZVVwZGF0YWJsZVZhbHVlKCkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLiNyLmxlbmd0aDsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgdGhpcy4jci5wdXNoKHMpLAogICAgICAgICAgICAgICAgKHRoaXMuI24gKz0gdC5Xb3JkU2l6ZSksCiAgICAgICAgICAgICAgICAodCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLiNyW2VdID0gdSh0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICBjbGFzcyBsIHsKICAgICAgICAgIGFsbG93TG9vc2U7CiAgICAgICAgICAjcjsKICAgICAgICAgICNvOwogICAgICAgICAgI2k7CiAgICAgICAgICAjYTsKICAgICAgICAgICNjOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGFsbG93TG9vc2U6ICEhdCB9KSwKICAgICAgICAgICAgICAodGhpcy4jciA9ICgwLCBuLmdldEJ5dGVzQ29weSkoZSkpLAogICAgICAgICAgICAgICh0aGlzLiNpID0gMCksCiAgICAgICAgICAgICAgKHRoaXMuI2EgPSBudWxsKSwKICAgICAgICAgICAgICAodGhpcy4jYyA9IG51bGwgIT0gciA_IHIgOiAxMDI0KSwKICAgICAgICAgICAgICAodGhpcy4jbyA9IDApOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgbi5oZXhsaWZ5KSh0aGlzLiNyKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBkYXRhTGVuZ3RoKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jci5sZW5ndGg7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgY29uc3VtZWQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNvOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGJ5dGVzKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodGhpcy4jcik7CiAgICAgICAgICB9CiAgICAgICAgICAjdShlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLiNhKSByZXR1cm4gdGhpcy4jYS4jdShlKTsKICAgICAgICAgICAgKHRoaXMuI2kgKz0gZSksCiAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0KSgKICAgICAgICAgICAgICAgIHRoaXMuI2MgPCAxIHx8IHRoaXMuI2kgPD0gdGhpcy4jYyAqIHRoaXMuZGF0YUxlbmd0aCwKICAgICAgICAgICAgICAgIGBjb21wcmVzc2VkIEFCSSBkYXRhIGV4Y2VlZHMgaW5mbGF0aW9uIHJhdGlvIG9mICR7dGhpcy4jY30gKCBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9ldGhlcnMtaW8vZXRoZXJzLmpzL2lzc3Vlcy80NTM3IClgLAogICAgICAgICAgICAgICAgJ0JVRkZFUl9PVkVSUlVOJywKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgYnVmZmVyOiAoMCwgbi5nZXRCeXRlc0NvcHkpKHRoaXMuI3IpLAogICAgICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMuI28sCiAgICAgICAgICAgICAgICAgIGxlbmd0aDogZSwKICAgICAgICAgICAgICAgICAgaW5mbzogeyBieXRlc1JlYWQ6IHRoaXMuI2ksIGRhdGFMZW5ndGg6IHRoaXMuZGF0YUxlbmd0aCB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgICNsKGUsIHIsIHMpIHsKICAgICAgICAgICAgbGV0IG8gPSBNYXRoLmNlaWwociAvIHQuV29yZFNpemUpICogdC5Xb3JkU2l6ZTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0aGlzLiNvICsgbyA-IHRoaXMuI3IubGVuZ3RoICYmCiAgICAgICAgICAgICAgICAodGhpcy5hbGxvd0xvb3NlICYmIHMgJiYgdGhpcy4jbyArIHIgPD0gdGhpcy4jci5sZW5ndGgKICAgICAgICAgICAgICAgICAgPyAobyA9IHIpCiAgICAgICAgICAgICAgICAgIDogKDAsIG4uYXNzZXJ0KSghMSwgJ2RhdGEgb3V0LW9mLWJvdW5kcycsICdCVUZGRVJfT1ZFUlJVTicsIHsKICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogKDAsIG4uZ2V0Qnl0ZXNDb3B5KSh0aGlzLiNyKSwKICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aDogdGhpcy4jci5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMuI28gKyBvCiAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgIHRoaXMuI3Iuc2xpY2UodGhpcy4jbywgdGhpcy4jbyArIG8pCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBzdWJSZWFkZXIoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gbmV3IGwodGhpcy4jci5zbGljZSh0aGlzLiNvICsgZSksIHRoaXMuYWxsb3dMb29zZSwgdGhpcy4jYyk7CiAgICAgICAgICAgIHJldHVybiAodC4jYSA9IHRoaXMpLCB0OwogICAgICAgICAgfQogICAgICAgICAgcmVhZEJ5dGVzKGUsIHQpIHsKICAgICAgICAgICAgbGV0IHIgPSB0aGlzLiNsKDAsIGUsICEhdCk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiN1KGUpLCAodGhpcy4jbyArPSByLmxlbmd0aCksIHIuc2xpY2UoMCwgZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZWFkVmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgbi50b0JpZ0ludCkodGhpcy5yZWFkQnl0ZXModC5Xb3JkU2l6ZSkpOwogICAgICAgICAgfQogICAgICAgICAgcmVhZEluZGV4KCkgewogICAgICAgICAgICByZXR1cm4gKDAsIG4udG9OdW1iZXIpKHRoaXMucmVhZEJ5dGVzKHQuV29yZFNpemUpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5SZWFkZXIgPSBsOwogICAgICB9LAogICAgICAzMTg0OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5BZGRyZXNzQ29kZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDM2ODApLAogICAgICAgICAgcyA9IHIoNTQ0MCksCiAgICAgICAgICBvID0gcig4MTY0KSwKICAgICAgICAgIGkgPSByKDczNzYpOwogICAgICAgIGNsYXNzIGEgZXh0ZW5kcyBpLkNvZGVyIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgc3VwZXIoJ2FkZHJlc3MnLCAnYWRkcmVzcycsIGUsICExKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlZmF1bHRWYWx1ZSgpIHsKICAgICAgICAgICAgcmV0dXJuICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUsIHQpIHsKICAgICAgICAgICAgbGV0IHIgPSBvLlR5cGVkLmRlcmVmZXJlbmNlKHQsICdzdHJpbmcnKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByID0gKDAsIG4uZ2V0QWRkcmVzcykocik7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdGhyb3dFcnJvcihlLm1lc3NhZ2UsIHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlLndyaXRlVmFsdWUocik7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvZGUoZSkgewogICAgICAgICAgICByZXR1cm4gKDAsIG4uZ2V0QWRkcmVzcykoKDAsIHMudG9CZUhleCkoZS5yZWFkVmFsdWUoKSwgMjApKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5BZGRyZXNzQ29kZXIgPSBhOwogICAgICB9LAogICAgICA4MjA4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5Bbm9ueW1vdXNDb2RlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNzM3Nik7CiAgICAgICAgY2xhc3MgcyBleHRlbmRzIG4uQ29kZXIgewogICAgICAgICAgY29kZXI7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgIHN1cGVyKGUubmFtZSwgZS50eXBlLCAnXycsIGUuZHluYW1pYyksICh0aGlzLmNvZGVyID0gZSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWZhdWx0VmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvZGVyLmRlZmF1bHRWYWx1ZSgpOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29kZXIuZW5jb2RlKGUsIHQpOwogICAgICAgICAgfQogICAgICAgICAgZGVjb2RlKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29kZXIuZGVjb2RlKGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkFub255bW91c0NvZGVyID0gczsKICAgICAgfSwKICAgICAgOTY2ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuQXJyYXlDb2RlciA9IHQudW5wYWNrID0gdC5wYWNrID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSByKDgxNjQpLAogICAgICAgICAgbyA9IHIoNzM3NiksCiAgICAgICAgICBpID0gcig4MjA4KTsKICAgICAgICBmdW5jdGlvbiBhKGUsIHQsIHIpIHsKICAgICAgICAgIGxldCBzID0gW107CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyKSkgcyA9IHI7CiAgICAgICAgICBlbHNlIGlmIChyICYmICdvYmplY3QnID09IHR5cGVvZiByKSB7CiAgICAgICAgICAgIGxldCBlID0ge307CiAgICAgICAgICAgIHMgPSB0Lm1hcCgodCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHMgPSB0LmxvY2FsTmFtZTsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0KShzLCAnY2Fubm90IGVuY29kZSBvYmplY3QgZm9yIHNpZ25hdHVyZSB3aXRoIG1pc3NpbmcgbmFtZXMnLCAnSU5WQUxJRF9BUkdVTUVOVCcsIHsKICAgICAgICAgICAgICAgICAgYXJndW1lbnQ6ICd2YWx1ZXMnLAogICAgICAgICAgICAgICAgICBpbmZvOiB7IGNvZGVyOiB0IH0sCiAgICAgICAgICAgICAgICAgIHZhbHVlOiByCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICgwLCBuLmFzc2VydCkoIWVbc10sICdjYW5ub3QgZW5jb2RlIG9iamVjdCBmb3Igc2lnbmF0dXJlIHdpdGggZHVwbGljYXRlIG5hbWVzJywgJ0lOVkFMSURfQVJHVU1FTlQnLCB7CiAgICAgICAgICAgICAgICAgIGFyZ3VtZW50OiAndmFsdWVzJywKICAgICAgICAgICAgICAgICAgaW5mbzogeyBjb2RlcjogdCB9LAogICAgICAgICAgICAgICAgICB2YWx1ZTogcgogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAoZVtzXSA9ICEwKSwKICAgICAgICAgICAgICAgIHJbc10KICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSAoMCwgbi5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIHR1cGxlIHZhbHVlJywgJ3R1cGxlJywgcik7CiAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkodC5sZW5ndGggPT09IHMubGVuZ3RoLCAndHlwZXMvdmFsdWUgbGVuZ3RoIG1pc21hdGNoJywgJ3R1cGxlJywgcik7CiAgICAgICAgICBsZXQgaSA9IG5ldyBvLldyaXRlcigpLAogICAgICAgICAgICBhID0gbmV3IG8uV3JpdGVyKCksCiAgICAgICAgICAgIGMgPSBbXTsKICAgICAgICAgIHQuZm9yRWFjaCgoZSwgdCkgPT4gewogICAgICAgICAgICBsZXQgciA9IHNbdF07CiAgICAgICAgICAgIGlmIChlLmR5bmFtaWMpIHsKICAgICAgICAgICAgICBsZXQgdCA9IGEubGVuZ3RoOwogICAgICAgICAgICAgIGUuZW5jb2RlKGEsIHIpOwogICAgICAgICAgICAgIGxldCBuID0gaS53cml0ZVVwZGF0YWJsZVZhbHVlKCk7CiAgICAgICAgICAgICAgYy5wdXNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICBuKGUgKyB0KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGUuZW5jb2RlKGksIHIpOwogICAgICAgICAgfSksCiAgICAgICAgICAgIGMuZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgICAgIGUoaS5sZW5ndGgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGxldCB1ID0gZS5hcHBlbmRXcml0ZXIoaSk7CiAgICAgICAgICByZXR1cm4gKHUgKz0gZS5hcHBlbmRXcml0ZXIoYSkpLCB1OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjKGUsIHQpIHsKICAgICAgICAgIGxldCByID0gW10sCiAgICAgICAgICAgIHMgPSBbXSwKICAgICAgICAgICAgaSA9IGUuc3ViUmVhZGVyKDApOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdC5mb3JFYWNoKCh0KSA9PiB7CiAgICAgICAgICAgICAgbGV0IG8gPSBudWxsOwogICAgICAgICAgICAgIGlmICh0LmR5bmFtaWMpIHsKICAgICAgICAgICAgICAgIGxldCByID0gZS5yZWFkSW5kZXgoKSwKICAgICAgICAgICAgICAgICAgcyA9IGkuc3ViUmVhZGVyKHIpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgbyA9IHQuZGVjb2RlKHMpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICBpZiAoKDAsIG4uaXNFcnJvcikoZSwgJ0JVRkZFUl9PVkVSUlVOJykpIHRocm93IGU7CiAgICAgICAgICAgICAgICAgIChvID0gZSksIChvLmJhc2VUeXBlID0gdC5uYW1lKSwgKG8ubmFtZSA9IHQubG9jYWxOYW1lKSwgKG8udHlwZSA9IHQudHlwZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBvID0gdC5kZWNvZGUoZSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIGlmICgoMCwgbi5pc0Vycm9yKShlLCAnQlVGRkVSX09WRVJSVU4nKSkgdGhyb3cgZTsKICAgICAgICAgICAgICAgICAgKG8gPSBlKSwgKG8uYmFzZVR5cGUgPSB0Lm5hbWUpLCAoby5uYW1lID0gdC5sb2NhbE5hbWUpLCAoby50eXBlID0gdC50eXBlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobnVsbCA9PSBvKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmVzdGlnYXRlJyk7CiAgICAgICAgICAgICAgci5wdXNoKG8pLCBzLnB1c2godC5sb2NhbE5hbWUgfHwgbnVsbCk7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBvLlJlc3VsdC5mcm9tSXRlbXMociwgcykKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgICh0LnBhY2sgPSBhKSwgKHQudW5wYWNrID0gYyk7CiAgICAgICAgY2xhc3MgdSBleHRlbmRzIG8uQ29kZXIgewogICAgICAgICAgY29kZXI7CiAgICAgICAgICBsZW5ndGg7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIHN1cGVyKCdhcnJheScsIGUudHlwZSArICdbJyArICh0ID49IDAgPyB0IDogJycpICsgJ10nLCByLCAtMSA9PT0gdCB8fCBlLmR5bmFtaWMpLAogICAgICAgICAgICAgICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgY29kZXI6IGUsIGxlbmd0aDogdCB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGRlZmF1bHRWYWx1ZSgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuY29kZXIuZGVmYXVsdFZhbHVlKCksCiAgICAgICAgICAgICAgdCA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHRoaXMubGVuZ3RoOyByKyspIHQucHVzaChlKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbmNvZGUoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gcy5UeXBlZC5kZXJlZmVyZW5jZSh0LCAnYXJyYXknKTsKICAgICAgICAgICAgQXJyYXkuaXNBcnJheShyKSB8fCB0aGlzLl90aHJvd0Vycm9yKCdleHBlY3RlZCBhcnJheSB2YWx1ZScsIHIpOwogICAgICAgICAgICBsZXQgbyA9IHRoaXMubGVuZ3RoOwogICAgICAgICAgICAtMSA9PT0gbyAmJiAoKG8gPSByLmxlbmd0aCksIGUud3JpdGVWYWx1ZShyLmxlbmd0aCkpLAogICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50Q291bnQpKHIubGVuZ3RoLCBvLCAnY29kZXIgYXJyYXknICsgKHRoaXMubG9jYWxOYW1lID8gJyAnICsgdGhpcy5sb2NhbE5hbWUgOiAnJykpOwogICAgICAgICAgICBsZXQgaSA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHIubGVuZ3RoOyBlKyspIGkucHVzaCh0aGlzLmNvZGVyKTsKICAgICAgICAgICAgcmV0dXJuIGEoZSwgaSwgcik7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvZGUoZSkgewogICAgICAgICAgICBsZXQgdCA9IHRoaXMubGVuZ3RoOwogICAgICAgICAgICAtMSA9PT0gdCAmJgogICAgICAgICAgICAgICgodCA9IGUucmVhZEluZGV4KCkpLAogICAgICAgICAgICAgICgwLCBuLmFzc2VydCkodCAqIG8uV29yZFNpemUgPD0gZS5kYXRhTGVuZ3RoLCAnaW5zdWZmaWNpZW50IGRhdGEgbGVuZ3RoJywgJ0JVRkZFUl9PVkVSUlVOJywgewogICAgICAgICAgICAgICAgYnVmZmVyOiBlLmJ5dGVzLAogICAgICAgICAgICAgICAgb2Zmc2V0OiB0ICogby5Xb3JkU2l6ZSwKICAgICAgICAgICAgICAgIGxlbmd0aDogZS5kYXRhTGVuZ3RoCiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBsZXQgciA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgci5wdXNoKG5ldyBpLkFub255bW91c0NvZGVyKHRoaXMuY29kZXIpKTsKICAgICAgICAgICAgcmV0dXJuIGMoZSwgcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuQXJyYXlDb2RlciA9IHU7CiAgICAgIH0sCiAgICAgIDIwMzI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkJvb2xlYW5Db2RlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoODE2NCksCiAgICAgICAgICBzID0gcig3Mzc2KTsKICAgICAgICBjbGFzcyBvIGV4dGVuZHMgcy5Db2RlciB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgIHN1cGVyKCdib29sJywgJ2Jvb2wnLCBlLCAhMSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWZhdWx0VmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgIH0KICAgICAgICAgIGVuY29kZShlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBuLlR5cGVkLmRlcmVmZXJlbmNlKHQsICdib29sJyk7CiAgICAgICAgICAgIHJldHVybiBlLndyaXRlVmFsdWUociA_IDEgOiAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlY29kZShlKSB7CiAgICAgICAgICAgIHJldHVybiAhIWUucmVhZFZhbHVlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuQm9vbGVhbkNvZGVyID0gbzsKICAgICAgfSwKICAgICAgMzQyNzogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuQnl0ZXNDb2RlciA9IHQuRHluYW1pY0J5dGVzQ29kZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoNzM3Nik7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIHMuQ29kZXIgewogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICBzdXBlcihlLCBlLCB0LCAhMCk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWZhdWx0VmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiAnMHgnOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUsIHQpIHsKICAgICAgICAgICAgdCA9ICgwLCBuLmdldEJ5dGVzQ29weSkodCk7CiAgICAgICAgICAgIGxldCByID0gZS53cml0ZVZhbHVlKHQubGVuZ3RoKTsKICAgICAgICAgICAgcmV0dXJuIChyICs9IGUud3JpdGVCeXRlcyh0KSksIHI7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvZGUoZSkgewogICAgICAgICAgICByZXR1cm4gZS5yZWFkQnl0ZXMoZS5yZWFkSW5kZXgoKSwgITApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAodC5EeW5hbWljQnl0ZXNDb2RlciA9IG8pLAogICAgICAgICAgKHQuQnl0ZXNDb2RlciA9IGNsYXNzIGV4dGVuZHMgbyB7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgICBzdXBlcignYnl0ZXMnLCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWNvZGUoZSkgewogICAgICAgICAgICAgIHJldHVybiAoMCwgbi5oZXhsaWZ5KShzdXBlci5kZWNvZGUoZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNjI2NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuRml4ZWRCeXRlc0NvZGVyID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSByKDgxNjQpLAogICAgICAgICAgbyA9IHIoNzM3Nik7CiAgICAgICAgY2xhc3MgaSBleHRlbmRzIG8uQ29kZXIgewogICAgICAgICAgc2l6ZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgbGV0IHIgPSAnYnl0ZXMnICsgU3RyaW5nKGUpOwogICAgICAgICAgICBzdXBlcihyLCByLCB0LCAhMSksICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgc2l6ZTogZSB9LCB7IHNpemU6ICdudW1iZXInIH0pOwogICAgICAgICAgfQogICAgICAgICAgZGVmYXVsdFZhbHVlKCkgewogICAgICAgICAgICByZXR1cm4gJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcuc3Vic3RyaW5nKDAsIDIgKyAyICogdGhpcy5zaXplKTsKICAgICAgICAgIH0KICAgICAgICAgIGVuY29kZShlLCB0KSB7CiAgICAgICAgICAgIGxldCByID0gKDAsIG4uZ2V0Qnl0ZXNDb3B5KShzLlR5cGVkLmRlcmVmZXJlbmNlKHQsIHRoaXMudHlwZSkpOwogICAgICAgICAgICByZXR1cm4gci5sZW5ndGggIT09IHRoaXMuc2l6ZSAmJiB0aGlzLl90aHJvd0Vycm9yKCdpbmNvcnJlY3QgZGF0YSBsZW5ndGgnLCB0KSwgZS53cml0ZUJ5dGVzKHIpOwogICAgICAgICAgfQogICAgICAgICAgZGVjb2RlKGUpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBuLmhleGxpZnkpKGUucmVhZEJ5dGVzKHRoaXMuc2l6ZSkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkZpeGVkQnl0ZXNDb2RlciA9IGk7CiAgICAgIH0sCiAgICAgIDY2MDg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0Lk51bGxDb2RlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNzM3NiksCiAgICAgICAgICBzID0gbmV3IFVpbnQ4QXJyYXkoW10pOwogICAgICAgIGNsYXNzIG8gZXh0ZW5kcyBuLkNvZGVyIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgc3VwZXIoJ251bGwnLCAnJywgZSwgITEpOwogICAgICAgICAgfQogICAgICAgICAgZGVmYXVsdFZhbHVlKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGVuY29kZShlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgJiYgdGhpcy5fdGhyb3dFcnJvcignbm90IG51bGwnLCB0KSwgZS53cml0ZUJ5dGVzKHMpOwogICAgICAgICAgfQogICAgICAgICAgZGVjb2RlKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUucmVhZEJ5dGVzKDApLCBudWxsOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0Lk51bGxDb2RlciA9IG87CiAgICAgIH0sCiAgICAgIDU3MzY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0Lk51bWJlckNvZGVyID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSByKDgxNjQpLAogICAgICAgICAgbyA9IHIoNzM3NiksCiAgICAgICAgICBpID0gQmlnSW50KDApLAogICAgICAgICAgYSA9IEJpZ0ludCgxKSwKICAgICAgICAgIGMgPSBCaWdJbnQoJzB4ZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZicpOwogICAgICAgIGNsYXNzIHUgZXh0ZW5kcyBvLkNvZGVyIHsKICAgICAgICAgIHNpemU7CiAgICAgICAgICBzaWduZWQ7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIGNvbnN0IHMgPSAodCA_ICdpbnQnIDogJ3VpbnQnKSArIDggKiBlOwogICAgICAgICAgICBzdXBlcihzLCBzLCByLCAhMSksCiAgICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBzaXplOiBlLCBzaWduZWQ6IHQgfSwgeyBzaXplOiAnbnVtYmVyJywgc2lnbmVkOiAnYm9vbGVhbicgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZWZhdWx0VmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUsIHQpIHsKICAgICAgICAgICAgbGV0IHIgPSAoMCwgbi5nZXRCaWdJbnQpKHMuVHlwZWQuZGVyZWZlcmVuY2UodCwgdGhpcy50eXBlKSksCiAgICAgICAgICAgICAgdSA9ICgwLCBuLm1hc2spKGMsIDggKiBvLldvcmRTaXplKTsKICAgICAgICAgICAgaWYgKHRoaXMuc2lnbmVkKSB7CiAgICAgICAgICAgICAgbGV0IGUgPSAoMCwgbi5tYXNrKSh1LCA4ICogdGhpcy5zaXplIC0gMSk7CiAgICAgICAgICAgICAgKHIgPiBlIHx8IHIgPCAtKGUgKyBhKSkgJiYgdGhpcy5fdGhyb3dFcnJvcigndmFsdWUgb3V0LW9mLWJvdW5kcycsIHQpLAogICAgICAgICAgICAgICAgKHIgPSAoMCwgbi50b1R3b3MpKHIsIDggKiBvLldvcmRTaXplKSk7CiAgICAgICAgICAgIH0gZWxzZSAociA8IGkgfHwgciA-ICgwLCBuLm1hc2spKHUsIDggKiB0aGlzLnNpemUpKSAmJiB0aGlzLl90aHJvd0Vycm9yKCd2YWx1ZSBvdXQtb2YtYm91bmRzJywgdCk7CiAgICAgICAgICAgIHJldHVybiBlLndyaXRlVmFsdWUocik7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvZGUoZSkgewogICAgICAgICAgICBsZXQgdCA9ICgwLCBuLm1hc2spKGUucmVhZFZhbHVlKCksIDggKiB0aGlzLnNpemUpOwogICAgICAgICAgICByZXR1cm4gdGhpcy5zaWduZWQgJiYgKHQgPSAoMCwgbi5mcm9tVHdvcykodCwgOCAqIHRoaXMuc2l6ZSkpLCB0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0Lk51bWJlckNvZGVyID0gdTsKICAgICAgfSwKICAgICAgNzQ3MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuU3RyaW5nQ29kZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDEwODgpLAogICAgICAgICAgcyA9IHIoODE2NCksCiAgICAgICAgICBvID0gcigzNDI3KTsKICAgICAgICBjbGFzcyBpIGV4dGVuZHMgby5EeW5hbWljQnl0ZXNDb2RlciB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgIHN1cGVyKCdzdHJpbmcnLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlZmF1bHRWYWx1ZSgpIHsKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmVuY29kZShlLCAoMCwgbi50b1V0ZjhCeXRlcykocy5UeXBlZC5kZXJlZmVyZW5jZSh0LCAnc3RyaW5nJykpKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlY29kZShlKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgbi50b1V0ZjhTdHJpbmcpKHN1cGVyLmRlY29kZShlKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuU3RyaW5nQ29kZXIgPSBpOwogICAgICB9LAogICAgICA2NTY0OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5UdXBsZUNvZGVyID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig0NzQ0KSwKICAgICAgICAgIHMgPSByKDgxNjQpLAogICAgICAgICAgbyA9IHIoNzM3NiksCiAgICAgICAgICBpID0gcig5NjY4KTsKICAgICAgICBjbGFzcyBhIGV4dGVuZHMgby5Db2RlciB7CiAgICAgICAgICBjb2RlcnM7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIGxldCByID0gITE7CiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTsKICAgICAgICAgICAgZS5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgICAgZS5keW5hbWljICYmIChyID0gITApLCBzLnB1c2goZS50eXBlKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgc3VwZXIoJ3R1cGxlJywgJ3R1cGxlKCcgKyBzLmpvaW4oJywnKSArICcpJywgdCwgciksCiAgICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBjb2RlcnM6IE9iamVjdC5mcmVlemUoZS5zbGljZSgpKSB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGRlZmF1bHRWYWx1ZSgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IFtdOwogICAgICAgICAgICB0aGlzLmNvZGVycy5mb3JFYWNoKCh0KSA9PiB7CiAgICAgICAgICAgICAgZS5wdXNoKHQuZGVmYXVsdFZhbHVlKCkpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuY29kZXJzLnJlZHVjZSgoZSwgdCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHIgPSB0LmxvY2FsTmFtZTsKICAgICAgICAgICAgICByZXR1cm4gciAmJiAoZVtyXSB8fCAoZVtyXSA9IDApLCBlW3JdKyspLCBlOwogICAgICAgICAgICB9LCB7fSk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgdGhpcy5jb2RlcnMuZm9yRWFjaCgociwgbikgPT4gewogICAgICAgICAgICAgICAgbGV0IHMgPSByLmxvY2FsTmFtZTsKICAgICAgICAgICAgICAgIHMgJiYgMSA9PT0gdFtzXSAmJiAoJ2xlbmd0aCcgPT09IHMgJiYgKHMgPSAnX2xlbmd0aCcpLCBudWxsID09IGVbc10gJiYgKGVbc10gPSBlW25dKSk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShlKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IHMuVHlwZWQuZGVyZWZlcmVuY2UodCwgJ3R1cGxlJyk7CiAgICAgICAgICAgIHJldHVybiAoMCwgaS5wYWNrKShlLCB0aGlzLmNvZGVycywgcik7CiAgICAgICAgICB9CiAgICAgICAgICBkZWNvZGUoZSkgewogICAgICAgICAgICByZXR1cm4gKDAsIGkudW5wYWNrKShlLCB0aGlzLmNvZGVycyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuVHVwbGVDb2RlciA9IGE7CiAgICAgIH0sCiAgICAgIDQ5ODA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5TdHJ1Y3RGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRnVuY3Rpb25GcmFnbWVudCA9CiAgICAgICAgICAgIHQuRmFsbGJhY2tGcmFnbWVudCA9CiAgICAgICAgICAgIHQuQ29uc3RydWN0b3JGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRXZlbnRGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRXJyb3JGcmFnbWVudCA9CiAgICAgICAgICAgIHQuTmFtZWRGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRnJhZ21lbnQgPQogICAgICAgICAgICB0LlBhcmFtVHlwZSA9CiAgICAgICAgICAgICAgdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSByKDY4OTYpOwogICAgICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgICAgY29uc3QgdCA9IG5ldyBTZXQoKTsKICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGUpID0-IHQuYWRkKGUpKSwgT2JqZWN0LmZyZWV6ZSh0KTsKICAgICAgICB9CiAgICAgICAgY29uc3QgaSA9IG8oJ2V4dGVybmFsIHB1YmxpYyBwYXlhYmxlJy5zcGxpdCgnICcpKSwKICAgICAgICAgIGEgPSAnY29uc3RhbnQgZXh0ZXJuYWwgaW50ZXJuYWwgcGF5YWJsZSBwcml2YXRlIHB1YmxpYyBwdXJlIHZpZXcnLAogICAgICAgICAgYyA9IG8oYS5zcGxpdCgnICcpKSwKICAgICAgICAgIHUgPSAnY29uc3RydWN0b3IgZXJyb3IgZXZlbnQgZmFsbGJhY2sgZnVuY3Rpb24gcmVjZWl2ZSBzdHJ1Y3QnLAogICAgICAgICAgbCA9IG8odS5zcGxpdCgnICcpKSwKICAgICAgICAgIGQgPSAnY2FsbGRhdGEgbWVtb3J5IHN0b3JhZ2UgcGF5YWJsZSBpbmRleGVkJywKICAgICAgICAgIGYgPSBvKGQuc3BsaXQoJyAnKSksCiAgICAgICAgICBoID0gbyhbdSwgZCwgJ3R1cGxlIHJldHVybnMnLCBhXS5qb2luKCcgJykuc3BsaXQoJyAnKSksCiAgICAgICAgICBnID0gewogICAgICAgICAgICAnKCc6ICdPUEVOX1BBUkVOJywKICAgICAgICAgICAgJyknOiAnQ0xPU0VfUEFSRU4nLAogICAgICAgICAgICAnWyc6ICdPUEVOX0JSQUNLRVQnLAogICAgICAgICAgICAnXSc6ICdDTE9TRV9CUkFDS0VUJywKICAgICAgICAgICAgJywnOiAnQ09NTUEnLAogICAgICAgICAgICAnQCc6ICdBVCcKICAgICAgICAgIH0sCiAgICAgICAgICBwID0gbmV3IFJlZ0V4cCgnXihcXHMqKScpLAogICAgICAgICAgbSA9IG5ldyBSZWdFeHAoJ14oWzAtOV0rKScpLAogICAgICAgICAgYiA9IG5ldyBSZWdFeHAoJ14oW2EtekEtWiRfXVthLXpBLVowLTkkX10qKScpLAogICAgICAgICAgeSA9IG5ldyBSZWdFeHAoJ14oW2EtekEtWiRfXVthLXpBLVowLTkkX10qKSQnKSwKICAgICAgICAgIEEgPSBuZXcgUmVnRXhwKCdeKGFkZHJlc3N8Ym9vbHxieXRlcyhbMC05XSopfHN0cmluZ3x1P2ludChbMC05XSopKSQnKTsKICAgICAgICBjbGFzcyB2IHsKICAgICAgICAgICNvOwogICAgICAgICAgI2Q7CiAgICAgICAgICBnZXQgb2Zmc2V0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jbzsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBsZW5ndGgoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNkLmxlbmd0aCAtIHRoaXMuI287CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgICh0aGlzLiNvID0gMCksICh0aGlzLiNkID0gZS5zbGljZSgpKTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IHYodGhpcy4jZCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgdGhpcy4jbyA9IDA7CiAgICAgICAgICB9CiAgICAgICAgICAjZihlID0gMCwgdCA9IDApIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB2KAogICAgICAgICAgICAgIHRoaXMuI2QKICAgICAgICAgICAgICAgIC5zbGljZShlLCB0KQogICAgICAgICAgICAgICAgLm1hcCgodCkgPT4KICAgICAgICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZSgKICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB0LCB7IG1hdGNoOiB0Lm1hdGNoIC0gZSwgbGlua0JhY2s6IHQubGlua0JhY2sgLSBlLCBsaW5rTmV4dDogdC5saW5rTmV4dCAtIGUgfSkKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgcG9wS2V5d29yZChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnBlZWsoKTsKICAgICAgICAgICAgaWYgKCdLRVlXT1JEJyAhPT0gdC50eXBlIHx8ICFlLmhhcyh0LnRleHQpKSB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkIGtleXdvcmQgJHt0LnRleHR9YCk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBvcCgpLnRleHQ7CiAgICAgICAgICB9CiAgICAgICAgICBwb3BUeXBlKGUpIHsKICAgICAgICAgICAgaWYgKHRoaXMucGVlaygpLnR5cGUgIT09IGUpIHRocm93IG5ldyBFcnJvcihgZXhwZWN0ZWQgJHtlfTsgZ290ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5wZWVrKCkpfWApOwogICAgICAgICAgICByZXR1cm4gdGhpcy5wb3AoKS50ZXh0OwogICAgICAgICAgfQogICAgICAgICAgcG9wUGFyZW4oKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlZWsoKTsKICAgICAgICAgICAgaWYgKCdPUEVOX1BBUkVOJyAhPT0gZS50eXBlKSB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBzdGFydCcpOwogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy4jZih0aGlzLiNvICsgMSwgZS5tYXRjaCArIDEpOwogICAgICAgICAgICByZXR1cm4gKHRoaXMuI28gPSBlLm1hdGNoICsgMSksIHQ7CiAgICAgICAgICB9CiAgICAgICAgICBwb3BQYXJhbXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlZWsoKTsKICAgICAgICAgICAgaWYgKCdPUEVOX1BBUkVOJyAhPT0gZS50eXBlKSB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBzdGFydCcpOwogICAgICAgICAgICBjb25zdCB0ID0gW107CiAgICAgICAgICAgIGZvciAoOyB0aGlzLiNvIDwgZS5tYXRjaCAtIDE7ICkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlZWsoKS5saW5rTmV4dDsKICAgICAgICAgICAgICB0LnB1c2godGhpcy4jZih0aGlzLiNvICsgMSwgZSkpLCAodGhpcy4jbyA9IGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAodGhpcy4jbyA9IGUubWF0Y2ggKyAxKSwgdDsKICAgICAgICAgIH0KICAgICAgICAgIHBlZWsoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLiNvID49IHRoaXMuI2QubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ291dC1vZi1ib3VuZHMnKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2RbdGhpcy4jb107CiAgICAgICAgICB9CiAgICAgICAgICBwZWVrS2V5d29yZChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnBlZWtUeXBlKCdLRVlXT1JEJyk7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHQgJiYgZS5oYXModCkgPyB0IDogbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHBlZWtUeXBlKGUpIHsKICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMubGVuZ3RoKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMucGVlaygpOwogICAgICAgICAgICByZXR1cm4gdC50eXBlID09PSBlID8gdC50ZXh0IDogbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHBvcCgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMucGVlaygpOwogICAgICAgICAgICByZXR1cm4gdGhpcy4jbysrLCBlOwogICAgICAgICAgfQogICAgICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgdCA9IHRoaXMuI287IHQgPCB0aGlzLiNkLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuI2RbdF07CiAgICAgICAgICAgICAgZS5wdXNoKGAke3IudHlwZX06JHtyLnRleHR9YCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGA8VG9rZW5TdHJpbmcgJHtlLmpvaW4oJyAnKX0-YDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gRShlKSB7CiAgICAgICAgICBjb25zdCB0ID0gW10sCiAgICAgICAgICAgIHIgPSAodCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHIgPSBpIDwgZS5sZW5ndGggPyBKU09OLnN0cmluZ2lmeShlW2ldKSA6ICckRU9JJzsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgdG9rZW4gJHtyfSBhdCAke2l9OiAke3R9YCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICBsZXQgcyA9IFtdLAogICAgICAgICAgICBvID0gW10sCiAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgZm9yICg7IGkgPCBlLmxlbmd0aDsgKSB7CiAgICAgICAgICAgIGxldCBhID0gZS5zdWJzdHJpbmcoaSksCiAgICAgICAgICAgICAgYyA9IGEubWF0Y2gocCk7CiAgICAgICAgICAgIGMgJiYgKChpICs9IGNbMV0ubGVuZ3RoKSwgKGEgPSBlLnN1YnN0cmluZyhpKSkpOwogICAgICAgICAgICBjb25zdCB1ID0gewogICAgICAgICAgICAgIGRlcHRoOiBzLmxlbmd0aCwKICAgICAgICAgICAgICBsaW5rQmFjazogLTEsCiAgICAgICAgICAgICAgbGlua05leHQ6IC0xLAogICAgICAgICAgICAgIG1hdGNoOiAtMSwKICAgICAgICAgICAgICB0eXBlOiAnJywKICAgICAgICAgICAgICB0ZXh0OiAnJywKICAgICAgICAgICAgICBvZmZzZXQ6IGksCiAgICAgICAgICAgICAgdmFsdWU6IC0xCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHQucHVzaCh1KTsKICAgICAgICAgICAgbGV0IGwgPSBnW2FbMF1dIHx8ICcnOwogICAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICAgIGlmICgoKHUudHlwZSA9IGwpLCAodS50ZXh0ID0gYVswXSksIGkrKywgJ09QRU5fUEFSRU4nID09PSBsKSkgcy5wdXNoKHQubGVuZ3RoIC0gMSksIG8ucHVzaCh0Lmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgIGVsc2UgaWYgKCdDTE9TRV9QQVJFTicgPT0gbCkKICAgICAgICAgICAgICAgIDAgPT09IHMubGVuZ3RoICYmIHIoJ25vIG1hdGNoaW5nIG9wZW4gYnJhY2tldCcpLAogICAgICAgICAgICAgICAgICAodS5tYXRjaCA9IHMucG9wKCkpLAogICAgICAgICAgICAgICAgICAodFt1Lm1hdGNoXS5tYXRjaCA9IHQubGVuZ3RoIC0gMSksCiAgICAgICAgICAgICAgICAgIHUuZGVwdGgtLSwKICAgICAgICAgICAgICAgICAgKHUubGlua0JhY2sgPSBvLnBvcCgpKSwKICAgICAgICAgICAgICAgICAgKHRbdS5saW5rQmFja10ubGlua05leHQgPSB0Lmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgIGVsc2UgaWYgKCdDT01NQScgPT09IGwpCiAgICAgICAgICAgICAgICAodS5saW5rQmFjayA9IG8ucG9wKCkpLCAodFt1LmxpbmtCYWNrXS5saW5rTmV4dCA9IHQubGVuZ3RoIC0gMSksIG8ucHVzaCh0Lmxlbmd0aCAtIDEpOwogICAgICAgICAgICAgIGVsc2UgaWYgKCdPUEVOX0JSQUNLRVQnID09PSBsKSB1LnR5cGUgPSAnQlJBQ0tFVCc7CiAgICAgICAgICAgICAgZWxzZSBpZiAoJ0NMT1NFX0JSQUNLRVQnID09PSBsKSB7CiAgICAgICAgICAgICAgICBsZXQgZSA9IHQucG9wKCkudGV4dDsKICAgICAgICAgICAgICAgIGlmICh0Lmxlbmd0aCA-IDAgJiYgJ05VTUJFUicgPT09IHRbdC5sZW5ndGggLSAxXS50eXBlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LnBvcCgpLnRleHQ7CiAgICAgICAgICAgICAgICAgIChlID0gciArIGUpLCAodFt0Lmxlbmd0aCAtIDFdLnZhbHVlID0gKDAsIG4uZ2V0TnVtYmVyKShyKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGggfHwgJ0JSQUNLRVQnICE9PSB0W3QubGVuZ3RoIC0gMV0udHlwZSkgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIG9wZW5pbmcgYnJhY2tldCcpOwogICAgICAgICAgICAgICAgdFt0Lmxlbmd0aCAtIDFdLnRleHQgKz0gZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoKChjID0gYS5tYXRjaChiKSksIGMpKSB7CiAgICAgICAgICAgICAgaWYgKCgodS50ZXh0ID0gY1sxXSksIChpICs9IHUudGV4dC5sZW5ndGgpLCBoLmhhcyh1LnRleHQpKSkgewogICAgICAgICAgICAgICAgdS50eXBlID0gJ0tFWVdPUkQnOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh1LnRleHQubWF0Y2goQSkpIHsKICAgICAgICAgICAgICAgIHUudHlwZSA9ICdUWVBFJzsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB1LnR5cGUgPSAnSUQnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmICgoKGMgPSBhLm1hdGNoKG0pKSwgIWMpKSB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgdG9rZW4gJHtKU09OLnN0cmluZ2lmeShhWzBdKX0gYXQgcG9zaXRpb24gJHtpfWApOwogICAgICAgICAgICAgICh1LnRleHQgPSBjWzFdKSwgKHUudHlwZSA9ICdOVU1CRVInKSwgKGkgKz0gdS50ZXh0Lmxlbmd0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgdih0Lm1hcCgoZSkgPT4gT2JqZWN0LmZyZWV6ZShlKSkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB3KGUsIHQpIHsKICAgICAgICAgIGxldCByID0gW107CiAgICAgICAgICBmb3IgKGNvbnN0IG4gaW4gdC5rZXlzKCkpIGUuaGFzKG4pICYmIHIucHVzaChuKTsKICAgICAgICAgIGlmIChyLmxlbmd0aCA-IDEpIHRocm93IG5ldyBFcnJvcihgY29uZmxpY3RpbmcgdHlwZXM6ICR7ci5qb2luKCcsICcpfWApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBUKGUsIHQpIHsKICAgICAgICAgIGlmICh0LnBlZWtLZXl3b3JkKGwpKSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSB0LnBvcCgpLnRleHQ7CiAgICAgICAgICAgIGlmIChyICE9PSBlKSB0aHJvdyBuZXcgRXJyb3IoYGV4cGVjdGVkICR7ZX0sIGdvdCAke3J9YCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdC5wb3BUeXBlKCdJRCcpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBQKGUsIHQpIHsKICAgICAgICAgIGNvbnN0IHIgPSBuZXcgU2V0KCk7CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnBlZWtUeXBlKCdLRVlXT1JEJyk7CiAgICAgICAgICAgIGlmIChudWxsID09IG4gfHwgKHQgJiYgIXQuaGFzKG4pKSkgYnJlYWs7CiAgICAgICAgICAgIGlmICgoZS5wb3AoKSwgci5oYXMobikpKSB0aHJvdyBuZXcgRXJyb3IoYGR1cGxpY2F0ZSBrZXl3b3JkczogJHtKU09OLnN0cmluZ2lmeShuKX1gKTsKICAgICAgICAgICAgci5hZGQobik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZShyKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gUyhlKSB7CiAgICAgICAgICBsZXQgdCA9IFAoZSwgYyk7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB3KHQsIG8oJ2NvbnN0YW50IHBheWFibGUgbm9ucGF5YWJsZScuc3BsaXQoJyAnKSkpLAogICAgICAgICAgICB3KHQsIG8oJ3B1cmUgdmlldyBwYXlhYmxlIG5vbnBheWFibGUnLnNwbGl0KCcgJykpKSwKICAgICAgICAgICAgdC5oYXMoJ3ZpZXcnKQogICAgICAgICAgICAgID8gJ3ZpZXcnCiAgICAgICAgICAgICAgOiB0LmhhcygncHVyZScpCiAgICAgICAgICAgICAgICA_ICdwdXJlJwogICAgICAgICAgICAgICAgOiB0LmhhcygncGF5YWJsZScpCiAgICAgICAgICAgICAgICAgID8gJ3BheWFibGUnCiAgICAgICAgICAgICAgICAgIDogdC5oYXMoJ25vbnBheWFibGUnKQogICAgICAgICAgICAgICAgICAgID8gJ25vbnBheWFibGUnCiAgICAgICAgICAgICAgICAgICAgOiB0LmhhcygnY29uc3RhbnQnKQogICAgICAgICAgICAgICAgICAgICAgPyAndmlldycKICAgICAgICAgICAgICAgICAgICAgIDogJ25vbnBheWFibGUnCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBPKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBlLnBvcFBhcmFtcygpLm1hcCgoZSkgPT4gXy5mcm9tKGUsIHQpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gUihlKSB7CiAgICAgICAgICBpZiAoZS5wZWVrVHlwZSgnQVQnKSkgewogICAgICAgICAgICBpZiAoKGUucG9wKCksIGUucGVla1R5cGUoJ05VTUJFUicpKSkgcmV0dXJuICgwLCBuLmdldEJpZ0ludCkoZS5wb3AoKS50ZXh0KTsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGdhcycpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIE4oZSkgewogICAgICAgICAgaWYgKGUubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYHVuZXhwZWN0ZWQgdG9rZW5zOiAke2UudG9TdHJpbmcoKX1gKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgTCA9IG5ldyBSZWdFeHAoL14oLiopXFsoWzAtOV0qKVxdJC8pOwogICAgICAgIGZ1bmN0aW9uIEIoZSkgewogICAgICAgICAgY29uc3QgdCA9IGUubWF0Y2goQSk7CiAgICAgICAgICBpZiAoKCgwLCBuLmFzc2VydEFyZ3VtZW50KSh0LCAnaW52YWxpZCB0eXBlJywgJ3R5cGUnLCBlKSwgJ3VpbnQnID09PSBlKSkgcmV0dXJuICd1aW50MjU2JzsKICAgICAgICAgIGlmICgnaW50JyA9PT0gZSkgcmV0dXJuICdpbnQyNTYnOwogICAgICAgICAgaWYgKHRbMl0pIHsKICAgICAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KHRbMl0pOwogICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoMCAhPT0gciAmJiByIDw9IDMyLCAnaW52YWxpZCBieXRlcyBsZW5ndGgnLCAndHlwZScsIGUpOwogICAgICAgICAgfSBlbHNlIGlmICh0WzNdKSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBwYXJzZUludCh0WzNdKTsKICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKDAgIT09IHIgJiYgciA8PSAyNTYgJiYgciAlIDggPT0gMCwgJ2ludmFsaWQgbnVtZXJpYyB3aWR0aCcsICd0eXBlJywgZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9CiAgICAgICAgY29uc3QgQyA9IHt9LAogICAgICAgICAgayA9IFN5bWJvbC5mb3IoJ19ldGhlcnNfaW50ZXJuYWwnKSwKICAgICAgICAgIEkgPSAnX1BhcmFtVHlwZUludGVybmFsJywKICAgICAgICAgIEYgPSAnX0Vycm9ySW50ZXJuYWwnLAogICAgICAgICAgTSA9ICdfRXZlbnRJbnRlcm5hbCcsCiAgICAgICAgICBKID0gJ19Db25zdHJ1Y3RvckludGVybmFsJywKICAgICAgICAgIFUgPSAnX0ZhbGxiYWNrSW50ZXJuYWwnLAogICAgICAgICAgRCA9ICdfRnVuY3Rpb25JbnRlcm5hbCcsCiAgICAgICAgICB4ID0gJ19TdHJ1Y3RJbnRlcm5hbCc7CiAgICAgICAgY2xhc3MgXyB7CiAgICAgICAgICBuYW1lOwogICAgICAgICAgdHlwZTsKICAgICAgICAgIGJhc2VUeXBlOwogICAgICAgICAgaW5kZXhlZDsKICAgICAgICAgIGNvbXBvbmVudHM7CiAgICAgICAgICBhcnJheUxlbmd0aDsKICAgICAgICAgIGFycmF5Q2hpbGRyZW47CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByLCBzLCBvLCBpLCBhLCBjKSB7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoKDAsIG4uYXNzZXJ0UHJpdmF0ZSkoZSwgQywgJ1BhcmFtVHlwZScpLAogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrLCB7IHZhbHVlOiBJIH0pLAogICAgICAgICAgICAgIGkgJiYgKGkgPSBPYmplY3QuZnJlZXplKGkuc2xpY2UoKSkpLAogICAgICAgICAgICAgICdhcnJheScgPT09IHMpCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlmIChudWxsID09IGEgfHwgbnVsbCA9PSBjKSB0aHJvdyBuZXcgRXJyb3IoJycpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gYSB8fCBudWxsICE9IGMpIHRocm93IG5ldyBFcnJvcignJyk7CiAgICAgICAgICAgIGlmICgndHVwbGUnID09PSBzKSB7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT0gaSkgdGhyb3cgbmV3IEVycm9yKCcnKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9IGkpIHRocm93IG5ldyBFcnJvcignJyk7CiAgICAgICAgICAgICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsKICAgICAgICAgICAgICBuYW1lOiB0LAogICAgICAgICAgICAgIHR5cGU6IHIsCiAgICAgICAgICAgICAgYmFzZVR5cGU6IHMsCiAgICAgICAgICAgICAgaW5kZXhlZDogbywKICAgICAgICAgICAgICBjb21wb25lbnRzOiBpLAogICAgICAgICAgICAgIGFycmF5TGVuZ3RoOiBhLAogICAgICAgICAgICAgIGFycmF5Q2hpbGRyZW46IGMKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3JtYXQoZSkgewogICAgICAgICAgICBpZiAoKG51bGwgPT0gZSAmJiAoZSA9ICdzaWdoYXNoJyksICdqc29uJyA9PT0gZSkpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5uYW1lIHx8ICcnOwogICAgICAgICAgICAgIGlmICh0aGlzLmlzQXJyYXkoKSkgewogICAgICAgICAgICAgICAgY29uc3QgZSA9IEpTT04ucGFyc2UodGhpcy5hcnJheUNoaWxkcmVuLmZvcm1hdCgnanNvbicpKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIChlLm5hbWUgPSB0KSwKICAgICAgICAgICAgICAgICAgKGUudHlwZSArPSBgWyR7dGhpcy5hcnJheUxlbmd0aCA8IDAgPyAnJyA6IFN0cmluZyh0aGlzLmFycmF5TGVuZ3RoKX1dYCksCiAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGUpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCByID0geyB0eXBlOiAndHVwbGUnID09PSB0aGlzLmJhc2VUeXBlID8gJ3R1cGxlJyA6IHRoaXMudHlwZSwgbmFtZTogdCB9OwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAnYm9vbGVhbicgPT0gdHlwZW9mIHRoaXMuaW5kZXhlZCAmJiAoci5pbmRleGVkID0gdGhpcy5pbmRleGVkKSwKICAgICAgICAgICAgICAgIHRoaXMuaXNUdXBsZSgpICYmIChyLmNvbXBvbmVudHMgPSB0aGlzLmNvbXBvbmVudHMubWFwKCh0KSA9PiBKU09OLnBhcnNlKHQuZm9ybWF0KGUpKSkpLAogICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocikKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCB0ID0gJyc7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgdGhpcy5pc0FycmF5KCkKICAgICAgICAgICAgICAgID8gKCh0ICs9IHRoaXMuYXJyYXlDaGlsZHJlbi5mb3JtYXQoZSkpLAogICAgICAgICAgICAgICAgICAodCArPSBgWyR7dGhpcy5hcnJheUxlbmd0aCA8IDAgPyAnJyA6IFN0cmluZyh0aGlzLmFycmF5TGVuZ3RoKX1dYCkpCiAgICAgICAgICAgICAgICA6IHRoaXMuaXNUdXBsZSgpCiAgICAgICAgICAgICAgICAgID8gKHQgKz0gJygnICsgdGhpcy5jb21wb25lbnRzLm1hcCgodCkgPT4gdC5mb3JtYXQoZSkpLmpvaW4oJ2Z1bGwnID09PSBlID8gJywgJyA6ICcsJykgKyAnKScpCiAgICAgICAgICAgICAgICAgIDogKHQgKz0gdGhpcy50eXBlKSwKICAgICAgICAgICAgICAnc2lnaGFzaCcgIT09IGUgJiYKICAgICAgICAgICAgICAgICghMCA9PT0gdGhpcy5pbmRleGVkICYmICh0ICs9ICcgaW5kZXhlZCcpLCAnZnVsbCcgPT09IGUgJiYgdGhpcy5uYW1lICYmICh0ICs9ICcgJyArIHRoaXMubmFtZSkpLAogICAgICAgICAgICAgIHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlzQXJyYXkoKSB7CiAgICAgICAgICAgIHJldHVybiAnYXJyYXknID09PSB0aGlzLmJhc2VUeXBlOwogICAgICAgICAgfQogICAgICAgICAgaXNUdXBsZSgpIHsKICAgICAgICAgICAgcmV0dXJuICd0dXBsZScgPT09IHRoaXMuYmFzZVR5cGU7CiAgICAgICAgICB9CiAgICAgICAgICBpc0luZGV4YWJsZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5pbmRleGVkOwogICAgICAgICAgfQogICAgICAgICAgd2FsayhlLCB0KSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzQXJyYXkoKSkgewogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShlKSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFycmF5IHZhbHVlJyk7CiAgICAgICAgICAgICAgaWYgKC0xICE9PSB0aGlzLmFycmF5TGVuZ3RoICYmIGUubGVuZ3RoICE9PSB0aGlzLmFycmF5TGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2FycmF5IGlzIHdyb25nIGxlbmd0aCcpOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzOwogICAgICAgICAgICAgIHJldHVybiBlLm1hcCgoZSkgPT4gci5hcnJheUNoaWxkcmVuLndhbGsoZSwgdCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmlzVHVwbGUoKSkgewogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShlKSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHR1cGxlIHZhbHVlJyk7CiAgICAgICAgICAgICAgaWYgKGUubGVuZ3RoICE9PSB0aGlzLmNvbXBvbmVudHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2FycmF5IGlzIHdyb25nIGxlbmd0aCcpOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzOwogICAgICAgICAgICAgIHJldHVybiBlLm1hcCgoZSwgbikgPT4gci5jb21wb25lbnRzW25dLndhbGsoZSwgdCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0KHRoaXMudHlwZSwgZSk7CiAgICAgICAgICB9CiAgICAgICAgICAjaChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzQXJyYXkoKSkgewogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFycmF5IHZhbHVlJyk7CiAgICAgICAgICAgICAgaWYgKC0xICE9PSB0aGlzLmFycmF5TGVuZ3RoICYmIHQubGVuZ3RoICE9PSB0aGlzLmFycmF5TGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2FycmF5IGlzIHdyb25nIGxlbmd0aCcpOwogICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmFycmF5Q2hpbGRyZW4sCiAgICAgICAgICAgICAgICBvID0gdC5zbGljZSgpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBvLmZvckVhY2goKHQsIG4pID0-IHsKICAgICAgICAgICAgICAgICAgcy4jaChlLCB0LCByLCAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIG9bbl0gPSBlOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgdm9pZCBuKG8pCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5pc1R1cGxlKCkpIHsKICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jb21wb25lbnRzOwogICAgICAgICAgICAgIGxldCBvOwogICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQpKSBvID0gdC5zbGljZSgpOwogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCB8fCAnb2JqZWN0JyAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHR1cGxlIHZhbHVlJyk7CiAgICAgICAgICAgICAgICBvID0gcy5tYXAoKGUpID0-IHsKICAgICAgICAgICAgICAgICAgaWYgKCFlLm5hbWUpIHRocm93IG5ldyBFcnJvcignY2Fubm90IHVzZSBvYmplY3QgdmFsdWUgd2l0aCB1bm5hbWVkIGNvbXBvbmVudHMnKTsKICAgICAgICAgICAgICAgICAgaWYgKCEoZS5uYW1lIGluIHQpKSB0aHJvdyBuZXcgRXJyb3IoYG1pc3NpbmcgdmFsdWUgZm9yIGNvbXBvbmVudCAke2UubmFtZX1gKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbZS5uYW1lXTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoby5sZW5ndGggIT09IHRoaXMuY29tcG9uZW50cy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignYXJyYXkgaXMgd3JvbmcgbGVuZ3RoJyk7CiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIG8uZm9yRWFjaCgodCwgbikgPT4gewogICAgICAgICAgICAgICAgICBzW25dLiNoKGUsIHQsIHIsIChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgb1tuXSA9IGU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB2b2lkIG4obykKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHMgPSByKHRoaXMudHlwZSwgdCk7CiAgICAgICAgICAgIHMudGhlbgogICAgICAgICAgICAgID8gZS5wdXNoKAogICAgICAgICAgICAgICAgICAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIG4oYXdhaXQgcyk7CiAgICAgICAgICAgICAgICAgIH0pKCkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICA6IG4ocyk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyB3YWxrQXN5bmMoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gW10sCiAgICAgICAgICAgICAgbiA9IFtlXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0aGlzLiNoKHIsIGUsIHQsIChlKSA9PiB7CiAgICAgICAgICAgICAgICBuWzBdID0gZTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICByLmxlbmd0aCAmJiAoYXdhaXQgUHJvbWlzZS5hbGwocikpLAogICAgICAgICAgICAgIG5bMF0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tKGUsIHQpIHsKICAgICAgICAgICAgaWYgKF8uaXNQYXJhbVR5cGUoZSkpIHJldHVybiBlOwogICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGUpCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBfLmZyb20oRShlKSwgdCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCBwYXJhbSB0eXBlJywgJ29iaicsIGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIHYpIHsKICAgICAgICAgICAgICBsZXQgciA9ICcnLAogICAgICAgICAgICAgICAgbiA9ICcnLAogICAgICAgICAgICAgICAgcyA9IG51bGw7CiAgICAgICAgICAgICAgUChlLCBvKFsndHVwbGUnXSkpLmhhcygndHVwbGUnKSB8fCBlLnBlZWtUeXBlKCdPUEVOX1BBUkVOJykKICAgICAgICAgICAgICAgID8gKChuID0gJ3R1cGxlJyksCiAgICAgICAgICAgICAgICAgIChzID0gZS5wb3BQYXJhbXMoKS5tYXAoKGUpID0-IF8uZnJvbShlKSkpLAogICAgICAgICAgICAgICAgICAociA9IGB0dXBsZSgke3MubWFwKChlKSA9PiBlLmZvcm1hdCgpKS5qb2luKCcsJyl9KWApKQogICAgICAgICAgICAgICAgOiAoKHIgPSBCKGUucG9wVHlwZSgnVFlQRScpKSksIChuID0gcikpOwogICAgICAgICAgICAgIGxldCBpID0gbnVsbCwKICAgICAgICAgICAgICAgIGEgPSBudWxsOwogICAgICAgICAgICAgIGZvciAoOyBlLmxlbmd0aCAmJiBlLnBlZWtUeXBlKCdCUkFDS0VUJyk7ICkgewogICAgICAgICAgICAgICAgY29uc3QgdCA9IGUucG9wKCk7CiAgICAgICAgICAgICAgICAoaSA9IG5ldyBfKEMsICcnLCByLCBuLCBudWxsLCBzLCBhLCBpKSksIChhID0gdC52YWx1ZSksIChyICs9IHQudGV4dCksIChuID0gJ2FycmF5JyksIChzID0gbnVsbCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCBjID0gbnVsbDsKICAgICAgICAgICAgICBpZiAoUChlLCBmKS5oYXMoJ2luZGV4ZWQnKSkgewogICAgICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBuZXcgRXJyb3IoJycpOwogICAgICAgICAgICAgICAgYyA9ICEwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCB1ID0gZS5wZWVrVHlwZSgnSUQnKSA_IGUucG9wKCkudGV4dCA6ICcnOwogICAgICAgICAgICAgIGlmIChlLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdsZWZ0b3ZlciB0b2tlbnMnKTsKICAgICAgICAgICAgICByZXR1cm4gbmV3IF8oQywgdSwgciwgbiwgYywgcywgYSwgaSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgciA9IGUubmFtZTsKICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCFyIHx8ICgnc3RyaW5nJyA9PSB0eXBlb2YgciAmJiByLm1hdGNoKHkpKSwgJ2ludmFsaWQgbmFtZScsICdvYmoubmFtZScsIHIpOwogICAgICAgICAgICBsZXQgcyA9IGUuaW5kZXhlZDsKICAgICAgICAgICAgbnVsbCAhPSBzICYmICgoMCwgbi5hc3NlcnRBcmd1bWVudCkodCwgJ3BhcmFtZXRlciBjYW5ub3QgYmUgaW5kZXhlZCcsICdvYmouaW5kZXhlZCcsIGUuaW5kZXhlZCksIChzID0gISFzKSk7CiAgICAgICAgICAgIGxldCBpID0gZS50eXBlLAogICAgICAgICAgICAgIGEgPSBpLm1hdGNoKEwpOwogICAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJzZUludChhWzJdIHx8ICctMScpLAogICAgICAgICAgICAgICAgbiA9IF8uZnJvbSh7IHR5cGU6IGFbMV0sIGNvbXBvbmVudHM6IGUuY29tcG9uZW50cyB9KTsKICAgICAgICAgICAgICByZXR1cm4gbmV3IF8oQywgciB8fCAnJywgaSwgJ2FycmF5JywgcywgbnVsbCwgdCwgbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCd0dXBsZScgPT09IGkgfHwgaS5zdGFydHNXaXRoKCd0dXBsZSgnKSB8fCBpLnN0YXJ0c1dpdGgoJygnKSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBudWxsICE9IGUuY29tcG9uZW50cyA_IGUuY29tcG9uZW50cy5tYXAoKGUpID0-IF8uZnJvbShlKSkgOiBudWxsOwogICAgICAgICAgICAgIHJldHVybiBuZXcgXyhDLCByIHx8ICcnLCBpLCAndHVwbGUnLCBzLCB0LCBudWxsLCBudWxsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKGkgPSBCKGUudHlwZSkpLCBuZXcgXyhDLCByIHx8ICcnLCBpLCBpLCBzLCBudWxsLCBudWxsLCBudWxsKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpc1BhcmFtVHlwZShlKSB7CiAgICAgICAgICAgIHJldHVybiBlICYmIGVba10gPT09IEk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuUGFyYW1UeXBlID0gXzsKICAgICAgICBjbGFzcyBHIHsKICAgICAgICAgIHR5cGU7CiAgICAgICAgICBpbnB1dHM7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgICgwLCBuLmFzc2VydFByaXZhdGUpKGUsIEMsICdGcmFnbWVudCcpLAogICAgICAgICAgICAgIChyID0gT2JqZWN0LmZyZWV6ZShyLnNsaWNlKCkpKSwKICAgICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IHR5cGU6IHQsIGlucHV0czogciB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tKGUpIHsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEcuZnJvbShKU09OLnBhcnNlKGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgIHJldHVybiBHLmZyb20oRShlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiB2KQogICAgICAgICAgICAgIHN3aXRjaCAoZS5wZWVrS2V5d29yZChsKSkgewogICAgICAgICAgICAgICAgY2FzZSAnY29uc3RydWN0b3InOgogICAgICAgICAgICAgICAgICByZXR1cm4gUS5mcm9tKGUpOwogICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOgogICAgICAgICAgICAgICAgICByZXR1cm4gWC5mcm9tKGUpOwogICAgICAgICAgICAgICAgY2FzZSAnZXZlbnQnOgogICAgICAgICAgICAgICAgICByZXR1cm4gVi5mcm9tKGUpOwogICAgICAgICAgICAgICAgY2FzZSAnZmFsbGJhY2snOgogICAgICAgICAgICAgICAgY2FzZSAncmVjZWl2ZSc6CiAgICAgICAgICAgICAgICAgIHJldHVybiBaLmZyb20oZSk7CiAgICAgICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6CiAgICAgICAgICAgICAgICAgIHJldHVybiB6LmZyb20oZSk7CiAgICAgICAgICAgICAgICBjYXNlICdzdHJ1Y3QnOgogICAgICAgICAgICAgICAgICByZXR1cm4gSy5mcm9tKGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoJ29iamVjdCcgPT0gdHlwZW9mIGUpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSAnY29uc3RydWN0b3InOgogICAgICAgICAgICAgICAgICByZXR1cm4gUS5mcm9tKGUpOwogICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOgogICAgICAgICAgICAgICAgICByZXR1cm4gWC5mcm9tKGUpOwogICAgICAgICAgICAgICAgY2FzZSAnZXZlbnQnOgogICAgICAgICAgICAgICAgICByZXR1cm4gVi5mcm9tKGUpOwogICAgICAgICAgICAgICAgY2FzZSAnZmFsbGJhY2snOgogICAgICAgICAgICAgICAgY2FzZSAncmVjZWl2ZSc6CiAgICAgICAgICAgICAgICAgIHJldHVybiBaLmZyb20oZSk7CiAgICAgICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6CiAgICAgICAgICAgICAgICAgIHJldHVybiB6LmZyb20oZSk7CiAgICAgICAgICAgICAgICBjYXNlICdzdHJ1Y3QnOgogICAgICAgICAgICAgICAgICByZXR1cm4gSy5mcm9tKGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAoMCwgbi5hc3NlcnQpKCExLCBgdW5zdXBwb3J0ZWQgdHlwZTogJHtlLnR5cGV9YCwgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsgb3BlcmF0aW9uOiAnRnJhZ21lbnQuZnJvbScgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCAndW5zdXBwb3J0ZWQgZnJnYW1lbnQgb2JqZWN0JywgJ29iaicsIGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzQ29uc3RydWN0b3IoZSkgewogICAgICAgICAgICByZXR1cm4gUS5pc0ZyYWdtZW50KGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzRXJyb3IoZSkgewogICAgICAgICAgICByZXR1cm4gWC5pc0ZyYWdtZW50KGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzRXZlbnQoZSkgewogICAgICAgICAgICByZXR1cm4gVi5pc0ZyYWdtZW50KGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzRnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gei5pc0ZyYWdtZW50KGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzU3RydWN0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIEsuaXNGcmFnbWVudChlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5GcmFnbWVudCA9IEc7CiAgICAgICAgY2xhc3MgaiBleHRlbmRzIEcgewogICAgICAgICAgbmFtZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIHMpIHsKICAgICAgICAgICAgc3VwZXIoZSwgdCwgcyksCiAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCdzdHJpbmcnID09IHR5cGVvZiByICYmIHIubWF0Y2goeSksICdpbnZhbGlkIGlkZW50aWZpZXInLCAnbmFtZScsIHIpLAogICAgICAgICAgICAgIChzID0gT2JqZWN0LmZyZWV6ZShzLnNsaWNlKCkpKSwKICAgICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IG5hbWU6IHIgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEgoZSwgdCkgewogICAgICAgICAgcmV0dXJuICcoJyArIHQubWFwKCh0KSA9PiB0LmZvcm1hdChlKSkuam9pbignZnVsbCcgPT09IGUgPyAnLCAnIDogJywnKSArICcpJzsKICAgICAgICB9CiAgICAgICAgdC5OYW1lZEZyYWdtZW50ID0gajsKICAgICAgICBjbGFzcyBYIGV4dGVuZHMgaiB7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIHN1cGVyKGUsICdlcnJvcicsIHQsIHIpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgaywgeyB2YWx1ZTogRiB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBzZWxlY3RvcigpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBzLmlkKSh0aGlzLmZvcm1hdCgnc2lnaGFzaCcpKS5zdWJzdHJpbmcoMCwgMTApOwogICAgICAgICAgfQogICAgICAgICAgZm9ybWF0KGUpIHsKICAgICAgICAgICAgaWYgKChudWxsID09IGUgJiYgKGUgPSAnc2lnaGFzaCcpLCAnanNvbicgPT09IGUpKQogICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgICAgICAgICAgaW5wdXRzOiB0aGlzLmlucHV0cy5tYXAoKHQpID0-IEpTT04ucGFyc2UodC5mb3JtYXQoZSkpKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCB0ID0gW107CiAgICAgICAgICAgIHJldHVybiAnc2lnaGFzaCcgIT09IGUgJiYgdC5wdXNoKCdlcnJvcicpLCB0LnB1c2godGhpcy5uYW1lICsgSChlLCB0aGlzLmlucHV0cykpLCB0LmpvaW4oJyAnKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tKGUpIHsKICAgICAgICAgICAgaWYgKFguaXNGcmFnbWVudChlKSkgcmV0dXJuIGU7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkgcmV0dXJuIFguZnJvbShFKGUpKTsKICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiB2KSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IFQoJ2Vycm9yJywgZSksCiAgICAgICAgICAgICAgICByID0gTyhlKTsKICAgICAgICAgICAgICByZXR1cm4gTihlKSwgbmV3IFgoQywgdCwgcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5ldyBYKEMsIGUubmFtZSwgZS5pbnB1dHMgPyBlLmlucHV0cy5tYXAoXy5mcm9tKSA6IFtdKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpc0ZyYWdtZW50KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgJiYgZVtrXSA9PT0gRjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5FcnJvckZyYWdtZW50ID0gWDsKICAgICAgICBjbGFzcyBWIGV4dGVuZHMgaiB7CiAgICAgICAgICBhbm9ueW1vdXM7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByLCBzKSB7CiAgICAgICAgICAgIHN1cGVyKGUsICdldmVudCcsIHQsIHIpLAogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrLCB7IHZhbHVlOiBNIH0pLAogICAgICAgICAgICAgICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgYW5vbnltb3VzOiBzIH0pOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHRvcGljSGFzaCgpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBzLmlkKSh0aGlzLmZvcm1hdCgnc2lnaGFzaCcpKTsKICAgICAgICAgIH0KICAgICAgICAgIGZvcm1hdChlKSB7CiAgICAgICAgICAgIGlmICgobnVsbCA9PSBlICYmIChlID0gJ3NpZ2hhc2gnKSwgJ2pzb24nID09PSBlKSkKICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgdHlwZTogJ2V2ZW50JywKICAgICAgICAgICAgICAgIGFub255bW91czogdGhpcy5hbm9ueW1vdXMsCiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICAgICAgICBpbnB1dHM6IHRoaXMuaW5wdXRzLm1hcCgodCkgPT4gSlNPTi5wYXJzZSh0LmZvcm1hdChlKSkpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAnc2lnaGFzaCcgIT09IGUgJiYgdC5wdXNoKCdldmVudCcpLAogICAgICAgICAgICAgIHQucHVzaCh0aGlzLm5hbWUgKyBIKGUsIHRoaXMuaW5wdXRzKSksCiAgICAgICAgICAgICAgJ3NpZ2hhc2gnICE9PSBlICYmIHRoaXMuYW5vbnltb3VzICYmIHQucHVzaCgnYW5vbnltb3VzJyksCiAgICAgICAgICAgICAgdC5qb2luKCcgJykKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBnZXRUb3BpY0hhc2goZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKHQgPSAodCB8fCBbXSkubWFwKChlKSA9PiBfLmZyb20oZSkpKSwgbmV3IFYoQywgZSwgdCwgITEpLnRvcGljSGFzaDsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tKGUpIHsKICAgICAgICAgICAgaWYgKFYuaXNGcmFnbWVudChlKSkgcmV0dXJuIGU7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIFYuZnJvbShFKGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIGV2ZW50IGZyYWdtZW50JywgJ29iaicsIGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIHYpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gVCgnZXZlbnQnLCBlKSwKICAgICAgICAgICAgICAgIHIgPSBPKGUsICEwKSwKICAgICAgICAgICAgICAgIG4gPSAhIVAoZSwgbyhbJ2Fub255bW91cyddKSkuaGFzKCdhbm9ueW1vdXMnKTsKICAgICAgICAgICAgICByZXR1cm4gTihlKSwgbmV3IFYoQywgdCwgciwgbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG5ldyBWKEMsIGUubmFtZSwgZS5pbnB1dHMgPyBlLmlucHV0cy5tYXAoKGUpID0-IF8uZnJvbShlLCAhMCkpIDogW10sICEhZS5hbm9ueW1vdXMpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzRnJhZ21lbnQoZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJiBlW2tdID09PSBNOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkV2ZW50RnJhZ21lbnQgPSBWOwogICAgICAgIGNsYXNzIFEgZXh0ZW5kcyBHIHsKICAgICAgICAgIHBheWFibGU7CiAgICAgICAgICBnYXM7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByLCBzLCBvKSB7CiAgICAgICAgICAgIHN1cGVyKGUsIHQsIHIpLAogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrLCB7IHZhbHVlOiBKIH0pLAogICAgICAgICAgICAgICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgcGF5YWJsZTogcywgZ2FzOiBvIH0pOwogICAgICAgICAgfQogICAgICAgICAgZm9ybWF0KGUpIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgoMCwgbi5hc3NlcnQpKAogICAgICAgICAgICAgICAgbnVsbCAhPSBlICYmICdzaWdoYXNoJyAhPT0gZSwKICAgICAgICAgICAgICAgICdjYW5ub3QgZm9ybWF0IGEgY29uc3RydWN0b3IgZm9yIHNpZ2hhc2gnLAogICAgICAgICAgICAgICAgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsCiAgICAgICAgICAgICAgICB7IG9wZXJhdGlvbjogJ2Zvcm1hdChzaWdoYXNoKScgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgJ2pzb24nID09PSBlKQogICAgICAgICAgICApCiAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgIHR5cGU6ICdjb25zdHJ1Y3RvcicsCiAgICAgICAgICAgICAgICBzdGF0ZU11dGFiaWxpdHk6IHRoaXMucGF5YWJsZSA_ICdwYXlhYmxlJyA6ICd1bmRlZmluZWQnLAogICAgICAgICAgICAgICAgcGF5YWJsZTogdGhpcy5wYXlhYmxlLAogICAgICAgICAgICAgICAgZ2FzOiBudWxsICE9IHRoaXMuZ2FzID8gdGhpcy5nYXMgOiB2b2lkIDAsCiAgICAgICAgICAgICAgICBpbnB1dHM6IHRoaXMuaW5wdXRzLm1hcCgodCkgPT4gSlNPTi5wYXJzZSh0LmZvcm1hdChlKSkpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHQgPSBbYGNvbnN0cnVjdG9yJHtIKGUsIHRoaXMuaW5wdXRzKX1gXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0aGlzLnBheWFibGUgJiYgdC5wdXNoKCdwYXlhYmxlJyksIG51bGwgIT0gdGhpcy5nYXMgJiYgdC5wdXNoKGBAJHt0aGlzLmdhcy50b1N0cmluZygpfWApLCB0LmpvaW4oJyAnKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb20oZSkgewogICAgICAgICAgICBpZiAoUS5pc0ZyYWdtZW50KGUpKSByZXR1cm4gZTsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKQogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUS5mcm9tKEUoZSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSghMSwgJ2ludmFsaWQgY29uc3R1Y3RvciBmcmFnbWVudCcsICdvYmonLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUgaW5zdGFuY2VvZiB2KSB7CiAgICAgICAgICAgICAgUChlLCBvKFsnY29uc3RydWN0b3InXSkpOwogICAgICAgICAgICAgIGNvbnN0IHQgPSBPKGUpLAogICAgICAgICAgICAgICAgciA9ICEhUChlLCBpKS5oYXMoJ3BheWFibGUnKSwKICAgICAgICAgICAgICAgIG4gPSBSKGUpOwogICAgICAgICAgICAgIHJldHVybiBOKGUpLCBuZXcgUShDLCAnY29uc3RydWN0b3InLCB0LCByLCBuKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbmV3IFEoCiAgICAgICAgICAgICAgQywKICAgICAgICAgICAgICAnY29uc3RydWN0b3InLAogICAgICAgICAgICAgIGUuaW5wdXRzID8gZS5pbnB1dHMubWFwKF8uZnJvbSkgOiBbXSwKICAgICAgICAgICAgICAhIWUucGF5YWJsZSwKICAgICAgICAgICAgICBudWxsICE9IGUuZ2FzID8gZS5nYXMgOiBudWxsCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgaXNGcmFnbWVudChlKSB7CiAgICAgICAgICAgIHJldHVybiBlICYmIGVba10gPT09IEo7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuQ29uc3RydWN0b3JGcmFnbWVudCA9IFE7CiAgICAgICAgY2xhc3MgWiBleHRlbmRzIEcgewogICAgICAgICAgcGF5YWJsZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgc3VwZXIoZSwgJ2ZhbGxiYWNrJywgdCksCiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGssIHsgdmFsdWU6IFUgfSksCiAgICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBwYXlhYmxlOiByIH0pOwogICAgICAgICAgfQogICAgICAgICAgZm9ybWF0KGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IDAgPT09IHRoaXMuaW5wdXRzLmxlbmd0aCA_ICdyZWNlaXZlJyA6ICdmYWxsYmFjayc7CiAgICAgICAgICAgIGlmICgnanNvbicgPT09IGUpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5wYXlhYmxlID8gJ3BheWFibGUnIDogJ25vbnBheWFibGUnOwogICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IHR5cGU6IHQsIHN0YXRlTXV0YWJpbGl0eTogZSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYCR7dH0oKSR7dGhpcy5wYXlhYmxlID8gJyBwYXlhYmxlJyA6ICcnfWA7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZnJvbShlKSB7CiAgICAgICAgICAgIGlmIChaLmlzRnJhZ21lbnQoZSkpIHJldHVybiBlOwogICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGUpCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBaLmZyb20oRShlKSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCBmYWxsYmFjayBmcmFnbWVudCcsICdvYmonLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUgaW5zdGFuY2VvZiB2KSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgIHIgPSBlLnBlZWtLZXl3b3JkKG8oWydmYWxsYmFjaycsICdyZWNlaXZlJ10pKTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoKDAsIG4uYXNzZXJ0QXJndW1lbnQpKHIsICd0eXBlIG11c3QgYmUgZmFsbGJhY2sgb3IgcmVjZWl2ZScsICdvYmonLCB0KSwKICAgICAgICAgICAgICAgICdyZWNlaXZlJyA9PT0gZS5wb3BLZXl3b3JkKG8oWydmYWxsYmFjaycsICdyZWNlaXZlJ10pKSkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBPKGUpOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKDAgPT09IHQubGVuZ3RoLCAncmVjZWl2ZSBjYW5ub3QgaGF2ZSBhcmd1bWVudHMnLCAnb2JqLmlucHV0cycsIHQpLAogICAgICAgICAgICAgICAgICBQKGUsIG8oWydwYXlhYmxlJ10pKSwKICAgICAgICAgICAgICAgICAgTihlKSwKICAgICAgICAgICAgICAgICAgbmV3IFooQywgW10sICEwKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbGV0IHMgPSBPKGUpOwogICAgICAgICAgICAgIHMubGVuZ3RoCiAgICAgICAgICAgICAgICA_ICgwLCBuLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgICAgICAxID09PSBzLmxlbmd0aCAmJiAnYnl0ZXMnID09PSBzWzBdLnR5cGUsCiAgICAgICAgICAgICAgICAgICAgJ2ludmFsaWQgZmFsbGJhY2sgaW5wdXRzJywKICAgICAgICAgICAgICAgICAgICAnb2JqLmlucHV0cycsCiAgICAgICAgICAgICAgICAgICAgcy5tYXAoKGUpID0-IGUuZm9ybWF0KCdtaW5pbWFsJykpLmpvaW4oJywgJykKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgOiAocyA9IFtfLmZyb20oJ2J5dGVzJyldKTsKICAgICAgICAgICAgICBjb25zdCBpID0gUyhlKTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoKDAsIG4uYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICAnbm9ucGF5YWJsZScgPT09IGkgfHwgJ3BheWFibGUnID09PSBpLAogICAgICAgICAgICAgICAgICAnZmFsbGJhY2sgY2Fubm90IGJlIGNvbnN0YW50cycsCiAgICAgICAgICAgICAgICAgICdvYmouc3RhdGVNdXRhYmlsaXR5JywKICAgICAgICAgICAgICAgICAgaQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIFAoZSwgbyhbJ3JldHVybnMnXSkpLmhhcygncmV0dXJucycpKQogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgY29uc3QgdCA9IE8oZSk7CiAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgIDEgPT09IHQubGVuZ3RoICYmICdieXRlcycgPT09IHRbMF0udHlwZSwKICAgICAgICAgICAgICAgICAgJ2ludmFsaWQgZmFsbGJhY2sgb3V0cHV0cycsCiAgICAgICAgICAgICAgICAgICdvYmoub3V0cHV0cycsCiAgICAgICAgICAgICAgICAgIHQubWFwKChlKSA9PiBlLmZvcm1hdCgnbWluaW1hbCcpKS5qb2luKCcsICcpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gTihlKSwgbmV3IFooQywgcywgJ3BheWFibGUnID09PSBpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJ3JlY2VpdmUnID09PSBlLnR5cGUpIHJldHVybiBuZXcgWihDLCBbXSwgITApOwogICAgICAgICAgICBpZiAoJ2ZhbGxiYWNrJyA9PT0gZS50eXBlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IFtfLmZyb20oJ2J5dGVzJyldLAogICAgICAgICAgICAgICAgciA9ICdwYXlhYmxlJyA9PT0gZS5zdGF0ZU11dGFiaWxpdHk7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBaKEMsIHQsIHIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSghMSwgJ2ludmFsaWQgZmFsbGJhY2sgZGVzY3JpcHRpb24nLCAnb2JqJywgZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgaXNGcmFnbWVudChlKSB7CiAgICAgICAgICAgIHJldHVybiBlICYmIGVba10gPT09IFU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuRmFsbGJhY2tGcmFnbWVudCA9IFo7CiAgICAgICAgY2xhc3MgeiBleHRlbmRzIGogewogICAgICAgICAgY29uc3RhbnQ7CiAgICAgICAgICBvdXRwdXRzOwogICAgICAgICAgc3RhdGVNdXRhYmlsaXR5OwogICAgICAgICAgcGF5YWJsZTsKICAgICAgICAgIGdhczsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIHMsIG8sIGkpIHsKICAgICAgICAgICAgc3VwZXIoZSwgJ2Z1bmN0aW9uJywgdCwgcyksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrLCB7IHZhbHVlOiBEIH0pLCAobyA9IE9iamVjdC5mcmVlemUoby5zbGljZSgpKSk7CiAgICAgICAgICAgIGNvbnN0IGEgPSAndmlldycgPT09IHIgfHwgJ3B1cmUnID09PSByLAogICAgICAgICAgICAgIGMgPSAncGF5YWJsZScgPT09IHI7CiAgICAgICAgICAgICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgY29uc3RhbnQ6IGEsIGdhczogaSwgb3V0cHV0czogbywgcGF5YWJsZTogYywgc3RhdGVNdXRhYmlsaXR5OiByIH0pOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHNlbGVjdG9yKCkgewogICAgICAgICAgICByZXR1cm4gKDAsIHMuaWQpKHRoaXMuZm9ybWF0KCdzaWdoYXNoJykpLnN1YnN0cmluZygwLCAxMCk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3JtYXQoZSkgewogICAgICAgICAgICBpZiAoKG51bGwgPT0gZSAmJiAoZSA9ICdzaWdoYXNoJyksICdqc29uJyA9PT0gZSkpCiAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsCiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgICAgICAgICBjb25zdGFudDogdGhpcy5jb25zdGFudCwKICAgICAgICAgICAgICAgIHN0YXRlTXV0YWJpbGl0eTogJ25vbnBheWFibGUnICE9PSB0aGlzLnN0YXRlTXV0YWJpbGl0eSA_IHRoaXMuc3RhdGVNdXRhYmlsaXR5IDogdm9pZCAwLAogICAgICAgICAgICAgICAgcGF5YWJsZTogdGhpcy5wYXlhYmxlLAogICAgICAgICAgICAgICAgZ2FzOiBudWxsICE9IHRoaXMuZ2FzID8gdGhpcy5nYXMgOiB2b2lkIDAsCiAgICAgICAgICAgICAgICBpbnB1dHM6IHRoaXMuaW5wdXRzLm1hcCgodCkgPT4gSlNPTi5wYXJzZSh0LmZvcm1hdChlKSkpLAogICAgICAgICAgICAgICAgb3V0cHV0czogdGhpcy5vdXRwdXRzLm1hcCgodCkgPT4gSlNPTi5wYXJzZSh0LmZvcm1hdChlKSkpCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAnc2lnaGFzaCcgIT09IGUgJiYgdC5wdXNoKCdmdW5jdGlvbicpLAogICAgICAgICAgICAgIHQucHVzaCh0aGlzLm5hbWUgKyBIKGUsIHRoaXMuaW5wdXRzKSksCiAgICAgICAgICAgICAgJ3NpZ2hhc2gnICE9PSBlICYmCiAgICAgICAgICAgICAgICAoJ25vbnBheWFibGUnICE9PSB0aGlzLnN0YXRlTXV0YWJpbGl0eSAmJiB0LnB1c2godGhpcy5zdGF0ZU11dGFiaWxpdHkpLAogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzICYmIHRoaXMub3V0cHV0cy5sZW5ndGggJiYgKHQucHVzaCgncmV0dXJucycpLCB0LnB1c2goSChlLCB0aGlzLm91dHB1dHMpKSksCiAgICAgICAgICAgICAgICBudWxsICE9IHRoaXMuZ2FzICYmIHQucHVzaChgQCR7dGhpcy5nYXMudG9TdHJpbmcoKX1gKSksCiAgICAgICAgICAgICAgdC5qb2luKCcgJykKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBnZXRTZWxlY3RvcihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiAodCA9ICh0IHx8IFtdKS5tYXAoKGUpID0-IF8uZnJvbShlKSkpLCBuZXcgeihDLCBlLCAndmlldycsIHQsIFtdLCBudWxsKS5zZWxlY3RvcjsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tKGUpIHsKICAgICAgICAgICAgaWYgKHouaXNGcmFnbWVudChlKSkgcmV0dXJuIGU7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHouZnJvbShFKGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIGZ1bmN0aW9uIGZyYWdtZW50JywgJ29iaicsIGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIHYpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gVCgnZnVuY3Rpb24nLCBlKSwKICAgICAgICAgICAgICAgIHIgPSBPKGUpLAogICAgICAgICAgICAgICAgbiA9IFMoZSk7CiAgICAgICAgICAgICAgbGV0IHMgPSBbXTsKICAgICAgICAgICAgICBQKGUsIG8oWydyZXR1cm5zJ10pKS5oYXMoJ3JldHVybnMnKSAmJiAocyA9IE8oZSkpOwogICAgICAgICAgICAgIGNvbnN0IGkgPSBSKGUpOwogICAgICAgICAgICAgIHJldHVybiBOKGUpLCBuZXcgeihDLCB0LCBuLCByLCBzLCBpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdCA9IGUuc3RhdGVNdXRhYmlsaXR5OwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIG51bGwgPT0gdCAmJgogICAgICAgICAgICAgICAgKCh0ID0gJ3BheWFibGUnKSwKICAgICAgICAgICAgICAgICdib29sZWFuJyA9PSB0eXBlb2YgZS5jb25zdGFudAogICAgICAgICAgICAgICAgICA_ICgodCA9ICd2aWV3JyksCiAgICAgICAgICAgICAgICAgICAgZS5jb25zdGFudCB8fCAoKHQgPSAncGF5YWJsZScpLCAnYm9vbGVhbicgIT0gdHlwZW9mIGUucGF5YWJsZSB8fCBlLnBheWFibGUgfHwgKHQgPSAnbm9ucGF5YWJsZScpKSkKICAgICAgICAgICAgICAgICAgOiAnYm9vbGVhbicgIT0gdHlwZW9mIGUucGF5YWJsZSB8fCBlLnBheWFibGUgfHwgKHQgPSAnbm9ucGF5YWJsZScpKSwKICAgICAgICAgICAgICBuZXcgeigKICAgICAgICAgICAgICAgIEMsCiAgICAgICAgICAgICAgICBlLm5hbWUsCiAgICAgICAgICAgICAgICB0LAogICAgICAgICAgICAgICAgZS5pbnB1dHMgPyBlLmlucHV0cy5tYXAoXy5mcm9tKSA6IFtdLAogICAgICAgICAgICAgICAgZS5vdXRwdXRzID8gZS5vdXRwdXRzLm1hcChfLmZyb20pIDogW10sCiAgICAgICAgICAgICAgICBudWxsICE9IGUuZ2FzID8gZS5nYXMgOiBudWxsCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzRnJhZ21lbnQoZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJiBlW2tdID09PSBEOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkZ1bmN0aW9uRnJhZ21lbnQgPSB6OwogICAgICAgIGNsYXNzIEsgZXh0ZW5kcyBqIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgc3VwZXIoZSwgJ3N0cnVjdCcsIHQsIHIpLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgaywgeyB2YWx1ZTogeCB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGZvcm1hdCgpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdAVE9ETycpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb20oZSkgewogICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGUpCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBLLmZyb20oRShlKSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCBzdHJ1Y3QgZnJhZ21lbnQnLCAnb2JqJywgZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlIGluc3RhbmNlb2YgdikgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBUKCdzdHJ1Y3QnLCBlKSwKICAgICAgICAgICAgICAgIHIgPSBPKGUpOwogICAgICAgICAgICAgIHJldHVybiBOKGUpLCBuZXcgSyhDLCB0LCByKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbmV3IEsoQywgZS5uYW1lLCBlLmlucHV0cyA_IGUuaW5wdXRzLm1hcChfLmZyb20pIDogW10pOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzRnJhZ21lbnQoZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJiBlW2tdID09PSB4OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LlN0cnVjdEZyYWdtZW50ID0gSzsKICAgICAgfSwKICAgICAgMjI3NjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LlR5cGVkID0KICAgICAgICAgICAgdC5SZXN1bHQgPQogICAgICAgICAgICB0LlRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPQogICAgICAgICAgICB0LkxvZ0Rlc2NyaXB0aW9uID0KICAgICAgICAgICAgdC5FcnJvckRlc2NyaXB0aW9uID0KICAgICAgICAgICAgdC5JbnRlcmZhY2UgPQogICAgICAgICAgICB0LkluZGV4ZWQgPQogICAgICAgICAgICB0LmNoZWNrUmVzdWx0RXJyb3JzID0KICAgICAgICAgICAgdC5TdHJ1Y3RGcmFnbWVudCA9CiAgICAgICAgICAgIHQuUGFyYW1UeXBlID0KICAgICAgICAgICAgdC5OYW1lZEZyYWdtZW50ID0KICAgICAgICAgICAgdC5GdW5jdGlvbkZyYWdtZW50ID0KICAgICAgICAgICAgdC5GcmFnbWVudCA9CiAgICAgICAgICAgIHQuRmFsbGJhY2tGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRXZlbnRGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRXJyb3JGcmFnbWVudCA9CiAgICAgICAgICAgIHQuQ29uc3RydWN0b3JGcmFnbWVudCA9CiAgICAgICAgICAgIHQuZW5jb2RlQnl0ZXMzMlN0cmluZyA9CiAgICAgICAgICAgIHQuZGVjb2RlQnl0ZXMzMlN0cmluZyA9CiAgICAgICAgICAgIHQuQWJpQ29kZXIgPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgdmFyIG4gPSByKDIwMjgpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnQWJpQ29kZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi5BYmlDb2RlcjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgcyA9IHIoODQ4NCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkZWNvZGVCeXRlczMyU3RyaW5nJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHMuZGVjb2RlQnl0ZXMzMlN0cmluZzsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZW5jb2RlQnl0ZXMzMlN0cmluZycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLmVuY29kZUJ5dGVzMzJTdHJpbmc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBvID0gcig0OTgwKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NvbnN0cnVjdG9yRnJhZ21lbnQnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gby5Db25zdHJ1Y3RvckZyYWdtZW50OwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFcnJvckZyYWdtZW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uRXJyb3JGcmFnbWVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0V2ZW50RnJhZ21lbnQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5FdmVudEZyYWdtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRmFsbGJhY2tGcmFnbWVudCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLkZhbGxiYWNrRnJhZ21lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGcmFnbWVudCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLkZyYWdtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRnVuY3Rpb25GcmFnbWVudCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLkZ1bmN0aW9uRnJhZ21lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdOYW1lZEZyYWdtZW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uTmFtZWRGcmFnbWVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1BhcmFtVHlwZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLlBhcmFtVHlwZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1N0cnVjdEZyYWdtZW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uU3RydWN0RnJhZ21lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBpID0gcig3MjQ0KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2NoZWNrUmVzdWx0RXJyb3JzJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuY2hlY2tSZXN1bHRFcnJvcnM7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0luZGV4ZWQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5JbmRleGVkOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnSW50ZXJmYWNlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuSW50ZXJmYWNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRXJyb3JEZXNjcmlwdGlvbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBpLkVycm9yRGVzY3JpcHRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdMb2dEZXNjcmlwdGlvbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBpLkxvZ0Rlc2NyaXB0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVHJhbnNhY3Rpb25EZXNjcmlwdGlvbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBpLlRyYW5zYWN0aW9uRGVzY3JpcHRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdSZXN1bHQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5SZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBhID0gcig4MTY0KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1R5cGVkJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGEuVHlwZWQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDcyNDQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5JbnRlcmZhY2UgPQogICAgICAgICAgICB0LkluZGV4ZWQgPQogICAgICAgICAgICB0LkVycm9yRGVzY3JpcHRpb24gPQogICAgICAgICAgICB0LlRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPQogICAgICAgICAgICB0LkxvZ0Rlc2NyaXB0aW9uID0KICAgICAgICAgICAgdC5SZXN1bHQgPQogICAgICAgICAgICB0LmNoZWNrUmVzdWx0RXJyb3JzID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDk4NzIpLAogICAgICAgICAgcyA9IHIoNjg5NiksCiAgICAgICAgICBvID0gcig1MzE2KSwKICAgICAgICAgIGkgPSByKDIwMjgpLAogICAgICAgICAgYSA9IHIoNzM3Nik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdjaGVja1Jlc3VsdEVycm9ycycsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBhLmNoZWNrUmVzdWx0RXJyb3JzOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdSZXN1bHQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYS5SZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIGNvbnN0IGMgPSByKDQ5ODApLAogICAgICAgICAgdSA9IHIoODE2NCk7CiAgICAgICAgY2xhc3MgbCB7CiAgICAgICAgICBmcmFnbWVudDsKICAgICAgICAgIG5hbWU7CiAgICAgICAgICBzaWduYXR1cmU7CiAgICAgICAgICB0b3BpYzsKICAgICAgICAgIGFyZ3M7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSBlLm5hbWUsCiAgICAgICAgICAgICAgcyA9IGUuZm9ybWF0KCk7CiAgICAgICAgICAgICgwLCBvLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgZnJhZ21lbnQ6IGUsIG5hbWU6IG4sIHNpZ25hdHVyZTogcywgdG9waWM6IHQsIGFyZ3M6IHIgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuTG9nRGVzY3JpcHRpb24gPSBsOwogICAgICAgIGNsYXNzIGQgewogICAgICAgICAgZnJhZ21lbnQ7CiAgICAgICAgICBuYW1lOwogICAgICAgICAgYXJnczsKICAgICAgICAgIHNpZ25hdHVyZTsKICAgICAgICAgIHNlbGVjdG9yOwogICAgICAgICAgdmFsdWU7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgIGNvbnN0IHMgPSBlLm5hbWUsCiAgICAgICAgICAgICAgaSA9IGUuZm9ybWF0KCk7CiAgICAgICAgICAgICgwLCBvLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgZnJhZ21lbnQ6IGUsIG5hbWU6IHMsIGFyZ3M6IHIsIHNpZ25hdHVyZTogaSwgc2VsZWN0b3I6IHQsIHZhbHVlOiBuIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LlRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSBkOwogICAgICAgIGNsYXNzIGYgewogICAgICAgICAgZnJhZ21lbnQ7CiAgICAgICAgICBuYW1lOwogICAgICAgICAgYXJnczsKICAgICAgICAgIHNpZ25hdHVyZTsKICAgICAgICAgIHNlbGVjdG9yOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICBjb25zdCBuID0gZS5uYW1lLAogICAgICAgICAgICAgIHMgPSBlLmZvcm1hdCgpOwogICAgICAgICAgICAoMCwgby5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGZyYWdtZW50OiBlLCBuYW1lOiBuLCBhcmdzOiByLCBzaWduYXR1cmU6IHMsIHNlbGVjdG9yOiB0IH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkVycm9yRGVzY3JpcHRpb24gPSBmOwogICAgICAgIGNsYXNzIGggewogICAgICAgICAgaGFzaDsKICAgICAgICAgIF9pc0luZGV4ZWQ7CiAgICAgICAgICBzdGF0aWMgaXNJbmRleGVkKGUpIHsKICAgICAgICAgICAgcmV0dXJuICEoIWUgfHwgIWUuX2lzSW5kZXhlZCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgICgwLCBvLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgaGFzaDogZSwgX2lzSW5kZXhlZDogITAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuSW5kZXhlZCA9IGg7CiAgICAgICAgY29uc3QgZyA9IHsKICAgICAgICAgICAgMDogJ2dlbmVyaWMgcGFuaWMnLAogICAgICAgICAgICAxOiAnYXNzZXJ0KGZhbHNlKScsCiAgICAgICAgICAgIDE3OiAnYXJpdGhtZXRpYyBvdmVyZmxvdycsCiAgICAgICAgICAgIDE4OiAnZGl2aXNpb24gb3IgbW9kdWxvIGJ5IHplcm8nLAogICAgICAgICAgICAzMzogJ2VudW0gb3ZlcmZsb3cnLAogICAgICAgICAgICAzNDogJ2ludmFsaWQgZW5jb2RlZCBzdG9yYWdlIGJ5dGUgYXJyYXkgYWNjZXNzZWQnLAogICAgICAgICAgICA0OTogJ291dC1vZi1ib3VuZHMgYXJyYXkgYWNjZXNzOyBwb3BwaW5nIG9uIGFuIGVtcHR5IGFycmF5JywKICAgICAgICAgICAgNTA6ICdvdXQtb2YtYm91bmRzIGFjY2VzcyBvZiBhbiBhcnJheSBvciBieXRlc04nLAogICAgICAgICAgICA2NTogJ291dCBvZiBtZW1vcnknLAogICAgICAgICAgICA4MTogJ3VuaW5pdGlhbGl6ZWQgZnVuY3Rpb24nCiAgICAgICAgICB9LAogICAgICAgICAgcCA9IHsKICAgICAgICAgICAgJzB4MDhjMzc5YTAnOiB7CiAgICAgICAgICAgICAgc2lnbmF0dXJlOiAnRXJyb3Ioc3RyaW5nKScsCiAgICAgICAgICAgICAgbmFtZTogJ0Vycm9yJywKICAgICAgICAgICAgICBpbnB1dHM6IFsnc3RyaW5nJ10sCiAgICAgICAgICAgICAgcmVhc29uOiAoZSkgPT4gYHJldmVydGVkIHdpdGggcmVhc29uIHN0cmluZyAke0pTT04uc3RyaW5naWZ5KGUpfWAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJzB4NGU0ODdiNzEnOiB7CiAgICAgICAgICAgICAgc2lnbmF0dXJlOiAnUGFuaWModWludDI1NiknLAogICAgICAgICAgICAgIG5hbWU6ICdQYW5pYycsCiAgICAgICAgICAgICAgaW5wdXRzOiBbJ3VpbnQyNTYnXSwKICAgICAgICAgICAgICByZWFzb246IChlKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgdCA9ICd1bmtub3duIHBhbmljIGNvZGUnOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgZSA-PSAwICYmIGUgPD0gMjU1ICYmIGdbZS50b1N0cmluZygpXSAmJiAodCA9IGdbZS50b1N0cmluZygpXSksCiAgICAgICAgICAgICAgICAgIGByZXZlcnRlZCB3aXRoIHBhbmljIGNvZGUgMHgke2UudG9TdHJpbmcoMTYpfSAoJHt0fSlgCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICBjbGFzcyBtIHsKICAgICAgICAgIGZyYWdtZW50czsKICAgICAgICAgIGRlcGxveTsKICAgICAgICAgIGZhbGxiYWNrOwogICAgICAgICAgcmVjZWl2ZTsKICAgICAgICAgICNnOwogICAgICAgICAgI3A7CiAgICAgICAgICAjbTsKICAgICAgICAgICNiOwogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICBsZXQgdCA9IFtdOwogICAgICAgICAgICAodCA9ICdzdHJpbmcnID09IHR5cGVvZiBlID8gSlNPTi5wYXJzZShlKSA6IGUpLAogICAgICAgICAgICAgICh0aGlzLiNtID0gbmV3IE1hcCgpKSwKICAgICAgICAgICAgICAodGhpcy4jZyA9IG5ldyBNYXAoKSksCiAgICAgICAgICAgICAgKHRoaXMuI3AgPSBuZXcgTWFwKCkpOwogICAgICAgICAgICBjb25zdCByID0gW107CiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0KQogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByLnB1c2goYy5GcmFnbWVudC5mcm9tKGUpKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRUUnLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICgwLCBvLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgZnJhZ21lbnRzOiBPYmplY3QuZnJlZXplKHIpIH0pOwogICAgICAgICAgICBsZXQgbiA9IG51bGwsCiAgICAgICAgICAgICAgcyA9ICExOwogICAgICAgICAgICAodGhpcy4jYiA9IHRoaXMuZ2V0QWJpQ29kZXIoKSksCiAgICAgICAgICAgICAgdGhpcy5mcmFnbWVudHMuZm9yRWFjaCgoZSwgdCkgPT4gewogICAgICAgICAgICAgICAgbGV0IHI7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkgewogICAgICAgICAgICAgICAgICBjYXNlICdjb25zdHJ1Y3Rvcic6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVwbG95CiAgICAgICAgICAgICAgICAgICAgICA_IHZvaWQgY29uc29sZS5sb2coJ2R1cGxpY2F0ZSBkZWZpbml0aW9uIC0gY29uc3RydWN0b3InKQogICAgICAgICAgICAgICAgICAgICAgOiB2b2lkICgwLCBvLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgZGVwbG95OiBlIH0pOwogICAgICAgICAgICAgICAgICBjYXNlICdmYWxsYmFjayc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgKDAgPT09IGUuaW5wdXRzLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgPyAocyA9ICEwKQogICAgICAgICAgICAgICAgICAgICAgOiAoKDAsIG8uYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICAgICAgICAgICFuIHx8IGUucGF5YWJsZSAhPT0gbi5wYXlhYmxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICdjb25mbGljdGluZyBmYWxsYmFjayBmcmFnbWVudHMnLAogICAgICAgICAgICAgICAgICAgICAgICAgIGBmcmFnbWVudHNbJHt0fV1gLAogICAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBlKSwKICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSBuLnBheWFibGUpKSk7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzoKICAgICAgICAgICAgICAgICAgICByID0gdGhpcy4jbTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAnZXZlbnQnOgogICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLiNwOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlICdlcnJvcic6CiAgICAgICAgICAgICAgICAgICAgciA9IHRoaXMuI2c7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgaSA9IGUuZm9ybWF0KCk7CiAgICAgICAgICAgICAgICByLmhhcyhpKSB8fCByLnNldChpLCBlKTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB0aGlzLmRlcGxveSB8fCAoMCwgby5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGRlcGxveTogYy5Db25zdHJ1Y3RvckZyYWdtZW50LmZyb20oJ2NvbnN0cnVjdG9yKCknKSB9KSwKICAgICAgICAgICAgICAoMCwgby5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGZhbGxiYWNrOiBuLCByZWNlaXZlOiBzIH0pOwogICAgICAgICAgfQogICAgICAgICAgZm9ybWF0KGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IGUgPyAnbWluaW1hbCcgOiAnZnVsbCc7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyYWdtZW50cy5tYXAoKGUpID0-IGUuZm9ybWF0KHQpKTsKICAgICAgICAgIH0KICAgICAgICAgIGZvcm1hdEpzb24oKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmZyYWdtZW50cy5tYXAoKGUpID0-IGUuZm9ybWF0KCdqc29uJykpOwogICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZS5tYXAoKGUpID0-IEpTT04ucGFyc2UoZSkpKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldEFiaUNvZGVyKCkgewogICAgICAgICAgICByZXR1cm4gaS5BYmlDb2Rlci5kZWZhdWx0QWJpQ29kZXIoKTsKICAgICAgICAgIH0KICAgICAgICAgICN5KGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKCgwLCBvLmlzSGV4U3RyaW5nKShlKSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuI20udmFsdWVzKCkpIGlmICh0ID09PSBlLnNlbGVjdG9yKSByZXR1cm4gZTsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoLTEgPT09IGUuaW5kZXhPZignKCcpKSB7CiAgICAgICAgICAgICAgY29uc3QgbiA9IFtdOwogICAgICAgICAgICAgIGZvciAoY29uc3QgW3QsIHJdIG9mIHRoaXMuI20pIHQuc3BsaXQoJygnKVswXSA9PT0gZSAmJiBuLnB1c2gocik7CiAgICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxlbmd0aCA-IDAgPyB0W3QubGVuZ3RoIC0gMV0gOiBudWxsOwogICAgICAgICAgICAgICAgbGV0IHIgPSB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgcyA9ICEwOwogICAgICAgICAgICAgICAgdS5UeXBlZC5pc1R5cGVkKGUpICYmICdvdmVycmlkZXMnID09PSBlLnR5cGUgJiYgKChzID0gITEpLCByLS0pOwogICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IG4ubGVuZ3RoIC0gMTsgZSA-PSAwOyBlLS0pIHsKICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG5bZV0uaW5wdXRzLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgdCA9PT0gciB8fCAocyAmJiB0ID09PSByIC0gMSkgfHwgbi5zcGxpY2UoZSwgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gbi5sZW5ndGggLSAxOyBlID49IDA7IGUtLSkgewogICAgICAgICAgICAgICAgICBjb25zdCByID0gbltlXS5pbnB1dHM7CiAgICAgICAgICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgdC5sZW5ndGg7IHMrKykKICAgICAgICAgICAgICAgICAgICBpZiAodS5UeXBlZC5pc1R5cGVkKHRbc10pKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocyA-PSByLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ292ZXJyaWRlcycgPT09IHRbc10udHlwZSkgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgIG4uc3BsaWNlKGUsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGlmICh0W3NdLnR5cGUgIT09IHJbc10uYmFzZVR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbi5zcGxpY2UoZSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKDEgPT09IG4ubGVuZ3RoICYmIHQgJiYgdC5sZW5ndGggIT09IG5bMF0uaW5wdXRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgY29uc3QgZSA9IHRbdC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgIChudWxsID09IGUgfHwgQXJyYXkuaXNBcnJheShlKSB8fCAnb2JqZWN0JyAhPSB0eXBlb2YgZSkgJiYgbi5zcGxpY2UoMCwgMSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgaWYgKG4ubGVuZ3RoID4gMSAmJiByKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5tYXAoKGUpID0-IEpTT04uc3RyaW5naWZ5KGUuZm9ybWF0KCkpKS5qb2luKCcsICcpOwogICAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKCExLCBgYW1iaWd1b3VzIGZ1bmN0aW9uIGRlc2NyaXB0aW9uIChpLmUuIG1hdGNoZXMgJHt0fSlgLCAna2V5JywgZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBuWzBdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNtLmdldChjLkZ1bmN0aW9uRnJhZ21lbnQuZnJvbShlKS5mb3JtYXQoKSkgfHwgbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGdldEZ1bmN0aW9uTmFtZShlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLiN5KGUsIG51bGwsICExKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBvLmFzc2VydEFyZ3VtZW50KSh0LCAnbm8gbWF0Y2hpbmcgZnVuY3Rpb24nLCAna2V5JywgZSksIHQubmFtZTsKICAgICAgICAgIH0KICAgICAgICAgIGhhc0Z1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy4jeShlLCBudWxsLCAhMSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRGdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiN5KGUsIHQgfHwgbnVsbCwgITApOwogICAgICAgICAgfQogICAgICAgICAgZm9yRWFjaEZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IEFycmF5LmZyb20odGhpcy4jbS5rZXlzKCkpOwogICAgICAgICAgICB0LnNvcnQoKGUsIHQpID0-IGUubG9jYWxlQ29tcGFyZSh0KSk7CiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgIGNvbnN0IG4gPSB0W3JdOwogICAgICAgICAgICAgIGUodGhpcy4jbS5nZXQobiksIHIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAjQShlLCB0LCByKSB7CiAgICAgICAgICAgIGlmICgoMCwgby5pc0hleFN0cmluZykoZSkpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLiNwLnZhbHVlcygpKSBpZiAodCA9PT0gZS50b3BpY0hhc2gpIHJldHVybiBlOwogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgtMSA9PT0gZS5pbmRleE9mKCcoJykpIHsKICAgICAgICAgICAgICBjb25zdCBuID0gW107CiAgICAgICAgICAgICAgZm9yIChjb25zdCBbdCwgcl0gb2YgdGhpcy4jcCkgdC5zcGxpdCgnKCcpWzBdID09PSBlICYmIG4ucHVzaChyKTsKICAgICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IG4ubGVuZ3RoIC0gMTsgZSA-PSAwOyBlLS0pIG5bZV0uaW5wdXRzLmxlbmd0aCA8IHQubGVuZ3RoICYmIG4uc3BsaWNlKGUsIDEpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IG4ubGVuZ3RoIC0gMTsgZSA-PSAwOyBlLS0pIHsKICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5bZV0uaW5wdXRzOwogICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHQubGVuZ3RoOyBzKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKHUuVHlwZWQuaXNUeXBlZCh0W3NdKSAmJiB0W3NdLnR5cGUgIT09IHJbc10uYmFzZVR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgIG4uc3BsaWNlKGUsIDEpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHJldHVybiBudWxsOwogICAgICAgICAgICAgIGlmIChuLmxlbmd0aCA-IDEgJiYgcikgewogICAgICAgICAgICAgICAgY29uc3QgdCA9IG4ubWFwKChlKSA9PiBKU09OLnN0cmluZ2lmeShlLmZvcm1hdCgpKSkuam9pbignLCAnKTsKICAgICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSghMSwgYGFtYmlndW91cyBldmVudCBkZXNjcmlwdGlvbiAoaS5lLiBtYXRjaGVzICR7dH0pYCwgJ2tleScsIGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gblswXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcy4jcC5nZXQoYy5FdmVudEZyYWdtZW50LmZyb20oZSkuZm9ybWF0KCkpIHx8IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRFdmVudE5hbWUoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy4jQShlLCBudWxsLCAhMSk7CiAgICAgICAgICAgIHJldHVybiAoMCwgby5hc3NlcnRBcmd1bWVudCkodCwgJ25vIG1hdGNoaW5nIGV2ZW50JywgJ2tleScsIGUpLCB0Lm5hbWU7CiAgICAgICAgICB9CiAgICAgICAgICBoYXNFdmVudChlKSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuI0EoZSwgbnVsbCwgITEpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0RXZlbnQoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jQShlLCB0IHx8IG51bGwsICEwKTsKICAgICAgICAgIH0KICAgICAgICAgIGZvckVhY2hFdmVudChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBBcnJheS5mcm9tKHRoaXMuI3Aua2V5cygpKTsKICAgICAgICAgICAgdC5zb3J0KChlLCB0KSA9PiBlLmxvY2FsZUNvbXBhcmUodCkpOwogICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgICBjb25zdCBuID0gdFtyXTsKICAgICAgICAgICAgICBlKHRoaXMuI3AuZ2V0KG4pLCByKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZ2V0RXJyb3IoZSwgdCkgewogICAgICAgICAgICBpZiAoKDAsIG8uaXNIZXhTdHJpbmcpKGUpKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICBpZiAocFt0XSkgcmV0dXJuIGMuRXJyb3JGcmFnbWVudC5mcm9tKHBbdF0uc2lnbmF0dXJlKTsKICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy4jZy52YWx1ZXMoKSkgaWYgKHQgPT09IGUuc2VsZWN0b3IpIHJldHVybiBlOwogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgtMSA9PT0gZS5pbmRleE9mKCcoJykpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gW107CiAgICAgICAgICAgICAgZm9yIChjb25zdCBbciwgbl0gb2YgdGhpcy4jZykgci5zcGxpdCgnKCcpWzBdID09PSBlICYmIHQucHVzaChuKTsKICAgICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpCiAgICAgICAgICAgICAgICByZXR1cm4gJ0Vycm9yJyA9PT0gZQogICAgICAgICAgICAgICAgICA_IGMuRXJyb3JGcmFnbWVudC5mcm9tKCdlcnJvciBFcnJvcihzdHJpbmcpJykKICAgICAgICAgICAgICAgICAgOiAnUGFuaWMnID09PSBlCiAgICAgICAgICAgICAgICAgICAgPyBjLkVycm9yRnJhZ21lbnQuZnJvbSgnZXJyb3IgUGFuaWModWludDI1NiknKQogICAgICAgICAgICAgICAgICAgIDogbnVsbDsKICAgICAgICAgICAgICBpZiAodC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICBjb25zdCByID0gdC5tYXAoKGUpID0-IEpTT04uc3RyaW5naWZ5KGUuZm9ybWF0KCkpKS5qb2luKCcsICcpOwogICAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKCExLCBgYW1iaWd1b3VzIGVycm9yIGRlc2NyaXB0aW9uIChpLmUuICR7cn0pYCwgJ25hbWUnLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHRbMF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCdFcnJvcihzdHJpbmcpJyA9PT0gKGUgPSBjLkVycm9yRnJhZ21lbnQuZnJvbShlKS5mb3JtYXQoKSkpCiAgICAgICAgICAgICAgcmV0dXJuIGMuRXJyb3JGcmFnbWVudC5mcm9tKCdlcnJvciBFcnJvcihzdHJpbmcpJyk7CiAgICAgICAgICAgIGlmICgnUGFuaWModWludDI1NiknID09PSBlKSByZXR1cm4gYy5FcnJvckZyYWdtZW50LmZyb20oJ2Vycm9yIFBhbmljKHVpbnQyNTYpJyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNnLmdldChlKSB8fCBudWxsOwogICAgICAgICAgfQogICAgICAgICAgZm9yRWFjaEVycm9yKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IEFycmF5LmZyb20odGhpcy4jZy5rZXlzKCkpOwogICAgICAgICAgICB0LnNvcnQoKGUsIHQpID0-IGUubG9jYWxlQ29tcGFyZSh0KSk7CiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgIGNvbnN0IG4gPSB0W3JdOwogICAgICAgICAgICAgIGUodGhpcy4jZy5nZXQobiksIHIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBfZGVjb2RlUGFyYW1zKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2IuZGVjb2RlKGUsIHQpOwogICAgICAgICAgfQogICAgICAgICAgX2VuY29kZVBhcmFtcyhlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNiLmVuY29kZShlLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIGVuY29kZURlcGxveShlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVQYXJhbXModGhpcy5kZXBsb3kuaW5wdXRzLCBlIHx8IFtdKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlY29kZUVycm9yUmVzdWx0KGUsIHQpIHsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0RXJyb3IoZSk7CiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHQsICd1bmtub3duIGVycm9yJywgJ2ZyYWdtZW50JywgZSksIChlID0gdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAoMCwgby5kYXRhU2xpY2UpKHQsIDAsIDQpID09PSBlLnNlbGVjdG9yLAogICAgICAgICAgICAgICAgYGRhdGEgc2lnbmF0dXJlIGRvZXMgbm90IG1hdGNoIGVycm9yICR7ZS5uYW1lfS5gLAogICAgICAgICAgICAgICAgJ2RhdGEnLAogICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgdGhpcy5fZGVjb2RlUGFyYW1zKGUuaW5wdXRzLCAoMCwgby5kYXRhU2xpY2UpKHQsIDQpKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlRXJyb3JSZXN1bHQoZSwgdCkgewogICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGUpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRFcnJvcihlKTsKICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkodCwgJ3Vua25vd24gZXJyb3InLCAnZnJhZ21lbnQnLCBlKSwgKGUgPSB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKDAsIG8uY29uY2F0KShbZS5zZWxlY3RvciwgdGhpcy5fZW5jb2RlUGFyYW1zKGUuaW5wdXRzLCB0IHx8IFtdKV0pOwogICAgICAgICAgfQogICAgICAgICAgZGVjb2RlRnVuY3Rpb25EYXRhKGUsIHQpIHsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0RnVuY3Rpb24oZSk7CiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHQsICd1bmtub3duIGZ1bmN0aW9uJywgJ2ZyYWdtZW50JywgZSksIChlID0gdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAoMCwgby5kYXRhU2xpY2UpKHQsIDAsIDQpID09PSBlLnNlbGVjdG9yLAogICAgICAgICAgICAgICAgYGRhdGEgc2lnbmF0dXJlIGRvZXMgbm90IG1hdGNoIGZ1bmN0aW9uICR7ZS5uYW1lfS5gLAogICAgICAgICAgICAgICAgJ2RhdGEnLAogICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgdGhpcy5fZGVjb2RlUGFyYW1zKGUuaW5wdXRzLCAoMCwgby5kYXRhU2xpY2UpKHQsIDQpKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlRnVuY3Rpb25EYXRhKGUsIHQpIHsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0RnVuY3Rpb24oZSk7CiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHQsICd1bmtub3duIGZ1bmN0aW9uJywgJ2ZyYWdtZW50JywgZSksIChlID0gdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICgwLCBvLmNvbmNhdCkoW2Uuc2VsZWN0b3IsIHRoaXMuX2VuY29kZVBhcmFtcyhlLmlucHV0cywgdCB8fCBbXSldKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlY29kZUZ1bmN0aW9uUmVzdWx0KGUsIHQpIHsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0RnVuY3Rpb24oZSk7CiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHQsICd1bmtub3duIGZ1bmN0aW9uJywgJ2ZyYWdtZW50JywgZSksIChlID0gdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHIgPSAnaW52YWxpZCBsZW5ndGggZm9yIHJlc3VsdCBkYXRhJzsKICAgICAgICAgICAgY29uc3QgbiA9ICgwLCBvLmdldEJ5dGVzQ29weSkodCk7CiAgICAgICAgICAgIGlmIChuLmxlbmd0aCAlIDMyID09IDApCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNiLmRlY29kZShlLm91dHB1dHMsIG4pOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIHIgPSAnY291bGQgbm90IGRlY29kZSByZXN1bHQgZGF0YSc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAoMCwgby5hc3NlcnQpKCExLCByLCAnQkFEX0RBVEEnLCB7CiAgICAgICAgICAgICAgdmFsdWU6ICgwLCBvLmhleGxpZnkpKG4pLAogICAgICAgICAgICAgIGluZm86IHsgbWV0aG9kOiBlLm5hbWUsIHNpZ25hdHVyZTogZS5mb3JtYXQoKSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgbWFrZUVycm9yKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9ICgwLCBvLmdldEJ5dGVzKShlLCAnZGF0YScpLAogICAgICAgICAgICAgIG4gPSBpLkFiaUNvZGVyLmdldEJ1aWx0aW5DYWxsRXhjZXB0aW9uKCdjYWxsJywgdCwgcik7CiAgICAgICAgICAgIGlmIChuLm1lc3NhZ2Uuc3RhcnRzV2l0aCgnZXhlY3V0aW9uIHJldmVydGVkICh1bmtub3duIGN1c3RvbSBlcnJvciknKSkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSAoMCwgby5oZXhsaWZ5KShyLnNsaWNlKDAsIDQpKSwKICAgICAgICAgICAgICAgIHQgPSB0aGlzLmdldEVycm9yKGUpOwogICAgICAgICAgICAgIGlmICh0KQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuI2IuZGVjb2RlKHQuaW5wdXRzLCByLnNsaWNlKDQpKTsKICAgICAgICAgICAgICAgICAgKG4ucmV2ZXJ0ID0geyBuYW1lOiB0Lm5hbWUsIHNpZ25hdHVyZTogdC5mb3JtYXQoKSwgYXJnczogZSB9KSwKICAgICAgICAgICAgICAgICAgICAobi5yZWFzb24gPSBuLnJldmVydC5zaWduYXR1cmUpLAogICAgICAgICAgICAgICAgICAgIChuLm1lc3NhZ2UgPSBgZXhlY3V0aW9uIHJldmVydGVkOiAke24ucmVhc29ufWApOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICBuLm1lc3NhZ2UgPSAnZXhlY3V0aW9uIHJldmVydGVkIChjb3VsdCBub3QgZGVjb2RlIGN1c3RvbSBlcnJvciknOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLnBhcnNlVHJhbnNhY3Rpb24odCk7CiAgICAgICAgICAgIHJldHVybiBzICYmIChuLmludm9jYXRpb24gPSB7IG1ldGhvZDogcy5uYW1lLCBzaWduYXR1cmU6IHMuc2lnbmF0dXJlLCBhcmdzOiBzLmFyZ3MgfSksIG47CiAgICAgICAgICB9CiAgICAgICAgICBlbmNvZGVGdW5jdGlvblJlc3VsdChlLCB0KSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEZ1bmN0aW9uKGUpOwogICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSh0LCAndW5rbm93biBmdW5jdGlvbicsICdmcmFnbWVudCcsIGUpLCAoZSA9IHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoMCwgby5oZXhsaWZ5KSh0aGlzLiNiLmVuY29kZShlLm91dHB1dHMsIHQgfHwgW10pKTsKICAgICAgICAgIH0KICAgICAgICAgIGVuY29kZUZpbHRlclRvcGljcyhlLCB0KSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEV2ZW50KGUpOwogICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSh0LCAndW5rbm93biBldmVudCcsICdldmVudEZyYWdtZW50JywgZSksIChlID0gdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKDAsIG8uYXNzZXJ0KSh0Lmxlbmd0aCA8PSBlLmlucHV0cy5sZW5ndGgsIGB0b28gbWFueSBhcmd1bWVudHMgZm9yICR7ZS5mb3JtYXQoKX1gLCAnVU5FWFBFQ1RFRF9BUkdVTUVOVCcsIHsKICAgICAgICAgICAgICBjb3VudDogdC5sZW5ndGgsCiAgICAgICAgICAgICAgZXhwZWN0ZWRDb3VudDogZS5pbnB1dHMubGVuZ3RoCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCByID0gW107CiAgICAgICAgICAgIGUuYW5vbnltb3VzIHx8IHIucHVzaChlLnRvcGljSGFzaCk7CiAgICAgICAgICAgIGNvbnN0IGkgPSAoZSwgdCkgPT4KICAgICAgICAgICAgICAnc3RyaW5nJyA9PT0gZS50eXBlCiAgICAgICAgICAgICAgICA_ICgwLCBzLmlkKSh0KQogICAgICAgICAgICAgICAgOiAnYnl0ZXMnID09PSBlLnR5cGUKICAgICAgICAgICAgICAgICAgPyAoMCwgbi5rZWNjYWsyNTYpKCgwLCBvLmhleGxpZnkpKHQpKQogICAgICAgICAgICAgICAgICA6ICgnYm9vbCcgPT09IGUudHlwZSAmJiAnYm9vbGVhbicgPT0gdHlwZW9mIHQKICAgICAgICAgICAgICAgICAgICAgID8gKHQgPSB0ID8gJzB4MDEnIDogJzB4MDAnKQogICAgICAgICAgICAgICAgICAgICAgOiBlLnR5cGUubWF0Y2goL151P2ludC8pCiAgICAgICAgICAgICAgICAgICAgICAgID8gKHQgPSAoMCwgby50b0JlSGV4KSh0KSkKICAgICAgICAgICAgICAgICAgICAgICAgOiBlLnR5cGUubWF0Y2goL15ieXRlcy8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodCA9ICgwLCBvLnplcm9QYWRCeXRlcykodCwgMzIpKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogJ2FkZHJlc3MnID09PSBlLnR5cGUgJiYgdGhpcy4jYi5lbmNvZGUoWydhZGRyZXNzJ10sIFt0XSksCiAgICAgICAgICAgICAgICAgICAgKDAsIG8uemVyb1BhZFZhbHVlKSgoMCwgby5oZXhsaWZ5KSh0KSwgMzIpKTsKICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICB0LmZvckVhY2goKHQsIG4pID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLmlucHV0c1tuXTsKICAgICAgICAgICAgICAgIHMuaW5kZXhlZAogICAgICAgICAgICAgICAgICA_IG51bGwgPT0gdAogICAgICAgICAgICAgICAgICAgID8gci5wdXNoKG51bGwpCiAgICAgICAgICAgICAgICAgICAgOiAnYXJyYXknID09PSBzLmJhc2VUeXBlIHx8ICd0dXBsZScgPT09IHMuYmFzZVR5cGUKICAgICAgICAgICAgICAgICAgICAgID8gKDAsIG8uYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICAgICAgICAgICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICdmaWx0ZXJpbmcgd2l0aCB0dXBsZXMgb3IgYXJyYXlzIG5vdCBzdXBwb3J0ZWQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICdjb250cmFjdC4nICsgcy5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgOiBBcnJheS5pc0FycmF5KHQpCiAgICAgICAgICAgICAgICAgICAgICAgID8gci5wdXNoKHQubWFwKChlKSA9PiBpKHMsIGUpKSkKICAgICAgICAgICAgICAgICAgICAgICAgOiByLnB1c2goaShzLCB0KSkKICAgICAgICAgICAgICAgICAgOiAoMCwgby5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgICAgICBudWxsID09IHQsCiAgICAgICAgICAgICAgICAgICAgICAnY2Fubm90IGZpbHRlciBub24taW5kZXhlZCBwYXJhbWV0ZXJzOyBtdXN0IGJlIG51bGwnLAogICAgICAgICAgICAgICAgICAgICAgJ2NvbnRyYWN0LicgKyBzLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICB0CiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByLmxlbmd0aCAmJiBudWxsID09PSByW3IubGVuZ3RoIC0gMV07CgogICAgICAgICAgICApCiAgICAgICAgICAgICAgci5wb3AoKTsKICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICB9CiAgICAgICAgICBlbmNvZGVFdmVudExvZyhlLCB0KSB7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEV2ZW50KGUpOwogICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSh0LCAndW5rbm93biBldmVudCcsICdldmVudEZyYWdtZW50JywgZSksIChlID0gdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgciA9IFtdLAogICAgICAgICAgICAgIGkgPSBbXSwKICAgICAgICAgICAgICBhID0gW107CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgZS5hbm9ueW1vdXMgfHwgci5wdXNoKGUudG9waWNIYXNoKSwKICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkodC5sZW5ndGggPT09IGUuaW5wdXRzLmxlbmd0aCwgJ2V2ZW50IGFyZ3VtZW50cy92YWx1ZXMgbWlzbWF0Y2gnLCAndmFsdWVzJywgdCksCiAgICAgICAgICAgICAgZS5pbnB1dHMuZm9yRWFjaCgoZSwgbykgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYyA9IHRbb107CiAgICAgICAgICAgICAgICBpZiAoZS5pbmRleGVkKQogICAgICAgICAgICAgICAgICBpZiAoJ3N0cmluZycgPT09IGUudHlwZSkgci5wdXNoKCgwLCBzLmlkKShjKSk7CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdieXRlcycgPT09IGUudHlwZSkgci5wdXNoKCgwLCBuLmtlY2NhazI1NikoYykpOwogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJ3R1cGxlJyA9PT0gZS5iYXNlVHlwZSB8fCAnYXJyYXknID09PSBlLmJhc2VUeXBlKSB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpOwogICAgICAgICAgICAgICAgICAgIHIucHVzaCh0aGlzLiNiLmVuY29kZShbZS50eXBlXSwgW2NdKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaS5wdXNoKGUpLCBhLnB1c2goYyk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgeyBkYXRhOiB0aGlzLiNiLmVuY29kZShpLCBhKSwgdG9waWNzOiByIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlY29kZUV2ZW50TG9nKGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0RXZlbnQoZSk7CiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHQsICd1bmtub3duIGV2ZW50JywgJ2V2ZW50RnJhZ21lbnQnLCBlKSwgKGUgPSB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobnVsbCAhPSByICYmICFlLmFub255bW91cykgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRvcGljSGFzaDsKICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAoMCwgby5pc0hleFN0cmluZykoclswXSwgMzIpICYmIHJbMF0udG9Mb3dlckNhc2UoKSA9PT0gdCwKICAgICAgICAgICAgICAgICdmcmFnbWVudC90b3BpYyBtaXNtYXRjaCcsCiAgICAgICAgICAgICAgICAndG9waWNzWzBdJywKICAgICAgICAgICAgICAgIHJbMF0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKHIgPSByLnNsaWNlKDEpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBuID0gW10sCiAgICAgICAgICAgICAgcyA9IFtdLAogICAgICAgICAgICAgIGkgPSBbXTsKICAgICAgICAgICAgZS5pbnB1dHMuZm9yRWFjaCgoZSwgdCkgPT4gewogICAgICAgICAgICAgIGUuaW5kZXhlZAogICAgICAgICAgICAgICAgPyAnc3RyaW5nJyA9PT0gZS50eXBlIHx8ICdieXRlcycgPT09IGUudHlwZSB8fCAndHVwbGUnID09PSBlLmJhc2VUeXBlIHx8ICdhcnJheScgPT09IGUuYmFzZVR5cGUKICAgICAgICAgICAgICAgICAgPyAobi5wdXNoKGMuUGFyYW1UeXBlLmZyb20oeyB0eXBlOiAnYnl0ZXMzMicsIG5hbWU6IGUubmFtZSB9KSksIGkucHVzaCghMCkpCiAgICAgICAgICAgICAgICAgIDogKG4ucHVzaChlKSwgaS5wdXNoKCExKSkKICAgICAgICAgICAgICAgIDogKHMucHVzaChlKSwgaS5wdXNoKCExKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCB1ID0gbnVsbCAhPSByID8gdGhpcy4jYi5kZWNvZGUobiwgKDAsIG8uY29uY2F0KShyKSkgOiBudWxsLAogICAgICAgICAgICAgIGwgPSB0aGlzLiNiLmRlY29kZShzLCB0LCAhMCksCiAgICAgICAgICAgICAgZCA9IFtdLAogICAgICAgICAgICAgIGYgPSBbXTsKICAgICAgICAgICAgbGV0IGcgPSAwLAogICAgICAgICAgICAgIHAgPSAwOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIGUuaW5wdXRzLmZvckVhY2goKGUsIHQpID0-IHsKICAgICAgICAgICAgICAgIGxldCByID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmIChlLmluZGV4ZWQpCiAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHUpIHIgPSBuZXcgaChudWxsKTsKICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaVt0XSkgciA9IG5ldyBoKHVbcCsrXSk7CiAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgciA9IHVbcCsrXTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICByID0gZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgciA9IGxbZysrXTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHIgPSBlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkLnB1c2gociksIGYucHVzaChlLm5hbWUgfHwgbnVsbCk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgYS5SZXN1bHQuZnJvbUl0ZW1zKGQsIGYpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBwYXJzZVRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBvLmdldEJ5dGVzKShlLmRhdGEsICd0eC5kYXRhJyksCiAgICAgICAgICAgICAgciA9ICgwLCBvLmdldEJpZ0ludCkobnVsbCAhPSBlLnZhbHVlID8gZS52YWx1ZSA6IDAsICd0eC52YWx1ZScpLAogICAgICAgICAgICAgIG4gPSB0aGlzLmdldEZ1bmN0aW9uKCgwLCBvLmhleGxpZnkpKHQuc2xpY2UoMCwgNCkpKTsKICAgICAgICAgICAgaWYgKCFuKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuI2IuZGVjb2RlKG4uaW5wdXRzLCB0LnNsaWNlKDQpKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBkKG4sIG4uc2VsZWN0b3IsIHMsIHIpOwogICAgICAgICAgfQogICAgICAgICAgcGFyc2VDYWxsUmVzdWx0KGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdAVE9ETycpOwogICAgICAgICAgfQogICAgICAgICAgcGFyc2VMb2coZSkgewogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRFdmVudChlLnRvcGljc1swXSk7CiAgICAgICAgICAgIHJldHVybiAhdCB8fCB0LmFub255bW91cyA_IG51bGwgOiBuZXcgbCh0LCB0LnRvcGljSGFzaCwgdGhpcy5kZWNvZGVFdmVudExvZyh0LCBlLmRhdGEsIGUudG9waWNzKSk7CiAgICAgICAgICB9CiAgICAgICAgICBwYXJzZUVycm9yKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBvLmhleGxpZnkpKGUpLAogICAgICAgICAgICAgIHIgPSB0aGlzLmdldEVycm9yKCgwLCBvLmRhdGFTbGljZSkodCwgMCwgNCkpOwogICAgICAgICAgICBpZiAoIXIpIHJldHVybiBudWxsOwogICAgICAgICAgICBjb25zdCBuID0gdGhpcy4jYi5kZWNvZGUoci5pbnB1dHMsICgwLCBvLmRhdGFTbGljZSkodCwgNCkpOwogICAgICAgICAgICByZXR1cm4gbmV3IGYociwgci5zZWxlY3Rvciwgbik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZnJvbShlKSB7CiAgICAgICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgbQogICAgICAgICAgICAgID8gZQogICAgICAgICAgICAgIDogJ3N0cmluZycgPT0gdHlwZW9mIGUKICAgICAgICAgICAgICAgID8gbmV3IG0oSlNPTi5wYXJzZShlKSkKICAgICAgICAgICAgICAgIDogJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZS5mb3JtYXQKICAgICAgICAgICAgICAgICAgPyBuZXcgbShlLmZvcm1hdCgnanNvbicpKQogICAgICAgICAgICAgICAgICA6IG5ldyBtKGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkludGVyZmFjZSA9IG07CiAgICAgIH0sCiAgICAgIDgxNjQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LlR5cGVkID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSB7fTsKICAgICAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgICAgIGxldCByID0gITE7CiAgICAgICAgICByZXR1cm4gdCA8IDAgJiYgKChyID0gITApLCAodCAqPSAtMSkpLCBuZXcgYyhzLCBgJHtyID8gJycgOiAndSd9aW50JHt0fWAsIGUsIHsgc2lnbmVkOiByLCB3aWR0aDogdCB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaShlLCB0KSB7CiAgICAgICAgICByZXR1cm4gbmV3IGMocywgYGJ5dGVzJHt0IHx8ICcnfWAsIGUsIHsgc2l6ZTogdCB9KTsKICAgICAgICB9CiAgICAgICAgY29uc3QgYSA9IFN5bWJvbC5mb3IoJ19ldGhlcnNfdHlwZWQnKTsKICAgICAgICBjbGFzcyBjIHsKICAgICAgICAgIHR5cGU7CiAgICAgICAgICB2YWx1ZTsKICAgICAgICAgICN2OwogICAgICAgICAgX3R5cGVkU3ltYm9sOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgciwgbykgewogICAgICAgICAgICBudWxsID09IG8gJiYgKG8gPSBudWxsKSwKICAgICAgICAgICAgICAoMCwgbi5hc3NlcnRQcml2YXRlKShzLCBlLCAnVHlwZWQnKSwKICAgICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IF90eXBlZFN5bWJvbDogYSwgdHlwZTogdCwgdmFsdWU6IHIgfSksCiAgICAgICAgICAgICAgKHRoaXMuI3YgPSBvKSwKICAgICAgICAgICAgICB0aGlzLmZvcm1hdCgpOwogICAgICAgICAgfQogICAgICAgICAgZm9ybWF0KCkgewogICAgICAgICAgICBpZiAoJ2FycmF5JyA9PT0gdGhpcy50eXBlKSB0aHJvdyBuZXcgRXJyb3IoJycpOwogICAgICAgICAgICBpZiAoJ2R5bmFtaWNBcnJheScgPT09IHRoaXMudHlwZSkgdGhyb3cgbmV3IEVycm9yKCcnKTsKICAgICAgICAgICAgcmV0dXJuICd0dXBsZScgPT09IHRoaXMudHlwZSA_IGB0dXBsZSgke3RoaXMudmFsdWUubWFwKChlKSA9PiBlLmZvcm1hdCgpKS5qb2luKCcsJyl9KWAgOiB0aGlzLnR5cGU7CiAgICAgICAgICB9CiAgICAgICAgICBkZWZhdWx0VmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfQogICAgICAgICAgbWluVmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfQogICAgICAgICAgbWF4VmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgfQogICAgICAgICAgaXNCaWdJbnQoKSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMudHlwZS5tYXRjaCgvXnU_aW50WzAtOV0rJC8pOwogICAgICAgICAgfQogICAgICAgICAgaXNEYXRhKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlLnN0YXJ0c1dpdGgoJ2J5dGVzJyk7CiAgICAgICAgICB9CiAgICAgICAgICBpc1N0cmluZygpIHsKICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnID09PSB0aGlzLnR5cGU7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgdHVwbGVOYW1lKCkgewogICAgICAgICAgICBpZiAoJ3R1cGxlJyAhPT0gdGhpcy50eXBlKSB0aHJvdyBUeXBlRXJyb3IoJ25vdCBhIHR1cGxlJyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiN2OwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGFycmF5TGVuZ3RoKCkgewogICAgICAgICAgICBpZiAoJ2FycmF5JyAhPT0gdGhpcy50eXBlKSB0aHJvdyBUeXBlRXJyb3IoJ25vdCBhbiBhcnJheScpOwogICAgICAgICAgICByZXR1cm4gITAgPT09IHRoaXMuI3YgPyAtMSA6ICExID09PSB0aGlzLiN2ID8gdGhpcy52YWx1ZS5sZW5ndGggOiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb20oZSwgdCkgewogICAgICAgICAgICByZXR1cm4gbmV3IGMocywgZSwgdCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgdWludDgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCA4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB1aW50MTYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxNik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgdWludDI0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgMjQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQzMihlKSB7CiAgICAgICAgICAgIHJldHVybiBvKGUsIDMyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB1aW50NDAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCA0MCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgdWludDQ4KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgNDgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQ1NihlKSB7CiAgICAgICAgICAgIHJldHVybiBvKGUsIDU2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB1aW50NjQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCA2NCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgdWludDcyKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgNzIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQ4MChlKSB7CiAgICAgICAgICAgIHJldHVybiBvKGUsIDgwKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB1aW50ODgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCA4OCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgdWludDk2KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgOTYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxMDQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxMDQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxMTIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxMTIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxMjAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxMjApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxMjgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxMjgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxMzYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxMzYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxNDQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxNDQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxNTIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxNTIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxNjAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxNjApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxNjgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxNjgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxNzYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxNzYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxODQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxODQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQxOTIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAxOTIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyMDAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyMDApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyMDgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyMDgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyMTYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyMTYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyMjQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyMjQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyMzIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyMzIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyNDAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyNDApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyNDgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyNDgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQyNTYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyNTYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHVpbnQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAyNTYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGludDgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtOCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgaW50MTYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGludDI0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgLTI0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQzMihlKSB7CiAgICAgICAgICAgIHJldHVybiBvKGUsIC0zMik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgaW50NDAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtNDApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGludDQ4KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgLTQ4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQ1NihlKSB7CiAgICAgICAgICAgIHJldHVybiBvKGUsIC01Nik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgaW50NjQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtNjQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGludDcyKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgLTcyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQ4MChlKSB7CiAgICAgICAgICAgIHJldHVybiBvKGUsIC04MCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgaW50ODgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtODgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGludDk2KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG8oZSwgLTk2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxMDQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTA0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxMTIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTEyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxMjAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTIwKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxMjgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTI4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxMzYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTM2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxNDQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTQ0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxNTIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTUyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxNjAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTYwKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxNjgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTY4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxNzYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTc2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxODQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTg0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQxOTIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMTkyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyMDAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyMDgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjA4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyMTYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjE2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyMjQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjI0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyMzIoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjMyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyNDAoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjQwKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyNDgoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjQ4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQyNTYoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjU2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpbnQoZSkgewogICAgICAgICAgICByZXR1cm4gbyhlLCAtMjU2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczEoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAxKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczIoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczMoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAzKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczQoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCA0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczUoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCA1KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczYoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCA2KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczcoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCA3KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczgoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCA4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczkoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCA5KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczEwKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMTApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMTEoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAxMSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYnl0ZXMxMihlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsIDEyKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczEzKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMTMpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMTQoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAxNCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYnl0ZXMxNShlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsIDE1KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczE2KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMTYpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMTcoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAxNyk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYnl0ZXMxOChlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsIDE4KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczE5KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMTkpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMjAoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAyMCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYnl0ZXMyMShlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsIDIxKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczIyKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMjIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMjMoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAyMyk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYnl0ZXMyNChlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsIDI0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczI1KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMjUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMjYoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAyNik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYnl0ZXMyNyhlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsIDI3KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczI4KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMjgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMjkoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAyOSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYnl0ZXMzMChlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsIDMwKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBieXRlczMxKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgMzEpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzMzIoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAzMik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYWRkcmVzcyhlKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgYyhzLCAnYWRkcmVzcycsIGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJvb2woZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IGMocywgJ2Jvb2wnLCAhIWUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ5dGVzKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBjKHMsICdieXRlcycsIGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHN0cmluZyhlKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgYyhzLCAnc3RyaW5nJywgZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYXJyYXkoZSwgdCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB0dXBsZShlLCB0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkIHlldCcpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIG92ZXJyaWRlcyhlKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgYyhzLCAnb3ZlcnJpZGVzJywgT2JqZWN0LmFzc2lnbih7fSwgZSkpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGlzVHlwZWQoZSkgewogICAgICAgICAgICByZXR1cm4gZSAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgZSAmJiAnX3R5cGVkU3ltYm9sJyBpbiBlICYmIGUuX3R5cGVkU3ltYm9sID09PSBhOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGRlcmVmZXJlbmNlKGUsIHQpIHsKICAgICAgICAgICAgaWYgKGMuaXNUeXBlZChlKSkgewogICAgICAgICAgICAgIGlmIChlLnR5cGUgIT09IHQpIHRocm93IG5ldyBFcnJvcihgaW52YWxpZCB0eXBlOiBleHBlY2V0ZCAke3R9LCBnb3QgJHtlLnR5cGV9YCk7CiAgICAgICAgICAgICAgcmV0dXJuIGUudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuVHlwZWQgPSBjOwogICAgICB9LAogICAgICAzMDI0OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5nZXRJY2FwQWRkcmVzcyA9IHQuZ2V0QWRkcmVzcyA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoOTg3MiksCiAgICAgICAgICBzID0gcig1MzE2KSwKICAgICAgICAgIG8gPSBCaWdJbnQoMCksCiAgICAgICAgICBpID0gQmlnSW50KDM2KTsKICAgICAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSAoZSA9IGUudG9Mb3dlckNhc2UoKSkuc3Vic3RyaW5nKDIpLnNwbGl0KCcnKSwKICAgICAgICAgICAgciA9IG5ldyBVaW50OEFycmF5KDQwKTsKICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgNDA7IGUrKykgcltlXSA9IHRbZV0uY2hhckNvZGVBdCgwKTsKICAgICAgICAgIGNvbnN0IG8gPSAoMCwgcy5nZXRCeXRlcykoKDAsIG4ua2VjY2FrMjU2KShyKSk7CiAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IDQwOyBlICs9IDIpCiAgICAgICAgICAgIG9bZSA-PiAxXSA-PiA0ID49IDggJiYgKHRbZV0gPSB0W2VdLnRvVXBwZXJDYXNlKCkpLAogICAgICAgICAgICAgICgxNSAmIG9bZSA-PiAxXSkgPj0gOCAmJiAodFtlICsgMV0gPSB0W2UgKyAxXS50b1VwcGVyQ2FzZSgpKTsKICAgICAgICAgIHJldHVybiAnMHgnICsgdC5qb2luKCcnKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgYyA9IHt9OwogICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgMTA7IGUrKykgY1tTdHJpbmcoZSldID0gU3RyaW5nKGUpOwogICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgMjY7IGUrKykgY1tTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgZSldID0gU3RyaW5nKDEwICsgZSk7CiAgICAgICAgY29uc3QgdSA9IDE1OwogICAgICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgICAgbGV0IHQgPSAoZSA9IChlID0gZS50b1VwcGVyQ2FzZSgpKS5zdWJzdHJpbmcoNCkgKyBlLnN1YnN0cmluZygwLCAyKSArICcwMCcpCiAgICAgICAgICAgIC5zcGxpdCgnJykKICAgICAgICAgICAgLm1hcCgoZSkgPT4gY1tlXSkKICAgICAgICAgICAgLmpvaW4oJycpOwogICAgICAgICAgZm9yICg7IHQubGVuZ3RoID49IHU7ICkgewogICAgICAgICAgICBsZXQgZSA9IHQuc3Vic3RyaW5nKDAsIHUpOwogICAgICAgICAgICB0ID0gKHBhcnNlSW50KGUsIDEwKSAlIDk3KSArIHQuc3Vic3RyaW5nKGUubGVuZ3RoKTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCByID0gU3RyaW5nKDk4IC0gKHBhcnNlSW50KHQsIDEwKSAlIDk3KSk7CiAgICAgICAgICBmb3IgKDsgci5sZW5ndGggPCAyOyApIHIgPSAnMCcgKyByOwogICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGQgPSAoZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc3QgZSA9IHt9OwogICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCAzNjsgdCsrKSBlWycwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonW3RdXSA9IEJpZ0ludCh0KTsKICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0pKCk7CiAgICAgICAgZnVuY3Rpb24gZihlKSB7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICgoMCwgcy5hc3NlcnRBcmd1bWVudCkoJ3N0cmluZycgPT0gdHlwZW9mIGUsICdpbnZhbGlkIGFkZHJlc3MnLCAnYWRkcmVzcycsIGUpLAogICAgICAgICAgICBlLm1hdGNoKC9eKDB4KT9bMC05YS1mQS1GXXs0MH0kLykpCiAgICAgICAgICApIHsKICAgICAgICAgICAgZS5zdGFydHNXaXRoKCcweCcpIHx8IChlID0gJzB4JyArIGUpOwogICAgICAgICAgICBjb25zdCB0ID0gYShlKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAhZS5tYXRjaCgvKFtBLUZdLipbYS1mXSl8KFthLWZdLipbQS1GXSkvKSB8fCB0ID09PSBlLAogICAgICAgICAgICAgICAgJ2JhZCBhZGRyZXNzIGNoZWNrc3VtJywKICAgICAgICAgICAgICAgICdhZGRyZXNzJywKICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlLm1hdGNoKC9eWEVbMC05XXsyfVswLTlBLVphLXpdezMwLDMxfSQvKSkgewogICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoZS5zdWJzdHJpbmcoMiwgNCkgPT09IGwoZSksICdiYWQgaWNhcCBjaGVja3N1bScsICdhZGRyZXNzJywgZSk7CiAgICAgICAgICAgIGxldCB0ID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgZSA9IGUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICBsZXQgdCA9IG87CiAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBlLmxlbmd0aDsgcisrKSB0ID0gdCAqIGkgKyBkW2Vbcl1dOwogICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICB9KShlLnN1YnN0cmluZyg0KSkudG9TdHJpbmcoMTYpOwogICAgICAgICAgICBmb3IgKDsgdC5sZW5ndGggPCA0MDsgKSB0ID0gJzAnICsgdDsKICAgICAgICAgICAgcmV0dXJuIGEoJzB4JyArIHQpOwogICAgICAgICAgfQogICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCBhZGRyZXNzJywgJ2FkZHJlc3MnLCBlKTsKICAgICAgICB9CiAgICAgICAgKHQuZ2V0QWRkcmVzcyA9IGYpLAogICAgICAgICAgKHQuZ2V0SWNhcEFkZHJlc3MgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBsZXQgdCA9IEJpZ0ludChmKGUpKS50b1N0cmluZygzNikudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgZm9yICg7IHQubGVuZ3RoIDwgMzA7ICkgdCA9ICcwJyArIHQ7CiAgICAgICAgICAgIHJldHVybiAnWEUnICsgbCgnWEUwMCcgKyB0KSArIHQ7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgMzAwODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LnJlc29sdmVBZGRyZXNzID0gdC5pc0FkZHJlc3MgPSB0LmlzQWRkcmVzc2FibGUgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoMzAyNCk7CiAgICAgICAgZnVuY3Rpb24gbyhlKSB7CiAgICAgICAgICByZXR1cm4gZSAmJiAnZnVuY3Rpb24nID09IHR5cGVvZiBlLmdldEFkZHJlc3M7CiAgICAgICAgfQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGkoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IGF3YWl0IHQ7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAobnVsbCAhPSByICYmICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnICE9PSByKSB8fAogICAgICAgICAgICAgICgoMCwgbi5hc3NlcnQpKCdzdHJpbmcnICE9IHR5cGVvZiBlLCAndW5jb25maWd1cmVkIG5hbWUnLCAnVU5DT05GSUdVUkVEX05BTUUnLCB7IHZhbHVlOiBlIH0pLAogICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSghMSwgJ2ludmFsaWQgQWRkcmVzc0xpa2UgdmFsdWU7IGRpZCBub3QgcmVzb2x2ZSB0byBhIHZhbHVlIGFkZHJlc3MnLCAndGFyZ2V0JywgZSkpLAogICAgICAgICAgICAoMCwgcy5nZXRBZGRyZXNzKShyKQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgKHQuaXNBZGRyZXNzYWJsZSA9IG8pLAogICAgICAgICAgKHQuaXNBZGRyZXNzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gKDAsIHMuZ2V0QWRkcmVzcykoZSksICEwOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LnJlc29sdmVBZGRyZXNzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnID09IHR5cGVvZiBlCiAgICAgICAgICAgICAgPyBlLm1hdGNoKC9eMHhbMC05YS1mXXs0MH0kL2kpCiAgICAgICAgICAgICAgICA_ICgwLCBzLmdldEFkZHJlc3MpKGUpCiAgICAgICAgICAgICAgICA6ICgoMCwgbi5hc3NlcnQpKG51bGwgIT0gdCwgJ0VOUyByZXNvbHV0aW9uIHJlcXVpcmVzIGEgcHJvdmlkZXInLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3Jlc29sdmVOYW1lJwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgaShlLCB0LnJlc29sdmVOYW1lKGUpKSkKICAgICAgICAgICAgICA6IG8oZSkKICAgICAgICAgICAgICAgID8gaShlLCBlLmdldEFkZHJlc3MoKSkKICAgICAgICAgICAgICAgIDogZSAmJiAnZnVuY3Rpb24nID09IHR5cGVvZiBlLnRoZW4KICAgICAgICAgICAgICAgICAgPyBpKGUsIGUpCiAgICAgICAgICAgICAgICAgIDogdm9pZCAoMCwgbi5hc3NlcnRBcmd1bWVudCkoITEsICd1bnN1cHBvcnRlZCBhZGRyZXNzYWJsZSB2YWx1ZScsICd0YXJnZXQnLCBlKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA4MzM2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5nZXRDcmVhdGUyQWRkcmVzcyA9IHQuZ2V0Q3JlYXRlQWRkcmVzcyA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoOTg3MiksCiAgICAgICAgICBzID0gcig1MzE2KSwKICAgICAgICAgIG8gPSByKDMwMjQpOwogICAgICAgICh0LmdldENyZWF0ZUFkZHJlc3MgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc3QgdCA9ICgwLCBvLmdldEFkZHJlc3MpKGUuZnJvbSk7CiAgICAgICAgICBsZXQgciA9ICgwLCBzLmdldEJpZ0ludCkoZS5ub25jZSwgJ3R4Lm5vbmNlJykudG9TdHJpbmcoMTYpOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHIgPSAnMCcgPT09IHIgPyAnMHgnIDogci5sZW5ndGggJSAyID8gJzB4MCcgKyByIDogJzB4JyArIHIpLAogICAgICAgICAgICAoMCwgby5nZXRBZGRyZXNzKSgoMCwgcy5kYXRhU2xpY2UpKCgwLCBuLmtlY2NhazI1NikoKDAsIHMuZW5jb2RlUmxwKShbdCwgcl0pKSwgMTIpKQogICAgICAgICAgKTsKICAgICAgICB9KSwKICAgICAgICAgICh0LmdldENyZWF0ZTJBZGRyZXNzID0gZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgaSA9ICgwLCBvLmdldEFkZHJlc3MpKGUpLAogICAgICAgICAgICAgIGEgPSAoMCwgcy5nZXRCeXRlcykodCwgJ3NhbHQnKSwKICAgICAgICAgICAgICBjID0gKDAsIHMuZ2V0Qnl0ZXMpKHIsICdpbml0Q29kZUhhc2gnKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoMzIgPT09IGEubGVuZ3RoLCAnc2FsdCBtdXN0IGJlIDMyIGJ5dGVzJywgJ3NhbHQnLCB0KSwKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoMzIgPT09IGMubGVuZ3RoLCAnaW5pdENvZGVIYXNoIG11c3QgYmUgMzIgYnl0ZXMnLCAnaW5pdENvZGVIYXNoJywgciksCiAgICAgICAgICAgICAgKDAsIG8uZ2V0QWRkcmVzcykoKDAsIHMuZGF0YVNsaWNlKSgoMCwgbi5rZWNjYWsyNTYpKCgwLCBzLmNvbmNhdCkoWycweGZmJywgaSwgYSwgY10pKSwgMTIpKQogICAgICAgICAgICApOwogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDM2ODA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5yZXNvbHZlQWRkcmVzcyA9CiAgICAgICAgICAgIHQuaXNBZGRyZXNzID0KICAgICAgICAgICAgdC5pc0FkZHJlc3NhYmxlID0KICAgICAgICAgICAgdC5nZXRDcmVhdGUyQWRkcmVzcyA9CiAgICAgICAgICAgIHQuZ2V0Q3JlYXRlQWRkcmVzcyA9CiAgICAgICAgICAgIHQuZ2V0SWNhcEFkZHJlc3MgPQogICAgICAgICAgICB0LmdldEFkZHJlc3MgPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgdmFyIG4gPSByKDMwMjQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0QWRkcmVzcycsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBuLmdldEFkZHJlc3M7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2dldEljYXBBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4uZ2V0SWNhcEFkZHJlc3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBzID0gcig4MzM2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2dldENyZWF0ZUFkZHJlc3MnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcy5nZXRDcmVhdGVBZGRyZXNzOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdnZXRDcmVhdGUyQWRkcmVzcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLmdldENyZWF0ZTJBZGRyZXNzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgbyA9IHIoMzAwOCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdpc0FkZHJlc3NhYmxlJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG8uaXNBZGRyZXNzYWJsZTsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaXNBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uaXNBZGRyZXNzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncmVzb2x2ZUFkZHJlc3MnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5yZXNvbHZlQWRkcmVzczsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDkxNDQ6IChlLCB0KSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5aZXJvQWRkcmVzcyA9IHZvaWQgMCksCiAgICAgICAgICAodC5aZXJvQWRkcmVzcyA9ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnKTsKICAgICAgfSwKICAgICAgNDcwODogKGUsIHQpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0Llplcm9IYXNoID0gdm9pZCAwKSwKICAgICAgICAgICh0Llplcm9IYXNoID0gJzB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcpOwogICAgICB9LAogICAgICA1NTE2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuTWVzc2FnZVByZWZpeCA9CiAgICAgICAgICAgIHQuRXRoZXJTeW1ib2wgPQogICAgICAgICAgICB0Lk1heEludDI1NiA9CiAgICAgICAgICAgIHQuTWluSW50MjU2ID0KICAgICAgICAgICAgdC5NYXhVaW50MjU2ID0KICAgICAgICAgICAgdC5XZWlQZXJFdGhlciA9CiAgICAgICAgICAgIHQuTiA9CiAgICAgICAgICAgIHQuWmVyb0hhc2ggPQogICAgICAgICAgICB0Llplcm9BZGRyZXNzID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIHZhciBuID0gcig5MTQ0KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1plcm9BZGRyZXNzJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG4uWmVyb0FkZHJlc3M7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHMgPSByKDQ3MDgpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnWmVyb0hhc2gnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcy5aZXJvSGFzaDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgbyA9IHIoMjc3Mik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdOJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG8uTjsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnV2VpUGVyRXRoZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5XZWlQZXJFdGhlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ01heFVpbnQyNTYnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5NYXhVaW50MjU2OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnTWluSW50MjU2JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uTWluSW50MjU2OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnTWF4SW50MjU2JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uTWF4SW50MjU2OwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgaSA9IHIoNzc2MCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFdGhlclN5bWJvbCcsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBpLkV0aGVyU3ltYm9sOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdNZXNzYWdlUHJlZml4JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuTWVzc2FnZVByZWZpeDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDI3NzI6IChlLCB0KSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5NYXhJbnQyNTYgPSB0Lk1pbkludDI1NiA9IHQuTWF4VWludDI1NiA9IHQuV2VpUGVyRXRoZXIgPSB0Lk4gPSB2b2lkIDApLAogICAgICAgICAgKHQuTiA9IEJpZ0ludCgnMHhmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWJhYWVkY2U2YWY0OGEwM2JiZmQyNWU4Y2QwMzY0MTQxJykpLAogICAgICAgICAgKHQuV2VpUGVyRXRoZXIgPSBCaWdJbnQoJzEwMDAwMDAwMDAwMDAwMDAwMDAnKSksCiAgICAgICAgICAodC5NYXhVaW50MjU2ID0gQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYnKSksCiAgICAgICAgICAodC5NaW5JbnQyNTYgPSBCaWdJbnQoJzB4ODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCcpICogQmlnSW50KC0xKSksCiAgICAgICAgICAodC5NYXhJbnQyNTYgPSBCaWdJbnQoJzB4N2ZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZicpKTsKICAgICAgfSwKICAgICAgNzc2MDogKGUsIHQpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0Lk1lc3NhZ2VQcmVmaXggPSB0LkV0aGVyU3ltYm9sID0gdm9pZCAwKSwKICAgICAgICAgICh0LkV0aGVyU3ltYm9sID0gJ86eJyksCiAgICAgICAgICAodC5NZXNzYWdlUHJlZml4ID0gJxlFdGhlcmV1bSBTaWduZWQgTWVzc2FnZTpcbicpOwogICAgICB9LAogICAgICAxMjM2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuQ29udHJhY3QgPSB0LkJhc2VDb250cmFjdCA9IHQucmVzb2x2ZUFyZ3MgPSB0LmNvcHlPdmVycmlkZXMgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDIyNzYpLAogICAgICAgICAgcyA9IHIoMzY4MCksCiAgICAgICAgICBvID0gcig2OTkyKSwKICAgICAgICAgIGkgPSByKDUzMTYpLAogICAgICAgICAgYSA9IHIoMTgxKSwKICAgICAgICAgIGMgPSBCaWdJbnQoMCk7CiAgICAgICAgZnVuY3Rpb24gdShlKSB7CiAgICAgICAgICByZXR1cm4gZSAmJiAnZnVuY3Rpb24nID09IHR5cGVvZiBlLmNhbGw7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgICAgcmV0dXJuIGUgJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZS5lc3RpbWF0ZUdhczsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZChlKSB7CiAgICAgICAgICByZXR1cm4gZSAmJiAnZnVuY3Rpb24nID09IHR5cGVvZiBlLnJlc29sdmVOYW1lOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmKGUpIHsKICAgICAgICAgIHJldHVybiBlICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIGUuc2VuZFRyYW5zYWN0aW9uOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBoKGUpIHsKICAgICAgICAgIGlmIChudWxsICE9IGUpIHsKICAgICAgICAgICAgaWYgKGQoZSkpIHJldHVybiBlOwogICAgICAgICAgICBpZiAoZS5wcm92aWRlcikgcmV0dXJuIGUucHJvdmlkZXI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNsYXNzIGcgewogICAgICAgICAgI0U7CiAgICAgICAgICBmcmFnbWVudDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKCgoMCwgaS5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGZyYWdtZW50OiB0IH0pLCB0LmlucHV0cy5sZW5ndGggPCByLmxlbmd0aCkpCiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0b28gbWFueSBhcmd1bWVudHMnKTsKICAgICAgICAgICAgY29uc3QgbiA9IHAoZS5ydW5uZXIsICdyZXNvbHZlTmFtZScpLAogICAgICAgICAgICAgIG8gPSBkKG4pID8gbiA6IG51bGw7CiAgICAgICAgICAgIHRoaXMuI0UgPSAoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnN0IG4gPSBhd2FpdCBQcm9taXNlLmFsbCgKICAgICAgICAgICAgICAgIHQuaW5wdXRzLm1hcCgoZSwgdCkgPT4KICAgICAgICAgICAgICAgICAgbnVsbCA9PSByW3RdCiAgICAgICAgICAgICAgICAgICAgPyBudWxsCiAgICAgICAgICAgICAgICAgICAgOiBlLndhbGtBc3luYyhyW3RdLCAoZSwgdCkgPT4KICAgICAgICAgICAgICAgICAgICAgICAgJ2FkZHJlc3MnID09PSBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBBcnJheS5pc0FycmF5KHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA_IFByb21pc2UuYWxsKHQubWFwKChlKSA9PiAoMCwgcy5yZXNvbHZlQWRkcmVzcykoZSwgbykpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoMCwgcy5yZXNvbHZlQWRkcmVzcykodCwgbykKICAgICAgICAgICAgICAgICAgICAgICAgICA6IHQKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybiBlLmludGVyZmFjZS5lbmNvZGVGaWx0ZXJUb3BpY3ModCwgbik7CiAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRUb3BpY0ZpbHRlcigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0U7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIG51bGwgPT0gZQogICAgICAgICAgICA_IG51bGwKICAgICAgICAgICAgOiAnZnVuY3Rpb24nID09IHR5cGVvZiBlW3RdCiAgICAgICAgICAgICAgPyBlCiAgICAgICAgICAgICAgOiBlLnByb3ZpZGVyICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIGUucHJvdmlkZXJbdF0KICAgICAgICAgICAgICAgID8gZS5wcm92aWRlcgogICAgICAgICAgICAgICAgOiBudWxsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKGUpIHsKICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyBudWxsIDogZS5wcm92aWRlciB8fCBudWxsOwogICAgICAgIH0KICAgICAgICBhc3luYyBmdW5jdGlvbiBiKGUsIHQpIHsKICAgICAgICAgIGNvbnN0IHIgPSBuLlR5cGVkLmRlcmVmZXJlbmNlKGUsICdvdmVycmlkZXMnKTsKICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSgnb2JqZWN0JyA9PSB0eXBlb2YgciwgJ2ludmFsaWQgb3ZlcnJpZGVzIHBhcmFtZXRlcicsICdvdmVycmlkZXMnLCBlKTsKICAgICAgICAgIGNvbnN0IHMgPSAoMCwgby5jb3B5UmVxdWVzdCkocik7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgbnVsbCA9PSBzLnRvIHx8ICh0IHx8IFtdKS5pbmRleE9mKCd0bycpID49IDAsCiAgICAgICAgICAgICAgJ2Nhbm5vdCBvdmVycmlkZSB0bycsCiAgICAgICAgICAgICAgJ292ZXJyaWRlcy50bycsCiAgICAgICAgICAgICAgcy50bwogICAgICAgICAgICApLAogICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgbnVsbCA9PSBzLmRhdGEgfHwgKHQgfHwgW10pLmluZGV4T2YoJ2RhdGEnKSA-PSAwLAogICAgICAgICAgICAgICdjYW5ub3Qgb3ZlcnJpZGUgZGF0YScsCiAgICAgICAgICAgICAgJ292ZXJyaWRlcy5kYXRhJywKICAgICAgICAgICAgICBzLmRhdGEKICAgICAgICAgICAgKSwKICAgICAgICAgICAgcy5mcm9tICYmIChzLmZyb20gPSBzLmZyb20pLAogICAgICAgICAgICBzCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBhc3luYyBmdW5jdGlvbiB5KGUsIHQsIHIpIHsKICAgICAgICAgIGNvbnN0IG8gPSBwKGUsICdyZXNvbHZlTmFtZScpLAogICAgICAgICAgICBpID0gZChvKSA_IG8gOiBudWxsOwogICAgICAgICAgcmV0dXJuIGF3YWl0IFByb21pc2UuYWxsKAogICAgICAgICAgICB0Lm1hcCgoZSwgdCkgPT4KICAgICAgICAgICAgICBlLndhbGtBc3luYygKICAgICAgICAgICAgICAgIHJbdF0sCiAgICAgICAgICAgICAgICAoZSwgdCkgPT4gKCh0ID0gbi5UeXBlZC5kZXJlZmVyZW5jZSh0LCBlKSksICdhZGRyZXNzJyA9PT0gZSA_ICgwLCBzLnJlc29sdmVBZGRyZXNzKSh0LCBpKSA6IHQpCiAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBBKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSBhc3luYyBmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBiKHQsIFsnZGF0YSddKTsKICAgICAgICAgICAgICAoci50byA9IGF3YWl0IGUuZ2V0QWRkcmVzcygpKSwgci5mcm9tICYmIChyLmZyb20gPSBhd2FpdCAoMCwgcy5yZXNvbHZlQWRkcmVzcykoci5mcm9tLCBoKGUucnVubmVyKSkpOwogICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmludGVyZmFjZSwKICAgICAgICAgICAgICAgIG8gPSAoMCwgaS5nZXRCaWdJbnQpKHIudmFsdWUgfHwgYywgJ292ZXJyaWRlcy52YWx1ZScpID09PSBjLAogICAgICAgICAgICAgICAgYSA9ICcweCcgPT09IChyLmRhdGEgfHwgJzB4Jyk7CiAgICAgICAgICAgICAgIW4uZmFsbGJhY2sgfHwKICAgICAgICAgICAgICAgIG4uZmFsbGJhY2sucGF5YWJsZSB8fAogICAgICAgICAgICAgICAgIW4ucmVjZWl2ZSB8fAogICAgICAgICAgICAgICAgYSB8fAogICAgICAgICAgICAgICAgbyB8fAogICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICAhMSwKICAgICAgICAgICAgICAgICAgJ2Nhbm5vdCBzZW5kIGRhdGEgdG8gcmVjZWl2ZSBvciBzZW5kIHZhbHVlIHRvIG5vbi1wYXlhYmxlIGZhbGxiYWNrJywKICAgICAgICAgICAgICAgICAgJ292ZXJyaWRlcycsCiAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgIG4uZmFsbGJhY2sgfHwgYSwKICAgICAgICAgICAgICAgICAgJ2Nhbm5vdCBzZW5kIGRhdGEgdG8gcmVjZWl2ZS1vbmx5IGNvbnRyYWN0JywKICAgICAgICAgICAgICAgICAgJ292ZXJyaWRlcy5kYXRhJywKICAgICAgICAgICAgICAgICAgci5kYXRhCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGNvbnN0IHUgPSBuLnJlY2VpdmUgfHwgKG4uZmFsbGJhY2sgJiYgbi5mYWxsYmFjay5wYXlhYmxlKTsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKHUgfHwgbywgJ2Nhbm5vdCBzZW5kIHZhbHVlIHRvIG5vbi1wYXlhYmxlIGZhbGxiYWNrJywgJ292ZXJyaWRlcy52YWx1ZScsIHIudmFsdWUpLAogICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICBuLmZhbGxiYWNrIHx8IGEsCiAgICAgICAgICAgICAgICAgICdjYW5ub3Qgc2VuZCBkYXRhIHRvIHJlY2VpdmUtb25seSBjb250cmFjdCcsCiAgICAgICAgICAgICAgICAgICdvdmVycmlkZXMuZGF0YScsCiAgICAgICAgICAgICAgICAgIHIuZGF0YQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHIKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICByID0gYXN5bmMgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICBjb25zdCBuID0gZS5ydW5uZXI7CiAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KShmKG4pLCAnY29udHJhY3QgcnVubmVyIGRvZXMgbm90IHN1cHBvcnQgc2VuZGluZyB0cmFuc2FjdGlvbnMnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnc2VuZFRyYW5zYWN0aW9uJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBuLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0KHIpKSwKICAgICAgICAgICAgICAgIG8gPSBtKGUucnVubmVyKTsKICAgICAgICAgICAgICByZXR1cm4gbmV3IGEuQ29udHJhY3RUcmFuc2FjdGlvblJlc3BvbnNlKGUuaW50ZXJmYWNlLCBvLCBzKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbiA9IGFzeW5jIChlKSA9PiBhd2FpdCByKGUpOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKDAsIGkuZGVmaW5lUHJvcGVydGllcykobiwgewogICAgICAgICAgICAgIF9jb250cmFjdDogZSwKICAgICAgICAgICAgICBlc3RpbWF0ZUdhczogYXN5bmMgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBwKGUucnVubmVyLCAnZXN0aW1hdGVHYXMnKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkobChuKSwgJ2NvbnRyYWN0IHJ1bm5lciBkb2VzIG5vdCBzdXBwb3J0IGdhcyBlc3RpbWF0aW9uJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdlc3RpbWF0ZUdhcycKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGF3YWl0IG4uZXN0aW1hdGVHYXMoYXdhaXQgdChyKSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwb3B1bGF0ZVRyYW5zYWN0aW9uOiB0LAogICAgICAgICAgICAgIHNlbmQ6IHIsCiAgICAgICAgICAgICAgc3RhdGljQ2FsbDogYXN5bmMgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBwKGUucnVubmVyLCAnY2FsbCcpOwogICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KSh1KG4pLCAnY29udHJhY3QgcnVubmVyIGRvZXMgbm90IHN1cHBvcnQgY2FsbGluZycsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2NhbGwnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0KHIpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG4uY2FsbChzKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCgwLCBpLmlzQ2FsbEV4Y2VwdGlvbikodCkgJiYgdC5kYXRhKSB0aHJvdyBlLmludGVyZmFjZS5tYWtlRXJyb3IodC5kYXRhLCBzKTsKICAgICAgICAgICAgICAgICAgdGhyb3cgdDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBuCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICAodC5jb3B5T3ZlcnJpZGVzID0gYiksICh0LnJlc29sdmVBcmdzID0geSk7CiAgICAgICAgY29uc3QgdiA9IFN5bWJvbC5mb3IoJ19ldGhlcnNJbnRlcm5hbF9jb250cmFjdCcpLAogICAgICAgICAgRSA9IG5ldyBXZWFrTWFwKCk7CiAgICAgICAgZnVuY3Rpb24gdyhlKSB7CiAgICAgICAgICByZXR1cm4gRS5nZXQoZVt2XSk7CiAgICAgICAgfQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIFQoZSwgdCkgewogICAgICAgICAgbGV0IHIsCiAgICAgICAgICAgIG4gPSBudWxsOwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodCkpIHsKICAgICAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgaWYgKCgwLCBpLmlzSGV4U3RyaW5nKSh0LCAzMikpIHJldHVybiB0OwogICAgICAgICAgICAgIGNvbnN0IHIgPSBlLmludGVyZmFjZS5nZXRFdmVudCh0KTsKICAgICAgICAgICAgICByZXR1cm4gKDAsIGkuYXNzZXJ0QXJndW1lbnQpKHIsICd1bmtub3duIGZyYWdtZW50JywgJ25hbWUnLCB0KSwgci50b3BpY0hhc2g7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHIgPSB0Lm1hcCgoZSkgPT4gKG51bGwgPT0gZSA_IG51bGwgOiBBcnJheS5pc0FycmF5KGUpID8gZS5tYXAobikgOiBuKGUpKSk7CiAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgJyonID09PSB0CiAgICAgICAgICAgICAgPyAociA9IFtudWxsXSkKICAgICAgICAgICAgICA6ICdzdHJpbmcnID09IHR5cGVvZiB0CiAgICAgICAgICAgICAgICA_ICgwLCBpLmlzSGV4U3RyaW5nKSh0LCAzMikKICAgICAgICAgICAgICAgICAgPyAociA9IFt0XSkKICAgICAgICAgICAgICAgICAgOiAoKG4gPSBlLmludGVyZmFjZS5nZXRFdmVudCh0KSksCiAgICAgICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKG4sICd1bmtub3duIGZyYWdtZW50JywgJ2V2ZW50JywgdCksCiAgICAgICAgICAgICAgICAgICAgKHIgPSBbbi50b3BpY0hhc2hdKSkKICAgICAgICAgICAgICAgIDogKHMgPSB0KSAmJgogICAgICAgICAgICAgICAgICAgICdvYmplY3QnID09IHR5cGVvZiBzICYmCiAgICAgICAgICAgICAgICAgICAgJ2dldFRvcGljRmlsdGVyJyBpbiBzICYmCiAgICAgICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJyA9PSB0eXBlb2Ygcy5nZXRUb3BpY0ZpbHRlciAmJgogICAgICAgICAgICAgICAgICAgIHMuZnJhZ21lbnQKICAgICAgICAgICAgICAgICAgPyAociA9IGF3YWl0IHQuZ2V0VG9waWNGaWx0ZXIoKSkKICAgICAgICAgICAgICAgICAgOiAnZnJhZ21lbnQnIGluIHQKICAgICAgICAgICAgICAgICAgICA_ICgobiA9IHQuZnJhZ21lbnQpLCAociA9IFtuLnRvcGljSGFzaF0pKQogICAgICAgICAgICAgICAgICAgIDogKDAsIGkuYXNzZXJ0QXJndW1lbnQpKCExLCAndW5rbm93biBldmVudCBuYW1lJywgJ2V2ZW50JywgdCk7CiAgICAgICAgICB2YXIgczsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIChyID0gci5tYXAoKGUpID0-IHsKICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgewogICAgICAgICAgICAgICAgY29uc3QgdCA9IEFycmF5LmZyb20obmV3IFNldChlLm1hcCgoZSkgPT4gZS50b0xvd2VyQ2FzZSgpKSkudmFsdWVzKCkpOwogICAgICAgICAgICAgICAgcmV0dXJuIDEgPT09IHQubGVuZ3RoID8gdFswXSA6ICh0LnNvcnQoKSwgdCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGZyYWdtZW50OiBuLAogICAgICAgICAgICAgIHRhZzogci5tYXAoKGUpID0-IChudWxsID09IGUgPyAnbnVsbCcgOiBBcnJheS5pc0FycmF5KGUpID8gZS5qb2luKCd8JykgOiBlKSkuam9pbignJicpLAogICAgICAgICAgICAgIHRvcGljczogcgogICAgICAgICAgICB9CiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBhc3luYyBmdW5jdGlvbiBQKGUsIHQpIHsKICAgICAgICAgIGNvbnN0IHsgc3ViczogciB9ID0gdyhlKTsKICAgICAgICAgIHJldHVybiByLmdldCgoYXdhaXQgVChlLCB0KSkudGFnKSB8fCBudWxsOwogICAgICAgIH0KICAgICAgICBhc3luYyBmdW5jdGlvbiBTKGUsIHQsIHIpIHsKICAgICAgICAgIGNvbnN0IG4gPSBtKGUucnVubmVyKTsKICAgICAgICAgICgwLCBpLmFzc2VydCkobiwgJ2NvbnRyYWN0IHJ1bm5lciBkb2VzIG5vdCBzdXBwb3J0IHN1YnNjcmliaW5nJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsgb3BlcmF0aW9uOiB0IH0pOwogICAgICAgICAgY29uc3QgeyBmcmFnbWVudDogcywgdGFnOiBvLCB0b3BpY3M6IGMgfSA9IGF3YWl0IFQoZSwgciksCiAgICAgICAgICAgIHsgYWRkcjogdSwgc3ViczogbCB9ID0gdyhlKTsKICAgICAgICAgIGxldCBkID0gbC5nZXQobyk7CiAgICAgICAgICBpZiAoIWQpIHsKICAgICAgICAgICAgY29uc3QgdCA9IHsgYWRkcmVzczogdSB8fCBlLCB0b3BpY3M6IGMgfSwKICAgICAgICAgICAgICBpID0gKHQpID0-IHsKICAgICAgICAgICAgICAgIGxldCBuID0gczsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IG4pCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgbiA9IGUuaW50ZXJmYWNlLmdldEV2ZW50KHQudG9waWNzWzBdKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgIGlmIChuKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBuLAogICAgICAgICAgICAgICAgICAgIGkgPSBzID8gZS5pbnRlcmZhY2UuZGVjb2RlRXZlbnRMb2cocywgdC5kYXRhLCB0LnRvcGljcykgOiBbXTsKICAgICAgICAgICAgICAgICAgUihlLCByLCBpLCAobikgPT4gbmV3IGEuQ29udHJhY3RFdmVudFBheWxvYWQoZSwgbiwgciwgbywgdCkpOwogICAgICAgICAgICAgICAgfSBlbHNlIFIoZSwgciwgW10sIChuKSA9PiBuZXcgYS5Db250cmFjdFVua25vd25FdmVudFBheWxvYWQoZSwgbiwgciwgdCkpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIGxldCBmID0gW107CiAgICAgICAgICAgIChkID0gewogICAgICAgICAgICAgIHRhZzogbywKICAgICAgICAgICAgICBsaXN0ZW5lcnM6IFtdLAogICAgICAgICAgICAgIHN0YXJ0OiAoKSA9PiB7CiAgICAgICAgICAgICAgICBmLmxlbmd0aCB8fCBmLnB1c2gobi5vbih0LCBpKSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBzdG9wOiBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoMCA9PSBmLmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgICAgICAgbGV0IGUgPSBmOwogICAgICAgICAgICAgICAgKGYgPSBbXSksIGF3YWl0IFByb21pc2UuYWxsKGUpLCBuLm9mZih0LCBpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGwuc2V0KG8sIGQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgfQogICAgICAgIGxldCBPID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgYXN5bmMgZnVuY3Rpb24gUihlLCB0LCByLCBuKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBhd2FpdCBPOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIGNvbnN0IHMgPSAoYXN5bmMgZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgYXdhaXQgTzsKICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IFAoZSwgdCk7CiAgICAgICAgICAgIGlmICghcykgcmV0dXJuICExOwogICAgICAgICAgICBjb25zdCBvID0gcy5saXN0ZW5lcnMubGVuZ3RoOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIChzLmxpc3RlbmVycyA9IHMubGlzdGVuZXJzLmZpbHRlcigoeyBsaXN0ZW5lcjogdCwgb25jZTogcyB9KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBvID0gQXJyYXkuZnJvbShyKTsKICAgICAgICAgICAgICAgIG4gJiYgby5wdXNoKG4ocyA_IG51bGwgOiB0KSk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICB0LmNhbGwoZSwgLi4ubyk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgcmV0dXJuICFzOwogICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAwID09PSBzLmxpc3RlbmVycy5sZW5ndGggJiYgKHMuc3RvcCgpLCB3KGUpLnN1YnMuZGVsZXRlKHMudGFnKSksCiAgICAgICAgICAgICAgbyA-IDAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pKGUsIHQsIHIsIG4pOwogICAgICAgICAgcmV0dXJuIChPID0gcyksIGF3YWl0IHM7CiAgICAgICAgfQogICAgICAgIGNvbnN0IE4gPSBbJ3RoZW4nXTsKICAgICAgICBjbGFzcyBMIHsKICAgICAgICAgIHRhcmdldDsKICAgICAgICAgIGludGVyZmFjZTsKICAgICAgICAgIHJ1bm5lcjsKICAgICAgICAgIGZpbHRlcnM7CiAgICAgICAgICBbdl07CiAgICAgICAgICBmYWxsYmFjazsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIG8pIHsKICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICdzdHJpbmcnID09IHR5cGVvZiBlIHx8ICgwLCBzLmlzQWRkcmVzc2FibGUpKGUpLAogICAgICAgICAgICAgICdpbnZhbGlkIHZhbHVlIGZvciBDb250cmFjdCB0YXJnZXQnLAogICAgICAgICAgICAgICd0YXJnZXQnLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBudWxsID09IHIgJiYgKHIgPSBudWxsKTsKICAgICAgICAgICAgY29uc3QgYyA9IG4uSW50ZXJmYWNlLmZyb20odCk7CiAgICAgICAgICAgIGxldCB1OwogICAgICAgICAgICAoMCwgaS5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IHRhcmdldDogZSwgcnVubmVyOiByLCBpbnRlcmZhY2U6IGMgfSksCiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIHYsIHsgdmFsdWU6IHt9IH0pOwogICAgICAgICAgICBsZXQgbCA9IG51bGwsCiAgICAgICAgICAgICAgZiA9IG51bGw7CiAgICAgICAgICAgIGlmIChvKSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IG0ocik7CiAgICAgICAgICAgICAgZiA9IG5ldyBhLkNvbnRyYWN0VHJhbnNhY3Rpb25SZXNwb25zZSh0aGlzLmludGVyZmFjZSwgZSwgbyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGggPSBuZXcgTWFwKCk7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkKICAgICAgICAgICAgICBpZiAoKDAsIGkuaXNIZXhTdHJpbmcpKGUpKSAobCA9IGUpLCAodSA9IFByb21pc2UucmVzb2x2ZShlKSk7CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gcChyLCAncmVzb2x2ZU5hbWUnKTsKICAgICAgICAgICAgICAgIGlmICghZCh0KSkKICAgICAgICAgICAgICAgICAgdGhyb3cgKDAsIGkubWFrZUVycm9yKSgnY29udHJhY3QgcnVubmVyIGRvZXMgbm90IHN1cHBvcnQgbmFtZSByZXNvbHV0aW9uJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdyZXNvbHZlTmFtZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB1ID0gdC5yZXNvbHZlTmFtZShlKS50aGVuKCh0KSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKDAsIGkubWFrZUVycm9yKSgKICAgICAgICAgICAgICAgICAgICAgICdhbiBFTlMgbmFtZSB1c2VkIGZvciBhIGNvbnRyYWN0IHRhcmdldCBtdXN0IGJlIGNvcnJlY3RseSBjb25maWd1cmVkJywKICAgICAgICAgICAgICAgICAgICAgICdVTkNPTkZJR1VSRURfTkFNRScsCiAgICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiBlIH0KICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICByZXR1cm4gKHcodGhpcykuYWRkciA9IHQpLCB0OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgdSA9IGUuZ2V0QWRkcmVzcygpLnRoZW4oKGUpID0-IHsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUpIHRocm93IG5ldyBFcnJvcignVE9ETycpOwogICAgICAgICAgICAgICAgcmV0dXJuICh3KHRoaXMpLmFkZHIgPSBlKSwgZTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGc7CiAgICAgICAgICAgIChnID0geyBhZGRyUHJvbWlzZTogdSwgYWRkcjogbCwgZGVwbG95VHg6IGYsIHN1YnM6IGggfSksIEUuc2V0KHRoaXNbdl0sIGcpOwogICAgICAgICAgICBjb25zdCBiID0gbmV3IFByb3h5KAogICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGdldDogKGUsIHQsIHIpID0-IHsKICAgICAgICAgICAgICAgICAgaWYgKCdzeW1ib2wnID09IHR5cGVvZiB0IHx8IE4uaW5kZXhPZih0KSA-PSAwKSByZXR1cm4gUmVmbGVjdC5nZXQoZSwgdCwgcik7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXZlbnQodCk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoISgwLCBpLmlzRXJyb3IpKGUsICdJTlZBTElEX0FSR1VNRU5UJykgfHwgJ2tleScgIT09IGUuYXJndW1lbnQpIHRocm93IGU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoYXM6IChlLCB0KSA9PgogICAgICAgICAgICAgICAgICBOLmluZGV4T2YodCkgPj0gMCA_IFJlZmxlY3QuaGFzKGUsIHQpIDogUmVmbGVjdC5oYXMoZSwgdCkgfHwgdGhpcy5pbnRlcmZhY2UuaGFzRXZlbnQoU3RyaW5nKHQpKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgaS5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGZpbHRlcnM6IGIgfSksCiAgICAgICAgICAgICAgKDAsIGkuZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBmYWxsYmFjazogYy5yZWNlaXZlIHx8IGMuZmFsbGJhY2sgPyBBKHRoaXMpIDogbnVsbCB9KSwKICAgICAgICAgICAgICBuZXcgUHJveHkodGhpcywgewogICAgICAgICAgICAgICAgZ2V0OiAoZSwgdCwgcikgPT4gewogICAgICAgICAgICAgICAgICBpZiAoJ3N5bWJvbCcgPT0gdHlwZW9mIHQgfHwgdCBpbiBlIHx8IE4uaW5kZXhPZih0KSA-PSAwKSByZXR1cm4gUmVmbGVjdC5nZXQoZSwgdCwgcik7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0RnVuY3Rpb24odCk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoISgwLCBpLmlzRXJyb3IpKGUsICdJTlZBTElEX0FSR1VNRU5UJykgfHwgJ2tleScgIT09IGUuYXJndW1lbnQpIHRocm93IGU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBoYXM6IChlLCB0KSA9PgogICAgICAgICAgICAgICAgICAnc3ltYm9sJyA9PSB0eXBlb2YgdCB8fCB0IGluIGUgfHwgTi5pbmRleE9mKHQpID49IDAgPyBSZWZsZWN0LmhhcyhlLCB0KSA6IGUuaW50ZXJmYWNlLmhhc0Z1bmN0aW9uKHQpCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbm5lY3QoZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IEwodGhpcy50YXJnZXQsIHRoaXMuaW50ZXJmYWNlLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGF0dGFjaChlKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgTChlLCB0aGlzLmludGVyZmFjZSwgdGhpcy5ydW5uZXIpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0QWRkcmVzcygpIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHcodGhpcykuYWRkclByb21pc2U7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXREZXBsb3llZENvZGUoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBtKHRoaXMucnVubmVyKTsKICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KShlLCAncnVubmVyIGRvZXMgbm90IHN1cHBvcnQgLnByb3ZpZGVyJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICBvcGVyYXRpb246ICdnZXREZXBsb3llZENvZGUnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgZS5nZXRDb2RlKGF3YWl0IHRoaXMuZ2V0QWRkcmVzcygpKTsKICAgICAgICAgICAgcmV0dXJuICcweCcgPT09IHQgPyBudWxsIDogdDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHdhaXRGb3JEZXBsb3ltZW50KCkgewogICAgICAgICAgICBjb25zdCBlID0gdGhpcy5kZXBsb3ltZW50VHJhbnNhY3Rpb24oKTsKICAgICAgICAgICAgaWYgKGUpIHJldHVybiBhd2FpdCBlLndhaXQoKSwgdGhpczsKICAgICAgICAgICAgaWYgKG51bGwgIT0gKGF3YWl0IHRoaXMuZ2V0RGVwbG95ZWRDb2RlKCkpKSByZXR1cm4gdGhpczsKICAgICAgICAgICAgY29uc3QgdCA9IG0odGhpcy5ydW5uZXIpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBpLmFzc2VydCkobnVsbCAhPSB0LCAnY29udHJhY3QgcnVubmVyIGRvZXMgbm90IHN1cHBvcnQgLnByb3ZpZGVyJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3dhaXRGb3JEZXBsb3ltZW50JwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG5ldyBQcm9taXNlKChlLCByKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBuID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IChhd2FpdCB0aGlzLmdldERlcGxveWVkQ29kZSgpKSkgcmV0dXJuIGUodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgdC5vbmNlKCdibG9jaycsIG4pOwogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcihlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG4oKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZGVwbG95bWVudFRyYW5zYWN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdyh0aGlzKS5kZXBsb3lUeDsKICAgICAgICAgIH0KICAgICAgICAgIGdldEZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgJ3N0cmluZycgIT0gdHlwZW9mIGUgJiYgKGUgPSBlLmZvcm1hdCgpKTsKICAgICAgICAgICAgY29uc3QgdCA9IChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBmdW5jdGlvbiAoLi4ucikgewogICAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5pbnRlcmZhY2UuZ2V0RnVuY3Rpb24odCwgcik7CiAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KShuLCAnbm8gbWF0Y2hpbmcgZnJhZ21lbnQnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnZnJhZ21lbnQnLAogICAgICAgICAgICAgICAgICAgICAgaW5mbzogeyBrZXk6IHQsIGFyZ3M6IHIgfQogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBuID0gYXN5bmMgZnVuY3Rpb24gKC4uLnQpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHIoLi4udCk7CiAgICAgICAgICAgICAgICAgIGxldCBvID0ge307CiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAobi5pbnB1dHMubGVuZ3RoICsgMSA9PT0gdC5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAgICgobyA9IGF3YWl0IGIodC5wb3AoKSkpLCBvLmZyb20gJiYgKG8uZnJvbSA9IGF3YWl0ICgwLCBzLnJlc29sdmVBZGRyZXNzKShvLmZyb20sIGgoZS5ydW5uZXIpKSkpLAogICAgICAgICAgICAgICAgICAgIG4uaW5wdXRzLmxlbmd0aCAhPT0gdC5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImludGVybmFsIGVycm9yOiBmcmFnbWVudCBpbnB1dHMgZG9lc24ndCBtYXRjaCBhcmd1bWVudHM7IHNob3VsZCBub3QgaGFwcGVuIik7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBhd2FpdCB5KGUucnVubmVyLCBuLmlucHV0cywgdCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKAogICAgICAgICAgICAgICAgICAgIHt9LAogICAgICAgICAgICAgICAgICAgIG8sCiAgICAgICAgICAgICAgICAgICAgYXdhaXQgKDAsIGkucmVzb2x2ZVByb3BlcnRpZXMpKHsgdG86IGUuZ2V0QWRkcmVzcygpLCBkYXRhOiBlLmludGVyZmFjZS5lbmNvZGVGdW5jdGlvbkRhdGEobiwgYSkgfSkKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvID0gYXN5bmMgZnVuY3Rpb24gKC4uLmUpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IGQoLi4uZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiAxID09PSB0Lmxlbmd0aCA_IHRbMF0gOiB0OwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGMgPSBhc3luYyBmdW5jdGlvbiAoLi4udCkgewogICAgICAgICAgICAgICAgICBjb25zdCByID0gZS5ydW5uZXI7CiAgICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkoCiAgICAgICAgICAgICAgICAgICAgZihyKSwKICAgICAgICAgICAgICAgICAgICAnY29udHJhY3QgcnVubmVyIGRvZXMgbm90IHN1cHBvcnQgc2VuZGluZyB0cmFuc2FjdGlvbnMnLAogICAgICAgICAgICAgICAgICAgICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLAogICAgICAgICAgICAgICAgICAgIHsgb3BlcmF0aW9uOiAnc2VuZFRyYW5zYWN0aW9uJyB9CiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCByLnNlbmRUcmFuc2FjdGlvbihhd2FpdCBuKC4uLnQpKSwKICAgICAgICAgICAgICAgICAgICBvID0gbShlLnJ1bm5lcik7CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYS5Db250cmFjdFRyYW5zYWN0aW9uUmVzcG9uc2UoZS5pbnRlcmZhY2UsIG8sIHMpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGQgPSBhc3luYyBmdW5jdGlvbiAoLi4udCkgewogICAgICAgICAgICAgICAgICBjb25zdCBzID0gcChlLnJ1bm5lciwgJ2NhbGwnKTsKICAgICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KSh1KHMpLCAnY29udHJhY3QgcnVubmVyIGRvZXMgbm90IHN1cHBvcnQgY2FsbGluZycsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnY2FsbCcKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBhd2FpdCBuKC4uLnQpOwogICAgICAgICAgICAgICAgICBsZXQgYSA9ICcweCc7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgYSA9IGF3YWl0IHMuY2FsbChvKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgICAgIGlmICgoMCwgaS5pc0NhbGxFeGNlcHRpb24pKHQpICYmIHQuZGF0YSkgdGhyb3cgZS5pbnRlcmZhY2UubWFrZUVycm9yKHQuZGF0YSwgbyk7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zdCBjID0gciguLi50KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuaW50ZXJmYWNlLmRlY29kZUZ1bmN0aW9uUmVzdWx0KGMsIGEpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGcgPSBhc3luYyAoLi4uZSkgPT4gKHIoLi4uZSkuY29uc3RhbnQgPyBhd2FpdCBvKC4uLmUpIDogYXdhaXQgYyguLi5lKSk7CiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICgwLCBpLmRlZmluZVByb3BlcnRpZXMpKGcsIHsKICAgICAgICAgICAgICAgICAgbmFtZTogZS5pbnRlcmZhY2UuZ2V0RnVuY3Rpb25OYW1lKHQpLAogICAgICAgICAgICAgICAgICBfY29udHJhY3Q6IGUsCiAgICAgICAgICAgICAgICAgIF9rZXk6IHQsCiAgICAgICAgICAgICAgICAgIGdldEZyYWdtZW50OiByLAogICAgICAgICAgICAgICAgICBlc3RpbWF0ZUdhczogYXN5bmMgZnVuY3Rpb24gKC4uLnQpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gcChlLnJ1bm5lciwgJ2VzdGltYXRlR2FzJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkobChyKSwgJ2NvbnRyYWN0IHJ1bm5lciBkb2VzIG5vdCBzdXBwb3J0IGdhcyBlc3RpbWF0aW9uJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnZXN0aW1hdGVHYXMnCiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHIuZXN0aW1hdGVHYXMoYXdhaXQgbiguLi50KSkKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBwb3B1bGF0ZVRyYW5zYWN0aW9uOiBuLAogICAgICAgICAgICAgICAgICBzZW5kOiBjLAogICAgICAgICAgICAgICAgICBzdGF0aWNDYWxsOiBvLAogICAgICAgICAgICAgICAgICBzdGF0aWNDYWxsUmVzdWx0OiBkCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnLCAnZnJhZ21lbnQnLCB7CiAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITEsCiAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICBnZXQ6ICgpID0-IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gZS5pbnRlcmZhY2UuZ2V0RnVuY3Rpb24odCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkociwgJ25vIG1hdGNoaW5nIGZyYWdtZW50JywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnZnJhZ21lbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBpbmZvOiB7IGtleTogdCB9CiAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgIHIKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGcKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KSh0aGlzLCBlKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRFdmVudChlKSB7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgJ3N0cmluZycgIT0gdHlwZW9mIGUgJiYgKGUgPSBlLmZvcm1hdCgpKSwKICAgICAgICAgICAgICAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBmdW5jdGlvbiAoLi4ucikgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmludGVyZmFjZS5nZXRFdmVudCh0LCByKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KShuLCAnbm8gbWF0Y2hpbmcgZnJhZ21lbnQnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdmcmFnbWVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IHsga2V5OiB0LCBhcmdzOiByIH0KICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgbgogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG4gPSBmdW5jdGlvbiAoLi4udCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZyhlLCByKC4uLnQpLCB0KTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICgwLCBpLmRlZmluZVByb3BlcnRpZXMpKG4sIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiBlLmludGVyZmFjZS5nZXRFdmVudE5hbWUodCksCiAgICAgICAgICAgICAgICAgICAgX2NvbnRyYWN0OiBlLAogICAgICAgICAgICAgICAgICAgIF9rZXk6IHQsCiAgICAgICAgICAgICAgICAgICAgZ2V0RnJhZ21lbnQ6IHIKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCAnZnJhZ21lbnQnLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMSwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0-IHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLmludGVyZmFjZS5nZXRFdmVudCh0KTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkociwgJ25vIG1hdGNoaW5nIGZyYWdtZW50JywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdmcmFnbWVudCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbzogeyBrZXk6IHQgfQogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgcgogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBuCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pKHRoaXMsIGUpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBxdWVyeVRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdAVE9ETycpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgcXVlcnlGaWx0ZXIoZSwgdCwgcikgewogICAgICAgICAgICBudWxsID09IHQgJiYgKHQgPSAwKSwgbnVsbCA9PSByICYmIChyID0gJ2xhdGVzdCcpOwogICAgICAgICAgICBjb25zdCB7IGFkZHI6IG4sIGFkZHJQcm9taXNlOiBzIH0gPSB3KHRoaXMpLAogICAgICAgICAgICAgIGMgPSBuIHx8IChhd2FpdCBzKSwKICAgICAgICAgICAgICB7IGZyYWdtZW50OiB1LCB0b3BpY3M6IGwgfSA9IGF3YWl0IFQodGhpcywgZSksCiAgICAgICAgICAgICAgZCA9IHsgYWRkcmVzczogYywgdG9waWNzOiBsLCBmcm9tQmxvY2s6IHQsIHRvQmxvY2s6IHIgfSwKICAgICAgICAgICAgICBmID0gbSh0aGlzLnJ1bm5lcik7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KShmLCAnY29udHJhY3QgcnVubmVyIGRvZXMgbm90IGhhdmUgYSBwcm92aWRlcicsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdxdWVyeUZpbHRlcicKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAoYXdhaXQgZi5nZXRMb2dzKGQpKS5tYXAoKGUpID0-IHsKICAgICAgICAgICAgICAgIGxldCB0ID0gdTsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IHQpCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuaW50ZXJmYWNlLmdldEV2ZW50KGUudG9waWNzWzBdKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgIGlmICh0KQogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYS5FdmVudExvZyhlLCB0aGlzLmludGVyZmFjZSwgdCk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGEuVW5kZWNvZGVkRXZlbnRMb2coZSwgdCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgby5Mb2coZSwgZik7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIG9uKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IFModGhpcywgJ29uJywgZSk7CiAgICAgICAgICAgIHJldHVybiByLmxpc3RlbmVycy5wdXNoKHsgbGlzdGVuZXI6IHQsIG9uY2U6ICExIH0pLCByLnN0YXJ0KCksIHRoaXM7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBvbmNlKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IFModGhpcywgJ29uY2UnLCBlKTsKICAgICAgICAgICAgcmV0dXJuIHIubGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lcjogdCwgb25jZTogITAgfSksIHIuc3RhcnQoKSwgdGhpczsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGVtaXQoZSwgLi4udCkgewogICAgICAgICAgICByZXR1cm4gYXdhaXQgUih0aGlzLCBlLCB0LCBudWxsKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGxpc3RlbmVyQ291bnQoZSkgewogICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBQKHRoaXMsIGUpOwogICAgICAgICAgICAgIHJldHVybiB0ID8gdC5saXN0ZW5lcnMubGVuZ3RoIDogMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB7IHN1YnM6IHQgfSA9IHcodGhpcyk7CiAgICAgICAgICAgIGxldCByID0gMDsKICAgICAgICAgICAgZm9yIChjb25zdCB7IGxpc3RlbmVyczogZSB9IG9mIHQudmFsdWVzKCkpIHIgKz0gZS5sZW5ndGg7CiAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgbGlzdGVuZXJzKGUpIHsKICAgICAgICAgICAgaWYgKGUpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgUCh0aGlzLCBlKTsKICAgICAgICAgICAgICByZXR1cm4gdCA_IHQubGlzdGVuZXJzLm1hcCgoeyBsaXN0ZW5lcjogZSB9KSA9PiBlKSA6IFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHsgc3ViczogdCB9ID0gdyh0aGlzKTsKICAgICAgICAgICAgbGV0IHIgPSBbXTsKICAgICAgICAgICAgZm9yIChjb25zdCB7IGxpc3RlbmVyczogZSB9IG9mIHQudmFsdWVzKCkpIHIgPSByLmNvbmNhdChlLm1hcCgoeyBsaXN0ZW5lcjogZSB9KSA9PiBlKSk7CiAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgb2ZmKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IFAodGhpcywgZSk7CiAgICAgICAgICAgIGlmICghcikgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IHIubGlzdGVuZXJzLm1hcCgoeyBsaXN0ZW5lcjogZSB9KSA9PiBlKS5pbmRleE9mKHQpOwogICAgICAgICAgICAgIGUgPj0gMCAmJiByLmxpc3RlbmVycy5zcGxpY2UoZSwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChudWxsICE9IHQgJiYgMCAhPT0gci5saXN0ZW5lcnMubGVuZ3RoKSB8fCAoci5zdG9wKCksIHcodGhpcykuc3Vicy5kZWxldGUoci50YWcpKSwgdGhpczsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHJlbW92ZUFsbExpc3RlbmVycyhlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IFAodGhpcywgZSk7CiAgICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gdGhpczsKICAgICAgICAgICAgICB0LnN0b3AoKSwgdyh0aGlzKS5zdWJzLmRlbGV0ZSh0LnRhZyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc3QgeyBzdWJzOiBlIH0gPSB3KHRoaXMpOwogICAgICAgICAgICAgIGZvciAoY29uc3QgeyB0YWc6IHQsIHN0b3A6IHIgfSBvZiBlLnZhbHVlcygpKSByKCksIGUuZGVsZXRlKHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgYWRkTGlzdGVuZXIoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5vbihlLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHJlbW92ZUxpc3RlbmVyKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMub2ZmKGUsIHQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGJ1aWxkQ2xhc3MoZSkgewogICAgICAgICAgICByZXR1cm4gY2xhc3MgZXh0ZW5kcyBMIHsKICAgICAgICAgICAgICBjb25zdHJ1Y3Rvcih0LCByID0gbnVsbCkgewogICAgICAgICAgICAgICAgc3VwZXIodCwgZSwgcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb20oZSwgdCwgcikgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSByICYmIChyID0gbnVsbCksIG5ldyB0aGlzKGUsIHQsIHIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkJhc2VDb250cmFjdCA9IEw7CiAgICAgICAgY2xhc3MgQiBleHRlbmRzIChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gTDsKICAgICAgICB9KSgpIHt9CiAgICAgICAgdC5Db250cmFjdCA9IEI7CiAgICAgIH0sCiAgICAgIDEzNzY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkNvbnRyYWN0RmFjdG9yeSA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMjI3NiksCiAgICAgICAgICBzID0gcigzNjgwKSwKICAgICAgICAgIG8gPSByKDUzMTYpLAogICAgICAgICAgaSA9IHIoMTIzNik7CiAgICAgICAgY2xhc3MgYSB7CiAgICAgICAgICBpbnRlcmZhY2U7CiAgICAgICAgICBieXRlY29kZTsKICAgICAgICAgIHJ1bm5lcjsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgcyA9IG4uSW50ZXJmYWNlLmZyb20oZSk7CiAgICAgICAgICAgIHQgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8ICgnb2JqZWN0JyA9PSB0eXBlb2YgdCAmJiAodCA9IHQub2JqZWN0KSwgdC5zdGFydHNXaXRoKCcweCcpIHx8ICh0ID0gJzB4JyArIHQpKSwKICAgICAgICAgICAgICAodCA9ICgwLCBvLmhleGxpZnkpKCgwLCBvLmdldEJ5dGVzKSh0KSkpLAogICAgICAgICAgICAgICgwLCBvLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgYnl0ZWNvZGU6IHQsIGludGVyZmFjZTogcywgcnVubmVyOiByIHx8IG51bGwgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhdHRhY2goZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IGkuQmFzZUNvbnRyYWN0KGUsIHRoaXMuaW50ZXJmYWNlLCB0aGlzLnJ1bm5lcik7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXREZXBsb3lUcmFuc2FjdGlvbiguLi5lKSB7CiAgICAgICAgICAgIGxldCB0ID0ge307CiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmludGVyZmFjZS5kZXBsb3k7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAoci5pbnB1dHMubGVuZ3RoICsgMSA9PT0gZS5sZW5ndGggJiYgKHQgPSBhd2FpdCAoMCwgaS5jb3B5T3ZlcnJpZGVzKShlLnBvcCgpKSksCiAgICAgICAgICAgICAgci5pbnB1dHMubGVuZ3RoICE9PSBlLmxlbmd0aCkKICAgICAgICAgICAgKQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaW5jb3JyZWN0IG51bWJlciBvZiBhcmd1bWVudHMgdG8gY29uc3RydWN0b3InKTsKICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0ICgwLCBpLnJlc29sdmVBcmdzKSh0aGlzLnJ1bm5lciwgci5pbnB1dHMsIGUpLAogICAgICAgICAgICAgIHMgPSAoMCwgby5jb25jYXQpKFt0aGlzLmJ5dGVjb2RlLCB0aGlzLmludGVyZmFjZS5lbmNvZGVEZXBsb3kobildKTsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHQsIHsgZGF0YTogcyB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGRlcGxveSguLi5lKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLmdldERlcGxveVRyYW5zYWN0aW9uKC4uLmUpOwogICAgICAgICAgICAoMCwgby5hc3NlcnQpKAogICAgICAgICAgICAgIHRoaXMucnVubmVyICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIHRoaXMucnVubmVyLnNlbmRUcmFuc2FjdGlvbiwKICAgICAgICAgICAgICAnZmFjdG9yeSBydW5uZXIgZG9lcyBub3Qgc3VwcG9ydCBzZW5kaW5nIHRyYW5zYWN0aW9ucycsCiAgICAgICAgICAgICAgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsCiAgICAgICAgICAgICAgeyBvcGVyYXRpb246ICdzZW5kVHJhbnNhY3Rpb24nIH0KICAgICAgICAgICAgKTsKICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMucnVubmVyLnNlbmRUcmFuc2FjdGlvbih0KSwKICAgICAgICAgICAgICBuID0gKDAsIHMuZ2V0Q3JlYXRlQWRkcmVzcykocik7CiAgICAgICAgICAgIHJldHVybiBuZXcgaS5CYXNlQ29udHJhY3QobiwgdGhpcy5pbnRlcmZhY2UsIHRoaXMucnVubmVyLCByKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbm5lY3QoZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IGEodGhpcy5pbnRlcmZhY2UsIHRoaXMuYnl0ZWNvZGUsIGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb21Tb2xpZGl0eShlLCB0KSB7CiAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KShudWxsICE9IGUsICdiYWQgY29tcGlsZXIgb3V0cHV0JywgJ291dHB1dCcsIGUpLAogICAgICAgICAgICAgICdzdHJpbmcnID09IHR5cGVvZiBlICYmIChlID0gSlNPTi5wYXJzZShlKSk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBlLmFiaTsKICAgICAgICAgICAgbGV0IG4gPSAnJzsKICAgICAgICAgICAgcmV0dXJuIGUuYnl0ZWNvZGUgPyAobiA9IGUuYnl0ZWNvZGUpIDogZS5ldm0gJiYgZS5ldm0uYnl0ZWNvZGUgJiYgKG4gPSBlLmV2bS5ieXRlY29kZSksIG5ldyB0aGlzKHIsIG4sIHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkNvbnRyYWN0RmFjdG9yeSA9IGE7CiAgICAgIH0sCiAgICAgIDk1MjA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5VbmRlY29kZWRFdmVudExvZyA9CiAgICAgICAgICAgIHQuRXZlbnRMb2cgPQogICAgICAgICAgICB0LkNvbnRyYWN0VHJhbnNhY3Rpb25SZXNwb25zZSA9CiAgICAgICAgICAgIHQuQ29udHJhY3RUcmFuc2FjdGlvblJlY2VpcHQgPQogICAgICAgICAgICB0LkNvbnRyYWN0VW5rbm93bkV2ZW50UGF5bG9hZCA9CiAgICAgICAgICAgIHQuQ29udHJhY3RFdmVudFBheWxvYWQgPQogICAgICAgICAgICB0LkNvbnRyYWN0RmFjdG9yeSA9CiAgICAgICAgICAgIHQuQ29udHJhY3QgPQogICAgICAgICAgICB0LkJhc2VDb250cmFjdCA9CiAgICAgICAgICAgICAgdm9pZCAwKTsKICAgICAgICB2YXIgbiA9IHIoMTIzNik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdCYXNlQ29udHJhY3QnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi5CYXNlQ29udHJhY3Q7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NvbnRyYWN0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4uQ29udHJhY3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBzID0gcigxMzc2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NvbnRyYWN0RmFjdG9yeScsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBzLkNvbnRyYWN0RmFjdG9yeTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgbyA9IHIoMTgxKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NvbnRyYWN0RXZlbnRQYXlsb2FkJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG8uQ29udHJhY3RFdmVudFBheWxvYWQ7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NvbnRyYWN0VW5rbm93bkV2ZW50UGF5bG9hZCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLkNvbnRyYWN0VW5rbm93bkV2ZW50UGF5bG9hZDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NvbnRyYWN0VHJhbnNhY3Rpb25SZWNlaXB0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uQ29udHJhY3RUcmFuc2FjdGlvblJlY2VpcHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdDb250cmFjdFRyYW5zYWN0aW9uUmVzcG9uc2UnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5Db250cmFjdFRyYW5zYWN0aW9uUmVzcG9uc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFdmVudExvZycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLkV2ZW50TG9nOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVW5kZWNvZGVkRXZlbnRMb2cnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5VbmRlY29kZWRFdmVudExvZzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDE4MTogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LkNvbnRyYWN0RXZlbnRQYXlsb2FkID0KICAgICAgICAgICAgdC5Db250cmFjdFVua25vd25FdmVudFBheWxvYWQgPQogICAgICAgICAgICB0LkNvbnRyYWN0VHJhbnNhY3Rpb25SZXNwb25zZSA9CiAgICAgICAgICAgIHQuQ29udHJhY3RUcmFuc2FjdGlvblJlY2VpcHQgPQogICAgICAgICAgICB0LlVuZGVjb2RlZEV2ZW50TG9nID0KICAgICAgICAgICAgdC5FdmVudExvZyA9CiAgICAgICAgICAgICAgdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig2OTkyKSwKICAgICAgICAgIHMgPSByKDUzMTYpOwogICAgICAgIGNsYXNzIG8gZXh0ZW5kcyBuLkxvZyB7CiAgICAgICAgICBpbnRlcmZhY2U7CiAgICAgICAgICBmcmFnbWVudDsKICAgICAgICAgIGFyZ3M7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIHN1cGVyKGUsIGUucHJvdmlkZXIpOwogICAgICAgICAgICBjb25zdCBuID0gdC5kZWNvZGVFdmVudExvZyhyLCBlLmRhdGEsIGUudG9waWNzKTsKICAgICAgICAgICAgKDAsIHMuZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBhcmdzOiBuLCBmcmFnbWVudDogciwgaW50ZXJmYWNlOiB0IH0pOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGV2ZW50TmFtZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJhZ21lbnQubmFtZTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBldmVudFNpZ25hdHVyZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJhZ21lbnQuZm9ybWF0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuRXZlbnRMb2cgPSBvOwogICAgICAgIGNsYXNzIGkgZXh0ZW5kcyBuLkxvZyB7CiAgICAgICAgICBlcnJvcjsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgc3VwZXIoZSwgZS5wcm92aWRlciksICgwLCBzLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgZXJyb3I6IHQgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuVW5kZWNvZGVkRXZlbnRMb2cgPSBpOwogICAgICAgIGNsYXNzIGEgZXh0ZW5kcyBuLlRyYW5zYWN0aW9uUmVjZWlwdCB7CiAgICAgICAgICAjdzsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgc3VwZXIociwgdCksICh0aGlzLiN3ID0gZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgbG9ncygpIHsKICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmxvZ3MubWFwKChlKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGUudG9waWNzLmxlbmd0aCA_IHRoaXMuI3cuZ2V0RXZlbnQoZS50b3BpY3NbMF0pIDogbnVsbDsKICAgICAgICAgICAgICBpZiAodCkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbyhlLCB0aGlzLiN3LCB0KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBpKGUsIHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5Db250cmFjdFRyYW5zYWN0aW9uUmVjZWlwdCA9IGE7CiAgICAgICAgY2xhc3MgYyBleHRlbmRzIG4uVHJhbnNhY3Rpb25SZXNwb25zZSB7CiAgICAgICAgICAjdzsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgc3VwZXIociwgdCksICh0aGlzLiN3ID0gZSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyB3YWl0KGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IHN1cGVyLndhaXQoZSk7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyBudWxsIDogbmV3IGEodGhpcy4jdywgdGhpcy5wcm92aWRlciwgdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuQ29udHJhY3RUcmFuc2FjdGlvblJlc3BvbnNlID0gYzsKICAgICAgICBjbGFzcyB1IGV4dGVuZHMgcy5FdmVudFBheWxvYWQgewogICAgICAgICAgbG9nOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgciwgbikgewogICAgICAgICAgICBzdXBlcihlLCB0LCByKSwgKDAsIHMuZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBsb2c6IG4gfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRCbG9jaygpIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubG9nLmdldEJsb2NrKCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRUcmFuc2FjdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubG9nLmdldFRyYW5zYWN0aW9uKCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRUcmFuc2FjdGlvblJlY2VpcHQoKSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmxvZy5nZXRUcmFuc2FjdGlvblJlY2VpcHQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuQ29udHJhY3RVbmtub3duRXZlbnRQYXlsb2FkID0gdSksCiAgICAgICAgICAodC5Db250cmFjdEV2ZW50UGF5bG9hZCA9IGNsYXNzIGV4dGVuZHMgdSB7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIG4sIGkpIHsKICAgICAgICAgICAgICBzdXBlcihlLCB0LCByLCBuZXcgbyhpLCBlLmludGVyZmFjZSwgbikpOwogICAgICAgICAgICAgIGNvbnN0IGEgPSBlLmludGVyZmFjZS5kZWNvZGVFdmVudExvZyhuLCB0aGlzLmxvZy5kYXRhLCB0aGlzLmxvZy50b3BpY3MpOwogICAgICAgICAgICAgICgwLCBzLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgYXJnczogYSwgZnJhZ21lbnQ6IG4gfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ2V0IGV2ZW50TmFtZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mcmFnbWVudC5uYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGdldCBldmVudFNpZ25hdHVyZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mcmFnbWVudC5mb3JtYXQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDUwNzY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5yYW5kb21CeXRlcyA9IHQucGJrZGYyU3luYyA9IHQuY3JlYXRlSG1hYyA9IHQuY3JlYXRlSGFzaCA9IHZvaWQgMCk7CiAgICAgICAgdmFyIG4gPSByKDc5NjgpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnY3JlYXRlSGFzaCcsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBuLmNyZWF0ZUhhc2g7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2NyZWF0ZUhtYWMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbi5jcmVhdGVIbWFjOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncGJrZGYyU3luYycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBuLnBia2RmMlN5bmM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdyYW5kb21CeXRlcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBuLnJhbmRvbUJ5dGVzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNzc3NjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuY29tcHV0ZUhtYWMgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUwNzYpLAogICAgICAgICAgcyA9IHIoNTMxNik7CiAgICAgICAgbGV0IG8gPSAhMTsKICAgICAgICBjb25zdCBpID0gZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgIHJldHVybiAoMCwgbi5jcmVhdGVIbWFjKShlLCB0KS51cGRhdGUocikuZGlnZXN0KCk7CiAgICAgICAgfTsKICAgICAgICBsZXQgYSA9IGk7CiAgICAgICAgZnVuY3Rpb24gYyhlLCB0LCByKSB7CiAgICAgICAgICBjb25zdCBuID0gKDAsIHMuZ2V0Qnl0ZXMpKHQsICdrZXknKSwKICAgICAgICAgICAgbyA9ICgwLCBzLmdldEJ5dGVzKShyLCAnZGF0YScpOwogICAgICAgICAgcmV0dXJuICgwLCBzLmhleGxpZnkpKGEoZSwgbiwgbykpOwogICAgICAgIH0KICAgICAgICAodC5jb21wdXRlSG1hYyA9IGMpLAogICAgICAgICAgKGMuXyA9IGkpLAogICAgICAgICAgKGMubG9jayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbyA9ICEwOwogICAgICAgICAgfSksCiAgICAgICAgICAoYy5yZWdpc3RlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChvKSB0aHJvdyBuZXcgRXJyb3IoJ2NvbXB1dGVIbWFjIGlzIGxvY2tlZCcpOwogICAgICAgICAgICBhID0gZTsKICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmZyZWV6ZShjKTsKICAgICAgfSwKICAgICAgOTg3MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LmxvY2sgPQogICAgICAgICAgICB0LlNpZ25hdHVyZSA9CiAgICAgICAgICAgIHQuU2lnbmluZ0tleSA9CiAgICAgICAgICAgIHQuc2NyeXB0U3luYyA9CiAgICAgICAgICAgIHQuc2NyeXB0ID0KICAgICAgICAgICAgdC5wYmtkZjIgPQogICAgICAgICAgICB0LnNoYTUxMiA9CiAgICAgICAgICAgIHQuc2hhMjU2ID0KICAgICAgICAgICAgdC5yaXBlbWQxNjAgPQogICAgICAgICAgICB0LmtlY2NhazI1NiA9CiAgICAgICAgICAgIHQucmFuZG9tQnl0ZXMgPQogICAgICAgICAgICB0LmNvbXB1dGVIbWFjID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDc3NzYpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnY29tcHV0ZUhtYWMnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi5jb21wdXRlSG1hYzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zdCBzID0gcig1ODAwKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2tlY2NhazI1NicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBzLmtlY2NhazI1NjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zdCBvID0gcigzMjcyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3JpcGVtZDE2MCcsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvLnJpcGVtZDE2MDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zdCBpID0gcig5MDc1KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3Bia2RmMicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBpLnBia2RmMjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zdCBhID0gcigyODQzKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3JhbmRvbUJ5dGVzJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGEucmFuZG9tQnl0ZXM7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgYyA9IHIoMTg4OCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdzY3J5cHQnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYy5zY3J5cHQ7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3NjcnlwdFN5bmMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYy5zY3J5cHRTeW5jOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICBjb25zdCB1ID0gcig2MjMzKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3NoYTI1NicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB1LnNoYTI1NjsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnc2hhNTEyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHUuc2hhNTEyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgbCA9IHIoMTU2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1NpZ25pbmdLZXknLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbC5TaWduaW5nS2V5OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBkID0gcig4NDMyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1NpZ25hdHVyZScsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBkLlNpZ25hdHVyZTsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgICh0LmxvY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG4uY29tcHV0ZUhtYWMubG9jaygpLAogICAgICAgICAgICAgIHMua2VjY2FrMjU2LmxvY2soKSwKICAgICAgICAgICAgICBpLnBia2RmMi5sb2NrKCksCiAgICAgICAgICAgICAgYS5yYW5kb21CeXRlcy5sb2NrKCksCiAgICAgICAgICAgICAgby5yaXBlbWQxNjAubG9jaygpLAogICAgICAgICAgICAgIGMuc2NyeXB0LmxvY2soKSwKICAgICAgICAgICAgICBjLnNjcnlwdFN5bmMubG9jaygpLAogICAgICAgICAgICAgIHUuc2hhMjU2LmxvY2soKSwKICAgICAgICAgICAgICB1LnNoYTUxMi5sb2NrKCksCiAgICAgICAgICAgICAgYS5yYW5kb21CeXRlcy5sb2NrKCk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNTgwMDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQua2VjY2FrMjU2ID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig5OTg0KSwKICAgICAgICAgIHMgPSByKDUzMTYpOwogICAgICAgIGxldCBvID0gITE7CiAgICAgICAgY29uc3QgaSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gKDAsIG4ua2VjY2FrXzI1NikoZSk7CiAgICAgICAgfTsKICAgICAgICBsZXQgYSA9IGk7CiAgICAgICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgICAgICBjb25zdCB0ID0gKDAsIHMuZ2V0Qnl0ZXMpKGUsICdkYXRhJyk7CiAgICAgICAgICByZXR1cm4gKDAsIHMuaGV4bGlmeSkoYSh0KSk7CiAgICAgICAgfQogICAgICAgICh0LmtlY2NhazI1NiA9IGMpLAogICAgICAgICAgKGMuXyA9IGkpLAogICAgICAgICAgKGMubG9jayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbyA9ICEwOwogICAgICAgICAgfSksCiAgICAgICAgICAoYy5yZWdpc3RlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChvKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdrZWNjYWsyNTYgaXMgbG9ja2VkJyk7CiAgICAgICAgICAgIGEgPSBlOwogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZnJlZXplKGMpOwogICAgICB9LAogICAgICA5MDc1OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5wYmtkZjIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUwNzYpLAogICAgICAgICAgcyA9IHIoNTMxNik7CiAgICAgICAgbGV0IG8gPSAhMTsKICAgICAgICBjb25zdCBpID0gZnVuY3Rpb24gKGUsIHQsIHIsIHMsIG8pIHsKICAgICAgICAgIHJldHVybiAoMCwgbi5wYmtkZjJTeW5jKShlLCB0LCByLCBzLCBvKTsKICAgICAgICB9OwogICAgICAgIGxldCBhID0gaTsKICAgICAgICBmdW5jdGlvbiBjKGUsIHQsIHIsIG4sIG8pIHsKICAgICAgICAgIGNvbnN0IGkgPSAoMCwgcy5nZXRCeXRlcykoZSwgJ3Bhc3N3b3JkJyksCiAgICAgICAgICAgIGMgPSAoMCwgcy5nZXRCeXRlcykodCwgJ3NhbHQnKTsKICAgICAgICAgIHJldHVybiAoMCwgcy5oZXhsaWZ5KShhKGksIGMsIHIsIG4sIG8pKTsKICAgICAgICB9CiAgICAgICAgKHQucGJrZGYyID0gYyksCiAgICAgICAgICAoYy5fID0gaSksCiAgICAgICAgICAoYy5sb2NrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvID0gITA7CiAgICAgICAgICB9KSwKICAgICAgICAgIChjLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKG8pIHRocm93IG5ldyBFcnJvcigncGJrZGYyIGlzIGxvY2tlZCcpOwogICAgICAgICAgICBhID0gZTsKICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmZyZWV6ZShjKTsKICAgICAgfSwKICAgICAgMjg0MzogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQucmFuZG9tQnl0ZXMgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUwNzYpOwogICAgICAgIGxldCBzID0gITE7CiAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoKDAsIG4ucmFuZG9tQnl0ZXMpKGUpKTsKICAgICAgICB9OwogICAgICAgIGxldCBpID0gbzsKICAgICAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICAgIHJldHVybiBpKGUpOwogICAgICAgIH0KICAgICAgICAodC5yYW5kb21CeXRlcyA9IGEpLAogICAgICAgICAgKGEuXyA9IG8pLAogICAgICAgICAgKGEubG9jayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcyA9ICEwOwogICAgICAgICAgfSksCiAgICAgICAgICAoYS5yZWdpc3RlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChzKSB0aHJvdyBuZXcgRXJyb3IoJ3JhbmRvbUJ5dGVzIGlzIGxvY2tlZCcpOwogICAgICAgICAgICBpID0gZTsKICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmZyZWV6ZShhKTsKICAgICAgfSwKICAgICAgMzI3MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQucmlwZW1kMTYwID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcigyMDcyKSwKICAgICAgICAgIHMgPSByKDUzMTYpOwogICAgICAgIGxldCBvID0gITE7CiAgICAgICAgY29uc3QgaSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gKDAsIG4ucmlwZW1kMTYwKShlKTsKICAgICAgICB9OwogICAgICAgIGxldCBhID0gaTsKICAgICAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSAoMCwgcy5nZXRCeXRlcykoZSwgJ2RhdGEnKTsKICAgICAgICAgIHJldHVybiAoMCwgcy5oZXhsaWZ5KShhKHQpKTsKICAgICAgICB9CiAgICAgICAgKHQucmlwZW1kMTYwID0gYyksCiAgICAgICAgICAoYy5fID0gaSksCiAgICAgICAgICAoYy5sb2NrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBvID0gITA7CiAgICAgICAgICB9KSwKICAgICAgICAgIChjLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKG8pIHRocm93IG5ldyBUeXBlRXJyb3IoJ3JpcGVtZDE2MCBpcyBsb2NrZWQnKTsKICAgICAgICAgICAgYSA9IGU7CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5mcmVlemUoYyk7CiAgICAgIH0sCiAgICAgIDE4ODg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LnNjcnlwdFN5bmMgPSB0LnNjcnlwdCA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNDg1MiksCiAgICAgICAgICBzID0gcig1MzE2KTsKICAgICAgICBsZXQgbyA9ICExLAogICAgICAgICAgaSA9ICExOwogICAgICAgIGNvbnN0IGEgPSBhc3luYyBmdW5jdGlvbiAoZSwgdCwgciwgcywgbywgaSwgYSkgewogICAgICAgICAgICByZXR1cm4gYXdhaXQgKDAsIG4uc2NyeXB0QXN5bmMpKGUsIHQsIHsgTjogciwgcjogcywgcDogbywgZGtMZW46IGksIG9uUHJvZ3Jlc3M6IGEgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgYyA9IGZ1bmN0aW9uIChlLCB0LCByLCBzLCBvLCBpKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgbi5zY3J5cHQpKGUsIHQsIHsgTjogciwgcjogcywgcDogbywgZGtMZW46IGkgfSk7CiAgICAgICAgICB9OwogICAgICAgIGxldCB1ID0gYSwKICAgICAgICAgIGwgPSBjOwogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGQoZSwgdCwgciwgbiwgbywgaSwgYSkgewogICAgICAgICAgY29uc3QgYyA9ICgwLCBzLmdldEJ5dGVzKShlLCAncGFzc3dkJyksCiAgICAgICAgICAgIGwgPSAoMCwgcy5nZXRCeXRlcykodCwgJ3NhbHQnKTsKICAgICAgICAgIHJldHVybiAoMCwgcy5oZXhsaWZ5KShhd2FpdCB1KGMsIGwsIHIsIG4sIG8sIGksIGEpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZihlLCB0LCByLCBuLCBvLCBpKSB7CiAgICAgICAgICBjb25zdCBhID0gKDAsIHMuZ2V0Qnl0ZXMpKGUsICdwYXNzd2QnKSwKICAgICAgICAgICAgYyA9ICgwLCBzLmdldEJ5dGVzKSh0LCAnc2FsdCcpOwogICAgICAgICAgcmV0dXJuICgwLCBzLmhleGxpZnkpKGwoYSwgYywgciwgbiwgbywgaSkpOwogICAgICAgIH0KICAgICAgICAodC5zY3J5cHQgPSBkKSwKICAgICAgICAgIChkLl8gPSBhKSwKICAgICAgICAgIChkLmxvY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGkgPSAhMDsKICAgICAgICAgIH0pLAogICAgICAgICAgKGQucmVnaXN0ZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoaSkgdGhyb3cgbmV3IEVycm9yKCdzY3J5cHQgaXMgbG9ja2VkJyk7CiAgICAgICAgICAgIHUgPSBlOwogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZnJlZXplKGQpLAogICAgICAgICAgKHQuc2NyeXB0U3luYyA9IGYpLAogICAgICAgICAgKGYuXyA9IGMpLAogICAgICAgICAgKGYubG9jayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbyA9ICEwOwogICAgICAgICAgfSksCiAgICAgICAgICAoZi5yZWdpc3RlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChvKSB0aHJvdyBuZXcgRXJyb3IoJ3NjcnlwdFN5bmMgaXMgbG9ja2VkJyk7CiAgICAgICAgICAgIGwgPSBlOwogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZnJlZXplKGYpOwogICAgICB9LAogICAgICA2MjMzOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5zaGE1MTIgPSB0LnNoYTI1NiA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTA3NiksCiAgICAgICAgICBzID0gcig1MzE2KSwKICAgICAgICAgIG8gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gKDAsIG4uY3JlYXRlSGFzaCkoJ3NoYTI1NicpLnVwZGF0ZShlKS5kaWdlc3QoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBpID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBuLmNyZWF0ZUhhc2gpKCdzaGE1MTInKS51cGRhdGUoZSkuZGlnZXN0KCk7CiAgICAgICAgICB9OwogICAgICAgIGxldCBhID0gbywKICAgICAgICAgIGMgPSBpLAogICAgICAgICAgdSA9ICExLAogICAgICAgICAgbCA9ICExOwogICAgICAgIGZ1bmN0aW9uIGQoZSkgewogICAgICAgICAgY29uc3QgdCA9ICgwLCBzLmdldEJ5dGVzKShlLCAnZGF0YScpOwogICAgICAgICAgcmV0dXJuICgwLCBzLmhleGxpZnkpKGEodCkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSAoMCwgcy5nZXRCeXRlcykoZSwgJ2RhdGEnKTsKICAgICAgICAgIHJldHVybiAoMCwgcy5oZXhsaWZ5KShjKHQpKTsKICAgICAgICB9CiAgICAgICAgKHQuc2hhMjU2ID0gZCksCiAgICAgICAgICAoZC5fID0gbyksCiAgICAgICAgICAoZC5sb2NrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB1ID0gITA7CiAgICAgICAgICB9KSwKICAgICAgICAgIChkLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgaWYgKHUpIHRocm93IG5ldyBFcnJvcignc2hhMjU2IGlzIGxvY2tlZCcpOwogICAgICAgICAgICBhID0gZTsKICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmZyZWV6ZShkKSwKICAgICAgICAgICh0LnNoYTUxMiA9IGYpLAogICAgICAgICAgKGYuXyA9IGkpLAogICAgICAgICAgKGYubG9jayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbCA9ICEwOwogICAgICAgICAgfSksCiAgICAgICAgICAoZi5yZWdpc3RlciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChsKSB0aHJvdyBuZXcgRXJyb3IoJ3NoYTUxMiBpcyBsb2NrZWQnKTsKICAgICAgICAgICAgYyA9IGU7CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5mcmVlemUoZCk7CiAgICAgIH0sCiAgICAgIDg0MzI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LlNpZ25hdHVyZSA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTUxNiksCiAgICAgICAgICBzID0gcig1MzE2KSwKICAgICAgICAgIG8gPSBCaWdJbnQoMCksCiAgICAgICAgICBpID0gQmlnSW50KDEpLAogICAgICAgICAgYSA9IEJpZ0ludCgyKSwKICAgICAgICAgIGMgPSBCaWdJbnQoMjcpLAogICAgICAgICAgdSA9IEJpZ0ludCgyOCksCiAgICAgICAgICBsID0gQmlnSW50KDM1KSwKICAgICAgICAgIGQgPSB7fTsKICAgICAgICBmdW5jdGlvbiBmKGUpIHsKICAgICAgICAgIHJldHVybiAoMCwgcy56ZXJvUGFkVmFsdWUpKCgwLCBzLnRvQmVBcnJheSkoZSksIDMyKTsKICAgICAgICB9CiAgICAgICAgY2xhc3MgaCB7CiAgICAgICAgICAjVDsKICAgICAgICAgICNQOwogICAgICAgICAgI1M7CiAgICAgICAgICAjTzsKICAgICAgICAgIGdldCByKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jVDsKICAgICAgICAgIH0KICAgICAgICAgIHNldCByKGUpIHsKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKDMyID09PSAoMCwgcy5kYXRhTGVuZ3RoKShlKSwgJ2ludmFsaWQgcicsICd2YWx1ZScsIGUpLCAodGhpcy4jVCA9ICgwLCBzLmhleGxpZnkpKGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jUDsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBzKGUpIHsKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKDMyID09PSAoMCwgcy5kYXRhTGVuZ3RoKShlKSwgJ2ludmFsaWQgcycsICd2YWx1ZScsIGUpOwogICAgICAgICAgICBjb25zdCB0ID0gKDAsIHMuaGV4bGlmeSkoZSk7CiAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KShwYXJzZUludCh0LnN1YnN0cmluZygwLCAzKSkgPCA4LCAnbm9uLWNhbm9uaWNhbCBzJywgJ3ZhbHVlJywgdCksICh0aGlzLiNQID0gdCk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgdigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI1M7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgdihlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgcy5nZXROdW1iZXIpKGUsICd2YWx1ZScpOwogICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoMjcgPT09IHQgfHwgMjggPT09IHQsICdpbnZhbGlkIHYnLCAndicsIGUpLCAodGhpcy4jUyA9IHQpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IG5ldHdvcmtWKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jTzsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBsZWdhY3lDaGFpbklkKCkgewogICAgICAgICAgICBjb25zdCBlID0gdGhpcy5uZXR3b3JrVjsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA_IG51bGwgOiBoLmdldENoYWluSWQoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgeVBhcml0eSgpIHsKICAgICAgICAgICAgcmV0dXJuIDI3ID09PSB0aGlzLnYgPyAwIDogMTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCB5UGFyaXR5QW5kUygpIHsKICAgICAgICAgICAgY29uc3QgZSA9ICgwLCBzLmdldEJ5dGVzKSh0aGlzLnMpOwogICAgICAgICAgICByZXR1cm4gdGhpcy55UGFyaXR5ICYmIChlWzBdIHw9IDEyOCksICgwLCBzLmhleGxpZnkpKGUpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGNvbXBhY3RTZXJpYWxpemVkKCkgewogICAgICAgICAgICByZXR1cm4gKDAsIHMuY29uY2F0KShbdGhpcy5yLCB0aGlzLnlQYXJpdHlBbmRTXSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgc2VyaWFsaXplZCgpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBzLmNvbmNhdCkoW3RoaXMuciwgdGhpcy5zLCB0aGlzLnlQYXJpdHkgPyAnMHgxYycgOiAnMHgxYiddKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0UHJpdmF0ZSkoZSwgZCwgJ1NpZ25hdHVyZScpLCAodGhpcy4jVCA9IHQpLCAodGhpcy4jUCA9IHIpLCAodGhpcy4jUyA9IG4pLCAodGhpcy4jTyA9IG51bGwpOwogICAgICAgICAgfQogICAgICAgICAgW1N5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJyldKCkgewogICAgICAgICAgICByZXR1cm4gYFNpZ25hdHVyZSB7IHI6ICIke3RoaXMucn0iLCBzOiAiJHt0aGlzLnN9IiwgeVBhcml0eTogJHt0aGlzLnlQYXJpdHl9LCBuZXR3b3JrVjogJHt0aGlzLm5ldHdvcmtWfSB9YDsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICBjb25zdCBlID0gbmV3IGgoZCwgdGhpcy5yLCB0aGlzLnMsIHRoaXMudik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm5ldHdvcmtWICYmIChlLiNPID0gdGhpcy5uZXR3b3JrViksIGU7CiAgICAgICAgICB9CiAgICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLm5ldHdvcmtWOwogICAgICAgICAgICByZXR1cm4geyBfdHlwZTogJ3NpZ25hdHVyZScsIG5ldHdvcmtWOiBudWxsICE9IGUgPyBlLnRvU3RyaW5nKCkgOiBudWxsLCByOiB0aGlzLnIsIHM6IHRoaXMucywgdjogdGhpcy52IH07CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZ2V0Q2hhaW5JZChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgcy5nZXRCaWdJbnQpKGUsICd2Jyk7CiAgICAgICAgICAgIHJldHVybiB0ID09IGMgfHwgdCA9PSB1ID8gbyA6ICgoMCwgcy5hc3NlcnRBcmd1bWVudCkodCA-PSBsLCAnaW52YWxpZCBFSVAtMTU1IHYnLCAndicsIGUpLCAodCAtIGwpIC8gYSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZ2V0Q2hhaW5JZFYoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKDAsIHMuZ2V0QmlnSW50KShlKSAqIGEgKyBCaWdJbnQoMzUgKyB0IC0gMjcpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGdldE5vcm1hbGl6ZWRWKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBzLmdldEJpZ0ludCkoZSk7CiAgICAgICAgICAgIHJldHVybiB0ID09PSBvIHx8IHQgPT09IGMKICAgICAgICAgICAgICA_IDI3CiAgICAgICAgICAgICAgOiB0ID09PSBpIHx8IHQgPT09IHUKICAgICAgICAgICAgICAgID8gMjgKICAgICAgICAgICAgICAgIDogKCgwLCBzLmFzc2VydEFyZ3VtZW50KSh0ID49IGwsICdpbnZhbGlkIHYnLCAndicsIGUpLCB0ICYgaSA_IDI3IDogMjgpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb20oZSkgewogICAgICAgICAgICBmdW5jdGlvbiB0KHQsIHIpIHsKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkodCwgciwgJ3NpZ25hdHVyZScsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiBuZXcgaChkLCBuLlplcm9IYXNoLCBuLlplcm9IYXNoLCAyNyk7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSAoMCwgcy5nZXRCeXRlcykoZSwgJ3NpZ25hdHVyZScpOwogICAgICAgICAgICAgIGlmICg2NCA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAoMCwgcy5oZXhsaWZ5KShyLnNsaWNlKDAsIDMyKSksCiAgICAgICAgICAgICAgICAgIHQgPSByLnNsaWNlKDMyLCA2NCksCiAgICAgICAgICAgICAgICAgIG4gPSAxMjggJiB0WzBdID8gMjggOiAyNzsKICAgICAgICAgICAgICAgIHJldHVybiAodFswXSAmPSAxMjcpLCBuZXcgaChkLCBlLCAoMCwgcy5oZXhsaWZ5KSh0KSwgbik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICg2NSA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAoMCwgcy5oZXhsaWZ5KShyLnNsaWNlKDAsIDMyKSksCiAgICAgICAgICAgICAgICAgIG4gPSByLnNsaWNlKDMyLCA2NCk7CiAgICAgICAgICAgICAgICB0KDAgPT0gKDEyOCAmIG5bMF0pLCAnbm9uLWNhbm9uaWNhbCBzJyk7CiAgICAgICAgICAgICAgICBjb25zdCBvID0gaC5nZXROb3JtYWxpemVkVihyWzY0XSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGgoZCwgZSwgKDAsIHMuaGV4bGlmeSkobiksIG8pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0KCExLCAnaW52YWxpZCByYXcgc2lnbmF0dXJlIGxlbmd0aCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgaCkgcmV0dXJuIGUuY2xvbmUoKTsKICAgICAgICAgICAgY29uc3QgciA9IGUucjsKICAgICAgICAgICAgdChudWxsICE9IHIsICdtaXNzaW5nIHInKTsKICAgICAgICAgICAgY29uc3QgbyA9IGYociksCiAgICAgICAgICAgICAgaSA9IChmdW5jdGlvbiAoZSwgcikgewogICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gZSkgcmV0dXJuIGYoZSk7CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSByKSB7CiAgICAgICAgICAgICAgICAgIHQoKDAsIHMuaXNIZXhTdHJpbmcpKHIsIDMyKSwgJ2ludmFsaWQgeVBhcml0eUFuZFMnKTsKICAgICAgICAgICAgICAgICAgY29uc3QgZSA9ICgwLCBzLmdldEJ5dGVzKShyKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIChlWzBdICY9IDEyNyksICgwLCBzLmhleGxpZnkpKGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdCghMSwgJ21pc3NpbmcgcycpOwogICAgICAgICAgICAgIH0pKGUucywgZS55UGFyaXR5QW5kUyk7CiAgICAgICAgICAgIHQoMCA9PSAoMTI4ICYgKDAsIHMuZ2V0Qnl0ZXMpKGkpWzBdKSwgJ25vbi1jYW5vbmljYWwgcycpOwogICAgICAgICAgICBjb25zdCB7IG5ldHdvcmtWOiBhLCB2OiBjIH0gPSAoZnVuY3Rpb24gKGUsIHIsIG4pIHsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGUpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBzLmdldEJpZ0ludCkoZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiB7IG5ldHdvcmtWOiB0ID49IGwgPyB0IDogdm9pZCAwLCB2OiBoLmdldE5vcm1hbGl6ZWRWKHQpIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSByKQogICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIHQoKDAsIHMuaXNIZXhTdHJpbmcpKHIsIDMyKSwgJ2ludmFsaWQgeVBhcml0eUFuZFMnKSwgeyB2OiAxMjggJiAoMCwgcy5nZXRCeXRlcykocilbMF0gPyAyOCA6IDI3IH0KICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIGlmIChudWxsICE9IG4pIHsKICAgICAgICAgICAgICAgICAgc3dpdGNoICgoMCwgcy5nZXROdW1iZXIpKG4sICdzaWcueVBhcml0eScpKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdjogMjcgfTsKICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2OiAyOCB9OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHQoITEsICdpbnZhbGlkIHlQYXJpdHknKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHQoITEsICdtaXNzaW5nIHYnKTsKICAgICAgICAgICAgICB9KShlLnYsIGUueVBhcml0eUFuZFMsIGUueVBhcml0eSksCiAgICAgICAgICAgICAgdSA9IG5ldyBoKGQsIG8sIGksIGMpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIGEgJiYgKHUuI08gPSBhKSwKICAgICAgICAgICAgICB0KG51bGwgPT0gZS55UGFyaXR5IHx8ICgwLCBzLmdldE51bWJlcikoZS55UGFyaXR5LCAnc2lnLnlQYXJpdHknKSA9PT0gdS55UGFyaXR5LCAneVBhcml0eSBtaXNtYXRjaCcpLAogICAgICAgICAgICAgIHQobnVsbCA9PSBlLnlQYXJpdHlBbmRTIHx8IGUueVBhcml0eUFuZFMgPT09IHUueVBhcml0eUFuZFMsICd5UGFyaXR5QW5kUyBtaXNtYXRjaCcpLAogICAgICAgICAgICAgIHUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5TaWduYXR1cmUgPSBoOwogICAgICB9LAogICAgICAxNTY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LlNpZ25pbmdLZXkgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDMzODQpLAogICAgICAgICAgcyA9IHIoNTMxNiksCiAgICAgICAgICBvID0gcig4NDMyKTsKICAgICAgICBjbGFzcyBpIHsKICAgICAgICAgICNSOwogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoMzIgPT09ICgwLCBzLmRhdGFMZW5ndGgpKGUpLCAnaW52YWxpZCBwcml2YXRlIGtleScsICdwcml2YXRlS2V5JywgJ1tSRURBQ1RFRF0nKSwKICAgICAgICAgICAgICAodGhpcy4jUiA9ICgwLCBzLmhleGxpZnkpKGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwcml2YXRlS2V5KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jUjsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwdWJsaWNLZXkoKSB7CiAgICAgICAgICAgIHJldHVybiBpLmNvbXB1dGVQdWJsaWNLZXkodGhpcy4jUik7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgY29tcHJlc3NlZFB1YmxpY0tleSgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuY29tcHV0ZVB1YmxpY0tleSh0aGlzLiNSLCAhMCk7CiAgICAgICAgICB9CiAgICAgICAgICBzaWduKGUpIHsKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKDMyID09PSAoMCwgcy5kYXRhTGVuZ3RoKShlKSwgJ2ludmFsaWQgZGlnZXN0IGxlbmd0aCcsICdkaWdlc3QnLCBlKTsKICAgICAgICAgICAgY29uc3QgdCA9IG4uc2VjcDI1NmsxLnNpZ24oKDAsIHMuZ2V0Qnl0ZXNDb3B5KShlKSwgKDAsIHMuZ2V0Qnl0ZXNDb3B5KSh0aGlzLiNSKSwgeyBsb3dTOiAhMCB9KTsKICAgICAgICAgICAgcmV0dXJuIG8uU2lnbmF0dXJlLmZyb20oewogICAgICAgICAgICAgIHI6ICgwLCBzLnRvQmVIZXgpKHQuciwgMzIpLAogICAgICAgICAgICAgIHM6ICgwLCBzLnRvQmVIZXgpKHQucywgMzIpLAogICAgICAgICAgICAgIHY6IHQucmVjb3ZlcnkgPyAyOCA6IDI3CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgY29tcHV0ZVNoYXJlZFNlY3JldChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBpLmNvbXB1dGVQdWJsaWNLZXkoZSk7CiAgICAgICAgICAgIHJldHVybiAoMCwgcy5oZXhsaWZ5KShuLnNlY3AyNTZrMS5nZXRTaGFyZWRTZWNyZXQoKDAsIHMuZ2V0Qnl0ZXNDb3B5KSh0aGlzLiNSKSwgKDAsIHMuZ2V0Qnl0ZXMpKHQpLCAhMSkpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGNvbXB1dGVQdWJsaWNLZXkoZSwgdCkgewogICAgICAgICAgICBsZXQgciA9ICgwLCBzLmdldEJ5dGVzKShlLCAna2V5Jyk7CiAgICAgICAgICAgIGlmICgzMiA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gbi5zZWNwMjU2azEuZ2V0UHVibGljS2V5KHIsICEhdCk7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBzLmhleGxpZnkpKGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICg2NCA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkoNjUpOwogICAgICAgICAgICAgIChlWzBdID0gNCksIGUuc2V0KHIsIDEpLCAociA9IGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IG8gPSBuLnNlY3AyNTZrMS5Qcm9qZWN0aXZlUG9pbnQuZnJvbUhleChyKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBzLmhleGxpZnkpKG8udG9SYXdCeXRlcyh0KSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgcmVjb3ZlclB1YmxpY0tleShlLCB0KSB7CiAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSgzMiA9PT0gKDAsIHMuZGF0YUxlbmd0aCkoZSksICdpbnZhbGlkIGRpZ2VzdCBsZW5ndGgnLCAnZGlnZXN0JywgZSk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBvLlNpZ25hdHVyZS5mcm9tKHQpOwogICAgICAgICAgICBsZXQgaSA9IG4uc2VjcDI1NmsxLlNpZ25hdHVyZS5mcm9tQ29tcGFjdCgoMCwgcy5nZXRCeXRlc0NvcHkpKCgwLCBzLmNvbmNhdCkoW3Iuciwgci5zXSkpKTsKICAgICAgICAgICAgaSA9IGkuYWRkUmVjb3ZlcnlCaXQoci55UGFyaXR5KTsKICAgICAgICAgICAgY29uc3QgYSA9IGkucmVjb3ZlclB1YmxpY0tleSgoMCwgcy5nZXRCeXRlc0NvcHkpKGUpKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBzLmFzc2VydEFyZ3VtZW50KShudWxsICE9IGEsICdpbnZhbGlkIHNpZ25hdXRyZSBmb3IgZGlnZXN0JywgJ3NpZ25hdHVyZScsIHQpLCAnMHgnICsgYS50b0hleCghMSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYWRkUG9pbnRzKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgcyA9IG4uc2VjcDI1NmsxLlByb2plY3RpdmVQb2ludC5mcm9tSGV4KGkuY29tcHV0ZVB1YmxpY0tleShlKS5zdWJzdHJpbmcoMikpLAogICAgICAgICAgICAgIG8gPSBuLnNlY3AyNTZrMS5Qcm9qZWN0aXZlUG9pbnQuZnJvbUhleChpLmNvbXB1dGVQdWJsaWNLZXkodCkuc3Vic3RyaW5nKDIpKTsKICAgICAgICAgICAgcmV0dXJuICcweCcgKyBzLmFkZChvKS50b0hleCghIXIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LlNpZ25pbmdLZXkgPSBpOwogICAgICB9LAogICAgICA2MDk1OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQucmlwZW1kMTYwID0KICAgICAgICAgICAgdC5rZWNjYWsyNTYgPQogICAgICAgICAgICB0LnJhbmRvbUJ5dGVzID0KICAgICAgICAgICAgdC5jb21wdXRlSG1hYyA9CiAgICAgICAgICAgIHQuVW5kZWNvZGVkRXZlbnRMb2cgPQogICAgICAgICAgICB0LkV2ZW50TG9nID0KICAgICAgICAgICAgdC5Db250cmFjdFVua25vd25FdmVudFBheWxvYWQgPQogICAgICAgICAgICB0LkNvbnRyYWN0VHJhbnNhY3Rpb25SZXNwb25zZSA9CiAgICAgICAgICAgIHQuQ29udHJhY3RUcmFuc2FjdGlvblJlY2VpcHQgPQogICAgICAgICAgICB0LkNvbnRyYWN0RXZlbnRQYXlsb2FkID0KICAgICAgICAgICAgdC5Db250cmFjdEZhY3RvcnkgPQogICAgICAgICAgICB0LkNvbnRyYWN0ID0KICAgICAgICAgICAgdC5CYXNlQ29udHJhY3QgPQogICAgICAgICAgICB0Lk1lc3NhZ2VQcmVmaXggPQogICAgICAgICAgICB0LkV0aGVyU3ltYm9sID0KICAgICAgICAgICAgdC5aZXJvSGFzaCA9CiAgICAgICAgICAgIHQuTiA9CiAgICAgICAgICAgIHQuTWF4SW50MjU2ID0KICAgICAgICAgICAgdC5NaW5JbnQyNTYgPQogICAgICAgICAgICB0Lk1heFVpbnQyNTYgPQogICAgICAgICAgICB0LldlaVBlckV0aGVyID0KICAgICAgICAgICAgdC5aZXJvQWRkcmVzcyA9CiAgICAgICAgICAgIHQucmVzb2x2ZUFkZHJlc3MgPQogICAgICAgICAgICB0LmlzQWRkcmVzcyA9CiAgICAgICAgICAgIHQuaXNBZGRyZXNzYWJsZSA9CiAgICAgICAgICAgIHQuZ2V0Q3JlYXRlMkFkZHJlc3MgPQogICAgICAgICAgICB0LmdldENyZWF0ZUFkZHJlc3MgPQogICAgICAgICAgICB0LmdldEljYXBBZGRyZXNzID0KICAgICAgICAgICAgdC5nZXRBZGRyZXNzID0KICAgICAgICAgICAgdC5UeXBlZCA9CiAgICAgICAgICAgIHQuVHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9CiAgICAgICAgICAgIHQuUmVzdWx0ID0KICAgICAgICAgICAgdC5Mb2dEZXNjcmlwdGlvbiA9CiAgICAgICAgICAgIHQuSW50ZXJmYWNlID0KICAgICAgICAgICAgdC5JbmRleGVkID0KICAgICAgICAgICAgdC5FcnJvckRlc2NyaXB0aW9uID0KICAgICAgICAgICAgdC5jaGVja1Jlc3VsdEVycm9ycyA9CiAgICAgICAgICAgIHQuU3RydWN0RnJhZ21lbnQgPQogICAgICAgICAgICB0LlBhcmFtVHlwZSA9CiAgICAgICAgICAgIHQuTmFtZWRGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRnVuY3Rpb25GcmFnbWVudCA9CiAgICAgICAgICAgIHQuRmFsbGJhY2tGcmFnbWVudCA9CiAgICAgICAgICAgIHQuRnJhZ21lbnQgPQogICAgICAgICAgICB0LkV2ZW50RnJhZ21lbnQgPQogICAgICAgICAgICB0LkVycm9yRnJhZ21lbnQgPQogICAgICAgICAgICB0LkNvbnN0cnVjdG9yRnJhZ21lbnQgPQogICAgICAgICAgICB0LkFiaUNvZGVyID0KICAgICAgICAgICAgdC5lbmNvZGVCeXRlczMyU3RyaW5nID0KICAgICAgICAgICAgdC5kZWNvZGVCeXRlczMyU3RyaW5nID0KICAgICAgICAgICAgdC52ZXJzaW9uID0KICAgICAgICAgICAgICB2b2lkIDApLAogICAgICAgICAgKHQuRXRoZXJzY2FuUGx1Z2luID0KICAgICAgICAgICAgdC5FbnNQbHVnaW4gPQogICAgICAgICAgICB0Lk5ldHdvcmsgPQogICAgICAgICAgICB0LkVuc1Jlc29sdmVyID0KICAgICAgICAgICAgdC5XZWJTb2NrZXRQcm92aWRlciA9CiAgICAgICAgICAgIHQuU29ja2V0UHJvdmlkZXIgPQogICAgICAgICAgICB0LklwY1NvY2tldFByb3ZpZGVyID0KICAgICAgICAgICAgdC5RdWlja05vZGVQcm92aWRlciA9CiAgICAgICAgICAgIHQuUG9ja2V0UHJvdmlkZXIgPQogICAgICAgICAgICB0LkluZnVyYVdlYlNvY2tldFByb3ZpZGVyID0KICAgICAgICAgICAgdC5JbmZ1cmFQcm92aWRlciA9CiAgICAgICAgICAgIHQuRXRoZXJzY2FuUHJvdmlkZXIgPQogICAgICAgICAgICB0LkNsb3VkZmxhcmVQcm92aWRlciA9CiAgICAgICAgICAgIHQuQW5rclByb3ZpZGVyID0KICAgICAgICAgICAgdC5BbGNoZW15UHJvdmlkZXIgPQogICAgICAgICAgICB0LkJyb3dzZXJQcm92aWRlciA9CiAgICAgICAgICAgIHQuSnNvblJwY1NpZ25lciA9CiAgICAgICAgICAgIHQuSnNvblJwY1Byb3ZpZGVyID0KICAgICAgICAgICAgdC5Kc29uUnBjQXBpUHJvdmlkZXIgPQogICAgICAgICAgICB0LkZhbGxiYWNrUHJvdmlkZXIgPQogICAgICAgICAgICB0LkFic3RyYWN0UHJvdmlkZXIgPQogICAgICAgICAgICB0LlZvaWRTaWduZXIgPQogICAgICAgICAgICB0Lk5vbmNlTWFuYWdlciA9CiAgICAgICAgICAgIHQuQWJzdHJhY3RTaWduZXIgPQogICAgICAgICAgICB0LlRyYW5zYWN0aW9uUmVzcG9uc2UgPQogICAgICAgICAgICB0LlRyYW5zYWN0aW9uUmVjZWlwdCA9CiAgICAgICAgICAgIHQuTG9nID0KICAgICAgICAgICAgdC5GZWVEYXRhID0KICAgICAgICAgICAgdC5CbG9jayA9CiAgICAgICAgICAgIHQuZ2V0RGVmYXVsdFByb3ZpZGVyID0KICAgICAgICAgICAgdC52ZXJpZnlUeXBlZERhdGEgPQogICAgICAgICAgICB0LlR5cGVkRGF0YUVuY29kZXIgPQogICAgICAgICAgICB0LnNvbGlkaXR5UGFja2VkU2hhMjU2ID0KICAgICAgICAgICAgdC5zb2xpZGl0eVBhY2tlZEtlY2NhazI1NiA9CiAgICAgICAgICAgIHQuc29saWRpdHlQYWNrZWQgPQogICAgICAgICAgICB0LnZlcmlmeU1lc3NhZ2UgPQogICAgICAgICAgICB0Lmhhc2hNZXNzYWdlID0KICAgICAgICAgICAgdC5kbnNFbmNvZGUgPQogICAgICAgICAgICB0Lm5hbWVoYXNoID0KICAgICAgICAgICAgdC5pc1ZhbGlkTmFtZSA9CiAgICAgICAgICAgIHQuZW5zTm9ybWFsaXplID0KICAgICAgICAgICAgdC5pZCA9CiAgICAgICAgICAgIHQuU2lnbmluZ0tleSA9CiAgICAgICAgICAgIHQuU2lnbmF0dXJlID0KICAgICAgICAgICAgdC5sb2NrID0KICAgICAgICAgICAgdC5zY3J5cHRTeW5jID0KICAgICAgICAgICAgdC5zY3J5cHQgPQogICAgICAgICAgICB0LnBia2RmMiA9CiAgICAgICAgICAgIHQuc2hhNTEyID0KICAgICAgICAgICAgdC5zaGEyNTYgPQogICAgICAgICAgICAgIHZvaWQgMCksCiAgICAgICAgICAodC50b0JlQXJyYXkgPQogICAgICAgICAgICB0LmdldFVpbnQgPQogICAgICAgICAgICB0LmdldE51bWJlciA9CiAgICAgICAgICAgIHQuZ2V0QmlnSW50ID0KICAgICAgICAgICAgdC5GaXhlZE51bWJlciA9CiAgICAgICAgICAgIHQuRmV0Y2hDYW5jZWxTaWduYWwgPQogICAgICAgICAgICB0LkZldGNoUmVzcG9uc2UgPQogICAgICAgICAgICB0LkZldGNoUmVxdWVzdCA9CiAgICAgICAgICAgIHQuRXZlbnRQYXlsb2FkID0KICAgICAgICAgICAgdC5pc0Vycm9yID0KICAgICAgICAgICAgdC5pc0NhbGxFeGNlcHRpb24gPQogICAgICAgICAgICB0Lm1ha2VFcnJvciA9CiAgICAgICAgICAgIHQuYXNzZXJ0UHJpdmF0ZSA9CiAgICAgICAgICAgIHQuYXNzZXJ0Tm9ybWFsaXplID0KICAgICAgICAgICAgdC5hc3NlcnRBcmd1bWVudENvdW50ID0KICAgICAgICAgICAgdC5hc3NlcnRBcmd1bWVudCA9CiAgICAgICAgICAgIHQuYXNzZXJ0ID0KICAgICAgICAgICAgdC5yZXNvbHZlUHJvcGVydGllcyA9CiAgICAgICAgICAgIHQuZGVmaW5lUHJvcGVydGllcyA9CiAgICAgICAgICAgIHQuemVyb1BhZFZhbHVlID0KICAgICAgICAgICAgdC56ZXJvUGFkQnl0ZXMgPQogICAgICAgICAgICB0LnN0cmlwWmVyb3NMZWZ0ID0KICAgICAgICAgICAgdC5pc0J5dGVzTGlrZSA9CiAgICAgICAgICAgIHQuaXNIZXhTdHJpbmcgPQogICAgICAgICAgICB0LmhleGxpZnkgPQogICAgICAgICAgICB0LmdldEJ5dGVzQ29weSA9CiAgICAgICAgICAgIHQuZ2V0Qnl0ZXMgPQogICAgICAgICAgICB0LmRhdGFTbGljZSA9CiAgICAgICAgICAgIHQuZGF0YUxlbmd0aCA9CiAgICAgICAgICAgIHQuY29uY2F0ID0KICAgICAgICAgICAgdC5lbmNvZGVCYXNlNjQgPQogICAgICAgICAgICB0LmRlY29kZUJhc2U2NCA9CiAgICAgICAgICAgIHQuZW5jb2RlQmFzZTU4ID0KICAgICAgICAgICAgdC5kZWNvZGVCYXNlNTggPQogICAgICAgICAgICB0LlRyYW5zYWN0aW9uID0KICAgICAgICAgICAgdC5yZWNvdmVyQWRkcmVzcyA9CiAgICAgICAgICAgIHQuY29tcHV0ZUFkZHJlc3MgPQogICAgICAgICAgICB0LmFjY2Vzc0xpc3RpZnkgPQogICAgICAgICAgICB0LnNob3dUaHJvdHRsZU1lc3NhZ2UgPQogICAgICAgICAgICB0LmNvcHlSZXF1ZXN0ID0KICAgICAgICAgICAgdC5Vbm1hbmFnZWRTdWJzY3JpYmVyID0KICAgICAgICAgICAgdC5Tb2NrZXRTdWJzY3JpYmVyID0KICAgICAgICAgICAgdC5Tb2NrZXRQZW5kaW5nU3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuU29ja2V0RXZlbnRTdWJzY3JpYmVyID0KICAgICAgICAgICAgdC5Tb2NrZXRCbG9ja1N1YnNjcmliZXIgPQogICAgICAgICAgICB0Lk11bHRpY29pblByb3ZpZGVyUGx1Z2luID0KICAgICAgICAgICAgdC5OZXR3b3JrUGx1Z2luID0KICAgICAgICAgICAgdC5HYXNDb3N0UGx1Z2luID0KICAgICAgICAgICAgdC5GZXRjaFVybEZlZURhdGFOZXR3b3JrUGx1Z2luID0KICAgICAgICAgICAgdC5GZWVEYXRhTmV0d29ya1BsdWdpbiA9CiAgICAgICAgICAgICAgdm9pZCAwKSwKICAgICAgICAgICh0LndvcmRsaXN0cyA9CiAgICAgICAgICAgIHQuV29yZGxpc3RPd2xBID0KICAgICAgICAgICAgdC5Xb3JkbGlzdE93bCA9CiAgICAgICAgICAgIHQuTGFuZ0VuID0KICAgICAgICAgICAgdC5Xb3JkbGlzdCA9CiAgICAgICAgICAgIHQuZW5jcnlwdEtleXN0b3JlSnNvblN5bmMgPQogICAgICAgICAgICB0LmVuY3J5cHRLZXlzdG9yZUpzb24gPQogICAgICAgICAgICB0LmRlY3J5cHRLZXlzdG9yZUpzb24gPQogICAgICAgICAgICB0LmRlY3J5cHRLZXlzdG9yZUpzb25TeW5jID0KICAgICAgICAgICAgdC5kZWNyeXB0Q3Jvd2RzYWxlSnNvbiA9CiAgICAgICAgICAgIHQuaXNLZXlzdG9yZUpzb24gPQogICAgICAgICAgICB0LmlzQ3Jvd2RzYWxlSnNvbiA9CiAgICAgICAgICAgIHQuZ2V0SW5kZXhlZEFjY291bnRQYXRoID0KICAgICAgICAgICAgdC5nZXRBY2NvdW50UGF0aCA9CiAgICAgICAgICAgIHQuZGVmYXVsdFBhdGggPQogICAgICAgICAgICB0LldhbGxldCA9CiAgICAgICAgICAgIHQuSEROb2RlVm9pZFdhbGxldCA9CiAgICAgICAgICAgIHQuSEROb2RlV2FsbGV0ID0KICAgICAgICAgICAgdC5CYXNlV2FsbGV0ID0KICAgICAgICAgICAgdC5NbmVtb25pYyA9CiAgICAgICAgICAgIHQudXVpZFY0ID0KICAgICAgICAgICAgdC5lbmNvZGVSbHAgPQogICAgICAgICAgICB0LmRlY29kZVJscCA9CiAgICAgICAgICAgIHQuVXRmOEVycm9yRnVuY3MgPQogICAgICAgICAgICB0LnRvVXRmOFN0cmluZyA9CiAgICAgICAgICAgIHQudG9VdGY4Q29kZVBvaW50cyA9CiAgICAgICAgICAgIHQudG9VdGY4Qnl0ZXMgPQogICAgICAgICAgICB0LnBhcnNlVW5pdHMgPQogICAgICAgICAgICB0LmZvcm1hdFVuaXRzID0KICAgICAgICAgICAgdC5wYXJzZUV0aGVyID0KICAgICAgICAgICAgdC5mb3JtYXRFdGhlciA9CiAgICAgICAgICAgIHQubWFzayA9CiAgICAgICAgICAgIHQudG9Ud29zID0KICAgICAgICAgICAgdC5mcm9tVHdvcyA9CiAgICAgICAgICAgIHQudG9RdWFudGl0eSA9CiAgICAgICAgICAgIHQudG9OdW1iZXIgPQogICAgICAgICAgICB0LnRvQmVIZXggPQogICAgICAgICAgICB0LnRvQmlnSW50ID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIHZhciBuID0gcig3OTM2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3ZlcnNpb24nLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi52ZXJzaW9uOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBzID0gcigyMjc2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RlY29kZUJ5dGVzMzJTdHJpbmcnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcy5kZWNvZGVCeXRlczMyU3RyaW5nOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdlbmNvZGVCeXRlczMyU3RyaW5nJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuZW5jb2RlQnl0ZXMzMlN0cmluZzsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0FiaUNvZGVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuQWJpQ29kZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdDb25zdHJ1Y3RvckZyYWdtZW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuQ29uc3RydWN0b3JGcmFnbWVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Vycm9yRnJhZ21lbnQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5FcnJvckZyYWdtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRXZlbnRGcmFnbWVudCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLkV2ZW50RnJhZ21lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGcmFnbWVudCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLkZyYWdtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRmFsbGJhY2tGcmFnbWVudCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLkZhbGxiYWNrRnJhZ21lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGdW5jdGlvbkZyYWdtZW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuRnVuY3Rpb25GcmFnbWVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ05hbWVkRnJhZ21lbnQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5OYW1lZEZyYWdtZW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnUGFyYW1UeXBlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuUGFyYW1UeXBlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnU3RydWN0RnJhZ21lbnQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5TdHJ1Y3RGcmFnbWVudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2NoZWNrUmVzdWx0RXJyb3JzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuY2hlY2tSZXN1bHRFcnJvcnM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFcnJvckRlc2NyaXB0aW9uJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuRXJyb3JEZXNjcmlwdGlvbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0luZGV4ZWQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5JbmRleGVkOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnSW50ZXJmYWNlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuSW50ZXJmYWNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnTG9nRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5Mb2dEZXNjcmlwdGlvbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1Jlc3VsdCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLlJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1RyYW5zYWN0aW9uRGVzY3JpcHRpb24nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5UcmFuc2FjdGlvbkRlc2NyaXB0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVHlwZWQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5UeXBlZDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIG8gPSByKDM2ODApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0QWRkcmVzcycsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvLmdldEFkZHJlc3M7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2dldEljYXBBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uZ2V0SWNhcEFkZHJlc3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdnZXRDcmVhdGVBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uZ2V0Q3JlYXRlQWRkcmVzczsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2dldENyZWF0ZTJBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uZ2V0Q3JlYXRlMkFkZHJlc3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdpc0FkZHJlc3NhYmxlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uaXNBZGRyZXNzYWJsZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2lzQWRkcmVzcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLmlzQWRkcmVzczsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3Jlc29sdmVBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8ucmVzb2x2ZUFkZHJlc3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBpID0gcig1NTE2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1plcm9BZGRyZXNzJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuWmVyb0FkZHJlc3M7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1dlaVBlckV0aGVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuV2VpUGVyRXRoZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdNYXhVaW50MjU2JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuTWF4VWludDI1NjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ01pbkludDI1NicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBpLk1pbkludDI1NjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ01heEludDI1NicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBpLk1heEludDI1NjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ04nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5OOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnWmVyb0hhc2gnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5aZXJvSGFzaDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0V0aGVyU3ltYm9sJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuRXRoZXJTeW1ib2w7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdNZXNzYWdlUHJlZml4JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuTWVzc2FnZVByZWZpeDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGEgPSByKDk1MjApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnQmFzZUNvbnRyYWN0JywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGEuQmFzZUNvbnRyYWN0OwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdDb250cmFjdCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBhLkNvbnRyYWN0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnQ29udHJhY3RGYWN0b3J5JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEuQ29udHJhY3RGYWN0b3J5OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnQ29udHJhY3RFdmVudFBheWxvYWQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYS5Db250cmFjdEV2ZW50UGF5bG9hZDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0NvbnRyYWN0VHJhbnNhY3Rpb25SZWNlaXB0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEuQ29udHJhY3RUcmFuc2FjdGlvblJlY2VpcHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdDb250cmFjdFRyYW5zYWN0aW9uUmVzcG9uc2UnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYS5Db250cmFjdFRyYW5zYWN0aW9uUmVzcG9uc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdDb250cmFjdFVua25vd25FdmVudFBheWxvYWQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYS5Db250cmFjdFVua25vd25FdmVudFBheWxvYWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFdmVudExvZycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBhLkV2ZW50TG9nOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVW5kZWNvZGVkRXZlbnRMb2cnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYS5VbmRlY29kZWRFdmVudExvZzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGMgPSByKDk4NzIpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnY29tcHV0ZUhtYWMnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYy5jb21wdXRlSG1hYzsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncmFuZG9tQnl0ZXMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYy5yYW5kb21CeXRlczsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2tlY2NhazI1NicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjLmtlY2NhazI1NjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3JpcGVtZDE2MCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjLnJpcGVtZDE2MDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3NoYTI1NicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjLnNoYTI1NjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3NoYTUxMicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjLnNoYTUxMjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3Bia2RmMicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjLnBia2RmMjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3NjcnlwdCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjLnNjcnlwdDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3NjcnlwdFN5bmMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYy5zY3J5cHRTeW5jOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnbG9jaycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBjLmxvY2s7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdTaWduYXR1cmUnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gYy5TaWduYXR1cmU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdTaWduaW5nS2V5JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGMuU2lnbmluZ0tleTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIHUgPSByKDY4OTYpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaWQnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gdS5pZDsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZW5zTm9ybWFsaXplJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHUuZW5zTm9ybWFsaXplOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaXNWYWxpZE5hbWUnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gdS5pc1ZhbGlkTmFtZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ25hbWVoYXNoJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHUubmFtZWhhc2g7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkbnNFbmNvZGUnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gdS5kbnNFbmNvZGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdoYXNoTWVzc2FnZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB1Lmhhc2hNZXNzYWdlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndmVyaWZ5TWVzc2FnZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB1LnZlcmlmeU1lc3NhZ2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdzb2xpZGl0eVBhY2tlZCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB1LnNvbGlkaXR5UGFja2VkOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnc29saWRpdHlQYWNrZWRLZWNjYWsyNTYnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gdS5zb2xpZGl0eVBhY2tlZEtlY2NhazI1NjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3NvbGlkaXR5UGFja2VkU2hhMjU2JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHUuc29saWRpdHlQYWNrZWRTaGEyNTY7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdUeXBlZERhdGFFbmNvZGVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHUuVHlwZWREYXRhRW5jb2RlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3ZlcmlmeVR5cGVkRGF0YScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB1LnZlcmlmeVR5cGVkRGF0YTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGwgPSByKDM2NDQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0RGVmYXVsdFByb3ZpZGVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGwuZ2V0RGVmYXVsdFByb3ZpZGVyOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdCbG9jaycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkJsb2NrOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRmVlRGF0YScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkZlZURhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdMb2cnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5Mb2c7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdUcmFuc2FjdGlvblJlY2VpcHQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5UcmFuc2FjdGlvblJlY2VpcHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdUcmFuc2FjdGlvblJlc3BvbnNlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuVHJhbnNhY3Rpb25SZXNwb25zZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Fic3RyYWN0U2lnbmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuQWJzdHJhY3RTaWduZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdOb25jZU1hbmFnZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5Ob25jZU1hbmFnZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdWb2lkU2lnbmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuVm9pZFNpZ25lcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Fic3RyYWN0UHJvdmlkZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5BYnN0cmFjdFByb3ZpZGVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRmFsbGJhY2tQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkZhbGxiYWNrUHJvdmlkZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdKc29uUnBjQXBpUHJvdmlkZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5Kc29uUnBjQXBpUHJvdmlkZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdKc29uUnBjUHJvdmlkZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5Kc29uUnBjUHJvdmlkZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdKc29uUnBjU2lnbmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuSnNvblJwY1NpZ25lcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Jyb3dzZXJQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkJyb3dzZXJQcm92aWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0FsY2hlbXlQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkFsY2hlbXlQcm92aWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Fua3JQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkFua3JQcm92aWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Nsb3VkZmxhcmVQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkNsb3VkZmxhcmVQcm92aWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0V0aGVyc2NhblByb3ZpZGVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuRXRoZXJzY2FuUHJvdmlkZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdJbmZ1cmFQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkluZnVyYVByb3ZpZGVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnSW5mdXJhV2ViU29ja2V0UHJvdmlkZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5JbmZ1cmFXZWJTb2NrZXRQcm92aWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1BvY2tldFByb3ZpZGVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuUG9ja2V0UHJvdmlkZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdRdWlja05vZGVQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLlF1aWNrTm9kZVByb3ZpZGVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnSXBjU29ja2V0UHJvdmlkZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5JcGNTb2NrZXRQcm92aWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1NvY2tldFByb3ZpZGVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuU29ja2V0UHJvdmlkZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdXZWJTb2NrZXRQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLldlYlNvY2tldFByb3ZpZGVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRW5zUmVzb2x2ZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5FbnNSZXNvbHZlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ05ldHdvcmsnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5OZXR3b3JrOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRW5zUGx1Z2luJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuRW5zUGx1Z2luOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRXRoZXJzY2FuUGx1Z2luJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuRXRoZXJzY2FuUGx1Z2luOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRmVlRGF0YU5ldHdvcmtQbHVnaW4nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5GZWVEYXRhTmV0d29ya1BsdWdpbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0ZldGNoVXJsRmVlRGF0YU5ldHdvcmtQbHVnaW4nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5GZXRjaFVybEZlZURhdGFOZXR3b3JrUGx1Z2luOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnR2FzQ29zdFBsdWdpbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkdhc0Nvc3RQbHVnaW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdOZXR3b3JrUGx1Z2luJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuTmV0d29ya1BsdWdpbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ011bHRpY29pblByb3ZpZGVyUGx1Z2luJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuTXVsdGljb2luUHJvdmlkZXJQbHVnaW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdTb2NrZXRCbG9ja1N1YnNjcmliZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5Tb2NrZXRCbG9ja1N1YnNjcmliZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdTb2NrZXRFdmVudFN1YnNjcmliZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5Tb2NrZXRFdmVudFN1YnNjcmliZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdTb2NrZXRQZW5kaW5nU3Vic2NyaWJlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLlNvY2tldFBlbmRpbmdTdWJzY3JpYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnU29ja2V0U3Vic2NyaWJlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLlNvY2tldFN1YnNjcmliZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdVbm1hbmFnZWRTdWJzY3JpYmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuVW5tYW5hZ2VkU3Vic2NyaWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2NvcHlSZXF1ZXN0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuY29weVJlcXVlc3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdzaG93VGhyb3R0bGVNZXNzYWdlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuc2hvd1Rocm90dGxlTWVzc2FnZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGQgPSByKDExMjQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnYWNjZXNzTGlzdGlmeScsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBkLmFjY2Vzc0xpc3RpZnk7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2NvbXB1dGVBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQuY29tcHV0ZUFkZHJlc3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdyZWNvdmVyQWRkcmVzcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBkLnJlY292ZXJBZGRyZXNzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVHJhbnNhY3Rpb24nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5UcmFuc2FjdGlvbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGYgPSByKDUzMTYpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZGVjb2RlQmFzZTU4JywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGYuZGVjb2RlQmFzZTU4OwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdlbmNvZGVCYXNlNTgnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5lbmNvZGVCYXNlNTg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkZWNvZGVCYXNlNjQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5kZWNvZGVCYXNlNjQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdlbmNvZGVCYXNlNjQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5lbmNvZGVCYXNlNjQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdjb25jYXQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5jb25jYXQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkYXRhTGVuZ3RoJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuZGF0YUxlbmd0aDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RhdGFTbGljZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmRhdGFTbGljZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2dldEJ5dGVzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuZ2V0Qnl0ZXM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdnZXRCeXRlc0NvcHknLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5nZXRCeXRlc0NvcHk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdoZXhsaWZ5JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuaGV4bGlmeTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2lzSGV4U3RyaW5nJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuaXNIZXhTdHJpbmc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdpc0J5dGVzTGlrZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmlzQnl0ZXNMaWtlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnc3RyaXBaZXJvc0xlZnQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5zdHJpcFplcm9zTGVmdDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3plcm9QYWRCeXRlcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnplcm9QYWRCeXRlczsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3plcm9QYWRWYWx1ZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnplcm9QYWRWYWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RlZmluZVByb3BlcnRpZXMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5kZWZpbmVQcm9wZXJ0aWVzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncmVzb2x2ZVByb3BlcnRpZXMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5yZXNvbHZlUHJvcGVydGllczsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Fzc2VydCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmFzc2VydDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Fzc2VydEFyZ3VtZW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuYXNzZXJ0QXJndW1lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdhc3NlcnRBcmd1bWVudENvdW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuYXNzZXJ0QXJndW1lbnRDb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Fzc2VydE5vcm1hbGl6ZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmFzc2VydE5vcm1hbGl6ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Fzc2VydFByaXZhdGUnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5hc3NlcnRQcml2YXRlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnbWFrZUVycm9yJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYubWFrZUVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaXNDYWxsRXhjZXB0aW9uJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuaXNDYWxsRXhjZXB0aW9uOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaXNFcnJvcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmlzRXJyb3I7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFdmVudFBheWxvYWQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5FdmVudFBheWxvYWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGZXRjaFJlcXVlc3QnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi5GZXRjaFJlcXVlc3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGZXRjaFJlc3BvbnNlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuRmV0Y2hSZXNwb25zZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0ZldGNoQ2FuY2VsU2lnbmFsJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuRmV0Y2hDYW5jZWxTaWduYWw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGaXhlZE51bWJlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLkZpeGVkTnVtYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0QmlnSW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuZ2V0QmlnSW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0TnVtYmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuZ2V0TnVtYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0VWludCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmdldFVpbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b0JlQXJyYXknLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi50b0JlQXJyYXk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b0JpZ0ludCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnRvQmlnSW50OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndG9CZUhleCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnRvQmVIZXg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b051bWJlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnRvTnVtYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndG9RdWFudGl0eScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnRvUXVhbnRpdHk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdmcm9tVHdvcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmZyb21Ud29zOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndG9Ud29zJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYudG9Ud29zOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnbWFzaycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLm1hc2s7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdmb3JtYXRFdGhlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmZvcm1hdEV0aGVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncGFyc2VFdGhlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnBhcnNlRXRoZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdmb3JtYXRVbml0cycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLmZvcm1hdFVuaXRzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncGFyc2VVbml0cycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnBhcnNlVW5pdHM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b1V0ZjhCeXRlcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnRvVXRmOEJ5dGVzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndG9VdGY4Q29kZVBvaW50cycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLnRvVXRmOENvZGVQb2ludHM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b1V0ZjhTdHJpbmcnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZi50b1V0ZjhTdHJpbmc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdVdGY4RXJyb3JGdW5jcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBmLlV0ZjhFcnJvckZ1bmNzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZGVjb2RlUmxwJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuZGVjb2RlUmxwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZW5jb2RlUmxwJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYuZW5jb2RlUmxwOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndXVpZFY0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGYudXVpZFY0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgaCA9IHIoODE2MCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdNbmVtb25pYycsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBoLk1uZW1vbmljOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdCYXNlV2FsbGV0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGguQmFzZVdhbGxldDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0hETm9kZVdhbGxldCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBoLkhETm9kZVdhbGxldDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0hETm9kZVZvaWRXYWxsZXQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5IRE5vZGVWb2lkV2FsbGV0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnV2FsbGV0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGguV2FsbGV0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZGVmYXVsdFBhdGgnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5kZWZhdWx0UGF0aDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2dldEFjY291bnRQYXRoJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGguZ2V0QWNjb3VudFBhdGg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdnZXRJbmRleGVkQWNjb3VudFBhdGgnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5nZXRJbmRleGVkQWNjb3VudFBhdGg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdpc0Nyb3dkc2FsZUpzb24nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5pc0Nyb3dkc2FsZUpzb247CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdpc0tleXN0b3JlSnNvbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBoLmlzS2V5c3RvcmVKc29uOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZGVjcnlwdENyb3dkc2FsZUpzb24nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5kZWNyeXB0Q3Jvd2RzYWxlSnNvbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RlY3J5cHRLZXlzdG9yZUpzb25TeW5jJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGguZGVjcnlwdEtleXN0b3JlSnNvblN5bmM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkZWNyeXB0S2V5c3RvcmVKc29uJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGguZGVjcnlwdEtleXN0b3JlSnNvbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2VuY3J5cHRLZXlzdG9yZUpzb24nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5lbmNyeXB0S2V5c3RvcmVKc29uOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZW5jcnlwdEtleXN0b3JlSnNvblN5bmMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5lbmNyeXB0S2V5c3RvcmVKc29uU3luYzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGcgPSByKDY0OTIpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnV29yZGxpc3QnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZy5Xb3JkbGlzdDsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnTGFuZ0VuJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGcuTGFuZ0VuOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnV29yZGxpc3RPd2wnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZy5Xb3JkbGlzdE93bDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1dvcmRsaXN0T3dsQScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBnLldvcmRsaXN0T3dsQTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3dvcmRsaXN0cycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBnLndvcmRsaXN0czsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDY2MzY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LmlkID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig5ODcyKSwKICAgICAgICAgIHMgPSByKDUzMTYpOwogICAgICAgIHQuaWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICgwLCBuLmtlY2NhazI1NikoKDAsIHMudG9VdGY4Qnl0ZXMpKGUpKTsKICAgICAgICB9OwogICAgICB9LAogICAgICA2ODk2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQudmVyaWZ5VHlwZWREYXRhID0KICAgICAgICAgICAgdC5UeXBlZERhdGFFbmNvZGVyID0KICAgICAgICAgICAgdC5zb2xpZGl0eVBhY2tlZFNoYTI1NiA9CiAgICAgICAgICAgIHQuc29saWRpdHlQYWNrZWRLZWNjYWsyNTYgPQogICAgICAgICAgICB0LnNvbGlkaXR5UGFja2VkID0KICAgICAgICAgICAgdC52ZXJpZnlNZXNzYWdlID0KICAgICAgICAgICAgdC5oYXNoTWVzc2FnZSA9CiAgICAgICAgICAgIHQuZG5zRW5jb2RlID0KICAgICAgICAgICAgdC5uYW1laGFzaCA9CiAgICAgICAgICAgIHQuaXNWYWxpZE5hbWUgPQogICAgICAgICAgICB0LmVuc05vcm1hbGl6ZSA9CiAgICAgICAgICAgIHQuaWQgPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgdmFyIG4gPSByKDY2MzYpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaWQnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi5pZDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgcyA9IHIoNTY4KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Vuc05vcm1hbGl6ZScsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBzLmVuc05vcm1hbGl6ZTsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaXNWYWxpZE5hbWUnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5pc1ZhbGlkTmFtZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ25hbWVoYXNoJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMubmFtZWhhc2g7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkbnNFbmNvZGUnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5kbnNFbmNvZGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBvID0gcigzMTM2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2hhc2hNZXNzYWdlJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG8uaGFzaE1lc3NhZ2U7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3ZlcmlmeU1lc3NhZ2UnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby52ZXJpZnlNZXNzYWdlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgaSA9IHIoNzk2NCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdzb2xpZGl0eVBhY2tlZCcsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBpLnNvbGlkaXR5UGFja2VkOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdzb2xpZGl0eVBhY2tlZEtlY2NhazI1NicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBpLnNvbGlkaXR5UGFja2VkS2VjY2FrMjU2OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnc29saWRpdHlQYWNrZWRTaGEyNTYnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5zb2xpZGl0eVBhY2tlZFNoYTI1NjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGEgPSByKDIzNDgpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVHlwZWREYXRhRW5jb2RlcicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBhLlR5cGVkRGF0YUVuY29kZXI7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3ZlcmlmeVR5cGVkRGF0YScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBhLnZlcmlmeVR5cGVkRGF0YTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDMxMzY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LnZlcmlmeU1lc3NhZ2UgPSB0Lmhhc2hNZXNzYWdlID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig5ODcyKSwKICAgICAgICAgIHMgPSByKDU1MTYpLAogICAgICAgICAgbyA9IHIoMTEyNCksCiAgICAgICAgICBpID0gcig1MzE2KTsKICAgICAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICdzdHJpbmcnID09IHR5cGVvZiBlICYmIChlID0gKDAsIGkudG9VdGY4Qnl0ZXMpKGUpKSwKICAgICAgICAgICAgKDAsIG4ua2VjY2FrMjU2KSgKICAgICAgICAgICAgICAoMCwgaS5jb25jYXQpKFsoMCwgaS50b1V0ZjhCeXRlcykocy5NZXNzYWdlUHJlZml4KSwgKDAsIGkudG9VdGY4Qnl0ZXMpKFN0cmluZyhlLmxlbmd0aCkpLCBlXSkKICAgICAgICAgICAgKQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgKHQuaGFzaE1lc3NhZ2UgPSBhKSwKICAgICAgICAgICh0LnZlcmlmeU1lc3NhZ2UgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gYShlKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBvLnJlY292ZXJBZGRyZXNzKShyLCB0KTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA1Njg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5kbnNFbmNvZGUgPSB0Lm5hbWVoYXNoID0gdC5pc1ZhbGlkTmFtZSA9IHQuZW5zTm9ybWFsaXplID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig5ODcyKSwKICAgICAgICAgIHMgPSByKDUzMTYpLAogICAgICAgICAgbyA9IHIoNDc1NiksCiAgICAgICAgICBpID0gbmV3IFVpbnQ4QXJyYXkoMzIpOwogICAgICAgIGZ1bmN0aW9uIGEoZSkgewogICAgICAgICAgcmV0dXJuICgwLCBzLmFzc2VydEFyZ3VtZW50KSgwICE9PSBlLmxlbmd0aCwgJ2ludmFsaWQgRU5TIG5hbWU7IGVtcHR5IGNvbXBvbmVudCcsICdjb21wJywgZSksIGU7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICAgICAgY29uc3QgdCA9ICgwLCBzLnRvVXRmOEJ5dGVzKSh1KGUpKSwKICAgICAgICAgICAgciA9IFtdOwogICAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm4gcjsKICAgICAgICAgIGxldCBuID0gMDsKICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7IGUrKykgNDYgPT09IHRbZV0gJiYgKHIucHVzaChhKHQuc2xpY2UobiwgZSkpKSwgKG4gPSBlICsgMSkpOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKG4gPCB0Lmxlbmd0aCwgJ2ludmFsaWQgRU5TIG5hbWU7IGVtcHR5IGNvbXBvbmVudCcsICduYW1lJywgZSksCiAgICAgICAgICAgIHIucHVzaChhKHQuc2xpY2UobikpKSwKICAgICAgICAgICAgcgogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdShlKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignZW1wdHkgbGFiZWwnKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBvLmVuc19ub3JtYWxpemUpKGUpOwogICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoITEsIGBpbnZhbGlkIEVOUyBuYW1lICgke3QubWVzc2FnZX0pYCwgJ25hbWUnLCBlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaS5maWxsKDApLAogICAgICAgICAgKHQuZW5zTm9ybWFsaXplID0gdSksCiAgICAgICAgICAodC5pc1ZhbGlkTmFtZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIDAgIT09IGMoZSkubGVuZ3RoOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0Lm5hbWVoYXNoID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKCdzdHJpbmcnID09IHR5cGVvZiBlLCAnaW52YWxpZCBFTlMgbmFtZTsgbm90IGEgc3RyaW5nJywgJ25hbWUnLCBlKSwKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoZS5sZW5ndGgsICdpbnZhbGlkIEVOUyBuYW1lIChlbXB0eSBsYWJlbCknLCAnbmFtZScsIGUpOwogICAgICAgICAgICBsZXQgdCA9IGk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBjKGUpOwogICAgICAgICAgICBmb3IgKDsgci5sZW5ndGg7ICkgdCA9ICgwLCBuLmtlY2NhazI1NikoKDAsIHMuY29uY2F0KShbdCwgKDAsIG4ua2VjY2FrMjU2KShyLnBvcCgpKV0pKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBzLmhleGxpZnkpKHQpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5kbnNFbmNvZGUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBzLmhleGxpZnkpKAogICAgICAgICAgICAgICAgKDAsIHMuY29uY2F0KSgKICAgICAgICAgICAgICAgICAgYyhlKS5tYXAoKGUpID0-IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZS5sZW5ndGggPiA2MykgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIEROUyBlbmNvZGVkIGVudHJ5OyBsZW5ndGggZXhjZWVkcyA2MyBieXRlcycpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgVWludDhBcnJheShlLmxlbmd0aCArIDEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnNldChlLCAxKSwgKHRbMF0gPSB0Lmxlbmd0aCAtIDEpLCB0OwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICkgKyAnMDAnCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNzk2NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LnNvbGlkaXR5UGFja2VkU2hhMjU2ID0gdC5zb2xpZGl0eVBhY2tlZEtlY2NhazI1NiA9IHQuc29saWRpdHlQYWNrZWQgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDM2ODApLAogICAgICAgICAgcyA9IHIoOTg3MiksCiAgICAgICAgICBvID0gcig1MzE2KSwKICAgICAgICAgIGkgPSBuZXcgUmVnRXhwKCdeYnl0ZXMoWzAtOV0rKSQnKSwKICAgICAgICAgIGEgPSBuZXcgUmVnRXhwKCdeKHU_aW50KShbMC05XSopJCcpLAogICAgICAgICAgYyA9IG5ldyBSZWdFeHAoJ14oLiopXFxbKFswLTldKilcXF0kJyk7CiAgICAgICAgZnVuY3Rpb24gdShlLCB0LCByKSB7CiAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgY2FzZSAnYWRkcmVzcyc6CiAgICAgICAgICAgICAgcmV0dXJuIHIgPyAoMCwgby5nZXRCeXRlcykoKDAsIG8uemVyb1BhZFZhbHVlKSh0LCAzMikpIDogKDAsIG8uZ2V0Qnl0ZXMpKCgwLCBuLmdldEFkZHJlc3MpKHQpKTsKICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICByZXR1cm4gKDAsIG8udG9VdGY4Qnl0ZXMpKHQpOwogICAgICAgICAgICBjYXNlICdieXRlcyc6CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBvLmdldEJ5dGVzKSh0KTsKICAgICAgICAgICAgY2FzZSAnYm9vbCc6CiAgICAgICAgICAgICAgcmV0dXJuICh0ID0gdCA_ICcweDAxJyA6ICcweDAwJyksIHIgPyAoMCwgby5nZXRCeXRlcykoKDAsIG8uemVyb1BhZFZhbHVlKSh0LCAzMikpIDogKDAsIG8uZ2V0Qnl0ZXMpKHQpOwogICAgICAgICAgfQogICAgICAgICAgbGV0IHMgPSBlLm1hdGNoKGEpOwogICAgICAgICAgaWYgKHMpIHsKICAgICAgICAgICAgbGV0IG4gPSAnaW50JyA9PT0gc1sxXSwKICAgICAgICAgICAgICBpID0gcGFyc2VJbnQoc1syXSB8fCAnMjU2Jyk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgKCFzWzJdIHx8IHNbMl0gPT09IFN0cmluZyhpKSkgJiYgaSAlIDggPT0gMCAmJiAwICE9PSBpICYmIGkgPD0gMjU2LAogICAgICAgICAgICAgICAgJ2ludmFsaWQgbnVtYmVyIHR5cGUnLAogICAgICAgICAgICAgICAgJ3R5cGUnLAogICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgciAmJiAoaSA9IDI1NiksCiAgICAgICAgICAgICAgbiAmJiAodCA9ICgwLCBvLnRvVHdvcykodCwgaSkpLAogICAgICAgICAgICAgICgwLCBvLmdldEJ5dGVzKSgoMCwgby56ZXJvUGFkVmFsdWUpKCgwLCBvLnRvQmVBcnJheSkodCksIGkgLyA4KSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgoKHMgPSBlLm1hdGNoKGkpKSwgcykpIHsKICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KHNbMV0pOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KShTdHJpbmcobikgPT09IHNbMV0gJiYgMCAhPT0gbiAmJiBuIDw9IDMyLCAnaW52YWxpZCBieXRlcyB0eXBlJywgJ3R5cGUnLCBlKSwKICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkoKDAsIG8uZGF0YUxlbmd0aCkodCkgPT09IG4sIGBpbnZhbGlkIHZhbHVlIGZvciAke2V9YCwgJ3ZhbHVlJywgdCksCiAgICAgICAgICAgICAgciA_ICgwLCBvLmdldEJ5dGVzKSgoMCwgby56ZXJvUGFkQnl0ZXMpKHQsIDMyKSkgOiB0CiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoKChzID0gZS5tYXRjaChjKSksIHMgJiYgQXJyYXkuaXNBcnJheSh0KSkpIHsKICAgICAgICAgICAgY29uc3QgciA9IHNbMV0sCiAgICAgICAgICAgICAgbiA9IHBhcnNlSW50KHNbMl0gfHwgU3RyaW5nKHQubGVuZ3RoKSk7CiAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KShuID09PSB0Lmxlbmd0aCwgYGludmFsaWQgYXJyYXkgbGVuZ3RoIGZvciAke2V9YCwgJ3ZhbHVlJywgdCk7CiAgICAgICAgICAgIGNvbnN0IGkgPSBbXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGkucHVzaCh1KHIsIGUsICEwKSk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgKDAsIG8uZ2V0Qnl0ZXMpKCgwLCBvLmNvbmNhdCkoaSkpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIHR5cGUnLCAndHlwZScsIGUpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGUsIHQpIHsKICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgZS5sZW5ndGggPT09IHQubGVuZ3RoLAogICAgICAgICAgICAnd3JvbmcgbnVtYmVyIG9mIHZhbHVlczsgZXhwZWN0ZWQgJHsgdHlwZXMubGVuZ3RoIH0nLAogICAgICAgICAgICAndmFsdWVzJywKICAgICAgICAgICAgdAogICAgICAgICAgKTsKICAgICAgICAgIGNvbnN0IHIgPSBbXTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICAgIHIucHVzaCh1KGUsIHRbbl0pKTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICgwLCBvLmhleGxpZnkpKCgwLCBvLmNvbmNhdCkocikpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICAodC5zb2xpZGl0eVBhY2tlZCA9IGwpLAogICAgICAgICAgKHQuc29saWRpdHlQYWNrZWRLZWNjYWsyNTYgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKDAsIHMua2VjY2FrMjU2KShsKGUsIHQpKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuc29saWRpdHlQYWNrZWRTaGEyNTYgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKDAsIHMuc2hhMjU2KShsKGUsIHQpKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICAyMzQ4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC52ZXJpZnlUeXBlZERhdGEgPSB0LlR5cGVkRGF0YUVuY29kZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDM2ODApLAogICAgICAgICAgcyA9IHIoOTg3MiksCiAgICAgICAgICBvID0gcigxMTI0KSwKICAgICAgICAgIGkgPSByKDUzMTYpLAogICAgICAgICAgYSA9IHIoNjYzNiksCiAgICAgICAgICBjID0gbmV3IFVpbnQ4QXJyYXkoMzIpOwogICAgICAgIGMuZmlsbCgwKTsKICAgICAgICBjb25zdCB1ID0gQmlnSW50KC0xKSwKICAgICAgICAgIGwgPSBCaWdJbnQoMCksCiAgICAgICAgICBkID0gQmlnSW50KDEpLAogICAgICAgICAgZiA9IEJpZ0ludCgnMHhmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmJyksCiAgICAgICAgICBoID0gKDAsIGkudG9CZUhleCkoZCwgMzIpLAogICAgICAgICAgZyA9ICgwLCBpLnRvQmVIZXgpKGwsIDMyKSwKICAgICAgICAgIHAgPSB7IG5hbWU6ICdzdHJpbmcnLCB2ZXJzaW9uOiAnc3RyaW5nJywgY2hhaW5JZDogJ3VpbnQyNTYnLCB2ZXJpZnlpbmdDb250cmFjdDogJ2FkZHJlc3MnLCBzYWx0OiAnYnl0ZXMzMicgfSwKICAgICAgICAgIG0gPSBbJ25hbWUnLCAndmVyc2lvbicsICdjaGFpbklkJywgJ3ZlcmlmeWluZ0NvbnRyYWN0JywgJ3NhbHQnXTsKICAgICAgICBmdW5jdGlvbiBiKGUpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgICdzdHJpbmcnID09IHR5cGVvZiB0LAogICAgICAgICAgICAgICAgYGludmFsaWQgZG9tYWluIHZhbHVlIGZvciAke0pTT04uc3RyaW5naWZ5KGUpfWAsCiAgICAgICAgICAgICAgICBgZG9tYWluLiR7ZX1gLAogICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgdAogICAgICAgICAgICApOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgY29uc3QgeSA9IHsKICAgICAgICAgIG5hbWU6IGIoJ25hbWUnKSwKICAgICAgICAgIHZlcnNpb246IGIoJ3ZlcnNpb24nKSwKICAgICAgICAgIGNoYWluSWQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgaS5nZXRCaWdJbnQpKGUsICdkb21haW4uY2hhaW5JZCcpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSh0ID49IDAsICdpbnZhbGlkIGNoYWluIElEJywgJ2RvbWFpbi5jaGFpbklkJywgZSksCiAgICAgICAgICAgICAgTnVtYmVyLmlzU2FmZUludGVnZXIodCkgPyBOdW1iZXIodCkgOiAoMCwgaS50b1F1YW50aXR5KSh0KQogICAgICAgICAgICApOwogICAgICAgICAgfSwKICAgICAgICAgIHZlcmlmeWluZ0NvbnRyYWN0OiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJldHVybiAoMCwgbi5nZXRBZGRyZXNzKShlKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIGRvbWFpbiB2YWx1ZSAidmVyaWZ5aW5nQ29udHJhY3QiJywgJ2RvbWFpbi52ZXJpZnlpbmdDb250cmFjdCcsIGUpOwogICAgICAgICAgfSwKICAgICAgICAgIHNhbHQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgaS5nZXRCeXRlcykoZSwgJ2RvbWFpbi5zYWx0Jyk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKDMyID09PSB0Lmxlbmd0aCwgJ2ludmFsaWQgZG9tYWluIHZhbHVlICJzYWx0IicsICdkb21haW4uc2FsdCcsIGUpLCAoMCwgaS5oZXhsaWZ5KSh0KQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZnVuY3Rpb24gQShlKSB7CiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBlLm1hdGNoKC9eKHU_KWludChcZCopJC8pOwogICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSAnJyA9PT0gdFsxXSwKICAgICAgICAgICAgICAgIG4gPSBwYXJzZUludCh0WzJdIHx8ICcyNTYnKTsKICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICBuICUgOCA9PSAwICYmIDAgIT09IG4gJiYgbiA8PSAyNTYgJiYgKG51bGwgPT0gdFsyXSB8fCB0WzJdID09PSBTdHJpbmcobikpLAogICAgICAgICAgICAgICAgJ2ludmFsaWQgbnVtZXJpYyB3aWR0aCcsCiAgICAgICAgICAgICAgICAndHlwZScsCiAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBjb25zdCBzID0gKDAsIGkubWFzaykoZiwgciA_IG4gLSAxIDogbiksCiAgICAgICAgICAgICAgICBvID0gciA_IChzICsgZCkgKiB1IDogbDsKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG4gPSAoMCwgaS5nZXRCaWdJbnQpKHQsICd2YWx1ZScpOwogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKG4gPj0gbyAmJiBuIDw9IHMsIGB2YWx1ZSBvdXQtb2YtYm91bmRzIGZvciAke2V9YCwgJ3ZhbHVlJywgbiksCiAgICAgICAgICAgICAgICAgICgwLCBpLnRvQmVIZXgpKHIgPyAoMCwgaS50b1R3b3MpKG4sIDI1NikgOiBuLCAzMikKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgewogICAgICAgICAgICBjb25zdCB0ID0gZS5tYXRjaCgvXmJ5dGVzKFxkKykkLyk7CiAgICAgICAgICAgIGlmICh0KSB7CiAgICAgICAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KHRbMV0pOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoMCAhPT0gciAmJiByIDw9IDMyICYmIHRbMV0gPT09IFN0cmluZyhyKSwgJ2ludmFsaWQgYnl0ZXMgd2lkdGgnLCAndHlwZScsIGUpLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9ICgwLCBpLmdldEJ5dGVzKSh0KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkobi5sZW5ndGggPT09IHIsIGBpbnZhbGlkIGxlbmd0aCBmb3IgJHtlfWAsICd2YWx1ZScsIHQpLAogICAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBpLmdldEJ5dGVzKShlKSwKICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQubGVuZ3RoICUgMzI7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gciA_ICgwLCBpLmNvbmNhdCkoW3QsIGMuc2xpY2UocildKSA6ICgwLCBpLmhleGxpZnkpKHQpOwogICAgICAgICAgICAgICAgICAgIH0pKHQpCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgIGNhc2UgJ2FkZHJlc3MnOgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBpLnplcm9QYWRWYWx1ZSkoKDAsIG4uZ2V0QWRkcmVzcykoZSksIDMyKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICBjYXNlICdib29sJzoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlID8gaCA6IGc7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgY2FzZSAnYnl0ZXMnOgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBzLmtlY2NhazI1NikoZSk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAoMCwgYS5pZCkoZSk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB2KGUsIHQpIHsKICAgICAgICAgIHJldHVybiBgJHtlfSgke3QubWFwKCh7IG5hbWU6IGUsIHR5cGU6IHQgfSkgPT4gdCArICcgJyArIGUpLmpvaW4oJywnKX0pYDsKICAgICAgICB9CiAgICAgICAgY2xhc3MgRSB7CiAgICAgICAgICBwcmltYXJ5VHlwZTsKICAgICAgICAgICNOOwogICAgICAgICAgZ2V0IHR5cGVzKCkgewogICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLiNOKTsKICAgICAgICAgIH0KICAgICAgICAgICNMOwogICAgICAgICAgI0I7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgICh0aGlzLiNOID0gSlNPTi5zdHJpbmdpZnkoZSkpLCAodGhpcy4jTCA9IG5ldyBNYXAoKSksICh0aGlzLiNCID0gbmV3IE1hcCgpKTsKICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBNYXAoKSwKICAgICAgICAgICAgICByID0gbmV3IE1hcCgpLAogICAgICAgICAgICAgIG4gPSBuZXcgTWFwKCk7CiAgICAgICAgICAgIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGUpID0-IHsKICAgICAgICAgICAgICB0LnNldChlLCBuZXcgU2V0KCkpLCByLnNldChlLCBbXSksIG4uc2V0KGUsIG5ldyBTZXQoKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBmb3IgKGNvbnN0IG4gaW4gZSkgewogICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgU2V0KCk7CiAgICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIGVbbl0pIHsKICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgICAgIXMuaGFzKG8ubmFtZSksCiAgICAgICAgICAgICAgICAgIGBkdXBsaWNhdGUgdmFyaWFibGUgbmFtZSAke0pTT04uc3RyaW5naWZ5KG8ubmFtZSl9IGluICR7SlNPTi5zdHJpbmdpZnkobil9YCwKICAgICAgICAgICAgICAgICAgJ3R5cGVzJywKICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgcy5hZGQoby5uYW1lKTsKICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBvLnR5cGUubWF0Y2goL14oW15ceDViXSopKFx4NWJ8JCkvKVsxXSB8fCBudWxsOwogICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKGEgIT09IG4sIGBjaXJjdWxhciB0eXBlIHJlZmVyZW5jZSB0byAke0pTT04uc3RyaW5naWZ5KGEpfWAsICd0eXBlcycsIGUpLAogICAgICAgICAgICAgICAgICBBKGEpIHx8CiAgICAgICAgICAgICAgICAgICAgKCgwLCBpLmFzc2VydEFyZ3VtZW50KShyLmhhcyhhKSwgYHVua25vd24gdHlwZSAke0pTT04uc3RyaW5naWZ5KGEpfWAsICd0eXBlcycsIGUpLAogICAgICAgICAgICAgICAgICAgIHIuZ2V0KGEpLnB1c2gobiksCiAgICAgICAgICAgICAgICAgICAgdC5nZXQobikuYWRkKGEpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgcyA9IEFycmF5LmZyb20oci5rZXlzKCkpLmZpbHRlcigoZSkgPT4gMCA9PT0gci5nZXQoZSkubGVuZ3RoKTsKICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKDAgIT09IHMubGVuZ3RoLCAnbWlzc2luZyBwcmltYXJ5IHR5cGUnLCAndHlwZXMnLCBlKSwKICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAxID09PSBzLmxlbmd0aCwKICAgICAgICAgICAgICAgIGBhbWJpZ3VvdXMgcHJpbWFyeSB0eXBlcyBvciB1bnVzZWQgdHlwZXM6ICR7cy5tYXAoKGUpID0-IEpTT04uc3RyaW5naWZ5KGUpKS5qb2luKCcsICcpfWAsCiAgICAgICAgICAgICAgICAndHlwZXMnLAogICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKDAsIGkuZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBwcmltYXJ5VHlwZTogc1swXSB9KSwKICAgICAgICAgICAgICAoZnVuY3Rpb24gcyhvLCBhKSB7CiAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoIWEuaGFzKG8pLCBgY2lyY3VsYXIgdHlwZSByZWZlcmVuY2UgdG8gJHtKU09OLnN0cmluZ2lmeShvKX1gLCAndHlwZXMnLCBlKSwKICAgICAgICAgICAgICAgICAgYS5hZGQobyk7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5nZXQobykpCiAgICAgICAgICAgICAgICAgIGlmIChyLmhhcyhlKSkgewogICAgICAgICAgICAgICAgICAgIHMoZSwgYSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGEpIG4uZ2V0KHQpLmFkZChlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYS5kZWxldGUobyk7CiAgICAgICAgICAgICAgfSkodGhpcy5wcmltYXJ5VHlwZSwgbmV3IFNldCgpKTsKICAgICAgICAgICAgZm9yIChjb25zdCBbdCwgcl0gb2YgbikgewogICAgICAgICAgICAgIGNvbnN0IG4gPSBBcnJheS5mcm9tKHIpOwogICAgICAgICAgICAgIG4uc29ydCgpLCB0aGlzLiNMLnNldCh0LCB2KHQsIGVbdF0pICsgbi5tYXAoKHQpID0-IHYodCwgZVt0XSkpLmpvaW4oJycpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZ2V0RW5jb2RlcihlKSB7CiAgICAgICAgICAgIGxldCB0ID0gdGhpcy4jQi5nZXQoZSk7CiAgICAgICAgICAgIHJldHVybiB0IHx8ICgodCA9IHRoaXMuI0MoZSkpLCB0aGlzLiNCLnNldChlLCB0KSksIHQ7CiAgICAgICAgICB9CiAgICAgICAgICAjQyhlKSB7CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gQShlKTsKICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgdCA9IGUubWF0Y2goL14oLiopKFx4NWIoXGQqKVx4NWQpJC8pOwogICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSB0WzFdLAogICAgICAgICAgICAgICAgciA9IHRoaXMuZ2V0RW5jb2RlcihlKTsKICAgICAgICAgICAgICByZXR1cm4gKG4pID0-IHsKICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgICAgIXRbM10gfHwgcGFyc2VJbnQodFszXSkgPT09IG4ubGVuZ3RoLAogICAgICAgICAgICAgICAgICBgYXJyYXkgbGVuZ3RoIG1pc21hdGNoOyBleHBlY3RlZCBsZW5ndGggJHtwYXJzZUludCh0WzNdKX1gLAogICAgICAgICAgICAgICAgICAndmFsdWUnLAogICAgICAgICAgICAgICAgICBuCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgbGV0IG8gPSBuLm1hcChyKTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNMLmhhcyhlKSAmJiAobyA9IG8ubWFwKHMua2VjY2FrMjU2KSksICgwLCBzLmtlY2NhazI1NikoKDAsIGkuY29uY2F0KShvKSk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCByID0gdGhpcy50eXBlc1tlXTsKICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gKDAsIGEuaWQpKHRoaXMuI0wuZ2V0KGUpKTsKICAgICAgICAgICAgICByZXR1cm4gKGUpID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IG4gPSByLm1hcCgoeyBuYW1lOiB0LCB0eXBlOiByIH0pID0-IHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZ2V0RW5jb2RlcihyKShlW3RdKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0wuaGFzKHIpID8gKDAsIHMua2VjY2FrMjU2KShuKSA6IG47CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBuLnVuc2hpZnQodCksICgwLCBpLmNvbmNhdCkobik7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoITEsIGB1bmtub3duIHR5cGU6ICR7ZX1gLCAndHlwZScsIGUpOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlVHlwZShlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLiNMLmdldChlKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBpLmFzc2VydEFyZ3VtZW50KSh0LCBgdW5rbm93biB0eXBlOiAke0pTT04uc3RyaW5naWZ5KGUpfWAsICduYW1lJywgZSksIHQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbmNvZGVEYXRhKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RW5jb2RlcihlKSh0KTsKICAgICAgICAgIH0KICAgICAgICAgIGhhc2hTdHJ1Y3QoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKDAsIHMua2VjY2FrMjU2KSh0aGlzLmVuY29kZURhdGEoZSwgdCkpOwogICAgICAgICAgfQogICAgICAgICAgZW5jb2RlKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlRGF0YSh0aGlzLnByaW1hcnlUeXBlLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGhhc2goZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5oYXNoU3RydWN0KHRoaXMucHJpbWFyeVR5cGUsIGUpOwogICAgICAgICAgfQogICAgICAgICAgX3Zpc2l0KGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKEEoZSkpIHJldHVybiByKGUsIHQpOwogICAgICAgICAgICBjb25zdCBuID0gZS5tYXRjaCgvXiguKikoXHg1YihcZCopXHg1ZCkkLyk7CiAgICAgICAgICAgIGlmIChuKQogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgICFuWzNdIHx8IHBhcnNlSW50KG5bM10pID09PSB0Lmxlbmd0aCwKICAgICAgICAgICAgICAgICAgYGFycmF5IGxlbmd0aCBtaXNtYXRjaDsgZXhwZWN0ZWQgbGVuZ3RoICR7cGFyc2VJbnQoblszXSl9YCwKICAgICAgICAgICAgICAgICAgJ3ZhbHVlJywKICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHQubWFwKChlKSA9PiB0aGlzLl92aXNpdChuWzFdLCBlLCByKSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICBjb25zdCBzID0gdGhpcy50eXBlc1tlXTsKICAgICAgICAgICAgaWYgKHMpIHJldHVybiBzLnJlZHVjZSgoZSwgeyBuYW1lOiBuLCB0eXBlOiBzIH0pID0-ICgoZVtuXSA9IHRoaXMuX3Zpc2l0KHMsIHRbbl0sIHIpKSwgZSksIHt9KTsKICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKCExLCBgdW5rbm93biB0eXBlOiAke2V9YCwgJ3R5cGUnLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIHZpc2l0KGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Zpc2l0KHRoaXMucHJpbWFyeVR5cGUsIGUsIHQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb20oZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IEUoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZ2V0UHJpbWFyeVR5cGUoZSkgewogICAgICAgICAgICByZXR1cm4gRS5mcm9tKGUpLnByaW1hcnlUeXBlOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGhhc2hTdHJ1Y3QoZSwgdCwgcikgewogICAgICAgICAgICByZXR1cm4gRS5mcm9tKHQpLmhhc2hTdHJ1Y3QoZSwgcik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgaGFzaERvbWFpbihlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTsKICAgICAgICAgICAgZm9yIChjb25zdCByIGluIGUpIHsKICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlW3JdKSBjb250aW51ZTsKICAgICAgICAgICAgICBjb25zdCBuID0gcFtyXTsKICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkobiwgYGludmFsaWQgdHlwZWQtZGF0YSBkb21haW4ga2V5OiAke0pTT04uc3RyaW5naWZ5KHIpfWAsICdkb21haW4nLCBlKSwKICAgICAgICAgICAgICAgIHQucHVzaCh7IG5hbWU6IHIsIHR5cGU6IG4gfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0LnNvcnQoKGUsIHQpID0-IG0uaW5kZXhPZihlLm5hbWUpIC0gbS5pbmRleE9mKHQubmFtZSkpLAogICAgICAgICAgICAgIEUuaGFzaFN0cnVjdCgnRUlQNzEyRG9tYWluJywgeyBFSVA3MTJEb21haW46IHQgfSwgZSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBlbmNvZGUoZSwgdCwgcikgewogICAgICAgICAgICByZXR1cm4gKDAsIGkuY29uY2F0KShbJzB4MTkwMScsIEUuaGFzaERvbWFpbihlKSwgRS5mcm9tKHQpLmhhc2gocildKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBoYXNoKGUsIHQsIHIpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBzLmtlY2NhazI1NikoRS5lbmNvZGUoZSwgdCwgcikpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGFzeW5jIHJlc29sdmVOYW1lcyhlLCB0LCByLCBuKSB7CiAgICAgICAgICAgIGUgPSBPYmplY3QuYXNzaWduKHt9LCBlKTsKICAgICAgICAgICAgZm9yIChjb25zdCB0IGluIGUpIG51bGwgPT0gZVt0XSAmJiBkZWxldGUgZVt0XTsKICAgICAgICAgICAgY29uc3QgcyA9IHt9OwogICAgICAgICAgICBlLnZlcmlmeWluZ0NvbnRyYWN0ICYmICEoMCwgaS5pc0hleFN0cmluZykoZS52ZXJpZnlpbmdDb250cmFjdCwgMjApICYmIChzW2UudmVyaWZ5aW5nQ29udHJhY3RdID0gJzB4Jyk7CiAgICAgICAgICAgIGNvbnN0IG8gPSBFLmZyb20odCk7CiAgICAgICAgICAgIG8udmlzaXQociwgKGUsIHQpID0-ICgnYWRkcmVzcycgIT09IGUgfHwgKDAsIGkuaXNIZXhTdHJpbmcpKHQsIDIwKSB8fCAoc1t0XSA9ICcweCcpLCB0KSk7CiAgICAgICAgICAgIGZvciAoY29uc3QgZSBpbiBzKSBzW2VdID0gYXdhaXQgbihlKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICBlLnZlcmlmeWluZ0NvbnRyYWN0ICYmIHNbZS52ZXJpZnlpbmdDb250cmFjdF0gJiYgKGUudmVyaWZ5aW5nQ29udHJhY3QgPSBzW2UudmVyaWZ5aW5nQ29udHJhY3RdKSwKICAgICAgICAgICAgICB7IGRvbWFpbjogZSwgdmFsdWU6IChyID0gby52aXNpdChyLCAoZSwgdCkgPT4gKCdhZGRyZXNzJyA9PT0gZSAmJiBzW3RdID8gc1t0XSA6IHQpKSkgfQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGdldFBheWxvYWQoZSwgdCwgcikgewogICAgICAgICAgICBFLmhhc2hEb21haW4oZSk7CiAgICAgICAgICAgIGNvbnN0IG4gPSB7fSwKICAgICAgICAgICAgICBzID0gW107CiAgICAgICAgICAgIG0uZm9yRWFjaCgodCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHIgPSBlW3RdOwogICAgICAgICAgICAgIG51bGwgIT0gciAmJiAoKG5bdF0gPSB5W3RdKHIpKSwgcy5wdXNoKHsgbmFtZTogdCwgdHlwZTogcFt0XSB9KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCBvID0gRS5mcm9tKHQpLAogICAgICAgICAgICAgIGEgPSBPYmplY3QuYXNzaWduKHt9LCB0KTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICBudWxsID09IGEuRUlQNzEyRG9tYWluLAogICAgICAgICAgICAgICAgJ3R5cGVzIG11c3Qgbm90IGNvbnRhaW4gRUlQNzEyRG9tYWluIHR5cGUnLAogICAgICAgICAgICAgICAgJ3R5cGVzLkVJUDcxMkRvbWFpbicsCiAgICAgICAgICAgICAgICB0CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAoYS5FSVA3MTJEb21haW4gPSBzKSwKICAgICAgICAgICAgICBvLmVuY29kZShyKSwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0eXBlczogYSwKICAgICAgICAgICAgICAgIGRvbWFpbjogbiwKICAgICAgICAgICAgICAgIHByaW1hcnlUeXBlOiBvLnByaW1hcnlUeXBlLAogICAgICAgICAgICAgICAgbWVzc2FnZTogby52aXNpdChyLCAoZSwgdCkgPT4gewogICAgICAgICAgICAgICAgICBpZiAoZS5tYXRjaCgvXmJ5dGVzKFxkKikvKSkgcmV0dXJuICgwLCBpLmhleGxpZnkpKCgwLCBpLmdldEJ5dGVzKSh0KSk7CiAgICAgICAgICAgICAgICAgIGlmIChlLm1hdGNoKC9edT9pbnQvKSkgcmV0dXJuICgwLCBpLmdldEJpZ0ludCkodCkudG9TdHJpbmcoKTsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkcmVzcyc6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2wnOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdDsKICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLCBpLmFzc2VydEFyZ3VtZW50KSgnc3RyaW5nJyA9PSB0eXBlb2YgdCwgJ2ludmFsaWQgc3RyaW5nJywgJ3ZhbHVlJywgdCksIHQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKCExLCAndW5zdXBwb3J0ZWQgdHlwZScsICd0eXBlJywgZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuVHlwZWREYXRhRW5jb2RlciA9IEUpLAogICAgICAgICAgKHQudmVyaWZ5VHlwZWREYXRhID0gZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBvLnJlY292ZXJBZGRyZXNzKShFLmhhc2goZSwgdCwgciksIG4pOwogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDM3MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuZXRoZXJzID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcigxNTkyKSwKICAgICAgICAgIHMgPSBuLl9faW1wb3J0U3RhcihyKDYwOTUpKTsKICAgICAgICAodC5ldGhlcnMgPSBzKSwgbi5fX2V4cG9ydFN0YXIocig2MDk1KSwgdCk7CiAgICAgIH0sCiAgICAgIDgwMTI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkFic3RyYWN0UHJvdmlkZXIgPSB0LlVubWFuYWdlZFN1YnNjcmliZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDM2ODApLAogICAgICAgICAgcyA9IHIoNTUxNiksCiAgICAgICAgICBvID0gcig5NTIwKSwKICAgICAgICAgIGkgPSByKDY4OTYpLAogICAgICAgICAgYSA9IHIoMTEyNCksCiAgICAgICAgICBjID0gcig1MzE2KSwKICAgICAgICAgIHUgPSByKDE2NzIpLAogICAgICAgICAgbCA9IHIoODcwNCksCiAgICAgICAgICBkID0gcigxMTA0KSwKICAgICAgICAgIGYgPSByKDY5OTIpLAogICAgICAgICAgaCA9IHIoODEzNiksCiAgICAgICAgICBnID0gQmlnSW50KDIpOwogICAgICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgICAgcmV0dXJuIGUgJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZS50aGVuOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKGUsIHQpIHsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIGUgKwogICAgICAgICAgICAnOicgKwogICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh0LCAoZSwgdCkgPT4gewogICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiAnbnVsbCc7CiAgICAgICAgICAgICAgaWYgKCdiaWdpbnQnID09IHR5cGVvZiB0KSByZXR1cm4gYGJpZ2ludDoke3QudG9TdHJpbmcoKX1gOwogICAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgdCkgcmV0dXJuIHQudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICBpZiAoJ29iamVjdCcgPT0gdHlwZW9mIHQgJiYgIUFycmF5LmlzQXJyYXkodCkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBPYmplY3Qua2V5cyh0KTsKICAgICAgICAgICAgICAgIHJldHVybiBlLnNvcnQoKSwgZS5yZWR1Y2UoKGUsIHIpID0-ICgoZVtyXSA9IHRbcl0pLCBlKSwge30pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgfSkKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGNsYXNzIGIgewogICAgICAgICAgbmFtZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgKDAsIGMuZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBuYW1lOiBlIH0pOwogICAgICAgICAgfQogICAgICAgICAgc3RhcnQoKSB7fQogICAgICAgICAgc3RvcCgpIHt9CiAgICAgICAgICBwYXVzZShlKSB7fQogICAgICAgICAgcmVzdW1lKCkge30KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24geShlKSB7CiAgICAgICAgICByZXR1cm4gKGUgPSBBcnJheS5mcm9tKG5ldyBTZXQoZSkudmFsdWVzKCkpKS5zb3J0KCksIGU7CiAgICAgICAgfQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIEEoZSwgdCkgewogICAgICAgICAgaWYgKG51bGwgPT0gZSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGV2ZW50Jyk7CiAgICAgICAgICBpZiAoKEFycmF5LmlzQXJyYXkoZSkgJiYgKGUgPSB7IHRvcGljczogZSB9KSwgJ3N0cmluZycgPT0gdHlwZW9mIGUpKQogICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICBjYXNlICdibG9jayc6CiAgICAgICAgICAgICAgY2FzZSAnZGVidWcnOgogICAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzoKICAgICAgICAgICAgICBjYXNlICdmaW5hbGl6ZWQnOgogICAgICAgICAgICAgIGNhc2UgJ25ldHdvcmsnOgogICAgICAgICAgICAgIGNhc2UgJ3BlbmRpbmcnOgogICAgICAgICAgICAgIGNhc2UgJ3NhZmUnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogZSwgdGFnOiBlIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIGlmICgoMCwgYy5pc0hleFN0cmluZykoZSwgMzIpKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6ICd0cmFuc2FjdGlvbicsIHRhZzogbSgndHgnLCB7IGhhc2g6IHQgfSksIGhhc2g6IHQgfTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlLm9ycGhhbikgewogICAgICAgICAgICBjb25zdCB0ID0gZTsKICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ29ycGhhbicsIHRhZzogbSgnb3JwaGFuJywgdCksIGZpbHRlcjogKChyID0gdCksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocikpKSB9OwogICAgICAgICAgfQogICAgICAgICAgdmFyIHI7CiAgICAgICAgICBpZiAoZS5hZGRyZXNzIHx8IGUudG9waWNzKSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBlLAogICAgICAgICAgICAgIHMgPSB7CiAgICAgICAgICAgICAgICB0b3BpY3M6IChyLnRvcGljcyB8fCBbXSkubWFwKChlKSA9PgogICAgICAgICAgICAgICAgICBudWxsID09IGUgPyBudWxsIDogQXJyYXkuaXNBcnJheShlKSA_IHkoZS5tYXAoKGUpID0-IGUudG9Mb3dlckNhc2UoKSkpIDogZS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHIuYWRkcmVzcykgewogICAgICAgICAgICAgIGNvbnN0IGUgPSBbXSwKICAgICAgICAgICAgICAgIG8gPSBbXSwKICAgICAgICAgICAgICAgIGkgPSAocikgPT4gewogICAgICAgICAgICAgICAgICAoMCwgYy5pc0hleFN0cmluZykocikKICAgICAgICAgICAgICAgICAgICA_IGUucHVzaChyKQogICAgICAgICAgICAgICAgICAgIDogby5wdXNoKAogICAgICAgICAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaChhd2FpdCAoMCwgbi5yZXNvbHZlQWRkcmVzcykociwgdCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KSgpCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHIuYWRkcmVzcykgPyByLmFkZHJlc3MuZm9yRWFjaChpKSA6IGkoci5hZGRyZXNzKSwKICAgICAgICAgICAgICAgIG8ubGVuZ3RoICYmIChhd2FpdCBQcm9taXNlLmFsbChvKSksCiAgICAgICAgICAgICAgICAocy5hZGRyZXNzID0geShlLm1hcCgoZSkgPT4gZS50b0xvd2VyQ2FzZSgpKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7IGZpbHRlcjogcywgdGFnOiBtKCdldmVudCcsIHMpLCB0eXBlOiAnZXZlbnQnIH07CiAgICAgICAgICB9CiAgICAgICAgICAoMCwgYy5hc3NlcnRBcmd1bWVudCkoITEsICd1bmtub3duIFByb3ZpZGVyRXZlbnQnLCAnZXZlbnQnLCBlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdigpIHsKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICB9CiAgICAgICAgdC5Vbm1hbmFnZWRTdWJzY3JpYmVyID0gYjsKICAgICAgICBjb25zdCBFID0geyBjYWNoZVRpbWVvdXQ6IDI1MCwgcG9sbGluZ0ludGVydmFsOiA0ZTMgfTsKICAgICAgICBmdW5jdGlvbiB3KGUsIHQpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBUKGUsIHQpOwogICAgICAgICAgICBpZiAocikgcmV0dXJuICgwLCBjLnRvVXRmOFN0cmluZykocik7CiAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIFQoZSwgdCkgewogICAgICAgICAgaWYgKCcweCcgPT09IGUpIHJldHVybiBudWxsOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgciA9ICgwLCBjLmdldE51bWJlcikoKDAsIGMuZGF0YVNsaWNlKShlLCB0LCB0ICsgMzIpKSwKICAgICAgICAgICAgICBuID0gKDAsIGMuZ2V0TnVtYmVyKSgoMCwgYy5kYXRhU2xpY2UpKGUsIHIsIHIgKyAzMikpOwogICAgICAgICAgICByZXR1cm4gKDAsIGMuZGF0YVNsaWNlKShlLCByICsgMzIsIHIgKyAzMiArIG4pOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBQKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSAoMCwgYy50b0JlQXJyYXkpKGUpOwogICAgICAgICAgaWYgKHQubGVuZ3RoID4gMzIpIHRocm93IG5ldyBFcnJvcignaW50ZXJuYWw7IHNob3VsZCBub3QgaGFwcGVuJyk7CiAgICAgICAgICBjb25zdCByID0gbmV3IFVpbnQ4QXJyYXkoMzIpOwogICAgICAgICAgcmV0dXJuIHIuc2V0KHQsIDMyIC0gdC5sZW5ndGgpLCByOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBTKGUpIHsKICAgICAgICAgIGlmIChlLmxlbmd0aCAlIDMyID09IDApIHJldHVybiBlOwogICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KDMyICogTWF0aC5jZWlsKGUubGVuZ3RoIC8gMzIpKTsKICAgICAgICAgIHJldHVybiB0LnNldChlKSwgdDsKICAgICAgICB9CiAgICAgICAgdC5BYnN0cmFjdFByb3ZpZGVyID0gY2xhc3MgewogICAgICAgICAgI2s7CiAgICAgICAgICAjSTsKICAgICAgICAgICNGOwogICAgICAgICAgI007CiAgICAgICAgICAjSjsKICAgICAgICAgICNVOwogICAgICAgICAgI0Q7CiAgICAgICAgICAjeDsKICAgICAgICAgICNfOwogICAgICAgICAgI0c7CiAgICAgICAgICAjajsKICAgICAgICAgICN2OwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICBpZiAoKCh0aGlzLiN2ID0gT2JqZWN0LmFzc2lnbih7fSwgRSwgdCB8fCB7fSkpLCAnYW55JyA9PT0gZSkpICh0aGlzLiNVID0gITApLCAodGhpcy4jSiA9IG51bGwpOwogICAgICAgICAgICBlbHNlIGlmIChlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGQuTmV0d29yay5mcm9tKGUpOwogICAgICAgICAgICAgICh0aGlzLiNVID0gITEpLAogICAgICAgICAgICAgICAgKHRoaXMuI0ogPSBQcm9taXNlLnJlc29sdmUodCkpLAogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbmV0d29yaycsIHQsIG51bGwpOwogICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgIH0gZWxzZSAodGhpcy4jVSA9ICExKSwgKHRoaXMuI0ogPSBudWxsKTsKICAgICAgICAgICAgKHRoaXMuI3ggPSAtMSksCiAgICAgICAgICAgICAgKHRoaXMuI0QgPSBuZXcgTWFwKCkpLAogICAgICAgICAgICAgICh0aGlzLiNrID0gbmV3IE1hcCgpKSwKICAgICAgICAgICAgICAodGhpcy4jSSA9IG5ldyBNYXAoKSksCiAgICAgICAgICAgICAgKHRoaXMuI0YgPSBudWxsKSwKICAgICAgICAgICAgICAodGhpcy4jTSA9ICExKSwKICAgICAgICAgICAgICAodGhpcy4jXyA9IDEpLAogICAgICAgICAgICAgICh0aGlzLiNHID0gbmV3IE1hcCgpKSwKICAgICAgICAgICAgICAodGhpcy4jaiA9ICExKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwb2xsaW5nSW50ZXJ2YWwoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiN2LnBvbGxpbmdJbnRlcnZhbDsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwcm92aWRlcigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgcGx1Z2lucygpIHsKICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy4jSS52YWx1ZXMoKSk7CiAgICAgICAgICB9CiAgICAgICAgICBhdHRhY2hQbHVnaW4oZSkgewogICAgICAgICAgICBpZiAodGhpcy4jSS5nZXQoZS5uYW1lKSkgdGhyb3cgbmV3IEVycm9yKGBjYW5ub3QgcmVwbGFjZSBleGlzdGluZyBwbHVnaW46ICR7ZS5uYW1lfSBgKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0kuc2V0KGUubmFtZSwgZS5jb25uZWN0KHRoaXMpKSwgdGhpczsKICAgICAgICAgIH0KICAgICAgICAgIGdldFBsdWdpbihlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNJLmdldChlKSB8fCBudWxsOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGRpc2FibGVDY2lwUmVhZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2o7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgZGlzYWJsZUNjaXBSZWFkKGUpIHsKICAgICAgICAgICAgdGhpcy4jaiA9ICEhZTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jICNIKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuI3YuY2FjaGVUaW1lb3V0OwogICAgICAgICAgICBpZiAodCA8IDApIHJldHVybiBhd2FpdCB0aGlzLl9wZXJmb3JtKGUpOwogICAgICAgICAgICBjb25zdCByID0gbShlLm1ldGhvZCwgZSk7CiAgICAgICAgICAgIGxldCBuID0gdGhpcy4jRC5nZXQocik7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgbiB8fAogICAgICAgICAgICAgICAgKChuID0gdGhpcy5fcGVyZm9ybShlKSksCiAgICAgICAgICAgICAgICB0aGlzLiNELnNldChyLCBuKSwKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLiNELmdldChyKSA9PT0gbiAmJiB0aGlzLiNELmRlbGV0ZShyKTsKICAgICAgICAgICAgICAgIH0sIHQpKSwKICAgICAgICAgICAgICBhd2FpdCBuCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBjY2lwUmVhZEZldGNoKGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZGlzYWJsZUNjaXBSZWFkIHx8IDAgPT09IHIubGVuZ3RoIHx8IG51bGwgPT0gZS50bykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRvLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgcyA9IHQudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICBvID0gW107CiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgci5sZW5ndGg7IHQrKykgewogICAgICAgICAgICAgIGNvbnN0IGkgPSByW3RdLAogICAgICAgICAgICAgICAgYSA9IGkucmVwbGFjZSgne3NlbmRlcn0nLCBuKS5yZXBsYWNlKCd7ZGF0YX0nLCBzKSwKICAgICAgICAgICAgICAgIHUgPSBuZXcgYy5GZXRjaFJlcXVlc3QoYSk7CiAgICAgICAgICAgICAgLTEgPT09IGkuaW5kZXhPZigne2RhdGF9JykgJiYgKHUuYm9keSA9IHsgZGF0YTogcywgc2VuZGVyOiBuIH0pLAogICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAnc2VuZENjaXBSZWFkRmV0Y2hSZXF1ZXN0JywgcmVxdWVzdDogdSwgaW5kZXg6IHQsIHVybHM6IHIgfSk7CiAgICAgICAgICAgICAgbGV0IGwgPSAndW5rbm93biBlcnJvcic7CiAgICAgICAgICAgICAgY29uc3QgZCA9IGF3YWl0IHUuc2VuZCgpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBlID0gZC5ib2R5SnNvbjsKICAgICAgICAgICAgICAgIGlmIChlLmRhdGEpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoJ2RlYnVnJywgeyBhY3Rpb246ICdyZWNlaXZlQ2NpcFJlYWRGZXRjaFJlc3VsdCcsIHJlcXVlc3Q6IHUsIHJlc3VsdDogZSB9KSwgZS5kYXRhOwogICAgICAgICAgICAgICAgZS5tZXNzYWdlICYmIChsID0gZS5tZXNzYWdlKSwKICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAncmVjZWl2ZUNjaXBSZWFkRmV0Y2hFcnJvcicsIHJlcXVlc3Q6IHUsIHJlc3VsdDogZSB9KTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICgwLCBjLmFzc2VydCkoCiAgICAgICAgICAgICAgICBkLnN0YXR1c0NvZGUgPCA0MDAgfHwgZC5zdGF0dXNDb2RlID49IDUwMCwKICAgICAgICAgICAgICAgIGByZXNwb25zZSBub3QgZm91bmQgZHVyaW5nIENDSVAgZmV0Y2g6ICR7bH1gLAogICAgICAgICAgICAgICAgJ09GRkNIQUlOX0ZBVUxUJywKICAgICAgICAgICAgICAgIHsgcmVhc29uOiAnNDA0X01JU1NJTkdfUkVTT1VSQ0UnLCB0cmFuc2FjdGlvbjogZSwgaW5mbzogeyB1cmw6IGksIGVycm9yTWVzc2FnZTogbCB9IH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgby5wdXNoKGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICgwLCBjLmFzc2VydCkoCiAgICAgICAgICAgICAgITEsCiAgICAgICAgICAgICAgYGVycm9yIGVuY291bnRlcmVkIGR1cmluZyBDQ0lQIGZldGNoOiAke28ubWFwKChlKSA9PiBKU09OLnN0cmluZ2lmeShlKSkuam9pbignLCAnKX1gLAogICAgICAgICAgICAgICdPRkZDSEFJTl9GQVVMVCcsCiAgICAgICAgICAgICAgeyByZWFzb246ICc1MDBfU0VSVkVSX0VSUk9SJywgdHJhbnNhY3Rpb246IGUsIGluZm86IHsgdXJsczogciwgZXJyb3JNZXNzYWdlczogbyB9IH0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIF93cmFwQmxvY2soZSwgdCkgewogICAgICAgICAgICByZXR1cm4gbmV3IGYuQmxvY2soKDAsIGwuZm9ybWF0QmxvY2spKGUpLCB0aGlzKTsKICAgICAgICAgIH0KICAgICAgICAgIF93cmFwTG9nKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBmLkxvZygoMCwgbC5mb3JtYXRMb2cpKGUpLCB0aGlzKTsKICAgICAgICAgIH0KICAgICAgICAgIF93cmFwVHJhbnNhY3Rpb25SZWNlaXB0KGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBmLlRyYW5zYWN0aW9uUmVjZWlwdCgoMCwgbC5mb3JtYXRUcmFuc2FjdGlvblJlY2VpcHQpKGUpLCB0aGlzKTsKICAgICAgICAgIH0KICAgICAgICAgIF93cmFwVHJhbnNhY3Rpb25SZXNwb25zZShlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgZi5UcmFuc2FjdGlvblJlc3BvbnNlKCgwLCBsLmZvcm1hdFRyYW5zYWN0aW9uUmVzcG9uc2UpKGUpLCB0aGlzKTsKICAgICAgICAgIH0KICAgICAgICAgIF9kZXRlY3ROZXR3b3JrKCkgewogICAgICAgICAgICAoMCwgYy5hc3NlcnQpKCExLCAnc3ViLWNsYXNzZXMgbXVzdCBpbXBsZW1lbnQgdGhpcycsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnX2RldGVjdE5ldHdvcmsnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX3BlcmZvcm0oZSkgewogICAgICAgICAgICAoMCwgYy5hc3NlcnQpKCExLCBgdW5zdXBwb3J0ZWQgbWV0aG9kOiAke2UubWV0aG9kfWAsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiBlLm1ldGhvZCwKICAgICAgICAgICAgICBpbmZvOiBlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0QmxvY2tOdW1iZXIoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSAoMCwgYy5nZXROdW1iZXIpKGF3YWl0IHRoaXMuI0goeyBtZXRob2Q6ICdnZXRCbG9ja051bWJlcicgfSksICclcmVzcG9uc2UnKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3ggPj0gMCAmJiAodGhpcy4jeCA9IGUpLCBlOwogICAgICAgICAgfQogICAgICAgICAgX2dldEFkZHJlc3MoZSkgewogICAgICAgICAgICByZXR1cm4gKDAsIG4ucmVzb2x2ZUFkZHJlc3MpKGUsIHRoaXMpOwogICAgICAgICAgfQogICAgICAgICAgX2dldEJsb2NrVGFnKGUpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuICdsYXRlc3QnOwogICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICBjYXNlICdlYXJsaWVzdCc6CiAgICAgICAgICAgICAgICByZXR1cm4gJzB4MCc7CiAgICAgICAgICAgICAgY2FzZSAnZmluYWxpemVkJzoKICAgICAgICAgICAgICBjYXNlICdsYXRlc3QnOgogICAgICAgICAgICAgIGNhc2UgJ3BlbmRpbmcnOgogICAgICAgICAgICAgIGNhc2UgJ3NhZmUnOgogICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICgwLCBjLmlzSGV4U3RyaW5nKShlKQogICAgICAgICAgICAgID8gKDAsIGMuaXNIZXhTdHJpbmcpKGUsIDMyKQogICAgICAgICAgICAgICAgPyBlCiAgICAgICAgICAgICAgICA6ICgwLCBjLnRvUXVhbnRpdHkpKGUpCiAgICAgICAgICAgICAgOiAoJ2JpZ2ludCcgPT0gdHlwZW9mIGUgJiYgKGUgPSAoMCwgYy5nZXROdW1iZXIpKGUsICdibG9ja1RhZycpKSwKICAgICAgICAgICAgICAgICdudW1iZXInID09IHR5cGVvZiBlCiAgICAgICAgICAgICAgICAgID8gZSA-PSAwCiAgICAgICAgICAgICAgICAgICAgPyAoMCwgYy50b1F1YW50aXR5KShlKQogICAgICAgICAgICAgICAgICAgIDogdGhpcy4jeCA-PSAwCiAgICAgICAgICAgICAgICAgICAgICA_ICgwLCBjLnRvUXVhbnRpdHkpKHRoaXMuI3ggKyBlKQogICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmdldEJsb2NrTnVtYmVyKCkudGhlbigodCkgPT4gKDAsIGMudG9RdWFudGl0eSkodCArIGUpKQogICAgICAgICAgICAgICAgICA6IHZvaWQgKDAsIGMuYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCBibG9ja1RhZycsICdibG9ja1RhZycsIGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIF9nZXRGaWx0ZXIoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gKGUudG9waWNzIHx8IFtdKS5tYXAoKGUpID0-CiAgICAgICAgICAgICAgICBudWxsID09IGUgPyBudWxsIDogQXJyYXkuaXNBcnJheShlKSA_IHkoZS5tYXAoKGUpID0-IGUudG9Mb3dlckNhc2UoKSkpIDogZS50b0xvd2VyQ2FzZSgpCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICByID0gJ2Jsb2NrSGFzaCcgaW4gZSA_IGUuYmxvY2tIYXNoIDogdm9pZCAwLAogICAgICAgICAgICAgIG4gPSAoZSwgbiwgcykgPT4gewogICAgICAgICAgICAgICAgbGV0IG87CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIG8gPSBlWzBdOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGUuc29ydCgpLCAobyA9IGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHIgJiYgKG51bGwgIT0gbiB8fCBudWxsICE9IHMpKSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgZmlsdGVyJyk7CiAgICAgICAgICAgICAgICBjb25zdCBpID0ge307CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICBvICYmIChpLmFkZHJlc3MgPSBvKSwKICAgICAgICAgICAgICAgICAgdC5sZW5ndGggJiYgKGkudG9waWNzID0gdCksCiAgICAgICAgICAgICAgICAgIG4gJiYgKGkuZnJvbUJsb2NrID0gbiksCiAgICAgICAgICAgICAgICAgIHMgJiYgKGkudG9CbG9jayA9IHMpLAogICAgICAgICAgICAgICAgICByICYmIChpLmJsb2NrSGFzaCA9IHIpLAogICAgICAgICAgICAgICAgICBpCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIGxldCBzLAogICAgICAgICAgICAgIG8sCiAgICAgICAgICAgICAgaSA9IFtdOwogICAgICAgICAgICBpZiAoZS5hZGRyZXNzKQogICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUuYWRkcmVzcykpIGZvciAoY29uc3QgdCBvZiBlLmFkZHJlc3MpIGkucHVzaCh0aGlzLl9nZXRBZGRyZXNzKHQpKTsKICAgICAgICAgICAgICBlbHNlIGkucHVzaCh0aGlzLl9nZXRBZGRyZXNzKGUuYWRkcmVzcykpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICdmcm9tQmxvY2snIGluIGUgJiYgKHMgPSB0aGlzLl9nZXRCbG9ja1RhZyhlLmZyb21CbG9jaykpLAogICAgICAgICAgICAgICd0b0Jsb2NrJyBpbiBlICYmIChvID0gdGhpcy5fZ2V0QmxvY2tUYWcoZS50b0Jsb2NrKSksCiAgICAgICAgICAgICAgaS5maWx0ZXIoKGUpID0-ICdzdHJpbmcnICE9IHR5cGVvZiBlKS5sZW5ndGggfHwKICAgICAgICAgICAgICAobnVsbCAhPSBzICYmICdzdHJpbmcnICE9IHR5cGVvZiBzKSB8fAogICAgICAgICAgICAgIChudWxsICE9IG8gJiYgJ3N0cmluZycgIT0gdHlwZW9mIG8pCiAgICAgICAgICAgICAgICA_IFByb21pc2UuYWxsKFtQcm9taXNlLmFsbChpKSwgcywgb10pLnRoZW4oKGUpID0-IG4oZVswXSwgZVsxXSwgZVsyXSkpCiAgICAgICAgICAgICAgICA6IG4oaSwgcywgbykKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIF9nZXRUcmFuc2FjdGlvblJlcXVlc3QoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gKDAsIGYuY29weVJlcXVlc3QpKGUpLAogICAgICAgICAgICAgIHIgPSBbXTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIChbJ3RvJywgJ2Zyb20nXS5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0W2VdKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCBzID0gKDAsIG4ucmVzb2x2ZUFkZHJlc3MpKHRbZV0sIHRoaXMpOwogICAgICAgICAgICAgICAgcChzKQogICAgICAgICAgICAgICAgICA_IHIucHVzaCgKICAgICAgICAgICAgICAgICAgICAgIChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRbZV0gPSBhd2FpdCBzOwogICAgICAgICAgICAgICAgICAgICAgfSkoKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgOiAodFtlXSA9IHMpOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG51bGwgIT0gdC5ibG9ja1RhZykKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2dldEJsb2NrVGFnKHQuYmxvY2tUYWcpOwogICAgICAgICAgICAgIHAoZSkKICAgICAgICAgICAgICAgID8gci5wdXNoKAogICAgICAgICAgICAgICAgICAgIChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB0LmJsb2NrVGFnID0gYXdhaXQgZTsKICAgICAgICAgICAgICAgICAgICB9KSgpCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIDogKHQuYmxvY2tUYWcgPSBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gci5sZW5ndGgKICAgICAgICAgICAgICA_IChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBQcm9taXNlLmFsbChyKSwgdDsKICAgICAgICAgICAgICAgIH0pKCkKICAgICAgICAgICAgICA6IHQ7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXROZXR3b3JrKCkgewogICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLiNKKSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5fZGV0ZWN0TmV0d29yaygpOwogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbWl0KCduZXR3b3JrJywgZSwgbnVsbCksIGU7CiAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgIHRocm93ICh0aGlzLiNKID09PSBlICYmICh0aGlzLiNKID0gbnVsbCksIHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLiNKID0gZSksIChhd2FpdCBlKS5jbG9uZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLiNKLAogICAgICAgICAgICAgIFt0LCByXSA9IGF3YWl0IFByb21pc2UuYWxsKFtlLCB0aGlzLl9kZXRlY3ROZXR3b3JrKCldKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0LmNoYWluSWQgIT09IHIuY2hhaW5JZCAmJgogICAgICAgICAgICAgICAgKHRoaXMuI1UKICAgICAgICAgICAgICAgICAgPyAodGhpcy5lbWl0KCduZXR3b3JrJywgciwgdCksIHRoaXMuI0ogPT09IGUgJiYgKHRoaXMuI0ogPSBQcm9taXNlLnJlc29sdmUocikpKQogICAgICAgICAgICAgICAgICA6ICgwLCBjLmFzc2VydCkoITEsIGBuZXR3b3JrIGNoYW5nZWQ6ICR7dC5jaGFpbklkfSA9PiAke3IuY2hhaW5JZH0gYCwgJ05FVFdPUktfRVJST1InLCB7CiAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2NoYW5nZWQnCiAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgIHQuY2xvbmUoKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0RmVlRGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuZ2V0TmV0d29yaygpLAogICAgICAgICAgICAgIHQgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgICAgICAgIF9ibG9jazogdCwKICAgICAgICAgICAgICAgICAgZ2FzUHJpY2U6IHIsCiAgICAgICAgICAgICAgICAgIHByaW9yaXR5RmVlOiBuCiAgICAgICAgICAgICAgICB9ID0gYXdhaXQgKDAsIGMucmVzb2x2ZVByb3BlcnRpZXMpKHsKICAgICAgICAgICAgICAgICAgX2Jsb2NrOiB0aGlzLiNYKCdsYXRlc3QnLCAhMSksCiAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy4jSCh7IG1ldGhvZDogJ2dldEdhc1ByaWNlJyB9KTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoMCwgYy5nZXRCaWdJbnQpKGUsICclcmVzcG9uc2UnKTsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICB9KSgpLAogICAgICAgICAgICAgICAgICBwcmlvcml0eUZlZTogKGFzeW5jICgpID0-IHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuI0goeyBtZXRob2Q6ICdnZXRQcmlvcml0eUZlZScgfSk7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGMuZ2V0QmlnSW50KShlLCAnJXJlc3BvbnNlJyk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgfSkoKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsZXQgcyA9IG51bGwsCiAgICAgICAgICAgICAgICAgIG8gPSBudWxsOwogICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuX3dyYXBCbG9jayh0LCBlKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIGkgJiYgaS5iYXNlRmVlUGVyR2FzICYmICgobyA9IG51bGwgIT0gbiA_IG4gOiBCaWdJbnQoJzEwMDAwMDAwMDAnKSksIChzID0gaS5iYXNlRmVlUGVyR2FzICogZyArIG8pKSwKICAgICAgICAgICAgICAgICAgbmV3IGYuRmVlRGF0YShyLCBzLCBvKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHIgPSBlLmdldFBsdWdpbignb3JnLmV0aGVycy5wbHVnaW5zLm5ldHdvcmsuRmV0Y2hVcmxGZWVEYXRhUGx1Z2luJyk7CiAgICAgICAgICAgIGlmIChyKSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBjLkZldGNoUmVxdWVzdChyLnVybCksCiAgICAgICAgICAgICAgICBuID0gYXdhaXQgci5wcm9jZXNzRnVuYyh0LCB0aGlzLCBlKTsKICAgICAgICAgICAgICByZXR1cm4gbmV3IGYuRmVlRGF0YShuLmdhc1ByaWNlLCBuLm1heEZlZVBlckdhcywgbi5tYXhQcmlvcml0eUZlZVBlckdhcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHQoKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGVzdGltYXRlR2FzKGUpIHsKICAgICAgICAgICAgbGV0IHQgPSB0aGlzLl9nZXRUcmFuc2FjdGlvblJlcXVlc3QoZSk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgcCh0KSAmJiAodCA9IGF3YWl0IHQpLAogICAgICAgICAgICAgICgwLCBjLmdldEJpZ0ludCkoYXdhaXQgdGhpcy4jSCh7IG1ldGhvZDogJ2VzdGltYXRlR2FzJywgdHJhbnNhY3Rpb246IHQgfSksICclcmVzcG9uc2UnKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgI1YoZSwgdCwgcikgewogICAgICAgICAgICAoMCwgYy5hc3NlcnQpKHIgPCAxMCwgJ0NDSVAgcmVhZCBleGNlZWRlZCBtYXhpbXVtIHJlZGlyZWN0aW9ucycsICdPRkZDSEFJTl9GQVVMVCcsIHsKICAgICAgICAgICAgICByZWFzb246ICdUT09fTUFOWV9SRURJUkVDVFMnLAogICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBPYmplY3QuYXNzaWduKHt9LCBlLCB7IGJsb2NrVGFnOiB0LCBlbmFibGVDY2lwUmVhZDogITAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHMgPSAoMCwgZi5jb3B5UmVxdWVzdCkoZSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBjLmhleGxpZnkpKGF3YWl0IHRoaXMuX3BlcmZvcm0oeyBtZXRob2Q6ICdjYWxsJywgdHJhbnNhY3Rpb246IHMsIGJsb2NrVGFnOiB0IH0pKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICF0aGlzLmRpc2FibGVDY2lwUmVhZCAmJgogICAgICAgICAgICAgICAgKDAsIGMuaXNDYWxsRXhjZXB0aW9uKShlKSAmJgogICAgICAgICAgICAgICAgZS5kYXRhICYmCiAgICAgICAgICAgICAgICByID49IDAgJiYKICAgICAgICAgICAgICAgICdsYXRlc3QnID09PSB0ICYmCiAgICAgICAgICAgICAgICBudWxsICE9IHMudG8gJiYKICAgICAgICAgICAgICAgICcweDU1NmYxODMwJyA9PT0gKDAsIGMuZGF0YVNsaWNlKShlLmRhdGEsIDAsIDQpCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBjb25zdCBvID0gZS5kYXRhLAogICAgICAgICAgICAgICAgICBpID0gYXdhaXQgKDAsIG4ucmVzb2x2ZUFkZHJlc3MpKHMudG8sIHRoaXMpOwogICAgICAgICAgICAgICAgbGV0IGE7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBhID0gKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHsgc2VuZGVyOiAnJywgdXJsczogW10sIGNhbGxkYXRhOiAnJywgc2VsZWN0b3I6ICcnLCBleHRyYURhdGE6ICcnLCBlcnJvckFyZ3M6IFtdIH07CiAgICAgICAgICAgICAgICAgICAgKDAsIGMuYXNzZXJ0KSgoMCwgYy5kYXRhTGVuZ3RoKShlKSA-PSAxNjAsICdpbnN1ZmZpY2llbnQgT2ZmY2hhaW5Mb29rdXAgZGF0YScsICdPRkZDSEFJTl9GQVVMVCcsIHsKICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ2luc3VmZmljaWVudCBPZmZjaGFpbkxvb2t1cCBkYXRhJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSAoMCwgYy5kYXRhU2xpY2UpKGUsIDAsIDMyKTsKICAgICAgICAgICAgICAgICAgICAoMCwgYy5hc3NlcnQpKAogICAgICAgICAgICAgICAgICAgICAgKDAsIGMuZGF0YVNsaWNlKShyLCAwLCAxMikgPT09ICgwLCBjLmRhdGFTbGljZSkoTiwgMCwgMTIpLAogICAgICAgICAgICAgICAgICAgICAgJ2NvcnJ1cHQgT2ZmY2hhaW5Mb29rdXAgc2VuZGVyJywKICAgICAgICAgICAgICAgICAgICAgICdPRkZDSEFJTl9GQVVMVCcsCiAgICAgICAgICAgICAgICAgICAgICB7IHJlYXNvbjogJ2NvcnJ1cHQgT2ZmY2hhaW5Mb29rdXAgc2VuZGVyJyB9CiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICh0LnNlbmRlciA9ICgwLCBjLmRhdGFTbGljZSkociwgMTIpKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IFtdLAogICAgICAgICAgICAgICAgICAgICAgICBuID0gKDAsIGMuZ2V0TnVtYmVyKSgoMCwgYy5kYXRhU2xpY2UpKGUsIDMyLCA2NCkpLAogICAgICAgICAgICAgICAgICAgICAgICBzID0gKDAsIGMuZ2V0TnVtYmVyKSgoMCwgYy5kYXRhU2xpY2UpKGUsIG4sIG4gKyAzMikpLAogICAgICAgICAgICAgICAgICAgICAgICBvID0gKDAsIGMuZGF0YVNsaWNlKShlLCBuICsgMzIpOwogICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzOyBlKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHcobywgMzIgKiBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKCdhYm9ydCcpOwogICAgICAgICAgICAgICAgICAgICAgICByLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB0LnVybHMgPSByOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICgwLCBjLmFzc2VydCkoITEsICdjb3JydXB0IE9mZmNoYWluTG9va3VwIHVybHMnLCAnT0ZGQ0hBSU5fRkFVTFQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ2NvcnJ1cHQgT2ZmY2hhaW5Mb29rdXAgdXJscycKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IFQoZSwgNjQpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gcikgdGhyb3cgbmV3IEVycm9yKCdhYm9ydCcpOwogICAgICAgICAgICAgICAgICAgICAgdC5jYWxsZGF0YSA9IHI7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgKDAsIGMuYXNzZXJ0KSghMSwgJ2NvcnJ1cHQgT2ZmY2hhaW5Mb29rdXAgY2FsbGRhdGEnLCAnT0ZGQ0hBSU5fRkFVTFQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ2NvcnJ1cHQgT2ZmY2hhaW5Mb29rdXAgY2FsbGRhdGEnCiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKDAsIGMuYXNzZXJ0KSgKICAgICAgICAgICAgICAgICAgICAgICgwLCBjLmRhdGFTbGljZSkoZSwgMTAwLCAxMjgpID09PSAoMCwgYy5kYXRhU2xpY2UpKE4sIDAsIDI4KSwKICAgICAgICAgICAgICAgICAgICAgICdjb3JydXB0IE9mZmNoYWluTG9va3VwIGNhbGxiYWFja1NlbGVjdG9yJywKICAgICAgICAgICAgICAgICAgICAgICdPRkZDSEFJTl9GQVVMVCcsCiAgICAgICAgICAgICAgICAgICAgICB7IHJlYXNvbjogJ2NvcnJ1cHQgT2ZmY2hhaW5Mb29rdXAgY2FsbGJhYWNrU2VsZWN0b3InIH0KICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgKHQuc2VsZWN0b3IgPSAoMCwgYy5kYXRhU2xpY2UpKGUsIDk2LCAxMDApKTsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IFQoZSwgMTI4KTsKICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IHIpIHRocm93IG5ldyBFcnJvcignYWJvcnQnKTsKICAgICAgICAgICAgICAgICAgICAgIHQuZXh0cmFEYXRhID0gcjsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAoMCwgYy5hc3NlcnQpKCExLCAnY29ycnVwdCBPZmZjaGFpbkxvb2t1cCBleHRyYURhdGEnLCAnT0ZGQ0hBSU5fRkFVTFQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ2NvcnJ1cHQgT2ZmY2hhaW5Mb29rdXAgZXh0cmFEYXRhJwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAodC5lcnJvckFyZ3MgPSAnc2VuZGVyLHVybHMsY2FsbGRhdGEsc2VsZWN0b3IsZXh0cmFEYXRhJy5zcGxpdCgvLC8pLm1hcCgoZSkgPT4gdFtlXSkpLCB0OwogICAgICAgICAgICAgICAgICB9KSgoMCwgYy5kYXRhU2xpY2UpKGUuZGF0YSwgNCkpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAoMCwgYy5hc3NlcnQpKCExLCBlLm1lc3NhZ2UsICdPRkZDSEFJTl9GQVVMVCcsIHsKICAgICAgICAgICAgICAgICAgICByZWFzb246ICdCQURfREFUQScsCiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHMsCiAgICAgICAgICAgICAgICAgICAgaW5mbzogeyBkYXRhOiBvIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAoMCwgYy5hc3NlcnQpKAogICAgICAgICAgICAgICAgICBhLnNlbmRlci50b0xvd2VyQ2FzZSgpID09PSBpLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICdDQ0lQIFJlYWQgc2VuZGVyIG1pc21hdGNoJywKICAgICAgICAgICAgICAgICAgJ0NBTExfRVhDRVBUSU9OJywKICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2NhbGwnLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IG8sCiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiAnT2ZmY2hhaW5Mb29rdXAnLAogICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBzLAogICAgICAgICAgICAgICAgICAgIGludm9jYXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0OiB7CiAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6ICdPZmZjaGFpbkxvb2t1cChhZGRyZXNzLHN0cmluZ1tdLGJ5dGVzLGJ5dGVzNCxieXRlcyknLAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ09mZmNoYWluTG9va3VwJywKICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IGEuZXJyb3JBcmdzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgY29uc3QgdSA9IGF3YWl0IHRoaXMuY2NpcFJlYWRGZXRjaChzLCBhLmNhbGxkYXRhLCBhLnVybHMpOwogICAgICAgICAgICAgICAgKDAsIGMuYXNzZXJ0KShudWxsICE9IHUsICdDQ0lQIFJlYWQgZmFpbGVkIHRvIGZldGNoIGRhdGEnLCAnT0ZGQ0hBSU5fRkFVTFQnLCB7CiAgICAgICAgICAgICAgICAgIHJlYXNvbjogJ0ZFVENIX0ZBSUxFRCcsCiAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiBzLAogICAgICAgICAgICAgICAgICBpbmZvOiB7IGRhdGE6IGUuZGF0YSwgZXJyb3JBcmdzOiBhLmVycm9yQXJncyB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGwgPSB7IHRvOiBpLCBkYXRhOiAoMCwgYy5jb25jYXQpKFthLnNlbGVjdG9yLCBSKFt1LCBhLmV4dHJhRGF0YV0pXSkgfTsKICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVidWcnLCB7IGFjdGlvbjogJ3NlbmRDY2lwUmVhZENhbGwnLCB0cmFuc2FjdGlvbjogbCB9KTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLiNWKGwsIHQsIHIgKyAxKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlYnVnJywgewogICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAncmVjZWl2ZUNjaXBSZWFkQ2FsbFJlc3VsdCcsCiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogT2JqZWN0LmFzc2lnbih7fSwgbCksCiAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGUKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIHRocm93ICgKICAgICAgICAgICAgICAgICAgICAodGhpcy5lbWl0KCdkZWJ1ZycsIHsKICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3JlY2VpdmVDY2lwUmVhZENhbGxFcnJvcicsCiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogT2JqZWN0LmFzc2lnbih7fSwgbCksCiAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZQogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIGUpCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jICNRKGUpIHsKICAgICAgICAgICAgY29uc3QgeyB2YWx1ZTogdCB9ID0gYXdhaXQgKDAsIGMucmVzb2x2ZVByb3BlcnRpZXMpKHsgbmV0d29yazogdGhpcy5nZXROZXR3b3JrKCksIHZhbHVlOiBlIH0pOwogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGNhbGwoZSkgewogICAgICAgICAgICBjb25zdCB7IHR4OiB0LCBibG9ja1RhZzogciB9ID0gYXdhaXQgKDAsIGMucmVzb2x2ZVByb3BlcnRpZXMpKHsKICAgICAgICAgICAgICB0eDogdGhpcy5fZ2V0VHJhbnNhY3Rpb25SZXF1ZXN0KGUpLAogICAgICAgICAgICAgIGJsb2NrVGFnOiB0aGlzLl9nZXRCbG9ja1RhZyhlLmJsb2NrVGFnKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuI1EodGhpcy4jVih0LCByLCBlLmVuYWJsZUNjaXBSZWFkID8gMCA6IC0xKSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyAjWihlLCB0LCByKSB7CiAgICAgICAgICAgIGxldCBuID0gdGhpcy5fZ2V0QWRkcmVzcyh0KSwKICAgICAgICAgICAgICBzID0gdGhpcy5fZ2V0QmxvY2tUYWcocik7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKCdzdHJpbmcnID09IHR5cGVvZiBuICYmICdzdHJpbmcnID09IHR5cGVvZiBzKSB8fCAoW24sIHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW24sIHNdKSksCiAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jUSh0aGlzLiNIKE9iamVjdC5hc3NpZ24oZSwgeyBhZGRyZXNzOiBuLCBibG9ja1RhZzogcyB9KSkpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRCYWxhbmNlKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBjLmdldEJpZ0ludCkoYXdhaXQgdGhpcy4jWih7IG1ldGhvZDogJ2dldEJhbGFuY2UnIH0sIGUsIHQpLCAnJXJlc3BvbnNlJyk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRUcmFuc2FjdGlvbkNvdW50KGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBjLmdldE51bWJlcikoYXdhaXQgdGhpcy4jWih7IG1ldGhvZDogJ2dldFRyYW5zYWN0aW9uQ291bnQnIH0sIGUsIHQpLCAnJXJlc3BvbnNlJyk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRDb2RlKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBjLmhleGxpZnkpKGF3YWl0IHRoaXMuI1ooeyBtZXRob2Q6ICdnZXRDb2RlJyB9LCBlLCB0KSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRTdG9yYWdlKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgbiA9ICgwLCBjLmdldEJpZ0ludCkodCwgJ3Bvc2l0aW9uJyk7CiAgICAgICAgICAgIHJldHVybiAoMCwgYy5oZXhsaWZ5KShhd2FpdCB0aGlzLiNaKHsgbWV0aG9kOiAnZ2V0U3RvcmFnZScsIHBvc2l0aW9uOiBuIH0sIGUsIHIpKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGJyb2FkY2FzdFRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgewogICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IHQsCiAgICAgICAgICAgICAgICBoYXNoOiByLAogICAgICAgICAgICAgICAgbmV0d29yazogbgogICAgICAgICAgICAgIH0gPSBhd2FpdCAoMCwgYy5yZXNvbHZlUHJvcGVydGllcykoewogICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IHRoaXMuZ2V0QmxvY2tOdW1iZXIoKSwKICAgICAgICAgICAgICAgIGhhc2g6IHRoaXMuX3BlcmZvcm0oeyBtZXRob2Q6ICdicm9hZGNhc3RUcmFuc2FjdGlvbicsIHNpZ25lZFRyYW5zYWN0aW9uOiBlIH0pLAogICAgICAgICAgICAgICAgbmV0d29yazogdGhpcy5nZXROZXR3b3JrKCkKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBzID0gYS5UcmFuc2FjdGlvbi5mcm9tKGUpOwogICAgICAgICAgICBpZiAocy5oYXNoICE9PSByKSB0aHJvdyBuZXcgRXJyb3IoJ0BUT0RPOiB0aGUgcmV0dXJuZWQgaGFzaCBkaWQgbm90IG1hdGNoJyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl93cmFwVHJhbnNhY3Rpb25SZXNwb25zZShzLCBuKS5yZXBsYWNlYWJsZVRyYW5zYWN0aW9uKHQpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgI1goZSwgdCkgewogICAgICAgICAgICBpZiAoKDAsIGMuaXNIZXhTdHJpbmcpKGUsIDMyKSkKICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy4jSCh7IG1ldGhvZDogJ2dldEJsb2NrJywgYmxvY2tIYXNoOiBlLCBpbmNsdWRlVHJhbnNhY3Rpb25zOiB0IH0pOwogICAgICAgICAgICBsZXQgciA9IHRoaXMuX2dldEJsb2NrVGFnKGUpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICdzdHJpbmcnICE9IHR5cGVvZiByICYmIChyID0gYXdhaXQgciksCiAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jSCh7IG1ldGhvZDogJ2dldEJsb2NrJywgYmxvY2tUYWc6IHIsIGluY2x1ZGVUcmFuc2FjdGlvbnM6IHQgfSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldEJsb2NrKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgeyBuZXR3b3JrOiByLCBwYXJhbXM6IG4gfSA9IGF3YWl0ICgwLCBjLnJlc29sdmVQcm9wZXJ0aWVzKSh7CiAgICAgICAgICAgICAgbmV0d29yazogdGhpcy5nZXROZXR3b3JrKCksCiAgICAgICAgICAgICAgcGFyYW1zOiB0aGlzLiNYKGUsICEhdCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5fd3JhcEJsb2NrKG4sIHIpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0VHJhbnNhY3Rpb24oZSkgewogICAgICAgICAgICBjb25zdCB7IG5ldHdvcms6IHQsIHBhcmFtczogciB9ID0gYXdhaXQgKDAsIGMucmVzb2x2ZVByb3BlcnRpZXMpKHsKICAgICAgICAgICAgICBuZXR3b3JrOiB0aGlzLmdldE5ldHdvcmsoKSwKICAgICAgICAgICAgICBwYXJhbXM6IHRoaXMuI0goeyBtZXRob2Q6ICdnZXRUcmFuc2FjdGlvbicsIGhhc2g6IGUgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHIgPyBudWxsIDogdGhpcy5fd3JhcFRyYW5zYWN0aW9uUmVzcG9uc2UociwgdCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRUcmFuc2FjdGlvblJlY2VpcHQoZSkgewogICAgICAgICAgICBjb25zdCB7IG5ldHdvcms6IHQsIHBhcmFtczogciB9ID0gYXdhaXQgKDAsIGMucmVzb2x2ZVByb3BlcnRpZXMpKHsKICAgICAgICAgICAgICBuZXR3b3JrOiB0aGlzLmdldE5ldHdvcmsoKSwKICAgICAgICAgICAgICBwYXJhbXM6IHRoaXMuI0goeyBtZXRob2Q6ICdnZXRUcmFuc2FjdGlvblJlY2VpcHQnLCBoYXNoOiBlIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAobnVsbCA9PSByKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgaWYgKG51bGwgPT0gci5nYXNQcmljZSAmJiBudWxsID09IHIuZWZmZWN0aXZlR2FzUHJpY2UpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy4jSCh7IG1ldGhvZDogJ2dldFRyYW5zYWN0aW9uJywgaGFzaDogZSB9KTsKICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSB0aHJvdyBuZXcgRXJyb3IoJ3JlcG9ydCB0aGlzOyBjb3VsZCBub3QgZmluZCB0eCBvciBlZmZlY3RpdmVHYXNQcmljZScpOwogICAgICAgICAgICAgIHIuZWZmZWN0aXZlR2FzUHJpY2UgPSB0Lmdhc1ByaWNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLl93cmFwVHJhbnNhY3Rpb25SZWNlaXB0KHIsIHQpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0VHJhbnNhY3Rpb25SZXN1bHQoZSkgewogICAgICAgICAgICBjb25zdCB7IHJlc3VsdDogdCB9ID0gYXdhaXQgKDAsIGMucmVzb2x2ZVByb3BlcnRpZXMpKHsKICAgICAgICAgICAgICBuZXR3b3JrOiB0aGlzLmdldE5ldHdvcmsoKSwKICAgICAgICAgICAgICByZXN1bHQ6IHRoaXMuI0goeyBtZXRob2Q6ICdnZXRUcmFuc2FjdGlvblJlc3VsdCcsIGhhc2g6IGUgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHQgPyBudWxsIDogKDAsIGMuaGV4bGlmeSkodCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRMb2dzKGUpIHsKICAgICAgICAgICAgbGV0IHQgPSB0aGlzLl9nZXRGaWx0ZXIoZSk7CiAgICAgICAgICAgIHAodCkgJiYgKHQgPSBhd2FpdCB0KTsKICAgICAgICAgICAgY29uc3QgeyBuZXR3b3JrOiByLCBwYXJhbXM6IG4gfSA9IGF3YWl0ICgwLCBjLnJlc29sdmVQcm9wZXJ0aWVzKSh7CiAgICAgICAgICAgICAgbmV0d29yazogdGhpcy5nZXROZXR3b3JrKCksCiAgICAgICAgICAgICAgcGFyYW1zOiB0aGlzLiNIKHsgbWV0aG9kOiAnZ2V0TG9ncycsIGZpbHRlcjogdCB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG4ubWFwKChlKSA9PiB0aGlzLl93cmFwTG9nKGUsIHIpKTsKICAgICAgICAgIH0KICAgICAgICAgIF9nZXRQcm92aWRlcihlKSB7CiAgICAgICAgICAgICgwLCBjLmFzc2VydCkoITEsICdwcm92aWRlciBjYW5ub3QgY29ubmVjdCB0byB0YXJnZXQgbmV0d29yaycsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnX2dldFByb3ZpZGVyKCknCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0UmVzb2x2ZXIoZSkgewogICAgICAgICAgICByZXR1cm4gYXdhaXQgdS5FbnNSZXNvbHZlci5mcm9tTmFtZSh0aGlzLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldEF2YXRhcihlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLmdldFJlc29sdmVyKGUpOwogICAgICAgICAgICByZXR1cm4gdCA_IGF3YWl0IHQuZ2V0QXZhdGFyKCkgOiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgcmVzb2x2ZU5hbWUoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5nZXRSZXNvbHZlcihlKTsKICAgICAgICAgICAgcmV0dXJuIHQgPyBhd2FpdCB0LmdldEFkZHJlc3MoKSA6IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBsb29rdXBBZGRyZXNzKGUpIHsKICAgICAgICAgICAgZSA9ICgwLCBuLmdldEFkZHJlc3MpKGUpOwogICAgICAgICAgICBjb25zdCB0ID0gKDAsIGkubmFtZWhhc2gpKGUuc3Vic3RyaW5nKDIpLnRvTG93ZXJDYXNlKCkgKyAnLmFkZHIucmV2ZXJzZScpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB1LkVuc1Jlc29sdmVyLmdldEVuc0FkZHJlc3ModGhpcyksCiAgICAgICAgICAgICAgICBuID0gbmV3IG8uQ29udHJhY3QociwgWydmdW5jdGlvbiByZXNvbHZlcihieXRlczMyKSB2aWV3IHJldHVybnMgKGFkZHJlc3MpJ10sIHRoaXMpLAogICAgICAgICAgICAgICAgaSA9IGF3YWl0IG4ucmVzb2x2ZXIodCk7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT0gaSB8fCBpID09PSBzLlplcm9BZGRyZXNzKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICBjb25zdCBhID0gbmV3IG8uQ29udHJhY3QoaSwgWydmdW5jdGlvbiBuYW1lKGJ5dGVzMzIpIHZpZXcgcmV0dXJucyAoc3RyaW5nKSddLCB0aGlzKSwKICAgICAgICAgICAgICAgIGMgPSBhd2FpdCBhLm5hbWUodCk7CiAgICAgICAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLnJlc29sdmVOYW1lKGMpKSAhPT0gZSA_IG51bGwgOiBjOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgaWYgKCgwLCBjLmlzRXJyb3IpKGUsICdCQURfREFUQScpICYmICcweCcgPT09IGUudmFsdWUpIHJldHVybiBudWxsOwogICAgICAgICAgICAgIGlmICgoMCwgYy5pc0Vycm9yKShlLCAnQ0FMTF9FWENFUFRJT04nKSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHdhaXRGb3JUcmFuc2FjdGlvbihlLCB0LCByKSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9IHQgPyB0IDogMTsKICAgICAgICAgICAgcmV0dXJuIDAgPT09IG4KICAgICAgICAgICAgICA_IHRoaXMuZ2V0VHJhbnNhY3Rpb25SZWNlaXB0KGUpCiAgICAgICAgICAgICAgOiBuZXcgUHJvbWlzZShhc3luYyAodCwgcykgPT4gewogICAgICAgICAgICAgICAgICBsZXQgbyA9IG51bGw7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBhc3luYyAocikgPT4gewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgdGhpcy5nZXRUcmFuc2FjdGlvblJlY2VpcHQoZSk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBzICYmIHIgLSBzLmJsb2NrTnVtYmVyICsgMSA-PSBuKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdChzKSwgdm9pZCAobyAmJiAoY2xlYXJUaW1lb3V0KG8pLCAobyA9IG51bGwpKSk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VFRScsIGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLm9uY2UoJ2Jsb2NrJywgaSk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgIG51bGwgIT0gciAmJgogICAgICAgICAgICAgICAgICAgIChvID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IG8gJiYKICAgICAgICAgICAgICAgICAgICAgICAgKChvID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2ZmKCdibG9jaycsIGkpLAogICAgICAgICAgICAgICAgICAgICAgICBzKCgwLCBjLm1ha2VFcnJvcikoJ3RpbWVvdXQnLCAnVElNRU9VVCcsIHsgcmVhc29uOiAndGltZW91dCcgfSkpKTsKICAgICAgICAgICAgICAgICAgICB9LCByKSksCiAgICAgICAgICAgICAgICAgICAgaShhd2FpdCB0aGlzLmdldEJsb2NrTnVtYmVyKCkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyB3YWl0Rm9yQmxvY2soZSkgewogICAgICAgICAgICAoMCwgYy5hc3NlcnQpKCExLCAnbm90IGltcGxlbWVudGVkIHlldCcsICdOT1RfSU1QTEVNRU5URUQnLCB7IG9wZXJhdGlvbjogJ3dhaXRGb3JCbG9jaycgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBfY2xlYXJUaW1lb3V0KGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuI0cuZ2V0KGUpOwogICAgICAgICAgICB0ICYmICh0LnRpbWVyICYmIGNsZWFyVGltZW91dCh0LnRpbWVyKSwgdGhpcy4jRy5kZWxldGUoZSkpOwogICAgICAgICAgfQogICAgICAgICAgX3NldFRpbWVvdXQoZSwgdCkgewogICAgICAgICAgICBudWxsID09IHQgJiYgKHQgPSAwKTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuI18rKywKICAgICAgICAgICAgICBuID0gKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4jRy5kZWxldGUociksIGUoKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAodGhpcy5wYXVzZWQpIHRoaXMuI0cuc2V0KHIsIHsgdGltZXI6IG51bGwsIGZ1bmM6IG4sIHRpbWU6IHQgfSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGNvbnN0IGUgPSBzZXRUaW1lb3V0KG4sIHQpOwogICAgICAgICAgICAgIHRoaXMuI0cuc2V0KHIsIHsgdGltZXI6IGUsIGZ1bmM6IG4sIHRpbWU6IHYoKSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgIH0KICAgICAgICAgIF9mb3JFYWNoU3Vic2NyaWJlcihlKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLiNrLnZhbHVlcygpKSBlKHQuc3Vic2NyaWJlcik7CiAgICAgICAgICB9CiAgICAgICAgICBfZ2V0U3Vic2NyaWJlcihlKSB7CiAgICAgICAgICAgIHN3aXRjaCAoZS50eXBlKSB7CiAgICAgICAgICAgICAgY2FzZSAnZGVidWcnOgogICAgICAgICAgICAgIGNhc2UgJ2Vycm9yJzoKICAgICAgICAgICAgICBjYXNlICduZXR3b3JrJzoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYihlLnR5cGUpOwogICAgICAgICAgICAgIGNhc2UgJ2Jsb2NrJzogewogICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBoLlBvbGxpbmdCbG9ja1N1YnNjcmliZXIodGhpcyk7CiAgICAgICAgICAgICAgICByZXR1cm4gKGUucG9sbGluZ0ludGVydmFsID0gdGhpcy5wb2xsaW5nSW50ZXJ2YWwpLCBlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjYXNlICdzYWZlJzoKICAgICAgICAgICAgICBjYXNlICdmaW5hbGl6ZWQnOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBoLlBvbGxpbmdCbG9ja1RhZ1N1YnNjcmliZXIodGhpcywgZS50eXBlKTsKICAgICAgICAgICAgICBjYXNlICdldmVudCc6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGguUG9sbGluZ0V2ZW50U3Vic2NyaWJlcih0aGlzLCBlLmZpbHRlcik7CiAgICAgICAgICAgICAgY2FzZSAndHJhbnNhY3Rpb24nOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBoLlBvbGxpbmdUcmFuc2FjdGlvblN1YnNjcmliZXIodGhpcywgZS5oYXNoKTsKICAgICAgICAgICAgICBjYXNlICdvcnBoYW4nOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBoLlBvbGxpbmdPcnBoYW5TdWJzY3JpYmVyKHRoaXMsIGUuZmlsdGVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHVuc3VwcG9ydGVkIGV2ZW50OiAke2UudHlwZX1gKTsKICAgICAgICAgIH0KICAgICAgICAgIF9yZWNvdmVyU3Vic2NyaWJlcihlLCB0KSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLiNrLnZhbHVlcygpKQogICAgICAgICAgICAgIGlmIChyLnN1YnNjcmliZXIgPT09IGUpIHsKICAgICAgICAgICAgICAgIHIuc3RhcnRlZCAmJiByLnN1YnNjcmliZXIuc3RvcCgpLAogICAgICAgICAgICAgICAgICAoci5zdWJzY3JpYmVyID0gdCksCiAgICAgICAgICAgICAgICAgIHIuc3RhcnRlZCAmJiB0LnN0YXJ0KCksCiAgICAgICAgICAgICAgICAgIG51bGwgIT0gdGhpcy4jRiAmJiB0LnBhdXNlKHRoaXMuI0YpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgI3ooZSwgdCkgewogICAgICAgICAgICBsZXQgciA9IGF3YWl0IEEoZSwgdGhpcyk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgJ2V2ZW50JyA9PT0gci50eXBlICYmCiAgICAgICAgICAgICAgICB0ICYmCiAgICAgICAgICAgICAgICB0Lmxlbmd0aCA-IDAgJiYKICAgICAgICAgICAgICAgICEwID09PSB0WzBdLnJlbW92ZWQgJiYKICAgICAgICAgICAgICAgIChyID0gYXdhaXQgQSh7IG9ycGhhbjogJ2Ryb3AtbG9nJywgbG9nOiB0WzBdIH0sIHRoaXMpKSwKICAgICAgICAgICAgICB0aGlzLiNrLmdldChyLnRhZykgfHwgbnVsbAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgI0soZSkgewogICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgQShlLCB0aGlzKSwKICAgICAgICAgICAgICByID0gdC50YWc7CiAgICAgICAgICAgIGxldCBuID0gdGhpcy4jay5nZXQocik7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgbiB8fAogICAgICAgICAgICAgICAgKChuID0gewogICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyOiB0aGlzLl9nZXRTdWJzY3JpYmVyKHQpLAogICAgICAgICAgICAgICAgICB0YWc6IHIsCiAgICAgICAgICAgICAgICAgIGFkZHJlc3NhYmxlTWFwOiBuZXcgV2Vha01hcCgpLAogICAgICAgICAgICAgICAgICBuYW1lTWFwOiBuZXcgTWFwKCksCiAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQ6ICExLAogICAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IFtdCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMuI2suc2V0KHIsIG4pKSwKICAgICAgICAgICAgICBuCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBvbihlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLiNLKGUpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIHIubGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lcjogdCwgb25jZTogITEgfSksCiAgICAgICAgICAgICAgci5zdGFydGVkIHx8IChyLnN1YnNjcmliZXIuc3RhcnQoKSwgKHIuc3RhcnRlZCA9ICEwKSwgbnVsbCAhPSB0aGlzLiNGICYmIHIuc3Vic2NyaWJlci5wYXVzZSh0aGlzLiNGKSksCiAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgb25jZShlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLiNLKGUpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIHIubGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lcjogdCwgb25jZTogITAgfSksCiAgICAgICAgICAgICAgci5zdGFydGVkIHx8IChyLnN1YnNjcmliZXIuc3RhcnQoKSwgKHIuc3RhcnRlZCA9ICEwKSwgbnVsbCAhPSB0aGlzLiNGICYmIHIuc3Vic2NyaWJlci5wYXVzZSh0aGlzLiNGKSksCiAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZW1pdChlLCAuLi50KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLiN6KGUsIHQpOwogICAgICAgICAgICBpZiAoIXIgfHwgMCA9PT0gci5saXN0ZW5lcnMubGVuZ3RoKSByZXR1cm4gITE7CiAgICAgICAgICAgIGNvbnN0IG4gPSByLmxpc3RlbmVycy5sZW5ndGg7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKHIubGlzdGVuZXJzID0gci5saXN0ZW5lcnMuZmlsdGVyKCh7IGxpc3RlbmVyOiByLCBvbmNlOiBuIH0pID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgYy5FdmVudFBheWxvYWQodGhpcywgbiA_IG51bGwgOiByLCBlKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIHIuY2FsbCh0aGlzLCAuLi50LCBzKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICByZXR1cm4gIW47CiAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgIDAgPT09IHIubGlzdGVuZXJzLmxlbmd0aCAmJiAoci5zdGFydGVkICYmIHIuc3Vic2NyaWJlci5zdG9wKCksIHRoaXMuI2suZGVsZXRlKHIudGFnKSksCiAgICAgICAgICAgICAgbiA-IDAKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGxpc3RlbmVyQ291bnQoZSkgewogICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLiN6KGUpOwogICAgICAgICAgICAgIHJldHVybiB0ID8gdC5saXN0ZW5lcnMubGVuZ3RoIDogMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdCA9IDA7CiAgICAgICAgICAgIGZvciAoY29uc3QgeyBsaXN0ZW5lcnM6IGUgfSBvZiB0aGlzLiNrLnZhbHVlcygpKSB0ICs9IGUubGVuZ3RoOwogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGxpc3RlbmVycyhlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuI3ooZSk7CiAgICAgICAgICAgICAgcmV0dXJuIHQgPyB0Lmxpc3RlbmVycy5tYXAoKHsgbGlzdGVuZXI6IGUgfSkgPT4gZSkgOiBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdCA9IFtdOwogICAgICAgICAgICBmb3IgKGNvbnN0IHsgbGlzdGVuZXJzOiBlIH0gb2YgdGhpcy4jay52YWx1ZXMoKSkgdCA9IHQuY29uY2F0KGUubWFwKCh7IGxpc3RlbmVyOiBlIH0pID0-IGUpKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBvZmYoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gYXdhaXQgdGhpcy4jeihlKTsKICAgICAgICAgICAgaWYgKCFyKSByZXR1cm4gdGhpczsKICAgICAgICAgICAgaWYgKHQpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gci5saXN0ZW5lcnMubWFwKCh7IGxpc3RlbmVyOiBlIH0pID0-IGUpLmluZGV4T2YodCk7CiAgICAgICAgICAgICAgZSA-PSAwICYmIHIubGlzdGVuZXJzLnNwbGljZShlLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKHQgJiYgMCAhPT0gci5saXN0ZW5lcnMubGVuZ3RoKSB8fCAoci5zdGFydGVkICYmIHIuc3Vic2NyaWJlci5zdG9wKCksIHRoaXMuI2suZGVsZXRlKHIudGFnKSksIHRoaXM7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyByZW1vdmVBbGxMaXN0ZW5lcnMoZSkgewogICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgIGNvbnN0IHsgdGFnOiB0LCBzdGFydGVkOiByLCBzdWJzY3JpYmVyOiBuIH0gPSBhd2FpdCB0aGlzLiNLKGUpOwogICAgICAgICAgICAgIHIgJiYgbi5zdG9wKCksIHRoaXMuI2suZGVsZXRlKHQpOwogICAgICAgICAgICB9IGVsc2UgZm9yIChjb25zdCBbZSwgeyBzdGFydGVkOiB0LCBzdWJzY3JpYmVyOiByIH1dIG9mIHRoaXMuI2spIHQgJiYgci5zdG9wKCksIHRoaXMuI2suZGVsZXRlKGUpOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGFkZExpc3RlbmVyKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMub24oZSwgdCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyByZW1vdmVMaXN0ZW5lcihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZihlLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBkZXN0cm95ZWQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNNOwogICAgICAgICAgfQogICAgICAgICAgZGVzdHJveSgpIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTsKICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuI0cua2V5cygpKSB0aGlzLl9jbGVhclRpbWVvdXQoZSk7CiAgICAgICAgICAgIHRoaXMuI00gPSAhMDsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwYXVzZWQoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuI0Y7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgcGF1c2VkKGUpIHsKICAgICAgICAgICAgISFlICE9PSB0aGlzLnBhdXNlZCAmJiAodGhpcy5wYXVzZWQgPyB0aGlzLnJlc3VtZSgpIDogdGhpcy5wYXVzZSghMSkpOwogICAgICAgICAgfQogICAgICAgICAgcGF1c2UoZSkgewogICAgICAgICAgICBpZiAoKCh0aGlzLiN4ID0gLTEpLCBudWxsICE9IHRoaXMuI0YpKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuI0YgPT0gISFlKSByZXR1cm47CiAgICAgICAgICAgICAgKDAsIGMuYXNzZXJ0KSghMSwgJ2Nhbm5vdCBjaGFuZ2UgcGF1c2UgdHlwZTsgcmVzdW1lIGZpcnN0JywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3BhdXNlJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX2ZvckVhY2hTdWJzY3JpYmVyKCh0KSA9PiB0LnBhdXNlKGUpKSwgKHRoaXMuI0YgPSAhIWUpOwogICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy4jRy52YWx1ZXMoKSkgZS50aW1lciAmJiBjbGVhclRpbWVvdXQoZS50aW1lciksIChlLnRpbWUgPSB2KCkgLSBlLnRpbWUpOwogICAgICAgICAgfQogICAgICAgICAgcmVzdW1lKCkgewogICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLiNGKSB7CiAgICAgICAgICAgICAgdGhpcy5fZm9yRWFjaFN1YnNjcmliZXIoKGUpID0-IGUucmVzdW1lKCkpLCAodGhpcy4jRiA9IG51bGwpOwogICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLiNHLnZhbHVlcygpKSB7CiAgICAgICAgICAgICAgICBsZXQgdCA9IGUudGltZTsKICAgICAgICAgICAgICAgIHQgPCAwICYmICh0ID0gMCksIChlLnRpbWUgPSB2KCkpLCBzZXRUaW1lb3V0KGUuZnVuYywgdCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBjb25zdCBPID0gbmV3IFVpbnQ4QXJyYXkoW10pOwogICAgICAgIGZ1bmN0aW9uIFIoZSkgewogICAgICAgICAgY29uc3QgdCA9IFtdOwogICAgICAgICAgbGV0IHIgPSAwOwogICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB0LnB1c2goTyksIChyICs9IDMyKTsKICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgewogICAgICAgICAgICBjb25zdCBzID0gKDAsIGMuZ2V0Qnl0ZXMpKGVbbl0pOwogICAgICAgICAgICAodFtuXSA9IFAocikpLCB0LnB1c2goUChzLmxlbmd0aCkpLCB0LnB1c2goUyhzKSksIChyICs9IDMyICsgMzIgKiBNYXRoLmNlaWwocy5sZW5ndGggLyAzMikpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICgwLCBjLmNvbmNhdCkodCk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IE4gPSAnMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwJzsKICAgICAgfSwKICAgICAgOTUyOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5Wb2lkU2lnbmVyID0gdC5BYnN0cmFjdFNpZ25lciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzY4MCksCiAgICAgICAgICBzID0gcigxMTI0KSwKICAgICAgICAgIG8gPSByKDUzMTYpLAogICAgICAgICAgaSA9IHIoNjk5Mik7CiAgICAgICAgZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgICAgICBpZiAoZS5wcm92aWRlcikgcmV0dXJuIGUucHJvdmlkZXI7CiAgICAgICAgICAoMCwgby5hc3NlcnQpKCExLCAnbWlzc2luZyBwcm92aWRlcicsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7IG9wZXJhdGlvbjogdCB9KTsKICAgICAgICB9CiAgICAgICAgYXN5bmMgZnVuY3Rpb24gYyhlLCB0KSB7CiAgICAgICAgICBsZXQgciA9ICgwLCBpLmNvcHlSZXF1ZXN0KSh0KTsKICAgICAgICAgIGlmICgobnVsbCAhPSByLnRvICYmIChyLnRvID0gKDAsIG4ucmVzb2x2ZUFkZHJlc3MpKHIudG8sIGUpKSwgbnVsbCAhPSByLmZyb20pKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSByLmZyb207CiAgICAgICAgICAgIHIuZnJvbSA9IFByb21pc2UuYWxsKFtlLmdldEFkZHJlc3MoKSwgKDAsIG4ucmVzb2x2ZUFkZHJlc3MpKHQsIGUpXSkudGhlbigKICAgICAgICAgICAgICAoW2UsIHRdKSA9PiAoCiAgICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkoZS50b0xvd2VyQ2FzZSgpID09PSB0LnRvTG93ZXJDYXNlKCksICd0cmFuc2FjdGlvbiBmcm9tIG1pc21hdGNoJywgJ3R4LmZyb20nLCB0KSwgZQogICAgICAgICAgICAgICkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0gZWxzZSByLmZyb20gPSBlLmdldEFkZHJlc3MoKTsKICAgICAgICAgIHJldHVybiBhd2FpdCAoMCwgby5yZXNvbHZlUHJvcGVydGllcykocik7CiAgICAgICAgfQogICAgICAgIGNsYXNzIHUgewogICAgICAgICAgcHJvdmlkZXI7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgICgwLCBvLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgcHJvdmlkZXI6IGUgfHwgbnVsbCB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldE5vbmNlKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGEodGhpcywgJ2dldFRyYW5zYWN0aW9uQ291bnQnKS5nZXRUcmFuc2FjdGlvbkNvdW50KGF3YWl0IHRoaXMuZ2V0QWRkcmVzcygpLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHBvcHVsYXRlQ2FsbChlKSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCBjKHRoaXMsIGUpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgcG9wdWxhdGVUcmFuc2FjdGlvbihlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBhKHRoaXMsICdwb3B1bGF0ZVRyYW5zYWN0aW9uJyksCiAgICAgICAgICAgICAgciA9IGF3YWl0IGModGhpcywgZSk7CiAgICAgICAgICAgIG51bGwgPT0gci5ub25jZSAmJiAoci5ub25jZSA9IGF3YWl0IHRoaXMuZ2V0Tm9uY2UoJ3BlbmRpbmcnKSksCiAgICAgICAgICAgICAgbnVsbCA9PSByLmdhc0xpbWl0ICYmIChyLmdhc0xpbWl0ID0gYXdhaXQgdGhpcy5lc3RpbWF0ZUdhcyhyKSk7CiAgICAgICAgICAgIGNvbnN0IG4gPSBhd2FpdCB0aGlzLnByb3ZpZGVyLmdldE5ldHdvcmsoKTsKICAgICAgICAgICAgaWYgKG51bGwgIT0gci5jaGFpbklkKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBvLmdldEJpZ0ludCkoci5jaGFpbklkKTsKICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkodCA9PT0gbi5jaGFpbklkLCAndHJhbnNhY3Rpb24gY2hhaW5JZCBtaXNtYXRjaCcsICd0eC5jaGFpbklkJywgZS5jaGFpbklkKTsKICAgICAgICAgICAgfSBlbHNlIHIuY2hhaW5JZCA9IG4uY2hhaW5JZDsKICAgICAgICAgICAgY29uc3QgcyA9IG51bGwgIT0gci5tYXhGZWVQZXJHYXMgfHwgbnVsbCAhPSByLm1heFByaW9yaXR5RmVlUGVyR2FzOwogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgKG51bGwgPT0gci5nYXNQcmljZSB8fCAoMiAhPT0gci50eXBlICYmICFzKQogICAgICAgICAgICAgICAgPyAoMCAhPT0gci50eXBlICYmIDEgIT09IHIudHlwZSkgfHwKICAgICAgICAgICAgICAgICAgIXMgfHwKICAgICAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICAgICExLAogICAgICAgICAgICAgICAgICAgICdwcmUtZWlwLTE1NTkgdHJhbnNhY3Rpb24gZG8gbm90IHN1cHBvcnQgbWF4RmVlUGVyR2FzL21heFByaW9yaXR5RmVlUGVyR2FzJywKICAgICAgICAgICAgICAgICAgICAndHgnLAogICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgOiAoMCwgby5hc3NlcnRBcmd1bWVudCkoITEsICdlaXAtMTU1OSB0cmFuc2FjdGlvbiBkbyBub3Qgc3VwcG9ydCBnYXNQcmljZScsICd0eCcsIGUpLAogICAgICAgICAgICAgICgyICE9PSByLnR5cGUgJiYgbnVsbCAhPSByLnR5cGUpIHx8IG51bGwgPT0gci5tYXhGZWVQZXJHYXMgfHwgbnVsbCA9PSByLm1heFByaW9yaXR5RmVlUGVyR2FzKQogICAgICAgICAgICApCiAgICAgICAgICAgICAgaWYgKDAgPT09IHIudHlwZSB8fCAxID09PSByLnR5cGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0LmdldEZlZURhdGEoKTsKICAgICAgICAgICAgICAgICgwLCBvLmFzc2VydCkobnVsbCAhPSBlLmdhc1ByaWNlLCAnbmV0d29yayBkb2VzIG5vdCBzdXBwb3J0IGdhc1ByaWNlJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnZ2V0R2FzUHJpY2UnCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgbnVsbCA9PSByLmdhc1ByaWNlICYmIChyLmdhc1ByaWNlID0gZS5nYXNQcmljZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0LmdldEZlZURhdGEoKTsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IHIudHlwZSkKICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gZS5tYXhGZWVQZXJHYXMgJiYgbnVsbCAhPSBlLm1heFByaW9yaXR5RmVlUGVyR2FzKQogICAgICAgICAgICAgICAgICAgIGlmICgoKHIudHlwZSA9IDIpLCBudWxsICE9IHIuZ2FzUHJpY2UpKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gci5nYXNQcmljZTsKICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByLmdhc1ByaWNlLCAoci5tYXhGZWVQZXJHYXMgPSBlKSwgKHIubWF4UHJpb3JpdHlGZWVQZXJHYXMgPSBlKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gci5tYXhGZWVQZXJHYXMgJiYgKHIubWF4RmVlUGVyR2FzID0gZS5tYXhGZWVQZXJHYXMpLAogICAgICAgICAgICAgICAgICAgICAgICBudWxsID09IHIubWF4UHJpb3JpdHlGZWVQZXJHYXMgJiYgKHIubWF4UHJpb3JpdHlGZWVQZXJHYXMgPSBlLm1heFByaW9yaXR5RmVlUGVyR2FzKTsKICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIG51bGwgIT0gZS5nYXNQcmljZQogICAgICAgICAgICAgICAgICAgICAgPyAoKDAsIG8uYXNzZXJ0KSghcywgJ25ldHdvcmsgZG9lcyBub3Qgc3VwcG9ydCBFSVAtMTU1OScsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAncG9wdWxhdGVUcmFuc2FjdGlvbicKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT0gci5nYXNQcmljZSAmJiAoci5nYXNQcmljZSA9IGUuZ2FzUHJpY2UpLAogICAgICAgICAgICAgICAgICAgICAgICAoci50eXBlID0gMCkpCiAgICAgICAgICAgICAgICAgICAgICA6ICgwLCBvLmFzc2VydCkoITEsICdmYWlsZWQgdG8gZ2V0IGNvbnNpc3RlbnQgZmVlIGRhdGEnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3NpZ25lci5nZXRGZWVEYXRhJwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgMiA9PT0gci50eXBlICYmCiAgICAgICAgICAgICAgICAgICAgKG51bGwgPT0gci5tYXhGZWVQZXJHYXMgJiYgKHIubWF4RmVlUGVyR2FzID0gZS5tYXhGZWVQZXJHYXMpLAogICAgICAgICAgICAgICAgICAgIG51bGwgPT0gci5tYXhQcmlvcml0eUZlZVBlckdhcyAmJiAoci5tYXhQcmlvcml0eUZlZVBlckdhcyA9IGUubWF4UHJpb3JpdHlGZWVQZXJHYXMpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2Ugci50eXBlID0gMjsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0ICgwLCBvLnJlc29sdmVQcm9wZXJ0aWVzKShyKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGVzdGltYXRlR2FzKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGEodGhpcywgJ2VzdGltYXRlR2FzJykuZXN0aW1hdGVHYXMoYXdhaXQgdGhpcy5wb3B1bGF0ZUNhbGwoZSkpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgY2FsbChlKSB7CiAgICAgICAgICAgIHJldHVybiBhKHRoaXMsICdjYWxsJykuY2FsbChhd2FpdCB0aGlzLnBvcHVsYXRlQ2FsbChlKSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyByZXNvbHZlTmFtZShlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBhKHRoaXMsICdyZXNvbHZlTmFtZScpOwogICAgICAgICAgICByZXR1cm4gYXdhaXQgdC5yZXNvbHZlTmFtZShlKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHNlbmRUcmFuc2FjdGlvbihlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBhKHRoaXMsICdzZW5kVHJhbnNhY3Rpb24nKSwKICAgICAgICAgICAgICByID0gYXdhaXQgdGhpcy5wb3B1bGF0ZVRyYW5zYWN0aW9uKGUpOwogICAgICAgICAgICBkZWxldGUgci5mcm9tOwogICAgICAgICAgICBjb25zdCBuID0gcy5UcmFuc2FjdGlvbi5mcm9tKHIpOwogICAgICAgICAgICByZXR1cm4gYXdhaXQgdC5icm9hZGNhc3RUcmFuc2FjdGlvbihhd2FpdCB0aGlzLnNpZ25UcmFuc2FjdGlvbihuKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuQWJzdHJhY3RTaWduZXIgPSB1OwogICAgICAgIGNsYXNzIGwgZXh0ZW5kcyB1IHsKICAgICAgICAgIGFkZHJlc3M7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIHN1cGVyKHQpLCAoMCwgby5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGFkZHJlc3M6IGUgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRBZGRyZXNzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5hZGRyZXNzOwogICAgICAgICAgfQogICAgICAgICAgY29ubmVjdChlKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgbCh0aGlzLmFkZHJlc3MsIGUpOwogICAgICAgICAgfQogICAgICAgICAgIyQoZSwgdCkgewogICAgICAgICAgICAoMCwgby5hc3NlcnQpKCExLCBgVm9pZFNpZ25lciBjYW5ub3Qgc2lnbiAke2V9YCwgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsgb3BlcmF0aW9uOiB0IH0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgc2lnblRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgdGhpcy4jJCgndHJhbnNhY3Rpb25zJywgJ3NpZ25UcmFuc2FjdGlvbicpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgc2lnbk1lc3NhZ2UoZSkgewogICAgICAgICAgICB0aGlzLiMkKCdtZXNzYWdlcycsICdzaWduTWVzc2FnZScpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgc2lnblR5cGVkRGF0YShlLCB0LCByKSB7CiAgICAgICAgICAgIHRoaXMuIyQoJ3R5cGVkLWRhdGEnLCAnc2lnblR5cGVkRGF0YScpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LlZvaWRTaWduZXIgPSBsOwogICAgICB9LAogICAgICAzODAwOiAoZSwgdCkgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5zaG93VGhyb3R0bGVNZXNzYWdlID0gdm9pZCAwKTsKICAgICAgICBjb25zdCByID0gbmV3IFNldCgpOwogICAgICAgIHQuc2hvd1Rocm90dGxlTWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByLmhhcyhlKSB8fAogICAgICAgICAgICAoci5hZGQoZSksCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT0gTk9USUNFID09PT09PT09PScpLAogICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVxdWVzdC1SYXRlIEV4Y2VlZGVkIGZvciAke2V9ICh0aGlzIG1lc3NhZ2Ugd2lsbCBub3QgYmUgcmVwZWF0ZWQpYCksCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCcnKSwKICAgICAgICAgICAgY29uc29sZS5sb2coJ1RoZSBkZWZhdWx0IEFQSSBrZXlzIGZvciBlYWNoIHNlcnZpY2UgYXJlIHByb3ZpZGVkIGFzIGEgaGlnaGx5LXRocm90dGxlZCwnKSwKICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbW11bml0eSByZXNvdXJjZSBmb3IgbG93LXRyYWZmaWMgcHJvamVjdHMgYW5kIGVhcmx5IHByb3RvdHlwaW5nLicpLAogICAgICAgICAgICBjb25zb2xlLmxvZygnJyksCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXaGlsZSB5b3VyIGFwcGxpY2F0aW9uIHdpbGwgY29udGludWUgdG8gZnVuY3Rpb24sIHdlIGhpZ2hseSByZWNvbW1lbmRlZCcpLAogICAgICAgICAgICBjb25zb2xlLmxvZygnc2lnbmluZyB1cCBmb3IgeW91ciBvd24gQVBJIGtleXMgdG8gaW1wcm92ZSBwZXJmb3JtYW5jZSwgaW5jcmVhc2UgeW91cicpLAogICAgICAgICAgICBjb25zb2xlLmxvZygncmVxdWVzdCByYXRlL2xpbWl0IGFuZCBlbmFibGUgb3RoZXIgcGVya3MsIHN1Y2ggYXMgbWV0cmljcyBhbmQgYWR2YW5jZWQgQVBJcy4nKSwKICAgICAgICAgICAgY29uc29sZS5sb2coJycpLAogICAgICAgICAgICBjb25zb2xlLmxvZygnRm9yIG1vcmUgZGV0YWlsczogaHR0cHM6Ly9kb2NzLmV0aGVycy5vcmcvYXBpLWtleXMvJyksCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PScpKTsKICAgICAgICB9OwogICAgICB9LAogICAgICA5ODg4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5nZXREZWZhdWx0UHJvdmlkZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoNDUyMCksCiAgICAgICAgICBvID0gcig5MDI0KSwKICAgICAgICAgIGkgPSByKDUxOTYpLAogICAgICAgICAgYSA9IHIoNTQwMCksCiAgICAgICAgICBjID0gcigyMjkyKSwKICAgICAgICAgIHUgPSByKDUyNDQpLAogICAgICAgICAgbCA9IHIoMTYxMiksCiAgICAgICAgICBkID0gcig5NTI4KSwKICAgICAgICAgIGYgPSByKDExMDQpLAogICAgICAgICAgaCA9IHIoMzYzMiksCiAgICAgICAgICBnID0gJ2dvZXJsaSBrb3ZhbiBzZXBvbGlhIGNsYXNzaWNLb3R0aSBvcHRpbWlzbS1nb2VybGkgYXJiaXRydW0tZ29lcmxpIG1hdGljLW11bWJhaSBibmJ0Jy5zcGxpdCgnICcpOwogICAgICAgIHQuZ2V0RGVmYXVsdFByb3ZpZGVyID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIG51bGwgPT0gdCAmJiAodCA9IHt9KTsKICAgICAgICAgIGNvbnN0IHIgPSAoZSkgPT4KICAgICAgICAgICAgJy0nICE9PSB0W2VdICYmCiAgICAgICAgICAgICgnc3RyaW5nJyA9PSB0eXBlb2YgdC5leGNsdXNpdmUKICAgICAgICAgICAgICA_IGUgPT09IHQuZXhjbHVzaXZlCiAgICAgICAgICAgICAgOiAhQXJyYXkuaXNBcnJheSh0LmV4Y2x1c2l2ZSkgfHwgLTEgIT09IHQuZXhjbHVzaXZlLmluZGV4T2YoZSkpOwogICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlICYmIGUubWF0Y2goL15odHRwcz86LykpIHJldHVybiBuZXcgZC5Kc29uUnBjUHJvdmlkZXIoZSk7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgICgnc3RyaW5nJyA9PSB0eXBlb2YgZSAmJiBlLm1hdGNoKC9ed3NzPzovKSkgfHwKICAgICAgICAgICAgKChwID0gZSkgJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgcC5zZW5kICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIHAuY2xvc2UpCiAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiBuZXcgaC5XZWJTb2NrZXRQcm92aWRlcihlKTsKICAgICAgICAgIHZhciBwOwogICAgICAgICAgbGV0IG0gPSBudWxsOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbSA9IGYuTmV0d29yay5mcm9tKGUpOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIGNvbnN0IGIgPSBbXTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgKHIoJ3B1YmxpY1BvbHlnb24nKSAmJgogICAgICAgICAgICAgIG0gJiYKICAgICAgICAgICAgICAnbWF0aWMnID09PSBtLm5hbWUgJiYKICAgICAgICAgICAgICBiLnB1c2gobmV3IGQuSnNvblJwY1Byb3ZpZGVyKCdodHRwczovL3BvbHlnb24tcnBjLmNvbS8nLCBtLCB7IHN0YXRpY05ldHdvcms6IG0gfSkpLAogICAgICAgICAgICByKCdhbGNoZW15JykpCiAgICAgICAgICApCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYi5wdXNoKG5ldyBvLkFsY2hlbXlQcm92aWRlcihlLCB0LmFsY2hlbXkpKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIGlmIChyKCdhbmtyJykgJiYgbnVsbCAhPSB0LmFua3IpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYi5wdXNoKG5ldyBzLkFua3JQcm92aWRlcihlLCB0LmFua3IpKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIGlmIChyKCdjbG91ZGZsYXJlJykpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYi5wdXNoKG5ldyBpLkNsb3VkZmxhcmVQcm92aWRlcihlKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICBpZiAocignZXRoZXJzY2FuJykpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgYi5wdXNoKG5ldyBhLkV0aGVyc2NhblByb3ZpZGVyKGUsIHQuZXRoZXJzY2FuKSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICBpZiAocignaW5mdXJhJykpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgbGV0IHIsCiAgICAgICAgICAgICAgICBuID0gdC5pbmZ1cmE7CiAgICAgICAgICAgICAgJ29iamVjdCcgPT0gdHlwZW9mIG4gJiYgKChyID0gbi5wcm9qZWN0U2VjcmV0KSwgKG4gPSBuLnByb2plY3RJZCkpLCBiLnB1c2gobmV3IGMuSW5mdXJhUHJvdmlkZXIoZSwgbiwgcikpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgaWYgKHIoJ3F1aWNrbm9kZScpKQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGxldCByID0gdC5xdWlja25vZGU7CiAgICAgICAgICAgICAgYi5wdXNoKG5ldyB1LlF1aWNrTm9kZVByb3ZpZGVyKGUsIHIpKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIGlmICgKICAgICAgICAgICAgKCgwLCBuLmFzc2VydCkoYi5sZW5ndGgsICd1bnN1cHBvcnRlZCBkZWZhdWx0IG5ldHdvcmsnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2dldERlZmF1bHRQcm92aWRlcicKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIDEgPT09IGIubGVuZ3RoKQogICAgICAgICAgKQogICAgICAgICAgICByZXR1cm4gYlswXTsKICAgICAgICAgIGxldCB5ID0gTWF0aC5mbG9vcihiLmxlbmd0aCAvIDIpOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgeSA-IDIgJiYgKHkgPSAyKSwKICAgICAgICAgICAgbSAmJiAtMSAhPT0gZy5pbmRleE9mKG0ubmFtZSkgJiYgKHkgPSAxKSwKICAgICAgICAgICAgdCAmJiB0LnF1b3J1bSAmJiAoeSA9IHQucXVvcnVtKSwKICAgICAgICAgICAgbmV3IGwuRmFsbGJhY2tQcm92aWRlcihiLCB2b2lkIDAsIHsgcXVvcnVtOiB5IH0pCiAgICAgICAgICApOwogICAgICAgIH07CiAgICAgIH0sCiAgICAgIDE2NzI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5FbnNSZXNvbHZlciA9IHQuQmFzaWNNdWx0aWNvaW5Qcm92aWRlclBsdWdpbiA9IHQuTXVsdGljb2luUHJvdmlkZXJQbHVnaW4gPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDM2ODApLAogICAgICAgICAgcyA9IHIoNTUxNiksCiAgICAgICAgICBvID0gcig5NTIwKSwKICAgICAgICAgIGkgPSByKDY4OTYpLAogICAgICAgICAgYSA9IHIoNTMxNik7CiAgICAgICAgZnVuY3Rpb24gYyhlKSB7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBlLm1hdGNoKC9eaXBmczpcL1wvaXBmc1wvL2kpCiAgICAgICAgICAgICAgPyAoZSA9IGUuc3Vic3RyaW5nKDEyKSkKICAgICAgICAgICAgICA6IGUubWF0Y2goL15pcGZzOlwvXC8vaSkKICAgICAgICAgICAgICAgID8gKGUgPSBlLnN1YnN0cmluZyg3KSkKICAgICAgICAgICAgICAgIDogKDAsIGEuYXNzZXJ0QXJndW1lbnQpKCExLCAndW5zdXBwb3J0ZWQgSVBGUyBmb3JtYXQnLCAnbGluaycsIGUpLAogICAgICAgICAgICBgaHR0cHM6Ly9nYXRld2F5LmlwZnMuaW8vaXBmcy8ke2V9YAogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgY2xhc3MgdSB7CiAgICAgICAgICBuYW1lOwogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAoMCwgYS5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IG5hbWU6IGUgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25uZWN0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICB9CiAgICAgICAgICBzdXBwb3J0c0NvaW5UeXBlKGUpIHsKICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZW5jb2RlQWRkcmVzcyhlLCB0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgY29pbicpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZGVjb2RlQWRkcmVzcyhlLCB0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgY29pbicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAodC5NdWx0aWNvaW5Qcm92aWRlclBsdWdpbiA9IHUpLAogICAgICAgICAgKHQuQmFzaWNNdWx0aWNvaW5Qcm92aWRlclBsdWdpbiA9IGNsYXNzIGV4dGVuZHMgdSB7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICAgIHN1cGVyKCdvcmcuZXRoZXJzLnBsdWdpbnMucHJvdmlkZXIuQmFzaWNNdWx0aWNvaW4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgY29uc3QgbCA9IG5ldyBSZWdFeHAoJ14oaXBmcyk6Ly8oLiopJCcsICdpJyksCiAgICAgICAgICBkID0gWwogICAgICAgICAgICBuZXcgUmVnRXhwKCdeKGh0dHBzKTovLyguKikkJywgJ2knKSwKICAgICAgICAgICAgbmV3IFJlZ0V4cCgnXihkYXRhKTooLiopJCcsICdpJyksCiAgICAgICAgICAgIGwsCiAgICAgICAgICAgIG5ldyBSZWdFeHAoJ15laXAxNTU6WzAtOV0rLyhlcmNbMC05XSspOiguKikkJywgJ2knKQogICAgICAgICAgXTsKICAgICAgICBjbGFzcyBmIHsKICAgICAgICAgIHByb3ZpZGVyOwogICAgICAgICAgYWRkcmVzczsKICAgICAgICAgIG5hbWU7CiAgICAgICAgICAjVzsKICAgICAgICAgICNZOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICAoMCwgYS5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IHByb3ZpZGVyOiBlLCBhZGRyZXNzOiB0LCBuYW1lOiByIH0pLAogICAgICAgICAgICAgICh0aGlzLiNXID0gbnVsbCksCiAgICAgICAgICAgICAgKHRoaXMuI1kgPSBuZXcgby5Db250cmFjdCgKICAgICAgICAgICAgICAgIHQsCiAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICdmdW5jdGlvbiBzdXBwb3J0c0ludGVyZmFjZShieXRlczQpIHZpZXcgcmV0dXJucyAoYm9vbCknLAogICAgICAgICAgICAgICAgICAnZnVuY3Rpb24gcmVzb2x2ZShieXRlcywgYnl0ZXMpIHZpZXcgcmV0dXJucyAoYnl0ZXMpJywKICAgICAgICAgICAgICAgICAgJ2Z1bmN0aW9uIGFkZHIoYnl0ZXMzMikgdmlldyByZXR1cm5zIChhZGRyZXNzKScsCiAgICAgICAgICAgICAgICAgICdmdW5jdGlvbiBhZGRyKGJ5dGVzMzIsIHVpbnQpIHZpZXcgcmV0dXJucyAoYnl0ZXMpJywKICAgICAgICAgICAgICAgICAgJ2Z1bmN0aW9uIHRleHQoYnl0ZXMzMiwgc3RyaW5nKSB2aWV3IHJldHVybnMgKHN0cmluZyknLAogICAgICAgICAgICAgICAgICAnZnVuY3Rpb24gY29udGVudGhhc2goYnl0ZXMzMikgdmlldyByZXR1cm5zIChieXRlcyknCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICkpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgc3VwcG9ydHNXaWxkY2FyZCgpIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICBudWxsID09IHRoaXMuI1cgJiYKICAgICAgICAgICAgICAgICh0aGlzLiNXID0gKGFzeW5jICgpID0-IHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy4jWS5zdXBwb3J0c0ludGVyZmFjZSgnMHg5MDYxYjkyMycpOwogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCgwLCBhLmlzRXJyb3IpKGUsICdDQUxMX0VYQ0VQVElPTicpKSByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKCh0aGlzLiNXID0gbnVsbCksIGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSgpKSwKICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNXCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyAjcShlLCB0KSB7CiAgICAgICAgICAgIHQgPSAodCB8fCBbXSkuc2xpY2UoKTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuI1kuaW50ZXJmYWNlOwogICAgICAgICAgICB0LnVuc2hpZnQoKDAsIGkubmFtZWhhc2gpKHRoaXMubmFtZSkpOwogICAgICAgICAgICBsZXQgbiA9IG51bGw7CiAgICAgICAgICAgIChhd2FpdCB0aGlzLnN1cHBvcnRzV2lsZGNhcmQoKSkgJiYKICAgICAgICAgICAgICAoKG4gPSByLmdldEZ1bmN0aW9uKGUpKSwKICAgICAgICAgICAgICAoMCwgYS5hc3NlcnQpKG4sICdtaXNzaW5nIGZyYWdtZW50JywgJ1VOS05PV05fRVJST1InLCB7IGluZm86IHsgZnVuY05hbWU6IGUgfSB9KSwKICAgICAgICAgICAgICAodCA9IFsoMCwgaS5kbnNFbmNvZGUpKHRoaXMubmFtZSksIHIuZW5jb2RlRnVuY3Rpb25EYXRhKG4sIHQpXSksCiAgICAgICAgICAgICAgKGUgPSAncmVzb2x2ZShieXRlcyxieXRlcyknKSksCiAgICAgICAgICAgICAgdC5wdXNoKHsgZW5hYmxlQ2NpcFJlYWQ6ICEwIH0pOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLiNZW2VdKC4uLnQpOwogICAgICAgICAgICAgIHJldHVybiBuID8gci5kZWNvZGVGdW5jdGlvblJlc3VsdChuLCBzKVswXSA6IHM7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBpZiAoISgwLCBhLmlzRXJyb3IpKGUsICdDQUxMX0VYQ0VQVElPTicpKSB0aHJvdyBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0QWRkcmVzcyhlKSB7CiAgICAgICAgICAgIGlmICgobnVsbCA9PSBlICYmIChlID0gNjApLCA2MCA9PT0gZSkpCiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLiNxKCdhZGRyKGJ5dGVzMzIpJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlIHx8IGUgPT09IHMuWmVyb0FkZHJlc3MgPyBudWxsIDogZTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBpZiAoKDAsIGEuaXNFcnJvcikoZSwgJ0NBTExfRVhDRVBUSU9OJykpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlID49IDAgJiYgZSA8IDIxNDc0ODM2NDgpIHsKICAgICAgICAgICAgICBsZXQgdCA9IGUgKyAyMTQ3NDgzNjQ4OwogICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLiNxKCdhZGRyKGJ5dGVzMzIsdWludCknLCBbdF0pOwogICAgICAgICAgICAgIGlmICgoMCwgYS5pc0hleFN0cmluZykociwgMjApKSByZXR1cm4gKDAsIG4uZ2V0QWRkcmVzcykocik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHQgPSBudWxsOwogICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5wcm92aWRlci5wbHVnaW5zKQogICAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgdSAmJiByLnN1cHBvcnRzQ29pblR5cGUoZSkpIHsKICAgICAgICAgICAgICAgIHQgPSByOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMuI3EoJ2FkZHIoYnl0ZXMzMix1aW50KScsIFtlXSk7CiAgICAgICAgICAgIGlmIChudWxsID09IHIgfHwgJzB4JyA9PT0gcikgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGNvbnN0IG8gPSBhd2FpdCB0LmRlY29kZUFkZHJlc3MoZSwgcik7CiAgICAgICAgICAgIGlmIChudWxsICE9IG8pIHJldHVybiBvOwogICAgICAgICAgICAoMCwgYS5hc3NlcnQpKCExLCAnaW52YWxpZCBjb2luIGRhdGEnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgIG9wZXJhdGlvbjogYGdldEFkZHJlc3MoJHtlfSlgLAogICAgICAgICAgICAgIGluZm86IHsgY29pblR5cGU6IGUsIGRhdGE6IHIgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldFRleHQoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy4jcSgndGV4dChieXRlczMyLHN0cmluZyknLCBbZV0pOwogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0IHx8ICcweCcgPT09IHQgPyBudWxsIDogdDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldENvbnRlbnRIYXNoKCkgewogICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy4jcSgnY29udGVudGhhc2goYnl0ZXMzMiknKTsKICAgICAgICAgICAgaWYgKG51bGwgPT0gZSB8fCAnMHgnID09PSBlKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3QgdCA9IGUubWF0Y2goL14weChlMzAxMDE3MHxlNTAxMDE3MikoKFswLTlhLWZdWzAtOWEtZl0pKFswLTlhLWZdWzAtOWEtZl0pKFswLTlhLWZdKikpJC8pOwogICAgICAgICAgICBpZiAodCkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSAnZTMwMTAxNzAnID09PSB0WzFdID8gJ2lwZnMnIDogJ2lwbnMnLAogICAgICAgICAgICAgICAgciA9IHBhcnNlSW50KHRbNF0sIDE2KTsKICAgICAgICAgICAgICBpZiAodFs1XS5sZW5ndGggPT09IDIgKiByKSByZXR1cm4gYCR7ZX06Ly8keygwLCBhLmVuY29kZUJhc2U1OCkoJzB4JyArIHRbMl0pfWA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgciA9IGUubWF0Y2goL14weGU0MDEwMWZhMDExYjIwKFswLTlhLWZdKikkLyk7CiAgICAgICAgICAgIGlmIChyICYmIDY0ID09PSByWzFdLmxlbmd0aCkgcmV0dXJuIGBieno6Ly8ke3JbMV19YDsKICAgICAgICAgICAgKDAsIGEuYXNzZXJ0KSghMSwgJ2ludmFsaWQgb3IgdW5zdXBwb3J0ZWQgY29udGVudCBoYXNoIGRhdGEnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2dldENvbnRlbnRIYXNoKCknLAogICAgICAgICAgICAgIGluZm86IHsgZGF0YTogZSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0QXZhdGFyKCkgewogICAgICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuX2dldEF2YXRhcigpKS51cmw7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBfZ2V0QXZhdGFyKCkgewogICAgICAgICAgICBjb25zdCBlID0gW3sgdHlwZTogJ25hbWUnLCB2YWx1ZTogdGhpcy5uYW1lIH1dOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLmdldFRleHQoJ2F2YXRhcicpOwogICAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiBlLnB1c2goeyB0eXBlOiAnIWF2YXRhcicsIHZhbHVlOiAnJyB9KSwgeyB1cmw6IG51bGwsIGxpbmthZ2U6IGUgfTsKICAgICAgICAgICAgICBlLnB1c2goeyB0eXBlOiAnYXZhdGFyJywgdmFsdWU6IHQgfSk7CiAgICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBkLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5tYXRjaChkW3JdKTsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IG4pIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgY29uc3QgcyA9IG5bMV0udG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIHN3aXRjaCAocykgewogICAgICAgICAgICAgICAgICBjYXNlICdodHRwcyc6CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGEnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnB1c2goeyB0eXBlOiAndXJsJywgdmFsdWU6IHQgfSksIHsgbGlua2FnZTogZSwgdXJsOiB0IH07CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2lwZnMnOiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGModCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCh7IHR5cGU6ICdpcGZzJywgdmFsdWU6IHQgfSksIGUucHVzaCh7IHR5cGU6ICd1cmwnLCB2YWx1ZTogciB9KSwgeyBsaW5rYWdlOiBlLCB1cmw6IHIgfQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY2FzZSAnZXJjNzIxJzoKICAgICAgICAgICAgICAgICAgY2FzZSAnZXJjMTE1NSc6IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gJ2VyYzcyMScgPT09IHMgPyAndG9rZW5VUkkodWludDI1NiknIDogJ3VyaSh1aW50MjU2KSc7CiAgICAgICAgICAgICAgICAgICAgZS5wdXNoKHsgdHlwZTogcywgdmFsdWU6IHQgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IGF3YWl0IHRoaXMuZ2V0QWRkcmVzcygpOwogICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGkpIHJldHVybiBlLnB1c2goeyB0eXBlOiAnIW93bmVyJywgdmFsdWU6ICcnIH0pLCB7IHVybDogbnVsbCwgbGlua2FnZTogZSB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHUgPSAoblsyXSB8fCAnJykuc3BsaXQoJy8nKTsKICAgICAgICAgICAgICAgICAgICBpZiAoMiAhPT0gdS5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5wdXNoKHsgdHlwZTogYCEke3N9Y2FpcGAsIHZhbHVlOiBuWzJdIHx8ICcnIH0pLCB7IHVybDogbnVsbCwgbGlua2FnZTogZSB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSB1WzFdLAogICAgICAgICAgICAgICAgICAgICAgZiA9IG5ldyBvLkNvbnRyYWN0KAogICAgICAgICAgICAgICAgICAgICAgICB1WzBdLAogICAgICAgICAgICAgICAgICAgICAgICBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Z1bmN0aW9uIHRva2VuVVJJKHVpbnQpIHZpZXcgcmV0dXJucyAoc3RyaW5nKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Z1bmN0aW9uIG93bmVyT2YodWludCkgdmlldyByZXR1cm5zIChhZGRyZXNzKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Z1bmN0aW9uIHVyaSh1aW50KSB2aWV3IHJldHVybnMgKHN0cmluZyknLAogICAgICAgICAgICAgICAgICAgICAgICAgICdmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcywgdWludDI1NikgdmlldyByZXR1cm5zICh1aW50KScKICAgICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm92aWRlcgogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICBpZiAoJ2VyYzcyMScgPT09IHMpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmLm93bmVyT2YoZCk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gdCkgcmV0dXJuIGUucHVzaCh7IHR5cGU6ICchb3duZXInLCB2YWx1ZTogdCB9KSwgeyB1cmw6IG51bGwsIGxpbmthZ2U6IGUgfTsKICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCh7IHR5cGU6ICdvd25lcicsIHZhbHVlOiB0IH0pOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJ2VyYzExNTUnID09PSBzKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgZi5iYWxhbmNlT2YoaSwgZCk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQpIHJldHVybiBlLnB1c2goeyB0eXBlOiAnIWJhbGFuY2UnLCB2YWx1ZTogJzAnIH0pLCB7IHVybDogbnVsbCwgbGlua2FnZTogZSB9OwogICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKHsgdHlwZTogJ2JhbGFuY2UnLCB2YWx1ZTogdC50b1N0cmluZygpIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgaCA9IGF3YWl0IGZbcl0oZCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gaCB8fCAnMHgnID09PSBoKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHVzaCh7IHR5cGU6ICchbWV0YWRhdGEtdXJsJywgdmFsdWU6ICcnIH0pLCB7IHVybDogbnVsbCwgbGlua2FnZTogZSB9OwogICAgICAgICAgICAgICAgICAgIGUucHVzaCh7IHR5cGU6ICdtZXRhZGF0YS11cmwtYmFzZScsIHZhbHVlOiBoIH0pLAogICAgICAgICAgICAgICAgICAgICAgJ2VyYzExNTUnID09PSBzICYmCiAgICAgICAgICAgICAgICAgICAgICAgICgoaCA9IGgucmVwbGFjZSgne2lkfScsICgwLCBhLnRvQmVIZXgpKGQsIDMyKS5zdWJzdHJpbmcoMikpKSwKICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKHsgdHlwZTogJ21ldGFkYXRhLXVybC1leHBhbmRlZCcsIHZhbHVlOiBoIH0pKSwKICAgICAgICAgICAgICAgICAgICAgIGgubWF0Y2goL15pcGZzOi9pKSAmJiAoaCA9IGMoaCkpLAogICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKHsgdHlwZTogJ21ldGFkYXRhLXVybCcsIHZhbHVlOiBoIH0pOwogICAgICAgICAgICAgICAgICAgIGxldCBnID0ge307CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IGF3YWl0IG5ldyBhLkZldGNoUmVxdWVzdChoKS5zZW5kKCk7CiAgICAgICAgICAgICAgICAgICAgcC5hc3NlcnRPaygpOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICBnID0gcC5ib2R5SnNvbjsKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goeyB0eXBlOiAnIW1ldGFkYXRhJywgdmFsdWU6IHAuYm9keVRleHQgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBwLmJvZHk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICYmIGUucHVzaCh7IHR5cGU6ICchbWV0YWRhdGEnLCB2YWx1ZTogKDAsIGEuaGV4bGlmeSkocikgfSksIHsgdXJsOiBudWxsLCBsaW5rYWdlOiBlIH07CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB1cmw6IG51bGwsIGxpbmthZ2U6IGUgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCFnKSByZXR1cm4gZS5wdXNoKHsgdHlwZTogJyFtZXRhZGF0YScsIHZhbHVlOiAnJyB9KSwgeyB1cmw6IG51bGwsIGxpbmthZ2U6IGUgfTsKICAgICAgICAgICAgICAgICAgICBlLnB1c2goeyB0eXBlOiAnbWV0YWRhdGEnLCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoZykgfSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IG0gPSBnLmltYWdlOwogICAgICAgICAgICAgICAgICAgIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgbSkKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnB1c2goeyB0eXBlOiAnIWltYWdlVXJsJywgdmFsdWU6ICcnIH0pLCB7IHVybDogbnVsbCwgbGlua2FnZTogZSB9OwogICAgICAgICAgICAgICAgICAgIGlmIChtLm1hdGNoKC9eKGh0dHBzOlwvXC98ZGF0YTopL2kpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IG0ubWF0Y2gobCkpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnB1c2goeyB0eXBlOiAnIWltYWdlVXJsLWlwZnMnLCB2YWx1ZTogbSB9KSwgeyB1cmw6IG51bGwsIGxpbmthZ2U6IGUgfTsKICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCh7IHR5cGU6ICdpbWFnZVVybC1pcGZzJywgdmFsdWU6IG0gfSksIChtID0gYyhtKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnB1c2goeyB0eXBlOiAndXJsJywgdmFsdWU6IG0gfSksIHsgbGlua2FnZTogZSwgdXJsOiBtIH07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIHJldHVybiB7IGxpbmthZ2U6IGUsIHVybDogbnVsbCB9OwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGFzeW5jIGdldEVuc0FkZHJlc3MoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgZS5nZXROZXR3b3JrKCksCiAgICAgICAgICAgICAgciA9IHQuZ2V0UGx1Z2luKCdvcmcuZXRoZXJzLnBsdWdpbnMubmV0d29yay5FbnMnKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgYS5hc3NlcnQpKHIsICduZXR3b3JrIGRvZXMgbm90IHN1cHBvcnQgRU5TJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2dldEVuc0FkZHJlc3MnLAogICAgICAgICAgICAgICAgaW5mbzogeyBuZXR3b3JrOiB0IH0KICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICByLmFkZHJlc3MKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBhc3luYyAjZWUoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gYXdhaXQgZi5nZXRFbnNBZGRyZXNzKGUpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgby5Db250cmFjdChyLCBbJ2Z1bmN0aW9uIHJlc29sdmVyKGJ5dGVzMzIpIHZpZXcgcmV0dXJucyAoYWRkcmVzcyknXSwgZSksCiAgICAgICAgICAgICAgICBhID0gYXdhaXQgbi5yZXNvbHZlcigoMCwgaS5uYW1laGFzaCkodCksIHsgZW5hYmxlQ2NpcFJlYWQ6ICEwIH0pOwogICAgICAgICAgICAgIHJldHVybiBhID09PSBzLlplcm9BZGRyZXNzID8gbnVsbCA6IGE7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGFzeW5jIGZyb21OYW1lKGUsIHQpIHsKICAgICAgICAgICAgbGV0IHIgPSB0OwogICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaWYgKCcnID09PSByIHx8ICcuJyA9PT0gcikgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgaWYgKCdldGgnICE9PSB0ICYmICdldGgnID09PSByKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgZi4jZWUoZSwgcik7CiAgICAgICAgICAgICAgaWYgKG51bGwgIT0gbikgewogICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBmKGUsIG4sIHQpOwogICAgICAgICAgICAgICAgcmV0dXJuIHIgPT09IHQgfHwgKGF3YWl0IHMuc3VwcG9ydHNXaWxkY2FyZCgpKSA_IHMgOiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByID0gci5zcGxpdCgnLicpLnNsaWNlKDEpLmpvaW4oJy4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkVuc1Jlc29sdmVyID0gZjsKICAgICAgfSwKICAgICAgODcwNDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LmZvcm1hdFRyYW5zYWN0aW9uUmVzcG9uc2UgPQogICAgICAgICAgICB0LmZvcm1hdFRyYW5zYWN0aW9uUmVjZWlwdCA9CiAgICAgICAgICAgIHQuZm9ybWF0UmVjZWlwdExvZyA9CiAgICAgICAgICAgIHQuZm9ybWF0QmxvY2sgPQogICAgICAgICAgICB0LmZvcm1hdExvZyA9CiAgICAgICAgICAgIHQuZm9ybWF0VWludDI1NiA9CiAgICAgICAgICAgIHQuZm9ybWF0SGFzaCA9CiAgICAgICAgICAgIHQuZm9ybWF0RGF0YSA9CiAgICAgICAgICAgIHQuZm9ybWF0Qm9vbGVhbiA9CiAgICAgICAgICAgIHQub2JqZWN0ID0KICAgICAgICAgICAgdC5hcnJheU9mID0KICAgICAgICAgICAgdC5hbGxvd051bGwgPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzY4MCksCiAgICAgICAgICBzID0gcig5ODcyKSwKICAgICAgICAgIG8gPSByKDExMjQpLAogICAgICAgICAgaSA9IHIoNTMxNiksCiAgICAgICAgICBhID0gQmlnSW50KDApOwogICAgICAgIGZ1bmN0aW9uIGMoZSwgdCkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHIgPyB0IDogZShyKTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHUoZSkgewogICAgICAgICAgcmV0dXJuICh0KSA9PiB7CiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSkgdGhyb3cgbmV3IEVycm9yKCdub3QgYW4gYXJyYXknKTsKICAgICAgICAgICAgcmV0dXJuIHQubWFwKCh0KSA9PiBlKHQpKTsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGwoZSwgdCkgewogICAgICAgICAgcmV0dXJuIChyKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG4gPSB7fTsKICAgICAgICAgICAgZm9yIChjb25zdCBzIGluIGUpIHsKICAgICAgICAgICAgICBsZXQgbyA9IHM7CiAgICAgICAgICAgICAgaWYgKHQgJiYgcyBpbiB0ICYmICEobyBpbiByKSkKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0W3NdKQogICAgICAgICAgICAgICAgICBpZiAoZSBpbiByKSB7CiAgICAgICAgICAgICAgICAgICAgbyA9IGU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgdCA9IGVbc10ocltvXSk7CiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHQgJiYgKG5bc10gPSB0KTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZSBpbnN0YW5jZW9mIEVycm9yID8gZS5tZXNzYWdlIDogJ25vdC1hbi1lcnJvcic7CiAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnQpKCExLCBgaW52YWxpZCB2YWx1ZSBmb3IgdmFsdWUuJHtzfSAoJHt0fSlgLCAnQkFEX0RBVEEnLCB7IHZhbHVlOiByIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGQoZSkgewogICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgIGNhc2UgITA6CiAgICAgICAgICAgIGNhc2UgJ3RydWUnOgogICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgY2FzZSAhMToKICAgICAgICAgICAgY2FzZSAnZmFsc2UnOgogICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgIH0KICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSghMSwgYGludmFsaWQgYm9vbGVhbjsgJHtKU09OLnN0cmluZ2lmeShlKX1gLCAndmFsdWUnLCBlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZihlKSB7CiAgICAgICAgICByZXR1cm4gKDAsIGkuYXNzZXJ0QXJndW1lbnQpKCgwLCBpLmlzSGV4U3RyaW5nKShlLCAhMCksICdpbnZhbGlkIGRhdGEnLCAndmFsdWUnLCBlKSwgZTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaChlKSB7CiAgICAgICAgICByZXR1cm4gKDAsIGkuYXNzZXJ0QXJndW1lbnQpKCgwLCBpLmlzSGV4U3RyaW5nKShlLCAzMiksICdpbnZhbGlkIGhhc2gnLCAndmFsdWUnLCBlKSwgZTsKICAgICAgICB9CiAgICAgICAgKHQuYWxsb3dOdWxsID0gYyksCiAgICAgICAgICAodC5hcnJheU9mID0gdSksCiAgICAgICAgICAodC5vYmplY3QgPSBsKSwKICAgICAgICAgICh0LmZvcm1hdEJvb2xlYW4gPSBkKSwKICAgICAgICAgICh0LmZvcm1hdERhdGEgPSBmKSwKICAgICAgICAgICh0LmZvcm1hdEhhc2ggPSBoKSwKICAgICAgICAgICh0LmZvcm1hdFVpbnQyNTYgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBpZiAoISgwLCBpLmlzSGV4U3RyaW5nKShlKSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHVpbnQyNTYnKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBpLnplcm9QYWRWYWx1ZSkoZSwgMzIpOwogICAgICAgICAgfSk7CiAgICAgICAgY29uc3QgZyA9IGwoCiAgICAgICAgICB7CiAgICAgICAgICAgIGFkZHJlc3M6IG4uZ2V0QWRkcmVzcywKICAgICAgICAgICAgYmxvY2tIYXNoOiBoLAogICAgICAgICAgICBibG9ja051bWJlcjogaS5nZXROdW1iZXIsCiAgICAgICAgICAgIGRhdGE6IGYsCiAgICAgICAgICAgIGluZGV4OiBpLmdldE51bWJlciwKICAgICAgICAgICAgcmVtb3ZlZDogYyhkLCAhMSksCiAgICAgICAgICAgIHRvcGljczogdShoKSwKICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiBoLAogICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBpLmdldE51bWJlcgogICAgICAgICAgfSwKICAgICAgICAgIHsgaW5kZXg6IFsnbG9nSW5kZXgnXSB9CiAgICAgICAgKTsKICAgICAgICB0LmZvcm1hdExvZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZyhlKTsKICAgICAgICB9OwogICAgICAgIGNvbnN0IHAgPSBsKHsKICAgICAgICAgIGhhc2g6IGMoaCksCiAgICAgICAgICBwYXJlbnRIYXNoOiBoLAogICAgICAgICAgbnVtYmVyOiBpLmdldE51bWJlciwKICAgICAgICAgIHRpbWVzdGFtcDogaS5nZXROdW1iZXIsCiAgICAgICAgICBub25jZTogYyhmKSwKICAgICAgICAgIGRpZmZpY3VsdHk6IGkuZ2V0QmlnSW50LAogICAgICAgICAgZ2FzTGltaXQ6IGkuZ2V0QmlnSW50LAogICAgICAgICAgZ2FzVXNlZDogaS5nZXRCaWdJbnQsCiAgICAgICAgICBtaW5lcjogYyhuLmdldEFkZHJlc3MpLAogICAgICAgICAgZXh0cmFEYXRhOiBmLAogICAgICAgICAgYmFzZUZlZVBlckdhczogYyhpLmdldEJpZ0ludCkKICAgICAgICB9KTsKICAgICAgICB0LmZvcm1hdEJsb2NrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSBwKGUpOwogICAgICAgICAgcmV0dXJuICh0LnRyYW5zYWN0aW9ucyA9IGUudHJhbnNhY3Rpb25zLm1hcCgoZSkgPT4gKCdzdHJpbmcnID09IHR5cGVvZiBlID8gZSA6IEEoZSkpKSksIHQ7CiAgICAgICAgfTsKICAgICAgICBjb25zdCBtID0gbCgKICAgICAgICAgIHsKICAgICAgICAgICAgdHJhbnNhY3Rpb25JbmRleDogaS5nZXROdW1iZXIsCiAgICAgICAgICAgIGJsb2NrTnVtYmVyOiBpLmdldE51bWJlciwKICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiBoLAogICAgICAgICAgICBhZGRyZXNzOiBuLmdldEFkZHJlc3MsCiAgICAgICAgICAgIHRvcGljczogdShoKSwKICAgICAgICAgICAgZGF0YTogZiwKICAgICAgICAgICAgaW5kZXg6IGkuZ2V0TnVtYmVyLAogICAgICAgICAgICBibG9ja0hhc2g6IGgKICAgICAgICAgIH0sCiAgICAgICAgICB7IGluZGV4OiBbJ2xvZ0luZGV4J10gfQogICAgICAgICk7CiAgICAgICAgZnVuY3Rpb24gYihlKSB7CiAgICAgICAgICByZXR1cm4gbShlKTsKICAgICAgICB9CiAgICAgICAgdC5mb3JtYXRSZWNlaXB0TG9nID0gYjsKICAgICAgICBjb25zdCB5ID0gbCgKICAgICAgICAgIHsKICAgICAgICAgICAgdG86IGMobi5nZXRBZGRyZXNzLCBudWxsKSwKICAgICAgICAgICAgZnJvbTogYyhuLmdldEFkZHJlc3MsIG51bGwpLAogICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6IGMobi5nZXRBZGRyZXNzLCBudWxsKSwKICAgICAgICAgICAgaW5kZXg6IGkuZ2V0TnVtYmVyLAogICAgICAgICAgICByb290OiBjKGkuaGV4bGlmeSksCiAgICAgICAgICAgIGdhc1VzZWQ6IGkuZ2V0QmlnSW50LAogICAgICAgICAgICBsb2dzQmxvb206IGMoZiksCiAgICAgICAgICAgIGJsb2NrSGFzaDogaCwKICAgICAgICAgICAgaGFzaDogaCwKICAgICAgICAgICAgbG9nczogdShiKSwKICAgICAgICAgICAgYmxvY2tOdW1iZXI6IGkuZ2V0TnVtYmVyLAogICAgICAgICAgICBjdW11bGF0aXZlR2FzVXNlZDogaS5nZXRCaWdJbnQsCiAgICAgICAgICAgIGVmZmVjdGl2ZUdhc1ByaWNlOiBjKGkuZ2V0QmlnSW50KSwKICAgICAgICAgICAgc3RhdHVzOiBjKGkuZ2V0TnVtYmVyKSwKICAgICAgICAgICAgdHlwZTogYyhpLmdldE51bWJlciwgMCkKICAgICAgICAgIH0sCiAgICAgICAgICB7IGVmZmVjdGl2ZUdhc1ByaWNlOiBbJ2dhc1ByaWNlJ10sIGhhc2g6IFsndHJhbnNhY3Rpb25IYXNoJ10sIGluZGV4OiBbJ3RyYW5zYWN0aW9uSW5kZXgnXSB9CiAgICAgICAgKTsKICAgICAgICBmdW5jdGlvbiBBKGUpIHsKICAgICAgICAgIGUudG8gJiYgKDAsIGkuZ2V0QmlnSW50KShlLnRvKSA9PT0gYSAmJiAoZS50byA9ICcweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAnKTsKICAgICAgICAgIGNvbnN0IHQgPSBsKAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaGFzaDogaCwKICAgICAgICAgICAgICB0eXBlOiAoZSkgPT4gKCcweCcgPT09IGUgfHwgbnVsbCA9PSBlID8gMCA6ICgwLCBpLmdldE51bWJlcikoZSkpLAogICAgICAgICAgICAgIGFjY2Vzc0xpc3Q6IGMoby5hY2Nlc3NMaXN0aWZ5LCBudWxsKSwKICAgICAgICAgICAgICBibG9ja0hhc2g6IGMoaCwgbnVsbCksCiAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IGMoaS5nZXROdW1iZXIsIG51bGwpLAogICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IGMoaS5nZXROdW1iZXIsIG51bGwpLAogICAgICAgICAgICAgIGZyb206IG4uZ2V0QWRkcmVzcywKICAgICAgICAgICAgICBnYXNQcmljZTogYyhpLmdldEJpZ0ludCksCiAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IGMoaS5nZXRCaWdJbnQpLAogICAgICAgICAgICAgIG1heEZlZVBlckdhczogYyhpLmdldEJpZ0ludCksCiAgICAgICAgICAgICAgZ2FzTGltaXQ6IGkuZ2V0QmlnSW50LAogICAgICAgICAgICAgIHRvOiBjKG4uZ2V0QWRkcmVzcywgbnVsbCksCiAgICAgICAgICAgICAgdmFsdWU6IGkuZ2V0QmlnSW50LAogICAgICAgICAgICAgIG5vbmNlOiBpLmdldE51bWJlciwKICAgICAgICAgICAgICBkYXRhOiBmLAogICAgICAgICAgICAgIGNyZWF0ZXM6IGMobi5nZXRBZGRyZXNzLCBudWxsKSwKICAgICAgICAgICAgICBjaGFpbklkOiBjKGkuZ2V0QmlnSW50LCBudWxsKQogICAgICAgICAgICB9LAogICAgICAgICAgICB7IGRhdGE6IFsnaW5wdXQnXSwgZ2FzTGltaXQ6IFsnZ2FzJ10gfQogICAgICAgICAgKShlKTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgKG51bGwgPT0gdC50byAmJiBudWxsID09IHQuY3JlYXRlcyAmJiAodC5jcmVhdGVzID0gKDAsIG4uZ2V0Q3JlYXRlQWRkcmVzcykodCkpLAogICAgICAgICAgICAoMSAhPT0gZS50eXBlICYmIDIgIT09IGUudHlwZSkgfHwgbnVsbCAhPSBlLmFjY2Vzc0xpc3QgfHwgKHQuYWNjZXNzTGlzdCA9IFtdKSwKICAgICAgICAgICAgZS5zaWduYXR1cmUgPyAodC5zaWduYXR1cmUgPSBzLlNpZ25hdHVyZS5mcm9tKGUuc2lnbmF0dXJlKSkgOiAodC5zaWduYXR1cmUgPSBzLlNpZ25hdHVyZS5mcm9tKGUpKSwKICAgICAgICAgICAgbnVsbCA9PSB0LmNoYWluSWQpCiAgICAgICAgICApIHsKICAgICAgICAgICAgY29uc3QgZSA9IHQuc2lnbmF0dXJlLmxlZ2FjeUNoYWluSWQ7CiAgICAgICAgICAgIG51bGwgIT0gZSAmJiAodC5jaGFpbklkID0gZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdC5ibG9ja0hhc2ggJiYgKDAsIGkuZ2V0QmlnSW50KSh0LmJsb2NrSGFzaCkgPT09IGEgJiYgKHQuYmxvY2tIYXNoID0gbnVsbCksIHQ7CiAgICAgICAgfQogICAgICAgICh0LmZvcm1hdFRyYW5zYWN0aW9uUmVjZWlwdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4geShlKTsKICAgICAgICB9KSwKICAgICAgICAgICh0LmZvcm1hdFRyYW5zYWN0aW9uUmVzcG9uc2UgPSBBKTsKICAgICAgfSwKICAgICAgMzY0NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LlNvY2tldEV2ZW50U3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuU29ja2V0UGVuZGluZ1N1YnNjcmliZXIgPQogICAgICAgICAgICB0LlNvY2tldEJsb2NrU3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuU29ja2V0U3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuV2ViU29ja2V0UHJvdmlkZXIgPQogICAgICAgICAgICB0LlNvY2tldFByb3ZpZGVyID0KICAgICAgICAgICAgdC5JcGNTb2NrZXRQcm92aWRlciA9CiAgICAgICAgICAgIHQuUXVpY2tOb2RlUHJvdmlkZXIgPQogICAgICAgICAgICB0LlBvY2tldFByb3ZpZGVyID0KICAgICAgICAgICAgdC5JbmZ1cmFXZWJTb2NrZXRQcm92aWRlciA9CiAgICAgICAgICAgIHQuSW5mdXJhUHJvdmlkZXIgPQogICAgICAgICAgICB0LkV0aGVyc2NhblBsdWdpbiA9CiAgICAgICAgICAgIHQuRXRoZXJzY2FuUHJvdmlkZXIgPQogICAgICAgICAgICB0LkNsb3VkZmxhcmVQcm92aWRlciA9CiAgICAgICAgICAgIHQuQW5rclByb3ZpZGVyID0KICAgICAgICAgICAgdC5BbGNoZW15UHJvdmlkZXIgPQogICAgICAgICAgICB0LkJyb3dzZXJQcm92aWRlciA9CiAgICAgICAgICAgIHQuSnNvblJwY1NpZ25lciA9CiAgICAgICAgICAgIHQuSnNvblJwY1Byb3ZpZGVyID0KICAgICAgICAgICAgdC5Kc29uUnBjQXBpUHJvdmlkZXIgPQogICAgICAgICAgICB0LkZhbGxiYWNrUHJvdmlkZXIgPQogICAgICAgICAgICB0LmNvcHlSZXF1ZXN0ID0KICAgICAgICAgICAgdC5UcmFuc2FjdGlvblJlc3BvbnNlID0KICAgICAgICAgICAgdC5UcmFuc2FjdGlvblJlY2VpcHQgPQogICAgICAgICAgICB0LkxvZyA9CiAgICAgICAgICAgIHQuRmVlRGF0YSA9CiAgICAgICAgICAgIHQuQmxvY2sgPQogICAgICAgICAgICB0LkZldGNoVXJsRmVlRGF0YU5ldHdvcmtQbHVnaW4gPQogICAgICAgICAgICB0LkZlZURhdGFOZXR3b3JrUGx1Z2luID0KICAgICAgICAgICAgdC5FbnNQbHVnaW4gPQogICAgICAgICAgICB0Lkdhc0Nvc3RQbHVnaW4gPQogICAgICAgICAgICB0Lk5ldHdvcmtQbHVnaW4gPQogICAgICAgICAgICB0Lk5vbmNlTWFuYWdlciA9CiAgICAgICAgICAgIHQuTmV0d29yayA9CiAgICAgICAgICAgIHQuTXVsdGljb2luUHJvdmlkZXJQbHVnaW4gPQogICAgICAgICAgICB0LkVuc1Jlc29sdmVyID0KICAgICAgICAgICAgdC5nZXREZWZhdWx0UHJvdmlkZXIgPQogICAgICAgICAgICB0LnNob3dUaHJvdHRsZU1lc3NhZ2UgPQogICAgICAgICAgICB0LlZvaWRTaWduZXIgPQogICAgICAgICAgICB0LkFic3RyYWN0U2lnbmVyID0KICAgICAgICAgICAgdC5Vbm1hbmFnZWRTdWJzY3JpYmVyID0KICAgICAgICAgICAgdC5BYnN0cmFjdFByb3ZpZGVyID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIHZhciBuID0gcig4MDEyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Fic3RyYWN0UHJvdmlkZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi5BYnN0cmFjdFByb3ZpZGVyOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdVbm1hbmFnZWRTdWJzY3JpYmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4uVW5tYW5hZ2VkU3Vic2NyaWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIHMgPSByKDk1Mik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdBYnN0cmFjdFNpZ25lcicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBzLkFic3RyYWN0U2lnbmVyOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdWb2lkU2lnbmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMuVm9pZFNpZ25lcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIG8gPSByKDM4MDApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnc2hvd1Rocm90dGxlTWVzc2FnZScsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBvLnNob3dUaHJvdHRsZU1lc3NhZ2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGkgPSByKDk4ODgpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0RGVmYXVsdFByb3ZpZGVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuZ2V0RGVmYXVsdFByb3ZpZGVyOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBhID0gcigxNjcyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Vuc1Jlc29sdmVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGEuRW5zUmVzb2x2ZXI7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ011bHRpY29pblByb3ZpZGVyUGx1Z2luJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGEuTXVsdGljb2luUHJvdmlkZXJQbHVnaW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBjID0gcigxMTA0KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ05ldHdvcmsnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYy5OZXR3b3JrOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciB1ID0gcig0ODg0KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ05vbmNlTWFuYWdlcicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB1Lk5vbmNlTWFuYWdlcjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgbCA9IHIoODcwMCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdOZXR3b3JrUGx1Z2luJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGwuTmV0d29ya1BsdWdpbjsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnR2FzQ29zdFBsdWdpbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkdhc0Nvc3RQbHVnaW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFbnNQbHVnaW4nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5FbnNQbHVnaW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGZWVEYXRhTmV0d29ya1BsdWdpbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkZlZURhdGFOZXR3b3JrUGx1Z2luOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRmV0Y2hVcmxGZWVEYXRhTmV0d29ya1BsdWdpbicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLkZldGNoVXJsRmVlRGF0YU5ldHdvcmtQbHVnaW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBkID0gcig2OTkyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Jsb2NrJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGQuQmxvY2s7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0ZlZURhdGEnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gZC5GZWVEYXRhOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnTG9nJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQuTG9nOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVHJhbnNhY3Rpb25SZWNlaXB0JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQuVHJhbnNhY3Rpb25SZWNlaXB0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVHJhbnNhY3Rpb25SZXNwb25zZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBkLlRyYW5zYWN0aW9uUmVzcG9uc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdjb3B5UmVxdWVzdCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBkLmNvcHlSZXF1ZXN0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgZiA9IHIoMTYxMik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGYWxsYmFja1Byb3ZpZGVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGYuRmFsbGJhY2tQcm92aWRlcjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgaCA9IHIoOTUyOCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdKc29uUnBjQXBpUHJvdmlkZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gaC5Kc29uUnBjQXBpUHJvdmlkZXI7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0pzb25ScGNQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBoLkpzb25ScGNQcm92aWRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0pzb25ScGNTaWduZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaC5Kc29uUnBjU2lnbmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgZyA9IHIoOTI5Nik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdCcm93c2VyUHJvdmlkZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZy5Ccm93c2VyUHJvdmlkZXI7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHAgPSByKDkwMjQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnQWxjaGVteVByb3ZpZGVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHAuQWxjaGVteVByb3ZpZGVyOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBtID0gcig0NTIwKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0Fua3JQcm92aWRlcicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBtLkFua3JQcm92aWRlcjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgYiA9IHIoNTE5Nik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdDbG91ZGZsYXJlUHJvdmlkZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYi5DbG91ZGZsYXJlUHJvdmlkZXI7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHkgPSByKDU0MDApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRXRoZXJzY2FuUHJvdmlkZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4geS5FdGhlcnNjYW5Qcm92aWRlcjsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRXRoZXJzY2FuUGx1Z2luJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHkuRXRoZXJzY2FuUGx1Z2luOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgQSA9IHIoMjI5Mik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdJbmZ1cmFQcm92aWRlcicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBBLkluZnVyYVByb3ZpZGVyOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdJbmZ1cmFXZWJTb2NrZXRQcm92aWRlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBBLkluZnVyYVdlYlNvY2tldFByb3ZpZGVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgdiA9IHIoNzMxNik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdQb2NrZXRQcm92aWRlcicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB2LlBvY2tldFByb3ZpZGVyOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBFID0gcig1MjQ0KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1F1aWNrTm9kZVByb3ZpZGVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIEUuUXVpY2tOb2RlUHJvdmlkZXI7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgdyA9IHIoMzc4Nyk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdJcGNTb2NrZXRQcm92aWRlcicsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB3LklwY1NvY2tldFByb3ZpZGVyOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBUID0gcigxNTIwKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1NvY2tldFByb3ZpZGVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIFQuU29ja2V0UHJvdmlkZXI7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIFAgPSByKDM2MzIpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnV2ViU29ja2V0UHJvdmlkZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gUC5XZWJTb2NrZXRQcm92aWRlcjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgUyA9IHIoMTUyMCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdTb2NrZXRTdWJzY3JpYmVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIFMuU29ja2V0U3Vic2NyaWJlcjsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnU29ja2V0QmxvY2tTdWJzY3JpYmVyJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFMuU29ja2V0QmxvY2tTdWJzY3JpYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnU29ja2V0UGVuZGluZ1N1YnNjcmliZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gUy5Tb2NrZXRQZW5kaW5nU3Vic2NyaWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1NvY2tldEV2ZW50U3Vic2NyaWJlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBTLlNvY2tldEV2ZW50U3Vic2NyaWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDExMDQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0Lk5ldHdvcmsgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDExMjQpLAogICAgICAgICAgcyA9IHIoNTMxNiksCiAgICAgICAgICBvID0gcig4NzAwKSwKICAgICAgICAgIGkgPSBuZXcgTWFwKCk7CiAgICAgICAgY2xhc3MgYSB7CiAgICAgICAgICAjdGU7CiAgICAgICAgICAjcmU7CiAgICAgICAgICAjSTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgKHRoaXMuI3RlID0gZSksICh0aGlzLiNyZSA9ICgwLCBzLmdldEJpZ0ludCkodCkpLCAodGhpcy4jSSA9IG5ldyBNYXAoKSk7CiAgICAgICAgICB9CiAgICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIHJldHVybiB7IG5hbWU6IHRoaXMubmFtZSwgY2hhaW5JZDogU3RyaW5nKHRoaXMuY2hhaW5JZCkgfTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBuYW1lKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jdGU7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgbmFtZShlKSB7CiAgICAgICAgICAgIHRoaXMuI3RlID0gZTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBjaGFpbklkKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jcmU7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgY2hhaW5JZChlKSB7CiAgICAgICAgICAgIHRoaXMuI3JlID0gKDAsIHMuZ2V0QmlnSW50KShlLCAnY2hhaW5JZCcpOwogICAgICAgICAgfQogICAgICAgICAgbWF0Y2hlcyhlKSB7CiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiAhMTsKICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYWluSWQgPT09ICgwLCBzLmdldEJpZ0ludCkoZSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lID09PSBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgZSB8fCAnYmlnaW50JyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFpbklkID09PSAoMCwgcy5nZXRCaWdJbnQpKGUpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgnb2JqZWN0JyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICAgIGlmIChudWxsICE9IGUuY2hhaW5JZCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhaW5JZCA9PT0gKDAsIHMuZ2V0QmlnSW50KShlLmNoYWluSWQpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gZS5uYW1lICYmIHRoaXMubmFtZSA9PT0gZS5uYW1lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwbHVnaW5zKCkgewogICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLiNJLnZhbHVlcygpKTsKICAgICAgICAgIH0KICAgICAgICAgIGF0dGFjaFBsdWdpbihlKSB7CiAgICAgICAgICAgIGlmICh0aGlzLiNJLmdldChlLm5hbWUpKSB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCByZXBsYWNlIGV4aXN0aW5nIHBsdWdpbjogJHtlLm5hbWV9IGApOwogICAgICAgICAgICByZXR1cm4gdGhpcy4jSS5zZXQoZS5uYW1lLCBlLmNsb25lKCkpLCB0aGlzOwogICAgICAgICAgfQogICAgICAgICAgZ2V0UGx1Z2luKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0kuZ2V0KGUpIHx8IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRQbHVnaW5zKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2lucy5maWx0ZXIoKHQpID0-IHQubmFtZS5zcGxpdCgnIycpWzBdID09PSBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICBjb25zdCBlID0gbmV3IGEodGhpcy5uYW1lLCB0aGlzLmNoYWluSWQpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIHRoaXMucGx1Z2lucy5mb3JFYWNoKCh0KSA9PiB7CiAgICAgICAgICAgICAgICBlLmF0dGFjaFBsdWdpbih0LmNsb25lKCkpOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbXB1dGVJbnRyaW5zaWNHYXMoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRQbHVnaW4oJ29yZy5ldGhlcnMucGx1Z2lucy5uZXR3b3JrLkdhc0Nvc3QnKSB8fCBuZXcgby5HYXNDb3N0UGx1Z2luKCk7CiAgICAgICAgICAgIGxldCByID0gdC50eEJhc2U7CiAgICAgICAgICAgIGlmICgobnVsbCA9PSBlLnRvICYmIChyICs9IHQudHhDcmVhdGUpLCBlLmRhdGEpKQogICAgICAgICAgICAgIGZvciAobGV0IG4gPSAyOyBuIDwgZS5kYXRhLmxlbmd0aDsgbiArPSAyKQogICAgICAgICAgICAgICAgJzAwJyA9PT0gZS5kYXRhLnN1YnN0cmluZyhuLCBuICsgMikgPyAociArPSB0LnR4RGF0YVplcm8pIDogKHIgKz0gdC50eERhdGFOb256ZXJvKTsKICAgICAgICAgICAgaWYgKGUuYWNjZXNzTGlzdCkgewogICAgICAgICAgICAgIGNvbnN0IHMgPSAoMCwgbi5hY2Nlc3NMaXN0aWZ5KShlLmFjY2Vzc0xpc3QpOwogICAgICAgICAgICAgIGZvciAoY29uc3QgZSBpbiBzKSByICs9IHQudHhBY2Nlc3NMaXN0QWRkcmVzcyArIHQudHhBY2Nlc3NMaXN0U3RvcmFnZUtleSAqIHNbZV0uc3RvcmFnZUtleXMubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb20oZSkgewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgKChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IGEoZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gci5lbnNOZXR3b3JrICYmIG4uYXR0YWNoUGx1Z2luKG5ldyBvLkVuc1BsdWdpbihudWxsLCByLmVuc05ldHdvcmspKSwKICAgICAgICAgICAgICAgICAgICAgIG4uYXR0YWNoUGx1Z2luKG5ldyBvLkdhc0Nvc3RQbHVnaW4oKSksCiAgICAgICAgICAgICAgICAgICAgICAoci5wbHVnaW5zIHx8IFtdKS5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4uYXR0YWNoUGx1Z2luKGUpOwogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICBuCiAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgYS5yZWdpc3RlcihlLCBuKSwKICAgICAgICAgICAgICAgICAgICBhLnJlZ2lzdGVyKHQsIG4pLAogICAgICAgICAgICAgICAgICAgIHIuYWx0TmFtZXMgJiYKICAgICAgICAgICAgICAgICAgICAgIHIuYWx0TmFtZXMuZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBhLnJlZ2lzdGVyKGUsIG4pOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBsIHx8CiAgICAgICAgICAgICAgICAgICgobCA9ICEwKSwKICAgICAgICAgICAgICAgICAgZSgnbWFpbm5ldCcsIDEsIHsgZW5zTmV0d29yazogMSwgYWx0TmFtZXM6IFsnaG9tZXN0ZWFkJ10gfSksCiAgICAgICAgICAgICAgICAgIGUoJ3JvcHN0ZW4nLCAzLCB7IGVuc05ldHdvcms6IDMgfSksCiAgICAgICAgICAgICAgICAgIGUoJ3JpbmtlYnknLCA0LCB7IGVuc05ldHdvcms6IDQgfSksCiAgICAgICAgICAgICAgICAgIGUoJ2dvZXJsaScsIDUsIHsgZW5zTmV0d29yazogNSB9KSwKICAgICAgICAgICAgICAgICAgZSgna292YW4nLCA0MiwgeyBlbnNOZXR3b3JrOiA0MiB9KSwKICAgICAgICAgICAgICAgICAgZSgnc2Vwb2xpYScsIDExMTU1MTExLCB7IGVuc05ldHdvcms6IDExMTU1MTExIH0pLAogICAgICAgICAgICAgICAgICBlKCdjbGFzc2ljJywgNjEsIHt9KSwKICAgICAgICAgICAgICAgICAgZSgnY2xhc3NpY0tvdHRpJywgNiwge30pLAogICAgICAgICAgICAgICAgICBlKCdhcmJpdHJ1bScsIDQyMTYxLCB7IGVuc05ldHdvcms6IDEgfSksCiAgICAgICAgICAgICAgICAgIGUoJ2FyYml0cnVtLWdvZXJsaScsIDQyMTYxMywge30pLAogICAgICAgICAgICAgICAgICBlKCdiYXNlJywgODQ1MywgeyBlbnNOZXR3b3JrOiAxIH0pLAogICAgICAgICAgICAgICAgICBlKCdiYXNlLWdvZXJsaScsIDg0NTMxLCB7fSksCiAgICAgICAgICAgICAgICAgIGUoJ2Jhc2Utc2Vwb2xpYScsIDg0NTMyLCB7fSksCiAgICAgICAgICAgICAgICAgIGUoJ2JuYicsIDU2LCB7IGVuc05ldHdvcms6IDEgfSksCiAgICAgICAgICAgICAgICAgIGUoJ2JuYnQnLCA5Nywge30pLAogICAgICAgICAgICAgICAgICBlKCdsaW5lYScsIDU5MTQ0LCB7IGVuc05ldHdvcms6IDEgfSksCiAgICAgICAgICAgICAgICAgIGUoJ2xpbmVhLWdvZXJsaScsIDU5MTQwLCB7fSksCiAgICAgICAgICAgICAgICAgIGUoJ21hdGljJywgMTM3LCB7IGVuc05ldHdvcms6IDEsIHBsdWdpbnM6IFt1KCdodHRwczovL2dhc3N0YXRpb24ucG9seWdvbi50ZWNobm9sb2d5L3YyJyldIH0pLAogICAgICAgICAgICAgICAgICBlKCdtYXRpYy1tdW1iYWknLCA4MDAwMSwgewogICAgICAgICAgICAgICAgICAgIGFsdE5hbWVzOiBbJ21hdGljTXVtYmFpJywgJ21hdGljbXVtJ10sCiAgICAgICAgICAgICAgICAgICAgcGx1Z2luczogW3UoJ2h0dHBzOi8vZ2Fzc3RhdGlvbi10ZXN0bmV0LnBvbHlnb24udGVjaG5vbG9neS92MicpXQogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgZSgnb3B0aW1pc20nLCAxMCwgeyBlbnNOZXR3b3JrOiAxLCBwbHVnaW5zOiBbXSB9KSwKICAgICAgICAgICAgICAgICAgZSgnb3B0aW1pc20tZ29lcmxpJywgNDIwLCB7fSksCiAgICAgICAgICAgICAgICAgIGUoJ3hkYWknLCAxMDAsIHsgZW5zTmV0d29yazogMSB9KSk7CiAgICAgICAgICAgICAgfSkoKSwKICAgICAgICAgICAgICBudWxsID09IGUpCiAgICAgICAgICAgICkKICAgICAgICAgICAgICByZXR1cm4gYS5mcm9tKCdtYWlubmV0Jyk7CiAgICAgICAgICAgIGlmICgoJ251bWJlcicgPT0gdHlwZW9mIGUgJiYgKGUgPSBCaWdJbnQoZSkpLCAnc3RyaW5nJyA9PSB0eXBlb2YgZSB8fCAnYmlnaW50JyA9PSB0eXBlb2YgZSkpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gaS5nZXQoZSk7CiAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0KCk7CiAgICAgICAgICAgICAgaWYgKCdiaWdpbnQnID09IHR5cGVvZiBlKSByZXR1cm4gbmV3IGEoJ3Vua25vd24nLCBlKTsKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoITEsICd1bmtub3duIG5ldHdvcmsnLCAnbmV0d29yaycsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgnZnVuY3Rpb24nID09IHR5cGVvZiBlLmNsb25lKSByZXR1cm4gZS5jbG9uZSgpOwogICAgICAgICAgICBpZiAoJ29iamVjdCcgPT0gdHlwZW9mIGUpIHsKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAnc3RyaW5nJyA9PSB0eXBlb2YgZS5uYW1lICYmICdudW1iZXInID09IHR5cGVvZiBlLmNoYWluSWQsCiAgICAgICAgICAgICAgICAnaW52YWxpZCBuZXR3b3JrIG9iamVjdCBuYW1lIG9yIGNoYWluSWQnLAogICAgICAgICAgICAgICAgJ25ldHdvcmsnLAogICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBhKGUubmFtZSwgZS5jaGFpbklkKTsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKGUuZW5zQWRkcmVzcyB8fCBudWxsICE9IGUuZW5zTmV0d29yaykgJiYgdC5hdHRhY2hQbHVnaW4obmV3IG8uRW5zUGx1Z2luKGUuZW5zQWRkcmVzcywgZS5lbnNOZXR3b3JrKSksIHQKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSghMSwgJ2ludmFsaWQgbmV0d29yaycsICduZXR3b3JrJywgZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgcmVnaXN0ZXIoZSwgdCkgewogICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgZSAmJiAoZSA9IEJpZ0ludChlKSk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBpLmdldChlKTsKICAgICAgICAgICAgciAmJiAoMCwgcy5hc3NlcnRBcmd1bWVudCkoITEsIGBjb25mbGljdGluZyBuZXR3b3JrIGZvciAke0pTT04uc3RyaW5naWZ5KHIubmFtZSl9YCwgJ25hbWVPckNoYWluSWQnLCBlKSwKICAgICAgICAgICAgICBpLnNldChlLCB0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYyhlLCB0KSB7CiAgICAgICAgICBjb25zdCByID0gU3RyaW5nKGUpOwogICAgICAgICAgaWYgKCFyLm1hdGNoKC9eWzAtOS5dKyQvKSkgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGd3ZWkgdmFsdWU6ICR7ZX1gKTsKICAgICAgICAgIGNvbnN0IG4gPSByLnNwbGl0KCcuJyk7CiAgICAgICAgICBpZiAoKDEgPT09IG4ubGVuZ3RoICYmIG4ucHVzaCgnJyksIDIgIT09IG4ubGVuZ3RoKSkgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIGd3ZWkgdmFsdWU6ICR7ZX1gKTsKICAgICAgICAgIGZvciAoOyBuWzFdLmxlbmd0aCA8IHQ7ICkgblsxXSArPSAnMCc7CiAgICAgICAgICBpZiAoblsxXS5sZW5ndGggPiA5KSB7CiAgICAgICAgICAgIGxldCBlID0gQmlnSW50KG5bMV0uc3Vic3RyaW5nKDAsIDkpKTsKICAgICAgICAgICAgblsxXS5zdWJzdHJpbmcoOSkubWF0Y2goL14wKyQvKSB8fCBlKyssIChuWzFdID0gZS50b1N0cmluZygpKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBCaWdJbnQoblswXSArIG5bMV0pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgICAgIHJldHVybiBuZXcgby5GZXRjaFVybEZlZURhdGFOZXR3b3JrUGx1Z2luKGUsIGFzeW5jIChlLCB0LCByKSA9PiB7CiAgICAgICAgICAgIGxldCBuOwogICAgICAgICAgICByLnNldEhlYWRlcignVXNlci1BZ2VudCcsICdldGhlcnMnKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25zdCBbdCwgc10gPSBhd2FpdCBQcm9taXNlLmFsbChbci5zZW5kKCksIGUoKV0pOwogICAgICAgICAgICAgIG4gPSB0OwogICAgICAgICAgICAgIGNvbnN0IG8gPSBuLmJvZHlKc29uLnN0YW5kYXJkOwogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBnYXNQcmljZTogcy5nYXNQcmljZSwKICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogYyhvLm1heEZlZSwgOSksCiAgICAgICAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczogYyhvLm1heFByaW9yaXR5RmVlLCA5KQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnQpKAogICAgICAgICAgICAgICAgITEsCiAgICAgICAgICAgICAgICBgZXJyb3IgZW5jb3VudGVyZWQgd2l0aCBwb2x5Z29uIGdhcyBzdGF0aW9uICgke0pTT04uc3RyaW5naWZ5KHIudXJsKX0pYCwKICAgICAgICAgICAgICAgICdTRVJWRVJfRVJST1InLAogICAgICAgICAgICAgICAgeyByZXF1ZXN0OiByLCByZXNwb25zZTogbiwgZXJyb3I6IGUgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0Lk5ldHdvcmsgPSBhOwogICAgICAgIGxldCBsID0gITE7CiAgICAgIH0sCiAgICAgIDg3MDA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5GZXRjaFVybEZlZURhdGFOZXR3b3JrUGx1Z2luID0KICAgICAgICAgICAgdC5GZWVEYXRhTmV0d29ya1BsdWdpbiA9CiAgICAgICAgICAgIHQuRW5zUGx1Z2luID0KICAgICAgICAgICAgdC5HYXNDb3N0UGx1Z2luID0KICAgICAgICAgICAgdC5OZXR3b3JrUGx1Z2luID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDQ3NDQpLAogICAgICAgICAgcyA9IHIoNTMxNik7CiAgICAgICAgY2xhc3MgbyB7CiAgICAgICAgICBuYW1lOwogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IG5hbWU6IGUgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjbG9uZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBvKHRoaXMubmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuTmV0d29ya1BsdWdpbiA9IG87CiAgICAgICAgY2xhc3MgaSBleHRlbmRzIG8gewogICAgICAgICAgZWZmZWN0aXZlQmxvY2s7CiAgICAgICAgICB0eEJhc2U7CiAgICAgICAgICB0eENyZWF0ZTsKICAgICAgICAgIHR4RGF0YVplcm87CiAgICAgICAgICB0eERhdGFOb256ZXJvOwogICAgICAgICAgdHhBY2Nlc3NMaXN0U3RvcmFnZUtleTsKICAgICAgICAgIHR4QWNjZXNzTGlzdEFkZHJlc3M7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9IDApLCBzdXBlcihgb3JnLmV0aGVycy5uZXR3b3JrLnBsdWdpbnMuR2FzQ29zdCMke2UgfHwgMH1gKTsKICAgICAgICAgICAgY29uc3QgciA9IHsgZWZmZWN0aXZlQmxvY2s6IGUgfTsKICAgICAgICAgICAgZnVuY3Rpb24gbyhlLCBuKSB7CiAgICAgICAgICAgICAgbGV0IG8gPSAodCB8fCB7fSlbZV07CiAgICAgICAgICAgICAgbnVsbCA9PSBvICYmIChvID0gbiksCiAgICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoJ251bWJlcicgPT0gdHlwZW9mIG8sIGBpbnZhbHVkIHZhbHVlIGZvciAke2V9YCwgJ2Nvc3RzJywgdCksCiAgICAgICAgICAgICAgICAocltlXSA9IG8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG8oJ3R4QmFzZScsIDIxZTMpLAogICAgICAgICAgICAgIG8oJ3R4Q3JlYXRlJywgMzJlMyksCiAgICAgICAgICAgICAgbygndHhEYXRhWmVybycsIDQpLAogICAgICAgICAgICAgIG8oJ3R4RGF0YU5vbnplcm8nLCAxNiksCiAgICAgICAgICAgICAgbygndHhBY2Nlc3NMaXN0U3RvcmFnZUtleScsIDE5MDApLAogICAgICAgICAgICAgIG8oJ3R4QWNjZXNzTGlzdEFkZHJlc3MnLCAyNDAwKSwKICAgICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCByKTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IGkodGhpcy5lZmZlY3RpdmVCbG9jaywgdGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuR2FzQ29zdFBsdWdpbiA9IGk7CiAgICAgICAgY2xhc3MgYSBleHRlbmRzIG8gewogICAgICAgICAgYWRkcmVzczsKICAgICAgICAgIHRhcmdldE5ldHdvcms7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIHN1cGVyKCdvcmcuZXRoZXJzLnBsdWdpbnMubmV0d29yay5FbnMnKSwKICAgICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7CiAgICAgICAgICAgICAgICBhZGRyZXNzOiBlIHx8ICcweDAwMDAwMDAwMDAwQzJFMDc0ZUM2OUEwZEZiMjk5N0JBNkM3ZDJlMWUnLAogICAgICAgICAgICAgICAgdGFyZ2V0TmV0d29yazogbnVsbCA9PSB0ID8gMSA6IHQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IGEodGhpcy5hZGRyZXNzLCB0aGlzLnRhcmdldE5ldHdvcmspOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkVuc1BsdWdpbiA9IGE7CiAgICAgICAgY2xhc3MgYyBleHRlbmRzIG8gewogICAgICAgICAgI25lOwogICAgICAgICAgZ2V0IGZlZURhdGFGdW5jKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jbmU7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgIHN1cGVyKCdvcmcuZXRoZXJzLnBsdWdpbnMubmV0d29yay5GZWVEYXRhJyksICh0aGlzLiNuZSA9IGUpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0RmVlRGF0YShlKSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLiNuZShlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IGModGhpcy4jbmUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAodC5GZWVEYXRhTmV0d29ya1BsdWdpbiA9IGMpLAogICAgICAgICAgKHQuRmV0Y2hVcmxGZWVEYXRhTmV0d29ya1BsdWdpbiA9IGNsYXNzIGV4dGVuZHMgbyB7CiAgICAgICAgICAgICNzZTsKICAgICAgICAgICAgI29lOwogICAgICAgICAgICBnZXQgdXJsKCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLiNzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBnZXQgcHJvY2Vzc0Z1bmMoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI29lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgICBzdXBlcignb3JnLmV0aGVycy5wbHVnaW5zLm5ldHdvcmsuRmV0Y2hVcmxGZWVEYXRhUGx1Z2luJyksICh0aGlzLiNzZSA9IGUpLCAodGhpcy4jb2UgPSB0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjbG9uZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDkwMjQ6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkFsY2hlbXlQcm92aWRlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTMxNiksCiAgICAgICAgICBzID0gcigzODAwKSwKICAgICAgICAgIG8gPSByKDExMDQpLAogICAgICAgICAgaSA9IHIoOTUyOCksCiAgICAgICAgICBhID0gJ19nZzd3U1NpMEtNQnNkS25HVmZIRHVlcTZ4TUI5RWtDJzsKICAgICAgICBjbGFzcyBjIGV4dGVuZHMgaS5Kc29uUnBjUHJvdmlkZXIgewogICAgICAgICAgYXBpS2V5OwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICBudWxsID09IGUgJiYgKGUgPSAnbWFpbm5ldCcpOwogICAgICAgICAgICBjb25zdCByID0gby5OZXR3b3JrLmZyb20oZSk7CiAgICAgICAgICAgIG51bGwgPT0gdCAmJiAodCA9IGEpLAogICAgICAgICAgICAgIHN1cGVyKGMuZ2V0UmVxdWVzdChyLCB0KSwgciwgeyBzdGF0aWNOZXR3b3JrOiByIH0pLAogICAgICAgICAgICAgICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgYXBpS2V5OiB0IH0pOwogICAgICAgICAgfQogICAgICAgICAgX2dldFByb3ZpZGVyKGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IGMoZSwgdGhpcy5hcGlLZXkpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICByZXR1cm4gc3VwZXIuX2dldFByb3ZpZGVyKGUpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX3BlcmZvcm0oZSkgewogICAgICAgICAgICBpZiAoJ2dldFRyYW5zYWN0aW9uUmVzdWx0JyA9PT0gZS5tZXRob2QpIHsKICAgICAgICAgICAgICBjb25zdCB7IHRyYWNlOiB0LCB0eDogciB9ID0gYXdhaXQgKDAsIG4ucmVzb2x2ZVByb3BlcnRpZXMpKHsKICAgICAgICAgICAgICAgIHRyYWNlOiB0aGlzLnNlbmQoJ3RyYWNlX3RyYW5zYWN0aW9uJywgW2UuaGFzaF0pLAogICAgICAgICAgICAgICAgdHg6IHRoaXMuZ2V0VHJhbnNhY3Rpb24oZS5oYXNoKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmIChudWxsID09IHQgfHwgbnVsbCA9PSByKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICBsZXQgcywKICAgICAgICAgICAgICAgIG8gPSAhMTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgKHMgPSB0WzBdLnJlc3VsdC5vdXRwdXQpLCAobyA9ICdSZXZlcnRlZCcgPT09IHRbMF0uZXJyb3IpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgaWYgKHMpCiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnQpKCFvLCAnYW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRyYW5zYWN0aW9uIGV4ZWN1dGlvbnMnLCAnQ0FMTF9FWENFUFRJT04nLCB7CiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZ2V0VHJhbnNhY3Rpb25SZXN1bHQnLAogICAgICAgICAgICAgICAgICAgIGRhdGE6IHMsCiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBudWxsLAogICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uOiByLAogICAgICAgICAgICAgICAgICAgIGludm9jYXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0OiBudWxsCiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBzCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICgwLCBuLmFzc2VydCkoITEsICdjb3VsZCBub3QgcGFyc2UgdHJhY2UgcmVzdWx0JywgJ0JBRF9EQVRBJywgeyB2YWx1ZTogdCB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYXdhaXQgc3VwZXIuX3BlcmZvcm0oZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpc0NvbW11bml0eVJlc291cmNlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlLZXkgPT09IGE7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZ2V0UmVxdWVzdChlLCB0KSB7CiAgICAgICAgICAgIG51bGwgPT0gdCAmJiAodCA9IGEpOwogICAgICAgICAgICBjb25zdCByID0gbmV3IG4uRmV0Y2hSZXF1ZXN0KAogICAgICAgICAgICAgIGBodHRwczovLyR7KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnbWFpbm5ldCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdldGgtbWFpbm5ldC5hbGNoZW15YXBpLmlvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2V0aC1nb2VybGkuZy5hbGNoZW15LmNvbSc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlcG9saWEnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnZXRoLXNlcG9saWEuZy5hbGNoZW15LmNvbSc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2FyYml0cnVtJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FyYi1tYWlubmV0LmcuYWxjaGVteS5jb20nOwogICAgICAgICAgICAgICAgICBjYXNlICdhcmJpdHJ1bS1nb2VybGknOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnYXJiLWdvZXJsaS5nLmFsY2hlbXkuY29tJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnYmFzZSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdiYXNlLW1haW5uZXQuZy5hbGNoZW15LmNvbSc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2Jhc2UtZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2Jhc2UtZ29lcmxpLmcuYWxjaGVteS5jb20nOwogICAgICAgICAgICAgICAgICBjYXNlICdtYXRpYyc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdwb2x5Z29uLW1haW5uZXQuZy5hbGNoZW15LmNvbSc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdGljLW11bWJhaSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdwb2x5Z29uLW11bWJhaS5nLmFsY2hlbXkuY29tJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnb3B0aW1pc20nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnb3B0LW1haW5uZXQuZy5hbGNoZW15LmNvbSc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ29wdGltaXNtLWdvZXJsaSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdvcHQtZ29lcmxpLmcuYWxjaGVteS5jb20nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCAndW5zdXBwb3J0ZWQgbmV0d29yaycsICduZXR3b3JrJywgZSk7CiAgICAgICAgICAgICAgfSkoZS5uYW1lKX0vdjIvJHt0fWAKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoci5hbGxvd0d6aXAgPSAhMCksCiAgICAgICAgICAgICAgdCA9PT0gYSAmJiAoci5yZXRyeUZ1bmMgPSBhc3luYyAoZSwgdCwgcikgPT4gKCgwLCBzLnNob3dUaHJvdHRsZU1lc3NhZ2UpKCdhbGNoZW15JyksICEwKSksCiAgICAgICAgICAgICAgcgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkFsY2hlbXlQcm92aWRlciA9IGM7CiAgICAgIH0sCiAgICAgIDQ1MjA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkFua3JQcm92aWRlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTMxNiksCiAgICAgICAgICBzID0gcigzODAwKSwKICAgICAgICAgIG8gPSByKDExMDQpLAogICAgICAgICAgaSA9IHIoOTUyOCksCiAgICAgICAgICBhID0gJzlmN2Q5MjliMDE4Y2RmZmIzMzg1MTdlZmEwNmY1ODM1OWU4NmZmMWZmZDM1MGJjODg5NzM4NTIzNjU5ZTc5NzInOwogICAgICAgIGNsYXNzIGMgZXh0ZW5kcyBpLkpzb25ScGNQcm92aWRlciB7CiAgICAgICAgICBhcGlLZXk7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9ICdtYWlubmV0Jyk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBvLk5ldHdvcmsuZnJvbShlKTsKICAgICAgICAgICAgbnVsbCA9PSB0ICYmICh0ID0gYSk7CiAgICAgICAgICAgIGNvbnN0IHMgPSB7IHBvbGxpbmc6ICEwLCBzdGF0aWNOZXR3b3JrOiByIH07CiAgICAgICAgICAgIHN1cGVyKGMuZ2V0UmVxdWVzdChyLCB0KSwgciwgcyksICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgYXBpS2V5OiB0IH0pOwogICAgICAgICAgfQogICAgICAgICAgX2dldFByb3ZpZGVyKGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IGMoZSwgdGhpcy5hcGlLZXkpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICByZXR1cm4gc3VwZXIuX2dldFByb3ZpZGVyKGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGdldFJlcXVlc3QoZSwgdCkgewogICAgICAgICAgICBudWxsID09IHQgJiYgKHQgPSBhKTsKICAgICAgICAgICAgY29uc3QgciA9IG5ldyBuLkZldGNoUmVxdWVzdCgKICAgICAgICAgICAgICBgaHR0cHM6Ly8keyhmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ21haW5uZXQnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAncnBjLmFua3IuY29tL2V0aCc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2dvZXJsaSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdycGMuYW5rci5jb20vZXRoX2dvZXJsaSc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdGljJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3JwYy5hbmtyLmNvbS9wb2x5Z29uJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnYXJiaXRydW0nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAncnBjLmFua3IuY29tL2FyYml0cnVtJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSghMSwgJ3Vuc3VwcG9ydGVkIG5ldHdvcmsnLCAnbmV0d29yaycsIGUpOwogICAgICAgICAgICAgIH0pKGUubmFtZSl9LyR7dH1gCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKHIuYWxsb3dHemlwID0gITApLAogICAgICAgICAgICAgIHQgPT09IGEgJiYgKHIucmV0cnlGdW5jID0gYXN5bmMgKGUsIHQsIHIpID0-ICgoMCwgcy5zaG93VGhyb3R0bGVNZXNzYWdlKSgnQW5rclByb3ZpZGVyJyksICEwKSksCiAgICAgICAgICAgICAgcgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZ2V0UnBjRXJyb3IoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICdldGhfc2VuZFJhd1RyYW5zYWN0aW9uJyA9PT0gZS5tZXRob2QgJiYKICAgICAgICAgICAgICAgIHQgJiYKICAgICAgICAgICAgICAgIHQuZXJyb3IgJiYKICAgICAgICAgICAgICAgICdJTlRFUk5BTF9FUlJPUjogY291bGQgbm90IHJlcGxhY2UgZXhpc3RpbmcgdHgnID09PSB0LmVycm9yLm1lc3NhZ2UgJiYKICAgICAgICAgICAgICAgICh0LmVycm9yLm1lc3NhZ2UgPSAncmVwbGFjZW1lbnQgdHJhbnNhY3Rpb24gdW5kZXJwcmljZWQnKSwKICAgICAgICAgICAgICBzdXBlci5nZXRScGNFcnJvcihlLCB0KQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgaXNDb21tdW5pdHlSZXNvdXJjZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpS2V5ID09PSBhOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkFua3JQcm92aWRlciA9IGM7CiAgICAgIH0sCiAgICAgIDkyOTY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkJyb3dzZXJQcm92aWRlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTMxNiksCiAgICAgICAgICBzID0gcig5NTI4KTsKICAgICAgICBjbGFzcyBvIGV4dGVuZHMgcy5Kc29uUnBjQXBpUG9sbGluZ1Byb3ZpZGVyIHsKICAgICAgICAgICNpZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgc3VwZXIodCwgeyBiYXRjaE1heENvdW50OiAxIH0pLAogICAgICAgICAgICAgICh0aGlzLiNpZSA9IGFzeW5jICh0LCByKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBuID0geyBtZXRob2Q6IHQsIHBhcmFtczogciB9OwogICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAnc2VuZEVpcDExOTNSZXF1ZXN0JywgcGF5bG9hZDogbiB9KTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBlLnJlcXVlc3Qobik7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVtaXQoJ2RlYnVnJywgeyBhY3Rpb246ICdyZWNlaXZlRWlwMTE5M1Jlc3VsdCcsIHJlc3VsdDogdCB9KSwgdDsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBFcnJvcihlLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICB0aHJvdyAoCiAgICAgICAgICAgICAgICAgICAgKCh0LmNvZGUgPSBlLmNvZGUpLAogICAgICAgICAgICAgICAgICAgICh0LmRhdGEgPSBlLmRhdGEpLAogICAgICAgICAgICAgICAgICAgICh0LnBheWxvYWQgPSBuKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlYnVnJywgeyBhY3Rpb246ICdyZWNlaXZlRWlwMTE5M0Vycm9yJywgZXJyb3I6IHQgfSksCiAgICAgICAgICAgICAgICAgICAgdCkKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHNlbmQoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnQoKSwgYXdhaXQgc3VwZXIuc2VuZChlLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIF9zZW5kKGUpIHsKICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCFBcnJheS5pc0FycmF5KGUpLCAnRUlQLTExOTMgZG9lcyBub3Qgc3VwcG9ydCBiYXRjaCByZXF1ZXN0JywgJ3BheWxvYWQnLCBlKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy4jaWUoZS5tZXRob2QsIGUucGFyYW1zIHx8IFtdKTsKICAgICAgICAgICAgICByZXR1cm4gW3sgaWQ6IGUuaWQsIHJlc3VsdDogdCB9XTsKICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgIHJldHVybiBbeyBpZDogZS5pZCwgZXJyb3I6IHsgY29kZTogdC5jb2RlLCBkYXRhOiB0LmRhdGEsIG1lc3NhZ2U6IHQubWVzc2FnZSB9IH1dOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBnZXRScGNFcnJvcihlLCB0KSB7CiAgICAgICAgICAgIHN3aXRjaCAoKHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSkuZXJyb3IuY29kZSB8fCAtMSkgewogICAgICAgICAgICAgIGNhc2UgNDAwMToKICAgICAgICAgICAgICAgIHQuZXJyb3IubWVzc2FnZSA9IGBldGhlcnMtdXNlci1kZW5pZWQ6ICR7dC5lcnJvci5tZXNzYWdlfWA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBjYXNlIDQyMDA6CiAgICAgICAgICAgICAgICB0LmVycm9yLm1lc3NhZ2UgPSBgZXRoZXJzLXVuc3VwcG9ydGVkOiAke3QuZXJyb3IubWVzc2FnZX1gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXRScGNFcnJvcihlLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGhhc1NpZ25lcihlKSB7CiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9IDApOwogICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zZW5kKCdldGhfYWNjb3VudHMnLCBbXSk7CiAgICAgICAgICAgIHJldHVybiAnbnVtYmVyJyA9PSB0eXBlb2YgZQogICAgICAgICAgICAgID8gdC5sZW5ndGggPiBlCiAgICAgICAgICAgICAgOiAoKGUgPSBlLnRvTG93ZXJDYXNlKCkpLCAwICE9PSB0LmZpbHRlcigodCkgPT4gdC50b0xvd2VyQ2FzZSgpID09PSBlKS5sZW5ndGgpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0U2lnbmVyKGUpIHsKICAgICAgICAgICAgaWYgKChudWxsID09IGUgJiYgKGUgPSAwKSwgIShhd2FpdCB0aGlzLmhhc1NpZ25lcihlKSkpKQogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNpZSgnZXRoX3JlcXVlc3RBY2NvdW50cycsIFtdKTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5wYXlsb2FkOwogICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5nZXRScGNFcnJvcih0LCB7IGlkOiB0LmlkLCBlcnJvcjogZSB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBhd2FpdCBzdXBlci5nZXRTaWduZXIoZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuQnJvd3NlclByb3ZpZGVyID0gbzsKICAgICAgfSwKICAgICAgNTE5NjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuQ2xvdWRmbGFyZVByb3ZpZGVyID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSByKDExMDQpLAogICAgICAgICAgbyA9IHIoOTUyOCk7CiAgICAgICAgY2xhc3MgaSBleHRlbmRzIG8uSnNvblJwY1Byb3ZpZGVyIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgbnVsbCA9PSBlICYmIChlID0gJ21haW5uZXQnKTsKICAgICAgICAgICAgY29uc3QgdCA9IHMuTmV0d29yay5mcm9tKGUpOwogICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoJ21haW5uZXQnID09PSB0Lm5hbWUsICd1bnN1cHBvcnRlZCBuZXR3b3JrJywgJ25ldHdvcmsnLCBlKSwKICAgICAgICAgICAgICBzdXBlcignaHR0cHM6Ly9jbG91ZGZsYXJlLWV0aC5jb20vJywgdCwgeyBzdGF0aWNOZXR3b3JrOiB0IH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkNsb3VkZmxhcmVQcm92aWRlciA9IGk7CiAgICAgIH0sCiAgICAgIDU0MDA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkV0aGVyc2NhblByb3ZpZGVyID0gdC5FdGhlcnNjYW5QbHVnaW4gPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDIyNzYpLAogICAgICAgICAgcyA9IHIoOTUyMCksCiAgICAgICAgICBvID0gcigxMTI0KSwKICAgICAgICAgIGkgPSByKDUzMTYpLAogICAgICAgICAgYSA9IHIoODAxMiksCiAgICAgICAgICBjID0gcigxMTA0KSwKICAgICAgICAgIHUgPSByKDg3MDApLAogICAgICAgICAgbCA9IHIoMzgwMCksCiAgICAgICAgICBkID0gJ29yZy5ldGhlcnMucGx1Z2lucy5wcm92aWRlci5FdGhlcnNjYW4nOwogICAgICAgIGNsYXNzIGYgZXh0ZW5kcyB1Lk5ldHdvcmtQbHVnaW4gewogICAgICAgICAgYmFzZVVybDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgc3VwZXIoZCksICgwLCBpLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgYmFzZVVybDogZSB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IGYodGhpcy5iYXNlVXJsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5FdGhlcnNjYW5QbHVnaW4gPSBmOwogICAgICAgIGNvbnN0IGggPSBbJ2VuYWJsZUNjaXBSZWFkJ107CiAgICAgICAgbGV0IGcgPSAxOwogICAgICAgIGNsYXNzIHAgZXh0ZW5kcyBhLkFic3RyYWN0UHJvdmlkZXIgewogICAgICAgICAgbmV0d29yazsKICAgICAgICAgIGFwaUtleTsKICAgICAgICAgICNhZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IG51bGwgIT0gdCA_IHQgOiBudWxsOwogICAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgICBjb25zdCBuID0gYy5OZXR3b3JrLmZyb20oZSk7CiAgICAgICAgICAgICh0aGlzLiNhZSA9IG4uZ2V0UGx1Z2luKGQpKSwgKDAsIGkuZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBhcGlLZXk6IHIsIG5ldHdvcms6IG4gfSksIHRoaXMuZ2V0QmFzZVVybCgpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0QmFzZVVybCgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuI2FlKSByZXR1cm4gdGhpcy4jYWUuYmFzZVVybDsKICAgICAgICAgICAgc3dpdGNoICh0aGlzLm5ldHdvcmsubmFtZSkgewogICAgICAgICAgICAgIGNhc2UgJ21haW5uZXQnOgogICAgICAgICAgICAgICAgcmV0dXJuICdodHRwczovL2FwaS5ldGhlcnNjYW4uaW8nOwogICAgICAgICAgICAgIGNhc2UgJ2dvZXJsaSc6CiAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vYXBpLWdvZXJsaS5ldGhlcnNjYW4uaW8nOwogICAgICAgICAgICAgIGNhc2UgJ3NlcG9saWEnOgogICAgICAgICAgICAgICAgcmV0dXJuICdodHRwczovL2FwaS1zZXBvbGlhLmV0aGVyc2Nhbi5pbyc7CiAgICAgICAgICAgICAgY2FzZSAnYXJiaXRydW0nOgogICAgICAgICAgICAgICAgcmV0dXJuICdodHRwczovL2FwaS5hcmJpc2Nhbi5pbyc7CiAgICAgICAgICAgICAgY2FzZSAnYXJiaXRydW0tZ29lcmxpJzoKICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9hcGktZ29lcmxpLmFyYmlzY2FuLmlvJzsKICAgICAgICAgICAgICBjYXNlICdtYXRpYyc6CiAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vYXBpLnBvbHlnb25zY2FuLmNvbSc7CiAgICAgICAgICAgICAgY2FzZSAnbWF0aWMtbXVtYmFpJzoKICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9hcGktdGVzdG5ldC5wb2x5Z29uc2Nhbi5jb20nOwogICAgICAgICAgICAgIGNhc2UgJ29wdGltaXNtJzoKICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9hcGktb3B0aW1pc3RpYy5ldGhlcnNjYW4uaW8nOwogICAgICAgICAgICAgIGNhc2UgJ29wdGltaXNtLWdvZXJsaSc6CiAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vYXBpLWdvZXJsaS1vcHRpbWlzdGljLmV0aGVyc2Nhbi5pbyc7CiAgICAgICAgICAgICAgY2FzZSAnYm5iJzoKICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cDovL2FwaS5ic2NzY2FuLmNvbSc7CiAgICAgICAgICAgICAgY2FzZSAnYm5idCc6CiAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHA6Ly9hcGktdGVzdG5ldC5ic2NzY2FuLmNvbSc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKCExLCAndW5zdXBwb3J0ZWQgbmV0d29yaycsICduZXR3b3JrJywgdGhpcy5uZXR3b3JrKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldFVybChlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBPYmplY3Qua2V5cyh0KS5yZWR1Y2UoKGUsIHIpID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0W3JdOwogICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gbiAmJiAoZSArPSBgJiR7cn09JHtufWApLCBlOwogICAgICAgICAgICAgIH0sICcnKSwKICAgICAgICAgICAgICBuID0gdGhpcy5hcGlLZXkgPyBgJmFwaWtleT0ke3RoaXMuYXBpS2V5fWAgOiAnJzsKICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0QmFzZVVybCgpfS9hcGk_bW9kdWxlPSR7ZX0ke3J9JHtufWA7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRQb3N0VXJsKCkgewogICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5nZXRCYXNlVXJsKCl9L2FwaWA7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRQb3N0RGF0YShlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiAodC5tb2R1bGUgPSBlKSwgKHQuYXBpa2V5ID0gdGhpcy5hcGlLZXkpLCB0OwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZGV0ZWN0TmV0d29yaygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV0d29yazsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGZldGNoKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgbiA9IGcrKywKICAgICAgICAgICAgICBzID0gciA_IHRoaXMuZ2V0UG9zdFVybCgpIDogdGhpcy5nZXRVcmwoZSwgdCksCiAgICAgICAgICAgICAgbyA9IHIgPyB0aGlzLmdldFBvc3REYXRhKGUsIHQpIDogbnVsbDsKICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAnc2VuZFJlcXVlc3QnLCBpZDogbiwgdXJsOiBzLCBwYXlsb2FkOiBvIH0pOwogICAgICAgICAgICBjb25zdCBhID0gbmV3IGkuRmV0Y2hSZXF1ZXN0KHMpOwogICAgICAgICAgICBhLnNldFRocm90dGxlUGFyYW1zKHsgc2xvdEludGVydmFsOiAxZTMgfSksCiAgICAgICAgICAgICAgKGEucmV0cnlGdW5jID0gKGUsIHQsIHIpID0-ICgKICAgICAgICAgICAgICAgIHRoaXMuaXNDb21tdW5pdHlSZXNvdXJjZSgpICYmICgwLCBsLnNob3dUaHJvdHRsZU1lc3NhZ2UpKCdFdGhlcnNjYW4nKSwgUHJvbWlzZS5yZXNvbHZlKCEwKQogICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgIChhLnByb2Nlc3NGdW5jID0gYXN5bmMgKHQsIHIpID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSByLmhhc0JvZHkoKSA_IEpTT04ucGFyc2UoKDAsIGkudG9VdGY4U3RyaW5nKShyLmJvZHkpKSA6IHt9LAogICAgICAgICAgICAgICAgICBvID0gKCdzdHJpbmcnID09IHR5cGVvZiBzLnJlc3VsdCA_IHMucmVzdWx0IDogJycpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigncmF0ZSBsaW1pdCcpID49IDA7CiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAncHJveHknID09PSBlCiAgICAgICAgICAgICAgICAgICAgPyBzICYmCiAgICAgICAgICAgICAgICAgICAgICAwID09IHMuc3RhdHVzICYmCiAgICAgICAgICAgICAgICAgICAgICAnTk9UT0snID09IHMubWVzc2FnZSAmJgogICAgICAgICAgICAgICAgICAgICAgbyAmJgogICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZW1pdCgnZGVidWcnLCB7IGFjdGlvbjogJ3JlY2VpdmVFcnJvcicsIGlkOiBuLCByZWFzb246ICdwcm94eS1OT1RPSycsIGVycm9yOiBzIH0pLAogICAgICAgICAgICAgICAgICAgICAgci50aHJvd1Rocm90dGxlRXJyb3Iocy5yZXN1bHQsIDJlMykpCiAgICAgICAgICAgICAgICAgICAgOiBvICYmCiAgICAgICAgICAgICAgICAgICAgICAodGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAncmVjZWl2ZUVycm9yJywgaWQ6IG4sIHJlYXNvbjogJ251bGwgcmVzdWx0JywgZXJyb3I6IHMucmVzdWx0IH0pLAogICAgICAgICAgICAgICAgICAgICAgci50aHJvd1Rocm90dGxlRXJyb3Iocy5yZXN1bHQsIDJlMykpLAogICAgICAgICAgICAgICAgICByCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG8gJiYKICAgICAgICAgICAgICAgIChhLnNldEhlYWRlcignY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCcpLAogICAgICAgICAgICAgICAgKGEuYm9keSA9IE9iamVjdC5rZXlzKG8pCiAgICAgICAgICAgICAgICAgIC5tYXAoKGUpID0-IGAke2V9PSR7b1tlXX1gKQogICAgICAgICAgICAgICAgICAuam9pbignJicpKSk7CiAgICAgICAgICAgIGNvbnN0IGMgPSBhd2FpdCBhLnNlbmQoKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjLmFzc2VydE9rKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlYnVnJywgeyBhY3Rpb246ICdyZWNlaXZlRXJyb3InLCBpZDogbiwgZXJyb3I6IGUsIHJlYXNvbjogJ2Fzc2VydE9rJyB9KSwKICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkoITEsICdyZXNwb25zZSBlcnJvcicsICdTRVJWRVJfRVJST1InLCB7IHJlcXVlc3Q6IGEsIHJlc3BvbnNlOiBjIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGMuaGFzQm9keSgpIHx8CiAgICAgICAgICAgICAgKHRoaXMuZW1pdCgnZGVidWcnLCB7IGFjdGlvbjogJ3JlY2VpdmVFcnJvcicsIGlkOiBuLCBlcnJvcjogJ21pc3NpbmcgYm9keScsIHJlYXNvbjogJ251bGwgYm9keScgfSksCiAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KSghMSwgJ21pc3NpbmcgcmVzcG9uc2UnLCAnU0VSVkVSX0VSUk9SJywgeyByZXF1ZXN0OiBhLCByZXNwb25zZTogYyB9KSk7CiAgICAgICAgICAgIGNvbnN0IHUgPSBKU09OLnBhcnNlKCgwLCBpLnRvVXRmOFN0cmluZykoYy5ib2R5KSk7CiAgICAgICAgICAgIHJldHVybiAncHJveHknID09PSBlCiAgICAgICAgICAgICAgPyAoJzIuMCcgIT0gdS5qc29ucnBjICYmCiAgICAgICAgICAgICAgICAgICh0aGlzLmVtaXQoJ2RlYnVnJywgeyBhY3Rpb246ICdyZWNlaXZlRXJyb3InLCBpZDogbiwgcmVzdWx0OiB1LCByZWFzb246ICdpbnZhbGlkIEpTT04tUlBDJyB9KSwKICAgICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KSghMSwgImludmFsaWQgSlNPTi1SUEMgcmVzcG9uc2UgKG1pc3NpbmcganNvbnJwYz0nMi4wJykiLCAnU0VSVkVSX0VSUk9SJywgewogICAgICAgICAgICAgICAgICAgIHJlcXVlc3Q6IGEsCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2U6IGMsCiAgICAgICAgICAgICAgICAgICAgaW5mbzogeyByZXN1bHQ6IHUgfQogICAgICAgICAgICAgICAgICB9KSksCiAgICAgICAgICAgICAgICB1LmVycm9yICYmCiAgICAgICAgICAgICAgICAgICh0aGlzLmVtaXQoJ2RlYnVnJywgeyBhY3Rpb246ICdyZWNlaXZlRXJyb3InLCBpZDogbiwgcmVzdWx0OiB1LCByZWFzb246ICdKU09OLVJQQyBlcnJvcicgfSksCiAgICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkoITEsICdlcnJvciByZXNwb25zZScsICdTRVJWRVJfRVJST1InLCB7CiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdDogYSwKICAgICAgICAgICAgICAgICAgICByZXNwb25zZTogYywKICAgICAgICAgICAgICAgICAgICBpbmZvOiB7IHJlc3VsdDogdSB9CiAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVidWcnLCB7IGFjdGlvbjogJ3JlY2VpdmVSZXF1ZXN0JywgaWQ6IG4sIHJlc3VsdDogdSB9KSwKICAgICAgICAgICAgICAgIHUucmVzdWx0KQogICAgICAgICAgICAgIDogMCAhPSB1LnN0YXR1cyB8fCAoJ05vIHJlY29yZHMgZm91bmQnICE9PSB1Lm1lc3NhZ2UgJiYgJ05vIHRyYW5zYWN0aW9ucyBmb3VuZCcgIT09IHUubWVzc2FnZSkKICAgICAgICAgICAgICAgID8gKCgxICE9IHUuc3RhdHVzIHx8ICgnc3RyaW5nJyA9PSB0eXBlb2YgdS5tZXNzYWdlICYmICF1Lm1lc3NhZ2UubWF0Y2goL15PSy8pKSkgJiYKICAgICAgICAgICAgICAgICAgICAodGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAncmVjZWl2ZUVycm9yJywgaWQ6IG4sIHJlc3VsdDogdSB9KSwKICAgICAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnQpKCExLCAnZXJyb3IgcmVzcG9uc2UnLCAnU0VSVkVSX0VSUk9SJywgewogICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdDogYSwKICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBjLAogICAgICAgICAgICAgICAgICAgICAgaW5mbzogeyByZXN1bHQ6IHUgfQogICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAncmVjZWl2ZVJlcXVlc3QnLCBpZDogbiwgcmVzdWx0OiB1IH0pLAogICAgICAgICAgICAgICAgICB1LnJlc3VsdCkKICAgICAgICAgICAgICAgIDogKHRoaXMuZW1pdCgnZGVidWcnLCB7IGFjdGlvbjogJ3JlY2VpdmVSZXF1ZXN0JywgaWQ6IG4sIHJlc3VsdDogdSB9KSwgdS5yZXN1bHQpOwogICAgICAgICAgfQogICAgICAgICAgX2dldFRyYW5zYWN0aW9uUG9zdERhdGEoZSkgewogICAgICAgICAgICBjb25zdCB0ID0ge307CiAgICAgICAgICAgIGZvciAobGV0IHIgaW4gZSkgewogICAgICAgICAgICAgIGlmIChoLmluZGV4T2YocikgPj0gMCkgY29udGludWU7CiAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZVtyXSkgY29udGludWU7CiAgICAgICAgICAgICAgbGV0IG4gPSBlW3JdOwogICAgICAgICAgICAgICgndHlwZScgPT09IHIgJiYgMCA9PT0gbikgfHwKICAgICAgICAgICAgICAgICgnYmxvY2tUYWcnID09PSByICYmICdsYXRlc3QnID09PSBuKSB8fAogICAgICAgICAgICAgICAgKChuID0gewogICAgICAgICAgICAgICAgICB0eXBlOiAhMCwKICAgICAgICAgICAgICAgICAgZ2FzTGltaXQ6ICEwLAogICAgICAgICAgICAgICAgICBnYXNQcmljZTogITAsCiAgICAgICAgICAgICAgICAgIG1heEZlZVBlckdzOiAhMCwKICAgICAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6ICEwLAogICAgICAgICAgICAgICAgICBub25jZTogITAsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAhMAogICAgICAgICAgICAgICAgfVtyXQogICAgICAgICAgICAgICAgICA_ICgwLCBpLnRvUXVhbnRpdHkpKG4pCiAgICAgICAgICAgICAgICAgIDogJ2FjY2Vzc0xpc3QnID09PSByCiAgICAgICAgICAgICAgICAgICAgPyAnWycgKwogICAgICAgICAgICAgICAgICAgICAgKDAsIG8uYWNjZXNzTGlzdGlmeSkobikKICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZSkgPT4gYHthZGRyZXNzOiIke2UuYWRkcmVzc30iLHN0b3JhZ2VLZXlzOlsiJHtlLnN0b3JhZ2VLZXlzLmpvaW4oJyIsIicpfSJdfWApCiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcsJykgKwogICAgICAgICAgICAgICAgICAgICAgJ10nCiAgICAgICAgICAgICAgICAgICAgOiAoMCwgaS5oZXhsaWZ5KShuKSksCiAgICAgICAgICAgICAgICAodFtyXSA9IG4pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgIH0KICAgICAgICAgIF9jaGVja0Vycm9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgbGV0IHMgPSAnJzsKICAgICAgICAgICAgaWYgKCgwLCBpLmlzRXJyb3IpKHQsICdTRVJWRVJfRVJST1InKSkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBzID0gdC5pbmZvLnJlc3VsdC5lcnJvci5tZXNzYWdlOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgaWYgKCFzKQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgcyA9IHQuaW5mby5tZXNzYWdlOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgKCdlc3RpbWF0ZUdhcycgPT09IGUubWV0aG9kICYmCiAgICAgICAgICAgICAgICAhcy5tYXRjaCgvcmV2ZXJ0L2kpICYmCiAgICAgICAgICAgICAgICBzLm1hdGNoKC9pbnN1ZmZpY2llbnQgZnVuZHMvaSkgJiYKICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkoITEsICdpbnN1ZmZpY2llbnQgZnVuZHMnLCAnSU5TVUZGSUNJRU5UX0ZVTkRTJywgeyB0cmFuc2FjdGlvbjogZS50cmFuc2FjdGlvbiB9KSwKICAgICAgICAgICAgICAoJ2NhbGwnID09PSBlLm1ldGhvZCB8fCAnZXN0aW1hdGVHYXMnID09PSBlLm1ldGhvZCkgJiYgcy5tYXRjaCgvZXhlY3V0aW9uIHJldmVydGVkL2kpKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBsZXQgciA9ICcnOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByID0gdC5pbmZvLnJlc3VsdC5lcnJvci5kYXRhOwogICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgICAgY29uc3QgcyA9IG4uQWJpQ29kZXIuZ2V0QnVpbHRpbkNhbGxFeGNlcHRpb24oZS5tZXRob2QsIGUudHJhbnNhY3Rpb24sIHIpOwogICAgICAgICAgICAgIHRocm93ICgocy5pbmZvID0geyByZXF1ZXN0OiBlLCBlcnJvcjogdCB9KSwgcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHMgJiYgJ2Jyb2FkY2FzdFRyYW5zYWN0aW9uJyA9PT0gZS5tZXRob2QpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gby5UcmFuc2FjdGlvbi5mcm9tKGUuc2lnbmVkVHJhbnNhY3Rpb24pOwogICAgICAgICAgICAgIHMubWF0Y2goL3JlcGxhY2VtZW50L2kpICYmCiAgICAgICAgICAgICAgICBzLm1hdGNoKC91bmRlcnByaWNlZC9pKSAmJgogICAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KSghMSwgJ3JlcGxhY2VtZW50IGZlZSB0b28gbG93JywgJ1JFUExBQ0VNRU5UX1VOREVSUFJJQ0VEJywgeyB0cmFuc2FjdGlvbjogdCB9KSwKICAgICAgICAgICAgICAgIHMubWF0Y2goL2luc3VmZmljaWVudCBmdW5kcy8pICYmCiAgICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkoITEsICdpbnN1ZmZpY2llbnQgZnVuZHMgZm9yIGludHJpbnNpYyB0cmFuc2FjdGlvbiBjb3N0JywgJ0lOU1VGRklDSUVOVF9GVU5EUycsIHsKICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdAogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHMubWF0Y2goL3NhbWUgaGFzaCB3YXMgYWxyZWFkeSBpbXBvcnRlZHx0cmFuc2FjdGlvbiBub25jZSBpcyB0b28gbG93fG5vbmNlIHRvbyBsb3cvKSAmJgogICAgICAgICAgICAgICAgICAoMCwgaS5hc3NlcnQpKCExLCAnbm9uY2UgaGFzIGFscmVhZHkgYmVlbiB1c2VkJywgJ05PTkNFX0VYUElSRUQnLCB7IHRyYW5zYWN0aW9uOiB0IH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IHQ7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBfZGV0ZWN0TmV0d29yaygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV0d29yazsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIF9wZXJmb3JtKGUpIHsKICAgICAgICAgICAgc3dpdGNoIChlLm1ldGhvZCkgewogICAgICAgICAgICAgIGNhc2UgJ2NoYWluSWQnOgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV0d29yay5jaGFpbklkOwogICAgICAgICAgICAgIGNhc2UgJ2dldEJsb2NrTnVtYmVyJzoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoKCdwcm94eScsIHsgYWN0aW9uOiAnZXRoX2Jsb2NrTnVtYmVyJyB9KTsKICAgICAgICAgICAgICBjYXNlICdnZXRHYXNQcmljZSc6CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaCgncHJveHknLCB7IGFjdGlvbjogJ2V0aF9nYXNQcmljZScgfSk7CiAgICAgICAgICAgICAgY2FzZSAnZ2V0UHJpb3JpdHlGZWUnOgogICAgICAgICAgICAgICAgaWYgKCdtYWlubmV0JyA9PT0gdGhpcy5uZXR3b3JrLm5hbWUpIHJldHVybiAnMTAwMDAwMDAwMCc7CiAgICAgICAgICAgICAgICBpZiAoJ29wdGltaXNtJyA9PT0gdGhpcy5uZXR3b3JrLm5hbWUpIHJldHVybiAnMTAwMDAwMCc7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhbGxiYWNrIG9udG8gdGhlIEFic3RyYWN0UHJvdmlkZXIgZGVmYXVsdCcpOwogICAgICAgICAgICAgIGNhc2UgJ2dldEJhbGFuY2UnOgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goJ2FjY291bnQnLCB7IGFjdGlvbjogJ2JhbGFuY2UnLCBhZGRyZXNzOiBlLmFkZHJlc3MsIHRhZzogZS5ibG9ja1RhZyB9KTsKICAgICAgICAgICAgICBjYXNlICdnZXRUcmFuc2FjdGlvbkNvdW50JzoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoKCdwcm94eScsIHsgYWN0aW9uOiAnZXRoX2dldFRyYW5zYWN0aW9uQ291bnQnLCBhZGRyZXNzOiBlLmFkZHJlc3MsIHRhZzogZS5ibG9ja1RhZyB9KTsKICAgICAgICAgICAgICBjYXNlICdnZXRDb2RlJzoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoKCdwcm94eScsIHsgYWN0aW9uOiAnZXRoX2dldENvZGUnLCBhZGRyZXNzOiBlLmFkZHJlc3MsIHRhZzogZS5ibG9ja1RhZyB9KTsKICAgICAgICAgICAgICBjYXNlICdnZXRTdG9yYWdlJzoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoKCdwcm94eScsIHsKICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnZXRoX2dldFN0b3JhZ2VBdCcsCiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGUuYWRkcmVzcywKICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGUucG9zaXRpb24sCiAgICAgICAgICAgICAgICAgIHRhZzogZS5ibG9ja1RhZwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSAnYnJvYWRjYXN0VHJhbnNhY3Rpb24nOgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goJ3Byb3h5JywgeyBhY3Rpb246ICdldGhfc2VuZFJhd1RyYW5zYWN0aW9uJywgaGV4OiBlLnNpZ25lZFRyYW5zYWN0aW9uIH0sICEwKS5jYXRjaCgKICAgICAgICAgICAgICAgICAgKHQpID0-IHRoaXMuX2NoZWNrRXJyb3IoZSwgdCwgZS5zaWduZWRUcmFuc2FjdGlvbikKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgY2FzZSAnZ2V0QmxvY2snOgogICAgICAgICAgICAgICAgaWYgKCdibG9ja1RhZycgaW4gZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goJ3Byb3h5JywgewogICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2V0aF9nZXRCbG9ja0J5TnVtYmVyJywKICAgICAgICAgICAgICAgICAgICB0YWc6IGUuYmxvY2tUYWcsCiAgICAgICAgICAgICAgICAgICAgYm9vbGVhbjogZS5pbmNsdWRlVHJhbnNhY3Rpb25zID8gJ3RydWUnIDogJ2ZhbHNlJwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICgwLCBpLmFzc2VydCkoITEsICdnZXRCbG9jayBieSBibG9ja0hhc2ggbm90IHN1cHBvcnRlZCBieSBFdGhlcnNjYW4nLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdnZXRCbG9jayhibG9ja0hhc2gpJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzZSAnZ2V0VHJhbnNhY3Rpb24nOgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goJ3Byb3h5JywgeyBhY3Rpb246ICdldGhfZ2V0VHJhbnNhY3Rpb25CeUhhc2gnLCB0eGhhc2g6IGUuaGFzaCB9KTsKICAgICAgICAgICAgICBjYXNlICdnZXRUcmFuc2FjdGlvblJlY2VpcHQnOgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goJ3Byb3h5JywgeyBhY3Rpb246ICdldGhfZ2V0VHJhbnNhY3Rpb25SZWNlaXB0JywgdHhoYXNoOiBlLmhhc2ggfSk7CiAgICAgICAgICAgICAgY2FzZSAnY2FsbCc6IHsKICAgICAgICAgICAgICAgIGlmICgnbGF0ZXN0JyAhPT0gZS5ibG9ja1RhZykgdGhyb3cgbmV3IEVycm9yKCdFdGhlcnNjYW5Qcm92aWRlciBkb2VzIG5vdCBzdXBwb3J0IGJsb2NrVGFnIGZvciBjYWxsJyk7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5fZ2V0VHJhbnNhY3Rpb25Qb3N0RGF0YShlLnRyYW5zYWN0aW9uKTsKICAgICAgICAgICAgICAgICh0Lm1vZHVsZSA9ICdwcm94eScpLCAodC5hY3Rpb24gPSAnZXRoX2NhbGwnKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoKCdwcm94eScsIHQsICEwKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrRXJyb3IoZSwgdCwgZS50cmFuc2FjdGlvbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNhc2UgJ2VzdGltYXRlR2FzJzogewogICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuX2dldFRyYW5zYWN0aW9uUG9zdERhdGEoZS50cmFuc2FjdGlvbik7CiAgICAgICAgICAgICAgICAodC5tb2R1bGUgPSAncHJveHknKSwgKHQuYWN0aW9uID0gJ2V0aF9lc3RpbWF0ZUdhcycpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2goJ3Byb3h5JywgdCwgITApOwogICAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tFcnJvcihlLCB0LCBlLnRyYW5zYWN0aW9uKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN1cGVyLl9wZXJmb3JtKGUpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0TmV0d29yaygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV0d29yazsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldEV0aGVyUHJpY2UoKSB7CiAgICAgICAgICAgIHJldHVybiAnbWFpbm5ldCcgIT09IHRoaXMubmV0d29yay5uYW1lCiAgICAgICAgICAgICAgPyAwCiAgICAgICAgICAgICAgOiBwYXJzZUZsb2F0KChhd2FpdCB0aGlzLmZldGNoKCdzdGF0cycsIHsgYWN0aW9uOiAnZXRocHJpY2UnIH0pKS5ldGh1c2QpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0Q29udHJhY3QoZSkgewogICAgICAgICAgICBsZXQgdCA9IHRoaXMuX2dldEFkZHJlc3MoZSk7CiAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAociA9IHQpICYmICdmdW5jdGlvbicgPT0gdHlwZW9mIHIudGhlbiAmJiAodCA9IGF3YWl0IHQpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLmZldGNoKCdjb250cmFjdCcsIHsgYWN0aW9uOiAnZ2V0YWJpJywgYWRkcmVzczogdCB9KSwKICAgICAgICAgICAgICAgIHIgPSBKU09OLnBhcnNlKGUpOwogICAgICAgICAgICAgIHJldHVybiBuZXcgcy5Db250cmFjdCh0LCByLCB0aGlzKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpc0NvbW11bml0eVJlc291cmNlKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLmFwaUtleTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5FdGhlcnNjYW5Qcm92aWRlciA9IHA7CiAgICAgIH0sCiAgICAgIDE2MTI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkZhbGxiYWNrUHJvdmlkZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoODAxMiksCiAgICAgICAgICBvID0gcigxMTA0KSwKICAgICAgICAgIGkgPSBCaWdJbnQoJzEnKSwKICAgICAgICAgIGEgPSBCaWdJbnQoJzInKTsKICAgICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlLCAoZSwgdCkgPT4gKCdiaWdpbnQnID09IHR5cGVvZiB0ID8geyB0eXBlOiAnYmlnaW50JywgdmFsdWU6IHQudG9TdHJpbmcoKSB9IDogdCkpOwogICAgICAgIH0KICAgICAgICBjb25zdCBsID0geyBzdGFsbFRpbWVvdXQ6IDQwMCwgcHJpb3JpdHk6IDEsIHdlaWdodDogMSB9LAogICAgICAgICAgZCA9IHsKICAgICAgICAgICAgYmxvY2tOdW1iZXI6IC0yLAogICAgICAgICAgICByZXF1ZXN0czogMCwKICAgICAgICAgICAgbGF0ZVJlc3BvbnNlczogMCwKICAgICAgICAgICAgZXJyb3JSZXNwb25zZXM6IDAsCiAgICAgICAgICAgIG91dE9mU3luYzogLTEsCiAgICAgICAgICAgIHVuc3VwcG9ydGVkRXZlbnRzOiAwLAogICAgICAgICAgICByb2xsaW5nRHVyYXRpb246IDAsCiAgICAgICAgICAgIHNjb3JlOiAwLAogICAgICAgICAgICBfbmV0d29yazogbnVsbCwKICAgICAgICAgICAgX3VwZGF0ZU51bWJlcjogbnVsbCwKICAgICAgICAgICAgX3RvdGFsVGltZTogMCwKICAgICAgICAgICAgX2xhc3RGYXRhbEVycm9yOiBudWxsLAogICAgICAgICAgICBfbGFzdEZhdGFsRXJyb3JUaW1lc3RhbXA6IDAKICAgICAgICAgIH07CiAgICAgICAgZnVuY3Rpb24gZihlKSB7CiAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gJ251bGwnOwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHJldHVybiAnWycgKyBlLm1hcChmKS5qb2luKCcsJykgKyAnXSc7CiAgICAgICAgICBpZiAoJ29iamVjdCcgPT0gdHlwZW9mIGUgJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZS50b0pTT04pIHJldHVybiBmKGUudG9KU09OKCkpOwogICAgICAgICAgc3dpdGNoICh0eXBlb2YgZSkgewogICAgICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzoKICAgICAgICAgICAgICByZXR1cm4gZS50b1N0cmluZygpOwogICAgICAgICAgICBjYXNlICdiaWdpbnQnOgogICAgICAgICAgICBjYXNlICdudW1iZXInOgogICAgICAgICAgICAgIHJldHVybiBCaWdJbnQoZSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7CiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6IHsKICAgICAgICAgICAgICBjb25zdCB0ID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgcmV0dXJuIHQuc29ydCgpLCAneycgKyB0Lm1hcCgodCkgPT4gYCR7SlNPTi5zdHJpbmdpZnkodCl9OiR7ZihlW3RdKX1gKS5qb2luKCcsJykgKyAnfSc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRocm93IChjb25zb2xlLmxvZygnQ291bGQgbm90IHNlcmlhbGl6ZScsIGUpLCBuZXcgRXJyb3IoJ0htbS4uLicpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaChlKSB7CiAgICAgICAgICBpZiAoJ2Vycm9yJyBpbiBlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmVycm9yOwogICAgICAgICAgICByZXR1cm4geyB0YWc6IGYodCksIHZhbHVlOiB0IH07CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCB0ID0gZS5yZXN1bHQ7CiAgICAgICAgICByZXR1cm4geyB0YWc6IGYodCksIHZhbHVlOiB0IH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGcoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IG5ldyBNYXAoKTsKICAgICAgICAgIGZvciAoY29uc3QgeyB2YWx1ZTogZSwgdGFnOiBuLCB3ZWlnaHQ6IHMgfSBvZiB0KSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSByLmdldChuKSB8fCB7IHZhbHVlOiBlLCB3ZWlnaHQ6IDAgfTsKICAgICAgICAgICAgKHQud2VpZ2h0ICs9IHMpLCByLnNldChuLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBuID0gbnVsbDsKICAgICAgICAgIGZvciAoY29uc3QgdCBvZiByLnZhbHVlcygpKSB0LndlaWdodCA-PSBlICYmICghbiB8fCB0LndlaWdodCA-IG4ud2VpZ2h0KSAmJiAobiA9IHQpOwogICAgICAgICAgaWYgKG4pIHJldHVybiBuLnZhbHVlOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBwKGUsIHQpIHsKICAgICAgICAgIGxldCByID0gMDsKICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwKCk7CiAgICAgICAgICBsZXQgcyA9IG51bGw7CiAgICAgICAgICBjb25zdCBvID0gW107CiAgICAgICAgICBmb3IgKGNvbnN0IHsgdmFsdWU6IGUsIHRhZzogaSwgd2VpZ2h0OiBhIH0gb2YgdCkKICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmdldChpKSB8fCB7IHZhbHVlOiBlLCB3ZWlnaHQ6IDAgfTsKICAgICAgICAgICAgICAodC53ZWlnaHQgKz0gYSksIG4uc2V0KGksIHQpLCAobnVsbCA9PSBzIHx8IHQud2VpZ2h0ID4gcy53ZWlnaHQpICYmIChzID0gdCk7CiAgICAgICAgICAgIH0gZWxzZSBvLnB1c2goQmlnSW50KGUpKSwgKHIgKz0gYSk7CiAgICAgICAgICBpZiAociA8IGUpIHJldHVybiBzICYmIHMud2VpZ2h0ID49IGUgPyBzLnZhbHVlIDogdm9pZCAwOwogICAgICAgICAgby5zb3J0KChlLCB0KSA9PiAoZSA8IHQgPyAtMSA6IHQgPiBlID8gMSA6IDApKTsKICAgICAgICAgIGNvbnN0IGMgPSBNYXRoLmZsb29yKG8ubGVuZ3RoIC8gMik7CiAgICAgICAgICByZXR1cm4gby5sZW5ndGggJSAyID8gb1tjXSA6IChvW2MgLSAxXSArIG9bY10gKyBpKSAvIGE7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG0oZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IGcoZSwgdCk7CiAgICAgICAgICBpZiAodm9pZCAwICE9PSByKSByZXR1cm4gcjsKICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSBpZiAoZS52YWx1ZSkgcmV0dXJuIGUudmFsdWU7CiAgICAgICAgfQogICAgICAgIGNsYXNzIGIgZXh0ZW5kcyBzLkFic3RyYWN0UHJvdmlkZXIgewogICAgICAgICAgcXVvcnVtOwogICAgICAgICAgZXZlbnRRdW9ydW07CiAgICAgICAgICBldmVudFdvcmtlcnM7CiAgICAgICAgICAjY2U7CiAgICAgICAgICAjdWU7CiAgICAgICAgICAjbGU7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIHN1cGVyKHQsIHIpLAogICAgICAgICAgICAgICh0aGlzLiNjZSA9IGUubWFwKChlKSA9PgogICAgICAgICAgICAgICAgZSBpbnN0YW5jZW9mIHMuQWJzdHJhY3RQcm92aWRlciA_IE9iamVjdC5hc3NpZ24oeyBwcm92aWRlcjogZSB9LCBsLCBkKSA6IE9iamVjdC5hc3NpZ24oe30sIGwsIGUsIGQpCiAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgKHRoaXMuI3VlID0gLTIpLAogICAgICAgICAgICAgICh0aGlzLiNsZSA9IG51bGwpLAogICAgICAgICAgICAgIHIgJiYgbnVsbCAhPSByLnF1b3J1bQogICAgICAgICAgICAgICAgPyAodGhpcy5xdW9ydW0gPSByLnF1b3J1bSkKICAgICAgICAgICAgICAgIDogKHRoaXMucXVvcnVtID0gTWF0aC5jZWlsKHRoaXMuI2NlLnJlZHVjZSgoZSwgdCkgPT4gZSArIHQud2VpZ2h0LCAwKSAvIDIpKSwKICAgICAgICAgICAgICAodGhpcy5ldmVudFF1b3J1bSA9IDEpLAogICAgICAgICAgICAgICh0aGlzLmV2ZW50V29ya2VycyA9IDEpLAogICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgIHRoaXMucXVvcnVtIDw9IHRoaXMuI2NlLnJlZHVjZSgoZSwgdCkgPT4gZSArIHQud2VpZ2h0LCAwKSwKICAgICAgICAgICAgICAgICdxdW9ydW0gZXhjZWVkIHByb3ZpZGVyIHdpZWdodCcsCiAgICAgICAgICAgICAgICAncXVvcnVtJywKICAgICAgICAgICAgICAgIHRoaXMucXVvcnVtCiAgICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwcm92aWRlckNvbmZpZ3MoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNjZS5tYXAoKGUpID0-IHsKICAgICAgICAgICAgICBjb25zdCB0ID0gT2JqZWN0LmFzc2lnbih7fSwgZSk7CiAgICAgICAgICAgICAgZm9yIChjb25zdCBlIGluIHQpICdfJyA9PT0gZVswXSAmJiBkZWxldGUgdFtlXTsKICAgICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBfZGV0ZWN0TmV0d29yaygpIHsKICAgICAgICAgICAgcmV0dXJuIG8uTmV0d29yay5mcm9tKCgwLCBuLmdldEJpZ0ludCkoYXdhaXQgdGhpcy5fcGVyZm9ybSh7IG1ldGhvZDogJ2NoYWluSWQnIH0pKSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBfdHJhbnNsYXRlUGVyZm9ybShlLCB0KSB7CiAgICAgICAgICAgIHN3aXRjaCAodC5tZXRob2QpIHsKICAgICAgICAgICAgICBjYXNlICdicm9hZGNhc3RUcmFuc2FjdGlvbic6CiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZS5icm9hZGNhc3RUcmFuc2FjdGlvbih0LnNpZ25lZFRyYW5zYWN0aW9uKTsKICAgICAgICAgICAgICBjYXNlICdjYWxsJzoKICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBlLmNhbGwoT2JqZWN0LmFzc2lnbih7fSwgdC50cmFuc2FjdGlvbiwgeyBibG9ja1RhZzogdC5ibG9ja1RhZyB9KSk7CiAgICAgICAgICAgICAgY2FzZSAnY2hhaW5JZCc6CiAgICAgICAgICAgICAgICByZXR1cm4gKGF3YWl0IGUuZ2V0TmV0d29yaygpKS5jaGFpbklkOwogICAgICAgICAgICAgIGNhc2UgJ2VzdGltYXRlR2FzJzoKICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBlLmVzdGltYXRlR2FzKHQudHJhbnNhY3Rpb24pOwogICAgICAgICAgICAgIGNhc2UgJ2dldEJhbGFuY2UnOgogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGUuZ2V0QmFsYW5jZSh0LmFkZHJlc3MsIHQuYmxvY2tUYWcpOwogICAgICAgICAgICAgIGNhc2UgJ2dldEJsb2NrJzogewogICAgICAgICAgICAgICAgY29uc3QgciA9ICdibG9ja0hhc2gnIGluIHQgPyB0LmJsb2NrSGFzaCA6IHQuYmxvY2tUYWc7CiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZS5nZXRCbG9jayhyLCB0LmluY2x1ZGVUcmFuc2FjdGlvbnMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjYXNlICdnZXRCbG9ja051bWJlcic6CiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZS5nZXRCbG9ja051bWJlcigpOwogICAgICAgICAgICAgIGNhc2UgJ2dldENvZGUnOgogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGUuZ2V0Q29kZSh0LmFkZHJlc3MsIHQuYmxvY2tUYWcpOwogICAgICAgICAgICAgIGNhc2UgJ2dldEdhc1ByaWNlJzoKICAgICAgICAgICAgICAgIHJldHVybiAoYXdhaXQgZS5nZXRGZWVEYXRhKCkpLmdhc1ByaWNlOwogICAgICAgICAgICAgIGNhc2UgJ2dldFByaW9yaXR5RmVlJzoKICAgICAgICAgICAgICAgIHJldHVybiAoYXdhaXQgZS5nZXRGZWVEYXRhKCkpLm1heFByaW9yaXR5RmVlUGVyR2FzOwogICAgICAgICAgICAgIGNhc2UgJ2dldExvZ3MnOgogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGUuZ2V0TG9ncyh0LmZpbHRlcik7CiAgICAgICAgICAgICAgY2FzZSAnZ2V0U3RvcmFnZSc6CiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZS5nZXRTdG9yYWdlKHQuYWRkcmVzcywgdC5wb3NpdGlvbiwgdC5ibG9ja1RhZyk7CiAgICAgICAgICAgICAgY2FzZSAnZ2V0VHJhbnNhY3Rpb24nOgogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGUuZ2V0VHJhbnNhY3Rpb24odC5oYXNoKTsKICAgICAgICAgICAgICBjYXNlICdnZXRUcmFuc2FjdGlvbkNvdW50JzoKICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBlLmdldFRyYW5zYWN0aW9uQ291bnQodC5hZGRyZXNzLCB0LmJsb2NrVGFnKTsKICAgICAgICAgICAgICBjYXNlICdnZXRUcmFuc2FjdGlvblJlY2VpcHQnOgogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGUuZ2V0VHJhbnNhY3Rpb25SZWNlaXB0KHQuaGFzaCk7CiAgICAgICAgICAgICAgY2FzZSAnZ2V0VHJhbnNhY3Rpb25SZXN1bHQnOgogICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGUuZ2V0VHJhbnNhY3Rpb25SZXN1bHQodC5oYXNoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgI2RlKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IEFycmF5LmZyb20oZSkubWFwKChlKSA9PiBlLmNvbmZpZyksCiAgICAgICAgICAgICAgciA9IHRoaXMuI2NlLnNsaWNlKCk7CiAgICAgICAgICAgICEoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gZS5sZW5ndGggLSAxOyB0ID4gMDsgdC0tKSB7CiAgICAgICAgICAgICAgICBjb25zdCByID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHQgKyAxKSksCiAgICAgICAgICAgICAgICAgIG4gPSBlW3RdOwogICAgICAgICAgICAgICAgKGVbdF0gPSBlW3JdKSwgKGVbcl0gPSBuKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKHIpLAogICAgICAgICAgICAgIHIuc29ydCgoZSwgdCkgPT4gZS5wcmlvcml0eSAtIHQucHJpb3JpdHkpOwogICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcikgaWYgKCFlLl9sYXN0RmF0YWxFcnJvciAmJiAtMSA9PT0gdC5pbmRleE9mKGUpKSByZXR1cm4gZTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICAjZmUoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gdGhpcy4jZGUoZSk7CiAgICAgICAgICAgIGlmIChudWxsID09IHIpIHJldHVybiBudWxsOwogICAgICAgICAgICBjb25zdCBuID0geyBjb25maWc6IHIsIHJlc3VsdDogbnVsbCwgZGlkQnVtcDogITEsIHBlcmZvcm06IG51bGwsIHN0YWxsZXI6IG51bGwgfSwKICAgICAgICAgICAgICBzID0gYygpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIChuLnBlcmZvcm0gPSAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgci5yZXF1ZXN0cysrOwogICAgICAgICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5fdHJhbnNsYXRlUGVyZm9ybShyLnByb3ZpZGVyLCB0KTsKICAgICAgICAgICAgICAgICAgbi5yZXN1bHQgPSB7IHJlc3VsdDogZSB9OwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICByLmVycm9yUmVzcG9uc2VzKyssIChuLnJlc3VsdCA9IHsgZXJyb3I6IGUgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBlID0gYygpIC0gczsKICAgICAgICAgICAgICAgIChyLl90b3RhbFRpbWUgKz0gZSksIChyLnJvbGxpbmdEdXJhdGlvbiA9IDAuOTUgKiByLnJvbGxpbmdEdXJhdGlvbiArIDAuMDUgKiBlKSwgKG4ucGVyZm9ybSA9IG51bGwpOwogICAgICAgICAgICAgIH0pKCkpLAogICAgICAgICAgICAgIChuLnN0YWxsZXIgPSAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICAgICAgICBhd2FpdCAoKGUgPSByLnN0YWxsVGltZW91dCksCiAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgodCkgPT4gewogICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHQsIGUpOwogICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAobi5zdGFsbGVyID0gbnVsbCk7CiAgICAgICAgICAgICAgfSkoKSksCiAgICAgICAgICAgICAgZS5hZGQobiksCiAgICAgICAgICAgICAgbgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgI2hlKCkgewogICAgICAgICAgICBsZXQgZSA9IHRoaXMuI2xlOwogICAgICAgICAgICBpZiAoIWUpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gW107CiAgICAgICAgICAgICAgdGhpcy4jY2UuZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgICAgICAgdC5wdXNoKAogICAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGF3YWl0IChhc3luYyBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgZm9yICgKICAgICAgICAgICAgICAgICAgICAgICAgOwogICAgICAgICAgICAgICAgICAgICAgICAoZS5ibG9ja051bWJlciA8IDAgfHwgZS5ibG9ja051bWJlciA8IDApICYmCiAgICAgICAgICAgICAgICAgICAgICAgIChlLl91cGRhdGVOdW1iZXIgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5fdXBkYXRlTnVtYmVyID0gKGFzeW5jICgpID0-IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBlLnByb3ZpZGVyLmdldEJsb2NrTnVtYmVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPiBlLmJsb2NrTnVtYmVyICYmIChlLmJsb2NrTnVtYmVyID0gdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmJsb2NrTnVtYmVyID0gLTIpLCAoZS5fbGFzdEZhdGFsRXJyb3IgPSB0KSwgKGUuX2xhc3RGYXRhbEVycm9yVGltZXN0YW1wID0gYygpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuX3VwZGF0ZU51bWJlciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGUuX3VwZGF0ZU51bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgZS5vdXRPZlN5bmMrKywKICAgICAgICAgICAgICAgICAgICAgICAgIWUuX2xhc3RGYXRhbEVycm9yKTsKCiAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0pKGUpLAogICAgICAgICAgICAgICAgICAgICAgZS5fbGFzdEZhdGFsRXJyb3IgfHwgKGUuX25ldHdvcmsgPSBhd2FpdCBlLnByb3ZpZGVyLmdldE5ldHdvcmsoKSk7CiAgICAgICAgICAgICAgICAgIH0pKCkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAodGhpcy4jbGUgPSBlID0KICAgICAgICAgICAgICAgICAgKGFzeW5jICgpID0-IHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0KTsKICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuI2NlKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodC5fbGFzdEZhdGFsRXJyb3IpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IHQuX25ldHdvcms7CiAgICAgICAgICAgICAgICAgICAgICBudWxsID09IGUKICAgICAgICAgICAgICAgICAgICAgICAgPyAoZSA9IHIuY2hhaW5JZCkKICAgICAgICAgICAgICAgICAgICAgICAgOiByLmNoYWluSWQgIT09IGUgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnQpKCExLCAnY2Fubm90IG1peCBwcm92aWRlcnMgb24gZGlmZmVyZW50IG5ldHdvcmtzJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ25ldyBGYWxsYmFja1Byb3ZpZGVyJwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSkoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXdhaXQgZTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jICNnZShlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBbXTsKICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpCiAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdC5yZXN1bHQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHsgdGFnOiBlLCB2YWx1ZTogbiB9ID0gaCh0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICByLnB1c2goeyB0YWc6IGUsIHZhbHVlOiBuLCB3ZWlnaHQ6IHQuY29uZmlnLndlaWdodCB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghKHIucmVkdWNlKChlLCB0KSA9PiBlICsgdC53ZWlnaHQsIDApIDwgdGhpcy5xdW9ydW0pKSB7CiAgICAgICAgICAgICAgc3dpdGNoICh0Lm1ldGhvZCkgewogICAgICAgICAgICAgICAgY2FzZSAnZ2V0QmxvY2tOdW1iZXInOiB7CiAgICAgICAgICAgICAgICAgIC0yID09PSB0aGlzLiN1ZSAmJgogICAgICAgICAgICAgICAgICAgICh0aGlzLiN1ZSA9IE1hdGguY2VpbCgKICAgICAgICAgICAgICAgICAgICAgICgwLCBuLmdldE51bWJlcikoCiAgICAgICAgICAgICAgICAgICAgICAgIHAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdW9ydW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGUpID0-ICFlLl9sYXN0RmF0YWxFcnJvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGUpID0-ICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLmJsb2NrTnVtYmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWc6ICgwLCBuLmdldE51bWJlcikoZS5ibG9ja051bWJlcikudG9TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiBlLndlaWdodAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGlmICgxID09PSBlKSByZXR1cm4gKDAsIG4uZ2V0TnVtYmVyKShwKGUsIHQpLCAnJWludGVybmFsJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBNYXAoKSwKICAgICAgICAgICAgICAgICAgICAgIHMgPSAoZSwgdCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gci5nZXQoZSkgfHwgeyByZXN1bHQ6IGUsIHdlaWdodDogMCB9OwogICAgICAgICAgICAgICAgICAgICAgICAobi53ZWlnaHQgKz0gdCksIHIuc2V0KGUsIG4pOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgd2VpZ2h0OiBlLCB2YWx1ZTogciB9IG9mIHQpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgbi5nZXROdW1iZXIpKHIpOwogICAgICAgICAgICAgICAgICAgICAgcyh0IC0gMSwgZSksIHModCwgZSksIHModCArIDEsIGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgbywKICAgICAgICAgICAgICAgICAgICAgIGkgPSAwOwogICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgeyB3ZWlnaHQ6IHQsIHJlc3VsdDogbiB9IG9mIHIudmFsdWVzKCkpCiAgICAgICAgICAgICAgICAgICAgICB0ID49IGUgJiYgKHQgPiBpIHx8IChudWxsICE9IG8gJiYgdCA9PT0gaSAmJiBuID4gbykpICYmICgoaSA9IHQpLCAobyA9IG4pKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbzsKICAgICAgICAgICAgICAgICAgfSkodGhpcy5xdW9ydW0sIHIpOwogICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm47CiAgICAgICAgICAgICAgICAgIHJldHVybiBlID4gdGhpcy4jdWUgJiYgKHRoaXMuI3VlID0gZSksIHRoaXMuI3VlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FzZSAnZ2V0R2FzUHJpY2UnOgogICAgICAgICAgICAgICAgY2FzZSAnZ2V0UHJpb3JpdHlGZWUnOgogICAgICAgICAgICAgICAgY2FzZSAnZXN0aW1hdGVHYXMnOgogICAgICAgICAgICAgICAgICByZXR1cm4gcCh0aGlzLnF1b3J1bSwgcik7CiAgICAgICAgICAgICAgICBjYXNlICdnZXRCbG9jayc6CiAgICAgICAgICAgICAgICAgIHJldHVybiAnYmxvY2tUYWcnIGluIHQgJiYgJ3BlbmRpbmcnID09PSB0LmJsb2NrVGFnID8gbSh0aGlzLnF1b3J1bSwgcikgOiBnKHRoaXMucXVvcnVtLCByKTsKICAgICAgICAgICAgICAgIGNhc2UgJ2NhbGwnOgogICAgICAgICAgICAgICAgY2FzZSAnY2hhaW5JZCc6CiAgICAgICAgICAgICAgICBjYXNlICdnZXRCYWxhbmNlJzoKICAgICAgICAgICAgICAgIGNhc2UgJ2dldFRyYW5zYWN0aW9uQ291bnQnOgogICAgICAgICAgICAgICAgY2FzZSAnZ2V0Q29kZSc6CiAgICAgICAgICAgICAgICBjYXNlICdnZXRTdG9yYWdlJzoKICAgICAgICAgICAgICAgIGNhc2UgJ2dldFRyYW5zYWN0aW9uJzoKICAgICAgICAgICAgICAgIGNhc2UgJ2dldFRyYW5zYWN0aW9uUmVjZWlwdCc6CiAgICAgICAgICAgICAgICBjYXNlICdnZXRMb2dzJzoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGcodGhpcy5xdW9ydW0sIHIpOwogICAgICAgICAgICAgICAgY2FzZSAnYnJvYWRjYXN0VHJhbnNhY3Rpb24nOgogICAgICAgICAgICAgICAgICByZXR1cm4gbSh0aGlzLnF1b3J1bSwgcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICgwLCBuLmFzc2VydCkoITEsICd1bnN1cHBvcnRlZCBtZXRob2QnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBgX3BlcmZvcm0oJHt1KHQubWV0aG9kKX0pYAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyAjcGUoZSwgdCkgewogICAgICAgICAgICBpZiAoMCA9PT0gZS5zaXplKSB0aHJvdyBuZXcgRXJyb3IoJ25vIHJ1bm5lcnM_IScpOwogICAgICAgICAgICBjb25zdCByID0gW107CiAgICAgICAgICAgIGxldCBzID0gMDsKICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpCiAgICAgICAgICAgICAgdC5wZXJmb3JtICYmIHIucHVzaCh0LnBlcmZvcm0pLCB0LnN0YWxsZXIgPyByLnB1c2godC5zdGFsbGVyKSA6IHQuZGlkQnVtcCB8fCAoKHQuZGlkQnVtcCA9ICEwKSwgcysrKTsKICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IHRoaXMuI2dlKGUsIHQpOwogICAgICAgICAgICBpZiAodm9pZCAwICE9PSBvKSB7CiAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBFcnJvcikgdGhyb3cgbzsKICAgICAgICAgICAgICByZXR1cm4gbzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHM7IHIrKykgdGhpcy4jZmUoZSwgdCk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0KShyLmxlbmd0aCA-IDAsICdxdW9ydW0gbm90IG1ldCcsICdTRVJWRVJfRVJST1InLCB7CiAgICAgICAgICAgICAgICByZXF1ZXN0OiAnJXN1Yi1yZXF1ZXN0cycsCiAgICAgICAgICAgICAgICBpbmZvOiB7IHJlcXVlc3Q6IHQsIHJlc3VsdHM6IEFycmF5LmZyb20oZSkubWFwKChlKSA9PiB1KGUucmVzdWx0KSkgfQogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGF3YWl0IFByb21pc2UucmFjZShyKSwKICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNwZShlLCB0KQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX3BlcmZvcm0oZSkgewogICAgICAgICAgICBpZiAoJ2Jyb2FkY2FzdFRyYW5zYWN0aW9uJyA9PT0gZS5tZXRob2QpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy4jY2UubWFwKChlKSA9PiBudWxsKSwKICAgICAgICAgICAgICAgIHIgPSB0aGlzLiNjZS5tYXAoYXN5bmMgKHsgcHJvdmlkZXI6IHIsIHdlaWdodDogbiB9LCBzKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IHIuX3BlcmZvcm0oZSk7CiAgICAgICAgICAgICAgICAgICAgdFtzXSA9IE9iamVjdC5hc3NpZ24oaCh7IHJlc3VsdDogbyB9KSwgeyB3ZWlnaHQ6IG4gfSk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0W3NdID0gT2JqZWN0LmFzc2lnbihoKHsgZXJyb3I6IGUgfSksIHsgd2VpZ2h0OiBuIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5maWx0ZXIoKGUpID0-IG51bGwgIT0gZSk7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgdmFsdWU6IHQgfSBvZiBlKSBpZiAoISh0IGluc3RhbmNlb2YgRXJyb3IpKSByZXR1cm4gdDsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBnKAogICAgICAgICAgICAgICAgICB0aGlzLnF1b3J1bSwKICAgICAgICAgICAgICAgICAgdC5maWx0ZXIoKGUpID0-IG51bGwgIT0gZSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAoKDAsIG4uaXNFcnJvcikocywgJ0lOU1VGRklDSUVOVF9GVU5EUycpKSB0aHJvdyBzOwogICAgICAgICAgICAgICAgY29uc3QgbyA9IHIuZmlsdGVyKChlLCByKSA9PiBudWxsID09IHRbcl0pOwogICAgICAgICAgICAgICAgaWYgKDAgPT09IG8ubGVuZ3RoKSBicmVhazsKICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UucmFjZShvKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29uc3QgcyA9IG0odGhpcy5xdW9ydW0sIHQpOwogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICgoMCwgbi5hc3NlcnQpKHZvaWQgMCAhPT0gcywgJ3Byb2JsZW0gbXVsdGktYnJvYWRjYXN0aW5nJywgJ1NFUlZFUl9FUlJPUicsIHsKICAgICAgICAgICAgICAgICAgcmVxdWVzdDogJyVzdWItcmVxdWVzdHMnLAogICAgICAgICAgICAgICAgICBpbmZvOiB7IHJlcXVlc3Q6IGUsIHJlc3VsdHM6IHQubWFwKHUpIH0KICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgcyBpbnN0YW5jZW9mIEVycm9yKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRocm93IHM7CiAgICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGUoKTsKICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBTZXQoKTsKICAgICAgICAgICAgbGV0IHIgPSAwOwogICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuI2ZlKHQsIGUpOwogICAgICAgICAgICAgIGlmIChudWxsID09IG4pIGJyZWFrOwogICAgICAgICAgICAgIGlmICgoKHIgKz0gbi5jb25maWcud2VpZ2h0KSwgciA-PSB0aGlzLnF1b3J1bSkpIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLiNwZSh0LCBlKTsKICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGUucGVyZm9ybSAmJiBudWxsID09IGUucmVzdWx0ICYmIGUuY29uZmlnLmxhdGVSZXNwb25zZXMrKzsKICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBkZXN0cm95KCkgewogICAgICAgICAgICBmb3IgKGNvbnN0IHsgcHJvdmlkZXI6IGUgfSBvZiB0aGlzLiNjZSkgZS5kZXN0cm95KCk7CiAgICAgICAgICAgIHN1cGVyLmRlc3Ryb3koKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5GYWxsYmFja1Byb3ZpZGVyID0gYjsKICAgICAgfSwKICAgICAgMjI5MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuSW5mdXJhUHJvdmlkZXIgPSB0LkluZnVyYVdlYlNvY2tldFByb3ZpZGVyID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSByKDM4MDApLAogICAgICAgICAgbyA9IHIoMTEwNCksCiAgICAgICAgICBpID0gcig5NTI4KSwKICAgICAgICAgIGEgPSByKDM2MzIpLAogICAgICAgICAgYyA9ICc4NDg0MjA3OGIwOTk0NjYzOGMwMzE1N2Y4MzQwNTIxMyc7CiAgICAgICAgY2xhc3MgdSBleHRlbmRzIGEuV2ViU29ja2V0UHJvdmlkZXIgewogICAgICAgICAgcHJvamVjdElkOwogICAgICAgICAgcHJvamVjdFNlY3JldDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IG5ldyBsKGUsIHQpLAogICAgICAgICAgICAgIHMgPSByLl9nZXRDb25uZWN0aW9uKCk7CiAgICAgICAgICAgICgwLCBuLmFzc2VydCkoIXMuY3JlZGVudGlhbHMsICdJTkZVUkEgV2ViU29ja2V0IHByb2plY3Qgc2VjcmV0cyB1bnN1cHBvcnRlZCcsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnSW5mdXJhUHJvdmlkZXIuZ2V0V2ViU29ja2V0UHJvdmlkZXIoKScKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgc3VwZXIocy51cmwucmVwbGFjZSgvXmh0dHAvaSwgJ3dzJykucmVwbGFjZSgnL3YzLycsICcvd3MvdjMvJyksIGUpLAogICAgICAgICAgICAgICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgcHJvamVjdElkOiByLnByb2plY3RJZCwgcHJvamVjdFNlY3JldDogci5wcm9qZWN0U2VjcmV0IH0pOwogICAgICAgICAgfQogICAgICAgICAgaXNDb21tdW5pdHlSZXNvdXJjZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdElkID09PSBjOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkluZnVyYVdlYlNvY2tldFByb3ZpZGVyID0gdTsKICAgICAgICBjbGFzcyBsIGV4dGVuZHMgaS5Kc29uUnBjUHJvdmlkZXIgewogICAgICAgICAgcHJvamVjdElkOwogICAgICAgICAgcHJvamVjdFNlY3JldDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgbnVsbCA9PSBlICYmIChlID0gJ21haW5uZXQnKTsKICAgICAgICAgICAgY29uc3QgcyA9IG8uTmV0d29yay5mcm9tKGUpOwogICAgICAgICAgICBudWxsID09IHQgJiYgKHQgPSBjKSwKICAgICAgICAgICAgICBudWxsID09IHIgJiYgKHIgPSBudWxsKSwKICAgICAgICAgICAgICBzdXBlcihsLmdldFJlcXVlc3QocywgdCwgciksIHMsIHsgc3RhdGljTmV0d29yazogcyB9KSwKICAgICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IHByb2plY3RJZDogdCwgcHJvamVjdFNlY3JldDogciB9KTsKICAgICAgICAgIH0KICAgICAgICAgIF9nZXRQcm92aWRlcihlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBsKGUsIHRoaXMucHJvamVjdElkLCB0aGlzLnByb2plY3RTZWNyZXQpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICByZXR1cm4gc3VwZXIuX2dldFByb3ZpZGVyKGUpOwogICAgICAgICAgfQogICAgICAgICAgaXNDb21tdW5pdHlSZXNvdXJjZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdElkID09PSBjOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGdldFdlYlNvY2tldFByb3ZpZGVyKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB1KGUsIHQpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGdldFJlcXVlc3QoZSwgdCwgcikgewogICAgICAgICAgICBudWxsID09IHQgJiYgKHQgPSBjKSwgbnVsbCA9PSByICYmIChyID0gbnVsbCk7CiAgICAgICAgICAgIGNvbnN0IG8gPSBuZXcgbi5GZXRjaFJlcXVlc3QoCiAgICAgICAgICAgICAgYGh0dHBzOi8vJHsoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgICAgICBjYXNlICdtYWlubmV0JzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ21haW5uZXQuaW5mdXJhLmlvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2dvZXJsaS5pbmZ1cmEuaW8nOwogICAgICAgICAgICAgICAgICBjYXNlICdzZXBvbGlhJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3NlcG9saWEuaW5mdXJhLmlvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnYXJiaXRydW0nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnYXJiaXRydW0tbWFpbm5ldC5pbmZ1cmEuaW8nOwogICAgICAgICAgICAgICAgICBjYXNlICdhcmJpdHJ1bS1nb2VybGknOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnYXJiaXRydW0tZ29lcmxpLmluZnVyYS5pbyc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmVhJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xpbmVhLW1haW5uZXQuaW5mdXJhLmlvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnbGluZWEtZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2xpbmVhLWdvZXJsaS5pbmZ1cmEuaW8nOwogICAgICAgICAgICAgICAgICBjYXNlICdtYXRpYyc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdwb2x5Z29uLW1haW5uZXQuaW5mdXJhLmlvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0aWMtbXVtYmFpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3BvbHlnb24tbXVtYmFpLmluZnVyYS5pbyc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ29wdGltaXNtJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ29wdGltaXNtLW1haW5uZXQuaW5mdXJhLmlvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnb3B0aW1pc20tZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ29wdGltaXNtLWdvZXJsaS5pbmZ1cmEuaW8nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCAndW5zdXBwb3J0ZWQgbmV0d29yaycsICduZXR3b3JrJywgZSk7CiAgICAgICAgICAgICAgfSkoZS5uYW1lKX0vdjMvJHt0fWAKICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoby5hbGxvd0d6aXAgPSAhMCksCiAgICAgICAgICAgICAgciAmJiBvLnNldENyZWRlbnRpYWxzKCcnLCByKSwKICAgICAgICAgICAgICB0ID09PSBjICYmIChvLnJldHJ5RnVuYyA9IGFzeW5jIChlLCB0LCByKSA9PiAoKDAsIHMuc2hvd1Rocm90dGxlTWVzc2FnZSkoJ0luZnVyYVByb3ZpZGVyJyksICEwKSksCiAgICAgICAgICAgICAgbwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkluZnVyYVByb3ZpZGVyID0gbDsKICAgICAgfSwKICAgICAgMzc4NzogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuSXBjU29ja2V0UHJvdmlkZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUyNTYpLAogICAgICAgICAgcyA9IHIoMTUyMCk7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIHMuU29ja2V0UHJvdmlkZXIgewogICAgICAgICAgI21lOwogICAgICAgICAgZ2V0IHNvY2tldCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI21lOwogICAgICAgICAgfQogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICBzdXBlcih0LCByKSwKICAgICAgICAgICAgICAodGhpcy4jbWUgPSAoMCwgbi5jb25uZWN0KShlKSksCiAgICAgICAgICAgICAgdGhpcy5zb2NrZXQub24oJ3JlYWR5JywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnQoKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZhaWxlZCB0byBzdGFydCBJcGNTb2NrZXRQcm92aWRlcicsIGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsZXQgcyA9IEJ1ZmZlci5hbGxvYygwKTsKICAgICAgICAgICAgdGhpcy5zb2NrZXQub24oJ2RhdGEnLCAoZSkgPT4gewogICAgICAgICAgICAgIHMgPSBCdWZmZXIuY29uY2F0KFtzLCBlXSk7CiAgICAgICAgICAgICAgY29uc3QgeyBtZXNzYWdlczogdCwgcmVtYWluaW5nOiByIH0gPSAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBbXTsKICAgICAgICAgICAgICAgIGxldCByID0gMDsKICAgICAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGUuaW5kZXhPZigxMCwgcik7CiAgICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gbikgYnJlYWs7CiAgICAgICAgICAgICAgICAgIHQucHVzaChlLnN1YmFycmF5KHIsIG4pLnRvU3RyaW5nKCkudHJpbSgpKSwgKHIgPSBuICsgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlczogdCwgcmVtYWluaW5nOiBlLnN1YmFycmF5KHIpIH07CiAgICAgICAgICAgICAgfSkocyk7CiAgICAgICAgICAgICAgdC5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzTWVzc2FnZShlKTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIChzID0gcik7CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHRoaXMuc29ja2V0Lm9uKCdlbmQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Nsb3NlJyksIHRoaXMuc29ja2V0LmRlc3Ryb3koKSwgdGhpcy5zb2NrZXQuZW5kKCk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBkZXN0cm95KCkgewogICAgICAgICAgICB0aGlzLnNvY2tldC5kZXN0cm95KCksIHRoaXMuc29ja2V0LmVuZCgpLCBzdXBlci5kZXN0cm95KCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBfd3JpdGUoZSkgewogICAgICAgICAgICB0aGlzLnNvY2tldC53cml0ZShlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5JcGNTb2NrZXRQcm92aWRlciA9IG87CiAgICAgIH0sCiAgICAgIDk1Mjg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5Kc29uUnBjUHJvdmlkZXIgPSB0Lkpzb25ScGNBcGlQb2xsaW5nUHJvdmlkZXIgPSB0Lkpzb25ScGNBcGlQcm92aWRlciA9IHQuSnNvblJwY1NpZ25lciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMjI3NiksCiAgICAgICAgICBzID0gcigzNjgwKSwKICAgICAgICAgIG8gPSByKDY4OTYpLAogICAgICAgICAgaSA9IHIoMTEyNCksCiAgICAgICAgICBhID0gcig1MzE2KSwKICAgICAgICAgIGMgPSByKDgwMTIpLAogICAgICAgICAgdSA9IHIoOTUyKSwKICAgICAgICAgIGwgPSByKDExMDQpLAogICAgICAgICAgZCA9IHIoNTM4MCksCiAgICAgICAgICBmID0gcig4MTM2KSwKICAgICAgICAgIGggPSAnYmlnaW50LGJvb2xlYW4sZnVuY3Rpb24sbnVtYmVyLHN0cmluZyxzeW1ib2wnLnNwbGl0KC8sL2cpOwogICAgICAgIGZ1bmN0aW9uIGcoZSkgewogICAgICAgICAgaWYgKG51bGwgPT0gZSB8fCBoLmluZGV4T2YodHlwZW9mIGUpID49IDApIHJldHVybiBlOwogICAgICAgICAgaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGUuZ2V0QWRkcmVzcykgcmV0dXJuIGU7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuIGUubWFwKGcpOwogICAgICAgICAgaWYgKCdvYmplY3QnID09IHR5cGVvZiBlKSByZXR1cm4gT2JqZWN0LmtleXMoZSkucmVkdWNlKCh0LCByKSA9PiAoKHRbcl0gPSBlW3JdKSwgdCksIHt9KTsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc2hvdWxkIG5vdCBoYXBwZW46ICR7ZX0gKCR7dHlwZW9mIGV9KWApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBwKGUpIHsKICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgodCkgPT4gewogICAgICAgICAgICBzZXRUaW1lb3V0KHQsIGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG0oZSkgewogICAgICAgICAgcmV0dXJuIGUgPyBlLnRvTG93ZXJDYXNlKCkgOiBlOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBiKGUpIHsKICAgICAgICAgIHJldHVybiBlICYmICdudW1iZXInID09IHR5cGVvZiBlLnBvbGxpbmdJbnRlcnZhbDsKICAgICAgICB9CiAgICAgICAgY29uc3QgeSA9IHsKICAgICAgICAgIHBvbGxpbmc6ICExLAogICAgICAgICAgc3RhdGljTmV0d29yazogbnVsbCwKICAgICAgICAgIGJhdGNoU3RhbGxUaW1lOiAxMCwKICAgICAgICAgIGJhdGNoTWF4U2l6ZTogMSA8PCAyMCwKICAgICAgICAgIGJhdGNoTWF4Q291bnQ6IDEwMCwKICAgICAgICAgIGNhY2hlVGltZW91dDogMjUwLAogICAgICAgICAgcG9sbGluZ0ludGVydmFsOiA0ZTMKICAgICAgICB9OwogICAgICAgIGNsYXNzIEEgZXh0ZW5kcyB1LkFic3RyYWN0U2lnbmVyIHsKICAgICAgICAgIGFkZHJlc3M7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIHN1cGVyKGUpLCAodCA9ICgwLCBzLmdldEFkZHJlc3MpKHQpKSwgKDAsIGEuZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBhZGRyZXNzOiB0IH0pOwogICAgICAgICAgfQogICAgICAgICAgY29ubmVjdChlKSB7CiAgICAgICAgICAgICgwLCBhLmFzc2VydCkoITEsICdjYW5ub3QgcmVjb25uZWN0IEpzb25ScGNTaWduZXInLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3NpZ25lci5jb25uZWN0JwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldEFkZHJlc3MoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZHJlc3M7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBwb3B1bGF0ZVRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucG9wdWxhdGVDYWxsKGUpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgc2VuZFVuY2hlY2tlZFRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IGcoZSksCiAgICAgICAgICAgICAgciA9IFtdOwogICAgICAgICAgICBpZiAodC5mcm9tKSB7CiAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZnJvbTsKICAgICAgICAgICAgICByLnB1c2goCiAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgKDAsIHMucmVzb2x2ZUFkZHJlc3MpKG4sIHRoaXMucHJvdmlkZXIpOwogICAgICAgICAgICAgICAgICAoMCwgYS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSByICYmIHIudG9Mb3dlckNhc2UoKSA9PT0gdGhpcy5hZGRyZXNzLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgJ2Zyb20gYWRkcmVzcyBtaXNtYXRjaCcsCiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zYWN0aW9uJywKICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgKHQuZnJvbSA9IHIpOwogICAgICAgICAgICAgICAgfSkoKQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0gZWxzZSB0LmZyb20gPSB0aGlzLmFkZHJlc3M7CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAobnVsbCA9PSB0Lmdhc0xpbWl0ICYmCiAgICAgICAgICAgICAgICByLnB1c2goCiAgICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdC5nYXNMaW1pdCA9IGF3YWl0IHRoaXMucHJvdmlkZXIuZXN0aW1hdGVHYXMoeyAuLi50LCBmcm9tOiB0aGlzLmFkZHJlc3MgfSk7CiAgICAgICAgICAgICAgICAgIH0pKCkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgbnVsbCAhPSB0LnRvKQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdC50bzsKICAgICAgICAgICAgICByLnB1c2goCiAgICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICB0LnRvID0gYXdhaXQgKDAsIHMucmVzb2x2ZUFkZHJlc3MpKGUsIHRoaXMucHJvdmlkZXIpOwogICAgICAgICAgICAgICAgfSkoKQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgci5sZW5ndGggJiYgKGF3YWl0IFByb21pc2UuYWxsKHIpKTsKICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMucHJvdmlkZXIuZ2V0UnBjVHJhbnNhY3Rpb24odCk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVyLnNlbmQoJ2V0aF9zZW5kVHJhbnNhY3Rpb24nLCBbbl0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgc2VuZFRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMucHJvdmlkZXIuZ2V0QmxvY2tOdW1iZXIoKSwKICAgICAgICAgICAgICByID0gYXdhaXQgdGhpcy5zZW5kVW5jaGVja2VkVHJhbnNhY3Rpb24oZSk7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgoZSwgbikgPT4gewogICAgICAgICAgICAgIGNvbnN0IHMgPSBbMWUzLCAxMDBdOwogICAgICAgICAgICAgIGxldCBvID0gMDsKICAgICAgICAgICAgICBjb25zdCBpID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IHRoaXMucHJvdmlkZXIuZ2V0VHJhbnNhY3Rpb24ocik7CiAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IG4pIHJldHVybiB2b2lkIGUobi5yZXBsYWNlYWJsZVRyYW5zYWN0aW9uKHQpKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICgwLCBhLmlzRXJyb3IpKGUsICdDQU5DRUxMRUQnKSB8fAogICAgICAgICAgICAgICAgICAgICgwLCBhLmlzRXJyb3IpKGUsICdCQURfREFUQScpIHx8CiAgICAgICAgICAgICAgICAgICAgKDAsIGEuaXNFcnJvcikoZSwgJ05FVFdPUktfRVJST1InKQogICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZS5pbmZvICYmIChlLmluZm8gPSB7fSksIChlLmluZm8uc2VuZFRyYW5zYWN0aW9uSGFzaCA9IHIpLCB2b2lkIG4oZSk7CiAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAoMCwgYS5pc0Vycm9yKShlLCAnSU5WQUxJRF9BUkdVTUVOVCcpICYmCiAgICAgICAgICAgICAgICAgICAgKG8rKywgbnVsbCA9PSBlLmluZm8gJiYgKGUuaW5mbyA9IHt9KSwgKGUuaW5mby5zZW5kVHJhbnNhY3Rpb25IYXNoID0gciksIG8gPiAxMCkKICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIG4oZSk7CiAgICAgICAgICAgICAgICAgIHRoaXMucHJvdmlkZXIuZW1pdCgKICAgICAgICAgICAgICAgICAgICAnZXJyb3InLAogICAgICAgICAgICAgICAgICAgICgwLCBhLm1ha2VFcnJvcikoJ2ZhaWxlZCB0byBmZXRjaCB0cmFuc2F0aW9uIGFmdGVyIHNlbmRpbmcgKHdpbGwgdHJ5IGFnYWluKScsICdVTktOT1dOX0VSUk9SJywgewogICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGUKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wcm92aWRlci5fc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGkoKTsKICAgICAgICAgICAgICAgIH0sIHMucG9wKCkgfHwgNGUzKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGkoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBzaWduVHJhbnNhY3Rpb24oZSkgewogICAgICAgICAgICBjb25zdCB0ID0gZyhlKTsKICAgICAgICAgICAgaWYgKHQuZnJvbSkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCAoMCwgcy5yZXNvbHZlQWRkcmVzcykodC5mcm9tLCB0aGlzLnByb3ZpZGVyKTsKICAgICAgICAgICAgICAoMCwgYS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICBudWxsICE9IHIgJiYgci50b0xvd2VyQ2FzZSgpID09PSB0aGlzLmFkZHJlc3MudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICAgICdmcm9tIGFkZHJlc3MgbWlzbWF0Y2gnLAogICAgICAgICAgICAgICAgJ3RyYW5zYWN0aW9uJywKICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKHQuZnJvbSA9IHIpOwogICAgICAgICAgICB9IGVsc2UgdC5mcm9tID0gdGhpcy5hZGRyZXNzOwogICAgICAgICAgICBjb25zdCByID0gdGhpcy5wcm92aWRlci5nZXRScGNUcmFuc2FjdGlvbih0KTsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvdmlkZXIuc2VuZCgnZXRoX3NpZ25UcmFuc2FjdGlvbicsIFtyXSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBzaWduTWVzc2FnZShlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAnc3RyaW5nJyA9PSB0eXBlb2YgZSA_ICgwLCBhLnRvVXRmOEJ5dGVzKShlKSA6IGU7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3ZpZGVyLnNlbmQoJ3BlcnNvbmFsX3NpZ24nLCBbKDAsIGEuaGV4bGlmeSkodCksIHRoaXMuYWRkcmVzcy50b0xvd2VyQ2FzZSgpXSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBzaWduVHlwZWREYXRhKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgbiA9IGcociksCiAgICAgICAgICAgICAgaSA9IGF3YWl0IG8uVHlwZWREYXRhRW5jb2Rlci5yZXNvbHZlTmFtZXMoZSwgdCwgbiwgYXN5bmMgKGUpID0-IHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCAoMCwgcy5yZXNvbHZlQWRkcmVzcykoZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gKDAsIGEuYXNzZXJ0QXJndW1lbnQpKG51bGwgIT0gdCwgJ1R5cGVkRGF0YSBkb2VzIG5vdCBzdXBwb3J0IG51bGwgYWRkcmVzcycsICd2YWx1ZScsIGUpLCB0OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm92aWRlci5zZW5kKCdldGhfc2lnblR5cGVkRGF0YV92NCcsIFsKICAgICAgICAgICAgICB0aGlzLmFkZHJlc3MudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShvLlR5cGVkRGF0YUVuY29kZXIuZ2V0UGF5bG9hZChpLmRvbWFpbiwgdCwgaS52YWx1ZSkpCiAgICAgICAgICAgIF0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgdW5sb2NrKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXIuc2VuZCgncGVyc29uYWxfdW5sb2NrQWNjb3VudCcsIFt0aGlzLmFkZHJlc3MudG9Mb3dlckNhc2UoKSwgZSwgbnVsbF0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX2xlZ2FjeVNpZ25NZXNzYWdlKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9ICdzdHJpbmcnID09IHR5cGVvZiBlID8gKDAsIGEudG9VdGY4Qnl0ZXMpKGUpIDogZTsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvdmlkZXIuc2VuZCgnZXRoX3NpZ24nLCBbdGhpcy5hZGRyZXNzLnRvTG93ZXJDYXNlKCksICgwLCBhLmhleGxpZnkpKHQpXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuSnNvblJwY1NpZ25lciA9IEE7CiAgICAgICAgY2xhc3MgdiBleHRlbmRzIGMuQWJzdHJhY3RQcm92aWRlciB7CiAgICAgICAgICAjdjsKICAgICAgICAgICNiZTsKICAgICAgICAgICN5ZTsKICAgICAgICAgICNBZTsKICAgICAgICAgICN2ZTsKICAgICAgICAgICNFZTsKICAgICAgICAgICN3ZTsKICAgICAgICAgICNUZSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuI0FlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGUgPSAxID09PSB0aGlzLl9nZXRPcHRpb24oJ2JhdGNoTWF4Q291bnQnKSA_IDAgOiB0aGlzLl9nZXRPcHRpb24oJ2JhdGNoU3RhbGxUaW1lJyk7CiAgICAgICAgICAgIHRoaXMuI0FlID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4jQWUgPSBudWxsOwogICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLiN5ZTsKICAgICAgICAgICAgICBmb3IgKHRoaXMuI3llID0gW107IGUubGVuZ3RoOyApIHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBbZS5zaGlmdCgpXTsKICAgICAgICAgICAgICAgIGZvciAoOyBlLmxlbmd0aCAmJiB0Lmxlbmd0aCAhPT0gdGhpcy4jdi5iYXRjaE1heENvdW50OyApCiAgICAgICAgICAgICAgICAgIGlmICgodC5wdXNoKGUuc2hpZnQoKSksIEpTT04uc3RyaW5naWZ5KHQubWFwKChlKSA9PiBlLnBheWxvYWQpKS5sZW5ndGggPiB0aGlzLiN2LmJhdGNoTWF4U2l6ZSkpIHsKICAgICAgICAgICAgICAgICAgICBlLnVuc2hpZnQodC5wb3AoKSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIChhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAxID09PSB0Lmxlbmd0aCA_IHRbMF0ucGF5bG9hZCA6IHQubWFwKChlKSA9PiBlLnBheWxvYWQpOwogICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlYnVnJywgeyBhY3Rpb246ICdzZW5kUnBjUGF5bG9hZCcsIHBheWxvYWQ6IGUgfSk7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMuX3NlbmQoZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAncmVjZWl2ZVJwY1Jlc3VsdCcsIHJlc3VsdDogciB9KTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgcmVzb2x2ZTogZSwgcmVqZWN0OiBuLCBwYXlsb2FkOiBzIH0gb2YgdCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4oCiAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGEubWFrZUVycm9yKSgncHJvdmlkZXIgZGVzdHJveWVkOyBjYW5jZWxsZWQgcmVxdWVzdCcsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IHMubWV0aG9kCiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gci5maWx0ZXIoKGUpID0-IGUuaWQgPT09IHMuaWQpWzBdOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgJ2Vycm9yJyBpbiB0ID8gbih0aGlzLmdldFJwY0Vycm9yKHMsIHQpKSA6IGUodC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAoMCwgYS5tYWtlRXJyb3IpKCdtaXNzaW5nIHJlc3BvbnNlIGZvciByZXF1ZXN0JywgJ0JBRF9EQVRBJywgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IHsgcGF5bG9hZDogcyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZSksIG4oZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAncmVjZWl2ZVJwY0Vycm9yJywgZXJyb3I6IGUgfSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB7IHJlamVjdDogciB9IG9mIHQpIHIoZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgc3VwZXIoZSwgdCksCiAgICAgICAgICAgICAgKHRoaXMuI2JlID0gMSksCiAgICAgICAgICAgICAgKHRoaXMuI3YgPSBPYmplY3QuYXNzaWduKHt9LCB5LCB0IHx8IHt9KSksCiAgICAgICAgICAgICAgKHRoaXMuI3llID0gW10pLAogICAgICAgICAgICAgICh0aGlzLiNBZSA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLiNFZSA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLiN3ZSA9IG51bGwpOwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgbGV0IGUgPSBudWxsOwogICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUHJvbWlzZSgodCkgPT4gewogICAgICAgICAgICAgICAgZSA9IHQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy4jdmUgPSB7IHByb21pc2U6IHQsIHJlc29sdmU6IGUgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCByID0gdGhpcy5fZ2V0T3B0aW9uKCdzdGF0aWNOZXR3b3JrJyk7CiAgICAgICAgICAgICdib29sZWFuJyA9PSB0eXBlb2YgcgogICAgICAgICAgICAgID8gKCgwLCBhLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgICAgIXIgfHwgJ2FueScgIT09IGUsCiAgICAgICAgICAgICAgICAgICJzdGF0aWNOZXR3b3JrIGNhbm5vdCBiZSB1c2VkIG9uIHNwZWNpYWwgbmV0d29yayAnYW55JyIsCiAgICAgICAgICAgICAgICAgICdvcHRpb25zJywKICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIHIgJiYgbnVsbCAhPSBlICYmICh0aGlzLiNFZSA9IGwuTmV0d29yay5mcm9tKGUpKSkKICAgICAgICAgICAgICA6IHIgJiYKICAgICAgICAgICAgICAgICgoMCwgYS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgIG51bGwgPT0gZSB8fCByLm1hdGNoZXMoZSksCiAgICAgICAgICAgICAgICAgICdzdGF0aWNOZXR3b3JrIE1VU1QgbWF0Y2ggbmV0d29yayBvYmplY3QnLAogICAgICAgICAgICAgICAgICAnb3B0aW9ucycsCiAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAodGhpcy4jRWUgPSByKSk7CiAgICAgICAgICB9CiAgICAgICAgICBfZ2V0T3B0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3ZbZV07CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgX25ldHdvcmsoKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgYS5hc3NlcnQpKHRoaXMuI0VlLCAnbmV0d29yayBpcyBub3QgYXZhaWxhYmxlIHlldCcsICdORVRXT1JLX0VSUk9SJyksIHRoaXMuI0VlOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX3BlcmZvcm0oZSkgewogICAgICAgICAgICBpZiAoJ2NhbGwnID09PSBlLm1ldGhvZCB8fCAnZXN0aW1hdGVHYXMnID09PSBlLm1ldGhvZCkgewogICAgICAgICAgICAgIGxldCB0ID0gZS50cmFuc2FjdGlvbjsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICB0ICYmCiAgICAgICAgICAgICAgICBudWxsICE9IHQudHlwZSAmJgogICAgICAgICAgICAgICAgKDAsIGEuZ2V0QmlnSW50KSh0LnR5cGUpICYmCiAgICAgICAgICAgICAgICBudWxsID09IHQubWF4RmVlUGVyR2FzICYmCiAgICAgICAgICAgICAgICBudWxsID09IHQubWF4UHJpb3JpdHlGZWVQZXJHYXMKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLmdldEZlZURhdGEoKTsKICAgICAgICAgICAgICAgIG51bGwgPT0gci5tYXhGZWVQZXJHYXMgJiYKICAgICAgICAgICAgICAgICAgbnVsbCA9PSByLm1heFByaW9yaXR5RmVlUGVyR2FzICYmCiAgICAgICAgICAgICAgICAgIChlID0gT2JqZWN0LmFzc2lnbih7fSwgZSwgeyB0cmFuc2FjdGlvbjogT2JqZWN0LmFzc2lnbih7fSwgdCwgeyB0eXBlOiB2b2lkIDAgfSkgfSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRScGNSZXF1ZXN0KGUpOwogICAgICAgICAgICByZXR1cm4gbnVsbCAhPSB0ID8gYXdhaXQgdGhpcy5zZW5kKHQubWV0aG9kLCB0LmFyZ3MpIDogc3VwZXIuX3BlcmZvcm0oZSk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBfZGV0ZWN0TmV0d29yaygpIHsKICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2dldE9wdGlvbignc3RhdGljTmV0d29yaycpOwogICAgICAgICAgICBpZiAoZSkgewogICAgICAgICAgICAgIGlmICghMCAhPT0gZSkgcmV0dXJuIGU7CiAgICAgICAgICAgICAgaWYgKHRoaXMuI0VlKSByZXR1cm4gdGhpcy4jRWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3dlCiAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLiN3ZQogICAgICAgICAgICAgIDogdGhpcy5yZWFkeQogICAgICAgICAgICAgICAgPyAoKHRoaXMuI3dlID0gKGFzeW5jICgpID0-IHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGwuTmV0d29yay5mcm9tKCgwLCBhLmdldEJpZ0ludCkoYXdhaXQgdGhpcy5zZW5kKCdldGhfY2hhaW5JZCcsIFtdKSkpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0aGlzLiN3ZSA9IG51bGwpLCBlOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93ICgodGhpcy4jd2UgPSBudWxsKSwgZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KSgpKSwKICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jd2UpCiAgICAgICAgICAgICAgICA6ICgodGhpcy4jd2UgPSAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB7IGlkOiB0aGlzLiNiZSsrLCBtZXRob2Q6ICdldGhfY2hhaW5JZCcsIHBhcmFtczogW10sIGpzb25ycGM6ICcyLjAnIH07CiAgICAgICAgICAgICAgICAgICAgbGV0IHQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAnc2VuZFJwY1BheWxvYWQnLCBwYXlsb2FkOiBlIH0pOwogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAodCA9IChhd2FpdCB0aGlzLl9zZW5kKGUpKVswXSksICh0aGlzLiN3ZSA9IG51bGwpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93ICgodGhpcy4jd2UgPSBudWxsKSwgdGhpcy5lbWl0KCdkZWJ1ZycsIHsgYWN0aW9uOiAncmVjZWl2ZVJwY0Vycm9yJywgZXJyb3I6IGUgfSksIGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuZW1pdCgnZGVidWcnLCB7IGFjdGlvbjogJ3JlY2VpdmVScGNSZXN1bHQnLCByZXN1bHQ6IHQgfSksICdyZXN1bHQnIGluIHQpKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwuTmV0d29yay5mcm9tKCgwLCBhLmdldEJpZ0ludCkodC5yZXN1bHQpKTsKICAgICAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmdldFJwY0Vycm9yKGUsIHQpOwogICAgICAgICAgICAgICAgICB9KSgpKSwKICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jd2UpOwogICAgICAgICAgfQogICAgICAgICAgX3N0YXJ0KCkgewogICAgICAgICAgICBudWxsICE9IHRoaXMuI3ZlICYmCiAgICAgICAgICAgICAgbnVsbCAhPSB0aGlzLiN2ZS5yZXNvbHZlICYmCiAgICAgICAgICAgICAgKHRoaXMuI3ZlLnJlc29sdmUoKSwKICAgICAgICAgICAgICAodGhpcy4jdmUgPSBudWxsKSwKICAgICAgICAgICAgICAoYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgZm9yICg7IG51bGwgPT0gdGhpcy4jRWUgJiYgIXRoaXMuZGVzdHJveWVkOyApCiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4jRWUgPSBhd2FpdCB0aGlzLl9kZXRlY3ROZXR3b3JrKCk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXN0cm95ZWQpIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgICAgICAgICAgICAgJ0pzb25ScGNQcm92aWRlciBmYWlsZWQgdG8gZGV0ZWN0IG5ldHdvcmsgYW5kIGNhbm5vdCBzdGFydCB1cDsgcmV0cnkgaW4gMXMgKHBlcmhhcHMgdGhlIFVSTCBpcyB3cm9uZyBvciB0aGUgbm9kZSBpcyBub3Qgc3RhcnRlZCknCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgKICAgICAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGEubWFrZUVycm9yKSgnZmFpbGVkIHRvIGJvb3RzdHJhcCBuZXR3b3JrIGRldGVjdGlvbicsICdORVRXT1JLX0VSUk9SJywgewogICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnaW5pdGlhbC1uZXR3b3JrLWRpc2NvdmVyeScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mbzogeyBlcnJvcjogZSB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcCgxZTMpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLiNUZSgpOwogICAgICAgICAgICAgIH0pKCkpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX3dhaXRVbnRpbFJlYWR5KCkgewogICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLiN2ZSkgcmV0dXJuIGF3YWl0IHRoaXMuI3ZlLnByb21pc2U7CiAgICAgICAgICB9CiAgICAgICAgICBfZ2V0U3Vic2NyaWJlcihlKSB7CiAgICAgICAgICAgIHJldHVybiAncGVuZGluZycgPT09IGUudHlwZQogICAgICAgICAgICAgID8gbmV3IGQuRmlsdGVySWRQZW5kaW5nU3Vic2NyaWJlcih0aGlzKQogICAgICAgICAgICAgIDogJ2V2ZW50JyA9PT0gZS50eXBlCiAgICAgICAgICAgICAgICA_IHRoaXMuX2dldE9wdGlvbigncG9sbGluZycpCiAgICAgICAgICAgICAgICAgID8gbmV3IGYuUG9sbGluZ0V2ZW50U3Vic2NyaWJlcih0aGlzLCBlLmZpbHRlcikKICAgICAgICAgICAgICAgICAgOiBuZXcgZC5GaWx0ZXJJZEV2ZW50U3Vic2NyaWJlcih0aGlzLCBlLmZpbHRlcikKICAgICAgICAgICAgICAgIDogJ29ycGhhbicgPT09IGUudHlwZSAmJiAnZHJvcC1sb2cnID09PSBlLmZpbHRlci5vcnBoYW4KICAgICAgICAgICAgICAgICAgPyBuZXcgYy5Vbm1hbmFnZWRTdWJzY3JpYmVyKCdvcnBoYW4nKQogICAgICAgICAgICAgICAgICA6IHN1cGVyLl9nZXRTdWJzY3JpYmVyKGUpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHJlYWR5KCkgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLiN2ZTsKICAgICAgICAgIH0KICAgICAgICAgIGdldFJwY1RyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IHt9OwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIFsKICAgICAgICAgICAgICAgICdjaGFpbklkJywKICAgICAgICAgICAgICAgICdnYXNMaW1pdCcsCiAgICAgICAgICAgICAgICAnZ2FzUHJpY2UnLAogICAgICAgICAgICAgICAgJ3R5cGUnLAogICAgICAgICAgICAgICAgJ21heEZlZVBlckdhcycsCiAgICAgICAgICAgICAgICAnbWF4UHJpb3JpdHlGZWVQZXJHYXMnLAogICAgICAgICAgICAgICAgJ25vbmNlJywKICAgICAgICAgICAgICAgICd2YWx1ZScKICAgICAgICAgICAgICBdLmZvckVhY2goKHIpID0-IHsKICAgICAgICAgICAgICAgIGlmIChudWxsID09IGVbcl0pIHJldHVybjsKICAgICAgICAgICAgICAgIGxldCBuID0gcjsKICAgICAgICAgICAgICAgICdnYXNMaW1pdCcgPT09IHIgJiYgKG4gPSAnZ2FzJyksICh0W25dID0gKDAsIGEudG9RdWFudGl0eSkoKDAsIGEuZ2V0QmlnSW50KShlW3JdLCBgdHguJHtyfWApKSk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgWydmcm9tJywgJ3RvJywgJ2RhdGEnXS5mb3JFYWNoKChyKSA9PiB7CiAgICAgICAgICAgICAgICBudWxsICE9IGVbcl0gJiYgKHRbcl0gPSAoMCwgYS5oZXhsaWZ5KShlW3JdKSk7CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgZS5hY2Nlc3NMaXN0ICYmICh0LmFjY2Vzc0xpc3QgPSAoMCwgaS5hY2Nlc3NMaXN0aWZ5KShlLmFjY2Vzc0xpc3QpKSwKICAgICAgICAgICAgICB0CiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRScGNSZXF1ZXN0KGUpIHsKICAgICAgICAgICAgc3dpdGNoIChlLm1ldGhvZCkgewogICAgICAgICAgICAgIGNhc2UgJ2NoYWluSWQnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2NoYWluSWQnLCBhcmdzOiBbXSB9OwogICAgICAgICAgICAgIGNhc2UgJ2dldEJsb2NrTnVtYmVyJzoKICAgICAgICAgICAgICAgIHJldHVybiB7IG1ldGhvZDogJ2V0aF9ibG9ja051bWJlcicsIGFyZ3M6IFtdIH07CiAgICAgICAgICAgICAgY2FzZSAnZ2V0R2FzUHJpY2UnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2dhc1ByaWNlJywgYXJnczogW10gfTsKICAgICAgICAgICAgICBjYXNlICdnZXRQcmlvcml0eUZlZSc6CiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXRob2Q6ICdldGhfbWF4UHJpb3JpdHlGZWVQZXJHYXMnLCBhcmdzOiBbXSB9OwogICAgICAgICAgICAgIGNhc2UgJ2dldEJhbGFuY2UnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2dldEJhbGFuY2UnLCBhcmdzOiBbbShlLmFkZHJlc3MpLCBlLmJsb2NrVGFnXSB9OwogICAgICAgICAgICAgIGNhc2UgJ2dldFRyYW5zYWN0aW9uQ291bnQnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2dldFRyYW5zYWN0aW9uQ291bnQnLCBhcmdzOiBbbShlLmFkZHJlc3MpLCBlLmJsb2NrVGFnXSB9OwogICAgICAgICAgICAgIGNhc2UgJ2dldENvZGUnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2dldENvZGUnLCBhcmdzOiBbbShlLmFkZHJlc3MpLCBlLmJsb2NrVGFnXSB9OwogICAgICAgICAgICAgIGNhc2UgJ2dldFN0b3JhZ2UnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2dldFN0b3JhZ2VBdCcsIGFyZ3M6IFttKGUuYWRkcmVzcyksICcweCcgKyBlLnBvc2l0aW9uLnRvU3RyaW5nKDE2KSwgZS5ibG9ja1RhZ10gfTsKICAgICAgICAgICAgICBjYXNlICdicm9hZGNhc3RUcmFuc2FjdGlvbic6CiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXRob2Q6ICdldGhfc2VuZFJhd1RyYW5zYWN0aW9uJywgYXJnczogW2Uuc2lnbmVkVHJhbnNhY3Rpb25dIH07CiAgICAgICAgICAgICAgY2FzZSAnZ2V0QmxvY2snOgogICAgICAgICAgICAgICAgaWYgKCdibG9ja1RhZycgaW4gZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2dldEJsb2NrQnlOdW1iZXInLCBhcmdzOiBbZS5ibG9ja1RhZywgISFlLmluY2x1ZGVUcmFuc2FjdGlvbnNdIH07CiAgICAgICAgICAgICAgICBpZiAoJ2Jsb2NrSGFzaCcgaW4gZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2dldEJsb2NrQnlIYXNoJywgYXJnczogW2UuYmxvY2tIYXNoLCAhIWUuaW5jbHVkZVRyYW5zYWN0aW9uc10gfTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgJ2dldFRyYW5zYWN0aW9uJzoKICAgICAgICAgICAgICAgIHJldHVybiB7IG1ldGhvZDogJ2V0aF9nZXRUcmFuc2FjdGlvbkJ5SGFzaCcsIGFyZ3M6IFtlLmhhc2hdIH07CiAgICAgICAgICAgICAgY2FzZSAnZ2V0VHJhbnNhY3Rpb25SZWNlaXB0JzoKICAgICAgICAgICAgICAgIHJldHVybiB7IG1ldGhvZDogJ2V0aF9nZXRUcmFuc2FjdGlvblJlY2VpcHQnLCBhcmdzOiBbZS5oYXNoXSB9OwogICAgICAgICAgICAgIGNhc2UgJ2NhbGwnOgogICAgICAgICAgICAgICAgcmV0dXJuIHsgbWV0aG9kOiAnZXRoX2NhbGwnLCBhcmdzOiBbdGhpcy5nZXRScGNUcmFuc2FjdGlvbihlLnRyYW5zYWN0aW9uKSwgZS5ibG9ja1RhZ10gfTsKICAgICAgICAgICAgICBjYXNlICdlc3RpbWF0ZUdhcyc6CiAgICAgICAgICAgICAgICByZXR1cm4geyBtZXRob2Q6ICdldGhfZXN0aW1hdGVHYXMnLCBhcmdzOiBbdGhpcy5nZXRScGNUcmFuc2FjdGlvbihlLnRyYW5zYWN0aW9uKV0gfTsKICAgICAgICAgICAgICBjYXNlICdnZXRMb2dzJzoKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgIGUuZmlsdGVyICYmCiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBlLmZpbHRlci5hZGRyZXNzICYmCiAgICAgICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkoZS5maWx0ZXIuYWRkcmVzcykKICAgICAgICAgICAgICAgICAgICAgID8gKGUuZmlsdGVyLmFkZHJlc3MgPSBlLmZpbHRlci5hZGRyZXNzLm1hcChtKSkKICAgICAgICAgICAgICAgICAgICAgIDogKGUuZmlsdGVyLmFkZHJlc3MgPSBtKGUuZmlsdGVyLmFkZHJlc3MpKSksCiAgICAgICAgICAgICAgICAgIHsgbWV0aG9kOiAnZXRoX2dldExvZ3MnLCBhcmdzOiBbZS5maWx0ZXJdIH0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBnZXRScGNFcnJvcihlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHsgbWV0aG9kOiByIH0gPSBlLAogICAgICAgICAgICAgIHsgZXJyb3I6IHMgfSA9IHQ7CiAgICAgICAgICAgIGlmICgnZXRoX2VzdGltYXRlR2FzJyA9PT0gciAmJiBzLm1lc3NhZ2UpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gcy5tZXNzYWdlOwogICAgICAgICAgICAgIGlmICghdC5tYXRjaCgvcmV2ZXJ0L2kpICYmIHQubWF0Y2goL2luc3VmZmljaWVudCBmdW5kcy9pKSkKICAgICAgICAgICAgICAgIHJldHVybiAoMCwgYS5tYWtlRXJyb3IpKCdpbnN1ZmZpY2llbnQgZnVuZHMnLCAnSU5TVUZGSUNJRU5UX0ZVTkRTJywgewogICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogZS5wYXJhbXNbMF0sCiAgICAgICAgICAgICAgICAgIGluZm86IHsgcGF5bG9hZDogZSwgZXJyb3I6IHMgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCdldGhfY2FsbCcgPT09IHIgfHwgJ2V0aF9lc3RpbWF0ZUdhcycgPT09IHIpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gdyhzKSwKICAgICAgICAgICAgICAgIG8gPSBuLkFiaUNvZGVyLmdldEJ1aWx0aW5DYWxsRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAnZXRoX2NhbGwnID09PSByID8gJ2NhbGwnIDogJ2VzdGltYXRlR2FzJywKICAgICAgICAgICAgICAgICAgZS5wYXJhbXNbMF0sCiAgICAgICAgICAgICAgICAgIHQgPyB0LmRhdGEgOiBudWxsCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybiAoby5pbmZvID0geyBlcnJvcjogcywgcGF5bG9hZDogZSB9KSwgbzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBvID0gSlNPTi5zdHJpbmdpZnkoCiAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0ID0gW107CiAgICAgICAgICAgICAgICByZXR1cm4gVChlLCB0KSwgdDsKICAgICAgICAgICAgICB9KShzKQogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIHMubWVzc2FnZSAmJiBzLm1lc3NhZ2UubWF0Y2goL3VzZXIgZGVuaWVkfGV0aGVycy11c2VyLWRlbmllZC9pKSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSB7CiAgICAgICAgICAgICAgICBldGhfc2lnbjogJ3NpZ25NZXNzYWdlJywKICAgICAgICAgICAgICAgIHBlcnNvbmFsX3NpZ246ICdzaWduTWVzc2FnZScsCiAgICAgICAgICAgICAgICBldGhfc2lnblR5cGVkRGF0YV92NDogJ3NpZ25UeXBlZERhdGEnLAogICAgICAgICAgICAgICAgZXRoX3NpZ25UcmFuc2FjdGlvbjogJ3NpZ25UcmFuc2FjdGlvbicsCiAgICAgICAgICAgICAgICBldGhfc2VuZFRyYW5zYWN0aW9uOiAnc2VuZFRyYW5zYWN0aW9uJywKICAgICAgICAgICAgICAgIGV0aF9yZXF1ZXN0QWNjb3VudHM6ICdyZXF1ZXN0QWNjZXNzJywKICAgICAgICAgICAgICAgIHdhbGxldF9yZXF1ZXN0QWNjb3VudHM6ICdyZXF1ZXN0QWNjZXNzJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgcmV0dXJuICgwLCBhLm1ha2VFcnJvcikoJ3VzZXIgcmVqZWN0ZWQgYWN0aW9uJywgJ0FDVElPTl9SRUpFQ1RFRCcsIHsKICAgICAgICAgICAgICAgIGFjdGlvbjogdFtyXSB8fCAndW5rbm93bicsCiAgICAgICAgICAgICAgICByZWFzb246ICdyZWplY3RlZCcsCiAgICAgICAgICAgICAgICBpbmZvOiB7IHBheWxvYWQ6IGUsIGVycm9yOiBzIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJ2V0aF9zZW5kUmF3VHJhbnNhY3Rpb24nID09PSByIHx8ICdldGhfc2VuZFRyYW5zYWN0aW9uJyA9PT0gcikgewogICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnBhcmFtc1swXTsKICAgICAgICAgICAgICBpZiAoby5tYXRjaCgvaW5zdWZmaWNpZW50IGZ1bmRzfGJhc2UgZmVlIGV4Y2VlZHMgZ2FzIGxpbWl0L2kpKQogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBhLm1ha2VFcnJvcikoJ2luc3VmZmljaWVudCBmdW5kcyBmb3IgaW50cmluc2ljIHRyYW5zYWN0aW9uIGNvc3QnLCAnSU5TVUZGSUNJRU5UX0ZVTkRTJywgewogICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdCwKICAgICAgICAgICAgICAgICAgaW5mbzogeyBlcnJvcjogcyB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoby5tYXRjaCgvbm9uY2UvaSkgJiYgby5tYXRjaCgvdG9vIGxvdy9pKSkKICAgICAgICAgICAgICAgIHJldHVybiAoMCwgYS5tYWtlRXJyb3IpKCdub25jZSBoYXMgYWxyZWFkeSBiZWVuIHVzZWQnLCAnTk9OQ0VfRVhQSVJFRCcsIHsKICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHQsCiAgICAgICAgICAgICAgICAgIGluZm86IHsgZXJyb3I6IHMgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKG8ubWF0Y2goL3JlcGxhY2VtZW50IHRyYW5zYWN0aW9uL2kpICYmIG8ubWF0Y2goL3VuZGVycHJpY2VkL2kpKQogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBhLm1ha2VFcnJvcikoJ3JlcGxhY2VtZW50IGZlZSB0b28gbG93JywgJ1JFUExBQ0VNRU5UX1VOREVSUFJJQ0VEJywgewogICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdCwKICAgICAgICAgICAgICAgICAgaW5mbzogeyBlcnJvcjogcyB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoby5tYXRjaCgvb25seSByZXBsYXktcHJvdGVjdGVkL2kpKQogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBhLm1ha2VFcnJvcikoJ2xlZ2FjeSBwcmUtZWlwLTE1NSB0cmFuc2FjdGlvbnMgbm90IHN1cHBvcnRlZCcsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogciwKICAgICAgICAgICAgICAgICAgaW5mbzogeyB0cmFuc2FjdGlvbjogdCwgaW5mbzogeyBlcnJvcjogcyB9IH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBpID0gISFvLm1hdGNoKC90aGUgbWV0aG9kIC4qIGRvZXMgbm90IGV4aXN0L2kpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIGkgfHwgKHMgJiYgcy5kZXRhaWxzICYmIHMuZGV0YWlscy5zdGFydHNXaXRoKCdVbmF1dGhvcml6ZWQgbWV0aG9kOicpICYmIChpID0gITApKSwKICAgICAgICAgICAgICBpCiAgICAgICAgICAgICAgICA_ICgwLCBhLm1ha2VFcnJvcikoJ3Vuc3VwcG9ydGVkIG9wZXJhdGlvbicsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBlLm1ldGhvZCwKICAgICAgICAgICAgICAgICAgICBpbmZvOiB7IGVycm9yOiBzLCBwYXlsb2FkOiBlIH0KICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDogKDAsIGEubWFrZUVycm9yKSgnY291bGQgbm90IGNvYWxlc2NlIGVycm9yJywgJ1VOS05PV05fRVJST1InLCB7IGVycm9yOiBzLCBwYXlsb2FkOiBlIH0pCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBzZW5kKGUsIHQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZGVzdHJveWVkKQogICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgKICAgICAgICAgICAgICAgICgwLCBhLm1ha2VFcnJvcikoJ3Byb3ZpZGVyIGRlc3Ryb3llZDsgY2FuY2VsbGVkIHJlcXVlc3QnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgeyBvcGVyYXRpb246IGUgfSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICBjb25zdCByID0gdGhpcy4jYmUrKywKICAgICAgICAgICAgICBuID0gbmV3IFByb21pc2UoKG4sIHMpID0-IHsKICAgICAgICAgICAgICAgIHRoaXMuI3llLnB1c2goeyByZXNvbHZlOiBuLCByZWplY3Q6IHMsIHBheWxvYWQ6IHsgbWV0aG9kOiBlLCBwYXJhbXM6IHQsIGlkOiByLCBqc29ucnBjOiAnMi4wJyB9IH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gdGhpcy4jVGUoKSwgbjsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldFNpZ25lcihlKSB7CiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9IDApOwogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5zZW5kKCdldGhfYWNjb3VudHMnLCBbXSk7CiAgICAgICAgICAgIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0OwogICAgICAgICAgICAgIGlmIChlID49IHIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ25vIHN1Y2ggYWNjb3VudCcpOwogICAgICAgICAgICAgIHJldHVybiBuZXcgQSh0aGlzLCByW2VdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB7IGFjY291bnRzOiByIH0gPSBhd2FpdCAoMCwgYS5yZXNvbHZlUHJvcGVydGllcykoeyBuZXR3b3JrOiB0aGlzLmdldE5ldHdvcmsoKSwgYWNjb3VudHM6IHQgfSk7CiAgICAgICAgICAgIGUgPSAoMCwgcy5nZXRBZGRyZXNzKShlKTsKICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIGlmICgoMCwgcy5nZXRBZGRyZXNzKSh0KSA9PT0gZSkgcmV0dXJuIG5ldyBBKHRoaXMsIGUpOwogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYWNjb3VudCcpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgbGlzdEFjY291bnRzKCkgewogICAgICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuc2VuZCgnZXRoX2FjY291bnRzJywgW10pKS5tYXAoKGUpID0-IG5ldyBBKHRoaXMsIGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlc3Ryb3koKSB7CiAgICAgICAgICAgIHRoaXMuI0FlICYmIChjbGVhclRpbWVvdXQodGhpcy4jQWUpLCAodGhpcy4jQWUgPSBudWxsKSk7CiAgICAgICAgICAgIGZvciAoY29uc3QgeyBwYXlsb2FkOiBlLCByZWplY3Q6IHQgfSBvZiB0aGlzLiN5ZSkKICAgICAgICAgICAgICB0KAogICAgICAgICAgICAgICAgKDAsIGEubWFrZUVycm9yKSgncHJvdmlkZXIgZGVzdHJveWVkOyBjYW5jZWxsZWQgcmVxdWVzdCcsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogZS5tZXRob2QKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgKHRoaXMuI3llID0gW10pLCBzdXBlci5kZXN0cm95KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuSnNvblJwY0FwaVByb3ZpZGVyID0gdjsKICAgICAgICBjbGFzcyBFIGV4dGVuZHMgdiB7CiAgICAgICAgICAjUGU7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIHN1cGVyKGUsIHQpLCAodGhpcy4jUGUgPSA0ZTMpOwogICAgICAgICAgfQogICAgICAgICAgX2dldFN1YnNjcmliZXIoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gc3VwZXIuX2dldFN1YnNjcmliZXIoZSk7CiAgICAgICAgICAgIHJldHVybiBiKHQpICYmICh0LnBvbGxpbmdJbnRlcnZhbCA9IHRoaXMuI1BlKSwgdDsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwb2xsaW5nSW50ZXJ2YWwoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNQZTsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBwb2xsaW5nSW50ZXJ2YWwoZSkgewogICAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoZSkgfHwgZSA8IDApIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBpbnRlcnZhbCcpOwogICAgICAgICAgICAodGhpcy4jUGUgPSBlKSwKICAgICAgICAgICAgICB0aGlzLl9mb3JFYWNoU3Vic2NyaWJlcigoZSkgPT4gewogICAgICAgICAgICAgICAgYihlKSAmJiAoZS5wb2xsaW5nSW50ZXJ2YWwgPSB0aGlzLiNQZSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHcoZSkgewogICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIG51bGw7CiAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGUubWVzc2FnZSAmJiBlLm1lc3NhZ2UubWF0Y2goL3JldmVydC9pKSAmJiAoMCwgYS5pc0hleFN0cmluZykoZS5kYXRhKSkKICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogZS5tZXNzYWdlLCBkYXRhOiBlLmRhdGEgfTsKICAgICAgICAgIGlmICgnb2JqZWN0JyA9PSB0eXBlb2YgZSkgewogICAgICAgICAgICBmb3IgKGNvbnN0IHQgaW4gZSkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSB3KGVbdF0pOwogICAgICAgICAgICAgIGlmIChyKSByZXR1cm4gcjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gdyhKU09OLnBhcnNlKGUpKTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBUKGUsIHQpIHsKICAgICAgICAgIGlmIChudWxsICE9IGUpIHsKICAgICAgICAgICAgaWYgKCgnc3RyaW5nJyA9PSB0eXBlb2YgZS5tZXNzYWdlICYmIHQucHVzaChlLm1lc3NhZ2UpLCAnb2JqZWN0JyA9PSB0eXBlb2YgZSkpCiAgICAgICAgICAgICAgZm9yIChjb25zdCByIGluIGUpIFQoZVtyXSwgdCk7CiAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSkKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIFQoSlNPTi5wYXJzZShlKSwgdCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuSnNvblJwY0FwaVBvbGxpbmdQcm92aWRlciA9IEUpLAogICAgICAgICAgKHQuSnNvblJwY1Byb3ZpZGVyID0gY2xhc3MgZXh0ZW5kcyBFIHsKICAgICAgICAgICAgI1NlOwogICAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgICAgbnVsbCA9PSBlICYmIChlID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODU0NScpLAogICAgICAgICAgICAgICAgc3VwZXIodCwgciksCiAgICAgICAgICAgICAgICAodGhpcy4jU2UgPSAnc3RyaW5nJyA9PSB0eXBlb2YgZSA_IG5ldyBhLkZldGNoUmVxdWVzdChlKSA6IGUuY2xvbmUoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2dldENvbm5lY3Rpb24oKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI1NlLmNsb25lKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXN5bmMgc2VuZChlLCB0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0KCksIGF3YWl0IHN1cGVyLnNlbmQoZSwgdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXN5bmMgX3NlbmQoZSkgewogICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl9nZXRDb25uZWN0aW9uKCk7CiAgICAgICAgICAgICAgKHQuYm9keSA9IEpTT04uc3RyaW5naWZ5KGUpKSwgdC5zZXRIZWFkZXIoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7CiAgICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHQuc2VuZCgpOwogICAgICAgICAgICAgIHIuYXNzZXJ0T2soKTsKICAgICAgICAgICAgICBsZXQgbiA9IHIuYm9keUpzb247CiAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobikgfHwgKG4gPSBbbl0pLCBuOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNzMxNjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuUG9ja2V0UHJvdmlkZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoMzgwMCksCiAgICAgICAgICBvID0gcigxMTA0KSwKICAgICAgICAgIGkgPSByKDk1MjgpLAogICAgICAgICAgYSA9ICc2MmUxYWQ1MWIzN2I4ZTAwMzk0YmRhM2InOwogICAgICAgIGNsYXNzIGMgZXh0ZW5kcyBpLkpzb25ScGNQcm92aWRlciB7CiAgICAgICAgICBhcHBsaWNhdGlvbklkOwogICAgICAgICAgYXBwbGljYXRpb25TZWNyZXQ7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9ICdtYWlubmV0Jyk7CiAgICAgICAgICAgIGNvbnN0IHMgPSBvLk5ldHdvcmsuZnJvbShlKTsKICAgICAgICAgICAgbnVsbCA9PSB0ICYmICh0ID0gYSksIG51bGwgPT0gciAmJiAociA9IG51bGwpOwogICAgICAgICAgICBjb25zdCBpID0geyBzdGF0aWNOZXR3b3JrOiBzIH07CiAgICAgICAgICAgIHN1cGVyKGMuZ2V0UmVxdWVzdChzLCB0LCByKSwgcywgaSksCiAgICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBhcHBsaWNhdGlvbklkOiB0LCBhcHBsaWNhdGlvblNlY3JldDogciB9KTsKICAgICAgICAgIH0KICAgICAgICAgIF9nZXRQcm92aWRlcihlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBjKGUsIHRoaXMuYXBwbGljYXRpb25JZCwgdGhpcy5hcHBsaWNhdGlvblNlY3JldCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIHJldHVybiBzdXBlci5fZ2V0UHJvdmlkZXIoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZ2V0UmVxdWVzdChlLCB0LCByKSB7CiAgICAgICAgICAgIG51bGwgPT0gdCAmJiAodCA9IGEpOwogICAgICAgICAgICBjb25zdCBvID0gbmV3IG4uRmV0Y2hSZXF1ZXN0KAogICAgICAgICAgICAgIGBodHRwczovLyR7KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnbWFpbm5ldCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdldGgtbWFpbm5ldC5nYXRld2F5LnBva3QubmV0d29yayc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ2dvZXJsaSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdldGgtZ29lcmxpLmdhdGV3YXkucG9rdC5uZXR3b3JrJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0aWMnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAncG9seS1tYWlubmV0LmdhdGV3YXkucG9rdC5uZXR3b3JrJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0aWMtbXVtYmFpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3BvbHlnb24tbXVtYmFpLXJwYy5nYXRld2F5LnBva3QubmV0d29yayc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoITEsICd1bnN1cHBvcnRlZCBuZXR3b3JrJywgJ25ldHdvcmsnLCBlKTsKICAgICAgICAgICAgICB9KShlLm5hbWUpfS92MS9sYi8ke3R9YAogICAgICAgICAgICApOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIChvLmFsbG93R3ppcCA9ICEwKSwKICAgICAgICAgICAgICByICYmIG8uc2V0Q3JlZGVudGlhbHMoJycsIHIpLAogICAgICAgICAgICAgIHQgPT09IGEgJiYgKG8ucmV0cnlGdW5jID0gYXN5bmMgKGUsIHQsIHIpID0-ICgoMCwgcy5zaG93VGhyb3R0bGVNZXNzYWdlKSgnUG9ja2V0UHJvdmlkZXInKSwgITApKSwKICAgICAgICAgICAgICBvCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBpc0NvbW11bml0eVJlc291cmNlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBsaWNhdGlvbklkID09PSBhOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LlBvY2tldFByb3ZpZGVyID0gYzsKICAgICAgfSwKICAgICAgNTI0NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuUXVpY2tOb2RlUHJvdmlkZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoMzgwMCksCiAgICAgICAgICBvID0gcigxMTA0KSwKICAgICAgICAgIGkgPSByKDk1MjgpLAogICAgICAgICAgYSA9ICc5MTliNDEyYTA1N2I1ZTljOWI2ZGNlMTkzYzVhNjAyNDJkNmVmYWRiJzsKICAgICAgICBjbGFzcyBjIGV4dGVuZHMgaS5Kc29uUnBjUHJvdmlkZXIgewogICAgICAgICAgdG9rZW47CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0KSB7CiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9ICdtYWlubmV0Jyk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBvLk5ldHdvcmsuZnJvbShlKTsKICAgICAgICAgICAgbnVsbCA9PSB0ICYmICh0ID0gYSksCiAgICAgICAgICAgICAgc3VwZXIoYy5nZXRSZXF1ZXN0KHIsIHQpLCByLCB7IHN0YXRpY05ldHdvcms6IHIgfSksCiAgICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyB0b2tlbjogdCB9KTsKICAgICAgICAgIH0KICAgICAgICAgIF9nZXRQcm92aWRlcihlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBjKGUsIHRoaXMudG9rZW4pOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICByZXR1cm4gc3VwZXIuX2dldFByb3ZpZGVyKGUpOwogICAgICAgICAgfQogICAgICAgICAgaXNDb21tdW5pdHlSZXNvdXJjZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9rZW4gPT09IGE7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZ2V0UmVxdWVzdChlLCB0KSB7CiAgICAgICAgICAgIG51bGwgPT0gdCAmJiAodCA9IGEpOwogICAgICAgICAgICBjb25zdCByID0gbmV3IG4uRmV0Y2hSZXF1ZXN0KAogICAgICAgICAgICAgIGBodHRwczovLyR7KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnbWFpbm5ldCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdldGhlcnMucXVpa25vZGUucHJvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2V0aGVycy5ldGhlcmV1bS1nb2VybGkucXVpa25vZGUucHJvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnYXJiaXRydW0nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnZXRoZXJzLmFyYml0cnVtLW1haW5uZXQucXVpa25vZGUucHJvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnYXJiaXRydW0tZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2V0aGVycy5hcmJpdHJ1bS1nb2VybGkucXVpa25vZGUucHJvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0aWMnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAnZXRoZXJzLm1hdGljLnF1aWtub2RlLnBybyc7CiAgICAgICAgICAgICAgICAgIGNhc2UgJ21hdGljLW11bWJhaSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdldGhlcnMubWF0aWMtdGVzdG5ldC5xdWlrbm9kZS5wcm8nOwogICAgICAgICAgICAgICAgICBjYXNlICdvcHRpbWlzbSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdldGhlcnMub3B0aW1pc20ucXVpa25vZGUucHJvJzsKICAgICAgICAgICAgICAgICAgY2FzZSAnb3B0aW1pc20tZ29lcmxpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2V0aGVycy5vcHRpbWlzbS1nb2VybGkucXVpa25vZGUucHJvJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSghMSwgJ3Vuc3VwcG9ydGVkIG5ldHdvcmsnLCAnbmV0d29yaycsIGUpOwogICAgICAgICAgICAgIH0pKGUubmFtZSl9LyR7dH1gCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKHIuYWxsb3dHemlwID0gITApLAogICAgICAgICAgICAgIHQgPT09IGEgJiYgKHIucmV0cnlGdW5jID0gYXN5bmMgKGUsIHQsIHIpID0-ICgoMCwgcy5zaG93VGhyb3R0bGVNZXNzYWdlKSgnUXVpY2tOb2RlUHJvdmlkZXInKSwgITApKSwKICAgICAgICAgICAgICByCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuUXVpY2tOb2RlUHJvdmlkZXIgPSBjOwogICAgICB9LAogICAgICAxNTIwOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuU29ja2V0UHJvdmlkZXIgPQogICAgICAgICAgICB0LlNvY2tldEV2ZW50U3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuU29ja2V0UGVuZGluZ1N1YnNjcmliZXIgPQogICAgICAgICAgICB0LlNvY2tldEJsb2NrU3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuU29ja2V0U3Vic2NyaWJlciA9CiAgICAgICAgICAgICAgdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig4MDEyKSwKICAgICAgICAgIHMgPSByKDUzMTYpLAogICAgICAgICAgbyA9IHIoOTUyOCk7CiAgICAgICAgY2xhc3MgaSB7CiAgICAgICAgICAjT2U7CiAgICAgICAgICAjRTsKICAgICAgICAgIGdldCBmaWx0ZXIoKSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuI0UpOwogICAgICAgICAgfQogICAgICAgICAgI1JlOwogICAgICAgICAgI05lOwogICAgICAgICAgI0xlOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICAodGhpcy4jT2UgPSBlKSwgKHRoaXMuI0UgPSBKU09OLnN0cmluZ2lmeSh0KSksICh0aGlzLiNSZSA9IG51bGwpLCAodGhpcy4jTmUgPSBudWxsKSwgKHRoaXMuI0xlID0gbnVsbCk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGFydCgpIHsKICAgICAgICAgICAgdGhpcy4jUmUgPSB0aGlzLiNPZS5zZW5kKCdldGhfc3Vic2NyaWJlJywgdGhpcy5maWx0ZXIpLnRoZW4oKGUpID0-ICh0aGlzLiNPZS5fcmVnaXN0ZXIoZSwgdGhpcyksIGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0b3AoKSB7CiAgICAgICAgICAgIHRoaXMuI1JlLnRoZW4oKGUpID0-IHsKICAgICAgICAgICAgICB0aGlzLiNPZS5zZW5kKCdldGhfdW5zdWJzY3JpYmUnLCBbZV0pOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAodGhpcy4jUmUgPSBudWxsKTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdXNlKGUpIHsKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0KSgKICAgICAgICAgICAgICBlLAogICAgICAgICAgICAgICdwcmVzZXJ2ZSBsb2dzIHdoaWxlIHBhdXNlZCBub3Qgc3VwcG9ydGVkIGJ5IFNvY2tldFN1YnNjcmliZXIgeWV0JywKICAgICAgICAgICAgICAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywKICAgICAgICAgICAgICB7IG9wZXJhdGlvbjogJ3BhdXNlKGZhbHNlKScgfQogICAgICAgICAgICApLAogICAgICAgICAgICAgICh0aGlzLiNOZSA9ICEhZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXN1bWUoKSB7CiAgICAgICAgICAgIHRoaXMuI05lID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIF9oYW5kbGVNZXNzYWdlKGUpIHsKICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy4jUmUgJiYgbnVsbCA9PT0gdGhpcy4jTmUpIHsKICAgICAgICAgICAgICBsZXQgdCA9IHRoaXMuI0xlOwogICAgICAgICAgICAgICh0ID0KICAgICAgICAgICAgICAgIG51bGwgPT0gdAogICAgICAgICAgICAgICAgICA_IHRoaXMuX2VtaXQodGhpcy4jT2UsIGUpCiAgICAgICAgICAgICAgICAgIDogdC50aGVuKGFzeW5jICgpID0-IHsKICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2VtaXQodGhpcy4jT2UsIGUpOwogICAgICAgICAgICAgICAgICAgIH0pKSwKICAgICAgICAgICAgICAgICh0aGlzLiNMZSA9IHQudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuI0xlID09PSB0ICYmICh0aGlzLiNMZSA9IG51bGwpOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBfZW1pdChlLCB0KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3ViLWNsYXNzZXMgbXVzdCBpbXBsZW1lbnRlIHRoaXM7IF9lbWl0Jyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuU29ja2V0U3Vic2NyaWJlciA9IGk7CiAgICAgICAgY2xhc3MgYSBleHRlbmRzIGkgewogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICBzdXBlcihlLCBbJ25ld0hlYWRzJ10pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX2VtaXQoZSwgdCkgewogICAgICAgICAgICBlLmVtaXQoJ2Jsb2NrJywgcGFyc2VJbnQodC5udW1iZXIpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5Tb2NrZXRCbG9ja1N1YnNjcmliZXIgPSBhOwogICAgICAgIGNsYXNzIGMgZXh0ZW5kcyBpIHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgc3VwZXIoZSwgWyduZXdQZW5kaW5nVHJhbnNhY3Rpb25zJ10pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX2VtaXQoZSwgdCkgewogICAgICAgICAgICBlLmVtaXQoJ3BlbmRpbmcnLCB0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5Tb2NrZXRQZW5kaW5nU3Vic2NyaWJlciA9IGM7CiAgICAgICAgY2xhc3MgdSBleHRlbmRzIGkgewogICAgICAgICAgI0JlOwogICAgICAgICAgZ2V0IGxvZ0ZpbHRlcigpIHsKICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy4jQmUpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICBzdXBlcihlLCBbJ2xvZ3MnLCB0XSksICh0aGlzLiNCZSA9IEpTT04uc3RyaW5naWZ5KHQpKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIF9lbWl0KGUsIHQpIHsKICAgICAgICAgICAgZS5lbWl0KHRoaXMubG9nRmlsdGVyLCBlLl93cmFwTG9nKHQsIGUuX25ldHdvcmspKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5Tb2NrZXRFdmVudFN1YnNjcmliZXIgPSB1OwogICAgICAgIGNsYXNzIGwgZXh0ZW5kcyBvLkpzb25ScGNBcGlQcm92aWRlciB7CiAgICAgICAgICAjQ2U7CiAgICAgICAgICAjazsKICAgICAgICAgICNrZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IE9iamVjdC5hc3NpZ24oe30sIG51bGwgIT0gdCA_IHQgOiB7fSk7CiAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICBudWxsID09IHIuYmF0Y2hNYXhDb3VudCB8fCAxID09PSByLmJhdGNoTWF4Q291bnQsCiAgICAgICAgICAgICAgJ3NvY2tldHMtYmFzZWQgcHJvdmlkZXJzIGRvIG5vdCBzdXBwb3J0IGJhdGNoZXMnLAogICAgICAgICAgICAgICdvcHRpb25zLmJhdGNoTWF4Q291bnQnLAogICAgICAgICAgICAgIHQKICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAoci5iYXRjaE1heENvdW50ID0gMSksCiAgICAgICAgICAgICAgbnVsbCA9PSByLnN0YXRpY05ldHdvcmsgJiYgKHIuc3RhdGljTmV0d29yayA9ICEwKSwKICAgICAgICAgICAgICBzdXBlcihlLCByKSwKICAgICAgICAgICAgICAodGhpcy4jQ2UgPSBuZXcgTWFwKCkpLAogICAgICAgICAgICAgICh0aGlzLiNrID0gbmV3IE1hcCgpKSwKICAgICAgICAgICAgICAodGhpcy4ja2UgPSBuZXcgTWFwKCkpOwogICAgICAgICAgfQogICAgICAgICAgX2dldFN1YnNjcmliZXIoZSkgewogICAgICAgICAgICBzd2l0Y2ggKGUudHlwZSkgewogICAgICAgICAgICAgIGNhc2UgJ2Nsb3NlJzoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbi5Vbm1hbmFnZWRTdWJzY3JpYmVyKCdjbG9zZScpOwogICAgICAgICAgICAgIGNhc2UgJ2Jsb2NrJzoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYSh0aGlzKTsKICAgICAgICAgICAgICBjYXNlICdwZW5kaW5nJzoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgYyh0aGlzKTsKICAgICAgICAgICAgICBjYXNlICdldmVudCc6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHUodGhpcywgZS5maWx0ZXIpOwogICAgICAgICAgICAgIGNhc2UgJ29ycGhhbic6CiAgICAgICAgICAgICAgICBpZiAoJ2Ryb3AtbG9nJyA9PT0gZS5maWx0ZXIub3JwaGFuKSByZXR1cm4gbmV3IG4uVW5tYW5hZ2VkU3Vic2NyaWJlcignZHJvcC1sb2cnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3VwZXIuX2dldFN1YnNjcmliZXIoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBfcmVnaXN0ZXIoZSwgdCkgewogICAgICAgICAgICB0aGlzLiNrLnNldChlLCB0KTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuI2tlLmdldChlKTsKICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcikgdC5faGFuZGxlTWVzc2FnZShlKTsKICAgICAgICAgICAgICB0aGlzLiNrZS5kZWxldGUoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIF9zZW5kKGUpIHsKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKCFBcnJheS5pc0FycmF5KGUpLCAnV2ViU29ja2V0IGRvZXMgbm90IHN1cHBvcnQgYmF0Y2ggc2VuZCcsICdwYXlsb2FkJywgZSk7CiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUHJvbWlzZSgodCwgcikgPT4gewogICAgICAgICAgICAgIHRoaXMuI0NlLnNldChlLmlkLCB7IHBheWxvYWQ6IGUsIHJlc29sdmU6IHQsIHJlamVjdDogciB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl93YWl0VW50aWxSZWFkeSgpLCBhd2FpdCB0aGlzLl93cml0ZShKU09OLnN0cmluZ2lmeShlKSksIFthd2FpdCB0XTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIF9wcm9jZXNzTWVzc2FnZShlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBKU09OLnBhcnNlKGUpOwogICAgICAgICAgICBpZiAodCAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgdCAmJiAnaWQnIGluIHQpIHsKICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy4jQ2UuZ2V0KHQuaWQpOwogICAgICAgICAgICAgIGlmIChudWxsID09IGUpCiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmVtaXQoCiAgICAgICAgICAgICAgICAgICdlcnJvcicsCiAgICAgICAgICAgICAgICAgICgwLCBzLm1ha2VFcnJvcikoJ3JlY2VpdmVkIHJlc3VsdCBmb3IgdW5rbm93biBpZCcsICdVTktOT1dOX0VSUk9SJywgewogICAgICAgICAgICAgICAgICAgIHJlYXNvbkNvZGU6ICdVTktOT1dOX0lEJywKICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHQKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgdGhpcy4jQ2UuZGVsZXRlKHQuaWQpLCBlLnJlc29sdmUodCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCF0IHx8ICdldGhfc3Vic2NyaXB0aW9uJyAhPT0gdC5tZXRob2QpCiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmVtaXQoCiAgICAgICAgICAgICAgICAgICdlcnJvcicsCiAgICAgICAgICAgICAgICAgICgwLCBzLm1ha2VFcnJvcikoJ3JlY2VpdmVkIHVuZXhwZWN0ZWQgbWVzc2FnZScsICdVTktOT1dOX0VSUk9SJywgewogICAgICAgICAgICAgICAgICAgIHJlYXNvbkNvZGU6ICdVTkVYUEVDVEVEX01FU1NBR0UnLAogICAgICAgICAgICAgICAgICAgIHJlc3VsdDogdAogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5wYXJhbXMuc3Vic2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICByID0gdGhpcy4jay5nZXQoZSk7CiAgICAgICAgICAgICAgICBpZiAocikgci5faGFuZGxlTWVzc2FnZSh0LnBhcmFtcy5yZXN1bHQpOwogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxldCByID0gdGhpcy4ja2UuZ2V0KGUpOwogICAgICAgICAgICAgICAgICBudWxsID09IHIgJiYgKChyID0gW10pLCB0aGlzLiNrZS5zZXQoZSwgcikpLCByLnB1c2godC5wYXJhbXMucmVzdWx0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIF93cml0ZShlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3ViLWNsYXNzZXMgbXVzdCBvdmVycmlkZSB0aGlzJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuU29ja2V0UHJvdmlkZXIgPSBsOwogICAgICB9LAogICAgICAzNjMyOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5XZWJTb2NrZXRQcm92aWRlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNDEwNCksCiAgICAgICAgICBzID0gcigxNTIwKTsKICAgICAgICBjbGFzcyBvIGV4dGVuZHMgcy5Tb2NrZXRQcm92aWRlciB7CiAgICAgICAgICAjU2U7CiAgICAgICAgICAjSWU7CiAgICAgICAgICBnZXQgd2Vic29ja2V0KCkgewogICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLiNJZSkgdGhyb3cgbmV3IEVycm9yKCd3ZWJzb2NrZXQgY2xvc2VkJyk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNJZTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgc3VwZXIodCwgciksCiAgICAgICAgICAgICAgJ3N0cmluZycgPT0gdHlwZW9mIGUKICAgICAgICAgICAgICAgID8gKCh0aGlzLiNTZSA9ICgpID0-IG5ldyBuLldlYlNvY2tldChlKSksICh0aGlzLiNJZSA9IHRoaXMuI1NlKCkpKQogICAgICAgICAgICAgICAgOiAnZnVuY3Rpb24nID09IHR5cGVvZiBlCiAgICAgICAgICAgICAgICAgID8gKCh0aGlzLiNTZSA9IGUpLCAodGhpcy4jSWUgPSBlKCkpKQogICAgICAgICAgICAgICAgICA6ICgodGhpcy4jU2UgPSBudWxsKSwgKHRoaXMuI0llID0gZSkpLAogICAgICAgICAgICAgICh0aGlzLndlYnNvY2tldC5vbm9wZW4gPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zdGFydCgpLCB0aGlzLnJlc3VtZSgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmFpbGVkIHRvIHN0YXJ0IFdlYnNvY2tldFByb3ZpZGVyJywgZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgKHRoaXMud2Vic29ja2V0Lm9ubWVzc2FnZSA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzTWVzc2FnZShlLmRhdGEpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX3dyaXRlKGUpIHsKICAgICAgICAgICAgdGhpcy53ZWJzb2NrZXQuc2VuZChlKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGRlc3Ryb3koKSB7CiAgICAgICAgICAgIG51bGwgIT0gdGhpcy4jSWUgJiYgKHRoaXMuI0llLmNsb3NlKCksICh0aGlzLiNJZSA9IG51bGwpKSwgc3VwZXIuZGVzdHJveSgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LldlYlNvY2tldFByb3ZpZGVyID0gbzsKICAgICAgfSwKICAgICAgNjk5MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LlRyYW5zYWN0aW9uUmVzcG9uc2UgPSB0LlRyYW5zYWN0aW9uUmVjZWlwdCA9IHQuTG9nID0gdC5CbG9jayA9IHQuY29weVJlcXVlc3QgPSB0LkZlZURhdGEgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9IHIoMTEyNCksCiAgICAgICAgICBvID0gQmlnSW50KDApOwogICAgICAgIGZ1bmN0aW9uIGkoZSkgewogICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA_IG51bGwgOiBlOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyBudWxsIDogZS50b1N0cmluZygpOwogICAgICAgIH0KICAgICAgICAodC5GZWVEYXRhID0gY2xhc3MgewogICAgICAgICAgZ2FzUHJpY2U7CiAgICAgICAgICBtYXhGZWVQZXJHYXM7CiAgICAgICAgICBtYXhQcmlvcml0eUZlZVBlckdhczsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBnYXNQcmljZTogaShlKSwgbWF4RmVlUGVyR2FzOiBpKHQpLCBtYXhQcmlvcml0eUZlZVBlckdhczogaShyKSB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRvSlNPTigpIHsKICAgICAgICAgICAgY29uc3QgeyBnYXNQcmljZTogZSwgbWF4RmVlUGVyR2FzOiB0LCBtYXhQcmlvcml0eUZlZVBlckdhczogciB9ID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuIHsgX3R5cGU6ICdGZWVEYXRhJywgZ2FzUHJpY2U6IGEoZSksIG1heEZlZVBlckdhczogYSh0KSwgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IGEocikgfTsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgICh0LmNvcHlSZXF1ZXN0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IHt9OwogICAgICAgICAgICBlLnRvICYmICh0LnRvID0gZS50byksIGUuZnJvbSAmJiAodC5mcm9tID0gZS5mcm9tKSwgZS5kYXRhICYmICh0LmRhdGEgPSAoMCwgbi5oZXhsaWZ5KShlLmRhdGEpKTsKICAgICAgICAgICAgY29uc3QgciA9ICdjaGFpbklkLGdhc0xpbWl0LGdhc1ByaWNlLG1heEZlZVBlckdhcyxtYXhQcmlvcml0eUZlZVBlckdhcyx2YWx1ZScuc3BsaXQoLywvKTsKICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHIpIHMgaW4gZSAmJiBudWxsICE9IGVbc10gJiYgKHRbc10gPSAoMCwgbi5nZXRCaWdJbnQpKGVbc10sIGByZXF1ZXN0LiR7c31gKSk7CiAgICAgICAgICAgIGNvbnN0IG8gPSAndHlwZSxub25jZScuc3BsaXQoLywvKTsKICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIG8pIHIgaW4gZSAmJiBudWxsICE9IGVbcl0gJiYgKHRbcl0gPSAoMCwgbi5nZXROdW1iZXIpKGVbcl0sIGByZXF1ZXN0LiR7cn1gKSk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgZS5hY2Nlc3NMaXN0ICYmICh0LmFjY2Vzc0xpc3QgPSAoMCwgcy5hY2Nlc3NMaXN0aWZ5KShlLmFjY2Vzc0xpc3QpKSwKICAgICAgICAgICAgICAnYmxvY2tUYWcnIGluIGUgJiYgKHQuYmxvY2tUYWcgPSBlLmJsb2NrVGFnKSwKICAgICAgICAgICAgICAnZW5hYmxlQ2NpcFJlYWQnIGluIGUgJiYgKHQuZW5hYmxlQ2NpcFJlYWQgPSAhIWUuZW5hYmxlQ2NpcFJlYWQpLAogICAgICAgICAgICAgICdjdXN0b21EYXRhJyBpbiBlICYmICh0LmN1c3RvbURhdGEgPSBlLmN1c3RvbURhdGEpLAogICAgICAgICAgICAgIHQKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwogICAgICAgIGNsYXNzIGMgewogICAgICAgICAgcHJvdmlkZXI7CiAgICAgICAgICBudW1iZXI7CiAgICAgICAgICBoYXNoOwogICAgICAgICAgdGltZXN0YW1wOwogICAgICAgICAgcGFyZW50SGFzaDsKICAgICAgICAgIG5vbmNlOwogICAgICAgICAgZGlmZmljdWx0eTsKICAgICAgICAgIGdhc0xpbWl0OwogICAgICAgICAgZ2FzVXNlZDsKICAgICAgICAgIG1pbmVyOwogICAgICAgICAgZXh0cmFEYXRhOwogICAgICAgICAgYmFzZUZlZVBlckdhczsKICAgICAgICAgICNGZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgKHRoaXMuI0ZlID0gZS50cmFuc2FjdGlvbnMubWFwKChlKSA9PiAoJ3N0cmluZycgIT0gdHlwZW9mIGUgPyBuZXcgZChlLCB0KSA6IGUpKSksCiAgICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgewogICAgICAgICAgICAgICAgcHJvdmlkZXI6IHQsCiAgICAgICAgICAgICAgICBoYXNoOiBpKGUuaGFzaCksCiAgICAgICAgICAgICAgICBudW1iZXI6IGUubnVtYmVyLAogICAgICAgICAgICAgICAgdGltZXN0YW1wOiBlLnRpbWVzdGFtcCwKICAgICAgICAgICAgICAgIHBhcmVudEhhc2g6IGUucGFyZW50SGFzaCwKICAgICAgICAgICAgICAgIG5vbmNlOiBlLm5vbmNlLAogICAgICAgICAgICAgICAgZGlmZmljdWx0eTogZS5kaWZmaWN1bHR5LAogICAgICAgICAgICAgICAgZ2FzTGltaXQ6IGUuZ2FzTGltaXQsCiAgICAgICAgICAgICAgICBnYXNVc2VkOiBlLmdhc1VzZWQsCiAgICAgICAgICAgICAgICBtaW5lcjogZS5taW5lciwKICAgICAgICAgICAgICAgIGV4dHJhRGF0YTogZS5leHRyYURhdGEsCiAgICAgICAgICAgICAgICBiYXNlRmVlUGVyR2FzOiBpKGUuYmFzZUZlZVBlckdhcykKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCB0cmFuc2FjdGlvbnMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNGZS5tYXAoKGUpID0-ICgnc3RyaW5nJyA9PSB0eXBlb2YgZSA_IGUgOiBlLmhhc2gpKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwcmVmZXRjaGVkVHJhbnNhY3Rpb25zKCkgewogICAgICAgICAgICBjb25zdCBlID0gdGhpcy4jRmUuc2xpY2UoKTsKICAgICAgICAgICAgcmV0dXJuIDAgPT09IGUubGVuZ3RoCiAgICAgICAgICAgICAgPyBbXQogICAgICAgICAgICAgIDogKCgwLCBuLmFzc2VydCkoCiAgICAgICAgICAgICAgICAgICdvYmplY3QnID09IHR5cGVvZiBlWzBdLAogICAgICAgICAgICAgICAgICAndHJhbnNhY3Rpb25zIHdlcmUgbm90IHByZWZldGNoZWQgd2l0aCBibG9jayByZXF1ZXN0JywKICAgICAgICAgICAgICAgICAgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsCiAgICAgICAgICAgICAgICAgIHsgb3BlcmF0aW9uOiAndHJhbnNhY3Rpb25SZXNwb25zZXMoKScgfQogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIGUpOwogICAgICAgICAgfQogICAgICAgICAgdG9KU09OKCkgewogICAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgICAgYmFzZUZlZVBlckdhczogZSwKICAgICAgICAgICAgICBkaWZmaWN1bHR5OiB0LAogICAgICAgICAgICAgIGV4dHJhRGF0YTogciwKICAgICAgICAgICAgICBnYXNMaW1pdDogbiwKICAgICAgICAgICAgICBnYXNVc2VkOiBzLAogICAgICAgICAgICAgIGhhc2g6IG8sCiAgICAgICAgICAgICAgbWluZXI6IGksCiAgICAgICAgICAgICAgbm9uY2U6IGMsCiAgICAgICAgICAgICAgbnVtYmVyOiB1LAogICAgICAgICAgICAgIHBhcmVudEhhc2g6IGwsCiAgICAgICAgICAgICAgdGltZXN0YW1wOiBkLAogICAgICAgICAgICAgIHRyYW5zYWN0aW9uczogZgogICAgICAgICAgICB9ID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBfdHlwZTogJ0Jsb2NrJywKICAgICAgICAgICAgICBiYXNlRmVlUGVyR2FzOiBhKGUpLAogICAgICAgICAgICAgIGRpZmZpY3VsdHk6IGEodCksCiAgICAgICAgICAgICAgZXh0cmFEYXRhOiByLAogICAgICAgICAgICAgIGdhc0xpbWl0OiBhKG4pLAogICAgICAgICAgICAgIGdhc1VzZWQ6IGEocyksCiAgICAgICAgICAgICAgaGFzaDogbywKICAgICAgICAgICAgICBtaW5lcjogaSwKICAgICAgICAgICAgICBub25jZTogYywKICAgICAgICAgICAgICBudW1iZXI6IHUsCiAgICAgICAgICAgICAgcGFyZW50SGFzaDogbCwKICAgICAgICAgICAgICB0aW1lc3RhbXA6IGQsCiAgICAgICAgICAgICAgdHJhbnNhY3Rpb25zOiBmCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgICAgICAgICAgbGV0IGUgPSAwOwogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFuc2FjdGlvbnM7CiAgICAgICAgICAgIHJldHVybiB7IG5leHQ6ICgpID0-IChlIDwgdGhpcy5sZW5ndGggPyB7IHZhbHVlOiB0W2UrK10sIGRvbmU6ICExIH0gOiB7IHZhbHVlOiB2b2lkIDAsIGRvbmU6ICEwIH0pIH07CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgbGVuZ3RoKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jRmUubGVuZ3RoOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGRhdGUoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHRoaXMudGltZXN0YW1wID8gbnVsbCA6IG5ldyBEYXRlKDFlMyAqIHRoaXMudGltZXN0YW1wKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldFRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgbGV0IHQ7CiAgICAgICAgICAgIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgZSkgdCA9IHRoaXMuI0ZlW2VdOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCByID0gZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLiNGZSkgewogICAgICAgICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlICE9PSByKSBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgdCA9IGU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGUuaGFzaCAhPT0gcikgewogICAgICAgICAgICAgICAgICB0ID0gZTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcignbm8gc3VjaCB0eCcpOwogICAgICAgICAgICByZXR1cm4gJ3N0cmluZycgPT0gdHlwZW9mIHQgPyBhd2FpdCB0aGlzLnByb3ZpZGVyLmdldFRyYW5zYWN0aW9uKHQpIDogdDsKICAgICAgICAgIH0KICAgICAgICAgIGdldFByZWZldGNoZWRUcmFuc2FjdGlvbihlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnByZWZldGNoZWRUcmFuc2FjdGlvbnM7CiAgICAgICAgICAgIGlmICgnbnVtYmVyJyA9PSB0eXBlb2YgZSkgcmV0dXJuIHRbZV07CiAgICAgICAgICAgIGUgPSBlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiB0KSBpZiAoci5oYXNoID09PSBlKSByZXR1cm4gcjsKICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCExLCAnbm8gbWF0Y2hpbmcgdHJhbnNhY3Rpb24nLCAnaW5kZXhPckhhc2gnLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlzTWluZWQoKSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuaGFzaDsKICAgICAgICAgIH0KICAgICAgICAgIGlzTG9uZG9uKCkgewogICAgICAgICAgICByZXR1cm4gISF0aGlzLmJhc2VGZWVQZXJHYXM7CiAgICAgICAgICB9CiAgICAgICAgICBvcnBoYW5lZEV2ZW50KCkgewogICAgICAgICAgICBpZiAoIXRoaXMuaXNNaW5lZCgpKSB0aHJvdyBuZXcgRXJyb3IoJycpOwogICAgICAgICAgICByZXR1cm4geyBvcnBoYW46ICdkcm9wLWJsb2NrJywgaGFzaDogdGhpcy5oYXNoLCBudW1iZXI6IHRoaXMubnVtYmVyIH07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuQmxvY2sgPSBjOwogICAgICAgIGNsYXNzIHUgewogICAgICAgICAgcHJvdmlkZXI7CiAgICAgICAgICB0cmFuc2FjdGlvbkhhc2g7CiAgICAgICAgICBibG9ja0hhc2g7CiAgICAgICAgICBibG9ja051bWJlcjsKICAgICAgICAgIHJlbW92ZWQ7CiAgICAgICAgICBhZGRyZXNzOwogICAgICAgICAgZGF0YTsKICAgICAgICAgIHRvcGljczsKICAgICAgICAgIGluZGV4OwogICAgICAgICAgdHJhbnNhY3Rpb25JbmRleDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgdGhpcy5wcm92aWRlciA9IHQ7CiAgICAgICAgICAgIGNvbnN0IHIgPSBPYmplY3QuZnJlZXplKGUudG9waWNzLnNsaWNlKCkpOwogICAgICAgICAgICAoMCwgbi5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7CiAgICAgICAgICAgICAgdHJhbnNhY3Rpb25IYXNoOiBlLnRyYW5zYWN0aW9uSGFzaCwKICAgICAgICAgICAgICBibG9ja0hhc2g6IGUuYmxvY2tIYXNoLAogICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiBlLmJsb2NrTnVtYmVyLAogICAgICAgICAgICAgIHJlbW92ZWQ6IGUucmVtb3ZlZCwKICAgICAgICAgICAgICBhZGRyZXNzOiBlLmFkZHJlc3MsCiAgICAgICAgICAgICAgZGF0YTogZS5kYXRhLAogICAgICAgICAgICAgIHRvcGljczogciwKICAgICAgICAgICAgICBpbmRleDogZS5pbmRleCwKICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBlLnRyYW5zYWN0aW9uSW5kZXgKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgICBhZGRyZXNzOiBlLAogICAgICAgICAgICAgIGJsb2NrSGFzaDogdCwKICAgICAgICAgICAgICBibG9ja051bWJlcjogciwKICAgICAgICAgICAgICBkYXRhOiBuLAogICAgICAgICAgICAgIGluZGV4OiBzLAogICAgICAgICAgICAgIHJlbW92ZWQ6IG8sCiAgICAgICAgICAgICAgdG9waWNzOiBpLAogICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogYSwKICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBjCiAgICAgICAgICAgIH0gPSB0aGlzOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIF90eXBlOiAnbG9nJywKICAgICAgICAgICAgICBhZGRyZXNzOiBlLAogICAgICAgICAgICAgIGJsb2NrSGFzaDogdCwKICAgICAgICAgICAgICBibG9ja051bWJlcjogciwKICAgICAgICAgICAgICBkYXRhOiBuLAogICAgICAgICAgICAgIGluZGV4OiBzLAogICAgICAgICAgICAgIHJlbW92ZWQ6IG8sCiAgICAgICAgICAgICAgdG9waWNzOiBpLAogICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogYSwKICAgICAgICAgICAgICB0cmFuc2FjdGlvbkluZGV4OiBjCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRCbG9jaygpIHsKICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMucHJvdmlkZXIuZ2V0QmxvY2sodGhpcy5ibG9ja0hhc2gpOwogICAgICAgICAgICByZXR1cm4gKDAsIG4uYXNzZXJ0KSghIWUsICdmYWlsZWQgdG8gZmluZCB0cmFuc2FjdGlvbicsICdVTktOT1dOX0VSUk9SJywge30pLCBlOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0VHJhbnNhY3Rpb24oKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLnByb3ZpZGVyLmdldFRyYW5zYWN0aW9uKHRoaXMudHJhbnNhY3Rpb25IYXNoKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBuLmFzc2VydCkoISFlLCAnZmFpbGVkIHRvIGZpbmQgdHJhbnNhY3Rpb24nLCAnVU5LTk9XTl9FUlJPUicsIHt9KSwgZTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldFRyYW5zYWN0aW9uUmVjZWlwdCgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMucHJvdmlkZXIuZ2V0VHJhbnNhY3Rpb25SZWNlaXB0KHRoaXMudHJhbnNhY3Rpb25IYXNoKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBuLmFzc2VydCkoISFlLCAnZmFpbGVkIHRvIGZpbmQgdHJhbnNhY3Rpb24gcmVjZWlwdCcsICdVTktOT1dOX0VSUk9SJywge30pLCBlOwogICAgICAgICAgfQogICAgICAgICAgcmVtb3ZlZEV2ZW50KCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIG9ycGhhbjogJ2Ryb3AtbG9nJywKICAgICAgICAgICAgICBsb2c6IHsKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSGFzaDogKGUgPSB0aGlzKS50cmFuc2FjdGlvbkhhc2gsCiAgICAgICAgICAgICAgICBibG9ja0hhc2g6IGUuYmxvY2tIYXNoLAogICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IGUuYmxvY2tOdW1iZXIsCiAgICAgICAgICAgICAgICBhZGRyZXNzOiBlLmFkZHJlc3MsCiAgICAgICAgICAgICAgICBkYXRhOiBlLmRhdGEsCiAgICAgICAgICAgICAgICB0b3BpY3M6IE9iamVjdC5mcmVlemUoZS50b3BpY3Muc2xpY2UoKSksCiAgICAgICAgICAgICAgICBpbmRleDogZS5pbmRleAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdmFyIGU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuTG9nID0gdTsKICAgICAgICBjbGFzcyBsIHsKICAgICAgICAgIHByb3ZpZGVyOwogICAgICAgICAgdG87CiAgICAgICAgICBmcm9tOwogICAgICAgICAgY29udHJhY3RBZGRyZXNzOwogICAgICAgICAgaGFzaDsKICAgICAgICAgIGluZGV4OwogICAgICAgICAgYmxvY2tIYXNoOwogICAgICAgICAgYmxvY2tOdW1iZXI7CiAgICAgICAgICBsb2dzQmxvb207CiAgICAgICAgICBnYXNVc2VkOwogICAgICAgICAgY3VtdWxhdGl2ZUdhc1VzZWQ7CiAgICAgICAgICBnYXNQcmljZTsKICAgICAgICAgIHR5cGU7CiAgICAgICAgICBzdGF0dXM7CiAgICAgICAgICByb290OwogICAgICAgICAgI01lOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICB0aGlzLiNNZSA9IE9iamVjdC5mcmVlemUoZS5sb2dzLm1hcCgoZSkgPT4gbmV3IHUoZSwgdCkpKTsKICAgICAgICAgICAgbGV0IHIgPSBvOwogICAgICAgICAgICBudWxsICE9IGUuZWZmZWN0aXZlR2FzUHJpY2UgPyAociA9IGUuZWZmZWN0aXZlR2FzUHJpY2UpIDogbnVsbCAhPSBlLmdhc1ByaWNlICYmIChyID0gZS5nYXNQcmljZSksCiAgICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgewogICAgICAgICAgICAgICAgcHJvdmlkZXI6IHQsCiAgICAgICAgICAgICAgICB0bzogZS50bywKICAgICAgICAgICAgICAgIGZyb206IGUuZnJvbSwKICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogZS5jb250cmFjdEFkZHJlc3MsCiAgICAgICAgICAgICAgICBoYXNoOiBlLmhhc2gsCiAgICAgICAgICAgICAgICBpbmRleDogZS5pbmRleCwKICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogZS5ibG9ja0hhc2gsCiAgICAgICAgICAgICAgICBibG9ja051bWJlcjogZS5ibG9ja051bWJlciwKICAgICAgICAgICAgICAgIGxvZ3NCbG9vbTogZS5sb2dzQmxvb20sCiAgICAgICAgICAgICAgICBnYXNVc2VkOiBlLmdhc1VzZWQsCiAgICAgICAgICAgICAgICBjdW11bGF0aXZlR2FzVXNlZDogZS5jdW11bGF0aXZlR2FzVXNlZCwKICAgICAgICAgICAgICAgIGdhc1ByaWNlOiByLAogICAgICAgICAgICAgICAgdHlwZTogZS50eXBlLAogICAgICAgICAgICAgICAgc3RhdHVzOiBlLnN0YXR1cywKICAgICAgICAgICAgICAgIHJvb3Q6IGUucm9vdAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGxvZ3MoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNNZTsKICAgICAgICAgIH0KICAgICAgICAgIHRvSlNPTigpIHsKICAgICAgICAgICAgY29uc3QgewogICAgICAgICAgICAgIHRvOiBlLAogICAgICAgICAgICAgIGZyb206IHQsCiAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiByLAogICAgICAgICAgICAgIGhhc2g6IG4sCiAgICAgICAgICAgICAgaW5kZXg6IHMsCiAgICAgICAgICAgICAgYmxvY2tIYXNoOiBvLAogICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiBpLAogICAgICAgICAgICAgIGxvZ3NCbG9vbTogYywKICAgICAgICAgICAgICBsb2dzOiB1LAogICAgICAgICAgICAgIHN0YXR1czogbCwKICAgICAgICAgICAgICByb290OiBkCiAgICAgICAgICAgIH0gPSB0aGlzOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIF90eXBlOiAnVHJhbnNhY3Rpb25SZWNlaXB0JywKICAgICAgICAgICAgICBibG9ja0hhc2g6IG8sCiAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IGksCiAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzOiByLAogICAgICAgICAgICAgIGN1bXVsYXRpdmVHYXNVc2VkOiBhKHRoaXMuY3VtdWxhdGl2ZUdhc1VzZWQpLAogICAgICAgICAgICAgIGZyb206IHQsCiAgICAgICAgICAgICAgZ2FzUHJpY2U6IGEodGhpcy5nYXNQcmljZSksCiAgICAgICAgICAgICAgZ2FzVXNlZDogYSh0aGlzLmdhc1VzZWQpLAogICAgICAgICAgICAgIGhhc2g6IG4sCiAgICAgICAgICAgICAgaW5kZXg6IHMsCiAgICAgICAgICAgICAgbG9nczogdSwKICAgICAgICAgICAgICBsb2dzQmxvb206IGMsCiAgICAgICAgICAgICAgcm9vdDogZCwKICAgICAgICAgICAgICBzdGF0dXM6IGwsCiAgICAgICAgICAgICAgdG86IGUKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBsZW5ndGgoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvZ3MubGVuZ3RoOwogICAgICAgICAgfQogICAgICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7CiAgICAgICAgICAgIGxldCBlID0gMDsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBuZXh0OiAoKSA9PiAoZSA8IHRoaXMubGVuZ3RoID8geyB2YWx1ZTogdGhpcy5sb2dzW2UrK10sIGRvbmU6ICExIH0gOiB7IHZhbHVlOiB2b2lkIDAsIGRvbmU6ICEwIH0pCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgZmVlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5nYXNVc2VkICogdGhpcy5nYXNQcmljZTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldEJsb2NrKCkgewogICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5wcm92aWRlci5nZXRCbG9jayh0aGlzLmJsb2NrSGFzaCk7CiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHRocm93IG5ldyBFcnJvcignVE9ETycpOwogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldFRyYW5zYWN0aW9uKCkgewogICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgdGhpcy5wcm92aWRlci5nZXRUcmFuc2FjdGlvbih0aGlzLmhhc2gpOwogICAgICAgICAgICBpZiAobnVsbCA9PSBlKSB0aHJvdyBuZXcgRXJyb3IoJ1RPRE8nKTsKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBnZXRSZXN1bHQoKSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3ZpZGVyLmdldFRyYW5zYWN0aW9uUmVzdWx0KHRoaXMuaGFzaCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBjb25maXJtYXRpb25zKCkgewogICAgICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMucHJvdmlkZXIuZ2V0QmxvY2tOdW1iZXIoKSkgLSB0aGlzLmJsb2NrTnVtYmVyICsgMTsKICAgICAgICAgIH0KICAgICAgICAgIHJlbW92ZWRFdmVudCgpIHsKICAgICAgICAgICAgcmV0dXJuIGgodGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgICByZW9yZGVyZWRFdmVudChlKSB7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0KSgKICAgICAgICAgICAgICAgICFlIHx8IGUuaXNNaW5lZCgpLAogICAgICAgICAgICAgICAgInVubWluZWQgJ290aGVyJyB0cmFuc2N0aW9uIGNhbm5vdCBiZSBvcnBoYW5lZCIsCiAgICAgICAgICAgICAgICAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywKICAgICAgICAgICAgICAgIHsgb3BlcmF0aW9uOiAncmVvcmRlcmVkRXZlbnQob3RoZXIpJyB9CiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBmKHRoaXMsIGUpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuVHJhbnNhY3Rpb25SZWNlaXB0ID0gbDsKICAgICAgICBjbGFzcyBkIHsKICAgICAgICAgIHByb3ZpZGVyOwogICAgICAgICAgYmxvY2tOdW1iZXI7CiAgICAgICAgICBibG9ja0hhc2g7CiAgICAgICAgICBpbmRleDsKICAgICAgICAgIGhhc2g7CiAgICAgICAgICB0eXBlOwogICAgICAgICAgdG87CiAgICAgICAgICBmcm9tOwogICAgICAgICAgbm9uY2U7CiAgICAgICAgICBnYXNMaW1pdDsKICAgICAgICAgIGdhc1ByaWNlOwogICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM7CiAgICAgICAgICBtYXhGZWVQZXJHYXM7CiAgICAgICAgICBkYXRhOwogICAgICAgICAgdmFsdWU7CiAgICAgICAgICBjaGFpbklkOwogICAgICAgICAgc2lnbmF0dXJlOwogICAgICAgICAgYWNjZXNzTGlzdDsKICAgICAgICAgICNKZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgKHRoaXMucHJvdmlkZXIgPSB0KSwKICAgICAgICAgICAgICAodGhpcy5ibG9ja051bWJlciA9IG51bGwgIT0gZS5ibG9ja051bWJlciA_IGUuYmxvY2tOdW1iZXIgOiBudWxsKSwKICAgICAgICAgICAgICAodGhpcy5ibG9ja0hhc2ggPSBudWxsICE9IGUuYmxvY2tIYXNoID8gZS5ibG9ja0hhc2ggOiBudWxsKSwKICAgICAgICAgICAgICAodGhpcy5oYXNoID0gZS5oYXNoKSwKICAgICAgICAgICAgICAodGhpcy5pbmRleCA9IGUuaW5kZXgpLAogICAgICAgICAgICAgICh0aGlzLnR5cGUgPSBlLnR5cGUpLAogICAgICAgICAgICAgICh0aGlzLmZyb20gPSBlLmZyb20pLAogICAgICAgICAgICAgICh0aGlzLnRvID0gZS50byB8fCBudWxsKSwKICAgICAgICAgICAgICAodGhpcy5nYXNMaW1pdCA9IGUuZ2FzTGltaXQpLAogICAgICAgICAgICAgICh0aGlzLm5vbmNlID0gZS5ub25jZSksCiAgICAgICAgICAgICAgKHRoaXMuZGF0YSA9IGUuZGF0YSksCiAgICAgICAgICAgICAgKHRoaXMudmFsdWUgPSBlLnZhbHVlKSwKICAgICAgICAgICAgICAodGhpcy5nYXNQcmljZSA9IGUuZ2FzUHJpY2UpLAogICAgICAgICAgICAgICh0aGlzLm1heFByaW9yaXR5RmVlUGVyR2FzID0gbnVsbCAhPSBlLm1heFByaW9yaXR5RmVlUGVyR2FzID8gZS5tYXhQcmlvcml0eUZlZVBlckdhcyA6IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLm1heEZlZVBlckdhcyA9IG51bGwgIT0gZS5tYXhGZWVQZXJHYXMgPyBlLm1heEZlZVBlckdhcyA6IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLmNoYWluSWQgPSBlLmNoYWluSWQpLAogICAgICAgICAgICAgICh0aGlzLnNpZ25hdHVyZSA9IGUuc2lnbmF0dXJlKSwKICAgICAgICAgICAgICAodGhpcy5hY2Nlc3NMaXN0ID0gbnVsbCAhPSBlLmFjY2Vzc0xpc3QgPyBlLmFjY2Vzc0xpc3QgOiBudWxsKSwKICAgICAgICAgICAgICAodGhpcy4jSmUgPSAtMSk7CiAgICAgICAgICB9CiAgICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIGNvbnN0IHsKICAgICAgICAgICAgICBibG9ja051bWJlcjogZSwKICAgICAgICAgICAgICBibG9ja0hhc2g6IHQsCiAgICAgICAgICAgICAgaW5kZXg6IHIsCiAgICAgICAgICAgICAgaGFzaDogbiwKICAgICAgICAgICAgICB0eXBlOiBzLAogICAgICAgICAgICAgIHRvOiBvLAogICAgICAgICAgICAgIGZyb206IGksCiAgICAgICAgICAgICAgbm9uY2U6IGMsCiAgICAgICAgICAgICAgZGF0YTogdSwKICAgICAgICAgICAgICBzaWduYXR1cmU6IGwsCiAgICAgICAgICAgICAgYWNjZXNzTGlzdDogZAogICAgICAgICAgICB9ID0gdGhpczsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBfdHlwZTogJ1RyYW5zYWN0aW9uUmVjZWlwdCcsCiAgICAgICAgICAgICAgYWNjZXNzTGlzdDogZCwKICAgICAgICAgICAgICBibG9ja051bWJlcjogZSwKICAgICAgICAgICAgICBibG9ja0hhc2g6IHQsCiAgICAgICAgICAgICAgY2hhaW5JZDogYSh0aGlzLmNoYWluSWQpLAogICAgICAgICAgICAgIGRhdGE6IHUsCiAgICAgICAgICAgICAgZnJvbTogaSwKICAgICAgICAgICAgICBnYXNMaW1pdDogYSh0aGlzLmdhc0xpbWl0KSwKICAgICAgICAgICAgICBnYXNQcmljZTogYSh0aGlzLmdhc1ByaWNlKSwKICAgICAgICAgICAgICBoYXNoOiBuLAogICAgICAgICAgICAgIG1heEZlZVBlckdhczogYSh0aGlzLm1heEZlZVBlckdhcyksCiAgICAgICAgICAgICAgbWF4UHJpb3JpdHlGZWVQZXJHYXM6IGEodGhpcy5tYXhQcmlvcml0eUZlZVBlckdhcyksCiAgICAgICAgICAgICAgbm9uY2U6IGMsCiAgICAgICAgICAgICAgc2lnbmF0dXJlOiBsLAogICAgICAgICAgICAgIHRvOiBvLAogICAgICAgICAgICAgIGluZGV4OiByLAogICAgICAgICAgICAgIHR5cGU6IHMsCiAgICAgICAgICAgICAgdmFsdWU6IGEodGhpcy52YWx1ZSkKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldEJsb2NrKCkgewogICAgICAgICAgICBsZXQgZSA9IHRoaXMuYmxvY2tOdW1iZXI7CiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgICAgICAgIHQgJiYgKGUgPSB0LmJsb2NrTnVtYmVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMucHJvdmlkZXIuZ2V0QmxvY2soZSk7CiAgICAgICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcignVE9ETycpOwogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldFRyYW5zYWN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlci5nZXRUcmFuc2FjdGlvbih0aGlzLmhhc2gpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgY29uZmlybWF0aW9ucygpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5ibG9ja051bWJlcikgewogICAgICAgICAgICAgIGNvbnN0IHsgdHg6IGUsIGJsb2NrTnVtYmVyOiB0IH0gPSBhd2FpdCAoMCwgbi5yZXNvbHZlUHJvcGVydGllcykoewogICAgICAgICAgICAgICAgdHg6IHRoaXMuZ2V0VHJhbnNhY3Rpb24oKSwKICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiB0aGlzLnByb3ZpZGVyLmdldEJsb2NrTnVtYmVyKCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBlIHx8IG51bGwgPT0gZS5ibG9ja051bWJlciA_IDAgOiB0IC0gZS5ibG9ja051bWJlciArIDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLnByb3ZpZGVyLmdldEJsb2NrTnVtYmVyKCkpIC0gdGhpcy5ibG9ja051bWJlciArIDE7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyB3YWl0KGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IG51bGwgPT0gZSA_IDEgOiBlLAogICAgICAgICAgICAgIHMgPSBudWxsID09IHQgPyAwIDogdDsKICAgICAgICAgICAgbGV0IGkgPSB0aGlzLiNKZSwKICAgICAgICAgICAgICBhID0gLTEsCiAgICAgICAgICAgICAgYyA9IC0xID09PSBpOwogICAgICAgICAgICBjb25zdCB1ID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGMpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgY29uc3QgeyBibG9ja051bWJlcjogZSwgbm9uY2U6IHQgfSA9IGF3YWl0ICgwLCBuLnJlc29sdmVQcm9wZXJ0aWVzKSh7CiAgICAgICAgICAgICAgICAgIGJsb2NrTnVtYmVyOiB0aGlzLnByb3ZpZGVyLmdldEJsb2NrTnVtYmVyKCksCiAgICAgICAgICAgICAgICAgIG5vbmNlOiB0aGlzLnByb3ZpZGVyLmdldFRyYW5zYWN0aW9uQ291bnQodGhpcy5mcm9tKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAodCA8IHRoaXMubm9uY2UpIHJldHVybiB2b2lkIChpID0gZSk7CiAgICAgICAgICAgICAgICBpZiAoYykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgdGhpcy5nZXRUcmFuc2FjdGlvbigpOwogICAgICAgICAgICAgICAgaWYgKCFzIHx8IG51bGwgPT0gcy5ibG9ja051bWJlcikKICAgICAgICAgICAgICAgICAgZm9yICgtMSA9PT0gYSAmJiAoKGEgPSBpIC0gMyksIGEgPCB0aGlzLiNKZSAmJiAoYSA9IHRoaXMuI0plKSk7IGEgPD0gZTsgKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnByb3ZpZGVyLmdldEJsb2NrKGEsICEwKTsKICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGlmIChlID09PSB0aGlzLmhhc2gpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IHQubGVuZ3RoOyBzKyspIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBhd2FpdCB0LmdldFRyYW5zYWN0aW9uKHMpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGEuZnJvbSA9PT0gdGhpcy5mcm9tICYmIGEubm9uY2UgPT09IHRoaXMubm9uY2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5wcm92aWRlci5nZXRUcmFuc2FjdGlvblJlY2VpcHQoYS5oYXNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAtIHQuYmxvY2tOdW1iZXIgKyAxIDwgcikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9ICdyZXBsYWNlZCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGEuZGF0YSA9PT0gdGhpcy5kYXRhICYmIGEudG8gPT09IHRoaXMudG8gJiYgYS52YWx1ZSA9PT0gdGhpcy52YWx1ZQogICAgICAgICAgICAgICAgICAgICAgICAgID8gKHMgPSAncmVwcmljZWQnKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogJzB4JyA9PT0gYS5kYXRhICYmIGEuZnJvbSA9PT0gYS50byAmJiBhLnZhbHVlID09PSBvICYmIChzID0gJ2NhbmNlbGxlZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICgwLCBuLmFzc2VydCkoITEsICd0cmFuc2FjdGlvbiB3YXMgcmVwbGFjZWQnLCAnVFJBTlNBQ1RJT05fUkVQTEFDRUQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxsZWQ6ICdyZXBsYWNlZCcgPT09IHMgfHwgJ2NhbmNlbGxlZCcgPT09IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFzb246IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogYS5yZXBsYWNlYWJsZVRyYW5zYWN0aW9uKGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaDogYS5oYXNoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjZWlwdDogdAogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBhKys7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGwgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZSB8fCAwICE9PSBlLnN0YXR1cykgcmV0dXJuIGU7CiAgICAgICAgICAgICAgICAoMCwgbi5hc3NlcnQpKCExLCAndHJhbnNhY3Rpb24gZXhlY3V0aW9uIHJldmVydGVkJywgJ0NBTExfRVhDRVBUSU9OJywgewogICAgICAgICAgICAgICAgICBhY3Rpb246ICdzZW5kVHJhbnNhY3Rpb24nLAogICAgICAgICAgICAgICAgICBkYXRhOiBudWxsLAogICAgICAgICAgICAgICAgICByZWFzb246IG51bGwsCiAgICAgICAgICAgICAgICAgIGludm9jYXRpb246IG51bGwsCiAgICAgICAgICAgICAgICAgIHJldmVydDogbnVsbCwKICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHsgdG86IGUudG8sIGZyb206IGUuZnJvbSwgZGF0YTogJycgfSwKICAgICAgICAgICAgICAgICAgcmVjZWlwdDogZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkID0gYXdhaXQgdGhpcy5wcm92aWRlci5nZXRUcmFuc2FjdGlvblJlY2VpcHQodGhpcy5oYXNoKTsKICAgICAgICAgICAgaWYgKDAgPT09IHIpIHJldHVybiBsKGQpOwogICAgICAgICAgICBpZiAoZCkgewogICAgICAgICAgICAgIGlmICgoYXdhaXQgZC5jb25maXJtYXRpb25zKCkpID49IHIpIHJldHVybiBsKGQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKChhd2FpdCB1KCksIDAgPT09IHIpKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3QgZiA9IG5ldyBQcm9taXNlKChlLCB0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgbyA9IFtdLAogICAgICAgICAgICAgICAgYSA9ICgpID0-IHsKICAgICAgICAgICAgICAgICAgby5mb3JFYWNoKChlKSA9PiBlKCkpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAoby5wdXNoKCgpID0-IHsKICAgICAgICAgICAgICAgICAgYyA9ICEwOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzID4gMCkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzZXRUaW1lb3V0KCgpID0-IHsKICAgICAgICAgICAgICAgICAgYSgpLCB0KCgwLCBuLm1ha2VFcnJvcikoJ3dhaXQgZm9yIHRyYW5zYWN0aW9uIHRpbWVvdXQnLCAnVElNRU9VVCcpKTsKICAgICAgICAgICAgICAgIH0sIHMpOwogICAgICAgICAgICAgICAgby5wdXNoKCgpID0-IHsKICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGUpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnN0IGQgPSBhc3luYyAobikgPT4gewogICAgICAgICAgICAgICAgaWYgKChhd2FpdCBuLmNvbmZpcm1hdGlvbnMoKSkgPj0gcikgewogICAgICAgICAgICAgICAgICBhKCk7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgZShsKG4pKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHQoZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIChvLnB1c2goKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLnByb3ZpZGVyLm9mZih0aGlzLmhhc2gsIGQpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICB0aGlzLnByb3ZpZGVyLm9uKHRoaXMuaGFzaCwgZCksCiAgICAgICAgICAgICAgICBpID49IDApCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBjb25zdCBlID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHUoKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIGlmICgoMCwgbi5pc0Vycm9yKShlLCAnVFJBTlNBQ1RJT05fUkVQTEFDRUQnKSkgcmV0dXJuIGEoKSwgdm9pZCB0KGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGMgfHwgdGhpcy5wcm92aWRlci5vbmNlKCdibG9jaycsIGUpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIG8ucHVzaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMucHJvdmlkZXIub2ZmKCdibG9jaycsIGUpOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIHRoaXMucHJvdmlkZXIub25jZSgnYmxvY2snLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gYXdhaXQgZjsKICAgICAgICAgIH0KICAgICAgICAgIGlzTWluZWQoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuYmxvY2tIYXNoOwogICAgICAgICAgfQogICAgICAgICAgaXNMZWdhY3koKSB7CiAgICAgICAgICAgIHJldHVybiAwID09PSB0aGlzLnR5cGU7CiAgICAgICAgICB9CiAgICAgICAgICBpc0JlcmxpbigpIHsKICAgICAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMudHlwZTsKICAgICAgICAgIH0KICAgICAgICAgIGlzTG9uZG9uKCkgewogICAgICAgICAgICByZXR1cm4gMiA9PT0gdGhpcy50eXBlOwogICAgICAgICAgfQogICAgICAgICAgcmVtb3ZlZEV2ZW50KCkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBuLmFzc2VydCkodGhpcy5pc01pbmVkKCksICd1bm1pbmVkIHRyYW5zYWN0aW9uIGNhbm90IGJlIG9ycGhhbmVkJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3JlbW92ZUV2ZW50KCknCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgaCh0aGlzKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgcmVvcmRlcmVkRXZlbnQoZSkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBuLmFzc2VydCkodGhpcy5pc01pbmVkKCksICd1bm1pbmVkIHRyYW5zYWN0aW9uIGNhbm90IGJlIG9ycGhhbmVkJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3JlbW92ZUV2ZW50KCknCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0KSgKICAgICAgICAgICAgICAgICFlIHx8IGUuaXNNaW5lZCgpLAogICAgICAgICAgICAgICAgInVubWluZWQgJ290aGVyJyB0cmFuc2FjdGlvbiBjYW5vdCBiZSBvcnBoYW5lZCIsCiAgICAgICAgICAgICAgICAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywKICAgICAgICAgICAgICAgIHsgb3BlcmF0aW9uOiAncmVtb3ZlRXZlbnQoKScgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgZih0aGlzLCBlKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgcmVwbGFjZWFibGVUcmFuc2FjdGlvbihlKSB7CiAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KShOdW1iZXIuaXNJbnRlZ2VyKGUpICYmIGUgPj0gMCwgJ2ludmFsaWQgc3RhcnRCbG9jaycsICdzdGFydEJsb2NrJywgZSk7CiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgZCh0aGlzLCB0aGlzLnByb3ZpZGVyKTsKICAgICAgICAgICAgcmV0dXJuICh0LiNKZSA9IGUpLCB0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmKGUsIHQpIHsKICAgICAgICAgIHJldHVybiB7IG9ycGhhbjogJ3Jlb3JkZXItdHJhbnNhY3Rpb24nLCB0eDogZSwgb3RoZXI6IHQgfTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaChlKSB7CiAgICAgICAgICByZXR1cm4geyBvcnBoYW46ICdkcm9wLXRyYW5zYWN0aW9uJywgdHg6IGUgfTsKICAgICAgICB9CiAgICAgICAgdC5UcmFuc2FjdGlvblJlc3BvbnNlID0gZDsKICAgICAgfSwKICAgICAgNDg4NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuTm9uY2VNYW5hZ2VyID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KSwKICAgICAgICAgIHMgPSByKDk1Mik7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIHMuQWJzdHJhY3RTaWduZXIgewogICAgICAgICAgc2lnbmVyOwogICAgICAgICAgI1VlOwogICAgICAgICAgI0RlOwogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICBzdXBlcihlLnByb3ZpZGVyKSwgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBzaWduZXI6IGUgfSksICh0aGlzLiNVZSA9IG51bGwpLCAodGhpcy4jRGUgPSAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIGdldEFkZHJlc3MoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpZ25lci5nZXRBZGRyZXNzKCk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25uZWN0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBvKHRoaXMuc2lnbmVyLmNvbm5lY3QoZSkpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0Tm9uY2UoZSkgewogICAgICAgICAgICBpZiAoJ3BlbmRpbmcnID09PSBlKSB7CiAgICAgICAgICAgICAgbnVsbCA9PSB0aGlzLiNVZSAmJiAodGhpcy4jVWUgPSBzdXBlci5nZXROb25jZSgncGVuZGluZycpKTsKICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy4jRGU7CiAgICAgICAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLiNVZSkgKyBlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzdXBlci5nZXROb25jZShlKTsKICAgICAgICAgIH0KICAgICAgICAgIGluY3JlbWVudCgpIHsKICAgICAgICAgICAgdGhpcy4jRGUrKzsKICAgICAgICAgIH0KICAgICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICAodGhpcy4jRGUgPSAwKSwgKHRoaXMuI1VlID0gbnVsbCk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyBzZW5kVHJhbnNhY3Rpb24oZSkgewogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXROb25jZSgncGVuZGluZycpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIHRoaXMuaW5jcmVtZW50KCksCiAgICAgICAgICAgICAgKChlID0gYXdhaXQgdGhpcy5zaWduZXIucG9wdWxhdGVUcmFuc2FjdGlvbihlKSkubm9uY2UgPSBhd2FpdCB0KSwKICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNpZ25lci5zZW5kVHJhbnNhY3Rpb24oZSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHNpZ25UcmFuc2FjdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpZ25lci5zaWduVHJhbnNhY3Rpb24oZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzaWduTWVzc2FnZShlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpZ25lci5zaWduTWVzc2FnZShlKTsKICAgICAgICAgIH0KICAgICAgICAgIHNpZ25UeXBlZERhdGEoZSwgdCwgcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zaWduZXIuc2lnblR5cGVkRGF0YShlLCB0LCByKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5Ob25jZU1hbmFnZXIgPSBvOwogICAgICB9LAogICAgICA1MzgwOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuRmlsdGVySWRQZW5kaW5nU3Vic2NyaWJlciA9IHQuRmlsdGVySWRFdmVudFN1YnNjcmliZXIgPSB0LkZpbHRlcklkU3Vic2NyaWJlciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTMxNiksCiAgICAgICAgICBzID0gcig4MTM2KTsKICAgICAgICBjbGFzcyBvIHsKICAgICAgICAgICNPZTsKICAgICAgICAgICN4ZTsKICAgICAgICAgICNfZTsKICAgICAgICAgICNHZTsKICAgICAgICAgICNFZTsKICAgICAgICAgICNqZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgKHRoaXMuI09lID0gZSksCiAgICAgICAgICAgICAgKHRoaXMuI3hlID0gbnVsbCksCiAgICAgICAgICAgICAgKHRoaXMuI19lID0gdGhpcy4jSGUuYmluZCh0aGlzKSksCiAgICAgICAgICAgICAgKHRoaXMuI0dlID0gITEpLAogICAgICAgICAgICAgICh0aGlzLiNFZSA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLiNqZSA9ICExKTsKICAgICAgICAgIH0KICAgICAgICAgIF9zdWJzY3JpYmUoZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N1YmNsYXNzZXMgbXVzdCBvdmVycmlkZSB0aGlzJyk7CiAgICAgICAgICB9CiAgICAgICAgICBfZW1pdFJlc3VsdHMoZSwgdCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N1YmNsYXNzZXMgbXVzdCBvdmVycmlkZSB0aGlzJyk7CiAgICAgICAgICB9CiAgICAgICAgICBfcmVjb3ZlcihlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc3ViY2xhc3NlcyBtdXN0IG92ZXJyaWRlIHRoaXMnKTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jICNIZShlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgbnVsbCA9PSB0aGlzLiN4ZSAmJiAodGhpcy4jeGUgPSB0aGlzLl9zdWJzY3JpYmUodGhpcy4jT2UpKTsKICAgICAgICAgICAgICBsZXQgZSA9IG51bGw7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGUgPSBhd2FpdCB0aGlzLiN4ZTsKICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBpZiAoISgwLCBuLmlzRXJyb3IpKGUsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nKSB8fCAnZXRoX25ld0ZpbHRlcicgIT09IGUub3BlcmF0aW9uKSB0aHJvdyBlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlKSByZXR1cm4gKHRoaXMuI3hlID0gbnVsbCksIHZvaWQgdGhpcy4jT2UuX3JlY292ZXJTdWJzY3JpYmVyKHRoaXMsIHRoaXMuX3JlY292ZXIodGhpcy4jT2UpKTsKICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy4jT2UuZ2V0TmV0d29yaygpOwogICAgICAgICAgICAgIGlmICgodGhpcy4jRWUgfHwgKHRoaXMuI0VlID0gdCksIHRoaXMuI0VlLmNoYWluSWQgIT09IHQuY2hhaW5JZCkpIHRocm93IG5ldyBFcnJvcignY2hhaWQgY2hhbmdlZCcpOwogICAgICAgICAgICAgIGlmICh0aGlzLiNqZSkgcmV0dXJuOwogICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLiNPZS5zZW5kKCdldGhfZ2V0RmlsdGVyQ2hhbmdlcycsIFtlXSk7CiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fZW1pdFJlc3VsdHModGhpcy4jT2UsIHIpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0BUT0RPJywgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4jT2Uub25jZSgnYmxvY2snLCB0aGlzLiNfZSk7CiAgICAgICAgICB9CiAgICAgICAgICAjWGUoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLiN4ZTsKICAgICAgICAgICAgZSAmJgogICAgICAgICAgICAgICgodGhpcy4jeGUgPSBudWxsKSwKICAgICAgICAgICAgICBlLnRoZW4oKGUpID0-IHsKICAgICAgICAgICAgICAgIHRoaXMuI09lLnNlbmQoJ2V0aF91bmluc3RhbGxGaWx0ZXInLCBbZV0pOwogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXJ0KCkgewogICAgICAgICAgICB0aGlzLiNHZSB8fCAoKHRoaXMuI0dlID0gITApLCB0aGlzLiNIZSgtMikpOwogICAgICAgICAgfQogICAgICAgICAgc3RvcCgpIHsKICAgICAgICAgICAgdGhpcy4jR2UgJiYgKCh0aGlzLiNHZSA9ICExKSwgKHRoaXMuI2plID0gITApLCB0aGlzLiNYZSgpLCB0aGlzLiNPZS5vZmYoJ2Jsb2NrJywgdGhpcy4jX2UpKTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdXNlKGUpIHsKICAgICAgICAgICAgZSAmJiB0aGlzLiNYZSgpLCB0aGlzLiNPZS5vZmYoJ2Jsb2NrJywgdGhpcy4jX2UpOwogICAgICAgICAgfQogICAgICAgICAgcmVzdW1lKCkgewogICAgICAgICAgICB0aGlzLnN0YXJ0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICh0LkZpbHRlcklkU3Vic2NyaWJlciA9IG8pLAogICAgICAgICAgKHQuRmlsdGVySWRFdmVudFN1YnNjcmliZXIgPSBjbGFzcyBleHRlbmRzIG8gewogICAgICAgICAgICAjVmU7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgICBzdXBlcihlKSwgKHRoaXMuI1ZlID0gKChyID0gdCksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocikpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX3JlY292ZXIoZSkgewogICAgICAgICAgICAgIHJldHVybiBuZXcgcy5Qb2xsaW5nRXZlbnRTdWJzY3JpYmVyKGUsIHRoaXMuI1ZlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhc3luYyBfc3Vic2NyaWJlKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZS5zZW5kKCdldGhfbmV3RmlsdGVyJywgW3RoaXMuI1ZlXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXN5bmMgX2VtaXRSZXN1bHRzKGUsIHQpIHsKICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgdCkgZS5lbWl0KHRoaXMuI1ZlLCBlLl93cmFwTG9nKHIsIGUuX25ldHdvcmspKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICAodC5GaWx0ZXJJZFBlbmRpbmdTdWJzY3JpYmVyID0gY2xhc3MgZXh0ZW5kcyBvIHsKICAgICAgICAgICAgYXN5bmMgX3N1YnNjcmliZShlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGUuc2VuZCgnZXRoX25ld1BlbmRpbmdUcmFuc2FjdGlvbkZpbHRlcicsIFtdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhc3luYyBfZW1pdFJlc3VsdHMoZSwgdCkgewogICAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiB0KSBlLmVtaXQoJ3BlbmRpbmcnLCByKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDgxMzY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5Qb2xsaW5nRXZlbnRTdWJzY3JpYmVyID0KICAgICAgICAgICAgdC5Qb2xsaW5nVHJhbnNhY3Rpb25TdWJzY3JpYmVyID0KICAgICAgICAgICAgdC5Qb2xsaW5nT3JwaGFuU3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuUG9sbGluZ0Jsb2NrVGFnU3Vic2NyaWJlciA9CiAgICAgICAgICAgIHQuT25CbG9ja1N1YnNjcmliZXIgPQogICAgICAgICAgICB0LlBvbGxpbmdCbG9ja1N1YnNjcmliZXIgPQogICAgICAgICAgICB0LmdldFBvbGxpbmdTdWJzY3JpYmVyID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpOwogICAgICAgIGZ1bmN0aW9uIHMoZSkgewogICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpOwogICAgICAgIH0KICAgICAgICB0LmdldFBvbGxpbmdTdWJzY3JpYmVyID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHJldHVybiAnYmxvY2snID09PSB0CiAgICAgICAgICAgID8gbmV3IG8oZSkKICAgICAgICAgICAgOiAoMCwgbi5pc0hleFN0cmluZykodCwgMzIpCiAgICAgICAgICAgICAgPyBuZXcgYShlLCB0KQogICAgICAgICAgICAgIDogdm9pZCAoMCwgbi5hc3NlcnQpKCExLCAndW5zdXBwb3J0ZWQgcG9sbGluZyBldmVudCcsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2dldFBvbGxpbmdTdWJzY3JpYmVyJywKICAgICAgICAgICAgICAgICAgaW5mbzogeyBldmVudDogdCB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIGNsYXNzIG8gewogICAgICAgICAgI09lOwogICAgICAgICAgI19lOwogICAgICAgICAgI1FlOwogICAgICAgICAgI1plOwogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAodGhpcy4jT2UgPSBlKSwgKHRoaXMuI19lID0gbnVsbCksICh0aGlzLiNRZSA9IDRlMyksICh0aGlzLiNaZSA9IC0yKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwb2xsaW5nSW50ZXJ2YWwoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNRZTsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBwb2xsaW5nSW50ZXJ2YWwoZSkgewogICAgICAgICAgICB0aGlzLiNRZSA9IGU7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyAjSGUoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuI09lLmdldEJsb2NrTnVtYmVyKCk7CiAgICAgICAgICAgICAgaWYgKC0yID09PSB0aGlzLiNaZSkgcmV0dXJuIHZvaWQgKHRoaXMuI1plID0gZSk7CiAgICAgICAgICAgICAgaWYgKGUgIT09IHRoaXMuI1plKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCB0ID0gdGhpcy4jWmUgKyAxOyB0IDw9IGU7IHQrKykgewogICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLiNfZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNPZS5lbWl0KCdibG9jaycsIHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4jWmUgPSBlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgbnVsbCAhPSB0aGlzLiNfZSAmJiAodGhpcy4jX2UgPSB0aGlzLiNPZS5fc2V0VGltZW91dCh0aGlzLiNIZS5iaW5kKHRoaXMpLCB0aGlzLiNRZSkpOwogICAgICAgICAgfQogICAgICAgICAgc3RhcnQoKSB7CiAgICAgICAgICAgIHRoaXMuI19lIHx8ICgodGhpcy4jX2UgPSB0aGlzLiNPZS5fc2V0VGltZW91dCh0aGlzLiNIZS5iaW5kKHRoaXMpLCB0aGlzLiNRZSkpLCB0aGlzLiNIZSgpKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0b3AoKSB7CiAgICAgICAgICAgIHRoaXMuI19lICYmICh0aGlzLiNPZS5fY2xlYXJUaW1lb3V0KHRoaXMuI19lKSwgKHRoaXMuI19lID0gbnVsbCkpOwogICAgICAgICAgfQogICAgICAgICAgcGF1c2UoZSkgewogICAgICAgICAgICB0aGlzLnN0b3AoKSwgZSAmJiAodGhpcy4jWmUgPSAtMik7CiAgICAgICAgICB9CiAgICAgICAgICByZXN1bWUoKSB7CiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5Qb2xsaW5nQmxvY2tTdWJzY3JpYmVyID0gbzsKICAgICAgICBjbGFzcyBpIHsKICAgICAgICAgICNPZTsKICAgICAgICAgICNIZTsKICAgICAgICAgICNHZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgKHRoaXMuI09lID0gZSksCiAgICAgICAgICAgICAgKHRoaXMuI0dlID0gITEpLAogICAgICAgICAgICAgICh0aGlzLiNIZSA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLl9wb2xsKGUsIHRoaXMuI09lKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIF9wb2xsKGUsIHQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdWItY2xhc3NlcyBtdXN0IG92ZXJyaWRlIHRoaXMnKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXJ0KCkgewogICAgICAgICAgICB0aGlzLiNHZSB8fCAoKHRoaXMuI0dlID0gITApLCB0aGlzLiNIZSgtMiksIHRoaXMuI09lLm9uKCdibG9jaycsIHRoaXMuI0hlKSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdG9wKCkgewogICAgICAgICAgICB0aGlzLiNHZSAmJiAoKHRoaXMuI0dlID0gITEpLCB0aGlzLiNPZS5vZmYoJ2Jsb2NrJywgdGhpcy4jSGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIHBhdXNlKGUpIHsKICAgICAgICAgICAgdGhpcy5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXN1bWUoKSB7CiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuT25CbG9ja1N1YnNjcmliZXIgPSBpKSwKICAgICAgICAgICh0LlBvbGxpbmdCbG9ja1RhZ1N1YnNjcmliZXIgPSBjbGFzcyBleHRlbmRzIGkgewogICAgICAgICAgICAjemU7CiAgICAgICAgICAgICNLZTsKICAgICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICAgIHN1cGVyKGUpLCAodGhpcy4jemUgPSB0KSwgKHRoaXMuI0tlID0gLTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHBhdXNlKGUpIHsKICAgICAgICAgICAgICBlICYmICh0aGlzLiNLZSA9IC0yKSwgc3VwZXIucGF1c2UoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYXN5bmMgX3BvbGwoZSwgdCkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCB0LmdldEJsb2NrKHRoaXMuI3plKTsKICAgICAgICAgICAgICBudWxsICE9IHIgJiYKICAgICAgICAgICAgICAgICgtMiA9PT0gdGhpcy4jS2UKICAgICAgICAgICAgICAgICAgPyAodGhpcy4jS2UgPSByLm51bWJlcikKICAgICAgICAgICAgICAgICAgOiByLm51bWJlciA-IHRoaXMuI0tlICYmICh0LmVtaXQodGhpcy4jemUsIHIubnVtYmVyKSwgKHRoaXMuI0tlID0gci5udW1iZXIpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgKHQuUG9sbGluZ09ycGhhblN1YnNjcmliZXIgPSBjbGFzcyBleHRlbmRzIGkgewogICAgICAgICAgICAjRTsKICAgICAgICAgICAgY29uc3RydWN0b3IoZSwgdCkgewogICAgICAgICAgICAgIHN1cGVyKGUpLCAodGhpcy4jRSA9IHModCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFzeW5jIF9wb2xsKGUsIHQpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0BUT0RPJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIGNsYXNzIGEgZXh0ZW5kcyBpIHsKICAgICAgICAgICMkZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgc3VwZXIoZSksICh0aGlzLiMkZSA9IHQpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgX3BvbGwoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gYXdhaXQgdC5nZXRUcmFuc2FjdGlvblJlY2VpcHQodGhpcy4jJGUpOwogICAgICAgICAgICByICYmIHQuZW1pdCh0aGlzLiMkZSwgcik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICh0LlBvbGxpbmdUcmFuc2FjdGlvblN1YnNjcmliZXIgPSBhKSwKICAgICAgICAgICh0LlBvbGxpbmdFdmVudFN1YnNjcmliZXIgPSBjbGFzcyB7CiAgICAgICAgICAgICNPZTsKICAgICAgICAgICAgI0U7CiAgICAgICAgICAgICNfZTsKICAgICAgICAgICAgI0dlOwogICAgICAgICAgICAjWmU7CiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgICAodGhpcy4jT2UgPSBlKSwgKHRoaXMuI0UgPSBzKHQpKSwgKHRoaXMuI19lID0gdGhpcy4jSGUuYmluZCh0aGlzKSksICh0aGlzLiNHZSA9ICExKSwgKHRoaXMuI1plID0gLTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFzeW5jICNIZShlKSB7CiAgICAgICAgICAgICAgaWYgKC0yID09PSB0aGlzLiNaZSkgcmV0dXJuOwogICAgICAgICAgICAgIGNvbnN0IHQgPSBzKHRoaXMuI0UpOwogICAgICAgICAgICAgICh0LmZyb21CbG9jayA9IHRoaXMuI1plICsgMSksICh0LnRvQmxvY2sgPSBlKTsKICAgICAgICAgICAgICBjb25zdCByID0gYXdhaXQgdGhpcy4jT2UuZ2V0TG9ncyh0KTsKICAgICAgICAgICAgICBpZiAoMCAhPT0gci5sZW5ndGgpIGZvciAoY29uc3QgZSBvZiByKSB0aGlzLiNPZS5lbWl0KHRoaXMuI0UsIGUpLCAodGhpcy4jWmUgPSBlLmJsb2NrTnVtYmVyKTsKICAgICAgICAgICAgICBlbHNlIHRoaXMuI1plIDwgZSAtIDYwICYmICh0aGlzLiNaZSA9IGUgLSA2MCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RhcnQoKSB7CiAgICAgICAgICAgICAgdGhpcy4jR2UgfHwKICAgICAgICAgICAgICAgICgodGhpcy4jR2UgPSAhMCksCiAgICAgICAgICAgICAgICAtMiA9PT0gdGhpcy4jWmUgJiYKICAgICAgICAgICAgICAgICAgdGhpcy4jT2UuZ2V0QmxvY2tOdW1iZXIoKS50aGVuKChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4jWmUgPSBlOwogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIHRoaXMuI09lLm9uKCdibG9jaycsIHRoaXMuI19lKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc3RvcCgpIHsKICAgICAgICAgICAgICB0aGlzLiNHZSAmJiAoKHRoaXMuI0dlID0gITEpLCB0aGlzLiNPZS5vZmYoJ2Jsb2NrJywgdGhpcy4jX2UpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBwYXVzZShlKSB7CiAgICAgICAgICAgICAgdGhpcy5zdG9wKCksIGUgJiYgKHRoaXMuI1plID0gLTIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlc3VtZSgpIHsKICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA0MTA0OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5XZWJTb2NrZXQgPSB2b2lkIDApOwogICAgICAgIHZhciBuID0gcigxNzI4KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1dlYlNvY2tldCcsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBuLldlYlNvY2tldDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNDg3MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuYWNjZXNzTGlzdGlmeSA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzY4MCksCiAgICAgICAgICBzID0gcig1MzE2KTsKICAgICAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGFkZHJlc3M6ICgwLCBuLmdldEFkZHJlc3MpKGUpLAogICAgICAgICAgICBzdG9yYWdlS2V5czogdC5tYXAoCiAgICAgICAgICAgICAgKGUsIHQpID0-ICgKICAgICAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSgoMCwgcy5pc0hleFN0cmluZykoZSwgMzIpLCAnaW52YWxpZCBzbG90JywgYHN0b3JhZ2VLZXlzWyR7dH1dYCwgZSksCiAgICAgICAgICAgICAgICBlLnRvTG93ZXJDYXNlKCkKICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIHQuYWNjZXNzTGlzdGlmeSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkKICAgICAgICAgICAgcmV0dXJuIGUubWFwKCh0LCByKSA9PgogICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkKICAgICAgICAgICAgICAgID8gKCgwLCBzLmFzc2VydEFyZ3VtZW50KSgyID09PSB0Lmxlbmd0aCwgJ2ludmFsaWQgc2xvdCBzZXQnLCBgdmFsdWVbJHtyfV1gLCB0KSwgbyh0WzBdLCB0WzFdKSkKICAgICAgICAgICAgICAgIDogKCgwLCBzLmFzc2VydEFyZ3VtZW50KShudWxsICE9IHQgJiYgJ29iamVjdCcgPT0gdHlwZW9mIHQsICdpbnZhbGlkIGFkZHJlc3Mtc2xvdCBzZXQnLCAndmFsdWUnLCBlKSwKICAgICAgICAgICAgICAgICAgbyh0LmFkZHJlc3MsIHQuc3RvcmFnZUtleXMpKQogICAgICAgICAgICApOwogICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKG51bGwgIT0gZSAmJiAnb2JqZWN0JyA9PSB0eXBlb2YgZSwgJ2ludmFsaWQgYWNjZXNzIGxpc3QnLCAndmFsdWUnLCBlKTsKICAgICAgICAgIGNvbnN0IHQgPSBPYmplY3Qua2V5cyhlKS5tYXAoKHQpID0-IHsKICAgICAgICAgICAgY29uc3QgciA9IGVbdF0ucmVkdWNlKChlLCB0KSA9PiAoKGVbdF0gPSAhMCksIGUpLCB7fSk7CiAgICAgICAgICAgIHJldHVybiBvKHQsIE9iamVjdC5rZXlzKHIpLnNvcnQoKSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiB0LnNvcnQoKGUsIHQpID0-IGUuYWRkcmVzcy5sb2NhbGVDb21wYXJlKHQuYWRkcmVzcykpLCB0OwogICAgICAgIH07CiAgICAgIH0sCiAgICAgIDQ0MTE6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LnJlY292ZXJBZGRyZXNzID0gdC5jb21wdXRlQWRkcmVzcyA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMzY4MCksCiAgICAgICAgICBzID0gcig5ODcyKTsKICAgICAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgICAgIGxldCB0OwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKHQgPSAnc3RyaW5nJyA9PSB0eXBlb2YgZSA_IHMuU2lnbmluZ0tleS5jb21wdXRlUHVibGljS2V5KGUsICExKSA6IGUucHVibGljS2V5KSwKICAgICAgICAgICAgKDAsIG4uZ2V0QWRkcmVzcykoKDAsIHMua2VjY2FrMjU2KSgnMHgnICsgdC5zdWJzdHJpbmcoNCkpLnN1YnN0cmluZygyNikpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICAodC5jb21wdXRlQWRkcmVzcyA9IG8pLAogICAgICAgICAgKHQucmVjb3ZlckFkZHJlc3MgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gbyhzLlNpZ25pbmdLZXkucmVjb3ZlclB1YmxpY0tleShlLCB0KSk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgMTEyNDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LlRyYW5zYWN0aW9uID0gdC5yZWNvdmVyQWRkcmVzcyA9IHQuY29tcHV0ZUFkZHJlc3MgPSB0LmFjY2Vzc0xpc3RpZnkgPSB2b2lkIDApOwogICAgICAgIHZhciBuID0gcig0ODcyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2FjY2Vzc0xpc3RpZnknLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi5hY2Nlc3NMaXN0aWZ5OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBzID0gcig0NDExKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2NvbXB1dGVBZGRyZXNzJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHMuY29tcHV0ZUFkZHJlc3M7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3JlY292ZXJBZGRyZXNzJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHMucmVjb3ZlckFkZHJlc3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBvID0gcig0NTU2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1RyYW5zYWN0aW9uJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG8uVHJhbnNhY3Rpb247CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDQ1NTY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LlRyYW5zYWN0aW9uID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcigzNjgwKSwKICAgICAgICAgIHMgPSByKDk4NzIpLAogICAgICAgICAgbyA9IHIoNTMxNiksCiAgICAgICAgICBpID0gcig0ODcyKSwKICAgICAgICAgIGEgPSByKDQ0MTEpLAogICAgICAgICAgYyA9IEJpZ0ludCgwKSwKICAgICAgICAgIHUgPSBCaWdJbnQoMiksCiAgICAgICAgICBsID0gQmlnSW50KDI3KSwKICAgICAgICAgIGQgPSBCaWdJbnQoMjgpLAogICAgICAgICAgZiA9IEJpZ0ludCgzNSksCiAgICAgICAgICBoID0gQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYnKTsKICAgICAgICBmdW5jdGlvbiBnKGUpIHsKICAgICAgICAgIHJldHVybiAnMHgnID09PSBlID8gbnVsbCA6ICgwLCBuLmdldEFkZHJlc3MpKGUpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBwKGUsIHQpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgaS5hY2Nlc3NMaXN0aWZ5KShlKTsKICAgICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKCExLCByLm1lc3NhZ2UsIHQsIGUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKGUsIHQpIHsKICAgICAgICAgIHJldHVybiAnMHgnID09PSBlID8gMCA6ICgwLCBvLmdldE51bWJlcikoZSwgdCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGIoZSwgdCkgewogICAgICAgICAgaWYgKCcweCcgPT09IGUpIHJldHVybiBjOwogICAgICAgICAgY29uc3QgciA9ICgwLCBvLmdldEJpZ0ludCkoZSwgdCk7CiAgICAgICAgICByZXR1cm4gKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHIgPD0gaCwgJ3ZhbHVlIGV4Y2VlZHMgdWludCBzaXplJywgdCwgciksIHI7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHkoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9ICgwLCBvLmdldEJpZ0ludCkoZSwgJ3ZhbHVlJyksCiAgICAgICAgICAgIG4gPSAoMCwgby50b0JlQXJyYXkpKHIpOwogICAgICAgICAgcmV0dXJuICgwLCBvLmFzc2VydEFyZ3VtZW50KShuLmxlbmd0aCA8PSAzMiwgJ3ZhbHVlIHRvbyBsYXJnZScsIGB0eC4ke3R9YCwgciksIG47CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIEEoZSkgewogICAgICAgICAgcmV0dXJuICgwLCBpLmFjY2Vzc0xpc3RpZnkpKGUpLm1hcCgoZSkgPT4gW2UuYWRkcmVzcywgZS5zdG9yYWdlS2V5c10pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB2KGUsIHQpIHsKICAgICAgICAgIGNvbnN0IHIgPSBbCiAgICAgICAgICAgIHkoZS5ub25jZSB8fCAwLCAnbm9uY2UnKSwKICAgICAgICAgICAgeShlLmdhc1ByaWNlIHx8IDAsICdnYXNQcmljZScpLAogICAgICAgICAgICB5KGUuZ2FzTGltaXQgfHwgMCwgJ2dhc0xpbWl0JyksCiAgICAgICAgICAgIG51bGwgIT0gZS50byA_ICgwLCBuLmdldEFkZHJlc3MpKGUudG8pIDogJzB4JywKICAgICAgICAgICAgeShlLnZhbHVlIHx8IDAsICd2YWx1ZScpLAogICAgICAgICAgICBlLmRhdGEgfHwgJzB4JwogICAgICAgICAgXTsKICAgICAgICAgIGxldCBpID0gYzsKICAgICAgICAgIGlmIChlLmNoYWluSWQgIT0gYykKICAgICAgICAgICAgKGkgPSAoMCwgby5nZXRCaWdJbnQpKGUuY2hhaW5JZCwgJ3R4LmNoYWluSWQnKSksCiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgIXQgfHwgbnVsbCA9PSB0Lm5ldHdvcmtWIHx8IHQubGVnYWN5Q2hhaW5JZCA9PT0gaSwKICAgICAgICAgICAgICAgICd0eC5jaGFpbklkL3NpZy52IG1pc21hdGNoJywKICAgICAgICAgICAgICAgICdzaWcnLAogICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICk7CiAgICAgICAgICBlbHNlIGlmIChlLnNpZ25hdHVyZSkgewogICAgICAgICAgICBjb25zdCB0ID0gZS5zaWduYXR1cmUubGVnYWN5Q2hhaW5JZDsKICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChpID0gdCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXQpIHJldHVybiBpICE9PSBjICYmIChyLnB1c2goKDAsIG8udG9CZUFycmF5KShpKSksIHIucHVzaCgnMHgnKSwgci5wdXNoKCcweCcpKSwgKDAsIG8uZW5jb2RlUmxwKShyKTsKICAgICAgICAgIGxldCBhID0gQmlnSW50KDI3ICsgdC55UGFyaXR5KTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIGkgIT09IGMKICAgICAgICAgICAgICA_IChhID0gcy5TaWduYXR1cmUuZ2V0Q2hhaW5JZFYoaSwgdC52KSkKICAgICAgICAgICAgICA6IEJpZ0ludCh0LnYpICE9PSBhICYmICgwLCBvLmFzc2VydEFyZ3VtZW50KSghMSwgJ3R4LmNoYWluSWQvc2lnLnYgbWlzbWF0Y2gnLCAnc2lnJywgdCksCiAgICAgICAgICAgIHIucHVzaCgoMCwgby50b0JlQXJyYXkpKGEpKSwKICAgICAgICAgICAgci5wdXNoKCgwLCBvLnRvQmVBcnJheSkodC5yKSksCiAgICAgICAgICAgIHIucHVzaCgoMCwgby50b0JlQXJyYXkpKHQucykpLAogICAgICAgICAgICAoMCwgby5lbmNvZGVSbHApKHIpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBFKGUsIHQpIHsKICAgICAgICAgIGxldCByOwogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKCgociA9IG0odFswXSwgJ3lQYXJpdHknKSksIDAgIT09IHIgJiYgMSAhPT0gcikpIHRocm93IG5ldyBFcnJvcignYmFkIHlQYXJpdHknKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCB5UGFyaXR5JywgJ3lQYXJpdHknLCB0WzBdKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IG4gPSAoMCwgby56ZXJvUGFkVmFsdWUpKHRbMV0sIDMyKSwKICAgICAgICAgICAgaSA9ICgwLCBvLnplcm9QYWRWYWx1ZSkodFsyXSwgMzIpLAogICAgICAgICAgICBhID0gcy5TaWduYXR1cmUuZnJvbSh7IHI6IG4sIHM6IGksIHlQYXJpdHk6IHIgfSk7CiAgICAgICAgICBlLnNpZ25hdHVyZSA9IGE7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHcoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IFsKICAgICAgICAgICAgeShlLmNoYWluSWQgfHwgMCwgJ2NoYWluSWQnKSwKICAgICAgICAgICAgeShlLm5vbmNlIHx8IDAsICdub25jZScpLAogICAgICAgICAgICB5KGUubWF4UHJpb3JpdHlGZWVQZXJHYXMgfHwgMCwgJ21heFByaW9yaXR5RmVlUGVyR2FzJyksCiAgICAgICAgICAgIHkoZS5tYXhGZWVQZXJHYXMgfHwgMCwgJ21heEZlZVBlckdhcycpLAogICAgICAgICAgICB5KGUuZ2FzTGltaXQgfHwgMCwgJ2dhc0xpbWl0JyksCiAgICAgICAgICAgIG51bGwgIT0gZS50byA_ICgwLCBuLmdldEFkZHJlc3MpKGUudG8pIDogJzB4JywKICAgICAgICAgICAgeShlLnZhbHVlIHx8IDAsICd2YWx1ZScpLAogICAgICAgICAgICBlLmRhdGEgfHwgJzB4JywKICAgICAgICAgICAgQShlLmFjY2Vzc0xpc3QgfHwgW10pCiAgICAgICAgICBdOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdCAmJiAoci5wdXNoKHkodC55UGFyaXR5LCAneVBhcml0eScpKSwgci5wdXNoKCgwLCBvLnRvQmVBcnJheSkodC5yKSksIHIucHVzaCgoMCwgby50b0JlQXJyYXkpKHQucykpKSwKICAgICAgICAgICAgKDAsIG8uY29uY2F0KShbJzB4MDInLCAoMCwgby5lbmNvZGVSbHApKHIpXSkKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIFQoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IFsKICAgICAgICAgICAgeShlLmNoYWluSWQgfHwgMCwgJ2NoYWluSWQnKSwKICAgICAgICAgICAgeShlLm5vbmNlIHx8IDAsICdub25jZScpLAogICAgICAgICAgICB5KGUuZ2FzUHJpY2UgfHwgMCwgJ2dhc1ByaWNlJyksCiAgICAgICAgICAgIHkoZS5nYXNMaW1pdCB8fCAwLCAnZ2FzTGltaXQnKSwKICAgICAgICAgICAgbnVsbCAhPSBlLnRvID8gKDAsIG4uZ2V0QWRkcmVzcykoZS50bykgOiAnMHgnLAogICAgICAgICAgICB5KGUudmFsdWUgfHwgMCwgJ3ZhbHVlJyksCiAgICAgICAgICAgIGUuZGF0YSB8fCAnMHgnLAogICAgICAgICAgICBBKGUuYWNjZXNzTGlzdCB8fCBbXSkKICAgICAgICAgIF07CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICB0ICYmIChyLnB1c2goeSh0LnlQYXJpdHksICdyZWNvdmVyeVBhcmFtJykpLCByLnB1c2goKDAsIG8udG9CZUFycmF5KSh0LnIpKSwgci5wdXNoKCgwLCBvLnRvQmVBcnJheSkodC5zKSkpLAogICAgICAgICAgICAoMCwgby5jb25jYXQpKFsnMHgwMScsICgwLCBvLmVuY29kZVJscCkocildKQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgY2xhc3MgUCB7CiAgICAgICAgICAjV2U7CiAgICAgICAgICAjWWU7CiAgICAgICAgICAjcjsKICAgICAgICAgICNxZTsKICAgICAgICAgICNldDsKICAgICAgICAgICN0dDsKICAgICAgICAgICNydDsKICAgICAgICAgICNudDsKICAgICAgICAgICNzdDsKICAgICAgICAgICNyZTsKICAgICAgICAgICNvdDsKICAgICAgICAgICNpdDsKICAgICAgICAgIGdldCB0eXBlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jV2U7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgdHlwZShlKSB7CiAgICAgICAgICAgIHN3aXRjaCAoZSkgewogICAgICAgICAgICAgIGNhc2UgbnVsbDoKICAgICAgICAgICAgICAgIHRoaXMuI1dlID0gbnVsbDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlICdsZWdhY3knOgogICAgICAgICAgICAgICAgdGhpcy4jV2UgPSAwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgJ2Jlcmxpbic6CiAgICAgICAgICAgICAgY2FzZSAnZWlwLTI5MzAnOgogICAgICAgICAgICAgICAgdGhpcy4jV2UgPSAxOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgJ2xvbmRvbic6CiAgICAgICAgICAgICAgY2FzZSAnZWlwLTE1NTknOgogICAgICAgICAgICAgICAgdGhpcy4jV2UgPSAyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSghMSwgJ3Vuc3VwcG9ydGVkIHRyYW5zYWN0aW9uIHR5cGUnLCAndHlwZScsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgdHlwZU5hbWUoKSB7CiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuICdsZWdhY3knOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHJldHVybiAnZWlwLTI5MzAnOwogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJldHVybiAnZWlwLTE1NTknOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHRvKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jWWU7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgdG8oZSkgewogICAgICAgICAgICB0aGlzLiNZZSA9IG51bGwgPT0gZSA_IG51bGwgOiAoMCwgbi5nZXRBZGRyZXNzKShlKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBub25jZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3FlOwogICAgICAgICAgfQogICAgICAgICAgc2V0IG5vbmNlKGUpIHsKICAgICAgICAgICAgdGhpcy4jcWUgPSAoMCwgby5nZXROdW1iZXIpKGUsICd2YWx1ZScpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGdhc0xpbWl0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jZXQ7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgZ2FzTGltaXQoZSkgewogICAgICAgICAgICB0aGlzLiNldCA9ICgwLCBvLmdldEJpZ0ludCkoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgZ2FzUHJpY2UoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLiN0dDsKICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gZSB8fCAoMCAhPT0gdGhpcy50eXBlICYmIDEgIT09IHRoaXMudHlwZSkgPyBlIDogYzsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBnYXNQcmljZShlKSB7CiAgICAgICAgICAgIHRoaXMuI3R0ID0gbnVsbCA9PSBlID8gbnVsbCA6ICgwLCBvLmdldEJpZ0ludCkoZSwgJ2dhc1ByaWNlJyk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgbWF4UHJpb3JpdHlGZWVQZXJHYXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLiNydDsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA_ICgyID09PSB0aGlzLnR5cGUgPyBjIDogbnVsbCkgOiBlOwogICAgICAgICAgfQogICAgICAgICAgc2V0IG1heFByaW9yaXR5RmVlUGVyR2FzKGUpIHsKICAgICAgICAgICAgdGhpcy4jcnQgPSBudWxsID09IGUgPyBudWxsIDogKDAsIG8uZ2V0QmlnSW50KShlLCAnbWF4UHJpb3JpdHlGZWVQZXJHYXMnKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBtYXhGZWVQZXJHYXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLiNudDsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA_ICgyID09PSB0aGlzLnR5cGUgPyBjIDogbnVsbCkgOiBlOwogICAgICAgICAgfQogICAgICAgICAgc2V0IG1heEZlZVBlckdhcyhlKSB7CiAgICAgICAgICAgIHRoaXMuI250ID0gbnVsbCA9PSBlID8gbnVsbCA6ICgwLCBvLmdldEJpZ0ludCkoZSwgJ21heEZlZVBlckdhcycpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNyOwogICAgICAgICAgfQogICAgICAgICAgc2V0IGRhdGEoZSkgewogICAgICAgICAgICB0aGlzLiNyID0gKDAsIG8uaGV4bGlmeSkoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgdmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNzdDsKICAgICAgICAgIH0KICAgICAgICAgIHNldCB2YWx1ZShlKSB7CiAgICAgICAgICAgIHRoaXMuI3N0ID0gKDAsIG8uZ2V0QmlnSW50KShlLCAndmFsdWUnKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBjaGFpbklkKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jcmU7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgY2hhaW5JZChlKSB7CiAgICAgICAgICAgIHRoaXMuI3JlID0gKDAsIG8uZ2V0QmlnSW50KShlKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBzaWduYXR1cmUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNvdCB8fCBudWxsOwogICAgICAgICAgfQogICAgICAgICAgc2V0IHNpZ25hdHVyZShlKSB7CiAgICAgICAgICAgIHRoaXMuI290ID0gbnVsbCA9PSBlID8gbnVsbCA6IHMuU2lnbmF0dXJlLmZyb20oZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgYWNjZXNzTGlzdCgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuI2l0IHx8IG51bGw7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IGUgPyAoMSA9PT0gdGhpcy50eXBlIHx8IDIgPT09IHRoaXMudHlwZSA_IFtdIDogbnVsbCkgOiBlOwogICAgICAgICAgfQogICAgICAgICAgc2V0IGFjY2Vzc0xpc3QoZSkgewogICAgICAgICAgICB0aGlzLiNpdCA9IG51bGwgPT0gZSA_IG51bGwgOiAoMCwgaS5hY2Nlc3NMaXN0aWZ5KShlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICAodGhpcy4jV2UgPSBudWxsKSwKICAgICAgICAgICAgICAodGhpcy4jWWUgPSBudWxsKSwKICAgICAgICAgICAgICAodGhpcy4jcWUgPSAwKSwKICAgICAgICAgICAgICAodGhpcy4jZXQgPSBCaWdJbnQoMCkpLAogICAgICAgICAgICAgICh0aGlzLiN0dCA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLiNydCA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLiNudCA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLiNyID0gJzB4JyksCiAgICAgICAgICAgICAgKHRoaXMuI3N0ID0gQmlnSW50KDApKSwKICAgICAgICAgICAgICAodGhpcy4jcmUgPSBCaWdJbnQoMCkpLAogICAgICAgICAgICAgICh0aGlzLiNvdCA9IG51bGwpLAogICAgICAgICAgICAgICh0aGlzLiNpdCA9IG51bGwpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGhhc2goKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHRoaXMuc2lnbmF0dXJlID8gbnVsbCA6ICgwLCBzLmtlY2NhazI1NikodGhpcy5zZXJpYWxpemVkKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCB1bnNpZ25lZEhhc2goKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgcy5rZWNjYWsyNTYpKHRoaXMudW5zaWduZWRTZXJpYWxpemVkKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBmcm9tKCkgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLnNpZ25hdHVyZSA_IG51bGwgOiAoMCwgYS5yZWNvdmVyQWRkcmVzcykodGhpcy51bnNpZ25lZEhhc2gsIHRoaXMuc2lnbmF0dXJlKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBmcm9tUHVibGljS2V5KCkgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLnNpZ25hdHVyZSA_IG51bGwgOiBzLlNpZ25pbmdLZXkucmVjb3ZlclB1YmxpY0tleSh0aGlzLnVuc2lnbmVkSGFzaCwgdGhpcy5zaWduYXR1cmUpOwogICAgICAgICAgfQogICAgICAgICAgaXNTaWduZWQoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuc2lnbmF0dXJlOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHNlcmlhbGl6ZWQoKSB7CiAgICAgICAgICAgIHN3aXRjaCAoCiAgICAgICAgICAgICAgKCgwLCBvLmFzc2VydCkoCiAgICAgICAgICAgICAgICBudWxsICE9IHRoaXMuc2lnbmF0dXJlLAogICAgICAgICAgICAgICAgJ2Nhbm5vdCBzZXJpYWxpemUgdW5zaWduZWQgdHJhbnNhY3Rpb247IG1heWJlIHlvdSBtZWFudCAudW5zaWduZWRTZXJpYWxpemVkJywKICAgICAgICAgICAgICAgICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLAogICAgICAgICAgICAgICAgeyBvcGVyYXRpb246ICcuc2VyaWFsaXplZCcgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgdGhpcy5pbmZlclR5cGUoKSkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIHYodGhpcywgdGhpcy5zaWduYXR1cmUpOwogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHJldHVybiBUKHRoaXMsIHRoaXMuc2lnbmF0dXJlKTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gdyh0aGlzLCB0aGlzLnNpZ25hdHVyZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKDAsIG8uYXNzZXJ0KSghMSwgJ3Vuc3VwcG9ydGVkIHRyYW5zYWN0aW9uIHR5cGUnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgeyBvcGVyYXRpb246ICcuc2VyaWFsaXplZCcgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgdW5zaWduZWRTZXJpYWxpemVkKCkgewogICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaW5mZXJUeXBlKCkpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gdih0aGlzKTsKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICByZXR1cm4gVCh0aGlzKTsKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gdyh0aGlzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAoMCwgby5hc3NlcnQpKCExLCAndW5zdXBwb3J0ZWQgdHJhbnNhY3Rpb24gdHlwZScsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnLnVuc2lnbmVkU2VyaWFsaXplZCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpbmZlclR5cGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZmVyVHlwZXMoKS5wb3AoKTsKICAgICAgICAgIH0KICAgICAgICAgIGluZmVyVHlwZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBudWxsICE9IHRoaXMuZ2FzUHJpY2UsCiAgICAgICAgICAgICAgdCA9IG51bGwgIT0gdGhpcy5tYXhGZWVQZXJHYXMgfHwgbnVsbCAhPSB0aGlzLm1heFByaW9yaXR5RmVlUGVyR2FzLAogICAgICAgICAgICAgIHIgPSBudWxsICE9IHRoaXMuYWNjZXNzTGlzdDsKICAgICAgICAgICAgbnVsbCAhPSB0aGlzLm1heEZlZVBlckdhcyAmJgogICAgICAgICAgICAgIG51bGwgIT0gdGhpcy5tYXhQcmlvcml0eUZlZVBlckdhcyAmJgogICAgICAgICAgICAgICgwLCBvLmFzc2VydCkoCiAgICAgICAgICAgICAgICB0aGlzLm1heEZlZVBlckdhcyA-PSB0aGlzLm1heFByaW9yaXR5RmVlUGVyR2FzLAogICAgICAgICAgICAgICAgJ3ByaW9yaXR5RmVlIGNhbm5vdCBiZSBtb3JlIHRoYW4gbWF4RmVlJywKICAgICAgICAgICAgICAgICdCQURfREFUQScsCiAgICAgICAgICAgICAgICB7IHZhbHVlOiB0aGlzIH0KICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICgwLCBvLmFzc2VydCkoCiAgICAgICAgICAgICAgICAhdCB8fCAoMCAhPT0gdGhpcy50eXBlICYmIDEgIT09IHRoaXMudHlwZSksCiAgICAgICAgICAgICAgICAndHJhbnNhY3Rpb24gdHlwZSBjYW5ub3QgaGF2ZSBtYXhGZWVQZXJHYXMgb3IgbWF4UHJpb3JpdHlGZWVQZXJHYXMnLAogICAgICAgICAgICAgICAgJ0JBRF9EQVRBJywKICAgICAgICAgICAgICAgIHsgdmFsdWU6IHRoaXMgfQogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0KSgwICE9PSB0aGlzLnR5cGUgfHwgIXIsICdsZWdhY3kgdHJhbnNhY3Rpb24gY2Fubm90IGhhdmUgYWNjZXNzTGlzdCcsICdCQURfREFUQScsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICBudWxsICE9IHRoaXMudHlwZQogICAgICAgICAgICAgICAgPyBuLnB1c2godGhpcy50eXBlKQogICAgICAgICAgICAgICAgOiB0CiAgICAgICAgICAgICAgICAgID8gbi5wdXNoKDIpCiAgICAgICAgICAgICAgICAgIDogZQogICAgICAgICAgICAgICAgICAgID8gKG4ucHVzaCgxKSwgciB8fCBuLnB1c2goMCkpCiAgICAgICAgICAgICAgICAgICAgOiByCiAgICAgICAgICAgICAgICAgICAgICA_IChuLnB1c2goMSksIG4ucHVzaCgyKSkKICAgICAgICAgICAgICAgICAgICAgIDogKG4ucHVzaCgwKSwgbi5wdXNoKDEpLCBuLnB1c2goMikpLAogICAgICAgICAgICAgIG4uc29ydCgpLAogICAgICAgICAgICAgIG4KICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGlzTGVnYWN5KCkgewogICAgICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy50eXBlOwogICAgICAgICAgfQogICAgICAgICAgaXNCZXJsaW4oKSB7CiAgICAgICAgICAgIHJldHVybiAxID09PSB0aGlzLnR5cGU7CiAgICAgICAgICB9CiAgICAgICAgICBpc0xvbmRvbigpIHsKICAgICAgICAgICAgcmV0dXJuIDIgPT09IHRoaXMudHlwZTsKICAgICAgICAgIH0KICAgICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gUC5mcm9tKHRoaXMpOwogICAgICAgICAgfQogICAgICAgICAgdG9KU09OKCkgewogICAgICAgICAgICBjb25zdCBlID0gKGUpID0-IChudWxsID09IGUgPyBudWxsIDogZS50b1N0cmluZygpKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsCiAgICAgICAgICAgICAgdG86IHRoaXMudG8sCiAgICAgICAgICAgICAgZGF0YTogdGhpcy5kYXRhLAogICAgICAgICAgICAgIG5vbmNlOiB0aGlzLm5vbmNlLAogICAgICAgICAgICAgIGdhc0xpbWl0OiBlKHRoaXMuZ2FzTGltaXQpLAogICAgICAgICAgICAgIGdhc1ByaWNlOiBlKHRoaXMuZ2FzUHJpY2UpLAogICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiBlKHRoaXMubWF4UHJpb3JpdHlGZWVQZXJHYXMpLAogICAgICAgICAgICAgIG1heEZlZVBlckdhczogZSh0aGlzLm1heEZlZVBlckdhcyksCiAgICAgICAgICAgICAgdmFsdWU6IGUodGhpcy52YWx1ZSksCiAgICAgICAgICAgICAgY2hhaW5JZDogZSh0aGlzLmNoYWluSWQpLAogICAgICAgICAgICAgIHNpZzogdGhpcy5zaWduYXR1cmUgPyB0aGlzLnNpZ25hdHVyZS50b0pTT04oKSA6IG51bGwsCiAgICAgICAgICAgICAgYWNjZXNzTGlzdDogdGhpcy5hY2Nlc3NMaXN0CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZnJvbShlKSB7CiAgICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiBuZXcgUCgpOwogICAgICAgICAgICBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGUpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gKDAsIG8uZ2V0Qnl0ZXMpKGUpOwogICAgICAgICAgICAgIGlmICh0WzBdID49IDEyNykKICAgICAgICAgICAgICAgIHJldHVybiBQLmZyb20oCiAgICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgby5kZWNvZGVSbHApKGUpOwogICAgICAgICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkgJiYgKDkgPT09IHQubGVuZ3RoIHx8IDYgPT09IHQubGVuZ3RoKSwKICAgICAgICAgICAgICAgICAgICAgICdpbnZhbGlkIGZpZWxkIGNvdW50IGZvciBsZWdhY3kgdHJhbnNhY3Rpb24nLAogICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnLAogICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IHsKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IDAsCiAgICAgICAgICAgICAgICAgICAgICBub25jZTogbSh0WzBdLCAnbm9uY2UnKSwKICAgICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBiKHRbMV0sICdnYXNQcmljZScpLAogICAgICAgICAgICAgICAgICAgICAgZ2FzTGltaXQ6IGIodFsyXSwgJ2dhc0xpbWl0JyksCiAgICAgICAgICAgICAgICAgICAgICB0bzogZyh0WzNdKSwKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBiKHRbNF0sICd2YWx1ZScpLAogICAgICAgICAgICAgICAgICAgICAgZGF0YTogKDAsIG8uaGV4bGlmeSkodFs1XSksCiAgICAgICAgICAgICAgICAgICAgICBjaGFpbklkOiBjCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoNiA9PT0gdC5sZW5ndGgpIHJldHVybiByOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBiKHRbNl0sICd2JyksCiAgICAgICAgICAgICAgICAgICAgICBpID0gYih0WzddLCAncicpLAogICAgICAgICAgICAgICAgICAgICAgYSA9IGIodFs4XSwgJ3MnKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gYyAmJiBhID09PSBjKSByLmNoYWluSWQgPSBuOwogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAobiAtIGYpIC8gdTsKICAgICAgICAgICAgICAgICAgICAgIGkgPCBjICYmIChpID0gYyksCiAgICAgICAgICAgICAgICAgICAgICAgIChyLmNoYWluSWQgPSBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKGkgIT09IGMgfHwgbiA9PT0gbCB8fCBuID09PSBkLCAnbm9uLWNhbm9uaWNhbCBsZWdhY3kgdicsICd2JywgdFs2XSksCiAgICAgICAgICAgICAgICAgICAgICAgIChyLnNpZ25hdHVyZSA9IHMuU2lnbmF0dXJlLmZyb20oewogICAgICAgICAgICAgICAgICAgICAgICAgIHI6ICgwLCBvLnplcm9QYWRWYWx1ZSkodFs3XSwgMzIpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHM6ICgwLCBvLnplcm9QYWRWYWx1ZSkodFs4XSwgMzIpLAogICAgICAgICAgICAgICAgICAgICAgICAgIHY6IG4KICAgICAgICAgICAgICAgICAgICAgICAgfSkpLAogICAgICAgICAgICAgICAgICAgICAgICAoci5oYXNoID0gKDAsIHMua2VjY2FrMjU2KShlKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiByOwogICAgICAgICAgICAgICAgICB9KSh0KQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBzd2l0Y2ggKHRbMF0pIHsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgcmV0dXJuIFAuZnJvbSgKICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgby5kZWNvZGVSbHApKCgwLCBvLmdldEJ5dGVzKShlKS5zbGljZSgxKSk7CiAgICAgICAgICAgICAgICAgICAgICAoMCwgby5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkgJiYgKDggPT09IHQubGVuZ3RoIHx8IDExID09PSB0Lmxlbmd0aCksCiAgICAgICAgICAgICAgICAgICAgICAgICdpbnZhbGlkIGZpZWxkIGNvdW50IGZvciB0cmFuc2FjdGlvbiB0eXBlOiAxJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEnLAogICAgICAgICAgICAgICAgICAgICAgICAoMCwgby5oZXhsaWZ5KShlKQogICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluSWQ6IGIodFswXSwgJ2NoYWluSWQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgbm9uY2U6IG0odFsxXSwgJ25vbmNlJyksCiAgICAgICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiBiKHRbMl0sICdnYXNQcmljZScpLAogICAgICAgICAgICAgICAgICAgICAgICBnYXNMaW1pdDogYih0WzNdLCAnZ2FzTGltaXQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgdG86IGcodFs0XSksCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBiKHRbNV0sICd2YWx1ZScpLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoMCwgby5oZXhsaWZ5KSh0WzZdKSwKICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzTGlzdDogcCh0WzddLCAnYWNjZXNzTGlzdCcpCiAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDggPT09IHQubGVuZ3RoIHx8ICgoci5oYXNoID0gKDAsIHMua2VjY2FrMjU2KShlKSksIEUociwgdC5zbGljZSg4KSkpLCByOwogICAgICAgICAgICAgICAgICAgIH0pKHQpCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBQLmZyb20oCiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gKDAsIG8uZGVjb2RlUmxwKSgoMCwgby5nZXRCeXRlcykoZSkuc2xpY2UoMSkpOwogICAgICAgICAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KHQpICYmICg5ID09PSB0Lmxlbmd0aCB8fCAxMiA9PT0gdC5sZW5ndGgpLAogICAgICAgICAgICAgICAgICAgICAgICAnaW52YWxpZCBmaWVsZCBjb3VudCBmb3IgdHJhbnNhY3Rpb24gdHlwZTogMicsCiAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhJywKICAgICAgICAgICAgICAgICAgICAgICAgKDAsIG8uaGV4bGlmeSkoZSkKICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gYih0WzJdLCAnbWF4UHJpb3JpdHlGZWVQZXJHYXMnKSwKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGIodFszXSwgJ21heEZlZVBlckdhcycpLAogICAgICAgICAgICAgICAgICAgICAgICBpID0gewogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW5JZDogYih0WzBdLCAnY2hhaW5JZCcpLAogICAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlOiBtKHRbMV0sICdub25jZScpLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1heFByaW9yaXR5RmVlUGVyR2FzOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgIG1heEZlZVBlckdhczogbiwKICAgICAgICAgICAgICAgICAgICAgICAgICBnYXNQcmljZTogbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICBnYXNMaW1pdDogYih0WzRdLCAnZ2FzTGltaXQnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogZyh0WzVdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYih0WzZdLCAndmFsdWUnKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoMCwgby5oZXhsaWZ5KSh0WzddKSwKICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NMaXN0OiBwKHRbOF0sICdhY2Nlc3NMaXN0JykKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA5ID09PSB0Lmxlbmd0aCB8fCAoKGkuaGFzaCA9ICgwLCBzLmtlY2NhazI1NikoZSkpLCBFKGksIHQuc2xpY2UoOSkpKSwgaTsKICAgICAgICAgICAgICAgICAgICB9KSh0KQogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAoMCwgby5hc3NlcnQpKCExLCAndW5zdXBwb3J0ZWQgdHJhbnNhY3Rpb24gdHlwZScsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7IG9wZXJhdGlvbjogJ2Zyb20nIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUCgpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIG51bGwgIT0gZS50eXBlICYmICh0LnR5cGUgPSBlLnR5cGUpLAogICAgICAgICAgICAgIG51bGwgIT0gZS50byAmJiAodC50byA9IGUudG8pLAogICAgICAgICAgICAgIG51bGwgIT0gZS5ub25jZSAmJiAodC5ub25jZSA9IGUubm9uY2UpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5nYXNMaW1pdCAmJiAodC5nYXNMaW1pdCA9IGUuZ2FzTGltaXQpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5nYXNQcmljZSAmJiAodC5nYXNQcmljZSA9IGUuZ2FzUHJpY2UpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5tYXhQcmlvcml0eUZlZVBlckdhcyAmJiAodC5tYXhQcmlvcml0eUZlZVBlckdhcyA9IGUubWF4UHJpb3JpdHlGZWVQZXJHYXMpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5tYXhGZWVQZXJHYXMgJiYgKHQubWF4RmVlUGVyR2FzID0gZS5tYXhGZWVQZXJHYXMpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5kYXRhICYmICh0LmRhdGEgPSBlLmRhdGEpLAogICAgICAgICAgICAgIG51bGwgIT0gZS52YWx1ZSAmJiAodC52YWx1ZSA9IGUudmFsdWUpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5jaGFpbklkICYmICh0LmNoYWluSWQgPSBlLmNoYWluSWQpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5zaWduYXR1cmUgJiYgKHQuc2lnbmF0dXJlID0gcy5TaWduYXR1cmUuZnJvbShlLnNpZ25hdHVyZSkpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5hY2Nlc3NMaXN0ICYmICh0LmFjY2Vzc0xpc3QgPSBlLmFjY2Vzc0xpc3QpLAogICAgICAgICAgICAgIG51bGwgIT0gZS5oYXNoICYmCiAgICAgICAgICAgICAgICAoKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHQuaXNTaWduZWQoKSwgJ3Vuc2lnbmVkIHRyYW5zYWN0aW9uIGNhbm5vdCBkZWZpbmUgaGFzaCcsICd0eCcsIGUpLAogICAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKHQuaGFzaCA9PT0gZS5oYXNoLCAnaGFzaCBtaXNtYXRjaCcsICd0eCcsIGUpKSwKICAgICAgICAgICAgICBudWxsICE9IGUuZnJvbSAmJgogICAgICAgICAgICAgICAgKCgwLCBvLmFzc2VydEFyZ3VtZW50KSh0LmlzU2lnbmVkKCksICd1bnNpZ25lZCB0cmFuc2FjdGlvbiBjYW5ub3QgZGVmaW5lIGZyb20nLCAndHgnLCBlKSwKICAgICAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KSh0LmZyb20udG9Mb3dlckNhc2UoKSA9PT0gKGUuZnJvbSB8fCAnJykudG9Mb3dlckNhc2UoKSwgJ2Zyb20gbWlzbWF0Y2gnLCAndHgnLCBlKSksCiAgICAgICAgICAgICAgdAogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LlRyYW5zYWN0aW9uID0gUDsKICAgICAgfSwKICAgICAgNDkxMjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuZGVjb2RlQmFzZTU4ID0gdC5lbmNvZGVCYXNlNTggPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDYxNjMpLAogICAgICAgICAgcyA9IHIoNTA0NCksCiAgICAgICAgICBvID0gcig1NDQwKSwKICAgICAgICAgIGkgPSAnMTIzNDU2Nzg5QUJDREVGR0hKS0xNTlBRUlNUVVZXWFlaYWJjZGVmZ2hpamttbm9wcXJzdHV2d3h5eic7CiAgICAgICAgbGV0IGEgPSBudWxsOwogICAgICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICAgICAgaWYgKG51bGwgPT0gYSkgewogICAgICAgICAgICBhID0ge307CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgNTg7IGUrKykgYVtpW2VdXSA9IEJpZ0ludChlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHQgPSBhW2VdOwogICAgICAgICAgcmV0dXJuICgwLCBzLmFzc2VydEFyZ3VtZW50KShudWxsICE9IHQsICdpbnZhbGlkIGJhc2U1OCB2YWx1ZScsICdsZXR0ZXInLCBlKSwgdDsKICAgICAgICB9CiAgICAgICAgY29uc3QgdSA9IEJpZ0ludCgwKSwKICAgICAgICAgIGwgPSBCaWdJbnQoNTgpOwogICAgICAgICh0LmVuY29kZUJhc2U1OCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjb25zdCB0ID0gKDAsIG4uZ2V0Qnl0ZXMpKGUpOwogICAgICAgICAgbGV0IHIgPSAoMCwgby50b0JpZ0ludCkodCksCiAgICAgICAgICAgIHMgPSAnJzsKICAgICAgICAgIGZvciAoOyByOyApIChzID0gaVtOdW1iZXIociAlIGwpXSArIHMpLCAociAvPSBsKTsKICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGggJiYgIXRbZV07IGUrKykgcyA9IGlbMF0gKyBzOwogICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfSksCiAgICAgICAgICAodC5kZWNvZGVCYXNlNTggPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBsZXQgdCA9IHU7CiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgZS5sZW5ndGg7IHIrKykgKHQgKj0gbCksICh0ICs9IGMoZVtyXSkpOwogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA0ODg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LmVuY29kZUJhc2U2NCA9IHQuZGVjb2RlQmFzZTY0ID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig2MTYzKTsKICAgICAgICAodC5kZWNvZGVCYXNlNjQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICgwLCBuLmdldEJ5dGVzQ29weSkoQnVmZmVyLmZyb20oZSwgJ2Jhc2U2NCcpKTsKICAgICAgICB9KSwKICAgICAgICAgICh0LmVuY29kZUJhc2U2NCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBCdWZmZXIuZnJvbSgoMCwgbi5nZXRCeXRlcykoZSkpLnRvU3RyaW5nKCdiYXNlNjQnKTsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA2MTYzOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuemVyb1BhZEJ5dGVzID0KICAgICAgICAgICAgdC56ZXJvUGFkVmFsdWUgPQogICAgICAgICAgICB0LnN0cmlwWmVyb3NMZWZ0ID0KICAgICAgICAgICAgdC5kYXRhU2xpY2UgPQogICAgICAgICAgICB0LmRhdGFMZW5ndGggPQogICAgICAgICAgICB0LmNvbmNhdCA9CiAgICAgICAgICAgIHQuaGV4bGlmeSA9CiAgICAgICAgICAgIHQuaXNCeXRlc0xpa2UgPQogICAgICAgICAgICB0LmlzSGV4U3RyaW5nID0KICAgICAgICAgICAgdC5nZXRCeXRlc0NvcHkgPQogICAgICAgICAgICB0LmdldEJ5dGVzID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUwNDQpOwogICAgICAgIGZ1bmN0aW9uIHMoZSwgdCwgcikgewogICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gciA_IG5ldyBVaW50OEFycmF5KGUpIDogZTsKICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgZSAmJiBlLm1hdGNoKC9eMHgoWzAtOWEtZl1bMC05YS1mXSkqJC9pKSkgewogICAgICAgICAgICBjb25zdCB0ID0gbmV3IFVpbnQ4QXJyYXkoKGUubGVuZ3RoIC0gMikgLyAyKTsKICAgICAgICAgICAgbGV0IHIgPSAyOwogICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspICh0W25dID0gcGFyc2VJbnQoZS5zdWJzdHJpbmcociwgciArIDIpLCAxNikpLCAociArPSAyKTsKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICB9CiAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIEJ5dGVzTGlrZSB2YWx1ZScsIHQgfHwgJ3ZhbHVlJywgZSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG8oZSwgdCkgewogICAgICAgICAgcmV0dXJuIHMoZSwgdCwgITEpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgICAgIHJldHVybiAhKAogICAgICAgICAgICAnc3RyaW5nJyAhPSB0eXBlb2YgZSB8fAogICAgICAgICAgICAhZS5tYXRjaCgvXjB4WzAtOUEtRmEtZl0qJC8pIHx8CiAgICAgICAgICAgICgnbnVtYmVyJyA9PSB0eXBlb2YgdCAmJiBlLmxlbmd0aCAhPT0gMiArIDIgKiB0KSB8fAogICAgICAgICAgICAoITAgPT09IHQgJiYgZS5sZW5ndGggJSAyICE9IDApCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICAodC5nZXRCeXRlcyA9IG8pLAogICAgICAgICAgKHQuZ2V0Qnl0ZXNDb3B5ID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHMoZSwgdCwgITApOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5pc0hleFN0cmluZyA9IGkpLAogICAgICAgICAgKHQuaXNCeXRlc0xpa2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gaShlLCAhMCkgfHwgZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk7CiAgICAgICAgICB9KTsKICAgICAgICBjb25zdCBhID0gJzAxMjM0NTY3ODlhYmNkZWYnOwogICAgICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICAgICAgY29uc3QgdCA9IG8oZSk7CiAgICAgICAgICBsZXQgciA9ICcweCc7CiAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyBlKyspIHsKICAgICAgICAgICAgY29uc3QgbiA9IHRbZV07CiAgICAgICAgICAgIHIgKz0gYVsoMjQwICYgbikgPj4gNF0gKyBhWzE1ICYgbl07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdShlLCB0LCByKSB7CiAgICAgICAgICBjb25zdCBzID0gbyhlKTsKICAgICAgICAgICgwLCBuLmFzc2VydCkodCA-PSBzLmxlbmd0aCwgJ3BhZGRpbmcgZXhjZWVkcyBkYXRhIGxlbmd0aCcsICdCVUZGRVJfT1ZFUlJVTicsIHsKICAgICAgICAgICAgYnVmZmVyOiBuZXcgVWludDhBcnJheShzKSwKICAgICAgICAgICAgbGVuZ3RoOiB0LAogICAgICAgICAgICBvZmZzZXQ6IHQgKyAxCiAgICAgICAgICB9KTsKICAgICAgICAgIGNvbnN0IGkgPSBuZXcgVWludDhBcnJheSh0KTsKICAgICAgICAgIHJldHVybiBpLmZpbGwoMCksIHIgPyBpLnNldChzLCB0IC0gcy5sZW5ndGgpIDogaS5zZXQocywgMCksIGMoaSk7CiAgICAgICAgfQogICAgICAgICh0LmhleGxpZnkgPSBjKSwKICAgICAgICAgICh0LmNvbmNhdCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiAnMHgnICsgZS5tYXAoKGUpID0-IGMoZSkuc3Vic3RyaW5nKDIpKS5qb2luKCcnKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZGF0YUxlbmd0aCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBpKGUsICEwKSA_IChlLmxlbmd0aCAtIDIpIC8gMiA6IG8oZSkubGVuZ3RoOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5kYXRhU2xpY2UgPSBmdW5jdGlvbiAoZSwgdCwgcikgewogICAgICAgICAgICBjb25zdCBzID0gbyhlKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICBudWxsICE9IHIgJiYKICAgICAgICAgICAgICAgIHIgPiBzLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0KSghMSwgJ2Nhbm5vdCBzbGljZSBiZXlvbmQgZGF0YSBib3VuZHMnLCAnQlVGRkVSX09WRVJSVU4nLCB7CiAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogcywKICAgICAgICAgICAgICAgICAgbGVuZ3RoOiBzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgb2Zmc2V0OiByCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBjKHMuc2xpY2UobnVsbCA9PSB0ID8gMCA6IHQsIG51bGwgPT0gciA_IHMubGVuZ3RoIDogcikpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LnN0cmlwWmVyb3NMZWZ0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgbGV0IHQgPSBjKGUpLnN1YnN0cmluZygyKTsKICAgICAgICAgICAgZm9yICg7IHQuc3RhcnRzV2l0aCgnMDAnKTsgKSB0ID0gdC5zdWJzdHJpbmcoMik7CiAgICAgICAgICAgIHJldHVybiAnMHgnICsgdDsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuemVyb1BhZFZhbHVlID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHUoZSwgdCwgITApOwogICAgICAgICAgfSksCiAgICAgICAgICAodC56ZXJvUGFkQnl0ZXMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gdShlLCB0LCAhMSk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNTA0NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LmFzc2VydFByaXZhdGUgPQogICAgICAgICAgICB0LmFzc2VydE5vcm1hbGl6ZSA9CiAgICAgICAgICAgIHQuYXNzZXJ0QXJndW1lbnRDb3VudCA9CiAgICAgICAgICAgIHQuYXNzZXJ0QXJndW1lbnQgPQogICAgICAgICAgICB0LmFzc2VydCA9CiAgICAgICAgICAgIHQubWFrZUVycm9yID0KICAgICAgICAgICAgdC5pc0NhbGxFeGNlcHRpb24gPQogICAgICAgICAgICB0LmlzRXJyb3IgPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNzkzNiksCiAgICAgICAgICBzID0gcig0NzQ0KTsKICAgICAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiAnbnVsbCc7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlKSkgcmV0dXJuICdbICcgKyBlLm1hcChvKS5qb2luKCcsICcpICsgJyBdJzsKICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVWludDhBcnJheSkgewogICAgICAgICAgICBjb25zdCB0ID0gJzAxMjM0NTY3ODlhYmNkZWYnOwogICAgICAgICAgICBsZXQgciA9ICcweCc7CiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgKHIgKz0gdFtlW25dID4-IDRdKSwgKHIgKz0gdFsxNSAmIGVbbl1dKTsKICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoJ29iamVjdCcgPT0gdHlwZW9mIGUgJiYgJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgZS50b0pTT04pIHJldHVybiBvKGUudG9KU09OKCkpOwogICAgICAgICAgc3dpdGNoICh0eXBlb2YgZSkgewogICAgICAgICAgICBjYXNlICdib29sZWFuJzoKICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzoKICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgICByZXR1cm4gZS50b1N0cmluZygpOwogICAgICAgICAgICBjYXNlICdiaWdpbnQnOgogICAgICAgICAgICAgIHJldHVybiBCaWdJbnQoZSkudG9TdHJpbmcoKTsKICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSk7CiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6IHsKICAgICAgICAgICAgICBjb25zdCB0ID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgICAgcmV0dXJuIHQuc29ydCgpLCAneyAnICsgdC5tYXAoKHQpID0-IGAke28odCl9OiAke28oZVt0XSl9YCkuam9pbignLCAnKSArICcgfSc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnWyBDT1VMRCBOT1QgU0VSSUFMSVpFIF0nOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBlICYmIGUuY29kZSA9PT0gdDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYShlLCB0LCByKSB7CiAgICAgICAgICBsZXQgaSwKICAgICAgICAgICAgYSA9IGU7CiAgICAgICAgICB7CiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTsKICAgICAgICAgICAgaWYgKHIpIHsKICAgICAgICAgICAgICBpZiAoJ21lc3NhZ2UnIGluIHIgfHwgJ2NvZGUnIGluIHIgfHwgJ25hbWUnIGluIHIpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHZhbHVlIHdpbGwgb3ZlcndyaXRlIHBvcHVsYXRlZCB2YWx1ZXM6ICR7byhyKX1gKTsKICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgaW4gcikgewogICAgICAgICAgICAgICAgaWYgKCdzaG9ydE1lc3NhZ2UnID09PSBlKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSByW2VdOwogICAgICAgICAgICAgICAgcy5wdXNoKGUgKyAnPScgKyBvKHQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcy5wdXNoKGBjb2RlPSR7dH1gKSwgcy5wdXNoKGB2ZXJzaW9uPSR7bi52ZXJzaW9ufWApLCBzLmxlbmd0aCAmJiAoZSArPSAnICgnICsgcy5qb2luKCcsICcpICsgJyknKTsKICAgICAgICAgIH0KICAgICAgICAgIHN3aXRjaCAodCkgewogICAgICAgICAgICBjYXNlICdJTlZBTElEX0FSR1VNRU5UJzoKICAgICAgICAgICAgICBpID0gbmV3IFR5cGVFcnJvcihlKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnTlVNRVJJQ19GQVVMVCc6CiAgICAgICAgICAgIGNhc2UgJ0JVRkZFUl9PVkVSUlVOJzoKICAgICAgICAgICAgICBpID0gbmV3IFJhbmdlRXJyb3IoZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgaSA9IG5ldyBFcnJvcihlKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICgwLCBzLmRlZmluZVByb3BlcnRpZXMpKGksIHsgY29kZTogdCB9KSwKICAgICAgICAgICAgciAmJiBPYmplY3QuYXNzaWduKGksIHIpLAogICAgICAgICAgICBudWxsID09IGkuc2hvcnRNZXNzYWdlICYmICgwLCBzLmRlZmluZVByb3BlcnRpZXMpKGksIHsgc2hvcnRNZXNzYWdlOiBhIH0pLAogICAgICAgICAgICBpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjKGUsIHQsIHIsIG4pIHsKICAgICAgICAgIGlmICghZSkgdGhyb3cgYSh0LCByLCBuKTsKICAgICAgICB9CiAgICAgICAgKHQuaXNFcnJvciA9IGkpLAogICAgICAgICAgKHQuaXNDYWxsRXhjZXB0aW9uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGkoZSwgJ0NBTExfRVhDRVBUSU9OJyk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0Lm1ha2VFcnJvciA9IGEpLAogICAgICAgICAgKHQuYXNzZXJ0ID0gYyksCiAgICAgICAgICAodC5hc3NlcnRBcmd1bWVudCA9IGZ1bmN0aW9uIChlLCB0LCByLCBuKSB7CiAgICAgICAgICAgIGMoZSwgdCwgJ0lOVkFMSURfQVJHVU1FTlQnLCB7IGFyZ3VtZW50OiByLCB2YWx1ZTogbiB9KTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuYXNzZXJ0QXJndW1lbnRDb3VudCA9IGZ1bmN0aW9uIChlLCB0LCByKSB7CiAgICAgICAgICAgIG51bGwgPT0gciAmJiAociA9ICcnKSwKICAgICAgICAgICAgICByICYmIChyID0gJzogJyArIHIpLAogICAgICAgICAgICAgIGMoZSA-PSB0LCAnbWlzc2luZyBhcmd1ZW1udCcgKyByLCAnTUlTU0lOR19BUkdVTUVOVCcsIHsgY291bnQ6IGUsIGV4cGVjdGVkQ291bnQ6IHQgfSksCiAgICAgICAgICAgICAgYyhlIDw9IHQsICd0b28gbWFueSBhcmd1ZW1udHMnICsgciwgJ1VORVhQRUNURURfQVJHVU1FTlQnLCB7IGNvdW50OiBlLCBleHBlY3RlZENvdW50OiB0IH0pOwogICAgICAgICAgfSk7CiAgICAgICAgY29uc3QgdSA9IFsnTkZEJywgJ05GQycsICdORktEJywgJ05GS0MnXS5yZWR1Y2UoKGUsIHQpID0-IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICgndGVzdCcgIT09ICd0ZXN0Jy5ub3JtYWxpemUodCkpIHRocm93IG5ldyBFcnJvcignYmFkJyk7CiAgICAgICAgICAgIGlmICgnTkZEJyA9PT0gdCkgewogICAgICAgICAgICAgIGlmIChTdHJpbmcuZnJvbUNoYXJDb2RlKDIzMykubm9ybWFsaXplKCdORkQnKSAhPT0gU3RyaW5nLmZyb21DaGFyQ29kZSgxMDEsIDc2OSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Jyb2tlbicpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGUucHVzaCh0KTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB9LCBbXSk7CiAgICAgICAgKHQuYXNzZXJ0Tm9ybWFsaXplID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGModS5pbmRleE9mKGUpID49IDAsICdwbGF0Zm9ybSBtaXNzaW5nIFN0cmluZy5wcm90b3R5cGUubm9ybWFsaXplJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgb3BlcmF0aW9uOiAnU3RyaW5nLnByb3RvdHlwZS5ub3JtYWxpemUnLAogICAgICAgICAgICBpbmZvOiB7IGZvcm06IGUgfQogICAgICAgICAgfSk7CiAgICAgICAgfSksCiAgICAgICAgICAodC5hc3NlcnRQcml2YXRlID0gZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgaWYgKChudWxsID09IHIgJiYgKHIgPSAnJyksIGUgIT09IHQpKSB7CiAgICAgICAgICAgICAgbGV0IGUgPSByLAogICAgICAgICAgICAgICAgdCA9ICduZXcnOwogICAgICAgICAgICAgIHIgJiYgKChlICs9ICcuJyksICh0ICs9ICcgJyArIHIpKSwKICAgICAgICAgICAgICAgIGMoITEsIGBwcml2YXRlIGNvbnN0cnVjdG9yOyB1c2UgJHtlfWZyb20qIG1ldGhvZHNgLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgeyBvcGVyYXRpb246IHQgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9LAogICAgICAyMDI0OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5FdmVudFBheWxvYWQgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDQ3NDQpOwogICAgICAgIHQuRXZlbnRQYXlsb2FkID0gY2xhc3MgewogICAgICAgICAgZmlsdGVyOwogICAgICAgICAgZW1pdHRlcjsKICAgICAgICAgICNhdDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIpIHsKICAgICAgICAgICAgKHRoaXMuI2F0ID0gdCksICgwLCBuLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgZW1pdHRlcjogZSwgZmlsdGVyOiByIH0pOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgcmVtb3ZlTGlzdGVuZXIoKSB7CiAgICAgICAgICAgIG51bGwgIT0gdGhpcy4jYXQgJiYgKGF3YWl0IHRoaXMuZW1pdHRlci5vZmYodGhpcy5maWx0ZXIsIHRoaXMuI2F0KSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgNTI0ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LkZldGNoUmVzcG9uc2UgPSB0LkZldGNoUmVxdWVzdCA9IHQuRmV0Y2hDYW5jZWxTaWduYWwgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDQ4OCksCiAgICAgICAgICBzID0gcig2MTYzKSwKICAgICAgICAgIG8gPSByKDUwNDQpLAogICAgICAgICAgaSA9IHIoNDc0NCksCiAgICAgICAgICBhID0gcigxMDg4KSwKICAgICAgICAgIGMgPSByKDg3NjgpOwogICAgICAgIGxldCB1ID0gKDAsIGMuY3JlYXRlR2V0VXJsKSgpOwogICAgICAgIGNvbnN0IGwgPSBuZXcgUmVnRXhwKCdeZGF0YTooW147Ol0qKT8oO2Jhc2U2NCk_LCguKikkJywgJ2knKSwKICAgICAgICAgIGQgPSBuZXcgUmVnRXhwKCdeaXBmczovLyhpcGZzLyk_KC4qKSQnLCAnaScpOwogICAgICAgIGxldCBmID0gITE7CiAgICAgICAgYXN5bmMgZnVuY3Rpb24gaChlLCB0KSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCB0ID0gZS5tYXRjaChsKTsKICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgZGF0YScpOwogICAgICAgICAgICByZXR1cm4gbmV3IHYoCiAgICAgICAgICAgICAgMjAwLAogICAgICAgICAgICAgICdPSycsCiAgICAgICAgICAgICAgeyAnY29udGVudC10eXBlJzogdFsxXSB8fCAndGV4dC9wbGFpbicgfSwKICAgICAgICAgICAgICB0WzJdCiAgICAgICAgICAgICAgICA_ICgwLCBuLmRlY29kZUJhc2U2NCkodFszXSkKICAgICAgICAgICAgICAgIDogKChyID0gdFszXSksCiAgICAgICAgICAgICAgICAgICgwLCBhLnRvVXRmOEJ5dGVzKSgKICAgICAgICAgICAgICAgICAgICByLnJlcGxhY2UoLyUoWzAtOWEtZl1bMC05YS1mXSkvZ2ksIChlLCB0KSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KHQsIDE2KSkpCiAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgdig1OTksICdCQUQgUkVRVUVTVCAoaW52YWxpZCBkYXRhOiBVUkkpJywge30sIG51bGwsIG5ldyBBKGUpKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciByOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBnKGUpIHsKICAgICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAodCwgcikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSB0Lm1hdGNoKGQpOwogICAgICAgICAgICAgIGlmICghcikgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGxpbmsnKTsKICAgICAgICAgICAgICByZXR1cm4gbmV3IEEoYCR7ZX0ke3JbMl19YCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gbmV3IHYoNTk5LCAnQkFEIFJFUVVFU1QgKGludmFsaWQgSVBGUyBVUkkpJywge30sIG51bGwsIG5ldyBBKHQpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgY29uc3QgcCA9IHsgZGF0YTogaCwgaXBmczogZygnaHR0cHM6Ly9nYXRld2F5LmlwZnMuaW8vaXBmcy8nKSB9LAogICAgICAgICAgbSA9IG5ldyBXZWFrTWFwKCk7CiAgICAgICAgY2xhc3MgYiB7CiAgICAgICAgICAjY3Q7CiAgICAgICAgICAjdXQ7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlKSB7CiAgICAgICAgICAgICh0aGlzLiNjdCA9IFtdKSwKICAgICAgICAgICAgICAodGhpcy4jdXQgPSAhMSksCiAgICAgICAgICAgICAgbS5zZXQoZSwgKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKCF0aGlzLiN1dCkgewogICAgICAgICAgICAgICAgICB0aGlzLiN1dCA9ICEwOwogICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy4jY3QpCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBlKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgMCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuI2N0ID0gW107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhZGRMaXN0ZW5lcihlKSB7CiAgICAgICAgICAgICgwLCBvLmFzc2VydCkoIXRoaXMuI3V0LCAnc2luZ2FsIGFscmVhZHkgY2FuY2VsbGVkJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICBvcGVyYXRpb246ICdmZXRjaENhbmNlbFNpZ25hbC5hZGRDYW5jZWxMaXN0ZW5lcicKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgdGhpcy4jY3QucHVzaChlKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBjYW5jZWxsZWQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiN1dDsKICAgICAgICAgIH0KICAgICAgICAgIGNoZWNrU2lnbmFsKCkgewogICAgICAgICAgICAoMCwgby5hc3NlcnQpKCF0aGlzLmNhbmNlbGxlZCwgJ2NhbmNlbGxlZCcsICdDQU5DRUxMRUQnLCB7fSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHkoZSkgewogICAgICAgICAgaWYgKG51bGwgPT0gZSkgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIHNpZ25hbDsgc2hvdWxkIG5vdCBoYXBwZW4nKTsKICAgICAgICAgIHJldHVybiBlLmNoZWNrU2lnbmFsKCksIGU7CiAgICAgICAgfQogICAgICAgIHQuRmV0Y2hDYW5jZWxTaWduYWwgPSBiOwogICAgICAgIGNsYXNzIEEgewogICAgICAgICAgI2x0OwogICAgICAgICAgI2R0OwogICAgICAgICAgI2Z0OwogICAgICAgICAgI2h0OwogICAgICAgICAgI2d0OwogICAgICAgICAgI3NlOwogICAgICAgICAgI3B0OwogICAgICAgICAgI210OwogICAgICAgICAgI2J0OwogICAgICAgICAgI3l0OwogICAgICAgICAgI0F0OwogICAgICAgICAgI3Z0OwogICAgICAgICAgI0V0OwogICAgICAgICAgI3d0OwogICAgICAgICAgI1R0OwogICAgICAgICAgZ2V0IHVybCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3NlOwogICAgICAgICAgfQogICAgICAgICAgc2V0IHVybChlKSB7CiAgICAgICAgICAgIHRoaXMuI3NlID0gU3RyaW5nKGUpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGJvZHkoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHRoaXMuI3B0ID8gbnVsbCA6IG5ldyBVaW50OEFycmF5KHRoaXMuI3B0KTsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBib2R5KGUpIHsKICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgKHRoaXMuI3B0ID0gdm9pZCAwKSwgKHRoaXMuI210ID0gdm9pZCAwKTsKICAgICAgICAgICAgZWxzZSBpZiAoJ3N0cmluZycgPT0gdHlwZW9mIGUpICh0aGlzLiNwdCA9ICgwLCBhLnRvVXRmOEJ5dGVzKShlKSksICh0aGlzLiNtdCA9ICd0ZXh0L3BsYWluJyk7CiAgICAgICAgICAgIGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSAodGhpcy4jcHQgPSBlKSwgKHRoaXMuI210ID0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBpZiAoJ29iamVjdCcgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBib2R5Jyk7CiAgICAgICAgICAgICAgKHRoaXMuI3B0ID0gKDAsIGEudG9VdGY4Qnl0ZXMpKEpTT04uc3RyaW5naWZ5KGUpKSksICh0aGlzLiNtdCA9ICdhcHBsaWNhdGlvbi9qc29uJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGhhc0JvZHkoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuI3B0OwogICAgICAgICAgfQogICAgICAgICAgZ2V0IG1ldGhvZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2h0ID8gdGhpcy4jaHQgOiB0aGlzLmhhc0JvZHkoKSA_ICdQT1NUJyA6ICdHRVQnOwogICAgICAgICAgfQogICAgICAgICAgc2V0IG1ldGhvZChlKSB7CiAgICAgICAgICAgIG51bGwgPT0gZSAmJiAoZSA9ICcnKSwgKHRoaXMuI2h0ID0gU3RyaW5nKGUpLnRvVXBwZXJDYXNlKCkpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGhlYWRlcnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLiNmdCk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgdGhpcy4jYnQgJiYgKGUuYXV0aG9yaXphdGlvbiA9IGBCYXNpYyAkeygwLCBuLmVuY29kZUJhc2U2NCkoKDAsIGEudG9VdGY4Qnl0ZXMpKHRoaXMuI2J0KSl9YCksCiAgICAgICAgICAgICAgdGhpcy5hbGxvd0d6aXAgJiYgKGVbJ2FjY2VwdC1lbmNvZGluZyddID0gJ2d6aXAnKSwKICAgICAgICAgICAgICBudWxsID09IGVbJ2NvbnRlbnQtdHlwZSddICYmIHRoaXMuI210ICYmIChlWydjb250ZW50LXR5cGUnXSA9IHRoaXMuI210KSwKICAgICAgICAgICAgICB0aGlzLmJvZHkgJiYgKGVbJ2NvbnRlbnQtbGVuZ3RoJ10gPSBTdHJpbmcodGhpcy5ib2R5Lmxlbmd0aCkpLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldEhlYWRlcihlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNbZS50b0xvd2VyQ2FzZSgpXTsKICAgICAgICAgIH0KICAgICAgICAgIHNldEhlYWRlcihlLCB0KSB7CiAgICAgICAgICAgIHRoaXMuI2Z0W1N0cmluZyhlKS50b0xvd2VyQ2FzZSgpXSA9IFN0cmluZyh0KTsKICAgICAgICAgIH0KICAgICAgICAgIGNsZWFySGVhZGVycygpIHsKICAgICAgICAgICAgdGhpcy4jZnQgPSB7fTsKICAgICAgICAgIH0KICAgICAgICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkgewogICAgICAgICAgICBjb25zdCBlID0gdGhpcy5oZWFkZXJzLAogICAgICAgICAgICAgIHQgPSBPYmplY3Qua2V5cyhlKTsKICAgICAgICAgICAgbGV0IHIgPSAwOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIG5leHQ6ICgpID0-IHsKICAgICAgICAgICAgICAgIGlmIChyIDwgdC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRbcisrXTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IFtuLCBlW25dXSwgZG9uZTogITEgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2b2lkIDAsIGRvbmU6ICEwIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGNyZWRlbnRpYWxzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jYnQgfHwgbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHNldENyZWRlbnRpYWxzKGUsIHQpIHsKICAgICAgICAgICAgKDAsIG8uYXNzZXJ0QXJndW1lbnQpKCFlLm1hdGNoKC86LyksICdpbnZhbGlkIGJhc2ljIGF1dGhlbnRpY2F0aW9uIHVzZXJuYW1lJywgJ3VzZXJuYW1lJywgJ1tSRURBQ1RFRF0nKSwKICAgICAgICAgICAgICAodGhpcy4jYnQgPSBgJHtlfToke3R9YCk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgYWxsb3dHemlwKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jZHQ7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgYWxsb3dHemlwKGUpIHsKICAgICAgICAgICAgdGhpcy4jZHQgPSAhIWU7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgYWxsb3dJbnNlY3VyZUF1dGhlbnRpY2F0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gISF0aGlzLiNsdDsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBhbGxvd0luc2VjdXJlQXV0aGVudGljYXRpb24oZSkgewogICAgICAgICAgICB0aGlzLiNsdCA9ICEhZTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCB0aW1lb3V0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jZ3Q7CiAgICAgICAgICB9CiAgICAgICAgICBzZXQgdGltZW91dChlKSB7CiAgICAgICAgICAgICgwLCBvLmFzc2VydEFyZ3VtZW50KShlID49IDAsICd0aW1lb3V0IG11c3QgYmUgbm9uLXplcm8nLCAndGltZW91dCcsIGUpLCAodGhpcy4jZ3QgPSBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBwcmVmbGlnaHRGdW5jKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jeXQgfHwgbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBwcmVmbGlnaHRGdW5jKGUpIHsKICAgICAgICAgICAgdGhpcy4jeXQgPSBlOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHByb2Nlc3NGdW5jKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jQXQgfHwgbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBwcm9jZXNzRnVuYyhlKSB7CiAgICAgICAgICAgIHRoaXMuI0F0ID0gZTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCByZXRyeUZ1bmMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiN2dCB8fCBudWxsOwogICAgICAgICAgfQogICAgICAgICAgc2V0IHJldHJ5RnVuYyhlKSB7CiAgICAgICAgICAgIHRoaXMuI3Z0ID0gZTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBnZXRVcmxGdW5jKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jVHQgfHwgdTsKICAgICAgICAgIH0KICAgICAgICAgIHNldCBnZXRVcmxGdW5jKGUpIHsKICAgICAgICAgICAgdGhpcy4jVHQgPSBlOwogICAgICAgICAgfQogICAgICAgICAgY29uc3RydWN0b3IoZSkgewogICAgICAgICAgICAodGhpcy4jc2UgPSBTdHJpbmcoZSkpLAogICAgICAgICAgICAgICh0aGlzLiNsdCA9ICExKSwKICAgICAgICAgICAgICAodGhpcy4jZHQgPSAhMCksCiAgICAgICAgICAgICAgKHRoaXMuI2Z0ID0ge30pLAogICAgICAgICAgICAgICh0aGlzLiNodCA9ICcnKSwKICAgICAgICAgICAgICAodGhpcy4jZ3QgPSAzZTUpLAogICAgICAgICAgICAgICh0aGlzLiN3dCA9IHsgc2xvdEludGVydmFsOiAyNTAsIG1heEF0dGVtcHRzOiAxMiB9KSwKICAgICAgICAgICAgICAodGhpcy4jVHQgPSBudWxsKTsKICAgICAgICAgIH0KICAgICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICByZXR1cm4gYDxGZXRjaFJlcXVlc3QgbWV0aG9kPSR7SlNPTi5zdHJpbmdpZnkodGhpcy5tZXRob2QpfSB1cmw9JHtKU09OLnN0cmluZ2lmeSh0aGlzLnVybCl9IGhlYWRlcnM9JHtKU09OLnN0cmluZ2lmeSh0aGlzLmhlYWRlcnMpfSBib2R5PSR7dGhpcy4jcHQgPyAoMCwgcy5oZXhsaWZ5KSh0aGlzLiNwdCkgOiAnbnVsbCd9PmA7CiAgICAgICAgICB9CiAgICAgICAgICBzZXRUaHJvdHRsZVBhcmFtcyhlKSB7CiAgICAgICAgICAgIG51bGwgIT0gZS5zbG90SW50ZXJ2YWwgJiYgKHRoaXMuI3d0LnNsb3RJbnRlcnZhbCA9IGUuc2xvdEludGVydmFsKSwKICAgICAgICAgICAgICBudWxsICE9IGUubWF4QXR0ZW1wdHMgJiYgKHRoaXMuI3d0Lm1heEF0dGVtcHRzID0gZS5tYXhBdHRlbXB0cyk7CiAgICAgICAgICB9CiAgICAgICAgICBhc3luYyAjUHQoZSwgdCwgciwgbiwgcykgewogICAgICAgICAgICBpZiAoZSA-PSB0aGlzLiN3dC5tYXhBdHRlbXB0cykgcmV0dXJuIHMubWFrZVNlcnZlckVycm9yKCdleGNlZWRlZCBtYXhpbXVtIHJldHJ5IGxpbWl0Jyk7CiAgICAgICAgICAgICgwLCBvLmFzc2VydCkoRSgpIDw9IHQsICd0aW1lb3V0JywgJ1RJTUVPVVQnLCB7IG9wZXJhdGlvbjogJ3JlcXVlc3Quc2VuZCcsIHJlYXNvbjogJ3RpbWVvdXQnLCByZXF1ZXN0OiBuIH0pLAogICAgICAgICAgICAgIHIgPiAwICYmCiAgICAgICAgICAgICAgICAoYXdhaXQgKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgodCkgPT4gc2V0VGltZW91dCh0LCBlKSk7CiAgICAgICAgICAgICAgICB9KShyKSk7CiAgICAgICAgICAgIGxldCBpID0gdGhpcy5jbG9uZSgpOwogICAgICAgICAgICBjb25zdCBhID0gKGkudXJsLnNwbGl0KCc6JylbMF0gfHwgJycpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmIChhIGluIHApIHsKICAgICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgcFthXShpLnVybCwgeShuLiNFdCkpOwogICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgdikgewogICAgICAgICAgICAgICAgbGV0IHQgPSBlOwogICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0Z1bmMpIHsKICAgICAgICAgICAgICAgICAgeShuLiNFdCk7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgdCA9IGF3YWl0IHRoaXMucHJvY2Vzc0Z1bmMoaSwgdCk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAobnVsbCAhPSBlLnRocm90dGxlICYmICdudW1iZXInID09IHR5cGVvZiBlLnN0YWxsKSB8fAogICAgICAgICAgICAgICAgICAgICAgdC5tYWtlU2VydmVyRXJyb3IoJ2Vycm9yIGluIHBvc3QtcHJvY2Vzc2luZyBmdW5jdGlvbicsIGUpLmFzc2VydE9rKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpID0gZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnByZWZsaWdodEZ1bmMgJiYgKGkgPSBhd2FpdCB0aGlzLnByZWZsaWdodEZ1bmMoaSkpOwogICAgICAgICAgICBjb25zdCBjID0gYXdhaXQgdGhpcy5nZXRVcmxGdW5jKGksIHkobi4jRXQpKTsKICAgICAgICAgICAgbGV0IHUgPSBuZXcgdihjLnN0YXR1c0NvZGUsIGMuc3RhdHVzTWVzc2FnZSwgYy5oZWFkZXJzLCBjLmJvZHksIG4pOwogICAgICAgICAgICBpZiAoMzAxID09PSB1LnN0YXR1c0NvZGUgfHwgMzAyID09PSB1LnN0YXR1c0NvZGUpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgciA9IHUuaGVhZGVycy5sb2NhdGlvbiB8fCAnJzsKICAgICAgICAgICAgICAgIHJldHVybiBpLnJlZGlyZWN0KHIpLiNQdChlICsgMSwgdCwgMCwgbiwgdSk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICByZXR1cm4gdTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoNDI5ID09PSB1LnN0YXR1c0NvZGUgJiYgKG51bGwgPT0gdGhpcy5yZXRyeUZ1bmMgfHwgKGF3YWl0IHRoaXMucmV0cnlGdW5jKGksIHUsIGUpKSkpIHsKICAgICAgICAgICAgICBjb25zdCByID0gdS5oZWFkZXJzWydyZXRyeS1hZnRlciddOwogICAgICAgICAgICAgIGxldCBzID0gdGhpcy4jd3Quc2xvdEludGVydmFsICogTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpICogTWF0aC5wb3coMiwgZSkpOwogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAnc3RyaW5nJyA9PSB0eXBlb2YgciAmJiByLm1hdGNoKC9eWzEtOV1bMC05XSokLykgJiYgKHMgPSBwYXJzZUludChyKSksIGkuY2xvbmUoKS4jUHQoZSArIDEsIHQsIHMsIG4sIHUpCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzRnVuYykgewogICAgICAgICAgICAgIHkobi4jRXQpOwogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB1ID0gYXdhaXQgdGhpcy5wcm9jZXNzRnVuYyhpLCB1KTsKICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgICAgICAgICAobnVsbCAhPSByLnRocm90dGxlICYmICdudW1iZXInID09IHR5cGVvZiByLnN0YWxsKSB8fAogICAgICAgICAgICAgICAgICB1Lm1ha2VTZXJ2ZXJFcnJvcignZXJyb3IgaW4gcG9zdC1wcm9jZXNzaW5nIGZ1bmN0aW9uJywgcikuYXNzZXJ0T2soKTsKICAgICAgICAgICAgICAgIGxldCBzID0gdGhpcy4jd3Quc2xvdEludGVydmFsICogTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpICogTWF0aC5wb3coMiwgZSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIHIuc3RhbGwgPj0gMCAmJiAocyA9IHIuc3RhbGwpLCBpLmNsb25lKCkuI1B0KGUgKyAxLCB0LCBzLCBuLCB1KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHU7CiAgICAgICAgICB9CiAgICAgICAgICBzZW5kKCkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBvLmFzc2VydCkobnVsbCA9PSB0aGlzLiNFdCwgJ3JlcXVlc3QgYWxyZWFkeSBzZW50JywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2ZldGNoUmVxdWVzdC5zZW5kJwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICh0aGlzLiNFdCA9IG5ldyBiKHRoaXMpKSwKICAgICAgICAgICAgICB0aGlzLiNQdCgwLCBFKCkgKyB0aGlzLnRpbWVvdXQsIDAsIHRoaXMsIG5ldyB2KDAsICcnLCB7fSwgbnVsbCwgdGhpcykpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBjYW5jZWwoKSB7CiAgICAgICAgICAgICgwLCBvLmFzc2VydCkobnVsbCAhPSB0aGlzLiNFdCwgJ3JlcXVlc3QgaGFzIG5vdCBiZWVuIHNlbnQnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2ZldGNoUmVxdWVzdC5jYW5jZWwnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCBlID0gbS5nZXQodGhpcyk7CiAgICAgICAgICAgIGlmICghZSkgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIHNpZ25hbDsgc2hvdWxkIG5vdCBoYXBwZW4nKTsKICAgICAgICAgICAgZSgpOwogICAgICAgICAgfQogICAgICAgICAgcmVkaXJlY3QoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy51cmwuc3BsaXQoJzonKVswXS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICAgIHIgPSBlLnNwbGl0KCc6JylbMF0udG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgKDAsIG8uYXNzZXJ0KSgKICAgICAgICAgICAgICAnR0VUJyA9PT0gdGhpcy5tZXRob2QgJiYgKCdodHRwcycgIT09IHQgfHwgJ2h0dHAnICE9PSByKSAmJiBlLm1hdGNoKC9eaHR0cHM_Oi8pLAogICAgICAgICAgICAgICd1bnN1cHBvcnRlZCByZWRpcmVjdCcsCiAgICAgICAgICAgICAgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsCiAgICAgICAgICAgICAgeyBvcGVyYXRpb246IGByZWRpcmVjdCgke3RoaXMubWV0aG9kfSAke0pTT04uc3RyaW5naWZ5KHRoaXMudXJsKX0gPT4gJHtKU09OLnN0cmluZ2lmeShlKX0pYCB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgQShlKTsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAobi5tZXRob2QgPSAnR0VUJyksCiAgICAgICAgICAgICAgKG4uYWxsb3dHemlwID0gdGhpcy5hbGxvd0d6aXApLAogICAgICAgICAgICAgIChuLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpLAogICAgICAgICAgICAgIChuLiNmdCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuI2Z0KSksCiAgICAgICAgICAgICAgdGhpcy4jcHQgJiYgKG4uI3B0ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy4jcHQpKSwKICAgICAgICAgICAgICAobi4jbXQgPSB0aGlzLiNtdCksCiAgICAgICAgICAgICAgbgogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgY2xvbmUoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgQSh0aGlzLnVybCk7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKGUuI2h0ID0gdGhpcy4jaHQpLAogICAgICAgICAgICAgIHRoaXMuI3B0ICYmIChlLiNwdCA9IHRoaXMuI3B0KSwKICAgICAgICAgICAgICAoZS4jbXQgPSB0aGlzLiNtdCksCiAgICAgICAgICAgICAgKGUuI2Z0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy4jZnQpKSwKICAgICAgICAgICAgICAoZS4jYnQgPSB0aGlzLiNidCksCiAgICAgICAgICAgICAgdGhpcy5hbGxvd0d6aXAgJiYgKGUuYWxsb3dHemlwID0gITApLAogICAgICAgICAgICAgIChlLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpLAogICAgICAgICAgICAgIHRoaXMuYWxsb3dJbnNlY3VyZUF1dGhlbnRpY2F0aW9uICYmIChlLmFsbG93SW5zZWN1cmVBdXRoZW50aWNhdGlvbiA9ICEwKSwKICAgICAgICAgICAgICAoZS4jeXQgPSB0aGlzLiN5dCksCiAgICAgICAgICAgICAgKGUuI0F0ID0gdGhpcy4jQXQpLAogICAgICAgICAgICAgIChlLiN2dCA9IHRoaXMuI3Z0KSwKICAgICAgICAgICAgICAoZS4jVHQgPSB0aGlzLiNUdCksCiAgICAgICAgICAgICAgZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGxvY2tDb25maWcoKSB7CiAgICAgICAgICAgIGYgPSAhMDsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBnZXRHYXRld2F5KGUpIHsKICAgICAgICAgICAgcmV0dXJuIHBbZS50b0xvd2VyQ2FzZSgpXSB8fCBudWxsOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHJlZ2lzdGVyR2F0ZXdheShlLCB0KSB7CiAgICAgICAgICAgIGlmICgnaHR0cCcgPT09IChlID0gZS50b0xvd2VyQ2FzZSgpKSB8fCAnaHR0cHMnID09PSBlKQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgY2Fubm90IGludGVyY2VwdCAke2V9OyB1c2UgcmVnaXN0ZXJHZXRVcmxgKTsKICAgICAgICAgICAgaWYgKGYpIHRocm93IG5ldyBFcnJvcignZ2F0ZXdheXMgbG9ja2VkJyk7CiAgICAgICAgICAgIHBbZV0gPSB0OwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHJlZ2lzdGVyR2V0VXJsKGUpIHsKICAgICAgICAgICAgaWYgKGYpIHRocm93IG5ldyBFcnJvcignZ2F0ZXdheXMgbG9ja2VkJyk7CiAgICAgICAgICAgIHUgPSBlOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGNyZWF0ZUdldFVybEZ1bmMoZSkgewogICAgICAgICAgICByZXR1cm4gKDAsIGMuY3JlYXRlR2V0VXJsKShlKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBjcmVhdGVEYXRhR2F0ZXdheSgpIHsKICAgICAgICAgICAgcmV0dXJuIGg7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgY3JlYXRlSXBmc0dhdGV3YXlGdW5jKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGcoZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuRmV0Y2hSZXF1ZXN0ID0gQTsKICAgICAgICBjbGFzcyB2IHsKICAgICAgICAgICNTdDsKICAgICAgICAgICNPdDsKICAgICAgICAgICNmdDsKICAgICAgICAgICNwdDsKICAgICAgICAgICNpZTsKICAgICAgICAgICNSdDsKICAgICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICByZXR1cm4gYDxGZXRjaFJlc3BvbnNlIHN0YXR1cz0ke3RoaXMuc3RhdHVzQ29kZX0gYm9keT0ke3RoaXMuI3B0ID8gKDAsIHMuaGV4bGlmeSkodGhpcy4jcHQpIDogJ251bGwnfT5gOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHN0YXR1c0NvZGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNTdDsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBzdGF0dXNNZXNzYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jT3Q7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgaGVhZGVycygpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuI2Z0KTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBib2R5KCkgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB0aGlzLiNwdCA_IG51bGwgOiBuZXcgVWludDhBcnJheSh0aGlzLiNwdCk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgYm9keVRleHQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gdGhpcy4jcHQgPyAnJyA6ICgwLCBhLnRvVXRmOFN0cmluZykodGhpcy4jcHQpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0KSghMSwgJ3Jlc3BvbnNlIGJvZHkgaXMgbm90IHZhbGlkIFVURi04IGRhdGEnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgewogICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnYm9keVRleHQnLAogICAgICAgICAgICAgICAgaW5mbzogeyByZXNwb25zZTogdGhpcyB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGdldCBib2R5SnNvbigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmJvZHlUZXh0KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICgwLCBvLmFzc2VydCkoITEsICdyZXNwb25zZSBib2R5IGlzIG5vdCB2YWxpZCBKU09OJywgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2JvZHlKc29uJywKICAgICAgICAgICAgICAgIGluZm86IHsgcmVzcG9uc2U6IHRoaXMgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuaGVhZGVycywKICAgICAgICAgICAgICB0ID0gT2JqZWN0LmtleXMoZSk7CiAgICAgICAgICAgIGxldCByID0gMDsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBuZXh0OiAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAociA8IHQubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0W3IrK107CiAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBbbiwgZVtuXV0sIGRvbmU6ICExIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdm9pZCAwLCBkb25lOiAhMCB9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIG4sIHMpIHsKICAgICAgICAgICAgKHRoaXMuI1N0ID0gZSksCiAgICAgICAgICAgICAgKHRoaXMuI090ID0gdCksCiAgICAgICAgICAgICAgKHRoaXMuI2Z0ID0gT2JqZWN0LmtleXMocikucmVkdWNlKChlLCB0KSA9PiAoKGVbdC50b0xvd2VyQ2FzZSgpXSA9IFN0cmluZyhyW3RdKSksIGUpLCB7fSkpLAogICAgICAgICAgICAgICh0aGlzLiNwdCA9IG51bGwgPT0gbiA_IG51bGwgOiBuZXcgVWludDhBcnJheShuKSksCiAgICAgICAgICAgICAgKHRoaXMuI2llID0gcyB8fCBudWxsKSwKICAgICAgICAgICAgICAodGhpcy4jUnQgPSB7IG1lc3NhZ2U6ICcnIH0pOwogICAgICAgICAgfQogICAgICAgICAgbWFrZVNlcnZlckVycm9yKGUsIHQpIHsKICAgICAgICAgICAgbGV0IHI7CiAgICAgICAgICAgIHIgPSBlCiAgICAgICAgICAgICAgPyBgQ0xJRU5UIEVTQ0FMQVRFRCBTRVJWRVIgRVJST1IgKCR7dGhpcy5zdGF0dXNDb2RlfSAke3RoaXMuc3RhdHVzTWVzc2FnZX07ICR7ZX0pYAogICAgICAgICAgICAgIDogYENMSUVOVCBFU0NBTEFURUQgU0VSVkVSIEVSUk9SICgkeyhlID0gYCR7dGhpcy5zdGF0dXNDb2RlfSAke3RoaXMuc3RhdHVzTWVzc2FnZX1gKX0pYDsKICAgICAgICAgICAgY29uc3QgbiA9IG5ldyB2KDU5OSwgciwgdGhpcy5oZWFkZXJzLCB0aGlzLmJvZHksIHRoaXMuI2llIHx8IHZvaWQgMCk7CiAgICAgICAgICAgIHJldHVybiAobi4jUnQgPSB7IG1lc3NhZ2U6IGUsIGVycm9yOiB0IH0pLCBuOwogICAgICAgICAgfQogICAgICAgICAgdGhyb3dUaHJvdHRsZUVycm9yKGUsIHQpIHsKICAgICAgICAgICAgbnVsbCA9PSB0CiAgICAgICAgICAgICAgPyAodCA9IC0xKQogICAgICAgICAgICAgIDogKDAsIG8uYXNzZXJ0QXJndW1lbnQpKE51bWJlci5pc0ludGVnZXIodCkgJiYgdCA-PSAwLCAnaW52YWxpZCBzdGFsbCB0aW1lb3V0JywgJ3N0YWxsJywgdCk7CiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgRXJyb3IoZSB8fCAndGhyb3R0bGluZyByZXF1ZXN0cycpOwogICAgICAgICAgICB0aHJvdyAoKDAsIGkuZGVmaW5lUHJvcGVydGllcykociwgeyBzdGFsbDogdCwgdGhyb3R0bGU6ICEwIH0pLCByKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldEhlYWRlcihlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNbZS50b0xvd2VyQ2FzZSgpXTsKICAgICAgICAgIH0KICAgICAgICAgIGhhc0JvZHkoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuI3B0OwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHJlcXVlc3QoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNpZTsKICAgICAgICAgIH0KICAgICAgICAgIG9rKCkgewogICAgICAgICAgICByZXR1cm4gJycgPT09IHRoaXMuI1J0Lm1lc3NhZ2UgJiYgdGhpcy5zdGF0dXNDb2RlID49IDIwMCAmJiB0aGlzLnN0YXR1c0NvZGUgPCAzMDA7CiAgICAgICAgICB9CiAgICAgICAgICBhc3NlcnRPaygpIHsKICAgICAgICAgICAgaWYgKHRoaXMub2soKSkgcmV0dXJuOwogICAgICAgICAgICBsZXQgeyBtZXNzYWdlOiBlLCBlcnJvcjogdCB9ID0gdGhpcy4jUnQ7CiAgICAgICAgICAgICcnID09PSBlICYmIChlID0gYHNlcnZlciByZXNwb25zZSAke3RoaXMuc3RhdHVzQ29kZX0gJHt0aGlzLnN0YXR1c01lc3NhZ2V9YCksCiAgICAgICAgICAgICAgKDAsIG8uYXNzZXJ0KSghMSwgZSwgJ1NFUlZFUl9FUlJPUicsIHsKICAgICAgICAgICAgICAgIHJlcXVlc3Q6IHRoaXMucmVxdWVzdCB8fCAndW5rbm93biByZXF1ZXN0JywKICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB0aGlzLAogICAgICAgICAgICAgICAgZXJyb3I6IHQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gRSgpIHsKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICB9CiAgICAgICAgdC5GZXRjaFJlc3BvbnNlID0gdjsKICAgICAgfSwKICAgICAgMjkyMDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuRml4ZWROdW1iZXIgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDYxNjMpLAogICAgICAgICAgcyA9IHIoNTA0NCksCiAgICAgICAgICBvID0gcig1NDQwKSwKICAgICAgICAgIGkgPSByKDQ3NDQpLAogICAgICAgICAgYSA9IEJpZ0ludCgtMSksCiAgICAgICAgICBjID0gQmlnSW50KDApLAogICAgICAgICAgdSA9IEJpZ0ludCgxKSwKICAgICAgICAgIGwgPSBCaWdJbnQoNSksCiAgICAgICAgICBkID0ge307CiAgICAgICAgbGV0IGYgPSAnMDAwMCc7CiAgICAgICAgZm9yICg7IGYubGVuZ3RoIDwgODA7ICkgZiArPSBmOwogICAgICAgIGZ1bmN0aW9uIGgoZSkgewogICAgICAgICAgbGV0IHQgPSBmOwogICAgICAgICAgZm9yICg7IHQubGVuZ3RoIDwgZTsgKSB0ICs9IHQ7CiAgICAgICAgICByZXR1cm4gQmlnSW50KCcxJyArIHQuc3Vic3RyaW5nKDAsIGUpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZyhlLCB0LCByKSB7CiAgICAgICAgICBjb25zdCBuID0gQmlnSW50KHQud2lkdGgpOwogICAgICAgICAgaWYgKHQuc2lnbmVkKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB1IDw8IChuIC0gdSk7CiAgICAgICAgICAgICgwLCBzLmFzc2VydCkobnVsbCA9PSByIHx8IChlID49IC10ICYmIGUgPCB0KSwgJ292ZXJmbG93JywgJ05VTUVSSUNfRkFVTFQnLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiByLAogICAgICAgICAgICAgIGZhdWx0OiAnb3ZlcmZsb3cnLAogICAgICAgICAgICAgIHZhbHVlOiBlCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIChlID0gZSA-IGMgPyAoMCwgby5mcm9tVHdvcykoKDAsIG8ubWFzaykoZSwgbiksIG4pIDogLSgwLCBvLmZyb21Ud29zKSgoMCwgby5tYXNrKSgtZSwgbiksIG4pKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB1IDw8IG47CiAgICAgICAgICAgICgwLCBzLmFzc2VydCkobnVsbCA9PSByIHx8IChlID49IDAgJiYgZSA8IHQpLCAnb3ZlcmZsb3cnLCAnTlVNRVJJQ19GQVVMVCcsIHsKICAgICAgICAgICAgICBvcGVyYXRpb246IHIsCiAgICAgICAgICAgICAgZmF1bHQ6ICdvdmVyZmxvdycsCiAgICAgICAgICAgICAgdmFsdWU6IGUKICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgKGUgPSAoKGUgJSB0KSArIHQpICUgdCAmICh0IC0gdSkpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSkgewogICAgICAgICAgJ251bWJlcicgPT0gdHlwZW9mIGUgJiYgKGUgPSBgZml4ZWQxMjh4JHtlfWApOwogICAgICAgICAgbGV0IHQgPSAhMCwKICAgICAgICAgICAgciA9IDEyOCwKICAgICAgICAgICAgbiA9IDE4OwogICAgICAgICAgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBlKQogICAgICAgICAgICBpZiAoJ2ZpeGVkJyA9PT0gZSk7CiAgICAgICAgICAgIGVsc2UgaWYgKCd1Zml4ZWQnID09PSBlKSB0ID0gITE7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGNvbnN0IG8gPSBlLm1hdGNoKC9eKHU_KWZpeGVkKFswLTldKyl4KFswLTldKykkLyk7CiAgICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKG8sICdpbnZhbGlkIGZpeGVkIGZvcm1hdCcsICdmb3JtYXQnLCBlKSwKICAgICAgICAgICAgICAgICh0ID0gJ3UnICE9PSBvWzFdKSwKICAgICAgICAgICAgICAgIChyID0gcGFyc2VJbnQob1syXSkpLAogICAgICAgICAgICAgICAgKG4gPSBwYXJzZUludChvWzNdKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGUpIHsKICAgICAgICAgICAgY29uc3QgbyA9IGUsCiAgICAgICAgICAgICAgaSA9IChlLCB0LCByKSA9PgogICAgICAgICAgICAgICAgbnVsbCA9PSBvW2VdCiAgICAgICAgICAgICAgICAgID8gcgogICAgICAgICAgICAgICAgICA6ICgoMCwgcy5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb1tlXSA9PT0gdCwKICAgICAgICAgICAgICAgICAgICAgICdpbnZhbGlkIGZpeGVkIGZvcm1hdCAoJyArIGUgKyAnIG5vdCAnICsgdCArICcpJywKICAgICAgICAgICAgICAgICAgICAgICdmb3JtYXQuJyArIGUsCiAgICAgICAgICAgICAgICAgICAgICBvW2VdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICBvW2VdKTsKICAgICAgICAgICAgKHQgPSBpKCdzaWduZWQnLCAnYm9vbGVhbicsIHQpKSwgKHIgPSBpKCd3aWR0aCcsICdudW1iZXInLCByKSksIChuID0gaSgnZGVjaW1hbHMnLCAnbnVtYmVyJywgbikpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKHIgJSA4ID09IDAsICdpbnZhbGlkIEZpeGVkTnVtYmVyIHdpZHRoIChub3QgYnl0ZSBhbGlnbmVkKScsICdmb3JtYXQud2lkdGgnLCByKSwKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKG4gPD0gODAsICdpbnZhbGlkIEZpeGVkTnVtYmVyIGRlY2ltYWxzICh0b28gbGFyZ2UpJywgJ2Zvcm1hdC5kZWNpbWFscycsIG4pLAogICAgICAgICAgICB7IHNpZ25lZDogdCwgd2lkdGg6IHIsIGRlY2ltYWxzOiBuLCBuYW1lOiAodCA_ICcnIDogJ3UnKSArICdmaXhlZCcgKyBTdHJpbmcocikgKyAneCcgKyBTdHJpbmcobikgfQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgICAgY2xhc3MgbSB7CiAgICAgICAgICBmb3JtYXQ7CiAgICAgICAgICAjTnQ7CiAgICAgICAgICAjTHQ7CiAgICAgICAgICAjQnQ7CiAgICAgICAgICBfdmFsdWU7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByKSB7CiAgICAgICAgICAgICgwLCBzLmFzc2VydFByaXZhdGUpKGUsIGQsICdGaXhlZE51bWJlcicpLCAodGhpcy4jTHQgPSB0KSwgKHRoaXMuI050ID0gcik7CiAgICAgICAgICAgIGNvbnN0IG4gPSAoZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgICBsZXQgciA9ICcnOwogICAgICAgICAgICAgIGUgPCBjICYmICgociA9ICctJyksIChlICo9IGEpKTsKICAgICAgICAgICAgICBsZXQgbiA9IGUudG9TdHJpbmcoKTsKICAgICAgICAgICAgICBpZiAoMCA9PT0gdCkgcmV0dXJuIHIgKyBuOwogICAgICAgICAgICAgIGZvciAoOyBuLmxlbmd0aCA8PSB0OyApIG4gPSBmICsgbjsKICAgICAgICAgICAgICBjb25zdCBzID0gbi5sZW5ndGggLSB0OwogICAgICAgICAgICAgIGZvciAobiA9IG4uc3Vic3RyaW5nKDAsIHMpICsgJy4nICsgbi5zdWJzdHJpbmcocyk7ICcwJyA9PT0gblswXSAmJiAnLicgIT09IG5bMV07ICkgbiA9IG4uc3Vic3RyaW5nKDEpOwogICAgICAgICAgICAgIGZvciAoOyAnMCcgPT09IG5bbi5sZW5ndGggLSAxXSAmJiAnLicgIT09IG5bbi5sZW5ndGggLSAyXTsgKSBuID0gbi5zdWJzdHJpbmcoMCwgbi5sZW5ndGggLSAxKTsKICAgICAgICAgICAgICByZXR1cm4gciArIG47CiAgICAgICAgICAgIH0pKHQsIHIuZGVjaW1hbHMpOwogICAgICAgICAgICAoMCwgaS5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IGZvcm1hdDogci5uYW1lLCBfdmFsdWU6IG4gfSksICh0aGlzLiNCdCA9IGgoci5kZWNpbWFscykpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IHNpZ25lZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI050LnNpZ25lZDsKICAgICAgICAgIH0KICAgICAgICAgIGdldCB3aWR0aCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI050LndpZHRoOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IGRlY2ltYWxzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jTnQuZGVjaW1hbHM7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgdmFsdWUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNMdDsKICAgICAgICAgIH0KICAgICAgICAgICNDdChlKSB7CiAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9PT0gZS5mb3JtYXQsCiAgICAgICAgICAgICAgJ2luY29tcGF0aWJsZSBmb3JtYXQ7IHVzZSBmaXhlZE51bWJlci50b0Zvcm1hdCcsCiAgICAgICAgICAgICAgJ290aGVyJywKICAgICAgICAgICAgICBlCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICAja3QoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKGUgPSBnKGUsIHRoaXMuI050LCB0KSksIG5ldyBtKGQsIGUsIHRoaXMuI050KTsKICAgICAgICAgIH0KICAgICAgICAgICNJdChlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNDdChlKSwgdGhpcy4ja3QodGhpcy4jTHQgKyBlLiNMdCwgdCk7CiAgICAgICAgICB9CiAgICAgICAgICBhZGRVbnNhZmUoZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jSXQoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBhZGQoZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jSXQoZSwgJ2FkZCcpOwogICAgICAgICAgfQogICAgICAgICAgI0Z0KGUsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0N0KGUpLCB0aGlzLiNrdCh0aGlzLiNMdCAtIGUuI0x0LCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN1YlVuc2FmZShlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNGdChlKTsKICAgICAgICAgIH0KICAgICAgICAgIHN1YihlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNGdChlLCAnc3ViJyk7CiAgICAgICAgICB9CiAgICAgICAgICAjTXQoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jQ3QoZSksIHRoaXMuI2t0KCh0aGlzLiNMdCAqIGUuI0x0KSAvIHRoaXMuI0J0LCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIG11bFVuc2FmZShlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNNdChlKTsKICAgICAgICAgIH0KICAgICAgICAgIG11bChlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNNdChlLCAnbXVsJyk7CiAgICAgICAgICB9CiAgICAgICAgICBtdWxTaWduYWwoZSkgewogICAgICAgICAgICB0aGlzLiNDdChlKTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuI0x0ICogZS4jTHQ7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIHMuYXNzZXJ0KSh0ICUgdGhpcy4jQnQgPT09IGMsICdwcmVjaXNpb24gbG9zdCBkdXJpbmcgc2lnbmFsbGluZyBtdWwnLCAnTlVNRVJJQ19GQVVMVCcsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ211bFNpZ25hbCcsCiAgICAgICAgICAgICAgICBmYXVsdDogJ3VuZGVyZmxvdycsCiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHRoaXMuI2t0KHQgLyB0aGlzLiNCdCwgJ211bFNpZ25hbCcpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICAjSnQoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBzLmFzc2VydCkoZS4jTHQgIT09IGMsICdkaXZpc2lvbiBieSB6ZXJvJywgJ05VTUVSSUNfRkFVTFQnLCB7CiAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdkaXYnLAogICAgICAgICAgICAgICAgZmF1bHQ6ICdkaXZpZGUtYnktemVybycsCiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHRoaXMuI0N0KGUpLAogICAgICAgICAgICAgIHRoaXMuI2t0KCh0aGlzLiNMdCAqIHRoaXMuI0J0KSAvIGUuI0x0LCB0KQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgZGl2VW5zYWZlKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0p0KGUpOwogICAgICAgICAgfQogICAgICAgICAgZGl2KGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0p0KGUsICdkaXYnKTsKICAgICAgICAgIH0KICAgICAgICAgIGRpdlNpZ25hbChlKSB7CiAgICAgICAgICAgICgwLCBzLmFzc2VydCkoZS4jTHQgIT09IGMsICdkaXZpc2lvbiBieSB6ZXJvJywgJ05VTUVSSUNfRkFVTFQnLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnZGl2JywKICAgICAgICAgICAgICBmYXVsdDogJ2RpdmlkZS1ieS16ZXJvJywKICAgICAgICAgICAgICB2YWx1ZTogdGhpcwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB0aGlzLiNDdChlKTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuI0x0ICogdGhpcy4jQnQ7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIHMuYXNzZXJ0KSh0ICUgZS4jTHQgPT09IGMsICdwcmVjaXNpb24gbG9zdCBkdXJpbmcgc2lnbmFsbGluZyBkaXYnLCAnTlVNRVJJQ19GQVVMVCcsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2RpdlNpZ25hbCcsCiAgICAgICAgICAgICAgICBmYXVsdDogJ3VuZGVyZmxvdycsCiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHRoaXMuI2t0KHQgLyBlLiNMdCwgJ2RpdlNpZ25hbCcpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBjbXAoZSkgewogICAgICAgICAgICBsZXQgdCA9IHRoaXMudmFsdWUsCiAgICAgICAgICAgICAgciA9IGUudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmRlY2ltYWxzIC0gZS5kZWNpbWFsczsKICAgICAgICAgICAgcmV0dXJuIG4gPiAwID8gKHIgKj0gaChuKSkgOiBuIDwgMCAmJiAodCAqPSBoKC1uKSksIHQgPCByID8gLTEgOiB0ID4gciA_IDEgOiAwOwogICAgICAgICAgfQogICAgICAgICAgZXEoZSkgewogICAgICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5jbXAoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBsdChlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNtcChlKSA8IDA7CiAgICAgICAgICB9CiAgICAgICAgICBsdGUoZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jbXAoZSkgPD0gMDsKICAgICAgICAgIH0KICAgICAgICAgIGd0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY21wKGUpID4gMDsKICAgICAgICAgIH0KICAgICAgICAgIGd0ZShlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNtcChlKSA-PSAwOwogICAgICAgICAgfQogICAgICAgICAgZmxvb3IoKSB7CiAgICAgICAgICAgIGxldCBlID0gdGhpcy4jTHQ7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNMdCA8IGMgJiYgKGUgLT0gdGhpcy4jQnQgLSB1KSwgKGUgPSAodGhpcy4jTHQgLyB0aGlzLiNCdCkgKiB0aGlzLiNCdCksIHRoaXMuI2t0KGUsICdmbG9vcicpOwogICAgICAgICAgfQogICAgICAgICAgY2VpbGluZygpIHsKICAgICAgICAgICAgbGV0IGUgPSB0aGlzLiNMdDsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI0x0ID4gYyAmJiAoZSArPSB0aGlzLiNCdCAtIHUpLCAoZSA9ICh0aGlzLiNMdCAvIHRoaXMuI0J0KSAqIHRoaXMuI0J0KSwgdGhpcy4ja3QoZSwgJ2NlaWxpbmcnKTsKICAgICAgICAgIH0KICAgICAgICAgIHJvdW5kKGUpIHsKICAgICAgICAgICAgaWYgKChudWxsID09IGUgJiYgKGUgPSAwKSwgZSA-PSB0aGlzLmRlY2ltYWxzKSkgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmRlY2ltYWxzIC0gZSwKICAgICAgICAgICAgICByID0gbCAqIGgodCAtIDEpOwogICAgICAgICAgICBsZXQgbiA9IHRoaXMudmFsdWUgKyByOwogICAgICAgICAgICBjb25zdCBzID0gaCh0KTsKICAgICAgICAgICAgcmV0dXJuIChuID0gKG4gLyBzKSAqIHMpLCBnKG4sIHRoaXMuI050LCAncm91bmQnKSwgbmV3IG0oZCwgbiwgdGhpcy4jTnQpOwogICAgICAgICAgfQogICAgICAgICAgaXNaZXJvKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jTHQgPT09IGM7CiAgICAgICAgICB9CiAgICAgICAgICBpc05lZ2F0aXZlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jTHQgPCBjOwogICAgICAgICAgfQogICAgICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTsKICAgICAgICAgIH0KICAgICAgICAgIHRvVW5zYWZlRmxvYXQoKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRoaXMudG9TdHJpbmcoKSk7CiAgICAgICAgICB9CiAgICAgICAgICB0b0Zvcm1hdChlKSB7CiAgICAgICAgICAgIHJldHVybiBtLmZyb21TdHJpbmcodGhpcy50b1N0cmluZygpLCBlKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tVmFsdWUoZSwgdCwgcikgewogICAgICAgICAgICBjb25zdCBuID0gbnVsbCA9PSB0ID8gMCA6ICgwLCBvLmdldE51bWJlcikodCksCiAgICAgICAgICAgICAgaSA9IHAocik7CiAgICAgICAgICAgIGxldCBhID0gKDAsIG8uZ2V0QmlnSW50KShlLCAndmFsdWUnKTsKICAgICAgICAgICAgY29uc3QgdSA9IG4gLSBpLmRlY2ltYWxzOwogICAgICAgICAgICBpZiAodSA-IDApIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gaCh1KTsKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnQpKGEgJSB0ID09PSBjLCAndmFsdWUgbG9zZXMgcHJlY2lzaW9uIGZvciBmb3JtYXQnLCAnTlVNRVJJQ19GQVVMVCcsIHsKICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2Zyb21WYWx1ZScsCiAgICAgICAgICAgICAgICBmYXVsdDogJ3VuZGVyZmxvdycsCiAgICAgICAgICAgICAgICB2YWx1ZTogZQogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgKGEgLz0gdCk7CiAgICAgICAgICAgIH0gZWxzZSB1IDwgMCAmJiAoYSAqPSBoKC11KSk7CiAgICAgICAgICAgIHJldHVybiBnKGEsIGksICdmcm9tVmFsdWUnKSwgbmV3IG0oZCwgYSwgaSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZnJvbVN0cmluZyhlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSBlLm1hdGNoKC9eKC0_KShbMC05XSopXC4_KFswLTldKikkLyk7CiAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KShyICYmIHJbMl0ubGVuZ3RoICsgclszXS5sZW5ndGggPiAwLCAnaW52YWxpZCBGaXhlZE51bWJlciBzdHJpbmcgdmFsdWUnLCAndmFsdWUnLCBlKTsKICAgICAgICAgICAgY29uc3QgbiA9IHAodCk7CiAgICAgICAgICAgIGxldCBvID0gclsyXSB8fCAnMCcsCiAgICAgICAgICAgICAgaSA9IHJbM10gfHwgJyc7CiAgICAgICAgICAgIGZvciAoOyBpLmxlbmd0aCA8IG4uZGVjaW1hbHM7ICkgaSArPSBmOwogICAgICAgICAgICAoMCwgcy5hc3NlcnQpKGkuc3Vic3RyaW5nKG4uZGVjaW1hbHMpLm1hdGNoKC9eMCokLyksICd0b28gbWFueSBkZWNpbWFscyBmb3IgZm9ybWF0JywgJ05VTUVSSUNfRkFVTFQnLCB7CiAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnZnJvbVN0cmluZycsCiAgICAgICAgICAgICAgZmF1bHQ6ICd1bmRlcmZsb3cnLAogICAgICAgICAgICAgIHZhbHVlOiBlCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIChpID0gaS5zdWJzdHJpbmcoMCwgbi5kZWNpbWFscykpOwogICAgICAgICAgICBjb25zdCBhID0gQmlnSW50KHJbMV0gKyBvICsgaSk7CiAgICAgICAgICAgIHJldHVybiBnKGEsIG4sICdmcm9tU3RyaW5nJyksIG5ldyBtKGQsIGEsIG4pOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb21CeXRlcyhlLCB0KSB7CiAgICAgICAgICAgIGxldCByID0gKDAsIG8udG9CaWdJbnQpKCgwLCBuLmdldEJ5dGVzKShlLCAndmFsdWUnKSk7CiAgICAgICAgICAgIGNvbnN0IHMgPSBwKHQpOwogICAgICAgICAgICByZXR1cm4gcy5zaWduZWQgJiYgKHIgPSAoMCwgby5mcm9tVHdvcykociwgcy53aWR0aCkpLCBnKHIsIHMsICdmcm9tQnl0ZXMnKSwgbmV3IG0oZCwgciwgcyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuRml4ZWROdW1iZXIgPSBtOwogICAgICB9LAogICAgICA4NzY4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5nZXRVcmwgPSB0LmNyZWF0ZUdldFVybCA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoMTU5MiksCiAgICAgICAgICBzID0gbi5fX2ltcG9ydERlZmF1bHQocig2MTM2KSksCiAgICAgICAgICBvID0gbi5fX2ltcG9ydERlZmF1bHQocigxMjU2KSksCiAgICAgICAgICBpID0gcig1OTIpLAogICAgICAgICAgYSA9IHIoNTA0NCksCiAgICAgICAgICBjID0gcig2MTYzKTsKICAgICAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiAodCwgcikgewogICAgICAgICAgICBjb25zdCBuID0gdC51cmwuc3BsaXQoJzonKVswXS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAoMCwgYS5hc3NlcnQpKCdodHRwJyA9PT0gbiB8fCAnaHR0cHMnID09PSBuLCBgdW5zdXBwb3J0ZWQgcHJvdG9jb2wgJHtufWAsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgaW5mbzogeyBwcm90b2NvbDogbiB9LAogICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3JlcXVlc3QnCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICgwLCBhLmFzc2VydCkoCiAgICAgICAgICAgICAgICAnaHR0cHMnID09PSBuIHx8ICF0LmNyZWRlbnRpYWxzIHx8IHQuYWxsb3dJbnNlY3VyZUF1dGhlbnRpY2F0aW9uLAogICAgICAgICAgICAgICAgJ2luc2VjdXJlIGF1dGhvcml6ZWQgY29ubmVjdGlvbnMgdW5zdXBwb3J0ZWQnLAogICAgICAgICAgICAgICAgJ1VOU1VQUE9SVEVEX09QRVJBVElPTicsCiAgICAgICAgICAgICAgICB7IG9wZXJhdGlvbjogJ3JlcXVlc3QnIH0KICAgICAgICAgICAgICApOwogICAgICAgICAgICBjb25zdCB1ID0geyBtZXRob2Q6IHQubWV0aG9kLCBoZWFkZXJzOiBPYmplY3QuYXNzaWduKHt9LCB0LmhlYWRlcnMpIH07CiAgICAgICAgICAgIGUgJiYgZS5hZ2VudCAmJiAodS5hZ2VudCA9IGUuYWdlbnQpOwogICAgICAgICAgICBjb25zdCBsID0gKCdodHRwJyA9PT0gbiA_IHMuZGVmYXVsdCA6IG8uZGVmYXVsdCkucmVxdWVzdCh0LnVybCwgdSk7CiAgICAgICAgICAgIGwuc2V0VGltZW91dCh0LnRpbWVvdXQpOwogICAgICAgICAgICBjb25zdCBkID0gdC5ib2R5OwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgIGQgJiYgbC53cml0ZShCdWZmZXIuZnJvbShkKSksCiAgICAgICAgICAgICAgbC5lbmQoKSwKICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgoZSwgdCkgPT4gewogICAgICAgICAgICAgICAgbC5vbmNlKCdyZXNwb25zZScsIChuKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLnN0YXR1c0NvZGUgfHwgMCwKICAgICAgICAgICAgICAgICAgICBvID0gbi5zdGF0dXNNZXNzYWdlIHx8ICcnLAogICAgICAgICAgICAgICAgICAgIGEgPSBPYmplY3Qua2V5cyhuLmhlYWRlcnMgfHwge30pLnJlZHVjZSgoZSwgdCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSBuLmhlYWRlcnNbdF0gfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyKSAmJiAociA9IHIuam9pbignLCAnKSksIChlW3RdID0gciksIGU7CiAgICAgICAgICAgICAgICAgICAgfSwge30pOwogICAgICAgICAgICAgICAgICBsZXQgdSA9IG51bGw7CiAgICAgICAgICAgICAgICAgIG4ub24oJ2RhdGEnLCAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyKQogICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgci5jaGVja1NpZ25hbCgpOwogICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdChlKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB1KSB1ID0gZTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgVWludDhBcnJheSh1Lmxlbmd0aCArIGUubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgIHQuc2V0KHUsIDApLCB0LnNldChlLCB1Lmxlbmd0aCksICh1ID0gdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBuLm9uKCdlbmQnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAnZ3ppcCcgPT09IGFbJ2NvbnRlbnQtZW5jb2RpbmcnXSAmJiB1ICYmICh1ID0gKDAsIGMuZ2V0Qnl0ZXMpKCgwLCBpLmd1bnppcFN5bmMpKHUpKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGUoeyBzdGF0dXNDb2RlOiBzLCBzdGF0dXNNZXNzYWdlOiBvLCBoZWFkZXJzOiBhLCBib2R5OiB1IH0pOwogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIG4ub24oJ2Vycm9yJywgKGUpID0-IHsKICAgICAgICAgICAgICAgICAgICAgIChlLnJlc3BvbnNlID0geyBzdGF0dXNDb2RlOiBzLCBzdGF0dXNNZXNzYWdlOiBvLCBoZWFkZXJzOiBhLCBib2R5OiB1IH0pLCB0KGUpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGwub24oJ2Vycm9yJywgKGUpID0-IHsKICAgICAgICAgICAgICAgICAgICB0KGUpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICApOwogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgdC5jcmVhdGVHZXRVcmwgPSB1OwogICAgICAgIGNvbnN0IGwgPSB1KHt9KTsKICAgICAgICB0LmdldFVybCA9IGFzeW5jIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gbChlLCB0KTsKICAgICAgICB9OwogICAgICB9LAogICAgICA1MzE2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQudG9VdGY4U3RyaW5nID0KICAgICAgICAgICAgdC50b1V0ZjhDb2RlUG9pbnRzID0KICAgICAgICAgICAgdC50b1V0ZjhCeXRlcyA9CiAgICAgICAgICAgIHQucGFyc2VVbml0cyA9CiAgICAgICAgICAgIHQuZm9ybWF0VW5pdHMgPQogICAgICAgICAgICB0LnBhcnNlRXRoZXIgPQogICAgICAgICAgICB0LmZvcm1hdEV0aGVyID0KICAgICAgICAgICAgdC5lbmNvZGVSbHAgPQogICAgICAgICAgICB0LmRlY29kZVJscCA9CiAgICAgICAgICAgIHQuZGVmaW5lUHJvcGVydGllcyA9CiAgICAgICAgICAgIHQucmVzb2x2ZVByb3BlcnRpZXMgPQogICAgICAgICAgICB0LnRvUXVhbnRpdHkgPQogICAgICAgICAgICB0LnRvQmVBcnJheSA9CiAgICAgICAgICAgIHQudG9CZUhleCA9CiAgICAgICAgICAgIHQudG9OdW1iZXIgPQogICAgICAgICAgICB0LnRvQmlnSW50ID0KICAgICAgICAgICAgdC5nZXRVaW50ID0KICAgICAgICAgICAgdC5nZXROdW1iZXIgPQogICAgICAgICAgICB0LmdldEJpZ0ludCA9CiAgICAgICAgICAgIHQubWFzayA9CiAgICAgICAgICAgIHQudG9Ud29zID0KICAgICAgICAgICAgdC5mcm9tVHdvcyA9CiAgICAgICAgICAgIHQuRml4ZWROdW1iZXIgPQogICAgICAgICAgICB0LkZldGNoQ2FuY2VsU2lnbmFsID0KICAgICAgICAgICAgdC5GZXRjaFJlc3BvbnNlID0KICAgICAgICAgICAgdC5GZXRjaFJlcXVlc3QgPQogICAgICAgICAgICB0LkV2ZW50UGF5bG9hZCA9CiAgICAgICAgICAgIHQubWFrZUVycm9yID0KICAgICAgICAgICAgdC5hc3NlcnROb3JtYWxpemUgPQogICAgICAgICAgICB0LmFzc2VydFByaXZhdGUgPQogICAgICAgICAgICB0LmFzc2VydEFyZ3VtZW50Q291bnQgPQogICAgICAgICAgICB0LmFzc2VydEFyZ3VtZW50ID0KICAgICAgICAgICAgdC5hc3NlcnQgPQogICAgICAgICAgICB0LmlzRXJyb3IgPQogICAgICAgICAgICB0LmlzQ2FsbEV4Y2VwdGlvbiA9CiAgICAgICAgICAgIHQuemVyb1BhZEJ5dGVzID0KICAgICAgICAgICAgdC56ZXJvUGFkVmFsdWUgPQogICAgICAgICAgICB0LnN0cmlwWmVyb3NMZWZ0ID0KICAgICAgICAgICAgdC5kYXRhU2xpY2UgPQogICAgICAgICAgICB0LmRhdGFMZW5ndGggPQogICAgICAgICAgICB0LmNvbmNhdCA9CiAgICAgICAgICAgIHQuaGV4bGlmeSA9CiAgICAgICAgICAgIHQuaXNCeXRlc0xpa2UgPQogICAgICAgICAgICB0LmlzSGV4U3RyaW5nID0KICAgICAgICAgICAgdC5nZXRCeXRlc0NvcHkgPQogICAgICAgICAgICB0LmdldEJ5dGVzID0KICAgICAgICAgICAgdC5lbmNvZGVCYXNlNjQgPQogICAgICAgICAgICB0LmRlY29kZUJhc2U2NCA9CiAgICAgICAgICAgIHQuZW5jb2RlQmFzZTU4ID0KICAgICAgICAgICAgdC5kZWNvZGVCYXNlNTggPQogICAgICAgICAgICAgIHZvaWQgMCksCiAgICAgICAgICAodC51dWlkVjQgPSB0LlV0ZjhFcnJvckZ1bmNzID0gdm9pZCAwKTsKICAgICAgICB2YXIgbiA9IHIoNDkxMik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkZWNvZGVCYXNlNTgnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbi5kZWNvZGVCYXNlNTg7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2VuY29kZUJhc2U1OCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBuLmVuY29kZUJhc2U1ODsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIHMgPSByKDQ4OCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkZWNvZGVCYXNlNjQnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcy5kZWNvZGVCYXNlNjQ7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2VuY29kZUJhc2U2NCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLmVuY29kZUJhc2U2NDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIG8gPSByKDYxNjMpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0Qnl0ZXMnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gby5nZXRCeXRlczsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0Qnl0ZXNDb3B5JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uZ2V0Qnl0ZXNDb3B5OwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaXNIZXhTdHJpbmcnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5pc0hleFN0cmluZzsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2lzQnl0ZXNMaWtlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uaXNCeXRlc0xpa2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdoZXhsaWZ5JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uaGV4bGlmeTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2NvbmNhdCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLmNvbmNhdDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RhdGFMZW5ndGgnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5kYXRhTGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZGF0YVNsaWNlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uZGF0YVNsaWNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnc3RyaXBaZXJvc0xlZnQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gby5zdHJpcFplcm9zTGVmdDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3plcm9QYWRWYWx1ZScsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLnplcm9QYWRWYWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3plcm9QYWRCeXRlcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBvLnplcm9QYWRCeXRlczsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGkgPSByKDUwNDQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnaXNDYWxsRXhjZXB0aW9uJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuaXNDYWxsRXhjZXB0aW9uOwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdpc0Vycm9yJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuaXNFcnJvcjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Fzc2VydCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBpLmFzc2VydDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Fzc2VydEFyZ3VtZW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuYXNzZXJ0QXJndW1lbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdhc3NlcnRBcmd1bWVudENvdW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuYXNzZXJ0QXJndW1lbnRDb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2Fzc2VydFByaXZhdGUnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5hc3NlcnRQcml2YXRlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnYXNzZXJ0Tm9ybWFsaXplJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuYXNzZXJ0Tm9ybWFsaXplOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnbWFrZUVycm9yJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkubWFrZUVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgYSA9IHIoMjAyNCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdFdmVudFBheWxvYWQnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYS5FdmVudFBheWxvYWQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGMgPSByKDUyNDgpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnRmV0Y2hSZXF1ZXN0JywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGMuRmV0Y2hSZXF1ZXN0OwogICAgICAgICAgfQogICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdGZXRjaFJlc3BvbnNlJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGMuRmV0Y2hSZXNwb25zZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0ZldGNoQ2FuY2VsU2lnbmFsJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGMuRmV0Y2hDYW5jZWxTaWduYWw7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciB1ID0gcigyOTIwKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0ZpeGVkTnVtYmVyJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHUuRml4ZWROdW1iZXI7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGwgPSByKDU0NDApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZnJvbVR3b3MnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gbC5mcm9tVHdvczsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndG9Ud29zJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwudG9Ud29zOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnbWFzaycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLm1hc2s7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdnZXRCaWdJbnQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5nZXRCaWdJbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdnZXROdW1iZXInLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC5nZXROdW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdnZXRVaW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwuZ2V0VWludDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3RvQmlnSW50JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwudG9CaWdJbnQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b051bWJlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLnRvTnVtYmVyOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndG9CZUhleCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBsLnRvQmVIZXg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b0JlQXJyYXknLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gbC50b0JlQXJyYXk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICd0b1F1YW50aXR5JywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGwudG9RdWFudGl0eTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGQgPSByKDQ3NDQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncmVzb2x2ZVByb3BlcnRpZXMnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZC5yZXNvbHZlUHJvcGVydGllczsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZGVmaW5lUHJvcGVydGllcycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBkLmRlZmluZVByb3BlcnRpZXM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBmID0gcig3ODU2KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RlY29kZVJscCcsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBmLmRlY29kZVJscDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgaCA9IHIoNTg2OCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdlbmNvZGVSbHAnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gaC5lbmNvZGVSbHA7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGcgPSByKDg3ODQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZm9ybWF0RXRoZXInLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZy5mb3JtYXRFdGhlcjsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncGFyc2VFdGhlcicsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBnLnBhcnNlRXRoZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdmb3JtYXRVbml0cycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBnLmZvcm1hdFVuaXRzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAncGFyc2VVbml0cycsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBnLnBhcnNlVW5pdHM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBwID0gcigxMDg4KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3RvVXRmOEJ5dGVzJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHAudG9VdGY4Qnl0ZXM7CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3RvVXRmOENvZGVQb2ludHMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcC50b1V0ZjhDb2RlUG9pbnRzOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndG9VdGY4U3RyaW5nJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHAudG9VdGY4U3RyaW5nOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnVXRmOEVycm9yRnVuY3MnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcC5VdGY4RXJyb3JGdW5jczsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIG0gPSByKDk5NTYpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAndXVpZFY0JywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG0udXVpZFY0OwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LAogICAgICA1NDQwOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQudG9RdWFudGl0eSA9CiAgICAgICAgICAgIHQudG9CZUFycmF5ID0KICAgICAgICAgICAgdC50b0JlSGV4ID0KICAgICAgICAgICAgdC50b051bWJlciA9CiAgICAgICAgICAgIHQuZ2V0TnVtYmVyID0KICAgICAgICAgICAgdC50b0JpZ0ludCA9CiAgICAgICAgICAgIHQuZ2V0VWludCA9CiAgICAgICAgICAgIHQuZ2V0QmlnSW50ID0KICAgICAgICAgICAgdC5tYXNrID0KICAgICAgICAgICAgdC50b1R3b3MgPQogICAgICAgICAgICB0LmZyb21Ud29zID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDYxNjMpLAogICAgICAgICAgcyA9IHIoNTA0NCksCiAgICAgICAgICBvID0gQmlnSW50KDApLAogICAgICAgICAgaSA9IEJpZ0ludCgxKSwKICAgICAgICAgIGEgPSA5MDA3MTk5MjU0NzQwOTkxOwogICAgICAgIGZ1bmN0aW9uIGMoZSwgdCkgewogICAgICAgICAgc3dpdGNoICh0eXBlb2YgZSkgewogICAgICAgICAgICBjYXNlICdiaWdpbnQnOgogICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICBjYXNlICdudW1iZXInOgogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoTnVtYmVyLmlzSW50ZWdlcihlKSwgJ3VuZGVyZmxvdycsIHQgfHwgJ3ZhbHVlJywgZSksCiAgICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoZSA-PSAtYSAmJiBlIDw9IGEsICdvdmVyZmxvdycsIHQgfHwgJ3ZhbHVlJywgZSksCiAgICAgICAgICAgICAgICBCaWdJbnQoZSkKICAgICAgICAgICAgICApOwogICAgICAgICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoJycgPT09IGUpIHRocm93IG5ldyBFcnJvcignZW1wdHkgc3RyaW5nJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gJy0nID09PSBlWzBdICYmICctJyAhPT0gZVsxXSA_IC1CaWdJbnQoZS5zdWJzdHJpbmcoMSkpIDogQmlnSW50KGUpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSghMSwgYGludmFsaWQgQmlnTnVtYmVyaXNoIHN0cmluZzogJHtyLm1lc3NhZ2V9YCwgdCB8fCAndmFsdWUnLCBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIEJpZ051bWJlcmlzaCB2YWx1ZScsIHQgfHwgJ3ZhbHVlJywgZSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHUoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IGMoZSwgdCk7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoMCwgcy5hc3NlcnQpKHIgPj0gbywgJ3Vuc2lnbmVkIHZhbHVlIGNhbm5vdCBiZSBuZWdhdGl2ZScsICdOVU1FUklDX0ZBVUxUJywgewogICAgICAgICAgICAgIGZhdWx0OiAnb3ZlcmZsb3cnLAogICAgICAgICAgICAgIG9wZXJhdGlvbjogJ2dldFVpbnQnLAogICAgICAgICAgICAgIHZhbHVlOiBlCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICByCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICAodC5mcm9tVHdvcyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICBjb25zdCByID0gdShlLCAndmFsdWUnKSwKICAgICAgICAgICAgbiA9IEJpZ0ludChmKHQsICd3aWR0aCcpKTsKICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICgwLCBzLmFzc2VydCkociA-PiBuID09PSBvLCAnb3ZlcmZsb3cnLCAnTlVNRVJJQ19GQVVMVCcsIHsKICAgICAgICAgICAgICBvcGVyYXRpb246ICdmcm9tVHdvcycsCiAgICAgICAgICAgICAgZmF1bHQ6ICdvdmVyZmxvdycsCiAgICAgICAgICAgICAgdmFsdWU6IGUKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHIgPj4gKG4gLSBpKSA_IC0oKH5yICYgKChpIDw8IG4pIC0gaSkpICsgaSkgOiByCiAgICAgICAgICApOwogICAgICAgIH0pLAogICAgICAgICAgKHQudG9Ud29zID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgbGV0IHIgPSBjKGUsICd2YWx1ZScpOwogICAgICAgICAgICBjb25zdCBuID0gQmlnSW50KGYodCwgJ3dpZHRoJykpLAogICAgICAgICAgICAgIGEgPSBpIDw8IChuIC0gaSk7CiAgICAgICAgICAgIHJldHVybiByIDwgbwogICAgICAgICAgICAgID8gKChyID0gLXIpLAogICAgICAgICAgICAgICAgKDAsIHMuYXNzZXJ0KShyIDw9IGEsICd0b28gbG93JywgJ05VTUVSSUNfRkFVTFQnLCB7IG9wZXJhdGlvbjogJ3RvVHdvcycsIGZhdWx0OiAnb3ZlcmZsb3cnLCB2YWx1ZTogZSB9KSwKICAgICAgICAgICAgICAgICh-ciAmICgoaSA8PCBuKSAtIGkpKSArIGkpCiAgICAgICAgICAgICAgOiAoKDAsIHMuYXNzZXJ0KShyIDwgYSwgJ3RvbyBoaWdoJywgJ05VTUVSSUNfRkFVTFQnLCB7CiAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3RvVHdvcycsCiAgICAgICAgICAgICAgICAgIGZhdWx0OiAnb3ZlcmZsb3cnLAogICAgICAgICAgICAgICAgICB2YWx1ZTogZQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICByKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQubWFzayA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSB1KGUsICd2YWx1ZScpLAogICAgICAgICAgICAgIG4gPSBCaWdJbnQoZih0LCAnYml0cycpKTsKICAgICAgICAgICAgcmV0dXJuIHIgJiAoKGkgPDwgbikgLSBpKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZ2V0QmlnSW50ID0gYyksCiAgICAgICAgICAodC5nZXRVaW50ID0gdSk7CiAgICAgICAgY29uc3QgbCA9ICcwMTIzNDU2Nzg5YWJjZGVmJzsKICAgICAgICBmdW5jdGlvbiBkKGUpIHsKICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVWludDhBcnJheSkgewogICAgICAgICAgICBsZXQgdCA9ICcweDAnOwogICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZSkgKHQgKz0gbFtyID4-IDRdKSwgKHQgKz0gbFsxNSAmIHJdKTsKICAgICAgICAgICAgcmV0dXJuIEJpZ0ludCh0KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBjKGUpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmKGUsIHQpIHsKICAgICAgICAgIHN3aXRjaCAodHlwZW9mIGUpIHsKICAgICAgICAgICAgY2FzZSAnYmlnaW50JzoKICAgICAgICAgICAgICByZXR1cm4gKDAsIHMuYXNzZXJ0QXJndW1lbnQpKGUgPj0gLWEgJiYgZSA8PSBhLCAnb3ZlcmZsb3cnLCB0IHx8ICd2YWx1ZScsIGUpLCBOdW1iZXIoZSk7CiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6CiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KShOdW1iZXIuaXNJbnRlZ2VyKGUpLCAndW5kZXJmbG93JywgdCB8fCAndmFsdWUnLCBlKSwKICAgICAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KShlID49IC1hICYmIGUgPD0gYSwgJ292ZXJmbG93JywgdCB8fCAndmFsdWUnLCBlKSwKICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICApOwogICAgICAgICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoJycgPT09IGUpIHRocm93IG5ldyBFcnJvcignZW1wdHkgc3RyaW5nJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZihCaWdJbnQoZSksIHQpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHsKICAgICAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSghMSwgYGludmFsaWQgbnVtZXJpYyBzdHJpbmc6ICR7ci5tZXNzYWdlfWAsIHQgfHwgJ3ZhbHVlJywgZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCBudW1lcmljIHZhbHVlJywgdCB8fCAndmFsdWUnLCBlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaChlKSB7CiAgICAgICAgICBjb25zdCB0ID0gdShlLCAndmFsdWUnKTsKICAgICAgICAgIGlmICh0ID09PSBvKSByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoW10pOwogICAgICAgICAgbGV0IHIgPSB0LnRvU3RyaW5nKDE2KTsKICAgICAgICAgIHIubGVuZ3RoICUgMiAmJiAociA9ICcwJyArIHIpOwogICAgICAgICAgY29uc3QgbiA9IG5ldyBVaW50OEFycmF5KHIubGVuZ3RoIC8gMik7CiAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IG4ubGVuZ3RoOyBlKyspIHsKICAgICAgICAgICAgY29uc3QgdCA9IDIgKiBlOwogICAgICAgICAgICBuW2VdID0gcGFyc2VJbnQoci5zdWJzdHJpbmcodCwgdCArIDIpLCAxNik7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9CiAgICAgICAgKHQudG9CaWdJbnQgPSBkKSwKICAgICAgICAgICh0LmdldE51bWJlciA9IGYpLAogICAgICAgICAgKHQudG9OdW1iZXIgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gZihkKGUpKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQudG9CZUhleCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIGxldCByID0gdShlLCAndmFsdWUnKS50b1N0cmluZygxNik7CiAgICAgICAgICAgIGlmIChudWxsID09IHQpIHIubGVuZ3RoICUgMiAmJiAociA9ICcwJyArIHIpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBjb25zdCBuID0gZih0LCAnd2lkdGgnKTsKICAgICAgICAgICAgICBmb3IgKAogICAgICAgICAgICAgICAgKDAsIHMuYXNzZXJ0KSgyICogbiA-PSByLmxlbmd0aCwgYHZhbHVlIGV4Y2VlZHMgd2lkdGggKCR7bn0gYnl0ZXMpYCwgJ05VTUVSSUNfRkFVTFQnLCB7CiAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogJ3RvQmVIZXgnLAogICAgICAgICAgICAgICAgICBmYXVsdDogJ292ZXJmbG93JywKICAgICAgICAgICAgICAgICAgdmFsdWU6IGUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgci5sZW5ndGggPCAyICogbjsKCiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgciA9ICcwJyArIHI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICcweCcgKyByOwogICAgICAgICAgfSksCiAgICAgICAgICAodC50b0JlQXJyYXkgPSBoKSwKICAgICAgICAgICh0LnRvUXVhbnRpdHkgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBsZXQgdCA9ICgwLCBuLmhleGxpZnkpKCgwLCBuLmlzQnl0ZXNMaWtlKShlKSA_IGUgOiBoKGUpKS5zdWJzdHJpbmcoMik7CiAgICAgICAgICAgIGZvciAoOyB0LnN0YXJ0c1dpdGgoJzAnKTsgKSB0ID0gdC5zdWJzdHJpbmcoMSk7CiAgICAgICAgICAgIHJldHVybiAnJyA9PT0gdCAmJiAodCA9ICcwJyksICcweCcgKyB0OwogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDQ3NDQ6IChlLCB0KSA9PiB7CiAgICAgICAgZnVuY3Rpb24gcihlLCB0LCByKSB7CiAgICAgICAgICBjb25zdCBuID0gdC5zcGxpdCgnfCcpLm1hcCgoZSkgPT4gZS50cmltKCkpOwogICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBuLmxlbmd0aDsgcisrKQogICAgICAgICAgICBzd2l0Y2ggKHQpIHsKICAgICAgICAgICAgICBjYXNlICdhbnknOgogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIGNhc2UgJ2JpZ2ludCc6CiAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6CiAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSB0KSByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRXJyb3IoYGludmFsaWQgdmFsdWUgZm9yIHR5cGUgJHt0fWApOwogICAgICAgICAgdGhyb3cgKChzLmNvZGUgPSAnSU5WQUxJRF9BUkdVTUVOVCcpLCAocy5hcmd1bWVudCA9IGB2YWx1ZS4ke3J9YCksIChzLnZhbHVlID0gZSksIHMpOwogICAgICAgIH0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LmRlZmluZVByb3BlcnRpZXMgPSB0LnJlc29sdmVQcm9wZXJ0aWVzID0gdm9pZCAwKSwKICAgICAgICAgICh0LnJlc29sdmVQcm9wZXJ0aWVzID0gYXN5bmMgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9IE9iamVjdC5rZXlzKGUpOwogICAgICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKHQubWFwKCh0KSA9PiBQcm9taXNlLnJlc29sdmUoZVt0XSkpKSkucmVkdWNlKChlLCByLCBuKSA9PiAoKGVbdFtuXV0gPSByKSwgZSksIHt9KTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZGVmaW5lUHJvcGVydGllcyA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICAgIGZvciAobGV0IHMgaW4gdCkgewogICAgICAgICAgICAgIGxldCBvID0gdFtzXTsKICAgICAgICAgICAgICBjb25zdCBpID0gbiA_IG5bc10gOiBudWxsOwogICAgICAgICAgICAgIGkgJiYgcihvLCBpLCBzKSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHMsIHsgZW51bWVyYWJsZTogITAsIHZhbHVlOiBvLCB3cml0YWJsZTogITEgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA3ODU2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5kZWNvZGVSbHAgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDYxNjMpLAogICAgICAgICAgcyA9IHIoNTA0NCksCiAgICAgICAgICBvID0gcig2MTYzKTsKICAgICAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgICAgIGxldCB0ID0gZS50b1N0cmluZygxNik7CiAgICAgICAgICBmb3IgKDsgdC5sZW5ndGggPCAyOyApIHQgPSAnMCcgKyB0OwogICAgICAgICAgcmV0dXJuICcweCcgKyB0OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhKGUsIHQsIHIpIHsKICAgICAgICAgIGxldCBuID0gMDsKICAgICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgcjsgcysrKSBuID0gMjU2ICogbiArIGVbdCArIHNdOwogICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGMoZSwgdCwgciwgbikgewogICAgICAgICAgY29uc3QgbyA9IFtdOwogICAgICAgICAgZm9yICg7IHIgPCB0ICsgMSArIG47ICkgewogICAgICAgICAgICBjb25zdCBpID0gdShlLCByKTsKICAgICAgICAgICAgby5wdXNoKGkucmVzdWx0KSwKICAgICAgICAgICAgICAociArPSBpLmNvbnN1bWVkKSwKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnQpKHIgPD0gdCArIDEgKyBuLCAnY2hpbGQgZGF0YSB0b28gc2hvcnQnLCAnQlVGRkVSX09WRVJSVU4nLCB7CiAgICAgICAgICAgICAgICBidWZmZXI6IGUsCiAgICAgICAgICAgICAgICBsZW5ndGg6IG4sCiAgICAgICAgICAgICAgICBvZmZzZXQ6IHQKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB7IGNvbnN1bWVkOiAxICsgbiwgcmVzdWx0OiBvIH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHUoZSwgdCkgewogICAgICAgICAgKDAsIHMuYXNzZXJ0KSgwICE9PSBlLmxlbmd0aCwgJ2RhdGEgdG9vIHNob3J0JywgJ0JVRkZFUl9PVkVSUlVOJywgeyBidWZmZXI6IGUsIGxlbmd0aDogMCwgb2Zmc2V0OiAxIH0pOwogICAgICAgICAgY29uc3QgciA9ICh0KSA9PiB7CiAgICAgICAgICAgICgwLCBzLmFzc2VydCkodCA8PSBlLmxlbmd0aCwgJ2RhdGEgc2hvcnQgc2VnbWVudCB0b28gc2hvcnQnLCAnQlVGRkVSX09WRVJSVU4nLCB7CiAgICAgICAgICAgICAgYnVmZmVyOiBlLAogICAgICAgICAgICAgIGxlbmd0aDogZS5sZW5ndGgsCiAgICAgICAgICAgICAgb2Zmc2V0OiB0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKICAgICAgICAgIGlmIChlW3RdID49IDI0OCkgewogICAgICAgICAgICBjb25zdCBuID0gZVt0XSAtIDI0NzsKICAgICAgICAgICAgcih0ICsgMSArIG4pOwogICAgICAgICAgICBjb25zdCBzID0gYShlLCB0ICsgMSwgbik7CiAgICAgICAgICAgIHJldHVybiByKHQgKyAxICsgbiArIHMpLCBjKGUsIHQsIHQgKyAxICsgbiwgbiArIHMpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGVbdF0gPj0gMTkyKSB7CiAgICAgICAgICAgIGNvbnN0IG4gPSBlW3RdIC0gMTkyOwogICAgICAgICAgICByZXR1cm4gcih0ICsgMSArIG4pLCBjKGUsIHQsIHQgKyAxLCBuKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlW3RdID49IDE4NCkgewogICAgICAgICAgICBjb25zdCBzID0gZVt0XSAtIDE4MzsKICAgICAgICAgICAgcih0ICsgMSArIHMpOwogICAgICAgICAgICBjb25zdCBvID0gYShlLCB0ICsgMSwgcyk7CiAgICAgICAgICAgIHJldHVybiByKHQgKyAxICsgcyArIG8pLCB7IGNvbnN1bWVkOiAxICsgcyArIG8sIHJlc3VsdDogKDAsIG4uaGV4bGlmeSkoZS5zbGljZSh0ICsgMSArIHMsIHQgKyAxICsgcyArIG8pKSB9OwogICAgICAgICAgfQogICAgICAgICAgaWYgKGVbdF0gPj0gMTI4KSB7CiAgICAgICAgICAgIGNvbnN0IHMgPSBlW3RdIC0gMTI4OwogICAgICAgICAgICByZXR1cm4gcih0ICsgMSArIHMpLCB7IGNvbnN1bWVkOiAxICsgcywgcmVzdWx0OiAoMCwgbi5oZXhsaWZ5KShlLnNsaWNlKHQgKyAxLCB0ICsgMSArIHMpKSB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHsgY29uc3VtZWQ6IDEsIHJlc3VsdDogaShlW3RdKSB9OwogICAgICAgIH0KICAgICAgICB0LmRlY29kZVJscCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjb25zdCB0ID0gKDAsIG8uZ2V0Qnl0ZXMpKGUsICdkYXRhJyksCiAgICAgICAgICAgIHIgPSB1KHQsIDApOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKHIuY29uc3VtZWQgPT09IHQubGVuZ3RoLCAndW5leHBlY3RlZCBqdW5rIGFmdGVyIHJscCBwYXlsb2FkJywgJ2RhdGEnLCBlKSwgci5yZXN1bHQKICAgICAgICAgICk7CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgNTg2ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuZW5jb2RlUmxwID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig2MTYzKTsKICAgICAgICBmdW5jdGlvbiBzKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSBbXTsKICAgICAgICAgIGZvciAoOyBlOyApIHQudW5zaGlmdCgyNTUgJiBlKSwgKGUgPj49IDgpOwogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZSkpIHsKICAgICAgICAgICAgbGV0IHQgPSBbXTsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIChlLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHQgPSB0LmNvbmNhdChvKGUpKTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICB0Lmxlbmd0aCA8PSA1NSkKICAgICAgICAgICAgKQogICAgICAgICAgICAgIHJldHVybiB0LnVuc2hpZnQoMTkyICsgdC5sZW5ndGgpLCB0OwogICAgICAgICAgICBjb25zdCByID0gcyh0Lmxlbmd0aCk7CiAgICAgICAgICAgIHJldHVybiByLnVuc2hpZnQoMjQ3ICsgci5sZW5ndGgpLCByLmNvbmNhdCh0KTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHQgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCgoMCwgbi5nZXRCeXRlcykoZSwgJ29iamVjdCcpKTsKICAgICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCAmJiB0WzBdIDw9IDEyNykgcmV0dXJuIHQ7CiAgICAgICAgICBpZiAodC5sZW5ndGggPD0gNTUpIHJldHVybiB0LnVuc2hpZnQoMTI4ICsgdC5sZW5ndGgpLCB0OwogICAgICAgICAgY29uc3QgciA9IHModC5sZW5ndGgpOwogICAgICAgICAgcmV0dXJuIHIudW5zaGlmdCgxODMgKyByLmxlbmd0aCksIHIuY29uY2F0KHQpOwogICAgICAgIH0KICAgICAgICBjb25zdCBpID0gJzAxMjM0NTY3ODlhYmNkZWYnOwogICAgICAgIHQuZW5jb2RlUmxwID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGxldCB0ID0gJzB4JzsKICAgICAgICAgIGZvciAoY29uc3QgciBvZiBvKGUpKSAodCArPSBpW3IgPj4gNF0pLCAodCArPSBpWzE1ICYgcl0pOwogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgODc4NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LnBhcnNlRXRoZXIgPSB0LmZvcm1hdEV0aGVyID0gdC5wYXJzZVVuaXRzID0gdC5mb3JtYXRVbml0cyA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTA0NCksCiAgICAgICAgICBzID0gcigyOTIwKSwKICAgICAgICAgIG8gPSByKDU0NDApLAogICAgICAgICAgaSA9IFsnd2VpJywgJ2t3ZWknLCAnbXdlaScsICdnd2VpJywgJ3N6YWJvJywgJ2Zpbm5leScsICdldGhlciddOwogICAgICAgIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICAgICAgbGV0IHIgPSAxODsKICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgdCkgewogICAgICAgICAgICBjb25zdCBlID0gaS5pbmRleE9mKHQpOwogICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoZSA-PSAwLCAnaW52YWxpZCB1bml0JywgJ3VuaXQnLCB0KSwgKHIgPSAzICogZSk7CiAgICAgICAgICB9IGVsc2UgbnVsbCAhPSB0ICYmIChyID0gKDAsIG8uZ2V0TnVtYmVyKSh0LCAndW5pdCcpKTsKICAgICAgICAgIHJldHVybiBzLkZpeGVkTnVtYmVyLmZyb21WYWx1ZShlLCByLCB7IGRlY2ltYWxzOiByLCB3aWR0aDogNTEyIH0pLnRvU3RyaW5nKCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGMoZSwgdCkgewogICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCdzdHJpbmcnID09IHR5cGVvZiBlLCAndmFsdWUgbXVzdCBiZSBhIHN0cmluZycsICd2YWx1ZScsIGUpOwogICAgICAgICAgbGV0IHIgPSAxODsKICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgdCkgewogICAgICAgICAgICBjb25zdCBlID0gaS5pbmRleE9mKHQpOwogICAgICAgICAgICAoMCwgbi5hc3NlcnRBcmd1bWVudCkoZSA-PSAwLCAnaW52YWxpZCB1bml0JywgJ3VuaXQnLCB0KSwgKHIgPSAzICogZSk7CiAgICAgICAgICB9IGVsc2UgbnVsbCAhPSB0ICYmIChyID0gKDAsIG8uZ2V0TnVtYmVyKSh0LCAndW5pdCcpKTsKICAgICAgICAgIHJldHVybiBzLkZpeGVkTnVtYmVyLmZyb21TdHJpbmcoZSwgeyBkZWNpbWFsczogciwgd2lkdGg6IDUxMiB9KS52YWx1ZTsKICAgICAgICB9CiAgICAgICAgKHQuZm9ybWF0VW5pdHMgPSBhKSwKICAgICAgICAgICh0LnBhcnNlVW5pdHMgPSBjKSwKICAgICAgICAgICh0LmZvcm1hdEV0aGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGEoZSwgMTgpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5wYXJzZUV0aGVyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGMoZSwgMTgpOwogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDEwODg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC50b1V0ZjhDb2RlUG9pbnRzID0gdC50b1V0ZjhTdHJpbmcgPSB0LnRvVXRmOEJ5dGVzID0gdC5VdGY4RXJyb3JGdW5jcyA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNjE2MyksCiAgICAgICAgICBzID0gcig1MDQ0KTsKICAgICAgICBmdW5jdGlvbiBvKGUsIHQsIHIsIG4sIHMpIHsKICAgICAgICAgIGlmICgnQkFEX1BSRUZJWCcgPT09IGUgfHwgJ1VORVhQRUNURURfQ09OVElOVUUnID09PSBlKSB7CiAgICAgICAgICAgIGxldCBlID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgbiA9IHQgKyAxOyBuIDwgci5sZW5ndGggJiYgcltuXSA-PiA2ID09IDI7IG4rKykgZSsrOwogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnT1ZFUlJVTicgPT09IGUgPyByLmxlbmd0aCAtIHQgLSAxIDogMDsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gaShlLCByKSB7CiAgICAgICAgICBudWxsID09IHIgJiYgKHIgPSB0LlV0ZjhFcnJvckZ1bmNzLmVycm9yKTsKICAgICAgICAgIGNvbnN0IHMgPSAoMCwgbi5nZXRCeXRlcykoZSwgJ2J5dGVzJyksCiAgICAgICAgICAgIG8gPSBbXTsKICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgIGZvciAoOyBpIDwgcy5sZW5ndGg7ICkgewogICAgICAgICAgICBjb25zdCBlID0gc1tpKytdOwogICAgICAgICAgICBpZiAoZSA-PiA3ID09IDApIHsKICAgICAgICAgICAgICBvLnB1c2goZSk7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHQgPSBudWxsLAogICAgICAgICAgICAgIG4gPSBudWxsOwogICAgICAgICAgICBpZiAoMTkyID09ICgyMjQgJiBlKSkgKHQgPSAxKSwgKG4gPSAxMjcpOwogICAgICAgICAgICBlbHNlIGlmICgyMjQgPT0gKDI0MCAmIGUpKSAodCA9IDIpLCAobiA9IDIwNDcpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBpZiAoMjQwICE9ICgyNDggJiBlKSkgewogICAgICAgICAgICAgICAgaSArPSByKDEyOCA9PSAoMTkyICYgZSkgPyAnVU5FWFBFQ1RFRF9DT05USU5VRScgOiAnQkFEX1BSRUZJWCcsIGkgLSAxLCBzLCBvKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAodCA9IDMpLCAobiA9IDY1NTM1KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaSAtIDEgKyB0ID49IHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgaSArPSByKCdPVkVSUlVOJywgaSAtIDEsIHMsIG8pOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBhID0gZSAmICgoMSA8PCAoOCAtIHQgLSAxKSkgLSAxKTsKICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0OyBlKyspIHsKICAgICAgICAgICAgICBsZXQgZSA9IHNbaV07CiAgICAgICAgICAgICAgaWYgKDEyOCAhPSAoMTkyICYgZSkpIHsKICAgICAgICAgICAgICAgIChpICs9IHIoJ01JU1NJTkdfQ09OVElOVUUnLCBpLCBzLCBvKSksIChhID0gbnVsbCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKGEgPSAoYSA8PCA2KSB8ICg2MyAmIGUpKSwgaSsrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG51bGwgIT09IGEgJiYKICAgICAgICAgICAgICAoYSA-IDExMTQxMTEKICAgICAgICAgICAgICAgID8gKGkgKz0gcignT1VUX09GX1JBTkdFJywgaSAtIDEgLSB0LCBzLCBvLCBhKSkKICAgICAgICAgICAgICAgIDogYSA-PSA1NTI5NiAmJiBhIDw9IDU3MzQzCiAgICAgICAgICAgICAgICAgID8gKGkgKz0gcignVVRGMTZfU1VSUk9HQVRFJywgaSAtIDEgLSB0LCBzLCBvLCBhKSkKICAgICAgICAgICAgICAgICAgOiBhIDw9IG4KICAgICAgICAgICAgICAgICAgICA_IChpICs9IHIoJ09WRVJMT05HJywgaSAtIDEgLSB0LCBzLCBvLCBhKSkKICAgICAgICAgICAgICAgICAgICA6IG8ucHVzaChhKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbzsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgICAgICBudWxsICE9IHQgJiYgKCgwLCBzLmFzc2VydE5vcm1hbGl6ZSkodCksIChlID0gZS5ub3JtYWxpemUodCkpKTsKICAgICAgICAgIGxldCByID0gW107CiAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgY29uc3QgbiA9IGUuY2hhckNvZGVBdCh0KTsKICAgICAgICAgICAgaWYgKG4gPCAxMjgpIHIucHVzaChuKTsKICAgICAgICAgICAgZWxzZSBpZiAobiA8IDIwNDgpIHIucHVzaCgobiA-PiA2KSB8IDE5MiksIHIucHVzaCgoNjMgJiBuKSB8IDEyOCk7CiAgICAgICAgICAgIGVsc2UgaWYgKDU1Mjk2ID09ICg2NDUxMiAmIG4pKSB7CiAgICAgICAgICAgICAgdCsrOwogICAgICAgICAgICAgIGNvbnN0IG8gPSBlLmNoYXJDb2RlQXQodCk7CiAgICAgICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKHQgPCBlLmxlbmd0aCAmJiA1NjMyMCA9PSAoNjQ1MTIgJiBvKSwgJ2ludmFsaWQgc3Vycm9nYXRlIHBhaXInLCAnc3RyJywgZSk7CiAgICAgICAgICAgICAgY29uc3QgaSA9IDY1NTM2ICsgKCgxMDIzICYgbikgPDwgMTApICsgKDEwMjMgJiBvKTsKICAgICAgICAgICAgICByLnB1c2goKGkgPj4gMTgpIHwgMjQwKSwKICAgICAgICAgICAgICAgIHIucHVzaCgoKGkgPj4gMTIpICYgNjMpIHwgMTI4KSwKICAgICAgICAgICAgICAgIHIucHVzaCgoKGkgPj4gNikgJiA2MykgfCAxMjgpLAogICAgICAgICAgICAgICAgci5wdXNoKCg2MyAmIGkpIHwgMTI4KTsKICAgICAgICAgICAgfSBlbHNlIHIucHVzaCgobiA-PiAxMikgfCAyMjQpLCByLnB1c2goKChuID4-IDYpICYgNjMpIHwgMTI4KSwgci5wdXNoKCg2MyAmIG4pIHwgMTI4KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShyKTsKICAgICAgICB9CiAgICAgICAgKHQuVXRmOEVycm9yRnVuY3MgPSBPYmplY3QuZnJlZXplKHsKICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSwgdCwgciwgbiwgbykgewogICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoITEsIGBpbnZhbGlkIGNvZGVwb2ludCBhdCBvZmZzZXQgJHt0fTsgJHtlfWAsICdieXRlcycsIHIpOwogICAgICAgICAgfSwKICAgICAgICAgIGlnbm9yZTogbywKICAgICAgICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChlLCB0LCByLCBuLCBpKSB7CiAgICAgICAgICAgIHJldHVybiAnT1ZFUkxPTkcnID09PSBlCiAgICAgICAgICAgICAgPyAoKDAsIHMuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgaSwKICAgICAgICAgICAgICAgICAgJ2ludmFsaWQgYmFkIGNvZGUgcG9pbnQgZm9yIHJlcGxhY2VtZW50JywKICAgICAgICAgICAgICAgICAgJ2JhZENvZGVwb2ludCcsCiAgICAgICAgICAgICAgICAgIGkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBuLnB1c2goaSksCiAgICAgICAgICAgICAgICAwKQogICAgICAgICAgICAgIDogKG4ucHVzaCg2NTUzMyksIG8oZSwgdCwgcikpOwogICAgICAgICAgfQogICAgICAgIH0pKSwKICAgICAgICAgICh0LnRvVXRmOEJ5dGVzID0gYSksCiAgICAgICAgICAodC50b1V0ZjhTdHJpbmcgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gaShlLCB0KQogICAgICAgICAgICAgIC5tYXAoKGUpID0-CiAgICAgICAgICAgICAgICBlIDw9IDY1NTM1CiAgICAgICAgICAgICAgICAgID8gU3RyaW5nLmZyb21DaGFyQ29kZShlKQogICAgICAgICAgICAgICAgICA6ICgoZSAtPSA2NTUzNiksIFN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYgKyAoKGUgPj4gMTApICYgMTAyMyksIDU2MzIwICsgKDEwMjMgJiBlKSkpCiAgICAgICAgICAgICAgKQogICAgICAgICAgICAgIC5qb2luKCcnKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQudG9VdGY4Q29kZVBvaW50cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBpKGEoZSwgdCkpOwogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDk5NTY6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LnV1aWRWNCA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNjE2Myk7CiAgICAgICAgdC51dWlkVjQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc3QgdCA9ICgwLCBuLmdldEJ5dGVzKShlLCAncmFuZG9tQnl0ZXMnKTsKICAgICAgICAgICh0WzZdID0gKDE1ICYgdFs2XSkgfCA2NCksICh0WzhdID0gKDYzICYgdFs4XSkgfCAxMjgpOwogICAgICAgICAgY29uc3QgciA9ICgwLCBuLmhleGxpZnkpKHQpOwogICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgci5zdWJzdHJpbmcoMiwgMTApLAogICAgICAgICAgICByLnN1YnN0cmluZygxMCwgMTQpLAogICAgICAgICAgICByLnN1YnN0cmluZygxNCwgMTgpLAogICAgICAgICAgICByLnN1YnN0cmluZygxOCwgMjIpLAogICAgICAgICAgICByLnN1YnN0cmluZygyMiwgMzQpCiAgICAgICAgICBdLmpvaW4oJy0nKTsKICAgICAgICB9OwogICAgICB9LAogICAgICAzODA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkJhc2VXYWxsZXQgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDM2ODApLAogICAgICAgICAgcyA9IHIoNjg5NiksCiAgICAgICAgICBvID0gcigzNjQ0KSwKICAgICAgICAgIGkgPSByKDExMjQpLAogICAgICAgICAgYSA9IHIoNTMxNik7CiAgICAgICAgY2xhc3MgYyBleHRlbmRzIG8uQWJzdHJhY3RTaWduZXIgewogICAgICAgICAgYWRkcmVzczsKICAgICAgICAgICNVdDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgc3VwZXIodCksCiAgICAgICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgZSAmJiAnZnVuY3Rpb24nID09IHR5cGVvZiBlLnNpZ24sCiAgICAgICAgICAgICAgICAnaW52YWxpZCBwcml2YXRlIGtleScsCiAgICAgICAgICAgICAgICAncHJpdmF0ZUtleScsCiAgICAgICAgICAgICAgICAnWyBSRURBQ1RFRCBdJwogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKHRoaXMuI1V0ID0gZSk7CiAgICAgICAgICAgIGNvbnN0IHIgPSAoMCwgaS5jb21wdXRlQWRkcmVzcykodGhpcy5zaWduaW5nS2V5LnB1YmxpY0tleSk7CiAgICAgICAgICAgICgwLCBhLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgYWRkcmVzczogciB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBzaWduaW5nS2V5KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jVXQ7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgcHJpdmF0ZUtleSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluZ0tleS5wcml2YXRlS2V5OwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZ2V0QWRkcmVzcygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkcmVzczsKICAgICAgICAgIH0KICAgICAgICAgIGNvbm5lY3QoZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IGModGhpcy4jVXQsIGUpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgc2lnblRyYW5zYWN0aW9uKGUpIHsKICAgICAgICAgICAgY29uc3QgeyB0bzogdCwgZnJvbTogciB9ID0gYXdhaXQgKDAsIGEucmVzb2x2ZVByb3BlcnRpZXMpKHsKICAgICAgICAgICAgICB0bzogZS50byA_ICgwLCBuLnJlc29sdmVBZGRyZXNzKShlLnRvLCB0aGlzLnByb3ZpZGVyKSA6IHZvaWQgMCwKICAgICAgICAgICAgICBmcm9tOiBlLmZyb20gPyAoMCwgbi5yZXNvbHZlQWRkcmVzcykoZS5mcm9tLCB0aGlzLnByb3ZpZGVyKSA6IHZvaWQgMAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChlLnRvID0gdCksCiAgICAgICAgICAgICAgbnVsbCAhPSByICYmIChlLmZyb20gPSByKSwKICAgICAgICAgICAgICBudWxsICE9IGUuZnJvbSAmJgogICAgICAgICAgICAgICAgKCgwLCBhLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAgICAgKDAsIG4uZ2V0QWRkcmVzcykoZS5mcm9tKSA9PT0gdGhpcy5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAndHJhbnNhY3Rpb24gZnJvbSBhZGRyZXNzIG1pc21hdGNoJywKICAgICAgICAgICAgICAgICAgJ3R4LmZyb20nLAogICAgICAgICAgICAgICAgICBlLmZyb20KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBkZWxldGUgZS5mcm9tKTsKICAgICAgICAgICAgY29uc3QgcyA9IGkuVHJhbnNhY3Rpb24uZnJvbShlKTsKICAgICAgICAgICAgcmV0dXJuIChzLnNpZ25hdHVyZSA9IHRoaXMuc2lnbmluZ0tleS5zaWduKHMudW5zaWduZWRIYXNoKSksIHMuc2VyaWFsaXplZDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHNpZ25NZXNzYWdlKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbk1lc3NhZ2VTeW5jKGUpOwogICAgICAgICAgfQogICAgICAgICAgc2lnbk1lc3NhZ2VTeW5jKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluZ0tleS5zaWduKCgwLCBzLmhhc2hNZXNzYWdlKShlKSkuc2VyaWFsaXplZDsKICAgICAgICAgIH0KICAgICAgICAgIGFzeW5jIHNpZ25UeXBlZERhdGEoZSwgdCwgcikgewogICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgcy5UeXBlZERhdGFFbmNvZGVyLnJlc29sdmVOYW1lcyhlLCB0LCByLCBhc3luYyAoZSkgPT4gewogICAgICAgICAgICAgICgwLCBhLmFzc2VydCkoCiAgICAgICAgICAgICAgICBudWxsICE9IHRoaXMucHJvdmlkZXIsCiAgICAgICAgICAgICAgICAnY2Fubm90IHJlc29sdmUgRU5TIG5hbWVzIHdpdGhvdXQgYSBwcm92aWRlcicsCiAgICAgICAgICAgICAgICAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywKICAgICAgICAgICAgICAgIHsgb3BlcmF0aW9uOiAncmVzb2x2ZU5hbWUnLCBpbmZvOiB7IG5hbWU6IGUgfSB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5wcm92aWRlci5yZXNvbHZlTmFtZShlKTsKICAgICAgICAgICAgICByZXR1cm4gKDAsIGEuYXNzZXJ0KShudWxsICE9IHQsICd1bmNvbmZpZ3VyZWQgRU5TIG5hbWUnLCAnVU5DT05GSUdVUkVEX05BTUUnLCB7IHZhbHVlOiBlIH0pLCB0OwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbmluZ0tleS5zaWduKHMuVHlwZWREYXRhRW5jb2Rlci5oYXNoKG4uZG9tYWluLCB0LCBuLnZhbHVlKSkuc2VyaWFsaXplZDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5CYXNlV2FsbGV0ID0gYzsKICAgICAgfSwKICAgICAgNDYwMDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LmdldEluZGV4ZWRBY2NvdW50UGF0aCA9IHQuZ2V0QWNjb3VudFBhdGggPSB0LkhETm9kZVZvaWRXYWxsZXQgPSB0LkhETm9kZVdhbGxldCA9IHQuZGVmYXVsdFBhdGggPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDk4NzIpLAogICAgICAgICAgcyA9IHIoMzY0NCksCiAgICAgICAgICBvID0gcigxMTI0KSwKICAgICAgICAgIGkgPSByKDUzMTYpLAogICAgICAgICAgYSA9IHIoMjE0NCksCiAgICAgICAgICBjID0gcigzODApLAogICAgICAgICAgdSA9IHIoOTEzMiksCiAgICAgICAgICBsID0gcig5NjUyKTsKICAgICAgICB0LmRlZmF1bHRQYXRoID0gIm0vNDQnLzYwJy8wJy8wLzAiOwogICAgICAgIGNvbnN0IGQgPSBuZXcgVWludDhBcnJheShbNjYsIDEwNSwgMTE2LCA5OSwgMTExLCAxMDUsIDExMCwgMzIsIDExNSwgMTAxLCAxMDEsIDEwMF0pLAogICAgICAgICAgZiA9IDIxNDc0ODM2NDgsCiAgICAgICAgICBoID0gQmlnSW50KCcweGZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlYmFhZWRjZTZhZjQ4YTAzYmJmZDI1ZThjZDAzNjQxNDEnKTsKICAgICAgICBmdW5jdGlvbiBnKGUsIHQpIHsKICAgICAgICAgIGxldCByID0gJyc7CiAgICAgICAgICBmb3IgKDsgZTsgKSAociA9ICcwMTIzNDU2Nzg5YWJjZGVmJ1tlICUgMTZdICsgciksIChlID0gTWF0aC50cnVuYyhlIC8gMTYpKTsKICAgICAgICAgIGZvciAoOyByLmxlbmd0aCA8IDIgKiB0OyApIHIgPSAnMCcgKyByOwogICAgICAgICAgcmV0dXJuICcweCcgKyByOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBwKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSAoMCwgaS5nZXRCeXRlcykoZSksCiAgICAgICAgICAgIHIgPSAoMCwgaS5kYXRhU2xpY2UpKCgwLCBuLnNoYTI1NikoKDAsIG4uc2hhMjU2KSh0KSksIDAsIDQpLAogICAgICAgICAgICBzID0gKDAsIGkuY29uY2F0KShbdCwgcl0pOwogICAgICAgICAgcmV0dXJuICgwLCBpLmVuY29kZUJhc2U1OCkocyk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IG0gPSB7fTsKICAgICAgICBmdW5jdGlvbiBiKGUsIHQsIHIsIHMpIHsKICAgICAgICAgIGNvbnN0IG8gPSBuZXcgVWludDhBcnJheSgzNyk7CiAgICAgICAgICBlICYgZgogICAgICAgICAgICA_ICgoMCwgaS5hc3NlcnQpKG51bGwgIT0gcywgJ2Nhbm5vdCBkZXJpdmUgY2hpbGQgb2YgbmV1dGVyZWQgbm9kZScsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7CiAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdkZXJpdmVDaGlsZCcKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBvLnNldCgoMCwgaS5nZXRCeXRlcykocyksIDEpKQogICAgICAgICAgICA6IG8uc2V0KCgwLCBpLmdldEJ5dGVzKShyKSk7CiAgICAgICAgICBmb3IgKGxldCB0ID0gMjQ7IHQgPj0gMDsgdCAtPSA4KSBvWzMzICsgKHQgPj4gMyldID0gKGUgPj4gKDI0IC0gdCkpICYgMjU1OwogICAgICAgICAgY29uc3QgYSA9ICgwLCBpLmdldEJ5dGVzKSgoMCwgbi5jb21wdXRlSG1hYykoJ3NoYTUxMicsIHQsIG8pKTsKICAgICAgICAgIHJldHVybiB7IElMOiBhLnNsaWNlKDAsIDMyKSwgSVI6IGEuc2xpY2UoMzIpIH07CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHkoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9IHQuc3BsaXQoJy8nKTsKICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KShyLmxlbmd0aCA-IDAgJiYgKCdtJyA9PT0gclswXSB8fCBlLmRlcHRoID4gMCksICdpbnZhbGlkIHBhdGgnLCAncGF0aCcsIHQpLAogICAgICAgICAgICAnbScgPT09IHJbMF0gJiYgci5zaGlmdCgpOwogICAgICAgICAgbGV0IG4gPSBlOwogICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSByW2VdOwogICAgICAgICAgICBpZiAodC5tYXRjaCgvXlswLTldKyckLykpIHsKICAgICAgICAgICAgICBjb25zdCByID0gcGFyc2VJbnQodC5zdWJzdHJpbmcoMCwgdC5sZW5ndGggLSAxKSk7CiAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKHIgPCBmLCAnaW52YWxpZCBwYXRoIGluZGV4JywgYHBhdGhbJHtlfV1gLCB0KSwgKG4gPSBuLmRlcml2ZUNoaWxkKGYgKyByKSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodC5tYXRjaCgvXlswLTldKyQvKSkgewogICAgICAgICAgICAgIGNvbnN0IHIgPSBwYXJzZUludCh0KTsKICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkociA8IGYsICdpbnZhbGlkIHBhdGggaW5kZXgnLCBgcGF0aFske2V9XWAsIHQpLCAobiA9IG4uZGVyaXZlQ2hpbGQocikpOwogICAgICAgICAgICB9IGVsc2UgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKCExLCAnaW52YWxpZCBwYXRoIGNvbXBvbmVudCcsIGBwYXRoWyR7ZX1dYCwgdCk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9CiAgICAgICAgY2xhc3MgQSBleHRlbmRzIGMuQmFzZVdhbGxldCB7CiAgICAgICAgICBwdWJsaWNLZXk7CiAgICAgICAgICBmaW5nZXJwcmludDsKICAgICAgICAgIHBhcmVudEZpbmdlcnByaW50OwogICAgICAgICAgbW5lbW9uaWM7CiAgICAgICAgICBjaGFpbkNvZGU7CiAgICAgICAgICBwYXRoOwogICAgICAgICAgaW5kZXg7CiAgICAgICAgICBkZXB0aDsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQsIHIsIHMsIG8sIGEsIGMsIHUsIGwpIHsKICAgICAgICAgICAgc3VwZXIodCwgbCksCiAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0UHJpdmF0ZSkoZSwgbSwgJ0hETm9kZVdhbGxldCcpLAogICAgICAgICAgICAgICgwLCBpLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgcHVibGljS2V5OiB0LmNvbXByZXNzZWRQdWJsaWNLZXkgfSk7CiAgICAgICAgICAgIGNvbnN0IGQgPSAoMCwgaS5kYXRhU2xpY2UpKCgwLCBuLnJpcGVtZDE2MCkoKDAsIG4uc2hhMjU2KSh0aGlzLnB1YmxpY0tleSkpLCAwLCA0KTsKICAgICAgICAgICAgKDAsIGkuZGVmaW5lUHJvcGVydGllcykodGhpcywgewogICAgICAgICAgICAgIHBhcmVudEZpbmdlcnByaW50OiByLAogICAgICAgICAgICAgIGZpbmdlcnByaW50OiBkLAogICAgICAgICAgICAgIGNoYWluQ29kZTogcywKICAgICAgICAgICAgICBwYXRoOiBvLAogICAgICAgICAgICAgIGluZGV4OiBhLAogICAgICAgICAgICAgIGRlcHRoOiBjCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICgwLCBpLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgbW5lbW9uaWM6IHUgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25uZWN0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBBKAogICAgICAgICAgICAgIG0sCiAgICAgICAgICAgICAgdGhpcy5zaWduaW5nS2V5LAogICAgICAgICAgICAgIHRoaXMucGFyZW50RmluZ2VycHJpbnQsCiAgICAgICAgICAgICAgdGhpcy5jaGFpbkNvZGUsCiAgICAgICAgICAgICAgdGhpcy5wYXRoLAogICAgICAgICAgICAgIHRoaXMuaW5kZXgsCiAgICAgICAgICAgICAgdGhpcy5kZXB0aCwKICAgICAgICAgICAgICB0aGlzLm1uZW1vbmljLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgICNEdCgpIHsKICAgICAgICAgICAgY29uc3QgZSA9IHsgYWRkcmVzczogdGhpcy5hZGRyZXNzLCBwcml2YXRlS2V5OiB0aGlzLnByaXZhdGVLZXkgfSwKICAgICAgICAgICAgICB0ID0gdGhpcy5tbmVtb25pYzsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICB0aGlzLnBhdGggJiYKICAgICAgICAgICAgICAgIHQgJiYKICAgICAgICAgICAgICAgICdlbicgPT09IHQud29yZGxpc3QubG9jYWxlICYmCiAgICAgICAgICAgICAgICAnJyA9PT0gdC5wYXNzd29yZCAmJgogICAgICAgICAgICAgICAgKGUubW5lbW9uaWMgPSB7IHBhdGg6IHRoaXMucGF0aCwgbG9jYWxlOiAnZW4nLCBlbnRyb3B5OiB0LmVudHJvcHkgfSksCiAgICAgICAgICAgICAgZQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZW5jcnlwdChlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCAoMCwgbC5lbmNyeXB0S2V5c3RvcmVKc29uKSh0aGlzLiNEdCgpLCBlLCB7IHByb2dyZXNzQ2FsbGJhY2s6IHQgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbmNyeXB0U3luYyhlKSB7CiAgICAgICAgICAgIHJldHVybiAoMCwgbC5lbmNyeXB0S2V5c3RvcmVKc29uU3luYykodGhpcy4jRHQoKSwgZSk7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgZXh0ZW5kZWRLZXkoKSB7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIGkuYXNzZXJ0KSh0aGlzLmRlcHRoIDwgMjU2LCAnRGVwdGggdG9vIGRlZXAnLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgeyBvcGVyYXRpb246ICdleHRlbmRlZEtleScgfSksCiAgICAgICAgICAgICAgcCgKICAgICAgICAgICAgICAgICgwLCBpLmNvbmNhdCkoWwogICAgICAgICAgICAgICAgICAnMHgwNDg4QURFNCcsCiAgICAgICAgICAgICAgICAgIGcodGhpcy5kZXB0aCwgMSksCiAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RmluZ2VycHJpbnQsCiAgICAgICAgICAgICAgICAgIGcodGhpcy5pbmRleCwgNCksCiAgICAgICAgICAgICAgICAgIHRoaXMuY2hhaW5Db2RlLAogICAgICAgICAgICAgICAgICAoMCwgaS5jb25jYXQpKFsnMHgwMCcsIHRoaXMucHJpdmF0ZUtleV0pCiAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGhhc1BhdGgoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMucGF0aDsKICAgICAgICAgIH0KICAgICAgICAgIG5ldXRlcigpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB2KAogICAgICAgICAgICAgIG0sCiAgICAgICAgICAgICAgdGhpcy5hZGRyZXNzLAogICAgICAgICAgICAgIHRoaXMucHVibGljS2V5LAogICAgICAgICAgICAgIHRoaXMucGFyZW50RmluZ2VycHJpbnQsCiAgICAgICAgICAgICAgdGhpcy5jaGFpbkNvZGUsCiAgICAgICAgICAgICAgdGhpcy5wYXRoLAogICAgICAgICAgICAgIHRoaXMuaW5kZXgsCiAgICAgICAgICAgICAgdGhpcy5kZXB0aCwKICAgICAgICAgICAgICB0aGlzLnByb3ZpZGVyCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBkZXJpdmVDaGlsZChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSAoMCwgaS5nZXROdW1iZXIpKGUsICdpbmRleCcpOwogICAgICAgICAgICAoMCwgaS5hc3NlcnRBcmd1bWVudCkodCA8PSA0Mjk0OTY3Mjk1LCAnaW52YWxpZCBpbmRleCcsICdpbmRleCcsIHQpOwogICAgICAgICAgICBsZXQgciA9IHRoaXMucGF0aDsKICAgICAgICAgICAgciAmJiAoKHIgKz0gJy8nICsgKDIxNDc0ODM2NDcgJiB0KSksIHQgJiBmICYmIChyICs9ICInIikpOwogICAgICAgICAgICBjb25zdCB7IElSOiBzLCBJTDogbyB9ID0gYih0LCB0aGlzLmNoYWluQ29kZSwgdGhpcy5wdWJsaWNLZXksIHRoaXMucHJpdmF0ZUtleSksCiAgICAgICAgICAgICAgYSA9IG5ldyBuLlNpZ25pbmdLZXkoKDAsIGkudG9CZUhleCkoKCgwLCBpLnRvQmlnSW50KShvKSArIEJpZ0ludCh0aGlzLnByaXZhdGVLZXkpKSAlIGgsIDMyKSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgQShtLCBhLCB0aGlzLmZpbmdlcnByaW50LCAoMCwgaS5oZXhsaWZ5KShzKSwgciwgdCwgdGhpcy5kZXB0aCArIDEsIHRoaXMubW5lbW9uaWMsIHRoaXMucHJvdmlkZXIpOwogICAgICAgICAgfQogICAgICAgICAgZGVyaXZlUGF0aChlKSB7CiAgICAgICAgICAgIHJldHVybiB5KHRoaXMsIGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljICN4dChlLCB0KSB7CiAgICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSgoMCwgaS5pc0J5dGVzTGlrZSkoZSksICdpbnZhbGlkIHNlZWQnLCAnc2VlZCcsICdbUkVEQUNURURdJyk7CiAgICAgICAgICAgIGNvbnN0IHIgPSAoMCwgaS5nZXRCeXRlcykoZSwgJ3NlZWQnKTsKICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKHIubGVuZ3RoID49IDE2ICYmIHIubGVuZ3RoIDw9IDY0LCAnaW52YWxpZCBzZWVkJywgJ3NlZWQnLCAnW1JFREFDVEVEXScpOwogICAgICAgICAgICBjb25zdCBzID0gKDAsIGkuZ2V0Qnl0ZXMpKCgwLCBuLmNvbXB1dGVIbWFjKSgnc2hhNTEyJywgZCwgcikpLAogICAgICAgICAgICAgIG8gPSBuZXcgbi5TaWduaW5nS2V5KCgwLCBpLmhleGxpZnkpKHMuc2xpY2UoMCwgMzIpKSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgQShtLCBvLCAnMHgwMDAwMDAwMCcsICgwLCBpLmhleGxpZnkpKHMuc2xpY2UoMzIpKSwgJ20nLCAwLCAwLCB0LCBudWxsKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tRXh0ZW5kZWRLZXkoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gKDAsIGkudG9CZUFycmF5KSgoMCwgaS5kZWNvZGVCYXNlNTgpKGUpKTsKICAgICAgICAgICAgKDAsIGkuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgIDgyID09PSB0Lmxlbmd0aCB8fCBwKHQuc2xpY2UoMCwgNzgpKSA9PT0gZSwKICAgICAgICAgICAgICAnaW52YWxpZCBleHRlbmRlZCBrZXknLAogICAgICAgICAgICAgICdleHRlbmRlZEtleScsCiAgICAgICAgICAgICAgJ1sgUkVEQUNURUQgXScKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY29uc3QgciA9IHRbNF0sCiAgICAgICAgICAgICAgcyA9ICgwLCBpLmhleGxpZnkpKHQuc2xpY2UoNSwgOSkpLAogICAgICAgICAgICAgIGEgPSBwYXJzZUludCgoMCwgaS5oZXhsaWZ5KSh0LnNsaWNlKDksIDEzKSkuc3Vic3RyaW5nKDIpLCAxNiksCiAgICAgICAgICAgICAgYyA9ICgwLCBpLmhleGxpZnkpKHQuc2xpY2UoMTMsIDQ1KSksCiAgICAgICAgICAgICAgdSA9IHQuc2xpY2UoNDUsIDc4KTsKICAgICAgICAgICAgc3dpdGNoICgoMCwgaS5oZXhsaWZ5KSh0LnNsaWNlKDAsIDQpKSkgewogICAgICAgICAgICAgIGNhc2UgJzB4MDQ4OGIyMWUnOgogICAgICAgICAgICAgIGNhc2UgJzB4MDQzNTg3Y2YnOiB7CiAgICAgICAgICAgICAgICBjb25zdCBlID0gKDAsIGkuaGV4bGlmeSkodSk7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHYobSwgKDAsIG8uY29tcHV0ZUFkZHJlc3MpKGUpLCBlLCBzLCBjLCBudWxsLCBhLCByLCBudWxsKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2FzZSAnMHgwNDg4YWRlNCc6CiAgICAgICAgICAgICAgY2FzZSAnMHgwNDM1ODM5NCAnOgogICAgICAgICAgICAgICAgaWYgKDAgIT09IHVbMF0pIGJyZWFrOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBKG0sIG5ldyBuLlNpZ25pbmdLZXkodS5zbGljZSgxKSksIHMsIGMsIG51bGwsIGEsIHIsIG51bGwsIG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSghMSwgJ2ludmFsaWQgZXh0ZW5kZWQga2V5IHByZWZpeCcsICdleHRlbmRlZEtleScsICdbIFJFREFDVEVEIF0nKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBjcmVhdGVSYW5kb20oZSwgciwgcykgewogICAgICAgICAgICBudWxsID09IGUgJiYgKGUgPSAnJyksIG51bGwgPT0gciAmJiAociA9IHQuZGVmYXVsdFBhdGgpLCBudWxsID09IHMgJiYgKHMgPSBhLkxhbmdFbi53b3JkbGlzdCgpKTsKICAgICAgICAgICAgY29uc3QgbyA9IHUuTW5lbW9uaWMuZnJvbUVudHJvcHkoKDAsIG4ucmFuZG9tQnl0ZXMpKDE2KSwgZSwgcyk7CiAgICAgICAgICAgIHJldHVybiBBLiN4dChvLmNvbXB1dGVTZWVkKCksIG8pLmRlcml2ZVBhdGgocik7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgZnJvbU1uZW1vbmljKGUsIHIpIHsKICAgICAgICAgICAgcmV0dXJuIHIgfHwgKHIgPSB0LmRlZmF1bHRQYXRoKSwgQS4jeHQoZS5jb21wdXRlU2VlZCgpLCBlKS5kZXJpdmVQYXRoKHIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb21QaHJhc2UoZSwgciwgbiwgcykgewogICAgICAgICAgICBudWxsID09IHIgJiYgKHIgPSAnJyksIG51bGwgPT0gbiAmJiAobiA9IHQuZGVmYXVsdFBhdGgpLCBudWxsID09IHMgJiYgKHMgPSBhLkxhbmdFbi53b3JkbGlzdCgpKTsKICAgICAgICAgICAgY29uc3QgbyA9IHUuTW5lbW9uaWMuZnJvbVBocmFzZShlLCByLCBzKTsKICAgICAgICAgICAgcmV0dXJuIEEuI3h0KG8uY29tcHV0ZVNlZWQoKSwgbykuZGVyaXZlUGF0aChuKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tU2VlZChlKSB7CiAgICAgICAgICAgIHJldHVybiBBLiN4dChlLCBudWxsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5IRE5vZGVXYWxsZXQgPSBBOwogICAgICAgIGNsYXNzIHYgZXh0ZW5kcyBzLlZvaWRTaWduZXIgewogICAgICAgICAgcHVibGljS2V5OwogICAgICAgICAgZmluZ2VycHJpbnQ7CiAgICAgICAgICBwYXJlbnRGaW5nZXJwcmludDsKICAgICAgICAgIGNoYWluQ29kZTsKICAgICAgICAgIHBhdGg7CiAgICAgICAgICBpbmRleDsKICAgICAgICAgIGRlcHRoOwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgciwgcywgbywgYSwgYywgdSwgbCkgewogICAgICAgICAgICBzdXBlcih0LCBsKSwKICAgICAgICAgICAgICAoMCwgaS5hc3NlcnRQcml2YXRlKShlLCBtLCAnSEROb2RlVm9pZFdhbGxldCcpLAogICAgICAgICAgICAgICgwLCBpLmRlZmluZVByb3BlcnRpZXMpKHRoaXMsIHsgcHVibGljS2V5OiByIH0pOwogICAgICAgICAgICBjb25zdCBkID0gKDAsIGkuZGF0YVNsaWNlKSgoMCwgbi5yaXBlbWQxNjApKCgwLCBuLnNoYTI1NikocikpLCAwLCA0KTsKICAgICAgICAgICAgKDAsIGkuZGVmaW5lUHJvcGVydGllcykodGhpcywgewogICAgICAgICAgICAgIHB1YmxpY0tleTogciwKICAgICAgICAgICAgICBmaW5nZXJwcmludDogZCwKICAgICAgICAgICAgICBwYXJlbnRGaW5nZXJwcmludDogcywKICAgICAgICAgICAgICBjaGFpbkNvZGU6IG8sCiAgICAgICAgICAgICAgcGF0aDogYSwKICAgICAgICAgICAgICBpbmRleDogYywKICAgICAgICAgICAgICBkZXB0aDogdQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbm5lY3QoZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IHYoCiAgICAgICAgICAgICAgbSwKICAgICAgICAgICAgICB0aGlzLmFkZHJlc3MsCiAgICAgICAgICAgICAgdGhpcy5wdWJsaWNLZXksCiAgICAgICAgICAgICAgdGhpcy5wYXJlbnRGaW5nZXJwcmludCwKICAgICAgICAgICAgICB0aGlzLmNoYWluQ29kZSwKICAgICAgICAgICAgICB0aGlzLnBhdGgsCiAgICAgICAgICAgICAgdGhpcy5pbmRleCwKICAgICAgICAgICAgICB0aGlzLmRlcHRoLAogICAgICAgICAgICAgIGUKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldCBleHRlbmRlZEtleSgpIHsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgaS5hc3NlcnQpKHRoaXMuZGVwdGggPCAyNTYsICdEZXB0aCB0b28gZGVlcCcsICdVTlNVUFBPUlRFRF9PUEVSQVRJT04nLCB7IG9wZXJhdGlvbjogJ2V4dGVuZGVkS2V5JyB9KSwKICAgICAgICAgICAgICBwKAogICAgICAgICAgICAgICAgKDAsIGkuY29uY2F0KShbCiAgICAgICAgICAgICAgICAgICcweDA0ODhCMjFFJywKICAgICAgICAgICAgICAgICAgZyh0aGlzLmRlcHRoLCAxKSwKICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnRGaW5nZXJwcmludCwKICAgICAgICAgICAgICAgICAgZyh0aGlzLmluZGV4LCA0KSwKICAgICAgICAgICAgICAgICAgdGhpcy5jaGFpbkNvZGUsCiAgICAgICAgICAgICAgICAgIHRoaXMucHVibGljS2V5CiAgICAgICAgICAgICAgICBdKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIGhhc1BhdGgoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMucGF0aDsKICAgICAgICAgIH0KICAgICAgICAgIGRlcml2ZUNoaWxkKGUpIHsKICAgICAgICAgICAgY29uc3QgdCA9ICgwLCBpLmdldE51bWJlcikoZSwgJ2luZGV4Jyk7CiAgICAgICAgICAgICgwLCBpLmFzc2VydEFyZ3VtZW50KSh0IDw9IDQyOTQ5NjcyOTUsICdpbnZhbGlkIGluZGV4JywgJ2luZGV4JywgdCk7CiAgICAgICAgICAgIGxldCByID0gdGhpcy5wYXRoOwogICAgICAgICAgICByICYmICgociArPSAnLycgKyAoMjE0NzQ4MzY0NyAmIHQpKSwgdCAmIGYgJiYgKHIgKz0gIiciKSk7CiAgICAgICAgICAgIGNvbnN0IHsgSVI6IHMsIElMOiBhIH0gPSBiKHQsIHRoaXMuY2hhaW5Db2RlLCB0aGlzLnB1YmxpY0tleSwgbnVsbCksCiAgICAgICAgICAgICAgYyA9IG4uU2lnbmluZ0tleS5hZGRQb2ludHMoYSwgdGhpcy5wdWJsaWNLZXksICEwKSwKICAgICAgICAgICAgICB1ID0gKDAsIG8uY29tcHV0ZUFkZHJlc3MpKGMpOwogICAgICAgICAgICByZXR1cm4gbmV3IHYobSwgdSwgYywgdGhpcy5maW5nZXJwcmludCwgKDAsIGkuaGV4bGlmeSkocyksIHIsIHQsIHRoaXMuZGVwdGggKyAxLCB0aGlzLnByb3ZpZGVyKTsKICAgICAgICAgIH0KICAgICAgICAgIGRlcml2ZVBhdGgoZSkgewogICAgICAgICAgICByZXR1cm4geSh0aGlzLCBlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgKHQuSEROb2RlVm9pZFdhbGxldCA9IHYpLAogICAgICAgICAgKHQuZ2V0QWNjb3VudFBhdGggPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gKDAsIGkuZ2V0TnVtYmVyKShlLCAnaW5kZXgnKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBpLmFzc2VydEFyZ3VtZW50KSh0ID49IDAgJiYgdCA8IGYsICdpbnZhbGlkIGFjY291bnQgaW5kZXgnLCAnaW5kZXgnLCB0KSwgYG0vNDQnLzYwJy8ke3R9Jy8wLzBgOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5nZXRJbmRleGVkQWNjb3VudFBhdGggPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gKDAsIGkuZ2V0TnVtYmVyKShlLCAnaW5kZXgnKTsKICAgICAgICAgICAgcmV0dXJuICgwLCBpLmFzc2VydEFyZ3VtZW50KSh0ID49IDAgJiYgdCA8IGYsICdpbnZhbGlkIGFjY291bnQgaW5kZXgnLCAnaW5kZXgnLCB0KSwgYG0vNDQnLzYwJy8wJy8wLyR7dH1gOwogICAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDgxNjA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC5XYWxsZXQgPQogICAgICAgICAgICB0Lk1uZW1vbmljID0KICAgICAgICAgICAgdC5lbmNyeXB0S2V5c3RvcmVKc29uU3luYyA9CiAgICAgICAgICAgIHQuZW5jcnlwdEtleXN0b3JlSnNvbiA9CiAgICAgICAgICAgIHQuZGVjcnlwdEtleXN0b3JlSnNvbiA9CiAgICAgICAgICAgIHQuZGVjcnlwdEtleXN0b3JlSnNvblN5bmMgPQogICAgICAgICAgICB0LmlzS2V5c3RvcmVKc29uID0KICAgICAgICAgICAgdC5kZWNyeXB0Q3Jvd2RzYWxlSnNvbiA9CiAgICAgICAgICAgIHQuaXNDcm93ZHNhbGVKc29uID0KICAgICAgICAgICAgdC5IRE5vZGVWb2lkV2FsbGV0ID0KICAgICAgICAgICAgdC5IRE5vZGVXYWxsZXQgPQogICAgICAgICAgICB0LmdldEluZGV4ZWRBY2NvdW50UGF0aCA9CiAgICAgICAgICAgIHQuZ2V0QWNjb3VudFBhdGggPQogICAgICAgICAgICB0LmRlZmF1bHRQYXRoID0KICAgICAgICAgICAgdC5CYXNlV2FsbGV0ID0KICAgICAgICAgICAgICB2b2lkIDApOwogICAgICAgIHZhciBuID0gcigzODApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnQmFzZVdhbGxldCcsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBuLkJhc2VXYWxsZXQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHMgPSByKDQ2MDApOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZGVmYXVsdFBhdGgnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gcy5kZWZhdWx0UGF0aDsKICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZ2V0QWNjb3VudFBhdGgnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5nZXRBY2NvdW50UGF0aDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2dldEluZGV4ZWRBY2NvdW50UGF0aCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLmdldEluZGV4ZWRBY2NvdW50UGF0aDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0hETm9kZVdhbGxldCcsIHsKICAgICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBzLkhETm9kZVdhbGxldDsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ0hETm9kZVZvaWRXYWxsZXQnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gcy5IRE5vZGVWb2lkV2FsbGV0OwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB2YXIgbyA9IHIoODc3Mik7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdpc0Nyb3dkc2FsZUpzb24nLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gby5pc0Nyb3dkc2FsZUpzb247CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RlY3J5cHRDcm93ZHNhbGVKc29uJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG8uZGVjcnlwdENyb3dkc2FsZUpzb247CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIHZhciBpID0gcig5NjUyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2lzS2V5c3RvcmVKc29uJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuaXNLZXlzdG9yZUpzb247CiAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2RlY3J5cHRLZXlzdG9yZUpzb25TeW5jJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuZGVjcnlwdEtleXN0b3JlSnNvblN5bmM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdkZWNyeXB0S2V5c3RvcmVKc29uJywgewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGkuZGVjcnlwdEtleXN0b3JlSnNvbjsKICAgICAgICAgICAgfQogICAgICAgICAgfSksCiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ2VuY3J5cHRLZXlzdG9yZUpzb24nLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5lbmNyeXB0S2V5c3RvcmVKc29uOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnZW5jcnlwdEtleXN0b3JlSnNvblN5bmMnLCB7CiAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gaS5lbmNyeXB0S2V5c3RvcmVKc29uU3luYzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgdmFyIGEgPSByKDkxMzIpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnTW5lbW9uaWMnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYS5NbmVtb25pYzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2YXIgYyA9IHIoODA0MCk7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdXYWxsZXQnLCB7CiAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gYy5XYWxsZXQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIDg3NzI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LmRlY3J5cHRDcm93ZHNhbGVKc29uID0gdC5pc0Nyb3dkc2FsZUpzb24gPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDU1NjgpLAogICAgICAgICAgcyA9IHIoMzY4MCksCiAgICAgICAgICBvID0gcig5ODcyKSwKICAgICAgICAgIGkgPSByKDY4OTYpLAogICAgICAgICAgYSA9IHIoNTMxNiksCiAgICAgICAgICBjID0gcig5MTkyKTsKICAgICAgICAodC5pc0Nyb3dkc2FsZUpzb24gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKEpTT04ucGFyc2UoZSkuZW5jc2VlZCkgcmV0dXJuICEwOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICB9KSwKICAgICAgICAgICh0LmRlY3J5cHRDcm93ZHNhbGVKc29uID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IEpTT04ucGFyc2UoZSksCiAgICAgICAgICAgICAgdSA9ICgwLCBjLmdldFBhc3N3b3JkKSh0KSwKICAgICAgICAgICAgICBsID0gKDAsIHMuZ2V0QWRkcmVzcykoKDAsIGMuc3BlbHVuaykociwgJ2V0aGFkZHI6c3RyaW5nIScpKSwKICAgICAgICAgICAgICBkID0gKDAsIGMubG9vc2VBcnJheWlmeSkoKDAsIGMuc3BlbHVuaykociwgJ2VuY3NlZWQ6c3RyaW5nIScpKTsKICAgICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKGQgJiYgZC5sZW5ndGggJSAxNiA9PSAwLCAnaW52YWxpZCBlbmNzZWVkJywgJ2pzb24nLCBlKTsKICAgICAgICAgICAgY29uc3QgZiA9ICgwLCBhLmdldEJ5dGVzKSgoMCwgby5wYmtkZjIpKHUsIHUsIDJlMywgMzIsICdzaGEyNTYnKSkuc2xpY2UoMCwgMTYpLAogICAgICAgICAgICAgIGggPSBkLnNsaWNlKDAsIDE2KSwKICAgICAgICAgICAgICBnID0gZC5zbGljZSgxNiksCiAgICAgICAgICAgICAgcCA9IG5ldyBuLkNCQyhmLCBoKSwKICAgICAgICAgICAgICBtID0gKDAsIG4ucGtjczdTdHJpcCkoKDAsIGEuZ2V0Qnl0ZXMpKHAuZGVjcnlwdChnKSkpOwogICAgICAgICAgICBsZXQgYiA9ICcnOwogICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IG0ubGVuZ3RoOyBlKyspIGIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShtW2VdKTsKICAgICAgICAgICAgcmV0dXJuIHsgYWRkcmVzczogbCwgcHJpdmF0ZUtleTogKDAsIGkuaWQpKGIpIH07CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgOTY1MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LmVuY3J5cHRLZXlzdG9yZUpzb24gPQogICAgICAgICAgICB0LmVuY3J5cHRLZXlzdG9yZUpzb25TeW5jID0KICAgICAgICAgICAgdC5kZWNyeXB0S2V5c3RvcmVKc29uID0KICAgICAgICAgICAgdC5kZWNyeXB0S2V5c3RvcmVKc29uU3luYyA9CiAgICAgICAgICAgIHQuaXNLZXlzdG9yZUpzb24gPQogICAgICAgICAgICAgIHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTU2OCksCiAgICAgICAgICBzID0gcigzNjgwKSwKICAgICAgICAgIG8gPSByKDk4NzIpLAogICAgICAgICAgaSA9IHIoMTEyNCksCiAgICAgICAgICBhID0gcig1MzE2KSwKICAgICAgICAgIGMgPSByKDkxOTIpLAogICAgICAgICAgdSA9IHIoNzkzNiksCiAgICAgICAgICBsID0gIm0vNDQnLzYwJy8wJy8wLzAiOwogICAgICAgIGZ1bmN0aW9uIGQoZSwgdCkgewogICAgICAgICAgY29uc3QgciA9ICgwLCBhLmdldEJ5dGVzKSh0KSwKICAgICAgICAgICAgdSA9ICgwLCBjLnNwZWx1bmspKGUsICdjcnlwdG8uY2lwaGVydGV4dDpkYXRhIScpLAogICAgICAgICAgICBkID0gKDAsIGEuaGV4bGlmeSkoKDAsIG8ua2VjY2FrMjU2KSgoMCwgYS5jb25jYXQpKFtyLnNsaWNlKDE2LCAzMiksIHVdKSkpLnN1YnN0cmluZygyKTsKICAgICAgICAgICgwLCBhLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgZCA9PT0gKDAsIGMuc3BlbHVuaykoZSwgJ2NyeXB0by5tYWM6c3RyaW5nIScpLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICdpbmNvcnJlY3QgcGFzc3dvcmQnLAogICAgICAgICAgICAncGFzc3dvcmQnLAogICAgICAgICAgICAnWyBSRURBQ1RFRCBdJwogICAgICAgICAgKTsKICAgICAgICAgIGNvbnN0IGYgPSAoZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgICBpZiAoJ2Flcy0xMjgtY3RyJyA9PT0gKDAsIGMuc3BlbHVuaykoZSwgJ2NyeXB0by5jaXBoZXI6c3RyaW5nJykpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSAoMCwgYy5zcGVsdW5rKShlLCAnY3J5cHRvLmNpcGhlcnBhcmFtcy5pdjpkYXRhIScpLAogICAgICAgICAgICAgICAgICBvID0gbmV3IG4uQ1RSKHQsIHMpOwogICAgICAgICAgICAgICAgcmV0dXJuICgwLCBhLmhleGxpZnkpKG8uZGVjcnlwdChyKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICgwLCBhLmFzc2VydCkoITEsICd1bnN1cHBvcnRlZCBjaXBoZXInLCAnVU5TVVBQT1JURURfT1BFUkFUSU9OJywgeyBvcGVyYXRpb246ICdkZWNyeXB0JyB9KTsKICAgICAgICAgICAgfSkoZSwgci5zbGljZSgwLCAxNiksIHUpLAogICAgICAgICAgICBoID0gKDAsIGkuY29tcHV0ZUFkZHJlc3MpKGYpOwogICAgICAgICAgaWYgKGUuYWRkcmVzcykgewogICAgICAgICAgICBsZXQgdCA9IGUuYWRkcmVzcy50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB0LnN0YXJ0c1dpdGgoJzB4JykgfHwgKHQgPSAnMHgnICsgdCksCiAgICAgICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICAgKDAsIHMuZ2V0QWRkcmVzcykodCkgPT09IGgsCiAgICAgICAgICAgICAgICAna2V5c3RvcmUgYWRkcmVzcy9wcml2YXRlS2V5IG1pc21hdGNoJywKICAgICAgICAgICAgICAgICdhZGRyZXNzJywKICAgICAgICAgICAgICAgIGUuYWRkcmVzcwogICAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBnID0geyBhZGRyZXNzOiBoLCBwcml2YXRlS2V5OiBmIH07CiAgICAgICAgICBpZiAoJzAuMScgPT09ICgwLCBjLnNwZWx1bmspKGUsICd4LWV0aGVycy52ZXJzaW9uOnN0cmluZycpKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSByLnNsaWNlKDMyLCA2NCksCiAgICAgICAgICAgICAgcyA9ICgwLCBjLnNwZWx1bmspKGUsICd4LWV0aGVycy5tbmVtb25pY0NpcGhlcnRleHQ6ZGF0YSEnKSwKICAgICAgICAgICAgICBvID0gKDAsIGMuc3BlbHVuaykoZSwgJ3gtZXRoZXJzLm1uZW1vbmljQ291bnRlcjpkYXRhIScpLAogICAgICAgICAgICAgIGkgPSBuZXcgbi5DVFIodCwgbyk7CiAgICAgICAgICAgIGcubW5lbW9uaWMgPSB7CiAgICAgICAgICAgICAgcGF0aDogKDAsIGMuc3BlbHVuaykoZSwgJ3gtZXRoZXJzLnBhdGg6c3RyaW5nJykgfHwgbCwKICAgICAgICAgICAgICBsb2NhbGU6ICgwLCBjLnNwZWx1bmspKGUsICd4LWV0aGVycy5sb2NhbGU6c3RyaW5nJykgfHwgJ2VuJywKICAgICAgICAgICAgICBlbnRyb3B5OiAoMCwgYS5oZXhsaWZ5KSgoMCwgYS5nZXRCeXRlcykoaS5kZWNyeXB0KHMpKSkKICAgICAgICAgICAgfTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBnOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBmKGUpIHsKICAgICAgICAgIGNvbnN0IHQgPSAoMCwgYy5zcGVsdW5rKShlLCAnY3J5cHRvLmtkZjpzdHJpbmcnKTsKICAgICAgICAgIGlmICh0ICYmICdzdHJpbmcnID09IHR5cGVvZiB0KSB7CiAgICAgICAgICAgIGlmICgnc2NyeXB0JyA9PT0gdC50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgICAgICAgY29uc3QgciA9ICgwLCBjLnNwZWx1bmspKGUsICdjcnlwdG8ua2RmcGFyYW1zLnNhbHQ6ZGF0YSEnKSwKICAgICAgICAgICAgICAgIG4gPSAoMCwgYy5zcGVsdW5rKShlLCAnY3J5cHRvLmtkZnBhcmFtcy5uOmludCEnKSwKICAgICAgICAgICAgICAgIHMgPSAoMCwgYy5zcGVsdW5rKShlLCAnY3J5cHRvLmtkZnBhcmFtcy5yOmludCEnKSwKICAgICAgICAgICAgICAgIG8gPSAoMCwgYy5zcGVsdW5rKShlLCAnY3J5cHRvLmtkZnBhcmFtcy5wOmludCEnKTsKICAgICAgICAgICAgICAoMCwgYS5hc3NlcnRBcmd1bWVudCkobiA-IDAgJiYgMCA9PSAobiAmIChuIC0gMSkpLCAnaW52YWxpZCBrZGYuTicsICdrZGYuTicsIG4pLAogICAgICAgICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKHMgPiAwICYmIG8gPiAwLCAnaW52YWxpZCBrZGYnLCAna2RmJywgdCk7CiAgICAgICAgICAgICAgY29uc3QgaSA9ICgwLCBjLnNwZWx1bmspKGUsICdjcnlwdG8ua2RmcGFyYW1zLmRrbGVuOmludCEnKTsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKDMyID09PSBpLCAnaW52YWxpZCBrZGYuZGtsZW4nLCAna2RmLmRmbGVuJywgaSksCiAgICAgICAgICAgICAgICB7IG5hbWU6ICdzY3J5cHQnLCBzYWx0OiByLCBOOiBuLCByOiBzLCBwOiBvLCBka0xlbjogNjQgfQogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCdwYmtkZjInID09PSB0LnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgICBjb25zdCB0ID0gKDAsIGMuc3BlbHVuaykoZSwgJ2NyeXB0by5rZGZwYXJhbXMuc2FsdDpkYXRhIScpLAogICAgICAgICAgICAgICAgciA9ICgwLCBjLnNwZWx1bmspKGUsICdjcnlwdG8ua2RmcGFyYW1zLnByZjpzdHJpbmchJyksCiAgICAgICAgICAgICAgICBuID0gci5zcGxpdCgnLScpLnBvcCgpOwogICAgICAgICAgICAgICgwLCBhLmFzc2VydEFyZ3VtZW50KSgnc2hhMjU2JyA9PT0gbiB8fCAnc2hhNTEyJyA9PT0gbiwgJ2ludmFsaWQga2RmLnBkZicsICdrZGYucGRmJywgcik7CiAgICAgICAgICAgICAgY29uc3QgcyA9ICgwLCBjLnNwZWx1bmspKGUsICdjcnlwdG8ua2RmcGFyYW1zLmM6aW50IScpLAogICAgICAgICAgICAgICAgbyA9ICgwLCBjLnNwZWx1bmspKGUsICdjcnlwdG8ua2RmcGFyYW1zLmRrbGVuOmludCEnKTsKICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKDMyID09PSBvLCAnaW52YWxpZCBrZGYuZGtsZW4nLCAna2RmLmRrbGVuJywgbyksCiAgICAgICAgICAgICAgICB7IG5hbWU6ICdwYmtkZjInLCBzYWx0OiB0LCBjb3VudDogcywgZGtMZW46IG8sIGFsZ29yaXRobTogbiB9CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKCExLCAndW5zdXBwb3J0ZWQga2V5LWRlcml2YXRpb24gZnVuY3Rpb24nLCAna2RmJywgdCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGgoZSkgewogICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCh0KSA9PiB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgIHQoKTsKICAgICAgICAgICAgfSwgZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZyhlKSB7CiAgICAgICAgICBjb25zdCB0ID0gbnVsbCAhPSBlLnNhbHQgPyAoMCwgYS5nZXRCeXRlcykoZS5zYWx0LCAnb3B0aW9ucy5zYWx0JykgOiAoMCwgby5yYW5kb21CeXRlcykoMzIpOwogICAgICAgICAgbGV0IHIgPSAxIDw8IDE3LAogICAgICAgICAgICBuID0gOCwKICAgICAgICAgICAgcyA9IDE7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBlLnNjcnlwdCAmJgogICAgICAgICAgICAgIChlLnNjcnlwdC5OICYmIChyID0gZS5zY3J5cHQuTiksIGUuc2NyeXB0LnIgJiYgKG4gPSBlLnNjcnlwdC5yKSwgZS5zY3J5cHQucCAmJiAocyA9IGUuc2NyeXB0LnApKSwKICAgICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICAgICdudW1iZXInID09IHR5cGVvZiByICYmIHIgPiAwICYmIE51bWJlci5pc1NhZmVJbnRlZ2VyKHIpICYmIChCaWdJbnQocikgJiBCaWdJbnQociAtIDEpKSA9PT0gQmlnSW50KDApLAogICAgICAgICAgICAgICdpbnZhbGlkIHNjcnlwdCBOIHBhcmFtZXRlcicsCiAgICAgICAgICAgICAgJ29wdGlvbnMuTicsCiAgICAgICAgICAgICAgcgogICAgICAgICAgICApLAogICAgICAgICAgICAoMCwgYS5hc3NlcnRBcmd1bWVudCkoCiAgICAgICAgICAgICAgJ251bWJlcicgPT0gdHlwZW9mIG4gJiYgbiA-IDAgJiYgTnVtYmVyLmlzU2FmZUludGVnZXIobiksCiAgICAgICAgICAgICAgJ2ludmFsaWQgc2NyeXB0IHIgcGFyYW1ldGVyJywKICAgICAgICAgICAgICAnb3B0aW9ucy5yJywKICAgICAgICAgICAgICBuCiAgICAgICAgICAgICksCiAgICAgICAgICAgICgwLCBhLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgICAnbnVtYmVyJyA9PSB0eXBlb2YgcyAmJiBzID4gMCAmJiBOdW1iZXIuaXNTYWZlSW50ZWdlcihzKSwKICAgICAgICAgICAgICAnaW52YWxpZCBzY3J5cHQgcCBwYXJhbWV0ZXInLAogICAgICAgICAgICAgICdvcHRpb25zLnAnLAogICAgICAgICAgICAgIHMKICAgICAgICAgICAgKSwKICAgICAgICAgICAgeyBuYW1lOiAnc2NyeXB0JywgZGtMZW46IDMyLCBzYWx0OiB0LCBOOiByLCByOiBuLCBwOiBzIH0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHAoZSwgdCwgciwgcykgewogICAgICAgICAgY29uc3QgaSA9ICgwLCBhLmdldEJ5dGVzKShyLnByaXZhdGVLZXksICdwcml2YXRlS2V5JyksCiAgICAgICAgICAgIGQgPSBudWxsICE9IHMuaXYgPyAoMCwgYS5nZXRCeXRlcykocy5pdiwgJ29wdGlvbnMuaXYnKSA6ICgwLCBvLnJhbmRvbUJ5dGVzKSgxNik7CiAgICAgICAgICAoMCwgYS5hc3NlcnRBcmd1bWVudCkoMTYgPT09IGQubGVuZ3RoLCAnaW52YWxpZCBvcHRpb25zLml2IGxlbmd0aCcsICdvcHRpb25zLml2Jywgcy5pdik7CiAgICAgICAgICBjb25zdCBmID0gbnVsbCAhPSBzLnV1aWQgPyAoMCwgYS5nZXRCeXRlcykocy51dWlkLCAnb3B0aW9ucy51dWlkJykgOiAoMCwgby5yYW5kb21CeXRlcykoMTYpOwogICAgICAgICAgKDAsIGEuYXNzZXJ0QXJndW1lbnQpKDE2ID09PSBmLmxlbmd0aCwgJ2ludmFsaWQgb3B0aW9ucy51dWlkIGxlbmd0aCcsICdvcHRpb25zLnV1aWQnLCBzLml2KTsKICAgICAgICAgIGNvbnN0IGggPSBlLnNsaWNlKDAsIDE2KSwKICAgICAgICAgICAgZyA9IGUuc2xpY2UoMTYsIDMyKSwKICAgICAgICAgICAgcCA9IG5ldyBuLkNUUihoLCBkKSwKICAgICAgICAgICAgbSA9ICgwLCBhLmdldEJ5dGVzKShwLmVuY3J5cHQoaSkpLAogICAgICAgICAgICBiID0gKDAsIG8ua2VjY2FrMjU2KSgoMCwgYS5jb25jYXQpKFtnLCBtXSkpLAogICAgICAgICAgICB5ID0gewogICAgICAgICAgICAgIGFkZHJlc3M6IHIuYWRkcmVzcy5zdWJzdHJpbmcoMikudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgICBpZDogKDAsIGEudXVpZFY0KShmKSwKICAgICAgICAgICAgICB2ZXJzaW9uOiAzLAogICAgICAgICAgICAgIENyeXB0bzogewogICAgICAgICAgICAgICAgY2lwaGVyOiAnYWVzLTEyOC1jdHInLAogICAgICAgICAgICAgICAgY2lwaGVycGFyYW1zOiB7IGl2OiAoMCwgYS5oZXhsaWZ5KShkKS5zdWJzdHJpbmcoMikgfSwKICAgICAgICAgICAgICAgIGNpcGhlcnRleHQ6ICgwLCBhLmhleGxpZnkpKG0pLnN1YnN0cmluZygyKSwKICAgICAgICAgICAgICAgIGtkZjogJ3NjcnlwdCcsCiAgICAgICAgICAgICAgICBrZGZwYXJhbXM6IHsgc2FsdDogKDAsIGEuaGV4bGlmeSkodC5zYWx0KS5zdWJzdHJpbmcoMiksIG46IHQuTiwgZGtsZW46IDMyLCBwOiB0LnAsIHI6IHQuciB9LAogICAgICAgICAgICAgICAgbWFjOiBiLnN1YnN0cmluZygyKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgIGlmIChyLm1uZW1vbmljKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBudWxsICE9IHMuY2xpZW50ID8gcy5jbGllbnQgOiBgZXRoZXJzLyR7dS52ZXJzaW9ufWAsCiAgICAgICAgICAgICAgaSA9IHIubW5lbW9uaWMucGF0aCB8fCBsLAogICAgICAgICAgICAgIGQgPSByLm1uZW1vbmljLmxvY2FsZSB8fCAnZW4nLAogICAgICAgICAgICAgIGYgPSBlLnNsaWNlKDMyLCA2NCksCiAgICAgICAgICAgICAgaCA9ICgwLCBhLmdldEJ5dGVzKShyLm1uZW1vbmljLmVudHJvcHksICdhY2NvdW50Lm1uZW1vbmljLmVudHJvcHknKSwKICAgICAgICAgICAgICBnID0gKDAsIG8ucmFuZG9tQnl0ZXMpKDE2KSwKICAgICAgICAgICAgICBwID0gbmV3IG4uQ1RSKGYsIGcpLAogICAgICAgICAgICAgIG0gPSAoMCwgYS5nZXRCeXRlcykocC5lbmNyeXB0KGgpKSwKICAgICAgICAgICAgICBiID0gbmV3IERhdGUoKSwKICAgICAgICAgICAgICBBID0KICAgICAgICAgICAgICAgICdVVEMtLScgKwogICAgICAgICAgICAgICAgYi5nZXRVVENGdWxsWWVhcigpICsKICAgICAgICAgICAgICAgICctJyArCiAgICAgICAgICAgICAgICAoMCwgYy56cGFkKShiLmdldFVUQ01vbnRoKCkgKyAxLCAyKSArCiAgICAgICAgICAgICAgICAnLScgKwogICAgICAgICAgICAgICAgKDAsIGMuenBhZCkoYi5nZXRVVENEYXRlKCksIDIpICsKICAgICAgICAgICAgICAgICdUJyArCiAgICAgICAgICAgICAgICAoMCwgYy56cGFkKShiLmdldFVUQ0hvdXJzKCksIDIpICsKICAgICAgICAgICAgICAgICctJyArCiAgICAgICAgICAgICAgICAoMCwgYy56cGFkKShiLmdldFVUQ01pbnV0ZXMoKSwgMikgKwogICAgICAgICAgICAgICAgJy0nICsKICAgICAgICAgICAgICAgICgwLCBjLnpwYWQpKGIuZ2V0VVRDU2Vjb25kcygpLCAyKSArCiAgICAgICAgICAgICAgICAnLjBaLS0nICsKICAgICAgICAgICAgICAgIHkuYWRkcmVzczsKICAgICAgICAgICAgeVsneC1ldGhlcnMnXSA9IHsKICAgICAgICAgICAgICBjbGllbnQ6IHQsCiAgICAgICAgICAgICAgZ2V0aEZpbGVuYW1lOiBBLAogICAgICAgICAgICAgIHBhdGg6IGksCiAgICAgICAgICAgICAgbG9jYWxlOiBkLAogICAgICAgICAgICAgIG1uZW1vbmljQ291bnRlcjogKDAsIGEuaGV4bGlmeSkoZykuc3Vic3RyaW5nKDIpLAogICAgICAgICAgICAgIG1uZW1vbmljQ2lwaGVydGV4dDogKDAsIGEuaGV4bGlmeSkobSkuc3Vic3RyaW5nKDIpLAogICAgICAgICAgICAgIHZlcnNpb246ICcwLjEnCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoeSk7CiAgICAgICAgfQogICAgICAgICh0LmlzS2V5c3RvcmVKc29uID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBKU09OLnBhcnNlKGUpOwogICAgICAgICAgICBpZiAoMyA9PT0gKG51bGwgIT0gdC52ZXJzaW9uID8gcGFyc2VJbnQodC52ZXJzaW9uKSA6IDApKSByZXR1cm4gITA7CiAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgcmV0dXJuICExOwogICAgICAgIH0pLAogICAgICAgICAgKHQuZGVjcnlwdEtleXN0b3JlSnNvblN5bmMgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICBjb25zdCByID0gSlNPTi5wYXJzZShlKSwKICAgICAgICAgICAgICBuID0gKDAsIGMuZ2V0UGFzc3dvcmQpKHQpLAogICAgICAgICAgICAgIHMgPSBmKHIpOwogICAgICAgICAgICBpZiAoJ3Bia2RmMicgPT09IHMubmFtZSkgewogICAgICAgICAgICAgIGNvbnN0IHsgc2FsdDogZSwgY291bnQ6IHQsIGRrTGVuOiBpLCBhbGdvcml0aG06IGEgfSA9IHM7CiAgICAgICAgICAgICAgcmV0dXJuIGQociwgKDAsIG8ucGJrZGYyKShuLCBlLCB0LCBpLCBhKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKDAsIGEuYXNzZXJ0KSgnc2NyeXB0JyA9PT0gcy5uYW1lLCAnY2Fubm90IGJlIHJlYWNoZWQnLCAnVU5LTk9XTl9FUlJPUicsIHsgcGFyYW1zOiBzIH0pOwogICAgICAgICAgICBjb25zdCB7IHNhbHQ6IGksIE46IHUsIHI6IGwsIHA6IGgsIGRrTGVuOiBnIH0gPSBzOwogICAgICAgICAgICByZXR1cm4gZChyLCAoMCwgby5zY3J5cHRTeW5jKShuLCBpLCB1LCBsLCBoLCBnKSk7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmRlY3J5cHRLZXlzdG9yZUpzb24gPSBhc3luYyBmdW5jdGlvbiAoZSwgdCwgcikgewogICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKSwKICAgICAgICAgICAgICBzID0gKDAsIGMuZ2V0UGFzc3dvcmQpKHQpLAogICAgICAgICAgICAgIGkgPSBmKG4pOwogICAgICAgICAgICBpZiAoJ3Bia2RmMicgPT09IGkubmFtZSkgewogICAgICAgICAgICAgIHIgJiYgKHIoMCksIGF3YWl0IGgoMCkpOwogICAgICAgICAgICAgIGNvbnN0IHsgc2FsdDogZSwgY291bnQ6IHQsIGRrTGVuOiBhLCBhbGdvcml0aG06IGMgfSA9IGksCiAgICAgICAgICAgICAgICB1ID0gKDAsIG8ucGJrZGYyKShzLCBlLCB0LCBhLCBjKTsKICAgICAgICAgICAgICByZXR1cm4gciAmJiAocigxKSwgYXdhaXQgaCgwKSksIGQobiwgdSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgKDAsIGEuYXNzZXJ0KSgnc2NyeXB0JyA9PT0gaS5uYW1lLCAnY2Fubm90IGJlIHJlYWNoZWQnLCAnVU5LTk9XTl9FUlJPUicsIHsgcGFyYW1zOiBpIH0pOwogICAgICAgICAgICBjb25zdCB7IHNhbHQ6IHUsIE46IGwsIHI6IGcsIHAsIGRrTGVuOiBtIH0gPSBpOwogICAgICAgICAgICByZXR1cm4gZChuLCBhd2FpdCAoMCwgby5zY3J5cHQpKHMsIHUsIGwsIGcsIHAsIG0sIHIpKTsKICAgICAgICAgIH0pLAogICAgICAgICAgKHQuZW5jcnlwdEtleXN0b3JlSnNvblN5bmMgPSBmdW5jdGlvbiAoZSwgdCwgcikgewogICAgICAgICAgICBudWxsID09IHIgJiYgKHIgPSB7fSk7CiAgICAgICAgICAgIGNvbnN0IG4gPSAoMCwgYy5nZXRQYXNzd29yZCkodCksCiAgICAgICAgICAgICAgcyA9IGcociksCiAgICAgICAgICAgICAgaSA9ICgwLCBvLnNjcnlwdFN5bmMpKG4sIHMuc2FsdCwgcy5OLCBzLnIsIHMucCwgNjQpOwogICAgICAgICAgICByZXR1cm4gcCgoMCwgYS5nZXRCeXRlcykoaSksIHMsIGUsIHIpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5lbmNyeXB0S2V5c3RvcmVKc29uID0gYXN5bmMgZnVuY3Rpb24gKGUsIHQsIHIpIHsKICAgICAgICAgICAgbnVsbCA9PSByICYmIChyID0ge30pOwogICAgICAgICAgICBjb25zdCBuID0gKDAsIGMuZ2V0UGFzc3dvcmQpKHQpLAogICAgICAgICAgICAgIHMgPSBnKHIpLAogICAgICAgICAgICAgIGkgPSBhd2FpdCAoMCwgby5zY3J5cHQpKG4sIHMuc2FsdCwgcy5OLCBzLnIsIHMucCwgNjQsIHIucHJvZ3Jlc3NDYWxsYmFjayk7CiAgICAgICAgICAgIHJldHVybiBwKCgwLCBhLmdldEJ5dGVzKShpKSwgcywgZSwgcik7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgOTEzMjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuTW5lbW9uaWMgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDk4NzIpLAogICAgICAgICAgcyA9IHIoNTMxNiksCiAgICAgICAgICBvID0gcigyMTQ0KTsKICAgICAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgICAgIHJldHVybiAoKCgxIDw8IGUpIC0gMSkgPDwgKDggLSBlKSkgJiAyNTU7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICAgICAgKDAsIHMuYXNzZXJ0Tm9ybWFsaXplKSgnTkZLRCcpLCBudWxsID09IHQgJiYgKHQgPSBvLkxhbmdFbi53b3JkbGlzdCgpKTsKICAgICAgICAgIGNvbnN0IHIgPSB0LnNwbGl0KGUpOwogICAgICAgICAgKDAsIHMuYXNzZXJ0QXJndW1lbnQpKAogICAgICAgICAgICByLmxlbmd0aCAlIDMgPT0gMCAmJiByLmxlbmd0aCA-PSAxMiAmJiByLmxlbmd0aCA8PSAyNCwKICAgICAgICAgICAgJ2ludmFsaWQgbW5lbW9uaWMgbGVuZ3RoJywKICAgICAgICAgICAgJ21uZW1vbmljJywKICAgICAgICAgICAgJ1sgUkVEQUNURUQgXScKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCBhID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKCgxMSAqIHIubGVuZ3RoKSAvIDgpKTsKICAgICAgICAgIGxldCBjID0gMDsKICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgci5sZW5ndGg7IGUrKykgewogICAgICAgICAgICBsZXQgbiA9IHQuZ2V0V29yZEluZGV4KHJbZV0ubm9ybWFsaXplKCdORktEJykpOwogICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkobiA-PSAwLCBgaW52YWxpZCBtbmVtb25pYyB3b3JkIGF0IGluZGV4ICR7ZX1gLCAnbW5lbW9uaWMnLCAnWyBSRURBQ1RFRCBdJyk7CiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgMTE7IGUrKykgbiAmICgxIDw8ICgxMCAtIGUpKSAmJiAoYVtjID4-IDNdIHw9IDEgPDwgKDcgLSAoYyAlIDgpKSksIGMrKzsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IHUgPSAoMzIgKiByLmxlbmd0aCkgLyAzLAogICAgICAgICAgICBsID0gaShyLmxlbmd0aCAvIDMpLAogICAgICAgICAgICBkID0gKDAsIHMuZ2V0Qnl0ZXMpKCgwLCBuLnNoYTI1NikoYS5zbGljZSgwLCB1IC8gOCkpKVswXSAmIGw7CiAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAoMCwgcy5hc3NlcnRBcmd1bWVudCkoZCA9PT0gKGFbYS5sZW5ndGggLSAxXSAmIGwpLCAnaW52YWxpZCBtbmVtb25pYyBjaGVja3N1bScsICdtbmVtb25pYycsICdbIFJFREFDVEVEIF0nKSwKICAgICAgICAgICAgKDAsIHMuaGV4bGlmeSkoYS5zbGljZSgwLCB1IC8gOCkpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBjKGUsIHQpIHsKICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSgKICAgICAgICAgICAgZS5sZW5ndGggJSA0ID09IDAgJiYgZS5sZW5ndGggPj0gMTYgJiYgZS5sZW5ndGggPD0gMzIsCiAgICAgICAgICAgICdpbnZhbGlkIGVudHJvcHkgc2l6ZScsCiAgICAgICAgICAgICdlbnRyb3B5JywKICAgICAgICAgICAgJ1sgUkVEQUNURUQgXScKICAgICAgICAgICksCiAgICAgICAgICAgIG51bGwgPT0gdCAmJiAodCA9IG8uTGFuZ0VuLndvcmRsaXN0KCkpOwogICAgICAgICAgY29uc3QgciA9IFswXTsKICAgICAgICAgIGxldCBhID0gMTE7CiAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspCiAgICAgICAgICAgIGEgPiA4CiAgICAgICAgICAgICAgPyAoKHJbci5sZW5ndGggLSAxXSA8PD0gOCksIChyW3IubGVuZ3RoIC0gMV0gfD0gZVt0XSksIChhIC09IDgpKQogICAgICAgICAgICAgIDogKChyW3IubGVuZ3RoIC0gMV0gPDw9IGEpLAogICAgICAgICAgICAgICAgKHJbci5sZW5ndGggLSAxXSB8PSBlW3RdID4-ICg4IC0gYSkpLAogICAgICAgICAgICAgICAgci5wdXNoKGVbdF0gJiAoKDEgPDwgKDggLSBhKSkgLSAxKSAmIDI1NSksCiAgICAgICAgICAgICAgICAoYSArPSAzKSk7CiAgICAgICAgICBjb25zdCBjID0gZS5sZW5ndGggLyA0LAogICAgICAgICAgICB1ID0gcGFyc2VJbnQoKDAsIG4uc2hhMjU2KShlKS5zdWJzdHJpbmcoMiwgNCksIDE2KSAmIGkoYyk7CiAgICAgICAgICByZXR1cm4gKHJbci5sZW5ndGggLSAxXSA8PD0gYyksIChyW3IubGVuZ3RoIC0gMV0gfD0gdSA-PiAoOCAtIGMpKSwgdC5qb2luKHIubWFwKChlKSA9PiB0LmdldFdvcmQoZSkpKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgdSA9IHt9OwogICAgICAgIGNsYXNzIGwgewogICAgICAgICAgcGhyYXNlOwogICAgICAgICAgcGFzc3dvcmQ7CiAgICAgICAgICB3b3JkbGlzdDsKICAgICAgICAgIGVudHJvcHk7CiAgICAgICAgICBjb25zdHJ1Y3RvcihlLCB0LCByLCBuLCBpKSB7CiAgICAgICAgICAgIG51bGwgPT0gbiAmJiAobiA9ICcnKSwKICAgICAgICAgICAgICBudWxsID09IGkgJiYgKGkgPSBvLkxhbmdFbi53b3JkbGlzdCgpKSwKICAgICAgICAgICAgICAoMCwgcy5hc3NlcnRQcml2YXRlKShlLCB1LCAnTW5lbW9uaWMnKSwKICAgICAgICAgICAgICAoMCwgcy5kZWZpbmVQcm9wZXJ0aWVzKSh0aGlzLCB7IHBocmFzZTogciwgcGFzc3dvcmQ6IG4sIHdvcmRsaXN0OiBpLCBlbnRyb3B5OiB0IH0pOwogICAgICAgICAgfQogICAgICAgICAgY29tcHV0ZVNlZWQoKSB7CiAgICAgICAgICAgIGNvbnN0IGUgPSAoMCwgcy50b1V0ZjhCeXRlcykoJ21uZW1vbmljJyArIHRoaXMucGFzc3dvcmQsICdORktEJyk7CiAgICAgICAgICAgIHJldHVybiAoMCwgbi5wYmtkZjIpKCgwLCBzLnRvVXRmOEJ5dGVzKSh0aGlzLnBocmFzZSwgJ05GS0QnKSwgZSwgMjA0OCwgNjQsICdzaGE1MTInKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tUGhyYXNlKGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgbiA9IGEoZSwgcik7CiAgICAgICAgICAgIHJldHVybiAoZSA9IGMoKDAsIHMuZ2V0Qnl0ZXMpKG4pLCByKSksIG5ldyBsKHUsIG4sIGUsIHQsIHIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb21FbnRyb3B5KGUsIHQsIHIpIHsKICAgICAgICAgICAgY29uc3QgbiA9ICgwLCBzLmdldEJ5dGVzKShlLCAnZW50cm9weScpLAogICAgICAgICAgICAgIG8gPSBjKG4sIHIpOwogICAgICAgICAgICByZXR1cm4gbmV3IGwodSwgKDAsIHMuaGV4bGlmeSkobiksIG8sIHQsIHIpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGVudHJvcHlUb1BocmFzZShlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBjKCgwLCBzLmdldEJ5dGVzKShlLCAnZW50cm9weScpLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBwaHJhc2VUb0VudHJvcHkoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gYShlLCB0KTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBpc1ZhbGlkTW5lbW9uaWMoZSwgdCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHJldHVybiBhKGUsIHQpLCAhMDsKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0Lk1uZW1vbmljID0gbDsKICAgICAgfSwKICAgICAgOTE5MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwKICAgICAgICAgICh0LnNwZWx1bmsgPSB0LmdldFBhc3N3b3JkID0gdC56cGFkID0gdC5sb29zZUFycmF5aWZ5ID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig1MzE2KTsKICAgICAgICBmdW5jdGlvbiBzKGUpIHsKICAgICAgICAgIHJldHVybiAnc3RyaW5nJyAhPSB0eXBlb2YgZSB8fCBlLnN0YXJ0c1dpdGgoJzB4JykgfHwgKGUgPSAnMHgnICsgZSksICgwLCBuLmdldEJ5dGVzQ29weSkoZSk7CiAgICAgICAgfQogICAgICAgICh0Lmxvb3NlQXJyYXlpZnkgPSBzKSwKICAgICAgICAgICh0LnpwYWQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICBmb3IgKGUgPSBTdHJpbmcoZSk7IGUubGVuZ3RoIDwgdDsgKSBlID0gJzAnICsgZTsKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICB9KSwKICAgICAgICAgICh0LmdldFBhc3N3b3JkID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuICdzdHJpbmcnID09IHR5cGVvZiBlID8gKDAsIG4udG9VdGY4Qnl0ZXMpKGUsICdORktDJykgOiAoMCwgbi5nZXRCeXRlc0NvcHkpKGUpOwogICAgICAgICAgfSksCiAgICAgICAgICAodC5zcGVsdW5rID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IHQubWF0Y2goL14oW2EtejAtOSRfLi1dKikoOihbYS16XSspKT8oISk_JC9pKTsKICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKG51bGwgIT0gciwgJ2ludmFsaWQgcGF0aCcsICdwYXRoJywgdCk7CiAgICAgICAgICAgIGNvbnN0IG8gPSByWzFdLAogICAgICAgICAgICAgIGkgPSByWzNdLAogICAgICAgICAgICAgIGEgPSAnIScgPT09IHJbNF07CiAgICAgICAgICAgIGxldCBjID0gZTsKICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG8udG9Mb3dlckNhc2UoKS5zcGxpdCgnLicpKSB7CiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYykpIHsKICAgICAgICAgICAgICAgIGlmICghZS5tYXRjaCgvXlswLTldKyQvKSkgYnJlYWs7CiAgICAgICAgICAgICAgICBjID0gY1twYXJzZUludChlKV07CiAgICAgICAgICAgICAgfSBlbHNlIGlmICgnb2JqZWN0JyA9PSB0eXBlb2YgYykgewogICAgICAgICAgICAgICAgbGV0IHQgPSBudWxsOwogICAgICAgICAgICAgICAgZm9yIChjb25zdCByIGluIGMpCiAgICAgICAgICAgICAgICAgIGlmIChyLnRvTG93ZXJDYXNlKCkgPT09IGUpIHsKICAgICAgICAgICAgICAgICAgICB0ID0gY1tyXTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYyA9IHQ7CiAgICAgICAgICAgICAgfSBlbHNlIGMgPSBudWxsOwogICAgICAgICAgICAgIGlmIChudWxsID09IGMpIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoKDAsIG4uYXNzZXJ0QXJndW1lbnQpKCFhIHx8IG51bGwgIT0gYywgJ21pc3NpbmcgcmVxdWlyZWQgdmFsdWUnLCAncGF0aCcsIG8pLCBpICYmIG51bGwgIT0gYykpIHsKICAgICAgICAgICAgICBpZiAoJ2ludCcgPT09IGkpIHsKICAgICAgICAgICAgICAgIGlmICgnc3RyaW5nJyA9PSB0eXBlb2YgYyAmJiBjLm1hdGNoKC9eLT9bMC05XSskLykpIHJldHVybiBwYXJzZUludChjKTsKICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNTYWZlSW50ZWdlcihjKSkgcmV0dXJuIGM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgnbnVtYmVyJyA9PT0gaSAmJiAnc3RyaW5nJyA9PSB0eXBlb2YgYyAmJiBjLm1hdGNoKC9eLT9bMC05Ll0qJC8pKSByZXR1cm4gcGFyc2VGbG9hdChjKTsKICAgICAgICAgICAgICBpZiAoJ2RhdGEnID09PSBpICYmICdzdHJpbmcnID09IHR5cGVvZiBjKSByZXR1cm4gcyhjKTsKICAgICAgICAgICAgICBpZiAoJ2FycmF5JyA9PT0gaSAmJiBBcnJheS5pc0FycmF5KGMpKSByZXR1cm4gYzsKICAgICAgICAgICAgICBpZiAoaSA9PT0gdHlwZW9mIGMpIHJldHVybiBjOwogICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSghMSwgYHdyb25nIHR5cGUgZm91bmQgZm9yICR7aX0gYCwgJ3BhdGgnLCBvKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgIH0pOwogICAgICB9LAogICAgICA4MDQwOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5XYWxsZXQgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDk4NzIpLAogICAgICAgICAgcyA9IHIoNTMxNiksCiAgICAgICAgICBvID0gcigzODApLAogICAgICAgICAgaSA9IHIoNDYwMCksCiAgICAgICAgICBhID0gcig4NzcyKSwKICAgICAgICAgIGMgPSByKDk2NTIpLAogICAgICAgICAgdSA9IHIoOTEzMik7CiAgICAgICAgZnVuY3Rpb24gbChlKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHQpID0-IHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgdCgpOwogICAgICAgICAgICB9LCBlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBjbGFzcyBkIGV4dGVuZHMgby5CYXNlV2FsbGV0IHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUsIHQpIHsKICAgICAgICAgICAgJ3N0cmluZycgIT0gdHlwZW9mIGUgfHwgZS5zdGFydHNXaXRoKCcweCcpIHx8IChlID0gJzB4JyArIGUpLAogICAgICAgICAgICAgIHN1cGVyKCdzdHJpbmcnID09IHR5cGVvZiBlID8gbmV3IG4uU2lnbmluZ0tleShlKSA6IGUsIHQpOwogICAgICAgICAgfQogICAgICAgICAgY29ubmVjdChlKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgZCh0aGlzLnNpZ25pbmdLZXksIGUpOwogICAgICAgICAgfQogICAgICAgICAgYXN5bmMgZW5jcnlwdChlLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IHIgPSB7IGFkZHJlc3M6IHRoaXMuYWRkcmVzcywgcHJpdmF0ZUtleTogdGhpcy5wcml2YXRlS2V5IH07CiAgICAgICAgICAgIHJldHVybiBhd2FpdCAoMCwgYy5lbmNyeXB0S2V5c3RvcmVKc29uKShyLCBlLCB7IHByb2dyZXNzQ2FsbGJhY2s6IHQgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbmNyeXB0U3luYyhlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB7IGFkZHJlc3M6IHRoaXMuYWRkcmVzcywgcHJpdmF0ZUtleTogdGhpcy5wcml2YXRlS2V5IH07CiAgICAgICAgICAgIHJldHVybiAoMCwgYy5lbmNyeXB0S2V5c3RvcmVKc29uU3luYykodCwgZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgI190KGUpIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICgoMCwgcy5hc3NlcnRBcmd1bWVudCkoZSwgJ2ludmFsaWQgSlNPTiB3YWxsZXQnLCAnanNvbicsICdbIFJFREFDVEVEIF0nKSwKICAgICAgICAgICAgICAnbW5lbW9uaWMnIGluIGUgJiYgZS5tbmVtb25pYyAmJiAnZW4nID09PSBlLm1uZW1vbmljLmxvY2FsZSkKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgY29uc3QgdCA9IHUuTW5lbW9uaWMuZnJvbUVudHJvcHkoZS5tbmVtb25pYy5lbnRyb3B5KSwKICAgICAgICAgICAgICAgIHIgPSBpLkhETm9kZVdhbGxldC5mcm9tTW5lbW9uaWModCwgZS5tbmVtb25pYy5wYXRoKTsKICAgICAgICAgICAgICBpZiAoci5hZGRyZXNzID09PSBlLmFkZHJlc3MgJiYgci5wcml2YXRlS2V5ID09PSBlLnByaXZhdGVLZXkpIHJldHVybiByOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXQVJOSU5HOiBKU09OIG1pc21hdGNoIGFkZHJlc3MvcHJpdmF0ZUtleSAhPSBtbmVtb25pYzsgZmFsbGJhY2sgb250byBwcml2YXRlIGtleScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgZChlLnByaXZhdGVLZXkpOwogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBzLmFzc2VydEFyZ3VtZW50KSh0LmFkZHJlc3MgPT09IGUuYWRkcmVzcywgJ2FkZHJlc3MvcHJpdmF0ZUtleSBtaXNtYXRjaCcsICdqc29uJywgJ1sgUkVEQUNURUQgXScpLCB0CiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgYXN5bmMgZnJvbUVuY3J5cHRlZEpzb24oZSwgdCwgcikgewogICAgICAgICAgICBsZXQgbiA9IG51bGw7CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgKDAsIGMuaXNLZXlzdG9yZUpzb24pKGUpCiAgICAgICAgICAgICAgICA_IChuID0gYXdhaXQgKDAsIGMuZGVjcnlwdEtleXN0b3JlSnNvbikoZSwgdCwgcikpCiAgICAgICAgICAgICAgICA6ICgwLCBhLmlzQ3Jvd2RzYWxlSnNvbikoZSkgJiYKICAgICAgICAgICAgICAgICAgKHIgJiYgKHIoMCksIGF3YWl0IGwoMCkpLCAobiA9ICgwLCBhLmRlY3J5cHRDcm93ZHNhbGVKc29uKShlLCB0KSksIHIgJiYgKHIoMSksIGF3YWl0IGwoMCkpKSwKICAgICAgICAgICAgICBkLiNfdChuKQogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIGZyb21FbmNyeXB0ZWRKc29uU3luYyhlLCB0KSB7CiAgICAgICAgICAgIGxldCByID0gbnVsbDsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAoMCwgYy5pc0tleXN0b3JlSnNvbikoZSkKICAgICAgICAgICAgICAgID8gKHIgPSAoMCwgYy5kZWNyeXB0S2V5c3RvcmVKc29uU3luYykoZSwgdCkpCiAgICAgICAgICAgICAgICA6ICgwLCBhLmlzQ3Jvd2RzYWxlSnNvbikoZSkKICAgICAgICAgICAgICAgICAgPyAociA9ICgwLCBhLmRlY3J5cHRDcm93ZHNhbGVKc29uKShlLCB0KSkKICAgICAgICAgICAgICAgICAgOiAoMCwgcy5hc3NlcnRBcmd1bWVudCkoITEsICdpbnZhbGlkIEpTT04gd2FsbGV0JywgJ2pzb24nLCAnWyBSRURBQ1RFRCBdJyksCiAgICAgICAgICAgICAgZC4jX3QocikKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBjcmVhdGVSYW5kb20oZSkgewogICAgICAgICAgICBjb25zdCB0ID0gaS5IRE5vZGVXYWxsZXQuY3JlYXRlUmFuZG9tKCk7CiAgICAgICAgICAgIHJldHVybiBlID8gdC5jb25uZWN0KGUpIDogdDsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyBmcm9tUGhyYXNlKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9IGkuSEROb2RlV2FsbGV0LmZyb21QaHJhc2UoZSk7CiAgICAgICAgICAgIHJldHVybiB0ID8gci5jb25uZWN0KHQpIDogcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5XYWxsZXQgPSBkOwogICAgICB9LAogICAgICAyMzg4OiAoZSwgdCkgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLAogICAgICAgICAgKHQuZGVjb2RlQml0cyA9IHZvaWQgMCksCiAgICAgICAgICAodC5kZWNvZGVCaXRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgICAgY29uc3QgciA9ICgxIDw8IGUpIC0gMSwKICAgICAgICAgICAgICBuID0gW107CiAgICAgICAgICAgIGxldCBzID0gMCwKICAgICAgICAgICAgICBvID0gMCwKICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgYSA9IDA7IGEgPCB0Lmxlbmd0aDsgYSsrKQogICAgICAgICAgICAgIGZvciAoCiAgICAgICAgICAgICAgICBzID0gKHMgPDwgNikgfCAnKSFAIyQlXiYqKEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXotXycuaW5kZXhPZih0W2FdKSwgbyArPSA2OwogICAgICAgICAgICAgICAgbyA-PSBlOwoKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBzID4-IChvIC0gZSk7CiAgICAgICAgICAgICAgICAocyAmPSAoMSA8PCAobyAtIGUpKSAtIDEpLCAobyAtPSBlKSwgMCA9PT0gdCA_IChpICs9IHIpIDogKG4ucHVzaCh0ICsgaSksIChpID0gMCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNzUzMjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuZGVjb2RlT3dsID0gdC5kZWNvZGUgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDUzMTYpLAogICAgICAgICAgcyA9ICIgISMkJSYnKCkqKywtLi88PT4_QFtdXl9ge3x9fiIsCiAgICAgICAgICBvID0gL15bYS16XSokL2k7CiAgICAgICAgZnVuY3Rpb24gaShlLCB0KSB7CiAgICAgICAgICBsZXQgciA9IDk3OwogICAgICAgICAgcmV0dXJuIGUucmVkdWNlKAogICAgICAgICAgICAoZSwgbikgPT4gKG4gPT09IHQgPyByKysgOiBuLm1hdGNoKG8pID8gZS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocikgKyBuKSA6ICgociA9IDk3KSwgZS5wdXNoKG4pKSwgZSksCiAgICAgICAgICAgIFtdCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhKGUsIHQpIHsKICAgICAgICAgIGZvciAobGV0IHIgPSAyODsgciA-PSAwOyByLS0pIGUgPSBlLnNwbGl0KHNbcl0pLmpvaW4odC5zdWJzdHJpbmcoMiAqIHIsIDIgKiByICsgMikpOwogICAgICAgICAgY29uc3QgciA9IFtdLAogICAgICAgICAgICBuID0gZS5yZXBsYWNlKC8oOnwoWzAtOV0pfChbQS1aXVthLXpdKikpL2csIChlLCB0LCBuLCBzKSA9PiB7CiAgICAgICAgICAgICAgaWYgKG4pIGZvciAobGV0IGUgPSBwYXJzZUludChuKTsgZSA-PSAwOyBlLS0pIHIucHVzaCgnOycpOwogICAgICAgICAgICAgIGVsc2Ugci5wdXNoKHQudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChuKSB0aHJvdyBuZXcgRXJyb3IoYGxlZnRvdmVyczogJHtKU09OLnN0cmluZ2lmeShuKX1gKTsKICAgICAgICAgIHJldHVybiBpKGkociwgJzsnKSwgJzonKTsKICAgICAgICB9CiAgICAgICAgKHQuZGVjb2RlID0gYSksCiAgICAgICAgICAodC5kZWNvZGVPd2wgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICgwLCBuLmFzc2VydEFyZ3VtZW50KSgnMCcgPT09IGVbMF0sICd1bnN1cHBvcnRlZCBhdXdsIGRhdGEnLCAnZGF0YScsIGUpLAogICAgICAgICAgICAgIGEoZS5zdWJzdHJpbmcoNTkpLCBlLnN1YnN0cmluZygxLCA1OSkpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNjM0ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuZGVjb2RlT3dsQSA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTMxNiksCiAgICAgICAgICBzID0gcigyMzg4KSwKICAgICAgICAgIG8gPSByKDc1MzIpOwogICAgICAgIHQuZGVjb2RlT3dsQSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICBsZXQgciA9ICgwLCBvLmRlY29kZU93bCkoZSkuam9pbignLCcpOwogICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgdC5zcGxpdCgvLC9nKS5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgbyA9IGUubWF0Y2goL14oW2Etel0qKShbMC05XSspKFswLTldKSguKikkLyk7CiAgICAgICAgICAgICAgKDAsIG4uYXNzZXJ0QXJndW1lbnQpKG51bGwgIT09IG8sICdpbnRlcm5hbCBlcnJvciBwYXJzaW5nIGFjY2VudHMnLCAnYWNjZW50cycsIHQpOwogICAgICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgICAgICBjb25zdCBhID0gKDAsIHMuZGVjb2RlQml0cykocGFyc2VJbnQob1szXSksIG9bNF0pLAogICAgICAgICAgICAgICAgYyA9IHBhcnNlSW50KG9bMl0pLAogICAgICAgICAgICAgICAgdSA9IG5ldyBSZWdFeHAoYChbJHtvWzFdfV0pYCwgJ2cnKTsKICAgICAgICAgICAgICByID0gci5yZXBsYWNlKHUsIChlLCB0KSA9PiAoMCA9PSAtLWFbaV0gJiYgKCh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZSh0LmNoYXJDb2RlQXQoMCksIGMpKSwgaSsrKSwgdCkpOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgci5zcGxpdCgnLCcpCiAgICAgICAgICApOwogICAgICAgIH07CiAgICAgIH0sCiAgICAgIDY0OTI6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksCiAgICAgICAgICAodC53b3JkbGlzdHMgPSB0LldvcmRsaXN0T3dsQSA9IHQuV29yZGxpc3RPd2wgPSB0LkxhbmdFbiA9IHQuV29yZGxpc3QgPSB2b2lkIDApOwogICAgICAgIHZhciBuID0gcigyMTA4KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1dvcmRsaXN0JywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG4uV29yZGxpc3Q7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHMgPSByKDIxNDQpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnTGFuZ0VuJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHMuTGFuZ0VuOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBvID0gcig0OTQ0KTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ1dvcmRsaXN0T3dsJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIG8uV29yZGxpc3RPd2w7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGkgPSByKDc0OTYpOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnV29yZGxpc3RPd2xBJywgewogICAgICAgICAgZW51bWVyYWJsZTogITAsCiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIGkuV29yZGxpc3RPd2xBOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHZhciBhID0gcig5NDcyKTsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ3dvcmRsaXN0cycsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBhLndvcmRsaXN0czsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgNzE2ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuTGFuZ0N6ID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig0OTQ0KTsKICAgICAgICBsZXQgcyA9IG51bGw7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIG4uV29yZGxpc3RPd2wgewogICAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKAogICAgICAgICAgICAgICdjeicsCiAgICAgICAgICAgICAgIjBpdGF0a2FzdGNlbmFvdm8kdGFvdWxlcmFla2kmY2hvcip0ZWNpJWVuYmFsb2RhZWxhZGV0JyFDaG49MERpIyVFJV4xUmVzYTJSZXNlM0NlVCcjMEVqS29ob2wwUHUpJTBBJnNEdWwjRWtkbylLZSlUaSNVbHwzfWFPZ2FuJTBGYWx0SSRAdFBpLCVUbWFUcm9ub20wTGFzTHtpI09sMFRvYnVzNFlsOkIjfTxDaWxDdWwjRCFfR2UpR3JIbm9LdGVyaWVMYV5MeyNMa29uTG9uLUx2YW5MemFNYnVzTmtvbSFSW3JSe1JtYW5Sb2tvUnZhVGVyI1RvaFZsJlphbCNaaWxpI1p1IzNEJlJhblNlXlN0aWVUb25aaW4jWm1vY1opazNDeWtsRF1GdC1LaW55TGFuJU9nLGZPXWdUdmFab24yQWhvYnl0QXQqL0UvYUVkdStFc2tJayFJeiZPa3xPdWQgVWQyQi1CckRsLkR-SCEoSmtvdEp8Szx5c0xlJFI-Uic_VGFVYl9VLyFVXlUrVXIhWGVyMkFediNBbWJvLEFuI0F0ckVwKUlrZSlLb0xvaE9uek9za2V2VW57I1VzaW4jWl5aeTJCbC5Cbnx9KUQgX0QjRCdhRntKYXIoS3Y_TGRva0x2YU5eTmtyUnphVGlrVm9sWm9sYTNEK3RMLlQnIzBVa290OlBhcnRSZXYmM0RyRHUrSi9KbkxhTGVyTGtlbUxuP04uTm4oTicjTnRydW1OejxTdG9waXNUIzJBbHVwYUFwYF1BciBhQSlFL3QhRW1pZUkvb3RJcnVyZ0xgTGVbTHViIE1fTXUsT2JvdE8vb2xPZFtPKyxPbT1PcCBPcm9bT3ZSYXBvdFJsIFJ0UnVwVGl2KFVkLlV0biFWIVZpbCNWKFlbWSQhWXQgMEJ1K0dhcmUpSF8mSGxhTmtvdFJrdXNTdGVyJlRhJVRydXNaaW4-WigyTyYyS29saXZVdiE0SXRfTigwRG4oS2UpS3JQb3QwQWt-QWxJa1Jrb3QyS2xpJGE6TC1vUmVbVF9UdW0xRSwxQiFhfScjQ2liX0ZpYyBGbGElS2xLcntNb2tyIVByZXNlUmJ5UyNULXRpdjNLb2Isekt0fE9eUF1tU2tTcCtqVmBdVm8vMkFoYU91aG9VaG9waXMxRXMwQnJvQnl0LUNAdH11dCBEbmVzSCtkSG9eSCxKZW1Kbj9LbGBLb2xhS3Q8S3VtQHRMYXJMZXZhTC5NYU0ubnRNbHV2IE0nTnV0IFBgUGlzUGxuIFBvc3VkUHInb2RQdSQgUmF6IFIoUnRTYWhTbCdTdCEtU3VkU3kpVGF6VC1Ua35VZiFVdG4hVm96JVpgdVpuIVo8JTJBaG8pQWtBbSFpa0F2PkF6ZURvbE9ibihPZ2VyaWVPemRTbihUIFooMkJAfSdub0QtSGFIJyNTIFNub1QoME9qP09yPjJOYW0gOjlPXWdPbm9taWUwRWt0cm9uSXBzYTBBaWxJc2VPJVAhaWUySXpvXk8vYU9wZWpPczJFakVuJUs8KUt5bW8wSWtlKTBGPGllME9sdSUxRWt1JUt1cnplUGVkP1BdemVQPHRULGt0OkMjSmYjS3VsKU4haWtOKXppZVJtYWNpZVY8IFpvKzNEZSwlSntvbk4jM0FsI0d1LG50TG96b2ZMdHJOYW4lTilYYSUwT3JkMUFuX0lydE90aWxhMk5kU2Y8VFtsVCNUb24yQWslRXMjT24pMkthck5rJTNaaSM6TGVqZVJhbnQzTntpI09dZzNMb3QuMkF6dSxFanQyTGVtTGZpJGFUaSMyQWZBbW9mb25BbnUrRXBJbE9nT3RlcyMyTWE6RD9EckxhTEAjTltOb3Bpc1JmYVJwdSZWLG4zQmsoSiNsSm5vSnRtYW5LKXJMbWFNIW9tUj5SJlNdWmt5M1N0PGlrMkFkJyNBc2l2a3lBdmFFZCFFbk9edj5PaE91cChUIVViLlUvbykwQXRPKVl6MElzT2ppdm9PdXQwQmwuQm9qfURpbnlEbCFEbm8pRHxKbihLZWpMaW4jTCNMdWJNbytOIFtObywlUmFsUl5SaXpvbnRSa29SbGl2PlJtb25Sbi5Sb3Nrb3BSJHZvU3BvXlN0LlQnKFVbVWZVcCFVcyNWPDJBZFtBbj9BdihBel5CbytrRC5EXUQoTi1PYiNPbWFeT3RPdV5PekBTdCNVYihZeiEyQkAoQn5EW0tvdE1yUyBhU3RvKTBPemQyQm4oRCxudEdpZSZNJlN0ZXJpazoyWWwjM05lZDJPJjBVemUwVW4gYTBGLSVGbGElS2Fzb092YSVTcC0lVGVybntWYWxpXlZlJDxaZXIlM09uaWU6Qmxrb30pSG9eS21pK0soTCc-TilyUm1hcmtSb1NhblNub1QjVjxaeWszRGluPkQrRG4hX0hsYW5Lb3RMQEwgb01uKE5vbVA_U3tlclYgWmQ-WmVybzNOYWtOZHlOby9TayxTdG8pVHJuP1p2YTNFbnwxR3VydDVSKTpCYXJ7Ql9CaW57fSZEe0RpZF1IYW5KYWtKdSlLYW9LdHVzTGFtIGFMaG90eUxpYnJMbihNZSxNa29saXZNJk5pW2xOb2VOdDxQYWwuUF9hUCBvbGFQI1ArUG8pUHJQdSRhUHlbLFJhbV9Sb3QjUnRvblNhVGFdZ1RlZCxVJVV6YVZhK2NaYWojWmUpWml2KDJFa29saXZFc2kwRGx1YkBNcFJhbWkjM05vMkEla0FkaXZvQW1BcG90QXNpI0F1bkVjRW5bRXAhRXN-SWRJbWFJcyZPYiprTyNuT3BhT3ViVWInJlVzIVV6aygwRW5JdCFPdHIwSWhhT3QwQWw_QmVyPkIjQmxpaGFCeWxhQypySD1KQD5Lb3NLdGVqbExhcHNMZV5MaXplTG9NYW5kb01lKU1pa01uIWFNbyxNcGFzTXVuIGFOIU4lcHROZD9OPk5mZXNlTmdyZXNOLk5rdXJzTilrdE56ZXJ2YVBhbj5QaWVQflByJyNSYl9SLXQ8Um1pZF1Sb3B0ZXZScHVzUnUmUnl0b1J6e1MhPlN0I1RfVCspVCpsVWshVXBfJlVzLVV6XVZib2paYVo8b2gyQWI_QS9Bai5BbHxBc29waXNBdiFhRWQgRWpjYXJFc1tFdmUpSWt7SXRpa0l6ZUthdj5NZStjTWl2b09jYW5Pa09uaSNPcCBPdXBhT3YjVC1VaGBdVXA_VXQoVmluI1kvK1lwKVkkYWxZdDJEbGFuI0ZySm4oS2xhTGFqXkxpL0wjTG9te0x0dSxOYVBvZGl2dVJ0Uno8VGlsMEFsIGFBc2luI0UkPDJOb11nU18uVGEsVD9UI1QnPlZgXTpCLGQ8fSluRG4oSWtLb20-TV9hTXBhTicjUz9Tb1N0dSxUaW4jVi4zQiNDa2R5REBEbj9EJyNEdi5HQF5HaWVHLCVIJUhrKEh-S3R2YXJOby9vZE50aWwjUEAjUGlkXVRgXVQ-VG1vVG9rcnVoVmhhcnRWIGElVm9ib2szQix9b3QjRG9qZWREc2soSCcuSmF2PkwtTXsjTmllTiNObyt1bVN0b3BgVC5UfDVCaSRhRGl2b2RHaSNHb3BlZEthbCBhS3tNY3xQIWFQdS9SZFNvc1RyVV5sVWhVI1VzayFWPjNUaXYoMUNlciZDaWZlck1wU2tTdCwlMEklMlJhUmkjUy46RGFtRF1HaSRySGFnb25Key1KIF9KPCBhS2FrSyc_S3JfYUxbTC5MfEx2P01pbiNOZCtOa29SbihTYWtyU2tvdFNvcHUkVD9UcmkjVHVyIGFaYW4-Wml2b1psIFp1ciMyTG9bMH1hbmlrRCBhJUQnLkxhc2FMKm5OdG9sI1RsYVRvXlRyWmUsM0csJUh-SHUrSy5Lcm9mb25MQD5MaW17ckwoTWkjTmMnJk5pW3JOb217TnVsKFMjU3RyWHwyQWQoSGFIJy5Pa1MhVXYgMUkvT2hlbTBCaWxDbihEXyNEbCBbSHlsYUtyb0wtdWxhTUB0I05hci9hTm9rbE4kcnVtTnR8Tnp1blNhelNreXRTdFRpdmElVDwjVHkjVS9hVWRyKFphaSNaLVpvbDJBbTxBdkA-S2V2VHZvbGFae1p1dCgwVCBfMURyY0ZdbkwhTWllTj9Te1RhJVpldW1aaSNudDNTbGl2PjBEYTpCKnIhfXl0IURhJURieXQtRGhvekRvYnJvRHBpc0hsYXNIbiFIb2RpK0gsZCBJdiBhSmVkbipKaSRvSm09S11uIEtvbj5Lcm0gTGV2b01heiFNbHV2IE5vbXtyT2tvT3Bha08kcm9QYCFQZXZub1BsbiBQflBvcytkUHIob1JvZCBSdWJ5UnkvXVNgIFMtIVMrcG9TdCFUb2xpa1ZALVZyL1Z6ZDx5WnYhM0JlfSFDa3lEYStrb0RiIUR1aEdhJUh7SG9eSkBKcHJ2ZUtsaWRMaWIoTWlsKE1vY08vbylPbiNQb2tvalIoUnZTbXlzbFMqbGBUdjxVcm9uVi5adnlrKzNDbylKYWtLYW1LZHlLbEt0ZSxrVHJvNUMraEhhdj9NLiVSYVItUyBfU24oVXplVmlueVZvKVpkLDVEYUQrR3tUIFRuKFRyaWUzTWZhOjBBbEFydiBBdmFEaXZFY0VobiFFam09RXogYUhham9bSWxuP0phc24gSi10S11wIExhJEwtTGlbTG9oYUx1Xk5vc09oISBPai1PdXRSYXo-UiZSdVtSeXNTYWhTbHVoYVMpciFVdlZhelZpbiBWb2RWeWsrWXYhX1o8MEFzRWxFbiBIbGAgSG8pSCwmSXR-MEJvakJ5dH1vZENpeiBFYnIhRXNsIUV2emQhRXp2YUhgJUhvZCBKe0ppbnVkS2F6SypwIExpdkx1I01sI09sbihQYFBpc1BsPVA8UHUkIFB5ayFSYXojUypkIFN0dXBTdW5Ub2tUdWRWYWhhVmUpVm9sIVYsJXRaJmsxSSZTYWpkMUxhc05pc2tvUmFeUm96IFJ5ei0yQXBFbj9MaSNOb091emwgT3Z5UmFzYVJlc1JzLVJ1aFVwYW50VXIjVXMgMEVqbi5JenwwQWtFKylFeiBMYC5MKnYhTHV2YVlsMEVoZHkxQWt8QXMtRSwlSSVJbChJc3xPLE96P1JhdmR1Um90aTFCIGFsfWUkckdpZUw_TG9qVF8wQV59fkkjSXZvTGF2YUxlcCBMbiBMJyBOJ2FPW09sIFBhK2NUQFQsaGFUdV5UeS9Wb2ogMEVwbCBJc2tPcFJoIVJsKFJva1J1YnlWPDFBfkFyRXNMaXZuIE8lMUlkMURvWzp9IV9DaUB0RCovSDwtS3RMYW5eTD5MaXZvTHVbTWYrdE1scy1OQCNOaSNOJk58TiR2b050b2YrUHJpI1JrZSlSb2RpZVIpUnUjUnlbU2UjU2l2IGFTdF8jVEB0VHJvJlYqa1puZWh0WipyLTNDI0RhZ29nSnMtS11Mb3Rvbk5hbClOZHItTnplUmlza29wUm9TdHIoVGFyXlQ_VHJvK2pWbi5YZXNvM0FuaSRhSGFKYXY_SytLbmlrTC5MbihMdWwjTnplKVBlKVMhX1N0bytUZXYmVm4_VidhcjJBJW4pQWshQW1AQW5lKUEkaSNBdCBBdmlkXUF6RS9FbUBvRW4pRXNFdGl2b0V2X0l2IU4gTm9PL2FPZC5PbVtPdXRVa1luMkJhdiBCeXR9b2RDIEN0aXY-RCFEJW4gRGVwcyFEaCtkRGl2IERrbGBEbWFuIERuaWtEb1tEcG8sRCx6RCQhYUR2b2REemltRXppZUhhbiNIbnV0I0gnPEhyb21hSHliSW4pSmkkI0ptPUtheiBLK3NLb2pLcm9rS3UpS3luTGVkbmVMaWItTGt-TG9oYUx5bm9tTWFsdU1pfk1sI01vY00kYU15cyt0TmUvIU48I051cihQYCFQX1Bpcy1QbGEvUHJvcyBQcyFQdWRSYCVSJVJvZFJ1L2FSeXZTYCBTZWRTaWxhU2tva1NsYW4-UypkIFNwb2x1Uyl2YVN1ZC1TeXBUYWhUI25UK3NrVG9tLVQsdmFUdXBhVHZvLFUjelV0b1V6ZHJvVmFoYVZpZGxhVmxha1ZvelZyL1YkIVZ5a1Z6ZGUvWmQsdlplbS1abiEtWjxadiEyQWN8QWg8eUFrdGkjQStzQW90PkFwPC1Bc2VBdl5JbmNpcEtub09idWQgTyVudG9PZGVqT2Zlc2VPaCxPai10T11tIE9taStPbmlrIU9wYE9yb2tPc1tPdG9uT3V0LU92YXpTI3YjU3RAVWRrKFV0Vi1Wb2g8eTBBbj5Pdm9kVHJ1aDBBY3R2bzBCZXIpfURsS2F2PktsLktyK0x0TXBhTmNQQFNhU2luI1N0LlR8VHkjM1JhbWleU2tUXzo6Qy19b3REaWElRG4_RG9uRnRHYnlLZSlLJy5NQG9NcCovTmRlUmEvUiBhUycmU3RyVG8rJFphbiVaaWRdM0FnfEFrJUNlcHREYWt0PEZlckB0Rit4Sm5va0tsYW1hSzxkS3J1dEt0PFB1KSVWaXplVm1hVm9sdmVyWmVydmEzU2t8WmlrbzVCb3RpI0Rva21ASCcjSytLb2tvTWFue29QJ29kUHUvYVJlanNTb2xTdGwuVG1pJHJUb3BlZFR1bl5VYkAjVS9vVXBVLFYuVm4_WmI8Wi9vZFpkIVplem4hWmhvZCVaaW4jWmplemRaI3paXWhhWm1hclpwYFpydS9ac2FoWnRva1p1bVp2b2Q1QnJpI31gXUthdj9Lb3BpczNCYUJvbCd9bChEXVBgXVQuWig6RGkkYUghS29NPk1pemQhTW8pTiAjUmRpbiNTYW4jVF8gWltaQD8wT3IwSHwxQixuI0Nlc2VEYF1EaW1AdERdSG4hSm09S2UsSylLdW5eS3ZvamVNQG9Ob1J2aXNTYCBTaG8sU2tva1NsIVN0LFN1dlN5cCFUW1QuVGshVH5UcnYhVmVyWiZtMk9eUn4wRm9uTG4_UiNSb3QtUnVwVHVhJTFBZmFuZHJBbGlza29BbnpAQXV0RXB0aWtJY2FMYFtMQD9Mb0x1ek9bTyNuT3JvUmlwKVJ6VXAuVihWciYwQWJpI0FkaWRdQW4uQSRBdm4oRWR8RXA-RXZhRXouSWJJJkl6bj9Pbk91cC1Pdm9VL1VoYVVuJVVwI1phMEEsZ2RFKSZJbCR2b0wqdmFPZ1JgUmtSdCNVdC1Zc2wwQWRBaGFPYjBCbyl9YUQnI0tvbFAjVHZhVWJvalVjIFVkJVVobGFzVWxgVW0sa1VwLHZhVXNlZFV0b2tVdmlzezBBbCcmQXMgX0lzTGF2T2QtT2pAPk9sdU9uejxPcm4oT3UkYVIvYVUkIDFBbl5BekQlTmFOPk92biFQQFN0VWIxQW4_QXIoYUF0aSNBdltFaG5vRXojT2RvbGFPK2tPcGFPcm5vT3VwIVJhL1Jlc1JoflJvbVJ1JlVkJlVwbj9Wb2xZazBCai10QnRyb3B5fWFyRChLbm9OZCFOPVJpayFhUicuMEFoQWwkdm9FdHJBdFtBei1JcytJdC1PYm9eT2RpZF1PciNSYWIyS2F2I0tvdE4tTic-UCFQayhSJyhTX1QoOkIrdCNCdStIKm5KZW1ub0pmdW5KZ2FKIEpuKEt0aSNNaCtNcG9uTmN8Tj5Oa2VyUGUpVkAuWiFfM31uaSNIZHlLdXQuTGVmb25Nbm8pTmRAJU5pJGFOPFBdKVAmUHJ2ZVJhcGllUm1vcyNYdGlsM31vU2tvcGlzVHUrazFBZCtjQW4uMEFwI0VzayFVa290VXBhMEVsMUErKVBpbiNQb2xSem9VaGFVK2MyQWQ_QWt0PEFtcEFzYUF2ZXJ6YUVmIEUkRXo8SGF2LkhsLk8vdU9qP09zI091W1AlUCBfUGsoVWI-VS9sIFVobD9Vc1YhMkR5SH5IKE5kLFJpJGFSJmpaZW1za28wQXJvaE9yW1JkKFJ6MkdyS2V2OjBPaChPemVSIVIqcy1SdXNZdCcmMEhvVGl2KDBJdiAzUmAgMUVkbiFJJCBNPTBBeiFfTGlkbiBMb24gT3R2IFJvaiAwSSVJKU92IDBZdmBdMEF2IElmPG1hSWt-MUFkfkwhbiBMeX5PdXQhUmF2IDFBbkF6IDBFZH5JbHxNcnQgTmBuIE49T3VkIFRsIVRyfjBBaHxLIUx1bSBPfk9wQD5SKnMgMUFsIE9sbiBPeicjM0QsdiBFbEVuLkwuTiE6R29uTC9hTCpuTmFOXmxOaWwjUmFuUmhhbnlSfDFFbGt1SG9kME92YTBEcm9HZSklSiVMYmwqZEx7cmhMIF9MbW9jTHJ5W05rJ1Jhbl5SemVTXyNTa3J6ZVNuP1Nwb2R1UylUZXIuVmVyIzNCLCV9ckRlb2gsRC5EK0xhTj9Te1RhbCBhWmVaICMwRXpkMExgVXMwQWojQWtBcz5Fdm9IayhJdk4nI091cCExVWN8VWswRGFEaXYoRG96JmtEJHZvSkBza3lKJkpza29MYW50TFtMIExub1NrJyNaaWRdWicmMFJhdm8xQWI-QSV0QWhBKUJhfW8ra0ghU3R2YVR1KzBBZCBUKnAgVHVwMElwNEJhdiBCciF9fEQhRCxGb3QgSCtkIUh-SG9kIEgsZCBIdWIgSmFzbiBKe0ptPUtdcCBLb24hTC0hTWF6IU1leiBNaXp7TXlzK3ROZS8hTmlrIU51dCBQYCFQbCEgUCx2IFB1JCBSYXogUiduIVJ2IVNsJyBTb2tvUyl2IFN1flN5cCFUYXMgVGVzIVRyISBWaX5Wb2whVnJoX1pkb2IgWm4hMEFkdUJ1ZCB9b3AgRDxEdS9EeS8hRSR1cEgrZGVtS2F6THlrIU5pa09yLVAqLFRhaFQtOjo5OTNMb2Zvbjo6QnIhQnlkK3R9fERhcm1vRHVzIEYqayFIbHQgSG9kIEgsXkh5fkohPkp7SmkkIEsrcCFLKnAgTGVwIE1leiBNb3QhTXlzK3ROZS8hTmlrIVBsISBQb2ogUHMhUmF6IFMpdiBTdX5UYWogVGVtbiBUa35Vam09VmFsIFZlK3RWaW4gVm9sIVZydCFadm9uIDBBdiBSdXN1VWR8WXQtMUErI0FybWFBdG4oSXZvT2IgUm9qVmloWW1gXTBMQC5NYW5NLlB0IVpgdVpkb2xhMkF0IEx0fkx1Ym8jT3QnIFJ1WzBNYU1uPzBFbW4gMExhbSFPdW0hUiEjVW1hdiMwQXRvRWgjT1tPbU8kT3p2eWswQXB8QXJBdC1JamVJentPY24gT2RyIVJ6bC5VdHwwQWtBbChBbUAhT3Z1MEIseiBUYXYgVWItVWZhKzBMb2QgT21hbCBSYXZhUiggUnVkI1J2dTFBXkFuIENgXU4gKE5vT3YmWS9sIFphdigxSS9hUiEgMEInLkJyMEVkfkVua3VFc19hT25SIVVrJ29kWWsiLAogICAgICAgICAgICAgICcweDI1ZjQ0NTU1ZjRhZjI1YjUxYTcxMTEzNmUxYzdkNmU1MGNlOWY4OTE3ZDM5ZDZiMWYwNzZiMmJiNGQyZmFjMWEnCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgd29yZGxpc3QoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHMgJiYgKHMgPSBuZXcgbygpKSwgczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5MYW5nQ3ogPSBvOwogICAgICB9LAogICAgICAyMTQ0OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5MYW5nRW4gPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDQ5NDQpOwogICAgICAgIGxldCBzID0gbnVsbDsKICAgICAgICBjbGFzcyBvIGV4dGVuZHMgbi5Xb3JkbGlzdE93bCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgc3VwZXIoCiAgICAgICAgICAgICAgJ2VuJywKICAgICAgICAgICAgICAiMGVybGVvbmFsb3JlbnNlaW5jZXJlZ2VzdGljaXRTdGFudmV0ZWFyY3Rzc2kjY2gyQXRoY2smdG5lTGwwQW5kI0lsLnlMZU91dE89U3xTJWIvcmFAU3VyZFUnMENlW0NpZHxDb3VudEN1J0hpZT1JZE91LC1RdWkqUm9bVFRdVCVUKltUdSQwQXB0REQtdEQqW0p1LE0uVWx0VjwpVmkpMFJvYi0wRmFpckYlZFJhaWQwQShFRW50UmVlMEVhZDBNUlJwJXRTIV9ybUJ1bUNvaG9sRXJ0SSZMTGV5TG93TW8sT31QaGFSZWFkeVNvVCBXYXlzMEE-dXJBeihnT25nT3VudFUnZDBBbHksQ2glQ2l8RyBHIUdyeUltJEshTm91bilOdSRPYCBTdyBUJm5hVGlxdWVYaWV0eVkxQXJ0T2xvZ3lQZT9QIVBybz1SaWwxQ2hDdC1FYUVuYUd1ZU1NZWRNJU15T3VuZFI8K1JlLFJpPVJvd1RUZWZhQFRpLFR3JWswS1BlQFNhdWx0U2V0U2ksU3VtZVRobWEwSCE-T21UYXtUJmRULnVkZVRyYUAwQ3RdRC5HdSxOdFRoJVRvVHVtbjBFcmErT2NhZG9PaWQwQWtlQSpBeUVzb21lRnVsS3c_ZDBJczpCeUNoZWwlQyNEK0dMPClMYyN5fk1ib29OPGFObiBSUmVseVJnYShSKmxTZVMtU2tldFR0ITNBXkFuQXV0eUNhdSdDb21lRWZGJWVHKEhhPUgoZExpZT1Mb3dMdE5eTmVmLi9UcmF5VHQgVHdlJlkjZDNDeWMhREtlTmRPbG9neVJkUmBUdCBfe0FkZUFtZUFua2V0QSxFYWtFW0luZE9vZE9bb21PdSdVZVVyVXNoX3JkQXREeUlsTWJOZU51c09rTyxSZCBSKGdScm93U3NUdG9tVW4pWFlfe2V0QShBbmRBW0E9RWFkRWV6ZUl7SWQrSWVmSWdodEluZ0lza09jY29saU9rJk9uemVPb21PYCBPd25Vc2gyQmIhRGR5RCt0RmYkb0lsZExiTGtMIXROZCFOayBSZCZSZyBSLFNTKGVbU3lUdCBZIFp6OkJiYStCKEIhQ3R1c0dlS2V-TG1NIGFNcE5OJE4pbE5keU5uI05vZU52YXNOeSNQYWIhUC4kUHRhKFJSYiNSZFJnb1JwZXRScnlSdFNlU2hTKG8vIVN1JFRUJG9nVF5UZWcleVR0IVVnaHRVJ1V0XVZlM0lsKGdMIHlNfE5zdXNOdHVyeVJlJFJ0YShfaXJBbGtBbXBdQW4rQW9zQXB0IEFyK0EnQXRFYXBFe0VlJ0VmRXJyeUUsSXsmSWVmSWxkSW19eU9pKU9vJ1IjLVV7IVVua1VybjBHP05uYW0jUmMhVGl6JlR5VmlsX2ltQXBBcmlmeUF3QXlFPEVya0V2IEl7SXxJZmZJbWJJbi1JcE97T2dPJ09gT3VkT3duVWJVbXBVLCBVdF5fXkEsQyN1dERlRmZlZUlsSW5MIUBMJUx1bW5NYihlTWVNZiV0TS1NbSNNcDx5TmMgdE5kdUBOZmlybU5nKltOfUBOc2lkIE50cm9sTnYoKU9rT2xQcCBQeVIkUmVSblIqQC9UdCNVXlVudHJ5VXAhVXInVXMoViBZbz5fe0FkIUFmdEFtQX1Bc2hBdCBBd2xBenlFYW1FZC5FZWtFd0l7ZXRJbWVJc3BJdC1PcE9bT3VeT3dkVWNpJFVlbFVpJ1VtYiFVbl5Vc2hZWSwkMkJlTHR1KlBQYm8_ZFJpb3VzUnJ8UnRhKFI9U2hdL29tVGUzQyE6RE1hK01wTilOZyBSKGdTaFVnaHQgV25ZM0FsQmE-QnJpc0NhZGVDZW1iIENpZGVDbChlQyVhPkMqYSdFckYmJ0YoZUZ5RyplTGF5TGl2IE08ZE1pJ05pJE50aSxOeVA_dFAmZFBvcy5QYFB1dHlSaT1TY3JpYmVTIHRTaWduU2tTcGFpci9yb3lUYWlsVGVAVmVsb3BWaSlWbz4zQWdyYW1BbEFtI2RBcnlDZUUnbEV0RmYgRy4kR24ueUxlbW1hTm4gTm9zYXVyUmVAUnRTYWcqZVNjb3YgU2VhJ1NoU21pW1MlZCBTcGxheS88KVYgdFZpZGVWJSlaenk1Q3QlQ3VtfEd-THBoKE1hKE5hPk5rZXlOJU9yU2VVYiFWZV9mdEFnI0FtYUEsLUF3RWFtRVtJZnRJbGxJbmtJcEk9T3BVbVkyQ2tNYk5lUihnL1ReVHkxQXJmMU5hbS06RyBHIVJseVJuUmBTaWx5L1N5MUhvT2xvZ3lPbm9teTBHZUl0VWNhPjFGJXQwRzFHaHRUaCAyQm93RCBFQHItRWc8dEVtfEVwaDx0RXZhdCVJPlNlMEI_a0JvZHlCcmEpRXIrT3RdUGxveVBvdyBQdHkwQWIhQUBERCFbRCUnRW15RXJneUYlKUdhK0coZUg8KUpveUxpLE91Z2hSLWhSb2xsU3UqVCBUaSpUcnlWZWxvcGUxSXNvZGUwVSRVaXAwQUEnT2RlT3NdUiVVcHQwQ2FwZVNheVMmKVRhPjBFcm4kSC1zMUlkJilJbE9rZU9sPTFBQEFtcCFDZVtDaDwrQy5lQ2x1ZGVDdSdFY3U-RXJjaSdIYXUsSGliLkkhSSxJdE90LVA8ZFBlQFBpKlBsYShQbydQKltUJmRUcmEwRUVicm93OkJyLUNlQ3VsdHlEZUludElgfkwnTWVNaWx5TW91c05OY3lOdGFzeVJtU2hdVFQkVGggVGlndWVVbHRWJS5lM0F0dSpCcnU_eUQgJEVFZEVsTWEhTikvaXYkVF5WIFczQiBDdF1FbGRHdSpMZUxtTHQgTiROZE5lTmcgTmlzaFJlUm1SLFNjJFNoVFR9W1hfZ0FtZUFzaEF0QXYlRWVJZ2h0SXBPYXRPe08lT3cgVWlkVXNoWV9tQ3VzR0lsTGR-b3dPZE90UilSZSxSK3RSa1J0dX1SdW1Sdz9kU3NpbC8gVW5kWF9naSFBbWVFcXV8RXNoSSZkSW4rT2dPbnRPLE93bk96JlUuMkVsTk5ueVJuYSlSeVR1KjpEK3RJbkxheHl-IHlNZVBSYStSYmErUmQmUmwtUm18U1NwVGVUaCBVK1plM04gJE5pdXNOKk50IU51KGUvdSoyTywwQW50RnRHZyFOZyBSYWZmZVJsVmVfZEFuKUEqQVtJZGVJbXAnT2JlT29tT3J5Tz1Pd1VlX3REZGVbTGRPZE8nUmlsbGFTcGVsU3NpcFYgblduX2JBKUEoQW50QXBlQVtBdi55RWF0RSZJZEllZkl0T2MgeU91cE93VW50X3JkRVtJZGVJbHRJdD9OM006Qi5JckxmTW0gTSwgTmRQcHlSYiVSZFJzaFI9LFRWZVdrWj9kM0FkQWxgQXJ0QXZ5RCtob2dJZ2h0fm9MbWV0THBOUm8zRGQmR2h-TnRQUmUvJXk1QmJ5Q2tleUxkTGVMaWRheX5vd01lTmV5T2RQZVJuUnIlUidTcC4kL1RlbFVyViA1QkdlTTxNYiFNJU5kKmROZ3J5TnRSZCFScnlSdFNiPGQzQnJpZDoxRU9uMEVhRW50aWZ5TGUyTiVlNExMZWckTH1bMEErSXRhPk0mJ011fVBhQFBvJ1Bybz1QdWwnMENoQ2x1ZGVDb21lQyphJ0RleEQtYT5EbyVEdSxyeUY8dEZsLXRGJW1IYSFIIC5JdGkkSmVASnVyeU1hPk4gTm9jfFB1dFF1aXJ5UzxlU2VAU2lkZVNwaSovJGxUYUBUIGUsVG9WZSxWLmVWb2w9M09uMEw8ZE9sYT5TdWUwRW0xT3J5OkNrZXRHdT9SWnozQWxvdXNBbnN-eVdlbDlCSW5LZVVyfXlZNUQrSSlNcE5nIU5pJU5rLzpOZz9vbzNFbkVwVF51cFkzQ2tERH15TmROZ2RvbVNzVFReJlRlVHQmV2k0RWVJZmVPe093OkJCZWxCJURkIER5S2VNcE5ndWErUHRvcFIrVCBUKFVnaFVuZHJ5VmFXV25Xc3UuWSBaeTNBZCBBZkFybkE9Q3R1KkZ0R0ckRyZkSXN1Kk0jTmROZ2BOc09wP2RTcyNUdCBWZWwzQXJCIHR5QnI_eUMmJ0ZlRnRHaHRLZU1iTS5Oa09uUXVpZC9UdCFWZVo_ZDVBZEFuQiwgQyRDa0ctTmVseU5nT3BUdCB5VWRVbitWZVkkNUNreUdnYStNYiBOP05eWHVyeTNSLXM6Q2goZURHLUd9dElkSWxJbkolS2VNbSROTmErTmRhPk5nb05zXU51JFAhUmIhUl5SZyhSKGVSa2V0UnJpYStTa1NzLyBUXlQgaSRUaFRyaXhUdCBYaW11bVplM0Fkb3dBbkFzdSpBdENoPC1EJERpYUxvZHlMdE1iIE0leU50XU51UmN5UitSLlJyeVNoU3NhK1QkVGhvZDNEZCFEbmlnaHRMa35dTS1OZE5pbXVtTiVOdT5SYWMhUnIlUyB5U3MvYWtlWFhlZFh0dSo1QmkhRGVsRGlmeU1NfE4uJU5rZXlOLCBOYE9uUiRSZVJuKGdTcXUub1RoIFRdVCVVbnRhKFUnVmVWaWU1Q2hGZihMZUx0aXBseVNjIVNldW1TaHJvb21TLS9UdSQzU2VsZi8geVRoOkk9TWVQayhScm93L3lUXVR1KjNBckNrRWRHYXRpPUchQElgIFBoZXdSPS9UVHcla1V0ciRWIFdzWHQzQ2VHaHQ1QiFJJ00oZWVPZCFSbSRSYFNlVGFiIVRlVGgoZ1RpKVZlbFc1QyE_TWIgUidUOkswRXlKZUBMaStTY3UqUyA9VGEoVmlvdXMwQ3VyRTxUb2IgME9yMUZGIEZpKVQmMkwxQXkwREk9WW1wLTBJdDBDZUVJI0woZUx5MUVuRXJhSW5dUG8nVF0xQW4rQi5DaD9kRCBEKD95RzxJfElnKCRQaDwwVHItaDBIIDBUZG8lVCBUcHV0VHNpZGUwQWxFbkVyME5OIDBZZyYwLyAwT306Q3REZCFHZUlyTGEpTG1OZGFOZWxOLU5gIFAgUmFkZVJ8UmtScm90UnR5U3NUXlRoVGl8VHJvbFR0IG5VJ1ZlWW18M0EpQW51dEFyQXM8dEwtPE5OJHR5TmNpbE9wIVBwIFJmZUBSbS5ScyNUMk99T3RvUmEnWXMtJDBBbm9Dbi1DdHUqRSlHR2UjfkxvdE5rT30gUGUvb2xUXlp6YV8pQX10QSwtQT5BeUVhJ0VkK1V7VWdVbisyRW1FdEludEw_TGVMaSlOZE55T2xQdWw_UnRdUy5dU3NpYiEvVGF0b1R0IHlWIHR5V2QgVyBfQGkpQWknRWQtdEVmIEVwYSpFc3xFdHR5RXZ8SSlJZGVJbT95SW50SSUueUlzI0l2YT5JemVPYiFtTylbT2R1KU9mLk9ncmFtT2plQE9tbz5Pb2ZPcCB0eU9zcCBPPkBPdWRPdmlkZTJCbC1EZChnfkxwTCdNcGsoTl5QaWxQcHlSXmEnUi55UnBvJ1InU2hUWnohM1JhbWlkOjk5QWwueUFudHVtQXJ0IEUsXUl7SXRJek8-OkJiLkNjbyNDZUNrRD9EaW9JbEluSSd-eU1wTl5OZG9tTitQaWRSZVRlVGggViZXWiUzQWR5QWxBcyNCZWxCdWlsZEMkbENlaT1DaXBlQyVkQ3ljIUR1KUYhQEYlbUZ1J0ddRyp0R3VsP0plQExheExlYSdMaWVmTHlNYShNZW1iIE0oZE1vPU5kIE5ld050T3AmUGFpclBlYXRQbGEpUCV0UXVpKlNjdWVTZW1iIVNpLFNvdXIpU3AjJ1N1bHRUaSpUKmF0VHVyblVuXVZlJFZpZXdXP2QyWWBtMEJCYiNDZUNoRGVEK0YhR2h0R2lkTmdPdFBwIVNrVHUkViRWIDVBZEEsQm90QnUsQ2tldE08KU9mT2tpZU9tU2VUYT5VZ2hVbmRVPlkkNUJiIERlR0xlTk53YXlSJDpERGQhRH1bRmVJbExhZExtI0wjTHRMdT5NZU1wIU5kVGlzZnlUb3NoaVUpVXNhK1ZlWTFBIUFuQSpBdHQgRX1IZW1lSG9vbEkmKUlbJXNPcnBdT3V0UmFwUmUmUmlwdFJ1YjFBQXJeQXMjQXRDI2RDKnRDdF1DdXIueUVkRWtHbXxMZUB-TSg_TmklTidOdCYpUmllc1J2aSlTc11UdCFUdXBWJl9kb3dBZnRBbGxvd0EqRWRFbGxFcmlmZkllbGRJZnRJfUlwSXYgT3tPZU9vdE9wT3J0T3VsZCBPPVJpbXBSdWdVZmYhWTBCbChnQ2tEZUUrR2h0R25MfExrfnlMdiBNaWw_TXAhTilOZ1ImLyBUdWE-WFplMUE-RXReSUlsbEluSXJ0VWxsMEFiQW1FZXBFbmQgSSlJZGVJZ2h0SW1PZzxPdE93VXNoMEFsbEFydEkhT2tlT29gMEF7QWtlQXBJZmZPdzBBcENjIENpJENrRGFGdEw_TGRpIExpZEx1dF1MPU1lI2VOZ09uUnJ5UnRVbFVuZFVwVXIpVWAwQSlBKkF0aSRBd25FYWtFY2kkRWVkRWxsRW5kSCBlSSlJZCBJa2VJbklyLkwuT2lsT25zJU8jT3J0T3RSYXlSZWFkUihnWTBVYSpVZWV6ZVVpcipsX2IhQWRpdW1BZmZBK0FpcnNBbXBBbmRBcnRBPkF5RWFrRWVsRW1FcEUqb0l7SWxsSW5nT3tPbWFeT31Pb2xPcnlPPVJhPmd5UmVldFJpa2VSI2dSdWdnIVVkfFVmZlVtYiFZITBCamVAQm0uQndheUMpW0NoRGQmRmYgRz9HKyxJdE1tIE5ObnlOJ3RQIFBwbHlQKm1lUmVSZmEpUitScHJpJ1Jyb3VuZFI9eVNwZUAvYSgxQWxsb3dBbXBBcEFybUU_RWV0SWZ0SW1JbmdJdF5PcmQxTWJvbE1wdG9tUnVwL2VtOkIhQ2shR0lsTHxMa05rUGVSK3RTay9lVHRvb1hpM0FeQW1-Tk48dE5uaXNOdFJtL1h0X25rQXRFbWVFbkUleUUqRXlJbmdJc091Z2h0UmVlUmk9Um93VW1iVW5kIDBDa2V0RGVHIEx0TWIgTWVOeVBSZWRTc3VlVCE1QSxCYWNjb0RheURkbCBFR2VgIEkhdEsmTWF0b00lcm93TmVOZ3VlTmlnaHRPbE9gUFAtUHAhUl5SbmFkb1J0b2knU3NUJFVyaSxXP2RXIFduWV97QWRlQWZmLUFnLUEoQW5zZiBBcEFzaEE9bEF5RWF0RWVFbmRJJEliZUl7SWdnIEltSXBPcGh5T3ViIVV7VWVVbHlVbXBldFUsVWBZMkJlSXRdTWIhTmFOfWxSa2V5Um5SdCExRWw9RW50eUkpSW5JLE8xUGVQLSQ6NUx5NUIqbGxhMEFiIUF3YSpDIUNvdiBEIERvRmFpckZvbGRIYXBweUlmJW1JcXVlSXRJdiAnS25vd25Mb3tUaWxVc3UkVmVpbDFEYT5HcmFkZUhvbGRPblAgU2V0MUI8R2UwQStFRWRFZnVsRSFbVSQwSWwueTpDPHRDdXVtR3VlTGlkTCF5TD1OTmlzaFAlUmlvdXMvVWx0M0gtIUw9dE5kJU50dSpOdWVSYlJpZnlSc11SeVMnbFQgPDNBYiFCcjx0Q2lvdXNDdCV5RGVvRXd-YStOdGErT2woUnR1JFJ1c1NhUy5TdSRUJFZpZDVDJEkpSWRMYzxvTHVtZVRlWWErOkdlRyNJdExrfkxudXROdFJmYSpSbVJyaSVTaFNwL2VUIFZlWTNBbGBBcCNBckEnbEFgIEJEZChnRWsmZElyZExjb21lL1RfIUF0RWF0RWVsRW5FKklwSXNwIDBEZURgRmVMZH5OTmRvd05lTmdOa05uIE50IFJlU2RvbVNlU2hUfVs1TGZNPE5kIE9kT2xSZFJrUmxkUnJ5UmBfcEV7RSwhSSxJPk9uZzo6UmQzQXJ-b3c5VVVuZ1VgOjNCcmFSbzlOZU8iLAogICAgICAgICAgICAgICcweDNjOGFjYzFlN2IwOGQ4ZTc2ZjlmZGEwMTVlZjQ4ZGM4YzcxMGE3M2NiN2UwZjc3YjJjMThhOWI1YTdhZGRlNjAnCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgd29yZGxpc3QoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHMgJiYgKHMgPSBuZXcgbygpKSwgczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5MYW5nRW4gPSBvOwogICAgICB9LAogICAgICAxNDY4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5MYW5nRXMgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDc0OTYpOwogICAgICAgIGxldCBzID0gbnVsbDsKICAgICAgICBjbGFzcyBvIGV4dGVuZHMgbi5Xb3JkbGlzdE93bEEgewogICAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKAogICAgICAgICAgICAgICdlcycsCiAgICAgICAgICAgICAgIjBhcmVydG9pb3RhZG9ub2FSdGVpcnJvZW5hTm9uYUxzb2xvY29pbGlhcmFsYW9ycmVuYWRhQ2hvTiRuMEE-RG9tLEVqYUkhI09nYSZPJ09yI1Jhem9SKlVlPVU8MEFiIEFkZW1AQ2U8Q35FaSlFbGdhRW4jRXB0IEkmTCAgTmVPZyFPPFRpdm9Ub1RyaXpUdSBVZCpVISZVcyAwSWMjTWl0Kk9wdCBPcidVYWBVbCMwUmVvMEVjdCBJY35JbiBJcm0gMElsSXQgT25AT3MjT3QgUmVnIFIkVWFVJlU_YVVqYTBPZ29PciswUmVTbCAwRWRfekUnVXMpMUFjW25BbWJfQXJtYUJhQnVtQ2FsZGVEZWFFZ19FaiBFciVFJUY_IUdhR28mbklhJkksI0l2JE1hTWVqYU1pYiBUIFRlemFUaXZvVG9UdVtVbSdaIDBBYmxlQW4pQXBvXUFyZ29BcyBCIEJpI0UnSWdvSXMlZE9yUCBvUGwkMHxvQ0AnQ11EIEQsRW1AR3U9SWw9SW1vSXNPdCBULGFUaWd1b1Rvam9VYWxVbCBVbmMkQWQqRWpvTzFBZyBBWyNFdGkjSW9MaWMgTyZPcilPeW9SLGQhUm9iIFVlcyVVKzFBJkFgQXJCaXQrQm9sQnVzI3xpdm9Db0QhRD9dRHVvRWFJJkllc00uaS1lc09tYVBhUC5SZWc9Um96UnVnYVRlVGlzJTBBQSZBbCNDLDxFZ3VyIEVvRTxySSwjST1Jc3QqTm9PbWIrUCFvVD9dVCtUdSNVbSpVbiMwQWpvQXF1ZUFyRW4jRW9JPkxlJU9tb1JhIVJvelVuMERhekQkR2VMYU0sI1MsKVReMEFsQW5jZUErRUVsXWBFYEVzdHJ1ekkuSTwyRXJVe1UnMEFmW25Bck8pVWMgVWZfVWw6QmFCXnxlSEBJbGVKIExhbnovYy5MZGVNYnVOPk5kLW9SYig-Um5pelIrU2N1XVMjblN1W1RhbF1UIUBUKlR1JVVsWiAzQmVCaWQvPVMgU29TdEAzfG9Fbk5nbzJBbj5PcXVlVXNhMkFCaWBCb0NhQ2lgRGFEZWdhSW4vLyFvTHNhTWIte2ROaSNOfXNhaVJkZVJyIFNxdWVUZVRpblZle1phbDJBdm9Bem9FY2hhRXZlSWw9SW4-SXNhT2NhT21hT25jZU8pVWphVXM-VSMyQ2VvQ2xlRSdFeUZhbntGLkhvSXRfTCNSYnVqKGwoK1NjIFRhY2FaLjpCYWw9QmV6YUJpYEJbQ2FvRGF2IUQsYUVyRmVJe0ltYW5KYUouTExhbSBMYyRMJkxpe2RMbGVMbS9eTHZvTWFNYiRNZWw9TWknTXB9YyFOZD9OZWwtZ3UrTmljLSNOLS5PYmFPc1BhelBpJW5QbylQdCBQdWNoKChiLlJjZWxSZSVSZyhpJ1JuZVJwZSVSK1IlU2FTPlMhb1NwYVMjclReY2VUX1V7bFVzYVpvM0JvbF1EIUQrTGQvZWJfTG88THVdTSwjTml6LXQrUmMoJlJleihvUnIgUil6YVNwZWRUKzJBY2FsQWxlPkFtcHVBbmNdQXBhQXJdST5JcylJdm9PcXVlT3phVWxlJVVwIDBDbC5FZ29FPUVuRXIjRltHICtNLT5OZU4lUF9zUj5SdWVdU25lVGFVe2QyQW1eQW5BK0FzZUF2ZUksKUltYUluaWNhMkJfQ2N-fGknQ2lgQ29EaWdvRG9GX0chSGUpSmluSm9ML2NoL2VnJExnIExpbi9sIExtb0x1bWBNYmEpTSFNaXtNbyZNcHItZGVOZWp9Zy1vYyFOc2VqfXQgUGFQaShhei5SYmElUmNob1ImblIuKHIhUyFTbW9zUyUyQW5lb0F0IUUgRWMhRWkmRW1hSWFJbSxJcCVJc2lzT21vT25pY2FPcXVlJVUmVXoyQWQrQXIjQXQrQm9Ccip8IGFFbD1FbiNFcntFcyVFdmFJZCBMZWJyL3AvI01iX01wbCpOLWUlTyVQLlB1bCggUiQ8UjxSdmFUaXM6TS16KFImVD8zQiFCP0Nhe0MqRG9GLHNhRmluKkogTGZpbkxnYSZMaSNNXi08TiVsUF4pUmVjaG9SKyVTYXl1J1Nlb1NmP2VTbnUmU3RpJ1N2JFRhbGxlVCwhVXszQUFiPUFkZW1hQW1hbilBYEFyJEJ1am9DdCBFbilFJUV6RmljP0cnTGVtL3UqTiFvUmVjI1JpZypTPlNlJ1NmW3pWYVZpJzVCbGVDZUxeTWluZ31OIFJhJlJtKlI8U1NpczJBZy5PZ2EyfGFEYUU9RSdMY2VPUXVlUiBSZXoobzowQSdSJDBIIE9VYSZyMEFkSWN-SWZpYyRJI3JVYyAxRWMjSWNhejNFRW1wPTFFZmFuKUVnKkVtLCNFdiBJcHNlSSlJeCpPZyRVZCowQnUmSXQqT2N-UGEpUGUnUGxlb1Bfc2EwQSdDIGdvfHVmZUNARW1pZ29FK0ZhJkYhbW9HYSdJZ20vYWNlT3JtZVJlJlNheW9TLCBUIW9UciBWYXNlViQxT2NhMFVpcG8wSXpvMENhXUMsYUNvbCBDcmliKkN1JkVuY0BGIWFGdSF6b1Bhe1Blam9QQFBvc2FQdW1hUXVpVCBUZVRpPVR1ZmEwQXBhRXInSWMtQDFBZCpBbHUgRW4jSXQgMUFjI0FtLENlPEN1c2FFbiNJZypJbCRJc3QqSSNQISNQbGljIFAuIVRfbW86QnJpY2FCdV18YXtDP0MjckVgSi9kLz1MPEx0IE1hTT9ATW88UmEuUm1hY2kob2xSc2FTZVRpZ2FVYFZeWDNCciFvfC9pek9SaShvelJ0P1J2XlN0aW4zQWJsZUFuemFBckJbQ2N-fGFEZW9FYl9FbEVbRXMlR3VbSiBKb0wvZSlMQGxMdCtOTmMtZypOaSNSbWEyQT5BdSVFY2hhT3JPJVUqVWpvVV4yQkBDYUdhJUcuTCRMbGUjTiZSbSgrUnR1bih6IFNhVG8yQWNhPEFnP0FuamFBc2VBdWRlRSpFJ0VzYUlvSSNVJTJFZ29FbilFcnphR2FNIE5jfk5kKGcuUkBTP1Rib2xUdSs6Q2VdRmFzSSVKb0wvIWkvPU1iLSBOY2h9Zy08UmFqZVJ6YVNvbGlgU3QgVG9WP2FuM01lPU0qTk4hfSROKVJhbiRSLClSbSxTIzNHYW4pTWBzJFIgUm8yQWNpIE9ib09yQDJMTGZvTG88THBlTSgmUj8oW1RhVGVvWiAyQXtBZmk-QSdBc2FBdGlzQXZlSWUlSWw9SXBlSXNJI088clVhVWU8VW1vVXBvMkFuKUFwb0FyZEBFcltJYUknSS5JPEl0IFtTYSdTdCA6QiFCP0JsIEMhfGFEL2wgTWFjKGlgWlphYDNCP11CW3xvTGEmTCRNYnIoKlJtYSdSb2VSdiozRT1FcitHYSZHaSxlSm9NJ1MjckA1Q2k-RyBHdSFhSmFNYl9OZ31eTnIoKG1pZygnU3Q_WW81RT5FbGdhRXIlRTxFdm9Je0lyTWEnTWUmTT9kZU19ZCpSYWNhblIjOjFPJzBFYWxJb21hTz0yTGVzaS91VWFsNEVnYWxVc34wQWcsQW5JdCBQIFAhJFAuIVB1bDwwQ2FwYXpEaWNlRXIpRmllbEZebWVHLCRJYyRNLDxNdW5lTmEjU2VjI1MlbilUIWVzVGltb1R1KlV0P1ZpISczQUlzT25AMEwvbyk6QmFsaUIuTS5SYWJlUmRpblJbVV1abWluM0ZlUmluZ2EzTmUpNVJgZChvYmFWLFlhNUVyZ2FFdmVzRXpHYSZyR29HdWUpSWMkTj5OZ2wtJE50IFBpdCFSIFMjViw_WmcgOjdMbzVBXTpCJEMkQ1tEb0QrbkcgI0dyaW1hR3VgST5NIU1pYE1wIC0tY2gtZ29zJU56YVBpelJnb1J2YVN0aW1hVGFUZXhUKlVfbFYgWm8zQWxDY358ZUMjckVyR35HdW1iX0phJ05ndS0jTmFPbk9wICZTflRhbFRbVmVZLHszQiElZEIrQ15EIURpIEVuem9HYUchb01hTWkpTS5NcCROY2VOJk5lLWdvKU59dCFgUXVpJlNvUyVUIWFUJFQrMkFnYUFtYUFuI0F2ZUVnIEVuIEV2IE9yIE92IVV2QDJCb0N-Q29DdVtHaWNhRytNYnJpek19amFUZTV8YUMqRyBKfS1lc1BhU3QrVG9aOkNlJXxvRCFhRF9EdStFc3QrRkBHQEdvSXpMe2RMZSVMbC9vTWFNYm9NdXROPk4mTmVqIE5nLWlxdWlOaiBOfTxOJU5hYFBhUXVpbihSPlJlKGY_UmcsUmkmUm1vbFIrblIpc1J6b1NhU2MgYVNpdm9UIFQhQFRpelRyaXpYaW1vWV5aXmNhM3xhRGFsXUQkRHVdSj9dSl5MLC8uTV5pLV5Oc2FqZU4pTnVSY2EmUixndWVSaSNTUy5UYVQhVG8mVCtaY10zRSZFbEVtYitHL0xhZytMaXQgTGwuTX0tIX1pbX11I09wZVIgU2FTIUBTP1Ntb1RhZFRvNXw_YUN-RGFEZT1Ib0ogTGRlTCFMaSdNLCNNaS0gYy1lZC1qLSNOb1JhZChkIVJlJ1IqUitScyglbFNjYVN0ciBUaXZvViFWP1pvNXxvRCBFYmxlRV1FcilFc3RbR19KIUwvZSVMJU4mTmVjKGFsUm9TY3U9U2VvU2dvU2ljYVM9OkMgQ35EIElwZVJhbmooaXpSciBTYWxUYWxUaXZvVHVbbFVzZWFWYWxWZVZpe2QzQyRDdCBHIEdvYyRHK09uUnYkVG9VdCtWIFYhYTN8b0RvRWJdRSNOZXpOb1RpJlZlbDVCbGV6YXxlTWluKGkobSgpVGFUaWNAVmEjVmVdViQ1QmVDYUNsZW9EPz1Eb0VbRXZlRXpMb00hb1RyQDpTaXMwRTxJc3BvSmUjUighb1MhdiBULCFWJDBBQTxFYSdILCVIb0lvUmVUYXZvVHViX1VsI1VwIFVyciowSSBJb0lzZWEwUykwRW5zYUVyJUljJFJlYyEwUm8xRG9SME8xQUVhe0ZhI0l2b0xhTW9PclZpJjBCbGlnbzBEYVphMUE-Q35FW0luIE9uIVQgVGljYVVlcyMxQWN-QSZyQWxCaSVDYUQsRWphR2EnR0BHdWw9SSwpSWcsSWxdT1F1ZXMlVWdhMEFkQEN1K0V6J09UWzBPJ1JvMUVqYVU9MUkmSWdlJzBFbikwTyc6QyNEX0VsXUdpYEdvSXNKIG9MYWJyLz5MZSVMaSZMbS9vbS9wIE5OYWxOaT5OdCEtdWU9UGFQZWxQP11RdWUpUiBSY2VsKGVkUipSb1JwYSZScXVlUltmb1IpUyBTZW9TflNvUyVUYVQkVHJAVXNhVSVWb1lhPDNBI25DYSZDIWF8b0RhbEQqRyBJbmVMIEx7J0xlL2lnK0xsZWpvTG9MdWMtLXMgTi5Pbk9yUGknUXVlJ1IoY2goZCFSZXooZj9SaT5SbChtaTxSK1JzLmFTYVNjYVNpbW9TJWBUYT1UK2xlb1padWAzQyB8LkVFZFtFcmBFemFKYW0vIExvI01pLCVOfSNyTnotYU9qb1AoYSVTIFNjaWBTb1MlVC5aY2EyQWNhQW5BJUF5YUF6YUVpI0UnT21vVW1hVVtsMkJfQ29EIUQkRW1hRXNARSVMLExpY2kvPUx2b01he01lPU1vTXAtIVJjflIlbFNhe1NlIVNpYmxlUylULGNAVCtabzJBJkU-ekVndW4lRW0kRW5zYUU8RXYkSW1vSW5jaXBlSXN-SXYgT2FPYiBPY2U8T2R1YyNPZXphT2ZlPHJPZ1ttYU9sZU9tZXNhT24jT3AkT3hpbW9VZWJhMkJsaT58IW9EXkViPUVyJUVzI0xnLypMbS5McG9MPE0tI05hbE5vUGFQPyhlOjk5RWQgRWphRW0gRXIhRTxJZSNJbWljYUluY2VJdCA6QmEnQkBCb0N-RGljYWxJek1hTXAtY2h9Z29QYXpQaSZQI1Nnb1NwYVRvWW9aYVouM0FjY35BbGl7ZEJhJ0JvKUNhIUNlJXxhem9Db2chQ19vQyNDdXI8REQuJkR1YypGbGVqb0ZebWFGW25GdWckR2E9RypHXUdfPEgsSSdJckovYSNMZXZvTGlldmVMbGUnTG9qTSBNZWQkTX0-ck5kKk4lUCAjUGV0KlBvPFB0P1NTY2EpU2lgU3BlI1MjU3VtLFQqb1ReJ1RbI1VuKlZlc1ZpcyVZWiAzQ29FZ29FbntFc2dvRmFHaSZHXk5jLk4uT1F1ZXphU2FUbW9Ub1pvNUJsZUNlQ2kgRCBEZW9EP11Fckppem9Kb00hb01wIU5OPk57UGFQIW9TYVNjYVN0K1QgNUJpQl5Eb0V7RypJJkluL2UlTG9NYm9NXlB0dVtUYVRpYDpCYSZCIUIkQmxlQyBHYXpHWyZMLyZMIW9MKkxtLkwuTHMvI0x1ZEx2IE1iLWN-TmRpLWUgTmdfTml7ZE59I1BvUXVlUmRpbigpblN0X1RhblVgWG9mLjNDY35Db0NfI0MlREd1KklzTD1MdmFNYWBNP2wtZC08ck5hbE5eUCAgUEBRdWkoUmllUm0uUnYqUywlU35UYVQsJVYhb1hvWCMzRFtFcyVFKUc9RydMYWIvYiBMLGMkTF1NYm89TSRSLGFTKW1hVCRUdSA1Ql9DJEQkTExhcC97Jkxle2RMaSZMdCBMdWN-TWJyLWRlfWkmTm8rTnJpc2FQYVBsIFBeKVImUnBfcygpb1MpblRhJzVBdmVCKkNlPEReRWdbRT1FJ0VyKUZyKkplI0wlbk0gUCEgUGwqUC4hUF9tb1JSPlJlJ1JnKlMjVD86QmE-QmlxdWVCXUJ1Q29DI0pvTCBMPkwsI0xsLy5NYSdNYl5OZ31xdWVQYVBlKVBAUC5RdT9sKGRlUmUoaWYoamUlUm90UitSJVR1YWplVStaYVouM0F0K3xvQ11DbmljYUphJkohSmkmTC9lZm8nTWFNXk1wPU5hek5kIU4hTmlzTjxPcmkoYXBpKD5SbWknUm51cigrclNpc1NvK1N0aWdvVCFhWCNaM0IkQnUrbkVtcG9FbntFcltFPEdfSiEvZGVNYl9NaSZNfSVPUGk-UG9SKC5UYW5UIWVUdT1aYTVBbF1CPz1DIENpJ0RvRy8mTSBOfSNQIFBlUXVlUmF4UiFvUm0sJVJuZW9Sb1JwZSZSX1I8UnR1Z2FTUz5TIVhpPjJBYmFqb0FjI3JBIUFmaT5BZ29BamVBbW9BbmNlQSNBdW1hQXogRWJvbEVndWFFaW4lRW5FcCBFc0lidUlnb0lwYUlzKUl1bmZvT2Zlb09tcGFPbj5PcGFPKU96b1U-VWUnVWZhMkIhQEJvRXIjTWJhTV5OZWxOaWMoYmluKGlzbW9SJ1ReOjBJYyA5QyFhMEJbbDBJe2RJckl2ITxPVCBBM0JhJ0JlRywpTmEwQXJVICQwSWxPcEAxQTpDYUMkQ3VgRyBHb0lgSj9sL2VMaSZMbGVMXkx2dV1NcCpvUihpIFIuU28zQ2knQyNySGljdT1JbilKZXpMLyFvTG96Ti1jIU5kLWUnTmcgTipOJU51c1JSYSdSYm9SZGVSZWQoaig8UnQhM0FBamVCciBDJEN0aW1hRGFEZW9EciRFam9Fcm5lc0deTExsLWFnX059ZSZPbGluUmFsUmdvUnR1ZFNeU3AhYVMlVGFtaWBVJlZhelYhb1YqVm81TGNhbkx1bSxMdiFSYXpUIFRvWjVFPUxnIDo6OkMhVGUzR3VhTSgnU285RG9HYUd1cjpGKn1qYVBhI1J6YTkzTigrNU1vUiYiLAogICAgICAgICAgICAgICdhZWlvdTc2OTVAQEJaV1dhdndVSmtPQFktS24pKVlFR3EjRUBPKWNJQCNaa01IdiRlKikpTSEhKUQqKiRHVyFvS20qQWNvaF5rJkl0LXBpXlNZVykkXm4hRyliTyFXa3phbShqUyNYKU9nKl5sXlJXIWJRI1F5Z0JLWGZ6RSkpaHRpIVFtKUNuZyUlYyltSmlJKkhKV2JtWW5pQ0x3TmRZeVklV0tPXmJuVCRQdUdPciFJdkh1JkcoR0tidEJ1aGlXJiFlT0BYTWVvWVFlQ2EjIU1yVEpDcSFPVyZDSEcoV0NjVyUlKSRyZnJJZWd1JCl3IUcpSkdtV1d3KU1uRCVTWFhXSVReTFdBWnVWV0JeVyllVExeeCYkV0dIVyhuS1dFTUEpIyRGJHgkV2Fla3FzLG43NzE1KVcqSE0tJFdBY0NpdShhKSlWQ1opR0clKCpDV1dkVyUkRCFVQ08kTScsCiAgICAgICAgICAgICAgJzB4Zjc0ZmI3MDkyYWVhY2RmYmY4OTU5NTU3ZGUyMjA5OGRhNTEyMjA3ZmI5ZjEwOWNiNTI2OTk0OTM4Y2Y0MDMwMCcKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB3b3JkbGlzdCgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gcyAmJiAocyA9IG5ldyBvKCkpLCBzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkxhbmdFcyA9IG87CiAgICAgIH0sCiAgICAgIDI1MDA6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkxhbmdGciA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNzQ5Nik7CiAgICAgICAgbGV0IHMgPSBudWxsOwogICAgICAgIGNsYXNzIG8gZXh0ZW5kcyBuLldvcmRsaXN0T3dsQSB7CiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgc3VwZXIoCiAgICAgICAgICAgICAgJ2ZyJywKICAgICAgICAgICAgICAiMGVycmVsZW9udGl0ZXVyaW51ZWlyaWV0IGNlZ2VhbnNlYWxpIG1lZGVuZWwgcSllbmlsdXhhdXMgY2gwQWlzfUFuZCREaXF1IEVgI09sKk9yZCBPdSVyT3kgUmFzaWZSZXV2IFJpLFJvZyBSdXB0U18tU29sdVMnQFVzaWZZc3M9MEFAbStBam91QXIrbkNhYl1DZXAsQ2xhbSBDb2xhQENyb35lQ3V9RXJiZUhhdEhlLElkdV1JIE9tcCZRdSAqUiR5P1RlJ1RpZlQpbDBFcCZFcXVhdEhlc2lmSmVjJWZKdWcgTWV0dCFNKiBPcCxPciBPdWMqUmVzPFJvaXRVbCZWIGJlMFIgUiRlZjBGYWkhRmVjLEZpfmVGIXtGdWJdMEFjIEVuYyBJI0ksUmFmIFJlYWIjUnU_MUQgR3VgI0w-TWFiI1MvLTBPdSxVcywxQXJtIENoaW0rRXImR2ViIUcpSV8gST9udExlZyBMaWEuTG91IEx1bSBPJ2QqUGFnYVRlczxWZW8jMEEmJ0JpZ3VCIUVuYWcgRXJ0dT9JZCRJcj1PcmMgTydPdmliI1BoaWIrUCMnVXMvdDBBbHk8QXBobyFBcn4rQXRvbStDK25FLyVyRyNHb2lzPEd1I3tJbT1OZXggTiQtTilsT2QoT209K09ueT9Pcm09VF9bVGlkbyZYK3sxQWl9RXJpJWZMLypPbG9nK1BhIWBQZV1Qb3IsUHV5IDBVYXJpdW1VZWR1YzBCaXQhQnVzJkRlJ0RvaTxHX3RMZXF1KE1hdHUhTWU_bnRNb2khTXUhUF8sUmF-IFJpdiBSb31TX2ljVCArbFRpYyMwUGVjdFBoPSZQKiBTfHRTIHYqUyt0JlNvYz5TJyBUaWNvdFQhVHUtMEVsPk8_Uml1bVJvLVRhXlRfJWZUKiBUcmFwIDBCYShlQiAuRGEtRGliI0cnIFJvIVRvbVtUcnV-ZTBBXUFuYyBBcmktRW4qRXI8RXVnI0lhJidJQEkkSX1PKGVPdSBSYDFJPUlvPzpELkZvdSBHYS5HKXQmSWduYUBML2MgTGMkTGUoZUxpc2EuTWIoTmNhaSFOZGEuTmwrKU5uPmVOcXU-UmI-UmBSJFJeUnJhLlNzKFMlJFRhYCNUZXxULCtVZHI-VmFyZCAzTGV0Jkw-TG8mTmVmaS1SLXxSZyBSbChlUm11ZGFTYS1Tb2dbVGFgVXIhM0IgJEN5YyNEdSNKb3VML0woZylMbGFyZE5haSFPbG9nK09wcytPdHlwZVNjdWl0UyRTdG8naVR1P1phciEyQWZhcmRBZylBbn4qRXNzL3RJbmQgT25kT3F1IE91cyQyQmFyZEIoZUkhSX1MaUBOYiROZCpOaGUnTmlmPk51c1JkdSFSW1QmVWMjVWV7VWcrVWwkVXF1KFVyPFVzc28jVSVeWGUnMkFufmVBcz5BdmVFYmlzRX5lRXV2YS5JY29dSWdhQElsbC90SW9-ZUleT351IU9kIE9ueiBPdXM8T3llJ1U_VXNeVXQ9VXkvdDJGZiNJc3MkTCMlblJlfFIoUyUgVCggVG8qVmFiI1ZldCY6Qi8kQihlQ2hldCZEZXxEIUZlKGVJbGxvdUlzcyRMY3VdTGVwKExpYiFMbSBMb21uK0x2YWkhTWFyYUBNIGFNaSRNcGFnW049TmV0JE4kTiVbTnVsYXJQYWIjUG9yPVByaS1Qc3UjUCxQdX5lUmFiKGVSYiRlUmVzfVJpYm91Um5hLlJvdCZSIXxSdCRTY2FAUz5TXlNzdSFVfVUlJFY9PlYgW1ZpYXIzRGAjSW50dSFMZXMmTGx1I05kcj5OcycgTnRyPVJjI1JlYnI9Umk8Um4gUnZlfFN9MkFncihBaTxBIydBbWIhQW4tQXBpdCFBcmIkQXM8J0F0JEF1c3MkQXYqIEVtaTxFbmAjRXF1PkVyfiBFdj1JX0lmZiFJZ24kSW0gZUlvdExvcnUhT2NvbGF0T2lzKk88Tyl0JlJvP1UmMEdhIUdvZ1tNXyxOZW1hTnRyIFJjdV1SIFJeVCBbVG95X1RyJFZgMkEqJEE_J0FxdSBBczxBdj5JX3RJZ24gSW1hdEl2YS5PfmVPbmEuT3BvciYyQj10QnJhQ2FzPENvJSBEIERpZj5GZiFHbiBIZXNpJElmZiBJbmMgTCBlTGlicmlMbChlTG1hLEwkZWxNYmF0TWVkK01tL0BNcGFjdE5jIHROZHVpIU5mPk4uXU5ubyxOcyRbTnRhY3ROdmV4ZVBhKFArUmFgUmJlfFJkYS5Sbml-ZVJwdXNSIWN0UiYuU21pXlN0dT9UJFVAVXB1IVVyYS5VJnxVdnIqWW8mMkFiZUEoJkF2YSZBeSRFYXR1IUVkaSxFP3tFdX1FdmV0JkliXUkgSXN0PUksZU9pIU9xdSBPdGEjVWNpPVVlbFlwLDJCaV5FYGwqSWxdZUlzKGVJdiFMbSggTCV2IE11XVBpQFJhJWZSPCczQW51IUMjTChkIU5pXjpJZ24gTT5OZyBOPCdVcGgoM0JhdHQhQmksQm9yZCBCcmlkIEJ1dC90Qz0gQ2VtYiFDaCogQ2lkIENsYXIgQ29yIENyaSFDdXBdRGEjRHVjJWZFczxGX3NpZkZpXUZyYXkgR2FnIEdpdnIgR2x1JXJHcmFmIEpldW4gTGktTG9nIE0vZCBNZScgTW9sKk5pfiBOb3UgTiZsI051ZCBQYXJ0UF99UGhhfVBsYWMgUG99Ui9nIFJvYiBTYXN0IVMtbiZTIHRTaWduIFNvYmUqU3MoIFN0cj5UYX4gVGVzLFRvJyBUIXM8Vi9jIFZfKlYoIFZvKjNBYiNBbG9nKUFtL3RDLEZmICBHICBHaXQ9R1tMdSBNL35lTSh1IE94eUBSZWMlZlJpZyBTY3UsU3BvfVNzaXAgU3QvLVYgJXJWaX01Q2kjQyYnRz9JZ3RNYShlTWljaSNNcCxOYSYnTmokTm4gUGFtKGVSdG8qUnUhU2EuU2UnU3M-VGElJFUvPlViI1UtJ1UsWV8yQWckQXAgRXN9SWJiXU9pdHUhMlAgK1AjeGVSYWIjUmMqM05hcyVlOjBMb3UqMEFyLEhhcnBlSGVsI0xhKiBMaXA8TG8hTHU8TyNPbm9tK09yLU91LFJhfVJlbSBSaXZhKFJvdVU_VSF1YDBJZj5VcXUgMUZhYyBGZWMlZkZpZytGb3J0RnJheSBGdXNpJDBBbGl9QXIgMkVjLDFBYm9yIEFyZypFY3RyJEVnL3RFcGgvdEV2ZUlnaWIjSSVzP08uVWNpZCBVZCAwQj1dQmVsbCpCcnkkRXJ8QElzc2kkTV8gTyUkT3V2bypQIGUnUGxveSBQb3IsUHJpPFVsc2kkMENhZHIgQ2ggZUNsYXZlQ29-ZURpZ3UgRG9zfURyb2l0RHVpIUVyZytGLy1GIG0gRm91KkdhZyBHKEdsb2IgSWc_SmFtYiBKZXVMZXYgTmVtaU51eWV7Uml-KlJvYmEuU2VpZ1tUYXN9VF9kIVQ-VG8nIFRyYXYgVW0gIFZhaCpWaWFiI1ZveSBaeT8wTCtuMEFpc3MqQXJnW0F0L3RBdSNJYyArSUBtK0kgSWxvZylJW0lzb0BJdGFwaGVPXlJldXZlUm91diBVaXMvdDBVICFVaXBlMElnIE9zaSRSZSdVcCUkMEM9PlBhZCRQZS1QK2cjUG8qUHJpdFF1aXYgU2F5IFNfLVMrdVNvciBUaT9Ub21hY1RyYUAwQWcgZUFdQW5-ZUElXkUoZCFFbmRvKkVyW2xIL29sSGleSG4rSXIgT2ZmIE9pI09ubi90TydkKlIvLlJvaXRVQDBQaG9yKzBBbHUgQXNpJEVudGFgSUBuLUksT2x1JWZPcXUgMUFjdEFnICBBdWMgQ2VsXUNpdC90Q2x1c2lmQ3U8RWN1LEVtcCNFcmMgSD0gSG9yLEkubi1JXUlzLE8lXlBlZD5QbG9yIFBvfVByaW0gUXVpc1Rfc2lmVHJhaSFVbCw6QiNCdSN7Q2V0JkNpI0N0dSFJYmwqTGFpPE1le01gI1ItJ1JmZWx1UihlUm91fmVTYyggVD1UaWcpVWMkVSVmVmUnVm9yaTNCcmkjQyRkIEQgIEwoTT9NJ05kbypPZD1SbSBSby1SdmUnUyV2PVVgI1V0IVZyPjNBc2NvQ2VdQyVmRGUjR3UhTGF0dSFMZXRhLkw-ZUwjdWxMbSBMb3VMdHIgTi9jIE4qTyNSP1NzdSFYIDJBKiBBbT9Bc15BdCYnRXxFfmVFJ0V4aSRPYyRPIVVjdHUgVWlAVXZpPTJMK05kICtOZ2liI050YShlUmMgUmcgJFJtdV1SdHVbU3NpI1VkIVVnIGVVYF1VbHUhVXJtaTJBZ2kjQWk8QW5-KkFwcCBBeWUnRWdhJkUoIEVsJEVtKkVbcytFIUlhYiNJYyUkSXNzJEl2byNPaWRPbWEuT250PU90LFVpdDJHaSVmSSZSZSdSK3tSJWZTaSRUJzpHbiBMYXgrTCArTWJhZCBSLyVyUmQrblJuKlJyaWcpWmVsI1okM0FudExhJVtMdSNOZGFyP04gPU4rTm91TiVsT2xvZytPP3QhUi9pdW1SP1N0KWxZfTNCPkNdUmFmZVYhMkEtQWl2ZUlzfU9iZU9pIU9yK3syTGZlJ00_TmZdUi5SYCNVZHIkVWZmIVVsb3RVcGAjVXJtL2RVdCYyQWQpbEFmZmklQShlQW5kQXBwKEF0dWl0QXYqRW5hdElmZnUhSWxdSW1wIE9nbiBPbmQgT3QmT3VwZVVnIFUlIFV5IGUyRXBhcmRFcnI-SUBJbXx2ZUl0YSFTdGElZjNNbmFzJlJvc3RhdDpCaXR1QENobypMJk1lfE5nYXJOW3QkUmljb3RSbSQrUnAkU2FyZDNMaXVtTWF0bz9SYmVSaXNzJFJtKGVSJFNpLFUhezNCIG4gQm91TGFyL3RTdG9pIVYgNU1hcmRNbWEuTW8uW05bJ05vciBOJntSQFJpeiRSbG8uUm0kZVJyaWIjVSN7VXM8NUJsb3RJI3tNYShNYiNNaUBNbydSXTNEcm8_bEcrW01bUG5vPDoyWWwjMk5vciBVL2U0TGljaSZMdXNpJDBBLkJpYiBJLE1fPE1vYmkjTXVhYiNQYWN0UCBpPVBsb3IgUG99UHJpbSBQdSwwQ2FybiBDX2QrQ2lAbnRDbCggQ29sbyFEZXggRGktRHVjJWZFZGl0RXAlZUV4YWN0RihpRmxpZyBGb3JtIEZ1c2kkRyAgSD0gSGliIEplYyxKdSFOby1udE9jdV1PbmQgU2NyaSFTZWMmU2lnW1NvbGkmU3AqIFMlbmN0U3VsLFRhY3RUXzxUaT9UcmlnKVR1aSVmVSUjVmFzaSRWXyxWaSxWb3F1IDNPbmleUmFkPlJlZWxSaSwwT10yT2khUmVzPDpHdWFySWxsKk1iZU52PlJkKFVnIFVbVmVsb3QzVGFiI1QkVWRpVVtzPDlJbmQhTn4gTmddVWUnVWlzc2lmVXJuPVZpPVl8WWV7NUJpXUdlP250TmlvclAkUmlzJlMlLVRle1ZfaSM6WWFrN00kb09zXjpCZWxCaT1CbycgQyAgQ3RvPEd1W0lbSXN9SSUgTWJlfE1lbCNNcGVOLSdOZ2EuTixbUChSLidSP1VyPlZhYm9WbyozQ3R1IUc9RyBHdT9Tc2l2ZVR0IVY-WGleWmFyZDNBczxCICBCIUNfLUNvcltFLkV2IUdhdHUhR28sRylNIE1pJk0kYUBNcGlATmVhaSFOZ290T24tfFF1aUBTPmVTLFRoaXVtVGkuVHRvcj1WISc1R2leSW50YShJcypNYnJpY1QgK1UgVXJkVXQhVXZlWT01QitDaUBDcmElZkUnR3ViIUlzL3RNPmVOYWkhTmRpUiRULFgpezpDaChlR2FzKEdfdGFHaV5JZyFJbGwkSW4lX0lyK0lzJEpvciBMYXggTGVmaS1MaGUnTGktTCN0Jk1tb3V0aE5kYSxOaWFiI05xdS90TiZ8TilsUmF0aCRSYiFSfi9kUmRpUmklP1JeJ1JyJFImXVNjb3QmU3NpZlQgK2xUPmVUcmFeVWRpIVVzc2FAVXZlWGltPTNDaC90QyRudURhYCNEZWMoRGksRHU8SWwjJ0wvLkxvZCtNYiFNb2khTmFjIE4gTmgqTnMkLk50b3JSYyFkaVJpJlIjU3NhZyBTdSFUPVRlbyFUaG9AVD5VYiMzQXVdQ3JvYmVFdCZHbiRHciBMK3VMbGkkTWleTi1OID1OaW09Tm9yIE51JlJhYyNSb2ksU3NpI1gmNUJpI0QgW0VsI3tOZGk9TmkmJ05uYStOb3QkZU5zdCFOdGFnW051P250USknUi18UnN1IVIlIFRlJ1RpZlV-ZVVmI1VsKFVzcyRVdCRVdi90NUwlcCNOaSUkUmFgI1JlW1JtdSFTYyNTZXVtU2ljK25UYSUkVCBUKWwzUmlhQFIlbCNTLGVUaGleOkdlJ1BwZVJxdW9pc1JyIFRhJSRUaSRUdSFVZnJhLlUlXlZpITNCdSN7Q3RhckZhcyZHYSUkR2xpZyBHb2M-SS5SdmV7VHRveSBVciRlVXRyJFZldTNDaGVDa2VsVHJhJlZlfDVCI0NpZkN0J1tJci0nSTx0Jk1hQE1iIXtNbSBSbWElZlRhYiNUaWY-VG9pIVVycipVdmV8VmEmJ1ZlbWIhVmktNUEuQW5jIEkhSXNpYiNNIG9QJT1RKVRyaSVmOjBFKkplYyVmTGlnIFNjJ1MgdiBTdGFjI1RfKlQnIDBDYXNpJEN1cCBFL1RvYiFUcm95IFR1cF1VbGFpITBFJ09yL3QxRl99RmljPkZyKjBJdmUxU2V8U2BsJDJGYWMlZkl2PjBCcmEuRXR0ITBDdCl7RHVdRSF7SXJpXjFBI0FeRXIgSW5pJFBvcnR1blByaW0gVCBUaV4xQS57QW4uQmkmRCRuIEVgI0cvZUcpYElmaS1OZT9udFEpVCswQ2BdTW88U2F0dSEwQXIrMFJhZy9ScyRUYFRyYWcgVnJhLjBBJSQxWUBZLlsxT1s6SXNpYiNMYS1MbWEhc0xvJ0BMcCBOYX5lTmRhTmdvbChOaXF1IE5bfE5vcmFtYU50PSRQYXllUD5QbyxQeXJ1c1JhZG94ZVItbCNSZXM8UmZ1bSBSXVJvI1JyYShSPG0gUnRhZyBSdSFSdl8qU3NpJFMmXlQgW2xUK24tVHIkVmBsJFZvaX1ZIFlzYS4zSWdbSW50IUxhLkxpYy9MI0xvdTxMdX5lTmR1I05ldHIgTmliI05zaWZOJytQaSZQbHVtUmRyaXhSZm9yIFJpb0BSbXUsUnAjeGVSc2BSJlMgVGEjVGl0VHIqVXAjMkFyYSRPYitPXk90JFJhPFlzaV4wQW5vQ3QnPUUtRXIhRXV2IUxvJk4tfFBldCZRdSBSb2cpU2MoZVN0JFZvLFhlbFp6YTJBY2FyZEFmJGRBaXMqQW4gQV5Bc3RyJEEmfEUnIEV4dXNJYS5PbWJPbmcgVStVbWEuMkNoZXQmRXMrRSZJbiZJcj5Jc3MkSXYhTGFpIUxpYz5MI25MeWckZU1tYUBNcD5OY3QpbE5kICBOZXlSJV5TaSUkUzxkIFN0dSFUYWcgVGV8VGkkVS1VbGEoVW0kVXJwIVVzcyhVdm8qMkEqK0ElXkVjK3tFZGkhRWZpeGVFbHVARW5vbUU8bi1FJngmRXZvKkltaSVmSW4tSXMkSXYgT2IjP08tZCBPZGkuT2YkZE9nIXNPK09qZSxPbG9nKU8_biBPcCFPc3AgZU8mZyBPKXM8T3YgYmVVQG4tVVt8MFl-bzwxQmxpY0MgJEl9THBlTHNhck5haTxOaSVmUGl0IVJpZj5aeiMzUmFtaUA6OTlBc2FyRSFsI0VzJSRJZXR1QEl0LE8lX3Q6QyhlQyQsRCt7RyRkKElAJ0lzKExfJXJMbCQuTWFzfVBpQFNhLlRpc31WYWcgVihZJG4gM0FjJWZBZypBbGl9QW5pbSBDZXZvKkNpLENsYW0gQ29sLENydSxDdV1DeWNdRGlnIERvdSxGYWkhRiN4ZUZvcm0gRnJhKEZ1Lkc9K25HaSRHbGEuR3VsPkksIEplLEpvdSBMYSVmTGV2IEwrZk1hcl5NZUBNaTxNJCxNcGwqTXUgTmFyZE5mb3J0TmlmXU4kYyBOdHIgTnZvaVBsPlBvcixQcmk8UCUjUXUoUyB2ZVMoZXtTb3VkIVNwZWN0UyxTdWx0YXRUYWJsKlRfKlRpY3UjVG9tYiBUcmFjIFVuaSRVc3MqVi9-ZVZpdiFWb2wmVnVsc2lmM0NoZXM8RGV8RSdHaUBHb11OYyBQb3MsU2liI1NeVClsVj1WPmU1Q2hle00vLU1wIU4tTmQoU2V8Uz5UYSVmVG9yVHUjVS5VYCNVI3xVJVtZfD81Qi9CaXNDaGVFbCNHKXtJbiBJczx8UyBTJV4zVGg_OkJdQm8sQiFDb35lRmFyaUdlczxJcypMYUBMaXZlTCRMdSBNZWRpTmMlJE5nbD5SY2FzP1JkKGVUJyBVZyFudVVtJFUsVXZhLlYvdFYkbiAxQWxwZWxBbmRhI0VdYXRFbmFyaW9FcHQhSGVtYUlfLUluZCBPIVJ1JW5VbHAsMUFuLUNhYiNDaCBDb3UgQyEsRGElZkR1aSFJZ1snSm8nTGVjJWZNYShlTWJdTV8tTSg9TmEmJ05zaWIjTiZuLVBhciBRKW4tUmUoUi5udFIre1JydSFSdW1SdmktU2E_VipWcmEuWHR1cCMzRCA9RWMjRWcgRmZdRyNHbj1MXy1MaWNpdW1NcCNOYyBlTmlzdCFQaCRSb3BTbWleVHUgMUkgM0NpPUMjRGl1bUlnW3tMZGF0TGVgTGl0dUBMdWIjTWIhTT9gTW5vXU5ATi4nTlt0Jk5vIVJjPlIlclMrVCU8VWMre1VkdSFVZmYjVSN2IFVwYXBlVXItVSVyIFV2XyowQWMre0ElPUVjaT1IIGVJcj0zQWIjQSUkRXJudW1JbXVsdXNJcHVdUmljdFVkK3tVcGUnWWxpcyYwQmxpP0JzdHJhdEIlbEJ2XypDLXNDIUZmaXhlR2cgIEl2ZSdMZmEmUCBiZVBwbD5SZmEtUmljYSZSP24gUnByaTxSc3x0UnYrU3BlY3QzTGxhYmVNYm8jTWV0citOYXA8TnRheGVTJj86QmFjQmw-QyUjSWxdTF90TGlzbS9MJG4gTWJvJ01pfU5naWIjUGlzUXUoIFJkIFJpZlIlW1M8VGFtaVRvdWEuVXBlVSF8WCAzTW8oTXBvIWxOYWAjTmQhTmUnTipOc2kkUm0oIFJbUnJpYiNUKGVYJjJFP0VvcitFcmFwK09yYXgwQmlhRUBNaUBSZWxpIVJvKlNzdVQvZVQhVHViIDVCb2dnL0wgL3RNYSZOaV5OW3xQJHk_Un5lUmQhUm5hQFJwYCNSIW50UjxSdClUZW1VfiBVcm5hLlVzfVgoZTJBYyUkQWZpY0FnaV5BaCpBKEFufiBBdmFgRWYjRW1wIEVzb3JFdWBJYS5JYnVuPUljbyxJbG9nK0lvbXBoZUlwXUl0JyBJdmk9T21iJGVPbmNPcGljPU91cGV8MkkjTGlwZU11bCZOW2xSYihlVGUnVG95IFl8M01wL1BoJFBpXlIvOjBVZXNeOVRpP1RyYXMkMUFuaT9JZj5JJEleSXRhaSFJdiBzM0FuaXVtQmEoVGljL3QwQS5JW1VlbFUhMEkjT3ArOkNhcj9DYyhHYWIkZEcpSWxsL3RJbmMhSXM8fExhYiNMaTxMbCRMdmVNcGkhTmAjUGUnUj5TZXtTcz1TJjNDJidEZXQmR2V0PUhpY3UjSW5hcmRMby1OZCFkaU4gIE5nIE5pP3tOdG91PFJkdSFSKFJuKlJyb3VSfVJ0dVN0JFQgL1R1cyZYL3RYIDNBZHVjQW5AQ3RvaSFELy5EZW9HW3QmRyknTGEoTGxhLk5haWchT2wkUCBlUmU_bnRSdHVvPFJ1c1NhLlNlJ1NpJFNee1MpbFQ9VGVzPFRpY28jVHIoZVZhLVZpcGEhNUNhJSRHdSBJI0lzKEl0dSFMYWAjTGMvTCVnIEx1P1JhLVImeFQgVWxvKllhLlllbCM6RyQ6M04kOkNodDozQiFOaXRoUyY5T2xvZysiLAogICAgICAgICAgICAgICdlNzY5MyYpVSpvJilSeV4pKilXKSkpKSNYXikpKSlAQCkjV2YpbSUpIyEpKUFHKSZJSUFRSUlJQklJSEpOQWdCSUlMSURKR28pKSlISVFJSUlJQShJR2dKSEgoQklJeFgjKU91KUAqSUFBUElJSUpIUUopJlFJUVBZSShIWUFRQyUpISkpUUhKSkApIyleZipeQVhDSikpJCVDUCkpJSZtKXUpQGVeQSNHIykpV0AhKElLSyUhKEklKSlPQFFBKSlAR0cjZSkpKSlXSEpJV2gpKW15QElJQlReKSEpSEFZR0VUSEkqKSkhUW5VREcpKSluQm9LQUMqSHd5UWgpKSQmKUcmKVVHTylHKSkpKEJYI3YqKiklTyxlNzY4NilJKSlAKSYpZ2RNUCgpKSl1ZClwI0wpKUleRklIWWRXRykpREBERlYpUUEpbyVNeVRoJSopWiklKW4oWEFOY15SKVlTJywKICAgICAgICAgICAgICAnMHg1MWRlYjdhZTAwOTE0OWRjNjFhNmJkMThhOTE4ZWI3YWM3OGQyNzc1NzI2YzY4ZTU5OGI5MmQwMDI1MTliMDQ1JwogICAgICAgICAgICApOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHdvcmRsaXN0KCkgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBzICYmIChzID0gbmV3IG8oKSksIHM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuTGFuZ0ZyID0gbzsKICAgICAgfSwKICAgICAgNjM5NjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuTGFuZ0l0ID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig0OTQ0KTsKICAgICAgICBsZXQgcyA9IG51bGw7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIG4uV29yZGxpc3RPd2wgewogICAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKAogICAgICAgICAgICAgICdpdCcsCiAgICAgICAgICAgICAgIjB0b3JlYSBub2ljYSFpb3Nvcm9sb3RhbGVyYXRlbGFuZW5hJW9pYWRvZW5jb3Rpdm9tYWkgdCBjYSVhMEFdQmFnbCdCaW4jRS5JcyhPbGkhUmFzaV9Sb2cjMENhZGUhQ1skQ3VzI0UgPEhpbCxJQFF1YVJlUmlsPlJvYmErVSAwQWcnRGVie0RvbWVFZ3UjRXJpIUlwZU90dCZVbCYxRmFiaSxGZXxGaXMoRi1uIE9yaXNgTyhSfiQwQXZlRW4uRV8sR2FuYydJIUl0Jk9uaXNtb1I-KlJ1bWUgVXp6bzRBYmFyZGFBIEJhdClCZXIjQm9CdW1lQ2VDb2w-RXw8RmFHZWItSWFuLkliaUltWyBMYWcjTGVnKUxpZV9Mb0AvTHVzaV9NZSRPZ2UkUGF9UGVzdCFUYSw9VGVyJFQlYydUKXZlVW4kVmVvKlomMEFsZ2FgQW5pK0EhPUJ7QnIjRWJhRXJ-RV5zK0ldTWFzKE1bZGFNaXImTW9ue08hUCdQbGkmVSwgMEF9ckBBZy1mZUFsaXMrQXJjaD9BdC1DYUNlbC9Dby1EJkQhYUVsKkdlKkdvbCZHdXMgSWBOZWcmTmlkI05vTnVuYydPbmltb1QlaXBvWmkxQXQ-RXJ0dS1PZGVQYXJpIVBlXiBQb2dnJ1ApQFB1biBSaSwxQWJ-QWNoaWRlQWdvcytBbGR-QW5jJ0F0dS1BenpvQml0KUNoaXYnRHtFbmksR1sgR2k8R3UgSWFNb24_TmVzZVJlZCNSaW5nYVJvcyBTWz5Tb1RlZiVlWmlsKjBDaXV8Q29sIEVwc2lFdHQ-RmFsIEkkTy9QaXIjUClTYWdnJ1NlU29sdSBTdXJAVGFUW3UgVCVlVC18MEF2PkVpc21vT20-TyRUZXNhVGl2JlRvciRUcntUdWEsMFNpbCdTdHI_VGlzK1RvJG1vVHVuJDBBbnojRSFWW2khVmkoVm9sZ2UhM0lvPE8gWmltb1p1cik6QmUsQ30kQ2kkQ29EZXNzYURpLytHbiNJK0xdPExATGU9TC8rTHphJE1iaSROZGkhUmFvbmRhUmJhKVJ9UnskUmx1bWVSb2NdU2lsPlMoVG9zK1R0dSBVLFZhVm9zYTNDXUZmYUxnJ0x2YU5kYU5lXyxOaWckTnppPVJlUmxpPVRhM0JpK0NpRG88RmlAR2FMYW5jP01ib05vXSpPKmdvUGVkZVBvbCZSYmFuLlItU118U2VzIFMkbiRTb24uU3R1cmlaemFyKTJBbkBBdCsyTGx7TmlmPlJAU11UYW4-VF4kWnpvKjJBY2MnQWRpcG9BYEFufUF2dS1FLmwvRXZlfEV6emFJZ2w_SWwvbi5JbmQmT2NdKk9AT256aT1VbCpVJDJCYm88Q2FEaSRGZm88SW9MYm9PJFIqPFItc31TKC9TKzpEZXxEdV1MYWApTF0qTGVzc2VMaWIpTG1vTG9yP01idXNhTWUtK00lP01taSRNby9NcGEsTmFwYU5kZS9OZU5pJE5vfE5ePVBhY2VQZWwqUHsqUG9naSlQcGUpUC1Qc3UvUmFwYWNlUn1zc2FSQFJpc2BSb3ZhPVIhfFIgbGk9U2FjYydTfStTZXJgU29TKDxTLmwqU3VhLFRhcytUZT1ULW1lVSBWaWwqM0RpYmksRC0rRmEqTGViIUxsdWwmTmFObzxOLnNpbW9SYW1-UmMmUiBSdW1lUnZlbCpTbz9TcG9UbzJFL0lhKUljfUllZGUhSW1lLUk9SXJ1cmdvSStyLTBBb0NsaXNtb0ZyJkckTGluZClPfCpSfVIpc2lUcj5UK2RpJFVmZm9WZXQrVmksMkFzcz5Jbn5PKTJDXURhckBEJWVFIW4uRyRtZUxsJkxtI0xvIUxwbyhMXnYjTHphTWFNZStNYG5ATW9ATXB1LnJNdTxOY2koTmR1ciFOZmVyYE5nZWwmTml1Z2VOPHMoTm9zY2UhTnN1bW9OXm51b052ZWckUGVyIFAnPFBwP1ByfnBvUmF6emFSZGErUiUjUm4lZVJvbC9ScG9SIUBScz9SLnNlU20-UytuLlR0dS1WIzJBLiFBdmF0K0UjRWRlIUVtbyhFc2NpK0UrSWNlIEk9LElzaUl0Pk9jZU89fU9zKytVYz8sVXN9MkNpIUN1KkdpJExsI1BvL1IjIVIoIVJfU2NpJFMgZGU6RG9JJExgK01lcmkkTmllL04kKE56JlQjVmFuXlZ2ZSkzQnV8Q1tuJ0NpKENsaSRDb2wqQyEgRCUjRmlue0Zvcm1lRyRMZWcmTGZpJExpcidMK01bemFOb3QjTnQpUG9ze1JhcGErUml2JlJvZ2FTY3JpfFNlciBTaWRlcidTdW1lIVRlcnNpX1ZvIDNBbWV0KUNlbWIhRWQpRmUoRmZ1KEdlcmkhR2krLEx1didOYW0-Tj1uemlQaW4gUCpgUG8qUmFkJlJlUm98UnVwb1NhZydTYyEgU2YmU2dlKlNwb3MgUytuemFTdWAkVG9WYSRWZWwgVmlkZSFWb3IjNUIqPENbLkdhPSxHYExjZU0jTVt-TWluJk5AKk5vUm1pIVRlVCAhVnUgWnppPTJBZ29VaUAyQmInQml0JkNhLE5hT21vUGwlZVJhdHUpOjBBJDBDZXMoQ29MaXNzaU8kbT8wRS1JXS9JLEkgcj9VYyYyRW1vbj9MaU9pc21vUmVnJzRBYm9yI0FyZ2khRWdhbi5FbmMjRXxFdiZGPkl9TW9TYVUoMEFuI0IsYEVzKEkpT15fT3onPFBpcj5VKjBEZW0-RHUpRXJnP0Zhc2lPLn1UciZaaWAxQV4uSSpnb0koZCdPfSxQdSEwVSMhMEFyJ0JhQm8oRWRlRW1pK0lnZSFNZXQ-T2VPc2lfUmFuLjBBZ28kQW1lQW5pbWVBdWRpIUNhRW1wJ0VyY3tJYntJZ1suSXMuIUkgT2ZhZ29PcnQjTyhQYW4oUCFzKFNbemFTb1RlKFRpbSZUb24_VCkoVWx0JjBJbD5OPlJ1c11UbzBDbGlkZW9Sb3BhMEEoSWRbemFJdCNPbHUgVml2YTpCYnJ-Q2NbZGFDaGkpTF1NaWdsP05hLE5mYS1OZ29OK3NgUmVSZmFsL1JpJChSYF1TYz9TIChTdWwqVCUmVG9WbyooM0JiIUNvL0RlRyNMcGFMdClNbWk9TmRlIU5vbWUkUm1bIFIpUl4sU3N1LVNeX1QrVUAzQWJhRHVjP0ZhR3VyI0xvTmFuemFOZXN0LU5pIU8hU30sUz5VbWUyQV08QW1bXUVib0VtYE9yaUBVWy5VbykyQj5DYWNjP0NvKERlciNHbCdMYStMYyohTGdvIU5kWy5OZXQ-Tj9OKz1SYntSY2hldCtSZXMrUm1-Uj0nUm9SLnp6YVJ6JlNmI1MoMkF9cyhBPUFzc2kkQS5sKkVjY2V0K0U9K0VzXUlnb09sbGkkT25kZVVnYSxVdCsyQ2kvK0NzP0dnWy5MbWk8TF9NYW4uTWV8TW8oTmVOeic8T11SYm9SZ288Um8hU29UaSw6QmI_JEZmZUxhLm9MbGk9TG9wcG9NYmUpTWBSYW56P1Jib1JvZmEkUnpvPFNAfFNvbCdTdHI-VCBVZCdaZWJvWnplbC8zQ29MYV49TChNZWwqTW0jTmVOeyFOPSdOb15wb1JnbzJFcGFyQElhY2MnSXNhMEFsKkxkYU5lcClPYyZPaWVsKk9yJE92ZVIjUm88VCsrVWRpeidVciNVcyAyT2J1KlVePDFPbW8wQmJhTGZNe01tbzxOZidOPVZlciQyQWNpLEFAQWY-QW1tb0FuZGVBdHQmQV8oQXo_RX1FZ2dlSWZvPElnJ0luemFPdCtVcHBvMkFkYWckQSdBbiBBcmQmRm9JZCY6OjBFcm4jME89MEVudD5JbGwnTypSYVI-Um9nZSQySWU8TmEpTm9yIzRBIUxlKExvZz5MdWRlITBCYWwqQmV2dSBCb2NdQnUgTWE8TWVyKE1vbCNQYWNdUGUgUGllZ29Qb3IgUCluKzBBbCZBcmMmQXReX0NhbiBDW2QnQ2hpJENpc2lfQ2x1KENvbnQpQyljJ0N1Ym9EYWdpPEQ_RG8sRWR7RmF0XkZpbCZGbGl8R2FnZydHZWckRyxzZUdvckBHKXMoTmVzXU9AIU9sdHImT25kI1NhJFNlfFNpZW1lU29ubj9TdWxpPVRhcyNUZSlUbz1dVHV7VW1pZGkhVmFsaUBWZWNlVnsxRXJibyxOb3Q-Ty5zaVB-MUlkZUxhbmRhT24-UmlnI1JvciYwT2wjTyBwb1Rlcj5UaXR1IFRyJWUwQWw_RXImOjo6QmIpQmlyaW4gQ31DZXIjQ3JpYEN1PURAdmVHb01wb05jZXQrTi5yPVJAKFJnYVJpbmdlU3QtVFt6YVRpJFR0dWdhVmFnPVZvKTNHYSxHZ2UpTWJvTi56emFOemFPPFAhU2lfU3MjUyBULi0sVmFWaWcjM0JlKURvRXZ7TC9NYXR1LU1pdCZNcGlATmUmTmd1YVF1aUBSYVJ-U31UZVRpZydWIWE1Q2FuZGFEZUd-TWImTmQtTmdlX1F1YWNlUlt6b1RvVC5yPzVDZUNpZCNNYX1NaSQoTmdvUG9QcG8qU2luZ2FTKFQgOkNhYilDY2hpPUNlKUNpbiNEYWBHPkdsP0c8LkcpSW9sfkxhZmVkZUxnLUBMaW4uKExzYSRMIEx1bW8hTmFOYz9OQHIvTmdpJk5pZmVzIE49KU5vdi1Oc2FyZGFOXmRlTnVicidQcGFSIz1SY2khUmV0K1Jtb1JzdXAnU2NoZS1Tc2E_U14kVGUtcyhUcj4vVCA8VHUpWnVyfTNBbmQpQ31uPkNlPS5EZXNpbW9EaXQmR2FMYXNzYUxpc0xvZD9OaW5nZU5vTigvUmN1cidSW2RhUipTY2hpJFNlU3NlIVMgKlRhbCpUb0BULiEzQWdvbCZDYUNlbCdDaGUsQylib0RvbCpFLEdsJyFMYSRMaS5Nb3NhTmUtLE5pTm8hUmkkUl5sKlNjZS9Tc2l2YVMgU3VyJlRlenphVGlnJlQtVC5uLjRFbW9uPjBEZWwqRGlmfkR1KkdhJEcnTGVMb3MoTmFzLilOXU5kaT1OZStyJ05pLE5vICROKDxOdCNOdmkoUmFSZGUhUnMlI1N0KVRpdiNUb3NlZ2FUIFZbemFWaW1bIFp6bzVDfUNvc2FGZmFHaGV8Rz0nTGF8TGk8bCpMXnAqTW0_TiBPdmUhUmEsU2FTXSpTflRlXyxUbzpCYWJib0YrTm9tZXQpUmNpKFIlZVJyI1NjZSFTdHImVHUtLFV0flZpZ2wnM0J1KnNhQylzaUdhXl9Hb3onTW1lJE9maStSZXxSX1NzdSRUdHUkVXQtLFZlVil0PjNDY2g_TmZhVGlANUJpLENpX0RvTWVNaT1SZD5SYCxSdmVnZXNlU3QtJFQmVGl6P1R0dXIkVmVsLzVDLG9ML01lKU9fVHJpIVZvL1o_LDpTaTBCZWRpIUJsaWdvRWxpc11MJ08qU28sIDBDYXMnPENoJ0NpZFsuQ29yISFDdWx0JlJhVWwjMEllciRPciYxRmVyK0ZyaSFGdXNjIzBHZXxHaU51JDRBbmRlc2VGYXxJI0l2YU9nLW1gVCEwQWdnJ0JlbD5CLUVnYUlzcyc8MERvKEUhSWNlTmlfKU8hXyxUYTFFciNJbic8UG9zIDFBXSpBZm9EaTxFY2NoaSRFZiVlRmEkR2FuPklnaTxJenpvbi5NYU1lZ2cnTmFeX08qZydSW0BSaWJpLFRbcz9UflphK1pvMEEhQ3VyJk1vc2lQZWRhLFBpLlNhU2lkJlRhXSpUZTBJLlJlVGFnbyRUaW1vVG9iITFBLEVzdEkkSXBhKU9je1VucXVlVmkmM0lvOkNjaGV8Q2VDaWY-RGVsL0QpPEVzZUdhR2k9TGF6emk9TGVzJkxsaUBMb0x1ZGVOQClOPGwqTypPPXp6b1ByflJhYm8vUmNlbC9SZSFSZ28qUmlSbCNSby9SXiFSdlt6YVJ6PyxTc2lfU3QlfVRhY31UbypnP1R0dW1lVm88M0NjI0RhbCZEbz0sR2cnTG8oTiZOZCVlTmkoL05udSBOb21iLU5zJk4gL1BlUGkrUmJlPFJdcihSQG4jUmZvciZSZ2FtZT1SJ0BSbWVzKFIkUnAscyhSc3VhKFJ0dWcnUnZhKFMjIVNpcytTb1NeZmUpVGEqVF48VHUvbi5aem8zQWNlIUFuK0F0XiRDY2kkQ296emFFZ2FFdC1GZmUpRz9gR29sJ0cpTGFMaWZlKUwqL0xvK01wYW4uTmUrTj1ObypPZ2c_T21ib1JhbWlkZVJldD5SaS5Sb2xpc2lUbzxaej4yQWNlYm9BbiZBc2BBKyRFPXInMkNoZXp6YURlKShEaXNtb0VzP0dnaSZMWytMaWdvJExsJWVMbW9uaS5McGV0K0woTHQpPUx2ZSFNJWVNb0ApTi5QbyooUmZpQFJvKFJwby1SIVIrK1NhU2leX1NzZXMoU3R1bCNUYXNzJ1RlITJBbnpvQXNzaUF0fkVjbHUoRWR-RWZpcyhFZ2kjRWxpZV9FbWUhRSR0JkVwYXIjRXNbemFFLnMgRXZhbChJYEluY2lwZUl2I09iLGBPY3UtT2R1ciFPZnVtb09nZXxPbHVuZ2FPbWVzc2FPJG1lT3BvcytPKWdhTy4oT3ZhVWRbLlVnPVVyezBJY2hlMUJibD5EfkdpbCNHJExjZUx7THNhbi5OdCZQYXp6b1BpbC9Sbzo5OUFkKUFsXXNhQXNpRSEvTys6Q11sIERAcHAnRH4sRHVuI0ZmfkdhenpvRyc8RyRNYXIpTWluZ29Nb05kYWcnTiBsJlAjUGk9UHAhKFNhdHUtU2NoaSNTWy5Tc2VnPVN0IWwqVGFWdmVkdSAzQSxDZXBpIUNpbiBDbHUrQ29uZHtDdXBlKURke0RpbWUhR2FsI0dpc3QpR28vRyFzKExheic8TSZNbyBOPVBsflByaW1lIVB1dCZTYVNpZFsuU3BvbihTK3UpVGVUaT1Ub3J-VF5mflZvYyMzQXNzdW4gQmFkaSFCZWwsQiF6em9DYXJ-Q11DZXZlIUMlbCNDb3JAQyFkdSBEPipEdXIhRmFzJkYscyhGb3JgRnVnJ0cmR2V0dCNHaGVsKkxhc3MjTGV2I01hPCFNYmFsem9NZWQnTW9yY2gnTmFzY2krTn0pTmZvcnpvTiRfTm9tI05zYXZ7TiBjXU51bmM_TnZbaSFQYXIjUGV0dSBQaWUkUG9ydCZQIXNhUHVsaSFTYStTY2gnU2VydmFTaWJpLFNvU3BlfFMgKVN1bHQjU19sIFRhckBUZWckVG0-VClfVW4nPFZhVmVyKFZpbmNpK1ZvbCBab2A1QmFCb3Q-QnVzIENjP0NvRGFnZydEZSFEeyFHe0xsJ01hbnQ-TXBlIU56J1NvbCZTcG9UYW4uVG9uQFR1L1Zlc2MnNUJpenpvQnJ-R2FMbGkkTWk8TW8pKE8qUGVTcyZTdD46QiNCYmkmQm90I0dvYExhcyhMZGF0dS1MZ2VtYExpdiZMbW88TG88THQmTHUgTF9QZSFQaUBQb3J7UmFjZSRSfXNtb1IgUygoVGVsbGkuVGktVG9sKlR1ciRWYT1WJ1ppIzBBZGlnbCdBbHpvQW5jI0FyLUF0LiFBdiZFbmQmSXJjaSZMb2NjI09jY2kjUmluJlJ1ZmZvPFVmZiYwQWIpKEFkW3phQS9BbWJpJkFuZGEqQXBvL0FyKEEubiZBdiNFbCBFbj5FdHQpSGVkYUhpZT1JYXJwYUlbemFJbmRlIUlwcG9JKXBwb0lfKkxlciZPZGVsL09scHtPbXBhciBPbmZvciBPcHJpIU9yK09zKDxPenplc2VSaWJhUm9sbCZSdV5uJ1VkZXI_VWwgIVVvL1UpVXMmMEViaXQmT2dhbiYwQ310dS1Db25ARGEkR2cnL0c9bCNHIWcjR3V7TGNpI0xldF5fTC9MdmFnZydNYWZvKU1iciZNZU1pbiNNcCFOKE5eIVBvbCBRdVt6YVJhK1JiI1JlJFInUnBbLlItZ2wnUnZpIVNePVRvL1ReYD0wQWNlKkFsZCZBbSNBcnpvKEF0JSNFLUlkYUlsI0luZ2VPYyNPZGVyJk9nb09sXiFPcnojUmF8UnV0dCNVZ2d7VW0mVSgwQWJlbCpBcmIjT25maSZPcmInUmFzcyNVYXJAMUJpKkNdbWVFci1HL0ckIUxbeidML2JhTWJvKk1wYXQ-TXVsI05mb24_TmdvKk5pc3QpTm9OLnNpTnUoaWRlUGFyJ1NgUyAsVHUjMkl0K09nYXR1LU92ZSQwQXJye0Vtb3IjRW5eIEUtbEBJbHpvT250Jk90dCNVc3MjMEVsbGkhRXJ2I09AMEJiYWx6b0JyJ0NdcihDPyxEYSxGZml8RyRMZCNMWzxMaUBML3p6b0xvTHViaSxMdlsuTWF0Pk1gTmRhTmV8Tm5pZmUpUGkhUHBlKFAtUmdlIVJwYXMoUnJpKFIoUi5nZydSX2wjU3BpKVMrVF4sMEFkYUFsL0FyZ2UhQSAvQXZbIEF6em8vRWNpZUVkaSFFZzwhRS90dS1FLW56YUVzKCFFdHQtLEV6eiNJYUlnbyooSWxsI0kkKEktLExbZGlAT3JeX08oUmFuZ2FSZWMmUm9uI1J1enpvVW5eJDBVaWwqMEFkJSZPIGwjMUFiaSxBY11BZmZhQWduJkFtcCNBbnQnQXJudSBBc2UtQXR1IEUqRXBwYUVyem9JLHxJYElycGVJdmEsSXp6byhPbiNPcj5SYXBwb1JlZyNSaWR1KlJvenomUnV8VWNjJlVmb1VwW0AwQlt0KUNdKERvIUdnZXJ7R29MKyRPbiZQZXJib1Bwb3IgUmdlbCNSKWcjU3N1cilUdS0wQWcmRWRlc2VFZ2wnRWwmRW51IEV6P0lsdXBwb0lzK0l6emUtT2wrVW90JjpCYWNdQnVsI0NjaSZDaXR1ciRMZUxpc2AkTXBvPE5uaSRSYVJkaV9SZyNSaWZmYVJwJlIrcnVnYVMgVHQ-VmVyPVZvLytaemEzQ2FDbj5MZWZvJE1lLXInTXBvTXUgTkA8TmUpTnMnPE4rXSpPIWBSbWVSLXp6b1J6ZXxTaVNzZXIjU3QjVClUID8zRiZHZWwvTWIpTiBQPlBvZy1mb1JhZ2cnUm9UYW4nVG8qVHViYW4uWidaem88NUNjJkwsciZMIE1iby9Nb05mb05zaWwvUGF6J1BvKmc_UHBhUmJhUm4mUik8UiAtU30kU3NpIVMrdHUtVGEkMkFib2NdQWNoZWFBZmkvQWdlZD9BbGMnQW1vbiBBbnN7QXBhJEFyIUFzKl1BdHQjQXZlRWNjP0Vtb2wnRXNwbypJYnUgSWNoZV1JZm9nbCdJbCpJbmNlYUlvSXMuenphSXR1ciNJdmVsL09tYmFPJE9wcG9PfC9PdiZVY2MjMkJhdHUtRmYjTGlwYSRNdWwgTmlzP1JiJlJjaGkkVGFUZS86MEljIzBDZWwqQ2koITBJIUleXzFGYUYlJzBVYSw0SXNzZVRpbSMwQSRJLE9yaXNtbzBDaTx8R2UhR2hlIXNlSV1yJElmJSNJKCRJK3InVGUwVm8wVXBhMUFnYSRHW3phTG8wQW56YUEgQ3tJZyQqVS0nMEVuc2ksSWxpenpvT3A_OkNhbi5DY2luI0dhYm9uQEdsaSNMYW5nYUxnb0w-TCx0K0xvKShMdXQmTF8vTXBhK05nJk57KE5vTitnZydOdmUtUG8hUmEkUmMjUj9uLlN9M0RldCtEb3ZhRHUgR2UrLEldKkxjKUxpPUxsdSBMb2NlTiNOZGVtbT9OIFJhY2VSYmEsUmdvZz1SaWZ-Um9ScnV9UnR-LFNjflNzaWwqUyssVGUtJFRyaT1UdXMgM0FuZGFuLkItbi5DW2RhQ2hpbmdvQ2k9bnphRGltJkdpbD9HPCBHbyFMZUwvJE1pbmlOY3shTy9QZS1SZ28vUm8qZ29SdSxuIFNdKFMnPFNwb1NzdSBTdS1UYVRlbCpUXmBWYW5kYVZpQFppJjVDZUdhTGFeLExlIUxwZVJhZ2k8NUx9JDo6OjpNcG9nPU49UHAjVC4tVm9yLTNGaSlMYW4uTG9OemUpUmJpJDNCZXxOXVJdPFQgNUwvVD41Q2NoZSlGbypMdVBwYSIsCiAgICAgICAgICAgICAgJzB4NWMxMzYyZDg4ZmQ0Y2Y2MTRhOTZmMzIzNDk0MWQyOWY3ZDM3YzA4YzUyOTJmZGUwM2JmNjJjMmRiNmZmNzYyMCcKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB3b3JkbGlzdCgpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gcyAmJiAocyA9IG5ldyBvKCkpLCBzOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0LkxhbmdJdCA9IG87CiAgICAgIH0sCiAgICAgIDg1NDg6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkxhbmdKYSA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNjg5NiksCiAgICAgICAgICBzID0gcig1MzE2KSwKICAgICAgICAgIG8gPSByKDIxMDgpLAogICAgICAgICAgaSA9IFsKICAgICAgICAgICAgJ0FRUkFTUkFHQkFHVUFJUkFIQkFnaEFVUkFkQkFkY0Fub0FNRUFGQkFGQ0JLRkJRUkJTRkJDWEJDREJDSEJHRkJFUUJwQkJwUUJJa0JITkJlT0JnRkJWQ0JoQkJoTkJtT0JtUkJpSEJpRkJVRkJaREJ2RkJzWEJrRkJsY0JqWUJ3REJNQkJUQkJUUkJXQkJXWFhhUVhhUlhRV1hTUlhDRlhZQlhwSFhPUVhIUlhoUlh1UlhtWFhiUlhsWFh3RFhUUlhyQ1hXUVhXR2FCV2FLY2FZZ2FzRmFkUWFsbWFNQmFjQUthUktLQktLWEtLaktRUktEUktDWUtDUktJREtlVktIY0tsWEtqSEtyWU5BSE5CV05hUk5LY05JQk5JT05tWE5zWE5kWE5uQk5NQk5SQk5yWE5XRE5XTU5GT1FBQlFBSFFCclFYQlFYRlFhUlFLWFFLRFFLT1FLRlFOQlFORFFRZ1FDWFFDRFFHQlFHRFFHZFFZWFFwQlFwUVFwSFFMWFFIdVFnQlFoQlFoQ1F1RlFtWFFpRFFVRlFaRFFzRlFkUlFrSFFiUlFsT1FsbVFQRFFqRFF3WFFNQlFNRFFjRlFUQlFUSFFyRERYUURORkRHQkRHUURHUkRwRkRoRkRtWERaWERiUkRNWURSZERUUkRyWFNBaFNCQ1NCclNHUVNFUVNIQlNWUlNoWVNoa1N5UVN1RlNpQlNkY1NvRVNvY1NsbVNNQlNGQlNGS1NGTlNGZFNGY0NCeUNhUkNLY0NTQkNTUkNDckNHYkNFSENZWENwQkNwUUNJQkNJSENlTkNnQkNnRkNWRUNWY0Nta0Ntd0NaWENaRkNkUkNsT0NsbUNsRkNqRENqZENuWEN3QkN3WENjUkNGUUNGakdYaEdOaEdERUdETUdDREdDSEdJRkdnQkdWWEdWRUdWUkdtWEdzWEdkWUdvU0diUkduWEd3WEd3REdXUkdGTkdGTEdGT0dGZEdGa0VBQkVCREVCRkVYT0VhQkVLU0VOQkVOREVZWEVJZ0VJa0VnQkVnUUVnSEVoRkV1ZEV1RkVpQkVpSEVpRkVaREV2QkVzWEVzRkVkWEVkUkVrRkViQkViUkVsRkVQQ0Vma0VGTllBRVlBaFlCTllRZFlEWFlTUllDRVlZb1lnUVlnUll1UlltQ1laVFlkQlliRVlsWFlqUVlSYllXUnBLWHBRb3BRbnBTRnBDWHBJQnBJU3BoTnBkQnBkUnBiUnBjWnBGQnBGTnBGRHBGb3BGckxBRExCdUxYUUxYY0xhRkxDWExFaExwQkxwRkxIWExlVkxoSUxkSExkUkxvRExiUkxyWElBQklCUUlCQ0lCc0lCb0lCTUlCUklYYUlhUklLWUlLUklOQklOdUlDRElHQklJRElJa0lnUkl4Rkl5UUlpSElkUkliWUliUklsSEl3UklNWUljUklSVklUUklGQklGTklGUU9BQk9BRk9CUU9hRk9OQk9OTU9RRk9TRk9DRE9HQk9FUU9wQk9MWE9JQk9JRk9nUU9nRk95UU95Y09tWE9zWE9kSU9rSE9NRU9Na09XV0hCTkhYTkhYV0hOWEhEdUhEUkhTdUhTUkhIb0hoa0htUkhkUkhrUUhsY0hsUkh3QkhXY2dBRWdBZ2dBa2dCTmdCUWdCRWdYT2dZY2dMWGdIamd5UWdpQmdzRmdkYWdNWWdXU2dGUWdGRVZCVFZYRVZLQlZLTlZLRFZLWVZLUlZOQlZOWVZEQlZEeFZTQlZTUlZDalZHTlZMWFZJRlZoQlZoY1ZzWFZkUlZiUlZsUmhCWWhLWWhEWWhHU2h4V2htTmhkYWhka2hiUmhqb2hNWGhUUnhBWHhYU3hLQnhOQnhFUXhlTnhlUXhoWHhzRnhkYnhsSHhqY3hGQnhGTnhGUXhGT3hGb3lOWXlZb3liY3lNWXVCUXVCUnVCcnVETXVDb3VIQnVkUXVra3VvQnVsVnVNWHVGRW1DWW1DUm1wUm1lRG1pTW1qZG1URm1GUWlBRGlCT2lhUmlLUmlOQmlOUmlTRmlHa2lHRmlFUmlwUmlMRmlJRmloWWliSGlqQmlqRWlNWGlXQmlGQmlGQ1VCUVVYRlVhUlVORFVOY1VOUlVORlVEQlVTSFVDRFVHQlVHRlVFcVVMTlVMb1VJUlVlRVVlWVVnQlVoRlV1UlVpRlVzWFVkRlVrSFViQlVqU1VqWVV3WFVNRFVjSFVSZFVUQlVyQlVyWFVyUVpBRlpYWlphUlpLRlpOQlpRRlpDWFpHQlpZZFpwQlpMRFpJRlpIWFpITlplUVpWUlpWRlptWFppQlp2RlpkRlprRlpiSFpiRlp3WFpjQ1pjUlpSQnZCUXZCR3ZCTHZCV3ZDb3ZNWXNBRnNCRHNhUnNLRnNORnNEcnNTSHNTRnNDWHNDUnNFQnNFSHNFZnNwQnNMQnNMRHNJZ3NJUnNlR3NiUnNGQnNGUXNGU2ROQmRTUmRDVmRHSGRZRGRIY2RWYmR5U2R1RGRzWGRsUmR3WGRXWWRXY2RXUmtCTWtYT2thUmtOSWtORmtTRmtDRmtZQmtwUmtlTmtnQmtoVmttWGtzRmtsVmtNQmtXRGtGTm9CTm9hUW9hRm9OQm9OWG9OYW9ORW9TUm9Fcm9ZWG9ZQ29ZYm9wUm9wRm9tWG9qa293WG9yRmJCRWJFSWJkQmJqWWxhUmxERWxNWGxGRGpLampTUmpHQmpZQmpZa2pwUmpMWGpJQmpPRmplVmpiUmp3Qm5YUW5TSG5wRm5MWG5JTm5NQm5UUndYQndYTndYWXdORndRRndTQndHRndMWHdMRHdlTndnQnd1SHdqRHduWE1CWE1wRk1JQk1lTk1USGNhUWNOQmNESGNTRmNDWGNwQmNMWGNMRGNnRmN1RmNuWGN3WGNjRGNUUWNyRlRRRXJYTnJDSHJwRnJnRnJiRnJUSHJGY1dOWVdOYldFSFdNWFdUUicsCiAgICAgICAgICAgICdBQkdIQUJJSkFFQVZBWUpRQUxaSkFJYVJBSE5YQUhkY0FIYlJBWkpNQVpKUkFaVFJBZFZKQWtsbUFiY05BamRSQU1uUkFNV1lBV3BSQVdnUkFGZ0JBRmhCQUZkY0JOSkJCTkpEQlFLQkJRaGNCUWxtQkRFSkJZSmtCWUpUQnBOQkJwSkZCSUpCQklKREJJY0FCT0tYQk9FSkJPVkpCT2lKQk9aSkJlcEJCZUxYQmVJRkJlZ0JCZ0dKQlZKWEJ1b2NCaUpSQlVKUUJsWFZCbElUQndORkJNWVZCY3FYQlRsbUJXTkZCV2lKQlduUkJGR0hCRndYWEtHSlhOSkJYTlpKWERUVFhTSFNYU1ZSWFNsSFhDSkRYR1FKWEVoWFhZUUpYWWJSWE9mWFhlTmNYVkpGWGhRSlhoRUpYZFRSWGpkWFhNaEJYY1FUWFJHQlhURUJYVG5RWEZDWFhGT0ZYRmdGYUJhRmFCTkphQkNKYUJwQmFCd1hhTkpLYU5KRGFRSUJhRHBSYUVQRGFITUZhbURKYWxFSmFNWkphRmFGYUZOQmFGUUphRkxEYUZWSEtCQ1lLQkVCS0JIREtYYUZLWEdkS1hFSktYcEhLWElCS1haREtYd1hLS3dMS05hY0tOWUpLTkpvS05XY0tER2RLRFRSS0NoWEtHYVJLR2hCS0diUktFQlRLRWFSS0VQVEtMTURLTFdSS09IREtWSmNLZEJjS2xJQktsT1BLRlNCS0ZFUEtGcEZOQk5KTkpCUU5CR0hOQkVQTkJIWE5CZ0ZOQlZYTkJaRE5Cc1hOQndYTk5hUk5OSkROTkpFTk5Ka05EQ0pORFZETkdKUk5KaUROWkpOTnNDSk5KRk5ORlNCTkZDWE5GRVBORkxYTkZJRlFKQkZRQ2FSUUpFUVFMSkRRTEpGUUlhUlFPcVhRSGFGUUhIUVFWSlhRVkpEUWhOSlFtRUlRWkpGUXNKWFFKckZRV2JSREpBQkRCWUpEWE5GRFhDWERYTFhEWFpERFhzSkRRcVhEU0pGREpDWERFUGtERXFYRFltUURwU0pET0NrRE9HUURIRUlEVkpERHVEdURXRUJESkZnU0JORFNCU0ZTQkdIU0JJQlNCVFFTS1ZZU0pRTlNKUWlTSkNYU0VxWFNKWVZTSWlKU09NWVNIQUhTSGFRU2VDRlNlcFFTZWdCU0hkSFNIckZTaFNKU0p1SFNKVUZTa05SU3JTclNXRUJTRmFIU0pGUVNGQ1hTRkdEU0ZZWFNGT0RTRmdCU0ZWWFNGaEJTRnhGU0ZrRlNGYkJTRk1GQ0FEZENKWEJDWGFGQ1hLRkNYTkZDWENYQ1hHQkNYRUpDWFlCQ1hMRENYSUJDWE9QQ1hIWENYZ0JDWGhCQ1hpQkNYbERDWGNIQ0pOQkNKTkZDRENKQ0RHQkNEVlhDRGhCQ0RpRENESmRDQ21OQ3BKRkNJYVJDT3FYQ0hDSENIWkpDVmlKQ3VDdUNtZGRDSmlGQ2ROQkNkSGhDbEVKQ25VSkNyZVNDV2xnQ1dUUkNGQkZDRk5CQ0ZZQkNGVkZDRmhGQ0ZkU0NGVEJDRldER0JOQkdCUUZHSkJDR0JFcUdCcEJHQmdRR05CRUdOSllHTmtPR05KUkdEVUZHSnBRR0hhQkdKZU5HSmVFR1ZCbEdWS2pHaUpER3ZKSEdzVkpHa0VCR01JSkdXak5HRkJGR0ZDWEdGR0JHRllYR0ZwQkdGTUZFQVNKRUFXcEVKTkZFQ0pWRUlYU0VJUUpFT3FYRU9jRkVlTmNFSEVKRUhsRkVKZ0ZFaGxtRW1ESkVtWkpFaU1CRVVxWEVvU1JFUEJGRVBYRkVQS0ZFUFNGRVBFRkVQcEZFUExYRVBJQkVKUGRFUGNGRVBUQkVKblhFcWxIRU1wUkVGQ1hFRk9ERUZjRllBU0pZSkFGWUJhQllCVlhZWHBGWURoQllDSkJZSkdGWVliUlllTmNZSmVWWWlJSllaSmNZdkpnWXZKUllKc1hZc0pGWU1ZTVlyZVZwQk5IcEJFSnBCd1hwUXhGcFlFSnBlTkRwSmVEcGVTRnBlQ0hwSFVKcEhiQnBIY0hwbVVKcGlpSnBVSnJwc0p1cGxJVHBGYUJwRlFxcEZHQnBGRWZwRllCcEZwQnBGTEpwRklEcEZnQnBGVlhwRnlRcEZ1RnBGbEZwRmpEcEZuWHBGd1hwSkZNcEZUQkxYQ0pMWEVGTFhoRkxYVUpMWGJGTGFsbUxOSkJMU0pRTENMQ0xHSkJMTERKTEhhRkxlTkZMZVNITGVDWExlcEZMaGFSTFpzSkxzSkRMc0pyTG9jYUxsTGxMTWRiTEZOQkxGU0JMRkVITEZrRklCQkZJQlhGSUJhUUlCS1hJQlNGSUJwSElCTFhJQmdCSUJoQklCdUhJQm1YSUJpRklCWlhJQnZGSUJiRklCalFJQndYSUJXRklLVFJJUVVKSURHRklDalFJWVNSSUlOWElKZUNJVmFSSW1Fa0laSkZJdkpSSXNKWElkQ0pJSm9SSWJCUUlqWUJJY3FYSVRGVklyZVZJRktGSUZTRklGQ0pJRkdGSUZMRElGSUJJSkZPSUZnQklGVlhJSkZoSUZ4RklGbVhJRmRISUZiQklKRnJJSkZXT0JHQk9RZlhPT0tqT1VxWE9mWEJPcVhFT2NxWE9SVkpPRklCT0ZsREhCSU9IWGlGSE5UUkhDSlhISWFSSEhKREhIRUpIVmJSSFpKWUhiSUJIUnNKSFJrREhXbG1nQktGZ0JTQmdCQ0RnQkdIZ0JwQmdCSUJnQlZKZ0J1QmdCdkZnS0RUZ1FWWGdEVUpnR1NKZ09xWGdtVU1nWklKZ1RVSmdXSUVnRkJGZ0ZOQmdGREpnRlNGZ0ZHQmdGWVhnSkZPZ0ZnUWdGVlhnRmhCZ0ZiSGdKRldWSkFCVlFLY1ZEZ0ZWT2ZYVmVERlZoYVJWbUdkVmlKWVZNYVJWRk5IaEJORGhCQ1hoQkVxaEJwRmhCTFhoTkpCaFNKUmhlVlhoaEtFaHhsbWhaSUpoZEJRaGtJSmhiTU5oTVVKaE1aSnhOSmd4UVVKeERFa3hEZEZ4U0pSeHBsbXhlU0J4ZUNYeGVHRnhlWVh4ZXBReGVnQnhXVmN4RkVReEZMWHhGSUJ4RmdCeEZ4RHhGWnR4RmRjeEZiQnhGd1h5REpYeURsY3VBU0p1REpwdURJQnVDcEp1R1NKdUlKRnVlRUZ1WklKdXNKWHVkV0V1b0lCdVdHSnVGQmN1RktFdUZORnVGUUZ1RkRKdUZHSnVGVkp1RlV0dUZkSHVGVEJtQllKbU5KWW1RaGttTEpEbUxKb21JZFhtaUpZbXZKUm1zSlJta2xtbU1CeW1NdUNtY2xtbWNuUWlKQUJpSkJOaUpCRGlCU0ZpQkNKaUJFRmlCWUJpQnBGaUJMWGlCVEhpSk5jaURFZmlDWkppRUNKaUpFcWlPa0hpSEtGaWVORGlISlFpZVFjaWVESGllU0ZpZUNYaWVHRmllRUZpZUlIaWVnRmloVUppeE5vaW9OWGlGYUJpRktGaUZORGlGRVBpRllYaXRGT2l0RkhpRmdCaUZWRWlGbVhpRml0aUZiQmlGTUZpRnJGVUNYUVVJb1FVSUpjVUhRSlVlQ0VVSHdYVVVKRFVVcVhVZFdjVWNxWFVyblFVRk5EVUZTSFVGQ0ZVRkVmVUZMWFV0Rk9aQlhPWlhTQlpYcEZaWFZYWkVRSlpFSmtacERKWk9xWFplTkhaZUNEWlVxWFpGQlFaRkVIWkZMWHZCQUZ2QktGdkJDWHZCRVB2QnBIdkJJRHZCZ0Z2QnVIdlFOSnZGTkZ2RkdCdkZJQnZKRmNzWENEc1hMWHNYc1hzWGxGc1hjSHNRcVhzSlFGc0VxWHNlSUZzRkVIc0ZqRGRCeE9kTnBSZE5KUmRFSmJkcEpSZGhaSmRuU0pkcmpOZEZOSmRGUUhkRmhOa05KRGtZYVJrSE5Sa0hTUmtWYlJrdU1Sa2pTSmtjcURvU0pGb0VpSm9ZWkpvT2ZYb2hFQm9NR1FvY3FYYkJBRmJCWEZiQmFGYkJORGJCR0JiQkxYYkJUQmJCV0RiR0pZYklKSGJGUXFiRnBRbERnUWxPckZsVkpSakdFQmpaSlJuWHZKblhiQm5FZkhuT1BEbmdKUm54ZlhuVUpXd1hFSndOcEp3RHBCd0VmWHdyRUJNRENKTURHSE1ESUpNTEpEY1FHRGNRcEhjcVhjY3FORmNxQ1hjRkNKUkJTQlJCR0JSQkVKUkJwUVRCTkZUQlFKVEJwQlRCVlhURkFCVEZTQlRGQ0ZURkdCVEZNRHJYQ0pyWExEckROSnJFZkhyRlFKckZpdFdOamRXTlRSJywKICAgICAgICAgICAgJ0FLTEpNQU5PUEZBU05KSUFFSldYQVlKTlJBSUliUkFJY2RhQWVFZkRBZ2lkUkFkak5ZQU1ZRUpBTUliUkFGTkpCQUZwSkZCQklKWUJEWkpGQlNpSmhCR2RFQkJFSmZYQkVKcVhCRUpXUkJwYVVKQkxYclhCSVlKTUJPY2ZYQmVFZkZCZXN0WEJqTkpSQmNESk9CRkVxWFhOdkpSWERNQmhYQ0pOWVhPQVdwWE9OSldYSERFQlhlSWFSWGhZSkRYWkpTSlhNREpPWGNBU0pYRlZKWGFCUXFYYUJaSkZhc1hkUWFGU0pRYUZFZlhhRnBKSGFGT3FYS0JOU1JLWHZKQktRSmhYS0VKUUpLRUpHRktJTkpCS0lKak5LZ0pOU0tWRWxtS1ZoRUJLaUpHRktsQmdKS2puVUpLd3NKWUtNRklKS0ZOSkRLRklKRktGT2ZYTkpCU0ZOSkJDWE5CcEpGTkpCdlFOSkJNQk5KTEpYTkpPcVhOSmVDWE5KZUdGTmRzSkNOYlRLRk53WFVKUU5GRVBRRGlKY1FETVNKUVNGcEJRR01RSlFKZU9jUXlDSkVRVUpFQlFKRkJyUUZFSnFEWERKRkRKWHBCREpYSU1ER2lKaERJSkdSREplWWNESHJESkRWWGdGRGtBV3BEa0lnUkRqREVxRE12SlJESkZORkRKRklCU0tjbG1TSlFPRlNKUVZIU0pRakRTSkdKQlNKR0pGU0VDSm9TSEVKcVNKSFRCU0pWSkRTVmlKWVNaSk5CU0pzSkRTRlNKRlNGRWZYU0pGTFhDQlVKVkNKWFNCQ0pYcEJDWFZKWENKWHNYQ0pYZEZDSk5KSENMSUpnQ0hpSkZDVk5KTUNoQ0poQ1VIRUpDc0pUUkNKZFljQ29RSkNDRkVmWENGSUpnQ0ZVSnhDRnN0RkdKQmFRR0pCSURHUUpxWEdZSk5SR0pIS0ZHZVFxREdIRUpGR0plTFhHSElpSkdIZEJsR1VKRUJHa0lKVEdGUVBER0pGRXFFQUdlZ0VKSUpCRUpWSlhFaFFKVEVpSk5jRUpaSkZFSm9FcUVqREVxRVBEc1hFUEdKQkVQT3FYRVBlUUZFZkRpREVKZkVGRWZlcFFFZk1pSkVxWE5CRXFESURFcWVTRkVxVkpYRU12SlJZWE5KRFlYRUpIWUtWSmNZWUpFQllKZUVjWUpVcVhZRnBKRllGc3RYcEFaSk1wQlNKRnBOQk5GcGVRUERwSExKRHBISUpGcEhnSkZwZWl0RnBIWkpGcEpGQURwRlNKRnBKRkNKcEZPcVhwRml0QnBKRlpKTFhJSkZMSUpnUkxWTkpXTFZISk1Md05wSkxGR0pCTEZMSkRMRk9xWExKRlVKSUJESlhJQkdKQklKQllRSUpCSUJJQk9xWElCY3FESUVHSkZJTE5KVElJSkVCSU9pSmhJSmVOQklKZUlCSWhpSklJV29UUklKRkFISUpGcEJJSkZ1SElGVXRGSUpGVEhPU0JZSk9FY3FYT0hFSnFPdkJwRk9rVkpyT2JCVkpPbmNxRE9jTkprSGhOSlJIdUhKdUhkTWhCZ0JVcVhnQnNKWGdPTkpCZ0hOSkRnSEhKUWdKZWl0Z0hzSlhnSnlOYWd5REpCZ1pKRHJnc1ZKUWdrRUpOZ2tqU0pnSkZBSGdGQ0pEZ0ZadE1WSlhORlZYUWZYVkpYREpWWG9RSlZRVkpRVkRFZlhWRHZKSFZFcU5GVmVRZlhWSHBKRlZIeGZYVlZKU1JWVm1hUlZsSUpPaENYVkpoSGpZa2h4Q0pWaFdWVUpoV2lKY3hCTkpJeGVFcUR4ZlhCRnhjRkVQeEZTSkZ4RllKWHlCRFFKeWRhVUp5Rk9QRHVZQ0pZdUx2SlJ1SExKWHVaSkxEdUZPUER1RlpKSHVGY3FYbUtISmRtQ1FKY21Pc1ZKaUpBR0ZpdExDRmllT2ZYaWVzdFhpWkpNRWlrTkpRaXJYekZpRlFxWGlGSUpGaUZaSkZpRnZ0RlVIcEpGVXRlSWNVdGVPY1VWQ0prVWhkSGNVYkVKRVVKcVhRVU1OSmhVUmpZa1VGaXRGWkRHSkhaSkl4RFpKVkpYWkpGREpaSkZwUXZCTkpCdkJTSkZ2SnhCcnNlUXFEc1ZGVkpkRkxKRGtFSk5Ca21OSllrRkxKRG9RSk9Qb0dzSlJvRUFIQm9FSmZGYkJRcURiQlpKSGJGVkpYbEZJSkJqWUlyWGplaXRjampDRUJqV01OQndYUWZYd1hPYUZ3RHNKWHdDSlRSd3JDWkpNRE5KUWNEREpGY3FET1BSWWlKRlRCc0pYVFFJSkJURkVmWFRGTEpEclhFSkZyRUpYTXJGWkpGV0VKZEVXWVRsbScsCiAgICAgICAgICAgICdBQkNERUZBQ05KVFJBTUJESmRBY05KVlhCTE5KRUJYU0lkV1JYRXJOSmtYWURKTUJYWkpDSmFYTU5KYVlLS1ZKS2NLREVKcVhLRGNOSmhLVkpyTllLYmdKVlhLRlZKU0JOQllCd0ROSmVRZlhOSmVFcVhOaEdKV0VOSkZpSlJRbElKYkVRSmZYeERRcVhjZlhRRk5ERUpRRndYVUpEWWNuVUpESklCZ1FESVVKVFJESkZFcURTSlFTSkZTSlFJSkZTT1BlWnRTSkZaSkhDSlhRZlhDVERFcUZHSkJTSkZHSkJPZlhHSkJjcVhHSkhOSkRHSlJMaUpFSmZYRXFFSkZFSlBFRnBCRUpZSkJaSkZZQndYVUpZaUpNRUJZSlpKeVRZVE9OSlhwUU1GWEZwZUdJRGRwSkZzdFhwSkZjUERMQlZTSlJMSFFKcVhMSkZaSkZJSkJOSkRJSkJVcVhJQmtGREpJSkVKUFRJWUpHV1JJSmVRUERJSmVFZkhJSkZzSlhPcUdEU0ZIWEVKcVhnSkNzSkNnR1FKcVhnZFFZSkVnRk1GTkJnSkZjcURWSndYVUpWSkZaSmNoSWdKQ0N4T0VKcVh4T3dYVUp5REpCVlJ1c2Npc2NpSkJpSkJpZVV0cVhpSkZESmtpRnNKWFFVR0VaSmNVSkZzSlhadFhJclhaRFpKRHJaSkZOSkRaSkZzdFh2SkZRcVh2SkZDSkVzSlhRSnFraGtOR0JiREpkVFJiWUpNRUJsRHdYVUpNRUZpSkZjZlhOSkRSY05KV01UQkxKWEMnLAogICAgICAgICAgICAnQnJhRlV0SEJGU0pGZGJOQkxKWFZKUW9ZSk5FQlNKQkVKZkhTSkh3WFVKQ0pkQVpKTUdqYUZWSlhFSlBOSkJsRUpmRmlKRnBGYkZFSnFJSkJWSkNySUJkSGlKaE9QRkNodkpWSlpKTkpXeEdGTklGTHVlSUJRSnFVSEVKZlVGc3RPWkpEcmxYRUFTSlJsWFZKWFNGd1ZKTkpXRCcsCiAgICAgICAgICAgICdRSkVKTk5KRFFKRUpJQlNGUUpFSnhlZ0JRSkVKZkhFUFNKQm1YRUpGU0pDREVKcVhMWE5KRlFxWEljUXNGTkpGSUZFSnFYVUpnRnNKWElKQlVKRUpmSE5Gdkp4RXFYTkpuWFVKRlFxRCcsCiAgICAgICAgICAgICdJSkJFSnFYWkonCiAgICAgICAgICBdOwogICAgICAgIGxldCBhID0gbnVsbDsKICAgICAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgICAgIHJldHVybiAoMCwgcy5oZXhsaWZ5KSgoMCwgcy50b1V0ZjhCeXRlcykoZSkpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgICAgIHJldHVybiAoMCwgcy50b1V0ZjhTdHJpbmcpKG5ldyBVaW50OEFycmF5KGUpKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICAgIGlmIChudWxsICE9PSBhKSByZXR1cm4gYTsKICAgICAgICAgIGNvbnN0IGUgPSBbXSwKICAgICAgICAgICAgdCA9IHt9OwogICAgICAgICAgZnVuY3Rpb24gcihlKSB7CiAgICAgICAgICAgIGxldCByID0gJyc7CiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7IG4rKykgewogICAgICAgICAgICAgIGxldCBzID0gZVtuXTsKICAgICAgICAgICAgICBjb25zdCBvID0gdFtzXTsKICAgICAgICAgICAgICAhMSAhPT0gbyAmJiAobyAmJiAocyA9IG8pLCAociArPSBzKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICB9CiAgICAgICAgICAodFt1KFsyMjcsIDEzMCwgMTU0XSldID0gITEpLAogICAgICAgICAgICAodFt1KFsyMjcsIDEzMCwgMTUzXSldID0gITEpLAogICAgICAgICAgICAodFt1KFsyMjcsIDEzMCwgMTMzXSldID0gdShbMjI3LCAxMzAsIDEzNF0pKSwKICAgICAgICAgICAgKHRbdShbMjI3LCAxMjksIDE2M10pXSA9IHUoWzIyNywgMTI5LCAxNjRdKSksCiAgICAgICAgICAgICh0W3UoWzIyNywgMTMwLCAxMzFdKV0gPSB1KFsyMjcsIDEzMCwgMTMyXSkpLAogICAgICAgICAgICAodFt1KFsyMjcsIDEzMCwgMTM1XSldID0gdShbMjI3LCAxMzAsIDEzNl0pKTsKICAgICAgICAgIGZvciAobGV0IHQgPSAzOyB0IDw9IDk7IHQrKykgewogICAgICAgICAgICBjb25zdCByID0gaVt0IC0gM107CiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgci5sZW5ndGg7IG4gKz0gdCkgewogICAgICAgICAgICAgIGNvbnN0IHMgPSBbXTsKICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgewogICAgICAgICAgICAgICAgY29uc3QgdCA9CiAgICAgICAgICAgICAgICAgICd-fkF6Qn5YfmF-S05-UX5EflN-Q35HfkV-WX5wfkx-SX5PfmVIfmd-Vn5oeHl1bWl-flV-flp-fnZ-fnN-fmRrb2JsUGpmbnF3TWNSVHJ-V35-fkZ-fn5-fkp0Jy5pbmRleE9mKAogICAgICAgICAgICAgICAgICAgIHJbbiArIGVdCiAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBzLnB1c2goMjI3KSwgcy5wdXNoKDY0ICYgdCA_IDEzMCA6IDEyOSksIHMucHVzaCgxMjggKyAoNjMgJiB0KSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGUucHVzaCh1KHMpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKAogICAgICAgICAgICAoZS5zb3J0KGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIChlID0gcihlKSkgPCAodCA9IHIodCkpID8gLTEgOiBlID4gdCA_IDEgOiAwOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgJzB4ZTM4MThkZTM4Mjg0ZTM4MThmJyA9PT0gYyhlWzQ0Ml0pICYmICcweGUzODE4ZGUzODI4M2UzODE4ZicgPT09IGMoZVs0NDNdKSkKICAgICAgICAgICkgewogICAgICAgICAgICBjb25zdCB0ID0gZVs0NDJdOwogICAgICAgICAgICAoZVs0NDJdID0gZVs0NDNdKSwgKGVbNDQzXSA9IHQpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCcweGNiMzZiMDllNmJhYTkzNTc4N2ZkNzYyY2U2NWU4MGIwYzZhOGRhYmRmYmMzYTdmODZhYzBlMmM0ZmQxMTE2MDAnICE9PSAoMCwgbi5pZCkoZS5qb2luKCdcbicpICsgJ1xuJykpCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQklQMzkgV29yZGxpc3QgZm9yIGphIChKYXBhbmVzZSkgRkFJTEVEJyk7CiAgICAgICAgICByZXR1cm4gKGEgPSBlKSwgZTsKICAgICAgICB9CiAgICAgICAgbGV0IGQgPSBudWxsOwogICAgICAgIGNsYXNzIGYgZXh0ZW5kcyBvLldvcmRsaXN0IHsKICAgICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICBzdXBlcignamEnKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldFdvcmQoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gbCgpOwogICAgICAgICAgICByZXR1cm4gKDAsIHMuYXNzZXJ0QXJndW1lbnQpKGUgPj0gMCAmJiBlIDwgdC5sZW5ndGgsIGBpbnZhbGlkIHdvcmQgaW5kZXg6ICR7ZX1gLCAnaW5kZXgnLCBlKSwgdFtlXTsKICAgICAgICAgIH0KICAgICAgICAgIGdldFdvcmRJbmRleChlKSB7CiAgICAgICAgICAgIHJldHVybiBsKCkuaW5kZXhPZihlKTsKICAgICAgICAgIH0KICAgICAgICAgIHNwbGl0KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUuc3BsaXQoLyg_Olx1MzAwMHwgKSsvZyk7CiAgICAgICAgICB9CiAgICAgICAgICBqb2luKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUuam9pbign44CAJyk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgd29yZGxpc3QoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IGQgJiYgKGQgPSBuZXcgZigpKSwgZDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5MYW5nSmEgPSBmOwogICAgICB9LAogICAgICA2MDM6IChlLCB0LCByKSA9PiB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogITAgfSksICh0LkxhbmdLbyA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNjg5NiksCiAgICAgICAgICBzID0gcig1MzE2KSwKICAgICAgICAgIG8gPSByKDIxMDgpLAogICAgICAgICAgaSA9IFsKICAgICAgICAgICAgJ09ZQWEnLAogICAgICAgICAgICAnQVRBWm9BVEJsM0FUQ1RyQVRDbDhBVERsb0FUR2czQVRIVDhBVEpUOEFUSmwzQVRMbHZBVExuNEFUTVQ4QVRNWDhBVE1ib0FUTWdvQVRvTGJBVG9NVEFUckhnQVR2SG5BVDNBbkFUM0piQVQzTVRBVDhEYkFUOEpUQVQ4TG1BVDhNWUFUOE1iQVQjTG5BVUhUOEFVSFp2QVVKWHJBVUpYOEFVTG5yQVhKbnZBWExVb0FYTGd2QVhNbjZBWFJnM0FYck1iQVgzSlRBWDNRYkFZTG4zQVpMZ3ZBWnJTVUFadkFjQVo4QWFBWjhBYkFaOEFuQVo4SG5BWjhMZ0FaOE1ZQVo4TWdBWjhPbkFhQWJvQWFEVHJBYUZUckFhSlRyQWFKYm9BYUxWb0FhTVh2QWFPbDhBYVNlb0FiQVVvQWJBZzhBYkFsNEFiR25yQWJNVDhBYk1YckFiTW40QWJRYjhBYlNWOEFidlJsQWI4QVVBYjhBbkFiOEhnQWI4SlRBYjhOVEFiOFJiQWNHYm9BY0xudkFjTVQ4QWNNWDhBY1NUb0FjckFhQWNyRm5BYzhBYkFjOE1nQWZHZ3JBZkhib0FmSm52QWZMVjhBZkxrb0FmTVQ4QWZNbm9BZlFiOEFmU2NyQWZTZ3JBZ0FaOEFnRmwzQWdHWDhBZ0hadkFnSGdyQWdKWG9BZ0pYOEFnSmJvQWdMWm9BZ0xuNEFnT1g4QWdvQVRBZ29BbkFnb0NVQWdvSmdBZ29MWEFnb01ZQWdvU2VBZ3JEVUFnckpUQWhyRm5BaHJMakFoclFnQWpBZ29BakpuckFrTVg4QWtPbm9BbENUdkFsQ1Y4QWxDbHZBbEZnNEFsRmw2QWxGbjNBbG9TbkFsckFYQWxyQWZBbHJGVUFsckZiQWxyR2dBbHJPWEFsdktuQWx2TVRBbDNBYkFsM01uQW5BVHJBbkFjckFuQ1ozQW5DbDhBbkRnOEFuRmJvQW5GbDNBbkhYNEFuSGJyQW5IZ3JBbklsM0FuSmd2QW5MWG9BbkxYNEFuTGJyQW5MZ3JBbkxockFuTVhvQW5NZ3JBbk9uM0FuU2JyQW5TZW9BbnZMbkFuM09uQ1RHZ3ZDVFNsdkNUdkFVQ1R2S25DVHZOVENUM0NaQ1QzR1VDVDNNVENUOEhuQ1VDWnJDVUxmOENVTG52Q1UzSG5DVTNKVUNZNk5VQ2JEYjhDYkZab0NiTG5yQ2JvT1RDYm9TY0NickZuQ2J2TG5DYjhBZ0NiOEhnQ2IkTG5Da0xmb0NsQm4zQ2xvRFVEVEhUOERUTGwzRFRTVThEVHJBYURUckxYRFRyTGpEVHJPWURUck9nRFR2RlhEVHZGbkRUM0hVRFQzTGZEVUNUOURVRFQ0RFVGVm9EVUZWOERVRmtvRFVHZ3JEVUpuckRVTGw4RFVNVDhEVU1YckRVTVg0RFVNZzhEVU9Vb0RVT2d2RFVPZzhEVVNUb0RVU1o4RGJEWG9EYkRnb0RiR1Q4RGJKbjNEYkxnM0RiTG40RGJNWHJEYk1nOERiT1RvRGJvSlhHVENsdkdURFQ4R1RGWnJHVExWb0dUTGx2R1RMbDNHVE1nOEdUT1R2R1RTbHJHVG9DVUdUckRnR1RySllHVHJTY0dUdExuR1R2QW5HVHZRZ0dVQ1pyR1VEVHZHVUZab0dVSFhyR1VMbnZHVU1UOEdVb01nR1hvTG5HWHJNWEdYck1uR1h2Rm5HWUxudkdaT252R1p2T25HWjhMYUdaOExtR2JBbDNHYkRZdkdiRGxyR2JIWDNHYkpsNEdiTFY4R2JMbjNHYk1uNEdib0pUR2JvUmZHYnZGVUdiM0dVR2I0Sm5HZ0RYM0dnRmwkR2dKbHJHZ0xYNkdnTFpvR2dMZjhHZ09Yb0dnckFnR2dySlhHZ3JNWUdnclNjR2d2QVRHZ3ZPWUduQWdvR25KZ3ZHbkxab0duTGczR25MbnJHblFuOEduU2JyR25yTWdIVENsdkhURFRvSFRGVDNIVFFUOEhUb0pUSFRvSmdIVHJEVUhUck1uSFR2RllIVHZSZkhUOE1uSFQ4U1VIVUFaOEhVQmI0SFVEVHZIVW9NWUhYRmw2SFhKWDZIWFFsckhYckFVSFhyTW5IWHJTYkhYdkZZSFh2S1hIWDNMakhYM01lSFl2UWxIWnJTY0hadkRiSGJBY3JIYkZUM0hiRmwzSGJKVDhIYkxUckhiTVQ4SGJNWHJIYk1ickhiUWI4SGJTWDNIYm9EYkhib0pUSGJyRlVIYnJIZ0hickpUSGI4SlRIYjhNbkhiOFFnSGdBbHJIZ0RUM0hnR2dySGdIZ3JIZ0pUckhnSlQ4SGdMWEBIZ0xuckhnTVQ4SGdNWDhIZ01ib0hnT25ySGdRVG9IZ1JnM0hnb0hnSGdyQ2JIZ3JGbkhnckxWSGd2QWNIZ3ZBZkhuQWxvSG5DVHJIbkNudkhuR1RySG5HWjhIbkdudkhuSlQ4SG5MZjhIbkxrdkhuTWc4SG5SVHJJVHZGVUlUdkZuSlRBWHJKVENWOEpURlQzSlRGVDhKVEZuNEpUR2d2SlRIVDhKVEpUOEpUSlh2SlRKbDNKVEpudkpUTFg0SlRMZjhKVExodkpUTVQ4SlRNWHJKVE1uckpUT2JySlRRVDhKVFNsdkpUOERVSlQ4RmtKVDhNVEpUOE9YSlQ4T2dKVDhRVUpUOFJmSlVIWm9KWEZUNEpYRmxySlhHWjhKWEduckpYTFY4SlhMZ3ZKWE1Yb0pYTVgzSlhOYm9KWFBsdkpYb0pUSlhvTGtKWHJBWEpYckhVSlhySmdKWHZKVEpYdk9uSlg0S25KWUFsM0pZSlQ4SllMaHZKWVFUb0pZclFYSlk2TlVKYkFsM0piQ1pySmJEbG9KYkdUOEpiR2dySmJKWHZKYkpib0piTGY4SmJMaHJKYkxsM0piTW52SmJSZzhKYlNaOEpib0RiSmJyQ1pKYnJTVUpiM0tuSmI4TG5KZlJuOEpnQVhySmdDWnJKZ0RUckpnR1pySmdHWjhKZ0hUb0pnSlQ4SmdKWG9KZ0pndkpnTFg0SmdMWjNKZ0xaOEpnTG40SmdNZ3JKZ01uNEpnT2d2SmdQWDZKZ1JudkpnU1RvSmdvQ1pKZ29KYkpnb01ZSmdySlhKZ3JKZ0pnckxqSmc2TVRKbENuM0psR2d2SmxKbDhKbDRBbkpsOEZuSmw4SGdKbkFUb0puQVRySm5BYnZKbkRVb0puR25ySm5KWHJKbkpYdkpuTGh2Sm5MbnJKbkxudkpuTVRvSm5NVDhKbk1YdkpuTVgzSm5NZzhKbk1sckpuTW40Sm5PWDhKblNUNEpuU1gzSm5vQWdKbm9Bbkpub0pUSm5vT2JKbnJBYkpuckFrSm5ySG5KbnJKVEpuckpZSm5yT1lKbnJTY0pudkNVSm52RmFKbnZKZ0pudkpuSm52T1lKbnZRVUpudlJVSm4zRm5KbjNKVEtuRmwzS25MVDZMVERsdkxUTW5vTFRPbjNMVFJsM0xUU2I0TFRTbHJMVG9BbkxUb0pnTFRyQVVMVHJBY0xUckNVTFRySGdMVHJNZ0xUM0puTFVMbnJMVU1YOExVb0pnTFZBVHJMVkRUckxWTGI4TFZvSmdMVjhNZ0xWOFJUTFhEZzNMWEZsckxYckNuTFhyTFhMWDNHVExYNEdnTFg0T1lMWkFYckxaQWNyTFpBZ3JMWkFockxaRFh5TFpEbHJMWkZickxaRmwzTFpKWDZMWkpYOExaTGM4TFpMbnJMWlNVOExab0pUTFpvSm5MWnJBZ0xackFuTFpySllMWnJMVUxack1nTFpyU2tMWnZBbkxadkdVTFp2SmVMWnZPVExaM0ZaTFo0SlhMWjhTVExaOFNjTGFBVDNMYUFsM0xhSFQ4TGFKVHJMYUpUOExhSlhyTGFKZ3ZMYUpsNExhTFZvTGFNWHJMYU1YdkxhTVg4TGJDbHZMYkZUb0xiSGxyTGJKbjRMYkxaM0xiTGh2TGJNWHJMYk1ub0xidlNVTGNMbnJMYzhIbkxjOE1UTGRyTW5MZUFnb0xlT2d2TGVPbjNMZkFsM0xmTG52TGZNbDNMZk9YOExmOEFuTGY4SlhMZjhMWExnSlRyTGdKWHJMZ0psOExnTVg4TGdSWnJMaENUb0xockFiTGhyRlVMaHJKWExodkpZTGpIVHJMakhYNExqSlg4TGpMaHJMalNYM0xqU1o0TGtGWDRMa0daOExrR2d2TGtKVHJMa01Yb0xrU1RvTGtTVThMa1NaOExrb09ZTGwzRmZMbDNNZ0xtQVpyTG1DYnJMbUdnckxtSGJvTG1Kbm9MbUpuM0xtTGZvTG1MaHJMbVNUb0xuQVg2TG5BYjZMbkNaM0xuQ2IzTG5EVHZMbkRiOExuRmwzTG5HbnJMbkhadkxuSGd2TG5JVHZMbkpUOExuSlg4TG5KbHZMbkxmOExuTGc2TG5MaHZMbkxub0xuTVhyTG5NZzhMblFsdkxuU2JyTG5yQWdMbnJBbkxuckRiTG5yRmtMbnJKZExuck1VTG5yT1lMbnJTVExudkFuTG52RFVMbnZIZ0xudk9ZTG52T25MbjNHZ0xuNERVTG40SlRMbjRKbk1UQVpvTVRBbG9NVERiOE1URlQ4TVRKbm9NVEpuck1UTFpyTVRMaHJNVExrdk1UTVg4TVRSVHJNVG9BVE1UckRuTVRyT25NVDNKbk1UNE1uTVQ4RlVNVDhGYU1UOEZsTVQ4R1RNVDhHYk1UOEduTVQ4SG5NVDhKVE1UOEpiTVQ4T1RNVUNsOE1VSlRyTVVKVThNVU1YOE1VUlRyTVVTVG9NWEFYNk1YQWI2TVhDWm9NWEZYck1YSFhyTVhMZ3ZNWE9nb01YckFVTVhyQW5NWHJIZ01YckpZTVhySm5NWHJNVE1Yck1nTVhyT1lNWHJTWk1YclNnTVh2RFVNWHZPVE1YM0pnTVgzT1RNWDRKbk1YOERiTVg4Rm5NWDhIYk1YOEhnTVg4SG5NWDhMYk1YOE1uTVg4T25NWUFiOE1ZR2JvTVlIVHZNWUhYNE1ZTFRyTVlMbnZNWU1Ub01ZT2d2TVlSZzNNWVNUck1iQVRvTWJBWHJNYkFsM01iQW44TWJHWjhNYkpUOE1iSlhyTWJNWHZNYk1YOE1iTW5vTWJyTVVNYjhBZk1iOEZiTWI4RmtNY0pYb01lTG5yTWdGbDNNZ0dUdk1nR1hvTWdHZ3JNZ0duck1nSFQ4TWdIWnJNZ0pub01nTG5yTWdMbnZNZ01UOE1nUVVvTWdySG5NZ3ZBbk1nOEhnTWc4SllNZzhMZk1sb0puTWw4QVRNbDhBWE1sOEpZTW5BVG9NbkFUNE1uQVo4TW5BbDNNbkFsNE1uQ2w4TW5IVDhNbkhnOE1uSm5vTW5MWm9Nbkxock1uTVhvTW5NWDNNbk1uck1uT2d2TW5yRmJNbnJGZk1uckZuTW5yTlRNbnZKWE5UTWw4T1RDVDNPVEZWOE9URm4zT1RIWnZPVEpYck9UT2wzT1QzQVRPVDNKVU9UM0xaT1QzTGVPVDNNYk9UOEFUT1Q4QWJPVDhBZ09UOE1iT1VDWHZPVU1YM09YSFh2T1hMbDNPWHJNVU9YdkRiT1g2TlVPWDhKYk9ZRlpvT1lMYnJPWUxrb09ZTWc4T1lTWDNPYkhUck9iSFQ0T2JKZ3JPYkxock9iTVgzT2JPWDhPYjhGbk9lQWxyT2VKVDhPZUpYck9lSm5yT2VMVG9PZU1iOE9nSlhvT2dMWG9PZ01uck9nT1hyT2dPbG9PZ29BZ09nb0piT2dvTVlPZ29TVE9nOEFiT2pMWDRPak1ub09qU1Y4T25MVm9PbnJBZ09uM0RVUFhRbHJQWHZGWFBidkZUUGRBVDNQbEZuM1BudkZiUVRMbjRRVG9BZ1FUb01UUVVMVjhRVVJnOFFVb0puUVhDWHZRYkZiclFiOEFhUWI4QWNRYjhGYlFiOE1ZUWI4U2NRZUFsclFlTGhyUWpBbjNRbEZYb1Fsb0pnUWxvU25SVExudlJUckdVUlRySlRSVUpaclJVb0psUlVyUW5SWnJMbVJack1uUlpyU25SWjhBVFJaOEpiUlo4U2NSYk1UOFJiU1QzUmZHWnJSZk1YOFJmTWdyUmZTWnJSbkFiclJuR1Q4Um52SmdSbnZMZlJudk1UUm44QWFTVENsdlNUSmdyU1RPWHJTVFJnM1NUUm52U1RvQWNTVG9BZlNUb0FuU1RvSG5TVG9MalNUb01UU1RyQWFTVHJFVVNUM0JZU1Q4QWdTVDhMbVNVQVp2U1VBZ3JTVURUNFNVRFQ4U1VHZ3ZTVUpYb1NVSlh2U1VMVHJTVThKVFNVOExqU1Y4QW5TVjhKZ1NYRlRvU1hMZjhTWXZBblNackRVU1pyTVVTWnJNblNaOEhnU1o4SlRTWjhKZ1NaOE1ZU1o4UVVTYVFVb1NiQ1QzU2JIVG9TYlFZdlNiU2w0U2JvSm5TYnZGYlNiOEhiU2I4SmdTYjhPVFNjR1pyU2NIZ3JTY0pUdlNjTVQ4U2NTVG9TY29IYlNjck1UU2N2QW5TZUFaclNlQWNyU2VIYm9TZUpVb1NlTGhyU2VNVDhTZU1YclNlNkpnU2dIVHJTa0pub1NrTG52U2s4Q1VTbEZsM1NsclNuU2w4R25TbUFib1NtR1Q4U21KVTgnLAogICAgICAgICAgICAnQVRMbkRsQVRyQVpvQVRySlg0QVRyTVQ4QVRyTVg0QVRyUlRyQVR2RGw4QVR2SlVvQVR2TWw4QVQzQVRvQVQzTVg4QVQ4Q1QzQVQ4RFQ4QVQ4SFpyQVQ4SGdvQVVBZ0ZuQVVDVEZuQVhvTVg4QVhyQVQ4QVhyR2d2QVhySlh2QVhyT2dvQVh2TGwzQVp2QWdvQVp2RmJyQVp2SlhvQVp2Smw4QVp2Sm4zQVp2TVg4QVp2U2JyQVo4RlpvQVo4TFo4QVo4TVU4QVo4T1R2QVo4U1Y4QVo4U1gzQWJBZ0ZaQWJvSm5vQWJ2R2JvQWI4QVRyQWI4QVpvQWI4QWdyQWI4QWw0QWI4RGI4QWI4Sm5vQWI4TFg0QWI4TFpyQWI4TGhyQWI4TVQ4QWI4T1VvQWI4UWI4QWI4U1Q4QWNyQVVvQWNyQWM4QWNyQ1ozQWNyRlQzQWNyRlpyQWNySmw0QWNySm4zQWNyTVgzQWNyT1R2QWM4QVo4QWM4TVQ4QWZBY0pYQWdvRm40QWdvR2d2QWdvR25yQWdvTGM4QWdvTVhvQWdyTG5yQWtyU1o4QWxGWENUQWxvSGJvQWxySGJyQWxyTGhyQWxyTGtvQWwzQ1pyQWwzTFVvQWwzTFpyQW5yQWw0QW5yTVQ4QW4zSFQ0QlQzSVRvQlg0TW52QmIhTG4kQ1RHWE1uQ1RvTFo0Q1RySFQ4Q1QzSlRyQ1QzUlpyQ1QjR1R2Q1U2R2d2Q1U4RGI4Q1U4R1pyQ1U4SFQ4Q2JvTGwzQ2JyR2dyQ2JyTVU4Q2I4RFQzQ2I4R25yQ2I4TFg0Q2I4TVQ4Q2I4T2JyQ2dyR2d2Q2dyS1g0Q2w4RlpvRFRyQWJ2RFRyRGJvRFRyR1Q2RFRySmdyRFRyTVgzRFRyUlpyRFRyUmc4RFR2QVZ2RFR2RlpvRFQzRFQ4RFQzTG4zRFQ0SFpyRFQ0TVQ4RFQ4QWxyRFQ4TVQ4RFVBa0diRFVEYkpuRFlMblFsRGJEVU9ZRGJNVEFuRGJNWFNuRGJvQVQzRGJvRm40RGJvTG52RGo2SlRyR1RDZ0ZUR1RHZ0ZuR1RKVE1uR1RMblBsR1RvSlQ4R1RyQ1QzR1RyTFZvR1RyTG52R1RyTVgzR1RyTWJvR1R2S2wzR1pDbEZuR1pyRFQzR1o4RFRyR1o4Rlo4R1o4TVh2R1o4T244R1o4U1QzR2JDblFYR2JNYkZuR2JvRmJvR2JvSmczR2JvTVhvR2IzSlR2R2IzSmJvR2IzTW42R2IzUWI4R2dEWExqR2dNbkFVR2dyRGxvR2dySFg0R2dyU1RvR2d2QVhyR2d2QVp2R2d2RmJyR2d2TGwzR2d2TW52R25EbkxYR25yQVRyR25yTWJvR251TGwzSFRBVE1uSFRBZ0NuSFRDVENUSFRyR1R2SFRySFR2SFRySlg4SFRyTGw4SFRyTVQ4SFRyTWdvSFRyT1RySFR1T24zSFR2QVpySFR2RFR2SFR2R2JvSFR2SlU4SFR2TGwzSFR2TVhySFR2UWI0SFQ0R1Q2SFQ0SlQ4SFQ0SmIjSFQ4QWwzSFQ4R1pySFQ4R2dySFQ4SFg0SFQ4SmI4SFQ4Sm5vSFQ4TFRySFQ4TGd2SFQ4U1RvSFQ4U1Y4SFVvSlVvSFVvSlg4SFVvTG5ySFhyTFpvSFh2QWwzSFgzTG5ySFg0Rmt2SFg0TGhySFg0TVhvSFg0T25vSFpyQVo4SFpyRGI4SFpyR1o4SFpySm5ySFp2R1o4SFp2TG52SFo4Sm52SFo4TGhySGJDWEpsSGJNVEFuSGJvSmw0SGJwTGwzSGJySlg4SGJyTG5ySGJyTW52SGJ2UllySGdvU1RySGdyRlY4SGdyR1o4SGdySlhvSGdyUm52SGd2QmIhSGd2R1RySGd2SFg0SGd2SG4hSGd2TFRySGd2U1U4SG5EbkxiSG5GYkpiSG52RG44SG42R2d2SG4hQlR2SlRDVExuSlRRZ0ZuSlRyQW52SlRyTFg0SlRyT1VvSlR2Rm4zSlR2TG5ySlR2TlRvSlQzQWdvSlQzSm40SlQzTGh2SlQzT2JySlQ4QWNySlQ4QWwzSlQ4SlQ4SlQ4Sm5vSlQ4TFg0SlQ4TG5ySlQ4TVgzSlQ4UmczSlQ4U2M4SlVvQlR2SlU4QVRvSlU4R1o4SlU4R2d2SlU4SlRySlU4SlhySlU4Sm5ySlU4TG52SlU4U2N2SlhIbkpsSlhyR2d2SlhySlU4SlhyTGhySlhyTVQ4SlhyTVhySlhyUVVvSlh2Q1R2Slh2R1o4Slh2R2dySlh2UVQ4Slg4QWI4Slg4RFQ4Slg4R1o4Slg4SFp2Slg4TG5ySlg4TVQ4Slg4TVhvSlg4TW52Slg4U1QzSllHbkNUSmJBa0diSmJDVEFuSmJMVEFjSmJvRFQzSmJvTGI2SmJyQW52SmJyQ24zSmJyRGw4SmJyR2JvSmJySVpvSmJySm52SmJyTW52SmJyUWI0SmI4UlpySmVBYkFuSmdKbkZiSmdTY0FuSmdyQVRySmd2SFo4Smd2TW40SmxKbEZiSmxMaVFYSmxMak9uSmxSYk9sSmx2TlhvSmx2UmwzSmw0QWNySmw4QVVvSmw4TW5ySm5Gbk1sSm5IZ0diSm5vRFQ4Sm5vRlY4Sm5vR2d2Sm5vSVQ4Sm5vUVRvSm5vUmczSm5yQ1ozSm5yR2dySm5ySFR2Sm5yTGY4Sm5yT1g4Sm52QVQzSm52RlpvSm52R1Q4Sm52Smw0Sm52TVQ4Sm52TVg4Sm52T1hySm52UFg2Sm52U1gzSm52U1pySm4zTVQ4Sm4zTVg4Sm4zUlRyTFRBVEtuTFRKbkxUTFRNWEtuTFRSVFFsTFRvR2I4TFRyQVo4TFRyQ1o4TFRyRGI4TFRySFQ4TFQzUFg2TFQ0RlpvTFQkQ1R2TFQkR2dyTFV2SFgzTFZvQVRyTFZvQWdvTFZvSmJvTFZvTVgzTFZvUmczTFY4Q1ozTFY4RlpvTFY4R1R2TFhyRFhvTFhyRmJyTFh2QWd2TFh2RmxyTFh2TGwzTFh2Um42TFg0TWI4TFg4R1Q4TFlDWE1uTFlyTW5yTFpvU1R2TFpyQVp2TFpyQWxvTFpyRlRvTFpySlh2TFpySmJvTFpySmw0TFpyTG5yTFpyTVQ4TFpyT2d2TFpyUm52TFpyU1Q0TFp2TVg4TFp2U2x2TFo4QWdvTFo4Q1QzTFo4SlQ4TFo4TFY4TFo4TFpvTFo4TGc4TFo4U1Y4TFo4U2JyTFokSFQ4TFokTW40TGE2Q1R2TGJGYk1uTGJSWUZUTGJTbkZaTGJvSlQ4TGJyQVQ5TGJyR2IzTGJyUWI4TGNySlg4TGNyTVhyTGVySFR2TGVySmJyTGVyTmJvTGdyRGI4TGdyR1o4TGdySFRyTGdyTVhyTGdyU1U4TGd2SlRyTGd2TGwzTGc2TGwzTGhyTG5yTGhyTVQ4TGh2QWw0TGlMblFYTGtvQWdyTGtvSlQ4TGtvSm40TGxyU1U4TGwzRlpvTGwzSFRyTGwzSlg4TGwzSm5vTGwzTFRvTG1MZUZiTG5EVUZiTG5MVkFuTG5yQVRyTG5yQVpvTG5yQWI4TG5yQWxyTG5yR2d2TG5ySlU4TG5yTFpyTG5yTGhyTG5yTWI4TG5yT1hyTG5yU1o4TG52QWI0TG52RFRyTG52RGw4TG52SFRyTG52SGJyTG52SlQ4TG52SlU4TG52SmJyTG52TGh2TG52TVg4TG52TWI4TG52Tm5vTG52U1U4TG4zQWwzTG40RlpvTG40R1Q2TG40Smd2TG40TGhyTG40TVQ4TG40U1RvTVRvQ1pyTVRvSlg4TVRvTFg0TVRvTGY4TVRvUmczTVRyRWxvTVR2R2I2TVQzQlRyTVQzTGI2TVQ4QWNyTVQ4QWdyTVQ4R1pyTVQ4Sm5vTVQ4TG5yTVQ4TVgzTVVPVUFuTVhBYkZuTVhvQWxvTVhvSlg4TVhvTGY4TVhvTGw4TVhyQWI4TVhyRFR2TVhyR1Q4TVhyR2dyTVhySFRyTVhyTGY4TVhyTVU4TVhyT1h2TVhyUWI4TVh2R1Q4TVh2SFRyTVh2TFZvTVgzQVgzTVgzSm4zTVgzTGhyTVgzTVgzTVg0QWxyTVg0T2JvTVg4R1R2TVg4R1pyTVg4R2dyTVg4SlQ4TVg4Slg4TVg4TGhyTVg4TVQ4TVlEVUZiTVlNZ0RiTWJHbkZmTWJ2TFg0TWJ2TGwzTWI4TWI4TWI4U1Q0TWdHWENuTWc4QVRyTWc4QWdvTWc4Q1pyTWc4RFRyTWc4RGJvTWc4SFRyTWc4SmdyTWc4TFQ4TWxvSlhvTWw4QWhyTWw4SlQ4TW5MZ0FVTW5vSlhyTW5vTFg0TW5vTGhyTW5vTVQ4TW5yQWw0TW5yRGI4TW5yT1R2TW5yT2d2TW5yUWI4TW5yU1U4TW52R2dyTW52SFo4TW4zTVRvTW40RFRyTW40TFRyTW40TWc4Tm5CWEFuT1RGVEZuT1RvQVRvT1RyR2d2T1RySlg4T1QzSlhvT1Q2TVRyT1Q4R2dyT1Q4SFRwT1Q4TVRvT1VvSFQ4T1VvSlQ4T1VvTG4zT1hyQWdvT1hyRGc4T1hyTVQ4T1h2U1RvT1g2Q1R2T1g4Q1pyT1g4T2dyT2I2SGd2T2I4QVRvT2I4TVQ4T2N2TFo4T2d2QWxyT2d2SFR2T2d2SlRyT2d2Sm5yT2d2TFpyT2d2TG40T2d2TVQ4T2d2UlRyT2c4QVpvT2c4RGJ2T25yT1hvT252Sm40T252TGh2T252UlRyT24zR2dvT24zSm52T242SmJ2T244T1RyUFRHWUZUUGJCbkZuUGJHbkRuUGdEWVFUUGxyQW52UGxyRVR2UGxyTG52UGxyTVh2UGx2Rlg0UVRNVEFuUVRySlU4UVlDbkpsUVlKbFFsUWJHVFFiUWI4Sm5yUWI4TFpvUWI4TG52UWI4TVQ4UWI4TWw4UWI4U1Q0UWxvQWw0UWxvSFp2UWxvSlg4UWxvTW44UW5KWk9sUlRyQVp2UlRyRFRyUlR2Sm40UlR2TGh2UlQ0SmI4UlpyQVpyUlo4QWtyUlo4SlU4Ulo4TFY4Ulo4TG52UmJKbFFYUmczR2JvUmczTW52Umc4QVo4Umc4SmJvUmc4Smw0Um5MVENiUm52RmwzUm52UWI4U1RvQWw0U1RvQ1pyU1RvRlpvU1RvSFhyU1RvSlU4U1RvSmd2U1RvSmw0U1RvTGhyU1RvTVgzU1RyQWx2U1RyQ1Q5U1RyQ2dyU1RyR2dyU1RySFhyU1RySGJvU1RySm5vU1RyTmJvU1R2TG5yU1Q0QVpvU1Q4QWI4U1Q4SlQ4U1VvSm4zU1U2SFojU1U2SlR2U1U4RGI4U1U4SGJvU1U4TGdyU1Y4SlQ4U1pyQWNyU1pyQWwzU1pySlQ4U1pySm52U1pyTVQ4U1p2TFVvU1o0RlpvU1o4Sm5vU1o4UlpyU2NvTG5yU2NvTVQ4U2NvTVg4U2NyQVQ0U2NyQVo4U2NyTFo4U2NyTGt2U2N2RGI4U2N2TGY4U2N2TlRvU2dyRlpyU2h2S25yU2xvSFVvU2xvTG5yU2xyTVhvU2w4SGdyU21ySlVvU24zQlg2JywKICAgICAgICAgICAgJ0FURmxPbjNBVExnckRZQVQ0TVRBbkFUOExUTW5BWUpuUlRyQWJHZ0puckFiTFY4TG5BYnZOVEFuQWVGYkxnM0FnT1lNWG9BbFFiRmJvQW5EYm9BZkFuSmdvSlRCVG9EZ0FuQlVKYkFsM0Jib0RVQW5DVERsdkxuQ1RGVHJTbkNZb1FUTG5EVHdBYkFuRFVEVHJTbkRVSGdIZ3JEWDhMWEZuRGJKWEFjckVUdkxUTG5HVEZUUWJyR1RNbkdUb0dUM0RVRmJHVUpsUFgzR2JRZzhMbkdib0piRm5HYjNHZ0FZR2dBZzhTY0dnTWJBWHJHZ3ZBYkFuR25KVExudkdudkFURmdIVERUNkFUSFRyRGxKbkhZTG5NbjhIWnJTYkpUSFo4TFRGbkhiRlRKVW9IZ1NlTVQ4SGdyTGpBbkhndkFiQW5IbEZVckRsSG5EZ3ZBbkhuSFRGVDNIblFUR25ySlRBYU1YdkpUR2JDbjNKVE9nckFuSlh2QVhNbkpiTWc4U25KYk1uUmczSmI4TFRNbkpuQWwzT25KbkdZclFsSm5KbFFZM0xURGxDbjNMVEpqTGczTFRMZ3ZGWExUTWczR1RMVjhIVU9nTFhGWkxnM0xYTlhyTW5MWDhRWEZuTFg5QWxNWUxZTFhQWHJMWkFiSlU4TFpEVUpVOExaTVhyU25MWiRBZ0ZuTGFQWHJEVUxiRllyTW5MYk1uOExYTGJvSmdKZ0xlRmJMZzNMZ0xaclNuTGdPWUFnb0xoclJuSmxMa0NUclNuTGtPbkxockxuRlglQVlMbkZab0pYTG5IVHZKYkxuTGxvQWJNVEFUTGY4TVRIZ0puM01UTVhyQVhNVDNNVEZuTVVJVHZGbk1YRlglQVlNWE1YdkZiTVhyRlREYk1ZQWNNWDNNYkxmOFNuTWI4SmJGbk1nTVhyTVRNZ3ZBWEZuTWd2R2dDbU1uQWxvU25NbkZuSlRyT1h2TVhTbk9YOEhUTW5PYkpUOFNjT2JMWkZsM09iTVhDWm9QVExnclFYUFVGbm9RWFBVM1JYSmxQWDNSa1FYUGJySlhRbFBsckpiRm5RVUFockRiUVhHbkNYdlFZTG5IbHZRYkxmTG52UlRPZ3ZKYlJYSllyUWxSWUxuclFsUmJMbnJRbFJsRlQ4SmxSbEZuclFYU1RDbENuM1NUSFRyQW5TVExaUWxyU1RNbkdUclNUb0hnR2JTVHJHVERuU1R2R1hDblNUM0hnRmJTVTNIWEFYU2JBbkpuM1NiRlQ4TG5TY0xmTG52JywKICAgICAgICAgICAgJ0FUM0pnSlg4QVQ4RlpvU25BVDhKZ0ZWOEFUOExockRiQVo4SlQ4RGJBYjhHZ0xockFiOFNrTG52QWU4TVQ4U25BbE1ZSlhMVkFsM0dZRFR2QWwzTGZMbnZCVURUdkxsM0NUT24zSFRyQ1QzRFVHZ3JDVThNVDhBYkNiRlRySlVvQ2dyRGI4TVREVExWOEpYOERUTG5MWFFsRFQ4TFpyU25EVVFiOEZaOERVU1Q0Sm52RGI4U2NPVW9EajZHYkpsNEdUTGZDWU1sR1RvQVh2Rm5HYm9BWHZMbkdnQWNySm4zR2d2Rm5TVG9HbkxmOEpudkduI0hURFRvSFRMbkZYSmxIVHZBVEZUb0hUdkhURFRvSFR2TVRBZ29IVDNTVENsdkhUNEFsRmw2SFQ4SFREVG9IVW9EZ0pUckhVb1NjTVgzSGJSWnJNWG9IYm9KZzhMVEhnRGI4SlRySGdNVG9MZjhIZ3ZMbkxub0huSG4zSFQ0SG42TWd2QW5KVEpVOFNjdkpUM0FhUVQ4SlQ4SFRyQW5KWHJSZzhBbkpiQWxvTVhvSmJyQVRGVG9KYnZNbm9TbkpnRGI2R2d2SmdEYjhNWG9KZ1NYM0pVOEpndUFURlRvSmxQWUxuUWxKbFFrRG5MYkpsUWxGWUpsSmw4TGY4T1RKbkNURm5MYkpuTFRIWE1uSm5MWEdYQ25Kbm9GZlJnM0puck1ZUmczSm4zSGdGbDNLVDhEZzhMbkxUUmxGblBUTFR2UGJMYnZMVm9TYnJDWkxYTVk2SFQzTFhOVTdEbHJMWE5YRFRBVExYOERYOExuTFpEYjhKVThMWk1ub0xockxaU1RvSlU4TFpyTGFMbnJMWnZKbjNTbkxaOExoclNuTGFKbm9NVDhMYkZsckhUdkxickZUTG5yTGJ2QVRMbHZMYjZPVEZuM0xjTG5KWk9sTGVBVDZNbjRMZUpUM09ickxnNkxYRmxyTGhySmc4TG5MaHZEbFBYNExodkxmTG52TGo2SlRGVDNMbkZick1Yb0xuUWx1Q1R2TG5yUVhDWTZMbnZMZkxudkxudk1nTG52TG52U2VMZjhNVE1ickpuM01UM0pnU1QzTVQ4QW5BVHJNVDhMVUxuck1VTVRvQ1pyTVVTY3ZMZjhNWG9EVDhTbk1YNkFURlRvTVg4QVhNVDhNWDhGa01UOE1YOEhUckRVTVg4U2NvU25NWUpUNkNUdk1nQWNyTVhvTWc4U1RvQWZNbHZBWExnM01uRmwzQW52T1QzQW5GbDNPVW9BVEhUOE9VM1JuTFhyT1hyT1hyU25PYlBidkZuNk9nOEhnclNuT2c4T1g4RGJQVHZBZ29KZ1BVM1JZTG5yUFhyRG5KWnJQYjhDVEdndlBsckxURGx2UGx2RlVKbm9RVXZGWHJRbFFlTW5vQWwzUWxyUWxyU25SVEZUckpVb1NURGxMaUxYU1RGZzZIVDNTVEpnb01uNFNUckZUSlRyU1RyTFpGbDNTVDRGbk1Yb1NVckRsSFVvU2N2SFR2U25TZkxrdk1YbycsCiAgICAgICAgICAgICdBVW9BY3JNWG9BWjhIYm9BZzhBYk9nNkFURmdBZzhBbG9NWG9BbDNBVDhKVHJBbDhNWDhNWG9DVDNTVG9KVThDbDhEYjhNWG9EVDhIZ3JBVHJEYm9PVDhNWG9HVE9UckFUTW5HVDhMaHJBWjhHbnZGbkduUVhIVG9HZ3ZBY3JIVHZBWHZMbDNIYnJBWm9NWG9IZ0JsRlhMZzNIZ01uRlhyU25IZ3JTYjhKVW9IbjZIVDhMZ3ZJVHZBVHJKVW9KVW9MWnJSbnZKVThIVDhKYjhKWHZGWDhRVDhKWHZMVG9KVHJKWXJRbkduUVhKZ3JKbm9BVHJKbm9KVThTY3ZKbnZNbnZNWG9MVENUTGdySlhMVEpsUlR2UWxMYlJuSmxRWXZMYnJNYjhMbnZMYnZGbjNSbm9MZENWU1RHWnJMZVNUdkdYQ25MZzNNbm9MbjNNVG9MbHJFVHZNVDhTVG9BbDNNYnJEVTZHVHZNYjhMWDRMaHJQbHJMWEdYQ25TVG9MZjhSZzNTVHJEYjhMVHJTVHZMVEhYTW5TYjNSWUxuTW5TZ09nNkFURmcnLAogICAgICAgICAgICAnSFVEbEduclFYckpUckhnTG5yQWNKWU1iOERVTGM4TFR2RmdHbkNrM01nOEpiQW5MWDRRWXZGWUhuTVhyUlVvSm5HbnZGblJsdkZUSmxRbm9TVHJCWEhYckxZU1VKZ0xmb01UOFNlOERUckhiRGInLAogICAgICAgICAgICAnQWJEbDhTVG9KVThBbjNSYkFiOFNUOERVU1RyR25yQWdvTGJGVTZEYjhMVHJNZzhBYUhUOEpiOE9iRGw4U1RvSlU4UGIzUmx2RllvSmwnCiAgICAgICAgICBdOwogICAgICAgIGxldCBhID0gbnVsbDsKICAgICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgICAgaWYgKG51bGwgIT0gYSkgcmV0dXJuIGE7CiAgICAgICAgICBjb25zdCBlID0gW107CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIChpLmZvckVhY2goKHQsIHIpID0-IHsKICAgICAgICAgICAgICByICs9IDQ7CiAgICAgICAgICAgICAgZm9yIChsZXQgbyA9IDA7IG8gPCB0Lmxlbmd0aDsgbyArPSByKSB7CiAgICAgICAgICAgICAgICBsZXQgaSA9ICcnOwogICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByOyBlKyspCiAgICAgICAgICAgICAgICAgIGkgKz0KICAgICAgICAgICAgICAgICAgICAoKG4gPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkhQCMkJV4mKicuaW5kZXhPZih0W28gKyBlXSkpID49CiAgICAgICAgICAgICAgICAgICAgNDAKICAgICAgICAgICAgICAgICAgICAgID8gKG4gPSBuICsgMTY4IC0gNDApCiAgICAgICAgICAgICAgICAgICAgICA6IG4gPj0gMTkgJiYgKG4gPSBuICsgOTcgLSAxOSksCiAgICAgICAgICAgICAgICAgICAgKDAsIHMudG9VdGY4U3RyaW5nKShuZXcgVWludDhBcnJheShbMjI1LCAxMzIgKyAobiA-PiA2KSwgMTI4ICsgKDYzICYgbildKSkpOwogICAgICAgICAgICAgICAgZS5wdXNoKGkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB2YXIgbjsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGUuc29ydCgpLAogICAgICAgICAgICAnMHhmOWVkZGVhY2U5YzVkM2RhOWM5M2NmN2QzY2QzOGY2YTEzZWQzYWZmYjkzMzI1OWFlODY1NzE0ZThhM2FlNzFhJyAhPT0gKDAsIG4uaWQpKGUuam9pbignXG4nKSArICdcbicpKQogICAgICAgICAgKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JJUDM5IFdvcmRsaXN0IGZvciBrbyAoS29yZWFuKSBGQUlMRUQnKTsKICAgICAgICAgIHJldHVybiAoYSA9IGUpLCBlOwogICAgICAgIH0KICAgICAgICBsZXQgdSA9IG51bGw7CiAgICAgICAgY2xhc3MgbCBleHRlbmRzIG8uV29yZGxpc3QgewogICAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKCdrbycpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0V29yZChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSBjKCk7CiAgICAgICAgICAgIHJldHVybiAoMCwgcy5hc3NlcnRBcmd1bWVudCkoZSA-PSAwICYmIGUgPCB0Lmxlbmd0aCwgYGludmFsaWQgd29yZCBpbmRleDogJHtlfWAsICdpbmRleCcsIGUpLCB0W2VdOwogICAgICAgICAgfQogICAgICAgICAgZ2V0V29yZEluZGV4KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGMoKS5pbmRleE9mKGUpOwogICAgICAgICAgfQogICAgICAgICAgc3RhdGljIHdvcmRsaXN0KCkgewogICAgICAgICAgICByZXR1cm4gbnVsbCA9PSB1ICYmICh1ID0gbmV3IGwoKSksIHU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuTGFuZ0tvID0gbDsKICAgICAgfSwKICAgICAgNTk0ODogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuTGFuZ1B0ID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig0OTQ0KTsKICAgICAgICBsZXQgcyA9IG51bGw7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIG4uV29yZGxpc3RPd2wgewogICAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKAogICAgICAgICAgICAgICdwdCcsCiAgICAgICAgICAgICAgIjBhcmFkIW90b3RlYWxpcmVydGFpbnJhc29lbnQgaG9hbmRvYVIjcmlhcmVoYSFhcm9lbGUnb3JvbnVsMEFjYSVBaXhvQWwgQSVyRHV6J0VsXUVyJElzbW9PJCBSPGcoUmV2aSBSaWcgUnVwJFMqJFNvbHUkU3VyPVV0WzBBYiNBbG0gQW1wIEFuaCBBLEVpLkVsKCBFbiBFcnZvRXNzIEUkbmFIYS5JZGV6SW1hSX0jSXJyIExhbSBMaXZlT2xoaWRhT21vZCBPcGwgT3JkIFVtfiBVcz8wQXAuRWdhRW50X0VwJEVxdSBFci0lRXNpdm9FdXNJPCVJdGl2b0pldGl2b0p1biRNJyBPciBRdScnVWJvVigsVm9nIzBSfWF2ZTBBcy5FcidFdGl2b0luP0l2YCBMaSRMdS0lUn0uMEFjaCBBcnIgQXMmL0VuY2kgSWxpeiBJbylJdCNPK1IhIFJlcyVSdXAgVSBkIFVsXTJPYGggVWQgVXMuMUFtZWRhQXJtZUFzdHIgQXY8Y2FCKGd1ZUIqb0NhdCtEZUBFY3JpbUVnckBFci5GYWNlRiplJUd1bUhlaW9JIEljYSVJLSBJbmggSXZpIE1vZl5PYyBQaXMlVCggVGl0dWRlVWMqIFVnIFVub1VzaXZvVm8wQWNpIEE9ckFbbG9Bc3MgQmFzQmktJUVpeGFFbml6IEk9SXMkLEl6IWVPbD9PbiQgT18sT3N0K1AgIFBsaSBQb2xhMEFnK21hQWxpcyBBcnF1QEEkbUBEYWltZUVsRXhvR34gSW0gSm9PbSZAT3QjU2lvLFQoaXxVaWQhZVVuY2kgWm9sMUFnP0FscCBBbmgjRWdvRWxpPUVydF5FcyBFdGklSSRMYXUsTGljXk9pb09uLk9zKVItZGl6Um92IDBVZWMoMEFtZUFuXUErQ15ELSVFQEVqIEVuaSRFcylHaWxvLEdvbGFNYVF1aXZvUmFpJlJlYmElUmlzYyBSb2I-dW0gUy0mVChpJlRpZ29Wb1s9MEYmLklsI1AnIFM_UyogU28mL1N1biRUciYwQWMjQWR1K0FsL0FbZiBFIEVuZChFcl9FdUluZydJcj9Jdm9PbHtvUmFjIFJldmk9Uml6VSZVbTBEaSRyTS0uUj5vK1Rpc21vVHxAVHUgMEFsaSBBbiVBckBFbnQmRXMsST9JcyBVbCwxSWxhMUFyIEU9RWklVWxlam86QiBCb3NhQyZddUNoIGBDQEdhZ2VtSTxvSWwgSX1lKUlyX0l4aXMpSn4gTGVATGl6YUxzYU4mTmR7YU4vTidOcXVlJVJhJFJiI1J9ZXM-K2M-fi9TZSNTKW4lVGEpVGU9clRpZGFUb21UdWMgVW5pbF0zQihJam9Jcl5Jc2Vib2xMZCFlTGV6YUxnYUxpc2MgTmRpJE5nJmFOeihSaW1iYXVSbCpkPl9Tb3VfWGlnYVooXzNDb0N1PUVuJkZvYyZGdXJjIEd8bmFMaGUlTWVzdFtNbyRyT2xvZ0BPbWJvT3NmKGFQb2wgUnItJFNjb2kkU25lJFNwb1NzZXgkVG9sYVogXzJJbmQjT2NvT3F1ZSAyQSRCYWdlbUMjQ2Vqb0NoZWNdSWNvLkxeTGV0aW1MXUxvTWJ7b05kZU5lY29OaSlSYn5oPmQ-ZSZSK2NdVipvWGU_MkFuY29Bc2FBdmV6YUV1SWdhSWwvSW5jIE9hT2NodStPbnplIE8kVXhvMkNdRGlzbW9GIExlUmFjb1NjYVMkWiphOkI8YUJgb0JpZGVCb0JyaSRDYXVDZXReQy9yX0NpcXVlRGFzdF9EZSNGZXomSWFxdWVJcCdhSXhvJUojSnVMYWZyaW9MY34gTGR7YUxpYnIgTG08JUxvKU1eTWJpcylNaXNhTW9taWxhTXA8XU11ZmwgTmF2aSZOY2AgTmUpTmd1cnVOLyROaXZlJU5vYU5zI04uTnU9UGFjL1BgYVAqIFBvLlByaWMvUHQ_UHV6UmFjb2xSYn1vUmRlJlJlYz5pbWIgUm57b1JwZSVSWyc-KXpSdiYvU2Fjb1NjYVNlYltTJWxvU35vVCBhKVRpdiBVbGVVcz9VJWwgViZvVihuYTNCb2xhRGlsXUd9XUxlYnIgTH4gTm91K04sTiVpb1JjIFJyI1IlJ29SdmVqYVRpbVZeMkFjbylBbHthQW0jQXBeQXJtZUF0aWNlQXZlRWZlRWdeRSdvRXF1ZUljbyVJZltJbmBvT2MmL092KFVtYm9VLlV2YTBDYXRyaXpDbH1lRCFlRFsnYUVuJUc8YU0tJE4kTno-PGQ-Y3VpJFJ1cmdAVCAyQVt6YUVfSWMgT25lVWJlMkE9QWcnQmFAQigkckJyIENeRWwvRW50X0UsR3VtYG9JYidJZmFJbyVMIEx7YUxoKExpZCdMbWVATH1vTHVuYU08PU1iKiBNLS5NaXRpdmFNb3YoTXBsZXhvTXVtTmNdTj1yTmVjLk5mdSxOZ2AgTmhlYyhOanVnIE5zdW0nTnQrJE52aSVPcCggUHtvUGk_UG9RdWUlbFJhZ2VtUmRpJlJuZSlSfWg-cHwmUltpb1Ilam9SdWo-dm9Tcy1vUyVsYVR9ZSVVX1V2ZVZpbFoqXTJBJStBdm9FY2hlRT1yRW1lRXJFc3BvSV5JbSomSW9-b0lzZUl0aWMgT3MpVWFVentvMkI8b0VjYUlkI0pvTGF0K0xtKiBMcCBMdHUrTXByJ05oI1BpPVJhdGl2b1JyJlJzIFIkU3AnUyUgVGBvOk1hc2NvVCAzQmElckJpLkJvY2hlQn5oIEMmcXVlQ2ltJkNsaXZlQ28lQ1suRCZEaWMjRHV6J0Zlc2FGdW0gR2BvRyt1R3VzLkl0I0l4IExhJHJMZWcjTCplIEx9Z2FNPGRhTWl0J01vbGk9TnRpcylQLSNQaWwgUG9pc1Bbc3NhUHVyIFJpdj4rbSBTYWZpb1Niby5TYzwsUy0vU2ZpI1NnYXMlU2lndSZTbGl6ZVNtYW0gU292YVNwZXNhUylxdWVTdmkgVCZoIFQtJHJUfSBUcmkkVXNhVihWaT1Wb3QjWi1hM0FnK21hQWxlJERhKUZ1LEdpLkxhdCNMdS0lTSp1J05hc3RATmh7b09jZXNlUmUkU2NbKVNmIGNlU3Agb1NxdWUlU3NpcCBTKW4lVD9Vcm5vVigsVmksclZ-ZyBaKDVCcj9MfGk9TT9NKiNOYXRpdm9OemA-bS0lUnMmU2FnZW1VciNVJHIyRW5hZ2VtSWJsZU9nIEAyRWwgRW5kZUUkUGxvUXVlcz48JVZpPSw6MUxvZCdPIE9sb2dAMElmaWMgSXQmVWMjMUVpJEV0aXYgM0UuMUFifCBFZyhFaSRyRW5jb0V2P0ltKiBPZ2kgMEIgZ29Cb2wjQnJ-L0J1dGk9RW5kYUVyZydJcyxyUGF0QFAtL1AqI1BvbGcgUFtnb1B1cnIgVWw_MENhaXhlQy0jQ2gtJUN9dF9EZXVzIERvc3MgRmFpeCBGZWklRmltR2FqI0ctL0dsb2IgR29tI0creCBHdUBKbyBMYS5RdTwkUmFpeiBSb2wjUnVnIFNhaW9TZV5TKm9Tb3AjVDwkVGUjVGlkIWVUfC5Ucl5Ufi9WKGcgVmkjVm9sdihYYW1lWCgkWG9mW1h1JDFJZChtZTBVaXAgMEUkR3VpPVJhKVZhVmlsXTBCPGogQmAkQ2FtYUNvbGFDcmkpQ3UpRipnZUZvbCBGW2cgRnVtI0dyaW1hTSYlUDwkUGAvUGlnYVB9amFQW2kpUHVtIFF1KGRhVGFjYVR7YVRpYyBUb2YjVFtsYVR1PVZhemkgMEFub2xJcXVlKTBGfGk-b3BldTBBY3UgQXB8IEFzaXZvRW50dSZJZC0lT2x1JzFBZyhvQWwgQW0qIEEkQXVzJENlcyxDaS5DbGFtIEVjdS5FbXBsb0liJ0lnLSVPbiggUDxkJ1BgJ1AnIFBsPCBQb3MkUFtzLFB-cyBUKG5vVCokVCskOkJyaWMgQn5vLENlKUNpJkRhRGlnYUl4YUwgTClNaWxpIE5kPGdvTmYgK04kY2hlUmQjUmBvUipoPm9mPnA-dHUrVEBUfFZ8aSlYKmFaLWRhM0NoI0lqb15JK24lTCpvTSoqb05kYU5vUj5pI1JydWdlbVJ2KFMlaiBUJlVkJjNBcG9CX3NlQyBDaHtvR3VyI0x7YUwvTG1lTHRyIFJtZXphU2deU3N1K1RhVmBhWD9YbzJBY2lkZXpBbSpnb0FuYGFFY2heTytVdHUgVXhvMkMmQyovRm9jIEdvR3VlJUljZUxnI0xoZSRSaiBSbWlnPm5vUiVTY29Tc2EyQWdhKUFsZGFBbmdvQXNjb0Elcm5vRSdhRW4lRS5JZXphSSxJdHUrT25dVXN0ciBVJSdhMkcnTDxvTGlnZW1OZCBOZ29OaWxSP1JpbyxUZWJvbDpCIGkkQiplJURvSWEkSW9sYUl2bylMZWdhTC9MKl1Mb2NdTmggUmFnZW1SZm9SZyZvUmltcG9Sb3VwPitmYVNvZHUkUyRUYVRpbC9WZSlaYGEzTCNMZUBMb01eTShNaT1OKG8sTmdpdmFOaSZOb21hTl9PbG9naT4_Um0qIFMsUyRyM05hcylOYzxhTmcjUmFmPipvMkFjaSZJY29zZU9iJk9yaW8sMkVsYUlhYmFMZmVMcGUgUmR1K1JqZSlSX1MkLFR7YVYobiAyQWNlam9BZHUmQWZpJUFsXUFtcG9Bbl5BdHVpJEF2ZSRBeGFFZ29FbGggRXZlSWxvSXMmL0kuQE9zLE8lc2NvVWQjVW5oaT1VKTJBY2hlQStuaUF4KmltRXJbIEkgSW5jL0lzI0xhTG8sUnU6QmkuUm19QFMlVigzQy5lUmQgUmVzQFNpLjNBJEIobiBEKy5FbmFOb1Bpc21vUG5vc2VQbyVjYTVKZUxvZm8lTWVtTmVzJE5yI1JtfSZTcGVkIDVNfCM6VGUyRUBPLDJOfCNSZWphVTxhNEUsSGFVZGk9VW0qIFVzdHIgMEFnZW1FZEAkRW4sRXJzaXZvSW4tJUl0P09ydCZQYWMkUGVkJ1BsPCVQfFByLXNhUHVuZVVuaXogMEFsP0FwJEF0aXZvQy0sQ2ggQ2lkJ0NsdSdDb2x8RGVjaSxEJ2UkRHUkckVmaWNhekVyLSVGPHRpbEZlcy5GKmkkRmxhbSBGfG0mRiskckcoJ0liaT1JY2kmSW1pZ29KZS5PYy0lTz1fT3Y_T3hRdWllJFNjcmkkU2UkU2lzdCdTcGUkclN0JiBTfiRUYWMkVGVnciZUaW0gVG9jI1RyaWdhVmEsclYobm9WaWMkVm9jIDBHdXIlMkFuaTxvT25peiBSZSZSaXQjMENhRW4kT2wjUXV7bzBBbGk8bzpOe29OZ15OKVIgYWM-ZGltUl9TbWltVG9WJmlaaWRhM0p1bTlBbipdRWxoXkc_ST5uJlJyIFZlbTVCYURldURvY2FJekxnP0wvUiNSaXMpUm9TKTo6QiBlZGFCfCZDW0MpbiVEcmlsL0cgKUdvYUplTWIoTS0uTSogTXBlam9OY2hlUGlkIFAsUjxqPns-Z3UrUzxdU3RfVCgmVGk9VjxkYVZvdStWcj9YPCVaKDNBbGQhZUJbRyNHLWQgR2lzKUlnb0lsbyBJdHUrTWJbJU1lTmg_TnRpbF1PYVNtYVMlVGl2b1RbJ29WIFZlemFWaS4zQigmQmk9RCggRyBHe29NaS5Nb3tvTXA_TmRhTmUgTl1nZW1RdWlkZXpTKWdlbVN1K1R8JlZfWGFYe2E1Qz9DdSRySmlzKU1ib05hTmdlTnQrUmRlVCNUKEBVY3UrVXNhVXYgNUFyQ2lkZXpDX05lKVN0W1Q_VmE6Q2Fjb0NlJUNoI0Npb0R7YURyKl1HbmEpR1t6YUl8SXNMPGRfTF1MbyVMdWNvTWlsb01ve29NdSVOXk5jXU5kYSROZXF1aW1OLyxOaXZgYU5vYnIgTnNhTiVyTnVzZSBQZSNRdSogUmM_UmVzaT5maW1SZ2VtUiovUm1pKVJvJFJxdWlzZVJbY29SJWxvUnVqb1NjbyVTbXwrU3NhZ2VtU3RpZyBUYWcmVChub1QqJlR1LlhpbCAzRCZdRGlkYUR1c2FHYWZ9ZUlnYUw8Y0BML3JNYl9NfGkmTipvTm9zTnNhZ2VtTnQmUmVjKFJnfi9TXlNjbCBTbW9TcXVpKVN0W1QhZVRlb19UK2dlbVgoWGljPG8zQ19HJl1HciBMYWdbTC0gTGggTSNOKCBOL2NhTmlzdF9OfEBPbG9SPCVSdGlsb1N0dXIgNUNpZCFlRChub0R-IEVkYUVySW4vSSlMZHUrTGV6YUwvTCplJUx1c2NvTiluXVF1ZWM-PGdvUmNlZ29SPW1vUi1hU2FpY29TcXVlJVMuZGFUYFRpbVRvVHJpejVEYUkkTGEpTGgoTC5OZGkmTmk9UiZoPmMvU2N-IFNldVNpYyY6Q2l9JkQ_SmFNb19SKj5yI1NjKFRpdmFUdVt6YVYmXVZlZyBWaW8zQmwqYUJ-byxHYXRpdmFHb2NpIEdyaSRSdm8sVGFVciZWYXNjYVZve28zTiBOL1RpZGV6VmAgNUJbemFJJUl2YU1lIE0qJlJkZXMlUiUgVCBUaWNpIFR1cm5vVmBvVmlsL1ZvNUJsI0Rlek0oJlBjaSZUcidWZW06MENlYyNFZGVjKEpldGl2b1JpZyNTY3VfUyV0K1QoVHVyIDBJZC0lSW8sT3JyKFVsaXMpVXAjMkVnPCVFbnNpdmFFci1kYUljKmFVc2MjMEl2YTRBckBFbyxIIEl2e2EwQl9FbGUlSXMsSXQnMER-I0VfLFRlbTFDaX0mRXI_T24tJU9ydHVub09zJDFBckJpLkRlbUQqJkY8YSRHYXNtb0d-L0ktdCZJZ2VtSXVuPUxhVG89eG9WJi8wQ2lsIFNeU29ULS4wSW1pc21vMFMhQFR9b1R1Yl9WaT0wRWxdVWwgMUlkIElnLSA6Q2EkQ2ktJUNvJUN0dSBEIEBEciovRyBHb2RlSW5gSXIgSXNhZ2VtTGF2K0xlc3QrTGhlKUxpJExtXkxwaS5OY15OYGFOZmxlJE5xdWVjYU4pbiZQYWdhaW9QYF5QJ29SYWYqPmNpJlJkJlJlZGVSdGlkYVNtb1NzI1MlbFRhbSBULSVUKiBUX25vVWxeVXMgM0N-aSBEJiBEZXN0W0RAdCtEK0deSSRyJkl4ZUxlTGljPG9OY2FOZHVyIE57YU5dc2NvTnM_TiVSY2ViKFJmZWkkUmd1bilSaSRSbWl0J1JuPnBsZXhvUnNpPD4lbmNlUnVjYVNjI1NxdWlzYVMsYVRpc2MgM0FkYUMjRWQhZUdtLSRMYXN0K0xoI0xvLk0tKU5jYE5ndWltTl1ObyVOLk9ue29Qb2NhUXVlJVI8aD5lc1J1ZSlTYyBTJGxhVDxnYVZlJTJBbilBcXVlKUF0KmFFYmV1VW1hZ2VtVXZpJjFFdTBEYUUnYUV0aXNhTGVnXkxpY2kgTHUtJUx2aWwvTSBNYmFOZCggTi5AUH5vLFIpU3N1J1N0JlRlVXAgVSxWbyAyQUBBbmNdQSRBeGVFY2VFZD9FZmVpJEVtaSBFbnMgRXAgIEVzaWxdRSV4JEV2LSdFeiBJbWEpSW5jZXNhSXNtYUl2I09jZXMsT2R1JE9mZSlPaWJpPU9qZSRPbWUlck9wYWcgT3NhTyUkck92PzJCbGljIERpbUwgTG19IExze2FOaCZOJ1BpbG9SZXphWD86OTlBZCtBbnRAQXIkQXNlRWJyIEVkYUVpam9FbiVFcmk9SW19b0luYUlvc3F1ZTpCPF5CaXNjb0NoIENpfSBEaSZJIEluXUlvSXZhSl5MI00mTmcoTmh1K1AhdStQYFBpZGV6UG9zYVF1ZSVSaWQhZVM8JVNjdW4vU2cgU3A_UyUnYVN1ciBUYXo8YVRve2EzQWxlemFBbmltIEF2KEJhaXggQmBkZUJvbCBDI0MtJUNoZWlvQ2lib0N8ZCBDcnUuQ3UgRGVEaW0nRH1kYUR1emlkYUVudmlvRiogRmxldCdGb2cgRltzY29GdWdpIEcmQEdpbWVHK0luI0kkckplaS5MYXRpdm9NP00tPU18LE5vdiNQIG9QYCdQbGUkUG9sL1Bbc2FQdWRpIFF1KChTLV1TZnJpIFNnYS5TaWQnU29sdihTcGVpJFNzYWNhUyluJVN1bSdUJi9UKFQnIFRvbV5UKy5WYCBWaSxyVm9sKTNBYy9DYUdpZGV6R29fLE0gTmd1ZVNeU2NvU30vNUImb0NoZT1EXkRlaW9Eb3ZART1yTGUpTTxvTmMgUyNTe2FTJFRhVHtvVCphVH4gVWNvVXBhWG81Ql9HaT1HbyxJdm9Nb1Blc3RbUyw6QnxDaSBDb2xhQ3VkJ0Rpb0YnYUdhR3JeSWJfTF5Me29MZyNMaXZhTHBpYyBMc2ljXUwuTHY_TWIgTXUraU4gTmZ9YU5ndWVOaWQhZVBhJFJkPmctJFJqZSlUdXIgVWQhZVhvZn1lWn0mM0MgQ34gRGFELSREaSNEbyxEdSRyR20tJEdbPUd1bj1JdmFMZSRMdmFnZW1NPCZNLSVOP04vck5zdSZOdCNQICNSZWk-Kmc-K1J2b1RlbWJfVHwzR2lsb0xodWUpTGljfWVNZXRyQE1wYXRATX4gTiZOYyhvTmd-IE5vcHNlTiRuaT4tZVJpVHUjNUIoPG9CK0N8X0dfSmFMZGFMZXRyIEwlJ29NYnJpb05hKU5kIE5lZyBOaD9Ob1Arbm9RdWUlUnInUiVpb1NzZWdvVGFxdWVUKHIgViNaKi81QXZpeiBCaWRhQm0oLEIsbG9CdCsnQ2EpQ2VzLENvRGVzJUZpeG9HP0coJ0plaSRMZmEkTSdPclAoaXxQbGljIFBvcyRQcmltJ1JkKj5maXMpUnBbcz5bJlJ0J1NwJ29TJW4kOkJgYUJsZSVCdV5DL0cgYGFMaChMb0x2ZXpNPC9NYnxpbU1wYU5nLSVOJFAgUGlvYz5kaW9SZWY-aj4reGFUdWFnZW1VcipvWGF0aXZvWGlzKTNBdHImQyhDaT1DbCNEaW8sSWFJbSBMZWZ9ZUxoI01wKG9OLSVOLHJOLlJtJlJub1JyLW9TZVNvdStTdCNUb1h0dStYdWdvM0ErR2BhSm9sb01iciBNaWRlek5naT1OJSdvUmFnZW1UfiA1QWxdQ11MKCBMaWNlTV5NaWwvTmBOdHUrUGUlUj5jaT1SbmVpb1JxdWVSciE-JFMuVWNhVXB7YVgqYTJBYiYvQWNlaiBBZHUkckFmZWcgQWplJEFtYUFuYyBBcG9Bc3tvQXQ_QXYgRSpvRW0oRXBpZCBFdm9JYWdlbUlib0ljaWNsb0lkLSVJbG9nQEluZCFlSXBsb0l0dXIgSXVuZiZPYyBPbWJlKU92YVVuZm9VcXVlMkJ-IEM8b0RvTGlwYVBpUmJvUm0-cXVlc2FUYCBUfGkmOjdWIDNCaWdvMEhhSWQhZUlmfG1lM09sb2dAU29UaWdhVWJ1MEE9SW5hVWZydSc6QyphRGkgRyBvLEk9LExhTC0lTGlkIWVMb1tzTilnZW1RdXtvUjxkPmUpUnIoU2N-IFNpbF1TLHUrWiBaaW8zQT1EIEdlLkljfiBMe29MaGljZUx1PU5jZT1yTmRhdiZOKCBOdFtSYiZSZCFlUmU_Umd9aD5tYC9Sbml6UnMgUiVuJVNwYVN0aT1UfGkmM0FkdSRBZ2VtQWogQXR1K0JyP0R7YURyIEBFbGFHYUctJUdpIEd8IEwgZWpvTmNvTmhlKU5pbE9sZSlSIT50dWRlU2kuUyRUciZWe29aKi81QT1yQXJHJkw8JUxlaWJvbEwpZ2VtTHVtbyxOdCFlNUwkVnV6YGE6OkRbelJvcGUzUXVlUmUuUmlmZTNOZyA6Ok5nI1JwIDNCdUw_OU1iIE9sb2dANU1iaT0iLAogICAgICAgICAgICAgICcweDIyMTkwMDA5MjZkZjdiNTBkOGFhMGEzZDQ5NTgyNmI5ODgyODdkZjQ2NTdmYmQxMDBlNmZlNTk2YzhmNzM3YWMnCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICBzdGF0aWMgd29yZGxpc3QoKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IHMgJiYgKHMgPSBuZXcgbygpKSwgczsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5MYW5nUHQgPSBvOwogICAgICB9LAogICAgICA3MjgwOiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5MYW5nWmggPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDY4OTYpLAogICAgICAgICAgcyA9IHIoNTMxNiksCiAgICAgICAgICBvID0gcigyMTA4KSwKICAgICAgICAgIGkgPQogICAgICAgICAgICAnfWFFIzRBPVl2JmNvIzROIzZHPWNKJlNNIzY2fC9aIzR0JmtufjQ2IzRLfjRxJWI5PUlSIzdsLG1CIzdXX1gyKmRsfVVvfjdzfVVmJkl3IzljJmN3fjZPJkg2Jnd4JklHJXY1PUlRfjhhJlB2IzQ3JFBSJjUwJUtvJlFNJjNsIzVmLEQ5IzRMfC9IJnRRO3YwfjZuXW5OPGRpLEFNPVc1JVFPJmthJnVhLGhNXnRtPXpWPUpBPXdSJitYXTdQJk5CIzRKIzVMfC9iW2RBfXRKPERvJjZtJnUyW1UxJktiLkhNJm1DPXcwJk1XPHJZLEhxIzZNfVFHLDEzJndQfUpwXU93JXVlJktnPEhQPEQ5fjRrfjlUJkkyX2M2JDlUIzkvW0M1fjdPfjRhPWNzJk83PUtLPUFuJmw5JDZVJDhBJnVEJlFJfC9ZJmJnfVV4JkYyIzZifUUyJkpOJmtXJmtwPVUvJmJiPVhsPENqfWsrfjVKIzZMJjV6JjlpfWI0JkZvLGhvKFgwX2czfjRPJEZ6JlFFPEhOPVd3XTYvJUdGLVZ3PXRqJi9EJlBOIzlnPVlPfWNMJk9mJlBJfjVJJklwPXZVPUlXIzlHOzBvLXdVfXNzJlFSPEJUJlI5PXRrJFBZX2RoJlBxLXloXTdULG5qLlh1PUVQJjc2PWNJJkZzKlhnfXo3JEdiJitJPURGLEFGPWNBfXJMIzdqPUR6JjN5PEFhJDUyPVBRfWIwKGlZJEZhfW9MJnhWIzZVPWVjPVdaLHhoJVJZPGRwIzlOJkZsJjQ0PVdIKkE3PXNoJlRCJjhQPTA3O3UrJlBLfXVofUo1IzcyKVYvPXhDLEFCJGswJmY2OzFFfCs1PTFCLDN2XTZuJndSJWIrJnh4XTdmPU9sfWZsOytEXndHXTdFO25CO3VoXklyJmw1PUpMLG5TPWNmPWc1O3U2fC9RJEdjPU1IJUhnIzVkJU02Xjg2PVUrJEd6LGwvLGlyXjV5JkJhJi9GLUlZJkZJJmJlJUlaIzc3JlBXX051JGtFKFlmJk5YXTdaLEp5JkZKKFhvJk56Iy9kPXk3Jk1YPEFnfVorO25FXUR0KGlHIzREPTEzJlBqfjRjJXY4JlpvJU9MJi9YIzRXPEhSJmllfjZKXzFPKFkyPXk1PUFkKmN2X2VCIzZrJlBYOkJVIzdBO3VrJkZ0JkZ4X2REPVUyO3ZCPVU1PTRGfStPJkdOLkhIOjlzPWIwJU5WKGpPJklIPUpUfVo5PVZaPEFmLEt4XjRtJnVKJWM2LDZyOzltIytMfWNmJUtoJkYzfjRIPXZQfWJ1LEh6fCsrLDF3XW52fWs2O3V1JGp3KktsKldYJnVNW3g3JkZyW203JE5PJlFOXWh1PUpOfW5SXjhnIy9oKHBzfEtDO3ZkfXh6PVYwfXA2JkZEJEcxIzdLPGJHXzRwfjhnJmNmO3U0PXRsfStrJTUvfWZ6O3V3PGNBPXUxfWdVfVZNPUxKPWVYJitMJlByIzRVfXAyOm5DLDJLXTdIOmpGJjl4fXVYIzlPPU1CPGZ6fjhYfjVtJjREJmtOJnU1JUUvKGg3KFpGJlZHPGRlKHFNfC9lLVd0PTN4KGErLC9SXWYvJk5EJFJvJm5VfTBnPUtBJWtIJk5LJEtlPGRTfWNCJklYfjVnJFROXTZtPVV2LElzJlB5PUVmJUt6IysvJWJpJitBPEY0JE9HJjRDJkZMIzlWPFprPTJJX2VFJjZjXW53JmtxJEhHfXkrJkE4JFAzfU9IPVhQXTcwJUlTKEFKX2dIJUdaJnRZJkFaPXZifjZ5Ji9yPVZJPVd2PFppPWZsPXhmJmVMfWM4fU9MPU1KPWc4JEY3PVlUfTl1PTArXnhDfUpIJm5MXk4wfjRUXUsyLEN5JU9DIzZzO3ZHKEFDXnhlXmNHJk1GfUJyIzlQO3dELTdoJE8vJnhBfUZuXlBDXTZpXTdHJjhWJFFzO3ZsKFRCfjczfjRsPG1XJjZWPTJ5JnVZJiszKWFQfVhGO0xQJmt4JHdVPXQ3O3V5PEZOJmx6KTdFPU9vKlkrO3dJfTlxfWxlO0o2JlJpJjR0JlFyIzhCPWNiJnZHPUo1fFFsKGg1PFl5fjQrfVFELEx4PXduJUsvJlJLPWRPJlB3LFE5PWNvJTR1Ozl1fWcwQDZhXjRJJWIwPXpvfC9jJnRYPWRRPU9TIytiPXl6X0FCJndCJlBtPVc5JEhQX2dSPTYyPUFPPXRpPWhJLG9BJmpyJmRIPXRtJmI2JFAyKHg4PXppO25HfjdGOzA1XTBuW0l4JjNtfXJnPVhwPWNkJnV6XTd0Ozk3PWNOO3ZWPGpmJkZGJkYxPTZRJklrKktrJlA0LDJ6PWZRXTdEJjN1LEgwPWQvfVV3PFpOPDdSfUt2OzBmJEg3LE1EXTduJEYwIzg4fjlaJWRhPWJ5OytUIy91PVZGJmZPJmtyXmtmPEFCXXNVLEk1JE5nJlB6OzBpJlFEJnZNPVlsOkJNO25KX3hKXVU3JktmJjMwLDNmfFo5KmRDKWplX2pBJlE0JktwJE5IKFl6IzZTJklkJUliPUtYLEFEPUtWJWRQfXRXJlBrXitFX05pPWNxLDNSfVZaKFNpPWIrfXJ2OzBqfXJaXXVBLC93KFN4Jkp2JHc5JjRkJndFLE5KJEd5PUovXUxzIzdrPFpRPFkvJnVqXU92JFBNO3YzLDJGJit1OnVwPU9uJjNlLEp2OzkwPUorJlFtXTZxfWJLIytkfjhZKGgyXWhBOzk5JkFTPUkvfXFCJmRRfXlKLVZNfVZsJnVpLGlCJkczfERjXTdkPWVRJWRYJUpDXzFMfjRkXk5QO3ZKJi8xKVpJIzdOXTlYW2JRJlBMPTBMKFVaLExtJmtjJklSfW43KGlSPEFRPGRnPTMzPXZOfWZ0fWF1XTdJLEJhPXg5PWRSfjZSJlRxPVhpLDNkJE5yJkJjfURJJmt1JnZmXURuLC9GJmlELExsJk53PTB5Jkk3PUxzPS9BJnRVPVFlfVVhJnVrJitGPWc0PWdoPVZqIysxJlFufVV5KjQ0IzVGLFBjJlJ6KlhuPW9oPTVXOzBuX05mKGlFPFk3PXZyPVp1XW96IzVaJW1JPWtOPUJ2X0pwKFQyO3Z0X01sPEZTJnVJPUwvJjZQXTY0JE03fTg2PGJvJVFYKFNJJUlZJlZLPUFsJlV4O3Z2O3V0KkUvJXVoPFpFfE8zLE0yKHljXXl1PVdrJnRwOkV4fWhyLENsJldFKStaPThVfUkyXzRRLGhBX3NpPWl3PU9NPXRNPXlaJUlhPVU3O3dUfWIrO3VvPVphfXlTITV4fUhEfWZiIzVPX2RBO052JXVCKHlCOzAxKFNmfUZrO3Y3fVB0Izh2PG1aIzdMLC9yJlBsfjR3JmY1PVBoJEZ3X0xGJjhtLGJMPXlKJkJIfXAvKkpufXRVfjVRO3dCKGg2XURmXThwXitCO0U0JldjPWQrO0VhJmJ3JDhDJkZOLERNPVlmfW1QfjV3PWZUIzZWPW1DPUZpPUFWfWpCJkFOfWxXfWFIIy9EKWRaO2hsO3ZFfS83LENKOzMxJnc4LGhqJXU5X0pzPWpKJjRNfjhrPVROJmVDfW5MJnVjLXdpJmxYfWRqPU12PWUyIzZ1PWNyJHVxJDZHXThXfUpiOm5tPVlnPGIzKFVBO3ZYJjZuJnhGPUtULGpDLERlJlI4Jm9ZPVp2Jm9CXTcvPVoyJk9hfWJmLGhoKDRoXnRaJjcyJk54O0QyJnhMfjVofjQwKVpHKWgrPU9KJlJBXUJ2JHlCPU9xPWRmLEFRJUpufU9KOzExLDN6JlRsJnRqO3YrXkh2LERoKGlkPXMrXTdOJk4zKTlRfjhmLFM0PXVXPXc0JnVYLExYJjNkXUNKJnlwJjh4PGIyX2RvJmxQPXkvPGN5X2RHPU9pPTdSKFZIKGx0XzFULElxX0FBOzEyXjZUJWs2IzhLW0Ixe29PPEFVW0J0OzFiJDlTJlBzPDhUPVN0e2JZLGpCKFpwJjYzJlV2JDlWLFBNXTZ2JkFmfXpXW2JXX29xfXNtfW5CJktxJmdDJmZmX2VxXzJtJjVGJlRJfXJmfUdmO1pyX3o5O0VSJmprfWl6X3NuPEJOfituJnZvPVZpJTk3fFpSPVdjLFdFJjZ0XTZ6JTg1KGx5Izg0PUtZKTZtXzUvPWFYLE4zfVRtJmhlJjZLXXRSX0IyLUkzO3UvJmhVJmxIPEFQPWlCJklBPVhMOy81Jk5oPXd2PEJIIzc5PXZTPXpsPEFBPTBYX1JHfUJ3JjlwJE5XLEFYJmtQX0xwJi9aKFRjXU11fWhzIzZJfTVCJmNJPGJxJkg5IzZtPUs5fXZIKFkxKFkwIzRCJnc2LC85JmdHPGJFLC9PPXpifUk0X2w4PEIvO3dMJVFvPEhPW01xPVhYfTB2JkJQJkY0KG1HfTBpfW5tLEVDPTl1e0kzLHhHJi85PUpZKkRLJmhSKUJYPUVJPWN4PWIvezZrfXlYJUErJndhfVhiPWxhO3dpXmxMOzB0fWpvJlFiPXhnPVhCfWlPPHFve2JSPU5WJjhmPWEwJkp5OzB2PXVLKUhLO3ZOIzZoJmpCKGgvJXVkJk5JJXdZLlg3PVB0fUN1LXVMJkdzX2hsJW1ILHRtXTc4PUxiXlEwIzdZPTF1PEJ0JitRPUNvX1JILHczOzFlfXV4PGFVO3VpfVUzJlE1JWJ0XTYzJlVRfDBsJnVMfU83JjNvLEFWJmRtfE5qKFh0KjUrKFV1JkhoKHA3KFVGPVZSPUJwXkpsJkhkW2l4KTkvPUlxXUM4PDY3XTY2fW1CJTZmfWJifUpJXThUJEhBfWRiPVlNJnBhPTJKfXRTJlkwPVBTJnk0PWNYJDZFLGhYLFhQJm5SOzA0LEZRJmwwJlZtX0R2IzVZfjhaPUJpJU1BXTZ4PUpPOitwLEF6JjlxLEhqfjYvfVNEPUsxOkVKfW5BO1FvIy9FXTlSLEllJjZYJVczXTYxJnY0PXhYX01DPTBxOzA2KFhxPWZzfUlHfUR2PTBsfW83JGlaOzl2JkxIJkRQLTdhJk9ZLFNaLEt6LEN2JmRoPWZ4fE5oLEYvfjdxPVhGJncrOzluJkd3OzBofVo3PDdPJkpLKFM3JkxTPEFEPGFjPXdvPER0Jnp3JTRCPTR2IzhQOzlvfjZwKnZWPVRtLE9yJkk2PTFxfW5ZPVAwPWdxJkJsJlV1LENoJXlifVVZPXpofWRofXJsKFQ0X3hrKFlBIzhSKnhILElOfUpuXTdWfUM0JlR5fWozXTdwPWNMPTNoJndXJVF2PFozPWYwJlJJJitTKGljX3pxfW9OJi9ZPXoxO1RkPUxXPTBlPU9JKFZjLCtiXmp1KFVMOzByOlphJTh2PVJwPXp3JjU4JjczJndLfXFYXTZ5JjhFKWEyfVdSPXdQXnVyJm5RPGNIfVJlPUFxJndrfVEwJitxPVBQLEdjfC9kXms1LEZ3XThZfVBnXXAzPWp1PWVkfXI1X3lmJkNzXTd6JC9HPENtJkpwJjU0XzFHX2dQX0xsfUpaOzB1XWs4XzdrKFNnXTY1ezlpPUxOJlN4JldLLGlXJmZEJkxrezlhfUVtLTljIzhOJmlvPXN5XThkJm5UJklLKGx4IzcvJGxXKFRkPHM4fjQ5LDNvPDdZPU1XKFQrX0pyJldkLGlMfUN0PXhoJjVWO3Y0JjhuJUt4PWlGJmwyXzBCe0IrLElmKEowLEx2O3U4PUt4LXZCPUhDJnZTPVo2JmZVJnZFXnhLOzNEPTRoPU1SIzQ1Okp3OzBkfWl3PUxVfUk1PUkwXWdCKmltLEs5fUdVLDFrXzRVJlR0PVZzKGlYJmxVKFRGIzd5LFpPfW9BJm01IzVQfVBOfVV6PWhNPEIxJkZCPGFHLGU2fjdUPHRQKFVRX1pUPXd1JkY4KWFRXWlOLDFyX0xvJi9nOkNEfTg0e0oxX0tpJk5hJjNuJGp6JkZFPWRjO3V2O3ZhfWlufWxsPWZ2KGgxJjNofWZwPUN5fUJNKCtFfjhtfWxvJXY3PWhDKFQ2JGNqPUJRPUJ3KERSLDJqPUtzLE5TfEYrOzAwPWZVPTcwfU1iKFlVOytHJm03JmhyPVNrJUNvXXQrKFg1X0p3fTByfWdDKEFTLUlQJlFLPFoyIzhRJFdDXVdYfVQyJnBHX0thLEhDPVI0Ji9OO1orO2NoKEM3LEQ0JDNwX01rJkIyJDhEPW45JUt5IzV6KENUJlFKIzdCXURDXWdXfW5mfjVNO0l3IzgwfVRjXzFGIzRaLWFDfUhsPXBoPWZ6LC8zPWFXfUpNfW5uO0RHO3ZtfXduLDRQfVQzO3d4JlJHJHUrfXpLPTBiOytKX0Vre3JlPGFaPUFTfXlZIzVEXTdxLENwfXhOPVZQKjJDfUdafWFHfittX0NzPU9ZIzZyXTZnPEdTfUxDKFVCPTNBPUJvfUp5PGM0fUlzOzFQPEFHfU9wPFoxfWxkfW5TPTFaLHlNJjk1Jjk4PUNKKDR0OjJMJEhrPVpvfVZjOytJfW5wJk4xfTl5PWl2fUNPKjdwPWpMKXB4XXRiXnpoJkdTJlZsJXYvO3ZSPTE0PXpKJjQ5fC9mXWhGfVdHOzAzPThQfW8vJkdnJnJwO0RCLEt2fUppJlBiO2FBXmxsKDRqJXl0fStLJEh0IzR5JmhZXTdZPEYxLGVOfWJHKFVoJTZaXXQ1JUc3OytGX1JFO2l0fXRMPUxTJkRhPVh4KFMrKDRmPThHPXlJfWNKfVdQPTM3PWpTfXBYfWhkKWZwPEE4PUp0fitvJEhKPU02fWlYPWc5fUNTPWR2PUNqKG1QJUtkLHhxfCs5JkxEKDQvPVhtJlFQPUxjfUxYJmZMOytLPU9wKGx1PVFzLnFDOitlJkwrPUpqIzh3O1NMXTdTKGIrIzRJPWMxJm5HX0xmJnVIOytSKVpWPGJWJUIvLFRFJjBIJkpxJkFoJU9GJlNzKHAyLFd2JkkzPVdsfVZxOzFMJmxKIzliXzFIPThyPWI4PUpIKFNaPWhEPUoyIzdVLC9VIy9YfjZQLEZVPGVMPWp4LG1HPWhHPUNFJlBVPVNlKHFYJkxZPVg2PXk0JnRrJlFRJnRmPTRnJnhJfVcrJm1aPURjIzd3fUxnO0RBO3dRX0tiKGNKPWhSJXlYJlliLGh3e2JYXzRYO0VQOzFXXzJNfVVjPWI1KFlGLENNJlRwXk9Ke0REXTZzPXZGPVlvfjhxfVhIfUZ1JVA1KFNKPVF0O01PXXM4PEYzJkIzJjhUKFVsLUJTKmR3JmRSPDg3fS84XTYyJFBaXUx4PEF1fTlRXTdjPWphPUtSLEdvLFVzJnY2KHFrfXBHJkcyPWV2XkdNJXc0Jkg0XTdGJmR2XUo2fUV3Ojl3PXNqLVpMfVltJCtoKFV0KFVtfjRuPVhzKFU3JWVFPVFjX0pSPENBIzZ0PEZ2fC9JLElTLEVHPEYyKFh5JC9uPEZhKGg5fSs5XzJvJk40IzdYPFpxfCtmX0RwPWR0Jm5hLENhPU5KKWpZPThDPVlHPXM2JlErPERPfUQzPXhCJlIxKGx3O1FuPGJGKEN1fC9CfUhWPVNTJm43LDEwJnUwXURtJUE2XjRRPVdSKFREPVhvPEdILFJqKGw4KWJQJm4vPUxNJkNGLEY1Jm1sPVBKOzBrPUxHPXRxLFJoLEQ2QDRpPTFwJis5PVlDJWVyX01oO25JOzBxPUZ3XTgwPXhxPUZNJEd2O3Y2Jm5jO3dLJUgyJktqO3ZzLEFBPVlQLDY2fWJJKHFSfjVVPTZxfjRiJE5pPUs1LlgzJFNvJkl1KHArXThHPUNmPVJZKFRTX08zKGlIJjU3PWZFPURnX0RvIzl6IzdIO0ZLe3FkXzJrJUpSfWVuJmdoX3o4O1J4fTlwPGNOX05lLERPO0xOXzdvfi9wPU5GPTVZfWdOPGNlPEMxLFFFXVd2PTN1PEJDfUdLXXlxfURZJnUvX2hqPUlJKHB6JnJDLGpWJitafXV0PU5RO0NnLVNSX1pTLCtvPXUvO095X1JLX1FGKEZ4JnhQfVdyJlRBLFVoJmcxPXlye2F4W1ZGJFBnKFlCO094PVZ5OytXKFNwfVhWJWRkJjMzKGwvXWw0IzRZfU9FPTZjPWJ3KEE3Jjl0JXdkJk4vJm1vLEpIJlFlKWZtPUFvfWZ1PXRIJywKICAgICAgICAgIGEgPSB7IHpoX2NuOiBudWxsLCB6aF90dzogbnVsbCB9LAogICAgICAgICAgYyA9IHsKICAgICAgICAgICAgemhfY246ICcweDE3YmNjNGQ4NTQ3ZTVhNzEzNWUzNjVkMWFiNDQzYWFhZTk1ZTc2ZDgyMzBjMjc4MmM2NzMwNWQ0ZjIxNDk3YTEnLAogICAgICAgICAgICB6aF90dzogJzB4NTFlNzIwZTkwYzdiODdiZWMxZDcwZWI2ZTc0YTIxYTQ0OWJkM2VjOWMwMjBiMDFkM2E0MGVkOTkxYjYwY2U1ZCcKICAgICAgICAgIH0sCiAgICAgICAgICB1ID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nOwogICAgICAgIGZ1bmN0aW9uIGwoZSkgewogICAgICAgICAgaWYgKG51bGwgIT0gYVtlXSkgcmV0dXJuIGFbZV07CiAgICAgICAgICBjb25zdCB0ID0gW107CiAgICAgICAgICBsZXQgciA9IDA7CiAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IDIwNDg7IG4rKykgewogICAgICAgICAgICBjb25zdCBvID0gJ34hQCMkJV4mKl8tPVtde318OzosLigpPD4_Jy5pbmRleE9mKGlbMyAqIG5dKSwKICAgICAgICAgICAgICBhID0gWzIyOCArIChvID4-IDIpLCAxMjggKyB1LmluZGV4T2YoaVszICogbiArIDFdKSwgMTI4ICsgdS5pbmRleE9mKGlbMyAqIG4gKyAyXSldOwogICAgICAgICAgICBpZiAoJ3poX3R3JyA9PT0gZSkKICAgICAgICAgICAgICBmb3IgKGxldCBlID0gbyAlIDQ7IGUgPCAzOyBlKyspCiAgICAgICAgICAgICAgICBhW2VdID0KICAgICAgICAgICAgICAgICAgdS5pbmRleE9mKAogICAgICAgICAgICAgICAgICAgICdGQVpEQzZCQUxjTFpDQStHQkFSQ1c4d05DY0REWjhMVkZCT3FxRFVpb3UrTTQyVEZBeUVSWEZiN0VqaFArdm1CRnBGclVwZkRWMkY3ZUIrZUNsdENISkZXTEZDRUQrcFdUb2pFSUhGWGMzYUZuNEY2OHpxakV1S2lkUzFRQlZQREVoRTdOQTRtaE1GN29UaEQ0OW90M0ZndHpIRkNLMGFjVzF4OERIMUVtTG9JbHJXRkJMRSt5NStOQTNDeDY1d0pIVGFFWlZhSzFtV0FtUEd4Z1lDZHh3T2pUREl0L2ZhT0VoVGwxdnFOc0t0SkNPaEpXdWlvMmcwN0tMWkVRc0ZCVXBOdHdFQnlCZ3hGc2xGaGVGYmlFUHZpNjFtc0R2QXB4Q3pCNnJCQ3pveDdqb1lBNVVkRGMrQ2I0RlNnSWFicFhGQWozYmprbUZBeENaRSttRC9TRmYvMEVMZWNZQ3QzbkxveEM2V0VaZjJ0S0RCNG9adnJFbXFGa0trN0J3SUxBN2d0WUJwc1RxLy9ENGpEMEYwd0VCOXB5UTFCRDVCYTBvWUhESStzYkRGaHZySFhkREhmZ0ZFSUpMaTVyOHFlcmNORkJnRkxDNGJvNUVSSnRhbVdCREZ5NzNLQ0ViNk04VnBtRXQzMzB5Z0NUSzU4RUlJRmtZZ0Y4NGd0R0E5VXloM202OGlWckZiV0ZiY2JxaUNZSFo5SjFqZVJQYkw4eXN3aE1pRGJoRWhkTm9Td0ZiWnJMVDc0MEFCRXFnQ2tPOEoxQkxkMVZoS0tSNHNEMXlVbzB6K0ZGNTlNdmc3MUNGYnlFaGJIU0ZCS0VJS3lvUU5nUXBwcTlUMEtBcWVQdTBaRkdyWE9IZEtKcWtvVEZoWXZwRE55dXV6bnJOODR0aEpic0NvTzZDdTZYbHZudHZ5MFFZdUFFeFFFWXRUVUJmM0NvQ3F3Z0dGWjR1MUhKRnpEVndFeTNjamNwVjRRdnNQYUJDM3JDR3lDRjIzbzRLM3BwMmdiZXJHZ0ZFSkVIbzRuSElDdHlLSDJacXl4aE4wNUtCQkpJUWxLaC9PdWp2L0RIMzJWcmxxRmRJRkM3Rno5Q3Q0a2FxRk1FMFVFVExwcm5OOWtmeStrRm10UUJCMCs1Q0Z1ME45SWo4bC9WdkpEaDJvcTNoVDZFempUSEtGTjdaalp3b1RzQVo0RXhza282RnBhNldDK3NkdXo4anlyTHBlZ1R2MmgxRUJlWXBMcG0yY3pRVzBLb0NjUzBiQ1ZYQ211V0pEQmpOMW5RTkxkRjU4U0ZKMGg3aTNwQzNvRU9LeS9GakJrbEw3MFh2QkVFSVdwMnlaMDR4T2J6QVdEREpHN2YrRGJxQkVBN0x5aVI5NWo3TURWZERWaXoyUkU1dldsQk12NWU0K1ZmaFAzYVhOUGh2TFN5bmI5TzJ4NHVGQlYrM2pxdTZkNXBDRzI4L3NFVEJ5dm11LytJSjBMM3diNHJqOUROT0xCRjZYUElPRHI0TDE5VTlSUm9mQUc2Tnh5ZGk4QmtpOEJoR0piQkFKS3piSnhrWlNsRjlRMkN1OG9LcWdnQjloQkFyd0xMcUVCV0V0Rm93eThYSzhiRXl3OXNuVCtCZXlGazFaQ1NyZG1nZkV3RmVQVGdDakVMQkVuSWJqYUREUEptMzZyRzlwenRjRXpUOGRHazIzU0JoWEJCMUg0eitPV3plMG9vRnp6OHBEQllGdnA5ajl0dkZCeWY5eTRFRmRWbnowMjZDR1I1cU1yN2Z4TUhOOFVVZGx5SkF6bFRCRFJDMjhrK0w0RkI4MDc4bGp5RDkxdFVqMW9jblRzOHZkRWY3em5iem0rR0lqRVpub1pFNXJuTEw3MDBYYzd5SGZ6MDVuV3h5MDN2QkI5WUdIWU9XeGdNUUdCQ1IyNENWWU5FMWhwZkt4TjB6S25mSkRtbU1nTW1CV3FOYmpmU3lGQ0JXU0NHQ2dSOHlGWGlIeUVqK1Z0RDFGQjNGcEMxekkwa0ZiemlmaUtUTG05eXE1ekZtdXIrcThGSHFqb09CV3NCUGlEYm5DQzJFcnVuVjZjSjZUeWdYRllIWXA3TUtOOVJVbFNJUzgveEJBR1lMemVxVW5CRjRRYnNUdVVrVXFHczZDYWlEV0tXalFLOUVKa2pwa1RtTkNQWVhMJ1sKICAgICAgICAgICAgICAgICAgICAgIHIrKwogICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgKSArICgwID09IGUgPyAyMjggOiAxMjgpOwogICAgICAgICAgICB0LnB1c2goKDAsIHMudG9VdGY4U3RyaW5nKShuZXcgVWludDhBcnJheShhKSkpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCgwLCBuLmlkKSh0LmpvaW4oJ1xuJykgKyAnXG4nKSAhPT0gY1tlXSkgdGhyb3cgbmV3IEVycm9yKGBCSVAzOSBXb3JkbGlzdCBmb3IgJHtlfSAoQ2hpbmVzZSkgRkFJTEVEYCk7CiAgICAgICAgICByZXR1cm4gKGFbZV0gPSB0KSwgdDsKICAgICAgICB9CiAgICAgICAgY29uc3QgZCA9IHt9OwogICAgICAgIGNsYXNzIGYgZXh0ZW5kcyBvLldvcmRsaXN0IHsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgc3VwZXIoJ3poXycgKyBlKTsKICAgICAgICAgIH0KICAgICAgICAgIGdldFdvcmQoZSkgewogICAgICAgICAgICBjb25zdCB0ID0gbCh0aGlzLmxvY2FsZSk7CiAgICAgICAgICAgIHJldHVybiAoMCwgcy5hc3NlcnRBcmd1bWVudCkoZSA-PSAwICYmIGUgPCB0Lmxlbmd0aCwgYGludmFsaWQgd29yZCBpbmRleDogJHtlfWAsICdpbmRleCcsIGUpLCB0W2VdOwogICAgICAgICAgfQogICAgICAgICAgZ2V0V29yZEluZGV4KGUpIHsKICAgICAgICAgICAgcmV0dXJuIGwodGhpcy5sb2NhbGUpLmluZGV4T2YoZSk7CiAgICAgICAgICB9CiAgICAgICAgICBzcGxpdChlKSB7CiAgICAgICAgICAgIHJldHVybiAoZSA9IGUucmVwbGFjZSgvKD86XHUzMDAwfCApKy9nLCAnJykpLnNwbGl0KCcnKTsKICAgICAgICAgIH0KICAgICAgICAgIHN0YXRpYyB3b3JkbGlzdChlKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsID09IGRbZV0gJiYgKGRbZV0gPSBuZXcgZihlKSksIGRbZV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuTGFuZ1poID0gZjsKICAgICAgfSwKICAgICAgNDk0NDogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQuV29yZGxpc3RPd2wgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDY4OTYpLAogICAgICAgICAgcyA9IHIoNTMxNiksCiAgICAgICAgICBvID0gcig3NTMyKSwKICAgICAgICAgIGkgPSByKDIxMDgpOwogICAgICAgIGNsYXNzIGEgZXh0ZW5kcyBpLldvcmRsaXN0IHsKICAgICAgICAgICNyOwogICAgICAgICAgI0d0OwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgcikgewogICAgICAgICAgICBzdXBlcihlKSwgKHRoaXMuI3IgPSB0KSwgKHRoaXMuI0d0ID0gciksICh0aGlzLiNqdCA9IG51bGwpOwogICAgICAgICAgfQogICAgICAgICAgZ2V0IF9kYXRhKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4jcjsKICAgICAgICAgIH0KICAgICAgICAgIF9kZWNvZGVXb3JkcygpIHsKICAgICAgICAgICAgcmV0dXJuICgwLCBvLmRlY29kZU93bCkodGhpcy4jcik7CiAgICAgICAgICB9CiAgICAgICAgICAjanQ7CiAgICAgICAgICAjSHQoKSB7CiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuI2p0KSB7CiAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RlY29kZVdvcmRzKCk7CiAgICAgICAgICAgICAgaWYgKCgwLCBuLmlkKShlLmpvaW4oJ1xuJykgKyAnXG4nKSAhPT0gdGhpcy4jR3QpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJJUDM5IFdvcmRsaXN0IGZvciAke3RoaXMubG9jYWxlfSBGQUlMRURgKTsKICAgICAgICAgICAgICB0aGlzLiNqdCA9IGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuI2p0OwogICAgICAgICAgfQogICAgICAgICAgZ2V0V29yZChlKSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLiNIdCgpOwogICAgICAgICAgICByZXR1cm4gKDAsIHMuYXNzZXJ0QXJndW1lbnQpKGUgPj0gMCAmJiBlIDwgdC5sZW5ndGgsIGBpbnZhbGlkIHdvcmQgaW5kZXg6ICR7ZX1gLCAnaW5kZXgnLCBlKSwgdFtlXTsKICAgICAgICAgIH0KICAgICAgICAgIGdldFdvcmRJbmRleChlKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiNIdCgpLmluZGV4T2YoZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHQuV29yZGxpc3RPd2wgPSBhOwogICAgICB9LAogICAgICA3NDk2OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5Xb3JkbGlzdE93bEEgPSB2b2lkIDApOwogICAgICAgIGNvbnN0IG4gPSByKDQ5NDQpLAogICAgICAgICAgcyA9IHIoNjM0OCk7CiAgICAgICAgY2xhc3MgbyBleHRlbmRzIG4uV29yZGxpc3RPd2wgewogICAgICAgICAgI1h0OwogICAgICAgICAgY29uc3RydWN0b3IoZSwgdCwgciwgbikgewogICAgICAgICAgICBzdXBlcihlLCB0LCBuKSwgKHRoaXMuI1h0ID0gcik7CiAgICAgICAgICB9CiAgICAgICAgICBnZXQgX2FjY2VudCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuI1h0OwogICAgICAgICAgfQogICAgICAgICAgX2RlY29kZVdvcmRzKCkgewogICAgICAgICAgICByZXR1cm4gKDAsIHMuZGVjb2RlT3dsQSkodGhpcy5fZGF0YSwgdGhpcy5fYWNjZW50KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdC5Xb3JkbGlzdE93bEEgPSBvOwogICAgICB9LAogICAgICAyMTA4OiAoZSwgdCwgcikgPT4gewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pLCAodC5Xb3JkbGlzdCA9IHZvaWQgMCk7CiAgICAgICAgY29uc3QgbiA9IHIoNTMxNik7CiAgICAgICAgdC5Xb3JkbGlzdCA9IGNsYXNzIHsKICAgICAgICAgIGxvY2FsZTsKICAgICAgICAgIGNvbnN0cnVjdG9yKGUpIHsKICAgICAgICAgICAgKDAsIG4uZGVmaW5lUHJvcGVydGllcykodGhpcywgeyBsb2NhbGU6IGUgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBzcGxpdChlKSB7CiAgICAgICAgICAgIHJldHVybiBlLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xzKy9nKTsKICAgICAgICAgIH0KICAgICAgICAgIGpvaW4oZSkgewogICAgICAgICAgICByZXR1cm4gZS5qb2luKCcgJyk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSwKICAgICAgOTQ3MjogKGUsIHQsIHIpID0-IHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiAhMCB9KSwgKHQud29yZGxpc3RzID0gdm9pZCAwKTsKICAgICAgICBjb25zdCBuID0gcig3MTY4KSwKICAgICAgICAgIHMgPSByKDIxNDQpLAogICAgICAgICAgbyA9IHIoMTQ2OCksCiAgICAgICAgICBpID0gcigyNTAwKSwKICAgICAgICAgIGEgPSByKDg1NDgpLAogICAgICAgICAgYyA9IHIoNjAzKSwKICAgICAgICAgIHUgPSByKDYzOTYpLAogICAgICAgICAgbCA9IHIoNTk0OCksCiAgICAgICAgICBkID0gcig3MjgwKTsKICAgICAgICB0LndvcmRsaXN0cyA9IHsKICAgICAgICAgIGN6OiBuLkxhbmdDei53b3JkbGlzdCgpLAogICAgICAgICAgZW46IHMuTGFuZ0VuLndvcmRsaXN0KCksCiAgICAgICAgICBlczogby5MYW5nRXMud29yZGxpc3QoKSwKICAgICAgICAgIGZyOiBpLkxhbmdGci53b3JkbGlzdCgpLAogICAgICAgICAgaXQ6IHUuTGFuZ0l0LndvcmRsaXN0KCksCiAgICAgICAgICBwdDogbC5MYW5nUHQud29yZGxpc3QoKSwKICAgICAgICAgIGphOiBhLkxhbmdKYS53b3JkbGlzdCgpLAogICAgICAgICAga286IGMuTGFuZ0tvLndvcmRsaXN0KCksCiAgICAgICAgICB6aF9jbjogZC5MYW5nWmgud29yZGxpc3QoJ2NuJyksCiAgICAgICAgICB6aF90dzogZC5MYW5nWmgud29yZGxpc3QoJ3R3JykKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgdCA9IHt9OwogIGZ1bmN0aW9uIHIobikgewogICAgdmFyIHMgPSB0W25dOwogICAgaWYgKHZvaWQgMCAhPT0gcykgcmV0dXJuIHMuZXhwb3J0czsKICAgIHZhciBvID0gKHRbbl0gPSB7IGV4cG9ydHM6IHt9IH0pOwogICAgcmV0dXJuIGVbbl0uY2FsbChvLmV4cG9ydHMsIG8sIG8uZXhwb3J0cywgciksIG8uZXhwb3J0czsKICB9CiAgKHIuZCA9IChlLCB0KSA9PiB7CiAgICBmb3IgKHZhciBuIGluIHQpIHIubyh0LCBuKSAmJiAhci5vKGUsIG4pICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBuLCB7IGVudW1lcmFibGU6ICEwLCBnZXQ6IHRbbl0gfSk7CiAgfSksCiAgICAoci5vID0gKGUsIHQpID0-IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KSksCiAgICAoci5yID0gKGUpID0-IHsKICAgICAgJ3VuZGVmaW5lZCcgIT0gdHlwZW9mIFN5bWJvbCAmJgogICAgICAgIFN5bWJvbC50b1N0cmluZ1RhZyAmJgogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pLAogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAnX19lc01vZHVsZScsIHsgdmFsdWU6ICEwIH0pOwogICAgfSksCiAgICByKDI4MDgpOwp9KSgpOwo', 'base64url').toString()}`, { eval: true });\n                  worker.postMessage(input);\n                  const callResponse = await new Promise((resolve, reject) => {\n                    worker.on('message', (message) => {\n                      console.log(\"shim code - worker has finished.\");\n                      worker.terminate();\n                      if (message.error) return reject(message.error);\n                      resolve(message);\n                    })\n                  });\n                  const parser = eval(postProcessingObject[endpointParameters.name]);\n                  return { response: parser(callResponse) };\n                }\n              ",
            "timeoutMs": 5000
          }
        }
      ]
    }
  ],
  "apiCredentials": [
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "ETHEREUM_RPC_URL",
      "securitySchemeValue": "${ETHEREUM_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "OPTIMISM_RPC_URL",
      "securitySchemeValue": "${OPTIMISM_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "BINANCE_SMART_CHAIN_RPC_URL",
      "securitySchemeValue": "${BINANCE_SMART_CHAIN_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "POLYGON_RPC_URL",
      "securitySchemeValue": "${POLYGON_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "POLYGON_ZKEVM_RPC_URL",
      "securitySchemeValue": "${POLYGON_ZKEVM_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "MOONBEAM_RPC_URL",
      "securitySchemeValue": "${MOONBEAM_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "MANTLE_RPC_URL",
      "securitySchemeValue": "${MANTLE_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "BASE_RPC_URL",
      "securitySchemeValue": "${BASE_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "ARBITRUM_RPC_URL",
      "securitySchemeValue": "${ARBITRUM_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "AVALANCHE_RPC_URL",
      "securitySchemeValue": "${AVALANCHE_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "LINEA_RPC_URL",
      "securitySchemeValue": "${LINEA_RPC_URL_VALUE}"
    },
    {
      "oisTitle": "BlastAPI",
      "securitySchemeName": "BLAST_RPC_URL",
      "securitySchemeValue": "${BLAST_RPC_URL_VALUE}"
    }
  ]
}
